[
{"url": "https://help.aliyun.com/zh/ecs/support/troubleshooting-1/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span>故障排除</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>故障排除</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-20 11:11:00</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></li>\n <li><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></li>\n <li><a href=\"/zh/ecs/support/unable-to-connect-to-and-access-the-ftp-service-in-a-windows-instance\">实例内第三方软件安装与配置问题</a></li>\n <li><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></li>\n <li><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></li>\n <li><a href=\"/zh/ecs/support/network-and-security-group-issues/\">网络与安全组问题</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/network-and-security-group-issues/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span>网络与安全组问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>网络与安全组问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-06 18:13:11</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/troubleshooting-for-ping-attempts-to-pass-the-server-and-port-disconnection\">无法ping通ECS实例公网IP的排查方法</a></li>\n <li><a href=\"/zh/ecs/support/when-you-ping-the-internet-address-of-a-windows-instance-the-system-prompts-general-fault\">Windows系统的ECS实例ping外网地址提示“一般故障”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/check-whether-tcp-port-80-is-available\">无法访问ECS实例中的服务的排查方法</a></li>\n <li><a href=\"/zh/ecs/support/troubleshoot-the-issue-that-an-instance-can-be-pinged-but-the-required-port-cannot\">能ping通ECS实例但端口不通的排查方法</a></li>\n <li><a href=\"/zh/ecs/support/why-can-t-the-ecs-instance-access-the-public-network-environment\">为什么Windows系统的ECS实例配置辅助私网IP后，无法从ECS实例中访问公网环境？</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/why-can-t-the-ecs-instance-access-the-public-network-environment", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/network-and-security-group-issues/\">网络与安全组问题</a></span>\n <span>为什么Windows系统的ECS实例配置辅助私网IP后，无法从ECS实例中访问公网环境？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>为什么Windows系统的ECS实例配置辅助私网IP后，无法从ECS实例中访问公网环境？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-03 10:10:39</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2351722\"><p id=\"2e265a4203c4v\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍Windows系统的ECS实例配置辅助私网IP后，无法从ECS实例中访问公网环境的问题原因和解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"53f8aa2003sfw\" class=\"section\"><h2 data-tag=\"p\" id=\"2e265a4103kg8\" class=\"p\"><b>问题现象</b></h2><p id=\"4aadf8d003toh\">Windows系统的ECS实例配置辅助私网IP后，无法从ECS实例中访问公网环境。</p></section><section id=\"55f404f003h18\" class=\"section\"><h2 id=\"40bc3210033l3\"><b>问题原因</b></h2><p id=\"5e12925003lyy\">Windows Server 2008之后的操作系统，微软将出网IP策略调整为选择与下一跳IP的前缀匹配（<b>matching prefix</b>）最长的IP。</p><p jc=\"left\" id=\"9338875019rcz\" style=\"text-align:left\">假设当前ECS实例使用的是windows Server 2008之后的版本，且实例的私网IP地址和网关的配置如下，因辅助私网IP地址（192.168.1.68）与下一跳IP地址（网关：192.168.1.127）的前缀匹配长于主私网IP（192.168.1.14）与下一跳IP地址（网关：192.168.1.127）的前缀匹配，那么辅助私网IP的优先级高于主私网IP，出网流量将由辅助私网IP发送。</p><table id=\"d8c39fa416ixa\" tablewidth=\"993\" tablecolswidth=\"331 331 331\" class=\"table\"><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><tbody class=\"tbody\"><tr id=\"d8c39fa516yxf\"><td id=\"d8c39fa616dmq\" rowspan=\"1\" colspan=\"2\"><p id=\"d8c5746116ffg\">私网IP地址</p></td><td id=\"d8c39faa168ct\" rowspan=\"1\" colspan=\"1\"><p id=\"d8c5746416l15\">二进制地址</p></td></tr><tr id=\"d8c39fac16j7h\"><td id=\"d8c39fad162o8\" rowspan=\"1\" colspan=\"1\"><p id=\"d8c57465165pw\">主私网IP</p></td><td id=\"d8c39faf16tpk\" rowspan=\"1\" colspan=\"1\"><p id=\"d8c5746616j1z\">192.168.1.14</p></td><td id=\"d8c39fb1160me\" rowspan=\"1\" colspan=\"1\"><p id=\"d8c5746716v1r\">11000000 10101000 00000001 00001110</p></td></tr><tr id=\"d8c39fb316hlh\"><td id=\"d8c39fb416qup\" rowspan=\"1\" colspan=\"1\"><p id=\"d8c5746816dwh\">辅助私网IP</p></td><td id=\"d8c39fb616wlo\" rowspan=\"1\" colspan=\"1\"><p id=\"d8c5746916hm4\">192.168.1.68</p></td><td id=\"d8c39fb8160uf\" rowspan=\"1\" colspan=\"1\"><p id=\"d8c5746a16bjl\">11000000 10101000 00000001 01000100</p></td></tr><tr id=\"d8c39fba16zrn\"><td id=\"d8c39fbb16z3f\" rowspan=\"1\" colspan=\"1\"><p id=\"d8c5746b169jo\">网关</p></td><td id=\"d8c39fbd16l06\" rowspan=\"1\" colspan=\"1\"><p id=\"d8c59b7016vvu\">192.168.1.127 </p></td><td id=\"d8c39fbf16w4d\" rowspan=\"1\" colspan=\"1\"><p id=\"d8c59b7116fgr\">11000000 10101000 00000001 01111111</p></td></tr></tbody></table></section><section id=\"722e6de003gnz\" class=\"section\"><h2 id=\"430ab5f003oxb\"><b>解决方案</b></h2><p id=\"771d8d4003cse\">您可以通过<b>Netsh</b>命令设置辅助私网IP，将skipassource设置为true以解决该问题。</p><ol id=\"cf1deee103ucr\"><li id=\"cf1dc7d003wck\"><p id=\"ccb3307003wkg\">远程连接Windows实例。</p><p id=\"e44f0b0003g2a\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"05cc0061165yf\"><p id=\"62442e8016krw\">在Windows PowerShell中，执行<code data-tag=\"code\" class=\"code\">ipconfig</code>命令，查看私网IP地址和网关。</p><p id=\"611c68a016oye\">如果主私网IP与下一跳IP的前缀匹配短于辅助私网IP与下一跳IP的前缀匹配，请继续执行下一步。</p><div type=\"note\" id=\"b5279b4116cl1\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"b5279b40165jj\">具体前缀匹配规则说明，请参见<a title=\"\" class=\"xref\" href=\"#55f404f003h18\">问题原因</a>。</p></div></div><img id=\"974620c0163yx\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9681308861/p687930.png\" alt=\"image.png\" placement=\"break\" class=\"image break\"><p id=\"be89738016646\"></p></li><li id=\"02c3d3910377o\"><p id=\"02c3d39003dd1\">在Windows PowerShell中，执行如下命令，将skipassource设置为true。</p><pre id=\"nbgonh\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>Netsh int ipv4 add address &lt;Interface&gt; &lt;IP Addr&gt; [&lt;Netmask&gt;] [skipassource=true]</code></pre><p id=\"1a31e76003dkb\">参数说明如下：</p><table id=\"table-zqd-q42-6nv\" tablewidth=\"648\" tablecolswidth=\"216 216 216\" class=\"table\"><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><tbody class=\"tbody\"><tr id=\"row-9xn-222-5ix\"><td id=\"concept-40637-zh-entry-bmu-zoe-t83\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"25356c4003dt8\"><b>辅助私网IP信息</b></p></td><td id=\"concept-40637-zh-entry-g9r-59k-b6k\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"25356c4103eqq\"><b>说明</b></p></td><td id=\"concept-40637-zh-entry-cyd-xdc-1y4\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"2535935003t0h\"><b>示例</b></p></td></tr><tr id=\"row-f5m-rgq-nmg\"><td id=\"entry-0k2-opd-97u\" rowspan=\"1\" colspan=\"1\"><p id=\"25359351038gt\">&lt;Interface&gt;</p></td><td id=\"entry-5t2-dvh-uyg\" rowspan=\"1\" colspan=\"1\"><p id=\"2535935203oq5\">辅助私网IP的网络接口</p></td><td id=\"entry-vcr-tur-0ug\" rowspan=\"1\" colspan=\"1\"><p id=\"2535935303562\"><code data-tag=\"codeph\" class=\"ph codeph\" id=\"codeph-2de-263-onb\">'以太网'</code></p></td></tr><tr id=\"row-hxi-fz4-fhi\"><td id=\"entry-un5-k0v-86u\" rowspan=\"1\" colspan=\"1\"><p id=\"2535ba6003goo\">&lt;IP Addr&gt;</p></td><td id=\"entry-3oq-94g-z5o\" rowspan=\"1\" colspan=\"1\"><p id=\"2535ba610356l\">辅助私网IP地址</p></td><td id=\"entry-zi9-uk5-bla\" rowspan=\"1\" colspan=\"1\"><p id=\"2535ba62032mg\"><code data-tag=\"codeph\" class=\"ph codeph\" id=\"codeph-94p-1yl-hfk\">192.168.0.100</code></p></td></tr><tr id=\"row-p45-2yb-2ce\"><td id=\"entry-xwh-bbk-07p\" rowspan=\"1\" colspan=\"1\"><p id=\"2535ba6303ddh\">&lt;Netmask&gt;</p></td><td id=\"entry-zf0-emx-7aw\" rowspan=\"1\" colspan=\"1\"><p id=\"2535ba6403k6t\">辅助私网IP的掩码</p></td><td id=\"entry-ayx-soi-vjl\" rowspan=\"1\" colspan=\"1\"><p id=\"2535ba6503aic\"><code data-tag=\"codeph\" class=\"ph codeph\" id=\"codeph-10k-tr9-vlt\">255.255.255.0</code></p></td></tr></tbody></table><p id=\"2f992eb003mcj\">示例说明如下：</p><pre id=\"q4y6ca\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>Netsh int ipv4 add address '以太网' 192.168.0.100 255.255.255.0 skipassource=true</code></pre></li><li id=\"3236bcf103g4s\"><p id=\"3236bcf003fh8\">从ECS实例中访问外网，如果可以正常访问，说明问题已解决。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/check-whether-tcp-port-80-is-available", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/network-and-security-group-issues/\">网络与安全组问题</a></span>\n <span>无法访问ECS实例中的服务的排查方法</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>无法访问ECS实例中的服务的排查方法</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-06 10:45:30</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"dfeaf9b087lsq\"><p id=\"7f2f13d0021rk\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍无法访问ECS实例中的服务的排查方法。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"d6dd658087rcy\" class=\"section\"><h2 id=\"NxfMT\">操作场景</h2><p id=\"2ee8ff8002zin\">无法访问ECS实例中的服务可能有以下原因：</p><table id=\"1a473610fdttr\" tablewidth=\"690\" tablecolswidth=\"327 363\" class=\"table\"><colgroup colwidth=\"0.95*\" style=\"width:47.39%\"></colgroup><colgroup colwidth=\"1.05*\" style=\"width:52.61%\"></colgroup><tbody class=\"tbody\"><tr id=\"1a473615fdsen\"><td id=\"1a473612fdyj8\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"3afb836002n7q\"><b>可能原因</b></p></td><td id=\"1a473614fdw2p\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"3afb836102ww0\"><b>排查方案</b></p></td></tr><tr id=\"1a475d2cfds11\"><td id=\"1a475d29fdmb3\" rowspan=\"1\" colspan=\"1\"><p id=\"3afb836402udw\">ECS实例的安全组未开放相应端口</p></td><td id=\"1a475d2bfdx7w\" rowspan=\"1\" colspan=\"1\"><p id=\"3afb836502168\"><a title=\"\" class=\"xref\" href=\"#8be1b210fdltu\">检查ECS实例安全组规则</a></p></td></tr><tr id=\"d1c0c5d002xx4\"><td id=\"d1c0c5d102qlk\" rowspan=\"1\" colspan=\"1\"><p id=\"d42a99e0022pa\">ECS实例中，该服务未启动/开启或服务对应端口未被监听</p></td><td id=\"d1c0ece102iw5\" rowspan=\"1\" colspan=\"1\"><p id=\"d1c0ece2023cb\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/check-whether-tcp-port-80-is-available#5fcf041002iku\">检查服务状态及端口监听状态</a></p></td></tr><tr id=\"1a475d31fdo85\"><td id=\"1a475d2efd4ml\" rowspan=\"1\" colspan=\"1\"><p id=\"3afb836602vyn\">ECS实例内防火墙设置错误</p></td><td id=\"1a475d30fdyg3\" rowspan=\"1\" colspan=\"1\"><p id=\"3afb83670290p\"><a title=\"\" class=\"xref\" href=\"#d960101002x90\">检查ECS防火墙设置</a></p></td></tr></tbody></table><p id=\"e135b92002o7m\">本文以排查无法访问ECS实例中的Nginx服务（默认端口为80）为例，排查其他服务时，请替换命令中的服务名和对应的端口。</p></section><section id=\"8be1b210fdltu\" class=\"section\"><h2 id=\"777394a0fdvtr\"><b>检查ECS实例安全组规则</b></h2><ol id=\"d5046940fdgck\"><li data-tag=\"step\" id=\"746b88b0022lk\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></li><li data-tag=\"step\" id=\"746b88b102cae\" class=\"step\"><span data-tag=\"cmd\" id=\"cmd-9ro-yc5-vx4\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-kq7-suy-h2g\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-puq-bs2-grd\" class=\"uicontrol\">实例与镜像</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-fk3-i03-vyq\" class=\"uicontrol\">实例</b></span>。</span></li><li data-tag=\"step\" id=\"746b88b2029ix\" class=\"step\"><span data-tag=\"cmd\" id=\"cmd-acu-560-w33\" class=\"cmd\">在顶部菜单栏左上角处，选择地域。 </span></li><li id=\"d6875fc0fd6a6\"><p id=\"7488d4b1020d5\">在ECS实例列表页面，单击目标ECS实例ID。</p></li><li id=\"02457e81fdqed\"><p id=\"7488d4b2020ma\">在ECS实例详情页面，单击<b id=\"label-securityGroup\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">安全组</b>页签。</p></li><li id=\"1dbff2d1fdq3h\"><p id=\"7488fbc0022th\">在<b id=\"ecs.group.list.lb.title\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">安全组列表</b>页签下，单击安全组ID。</p></li><li id=\"d503b081fdb4j\"><p id=\"7488fbc102gj5\">在安全组规则页面，查看入方向规则是否开放80端口。</p><img id=\"c462f5e0029y8\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678358.png\" alt=\"2023-06-04_16-56-00..png\" placement=\"break\" class=\"image break\"><ul id=\"156b48c102kj9\"><li id=\"c5a93820fdiot\"><p id=\"748949e002hhu\">未开放80端口，请添加入方向为80的安全组规则。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。</p></li><li id=\"142e5bf002vmx\"><p id=\"1460416002rsn\">已开放80端口，请执行<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/check-whether-tcp-port-80-is-available#5fcf041002iku\">检查服务状态及端口监听状态</a>。</p></li></ul></li></ol></section><section id=\"5fcf041002iku\" class=\"section\"><h2 id=\"3671438002ris\"><b>检查服务状态及端口监听状态</b></h2><section id=\"6c4022b002vtq\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"6c4022b202pes\" class=\"section\"><h2 id=\"6c4022b102lyn\">Linux实例</h2><p id=\"6be35ab002ko7\">本操作以CentOS 7.9为例，其他版本的Linux系统操作可能有所差异。</p><ol id=\"7d122a7102pje\"><li id=\"7d12036002wu9\"><p id=\"6c4022b3027vx\">远程连接Linux实例。</p><p id=\"8c56b46002wtl\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"82b5f3d002yct\"><p id=\"82b46d3002h4o\">执行如下命令，查看Nginx服务状态。</p><pre id=\"gp3dbg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl status nginx</code></pre><ul id=\"0381e82102hj4\"><li id=\"02cca1e002jbq\"><p id=\"02cc7ad002ruw\">如果返回类似如下信息，则说明Nginx已经启动。</p><img id=\"27851d5002syv\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678359.png\" alt=\"2023-06-04_17-06-23..png\" placement=\"break\" class=\"image break\"></li><li id=\"04c7878002o5m\"><p id=\"04c739600296a\">如果未开启，请执行如下命令，启动Nginx命令。</p><pre id=\"grkhre\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl start nginx</code></pre></li></ul></li><li id=\"e91ba2f002b06\"><p id=\"83d773f0028lq\">执行如下命令，查看端口是否正常被监听。</p><pre id=\"qx91md\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -an | grep 80</code></pre><ul id=\"92dd4731028ut\"><li id=\"925356b002or6\"><p id=\"92532fa002ej9\">如果返回如下信息，则说明80端口被正常监听，请执行<a title=\"\" class=\"xref\" href=\"#d960101002x90\">检查ECS防火墙设置</a>。</p><img id=\"e48c1340021w5\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678360.png\" alt=\"2023-06-04_17-11-27..png\" placement=\"break\" class=\"image break\"></li><li id=\"02c2c16002431\"><p id=\"036bf9b002s1e\">如果返回的不是以上信息，表示80端口未处于监听状态。说明该端口可能被其他端口占用，您需要修改该端口。具体操作，请参见<a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40744.htm?spm=a2c4g.59367.0.0.6d925988qxCQD9\">如何修改Nginx服务端口监听地址</a>。</p></li></ul></li></ol></section><section id=\"6c4022b50200e\" class=\"section\"><h2 id=\"6c4022b402h49\">Windows实例</h2><p id=\"1cd850b0023tu\">本操作以Windows Server 2012为例，其他版本的Windows Server系统操作类似。</p><ol id=\"8750156202cwq\"><li id=\"87501560026pc\"><p id=\"85e3660002p71\">远程连接Windows实例。</p><p id=\"9a82f08002yn4\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"8540ead10222c\"><p id=\"3ecc06d002l58\">选择<b data-tag=\"uicontrol\" id=\"2dc55160fdgla\" class=\"uicontrol\">开始</b>&gt;<b data-tag=\"uicontrol\" id=\"2fdbae40fdaj1\" class=\"uicontrol\">运行</b>，输入<code data-tag=\"code\" class=\"code\">service.msc</code>，单击<b data-tag=\"uicontrol\" id=\"45d79470fddgw\" class=\"uicontrol\">确定</b>，打开<b data-tag=\"uicontrol\" id=\"4ee0f700fdc5x\" class=\"uicontrol\">服务</b>。</p></li><li id=\"496be7e102ysi\"><p id=\"496be7e002imf\">查看nginx状态。</p><ol id=\"d1583e0102xi9\"><li id=\"d083fe110209k\"><p id=\"d083fe100287k\">如果nginx无状态，请右键单击该nginx服务，然后单击<b data-tag=\"uicontrol\" id=\"131b1c9002msg\" class=\"uicontrol\">启动(S)</b>。</p><img id=\"202d0f1002577\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678375.png\" alt=\"2023-06-04_19-14-19..png\" placement=\"break\" class=\"image break\"></li><li id=\"d99305f102ddq\"><p id=\"d99305f002k6w\">如果nginx状态为<b data-tag=\"uicontrol\" id=\"17babc60025ik\" class=\"uicontrol\">正在运行</b>，请继续执行步骤<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/check-whether-tcp-port-80-is-available#3fe97b3c02n7c\">4</a>。</p></li></ol></li><li id=\"3fe97b3c02n7c\"><p id=\"3feb77040216b\">在Windows PowerShell中执行如下命令，查看端口是否正常被监听。</p><pre id=\"3fe97b3e02jtd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -ano | findstr \"80\"</code></pre><ul id=\"3fe97b3f02kah\"><li id=\"3fe97b4002ma0\"><p id=\"3feb770502cbn\">如果返回如下信息，则说明80端口被正常监听，请执行<a title=\"\" class=\"xref\" href=\"#d960101002x90\">检查ECS防火墙设置</a>。</p><img id=\"8fb9ff7002pph\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678369.png\" alt=\"2023-06-04_17-36-44..png\" placement=\"break\" class=\"image break\"></li><li id=\"3fe97b440214g\"><p id=\"c2265f70024dx\">如果返回的不是以上信息，表示80端口未处于监听状态。说明该端口可能被其他端口占用，您需要修改该端口。具体操作，请参见<a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40744.htm?spm=a2c4g.59367.0.0.6d925988qxCQD9\">如何修改Nginx服务端口监听地址</a>。</p></li></ul></li></ol></section></section></section><section id=\"d960101002x90\" class=\"section\"><h2 id=\"a2951da00266g\"><b>检查ECS防火墙设置</b></h2><section id=\"e07da83002986\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"e07dcf4102dnw\" class=\"section\"><h2 id=\"e07dcf4002iej\">Linux实例</h2><p id=\"94bb979002po6\">本操作以CentOS 7.9为例，其他版本的Linux系统操作可能有所差异。</p><ol id=\"f388fe2202wx7\"><li id=\"ff3a9d5102fo4\" docid=\"3925206\"><p id=\"6c4022b3027vx\">远程连接Linux实例。</p><p id=\"8c56b46002wtl\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"0a42dd210251q\"><p id=\"14004d7002kn2\">执行如下命令，查看防火墙状态。</p><pre id=\"liuqdb\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl status firewalld</code></pre><ul id=\"f732d5d102lr0\"><li id=\"f624e84002htq\"><p id=\"f624c13002h46\">如果回显中出现<code data-tag=\"code\" class=\"code\">Active: inactive (dead)</code>信息，说明防火墙为关闭状态，无需再进行任何操作。</p></li><li id=\"1783ff80026wm\"><p id=\"1a86b83002m7s\">如果回显中出现<code data-tag=\"code\" class=\"code\">Active: active (running)</code>信息，说明防火墙已开启，请继续执行步骤<a title=\"\" class=\"xref\" href=\"#8611ce6002zy8\">3</a>。</p></li></ul></li><li id=\"8611ce6002zy8\"><p id=\"39985d0002ipd\">执行如下命令，查看防火墙中已开放的端口。</p><pre id=\"gqzneg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>firewall-cmd --list-all</code></pre><ul id=\"c3ee602102dbq\"><li id=\"c3af826002uvo\"><p id=\"c3af5b5002pis\">如果回显中出现<b data-tag=\"uicontrol\" id=\"e14b501002mp9\" class=\"uicontrol\">ports: 80/tcp</b>信息，说明防火墙规则中已放行80端口，无需再进行任何操作。</p><img id=\"d8f7a8f002xd8\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678376.png\" alt=\"2023-06-04_19-33-53..png\" placement=\"break\" class=\"image break\"></li><li id=\"fa943e6002wq0\"><p id=\"0084c83002tmb\">如果回显中没有<b data-tag=\"uicontrol\" id=\"19c8747302ddh\" class=\"uicontrol\">ports: 80/tcp</b>信息，请执行如下命令，放行80端口。</p><pre id=\"hcq8ll\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>firewall-cmd --zone=public --add-port=80/tcp --permanent</code></pre><p id=\"24755fc002s0q\">若返回结果为<code data-tag=\"code\" class=\"code\">success</code>，表示已经放行TCP 80端口。</p></li></ul></li></ol></section><section id=\"e07dcf4402yxv\" class=\"section\"><h2 id=\"e07dcf4302eqn\">Windows实例</h2><p id=\"1fea72b0029u6\">本操作以Windows Server 2012为例，其他版本的Windows Server系统操作类似。</p><ol id=\"126429a202wsp\"><li id=\"12aa817302lgt\" docid=\"3925206\"><p id=\"85e3660002p71\">远程连接Windows实例。</p><p id=\"9a82f08002yn4\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"fd4b4b81fdf7e\"><p id=\"34a9cc2002er2\">单击左下角的<img id=\"f6ec8f30fdfog\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0378725861/p675579.png\" alt=\"服务器管理..png\" placement=\"inline\" width=\"30\" class=\"image inline\">图标，打开服务器管理。</p></li><li id=\"0c7679b0fd2z8\"><p id=\"34a9cc2102i63\">选择右上角的<b data-tag=\"uicontrol\" id=\"4b05cb90fdbpv\" class=\"uicontrol\">工具</b>(T)&gt;<b data-tag=\"uicontrol\" id=\"4649ca20fd5gx\" class=\"uicontrol\">高级安全 Windows防火墙</b>。</p><img id=\"55b4c7d0fde1d\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0378725861/p675580.png\" alt=\"2023-05-28_20-21-16..png\" placement=\"break\" class=\"image break\"></li><li id=\"4bc01ae0fdrn8\"><p id=\"34a9cc2302jao\">查看防火墙状态。</p><ol id=\"832ea87102hwz\"><li id=\"8302414002bqd\"><p id=\"cabd98e1024l7\">如果防火墙处于关闭状态，无需进行任何操作。</p><img id=\"fab67b2002cgf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678371.png\" alt=\"2023-06-04_18-49-00..png\" placement=\"break\" class=\"image break\"></li><li id=\"918fd74002t7y\"><p id=\"918f8920028ky\">如果防火墙状态为已启用，请继续以下操作。</p><ol id=\"211f179102j2v\"><li id=\"4474c42002pkl\"><p id=\"4474760002onc\">在<b data-tag=\"uicontrol\" id=\"ea6c94cefdgex\" class=\"uicontrol\">高级安全 Windows防火墙</b>页面，单击<b data-tag=\"uicontrol\" id=\"2fc565b002qjw\" class=\"uicontrol\">入站规则</b>。</p></li><li id=\"32642c71027hv\"><p id=\"32642c7002aox\">查看<b data-tag=\"uicontrol\" id=\"64a725c002j4s\" class=\"uicontrol\">Windows 远程管理-兼容模式(HTTP-In)</b>的状态。</p><ul id=\"b1ea7941fd0u1\"><li id=\"b1be8740fd9er\"><p id=\"34a9cc2402s1f\">如果协议已启动，无需进行任何操作。</p></li><li id=\"0890c921fd9r1\"><p id=\"34a9cc26029gb\">如果该规则未启用，请右键单击该规则，然后单击<b data-tag=\"uicontrol\" id=\"e08a635002g20\" class=\"uicontrol\">启用规则(E)</b>。</p><img id=\"e601ec9002910\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678373.png\" alt=\"2023-06-04_18-58-43..png\" placement=\"break\" class=\"image break\"></li></ul></li></ol></li></ol></li></ol></section></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span>服务支持</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>服务支持</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-02 23:22:20</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/faq-3\">常见问题</a></li>\n <li><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></li>\n <li><a href=\"/zh/ecs/support/the-agreement\">相关协议</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/instance-high-load-problem/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span>实例负载高问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>实例负载高问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-06 13:39:23</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/query-and-analysis-of-system-loads-on-linux-instances\">Linux实例负载高问题排查和异常处理</a></li>\n <li><a href=\"/zh/ecs/support/query-and-case-analysis-linux-cpu-load\">Linux系统的ECS实例CPU使用率或CPU负载较高问题的排查及解决方案</a></li>\n <li><a href=\"/zh/ecs/support/query-and-case-analysis-of-linux-network-traffic-load\">如何查看Linux系统网络流量负载情况？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-cpu-utilization-is-high-on-a-windows-instance\">Windows系统ECS实例中CPU使用率较高问题的排查及解决方案</a></li>\n <li><a href=\"/zh/ecs/support/query-and-case-analysis-linux-io-load\">如何查看Linux系统I/O负载情况？</a></li>\n <li><a href=\"/zh/ecs/support/troubleshooting-and-solving-the-problem-of-high-bandwidth-usage-in-windows-instances\">Windows实例中带宽使用率较高问题的排查及解决方法</a></li>\n <li><a href=\"/zh/ecs/support/troubleshooting-windows-low-virtual-memory-problem\">如何处理Windows Server 2003/2008系统的ECS实例虚拟内存不足问题？</a></li>\n <li><a href=\"/zh/ecs/support/excessive-disk-space-occupied-by-temporary-files-in-windows\">Windows系统的ECS实例，C盘空间不断减小该怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/the-error-error-net-ipv6-conf-all-disable-ipv6-is-an-unknown-key-is-returned-when-you-run-the-sysctl-p-command-on-a-linux-instance\">在Linux系统的ECS实例中，执行sysctl -p命令时提示“error: \"net.ipv6.conf.all.disable_ipv6\" is an unknown key ”错误怎么办？</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/examples-of-remote-connection-problems/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span>实例远程连接问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>实例远程连接问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-20 11:13:06</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/troubleshooting-guidelines-when-you-cannot-remotely-log-on-to-a-linux-instance-through-ssh\">无法连接Linux实例的排查方法</a></li>\n <li><a href=\"/zh/ecs/support/solution-to-failure-in-remote-connection-to-windows-instance\">无法远程连接Windows实例的排查方法</a></li>\n <li><a href=\"/zh/ecs/support/through-vnc-or-workbench-instance-remote-connection-problems\">通过VNC/Workbench远程连接实例的问题</a></li>\n <li><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></li>\n <li><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/when-you-ping-the-internet-address-of-a-windows-instance-the-system-prompts-general-fault", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/network-and-security-group-issues/\">网络与安全组问题</a></span>\n <span>Windows系统的ECS实例ping外网地址提示“一般故障”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows系统的ECS实例ping外网地址提示“一般故障”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 15:52:42</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"f644c85086w6t\"><p data-tag=\"shortdesc\" id=\"f64c697086k0t\" class=\"shortdesc\">本文介绍Windows系统的ECS实例ping外网地址提示“一般故障”的错误原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"0b835b90fdta2\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"f64c69748617c\">Windows系统的ECS实例ping外网地址时提示“一般故障”错误。</p></section><section id=\"1ef143e0fd0or\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"f64c6975864mr\">出现该问题可能有以下原因：</p><table id=\"d3884d30ffh0h\" tablewidth=\"1018\" tablecolswidth=\"509 509\" class=\"table\"><colgroup colwidth=\"1*\" style=\"width:50.00%\"></colgroup><colgroup colwidth=\"1*\" style=\"width:50.00%\"></colgroup><tbody class=\"tbody\"><tr id=\"d3884d31ff8u4\"><td id=\"d3884d32ffju4\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"d3884d33ffvvj\"><b>可能原因</b></p></td><td id=\"d3884d34ffmay\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"d3884d35ffo3a\"><b>排查方案</b></p></td></tr><tr id=\"d3884d36ffivc\"><td id=\"d3884d37ff3no\" rowspan=\"1\" colspan=\"1\"><p id=\"df065940ffwph\">ECS实例中安装了第三方杀毒或安全防护软件</p></td><td id=\"d3884d39ffmsf\" rowspan=\"1\" colspan=\"1\"><p id=\"d3887440ff8ww\"><a title=\"\" class=\"xref\" href=\"#5b21be30fd89r\">检查第三方杀毒软件或安全防火软件</a></p></td></tr><tr id=\"d3887441ffh1k\"><td id=\"d3887442ff1ru\" rowspan=\"1\" colspan=\"1\"><p id=\"5cb83c50ffjsa\">ECS实例内操作系统TCP/IP协议栈损坏，例如注册表损坏。</p></td><td id=\"d3887444ffqcw\" rowspan=\"1\" colspan=\"1\"><p id=\"d3887445ff78f\"><a title=\"\" class=\"xref\" href=\"#705dd6d0fdpnt\">检查网卡配置信息</a></p></td></tr><tr id=\"d3887446ffd2w\"><td id=\"d3887447fflpi\" rowspan=\"1\" colspan=\"1\"><p id=\"60318490fffxu\">ECS实例内组策略中设置了错误的IP安全策略。</p></td><td id=\"d3887449ffvmi\" rowspan=\"1\" colspan=\"1\"><p id=\"d388744afffd4\"><a title=\"\" class=\"xref\" href=\"#8c6d5070fdipv\">检查IP安全策略</a></p></td></tr></tbody></table></section><h2 id=\"AywdZ\">解决方案</h2><section id=\"5b21be30fd89r\" class=\"section\"><h3 data-tag=\"h3\" id=\"f64cb799866el\" class=\"h3\"><b>检查第三方杀毒软件或安全防火软件</b></h3><p id=\"f64cb79a86v4z\">如果安装了第三方杀毒或安全防护软件，请尝试卸载第三方软件。然后重新ping外网地址，不再出现“一般故障”错误时，表示该问题已解决。</p></section><section id=\"705dd6d0fdpnt\" class=\"section\"><h3 data-tag=\"h3\" id=\"f64cb79b86n30\" class=\"h3\"><b>检查网卡配置信息</b></h3><p id=\"f64cb79c868ch\">执行<code data-tag=\"code\" class=\"code\">ipconfig /all</code>或<code data-tag=\"code\" class=\"code\">route print</code>命令检查IP配置，查看路由配置是否存在问题。</p><ul id=\"9efd91b2fdcpd\"><li id=\"9efd91b0fd7vh\"><p id=\"f0826790fdmud\">如果回显中显示了所有网卡信息，如下图所示，说明路由配置没有问题。</p><img id=\"3c554340fdw31\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1164235861/p675582.png\" alt=\"2023-05-28_21-38-01..png\" placement=\"break\" width=\"600\" class=\"image break\"></li><li id=\"a0655f10fdltj\"><p id=\"9b2e1320fd15o\">如果路由配置存在问题，可以尝试重置TCP/IP协议栈。更多信息，请参考以下文档。</p><ul id=\"641ef651fd4v9\"><li id=\"f64cb79e86jcw\"><p id=\"f64cb79f86asr\"><a class=\"\" target=\"_blank\" href=\"https://support.microsoft.com/zh-cn/kb/299357\">如何通过使用NetShell实用程序重置TCP/IP</a></p></li><li id=\"f64cb7a0868if\"><p id=\"f64cdea086ag9\"><a class=\"\" target=\"_blank\" href=\"https://support.microsoft.com/en-us/kb/2033448\">Winsock分层服务提供程序可能会导致SQL Server的网络或服务器稳定性问题</a></p></li></ul></li></ul></section><section id=\"8c6d5070fdipv\" class=\"section\"><h3 data-tag=\"h3\" id=\"f64cdea1860fm\" class=\"h3\"><b>检查IP安全策略</b></h3><ol id=\"f64cdea286rmy\"><li id=\"f64cdea386hgj\"><p id=\"f64cdea486zau\">远程连接ECS实例。</p><p id=\"b7a71640fdor2\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"f6669fe1fdo5g\"><p id=\"f6669fe0fd2w0\">选择<b data-tag=\"uicontrol\" id=\"2dc55160fdgla\" class=\"uicontrol\">开始</b>&gt;<b data-tag=\"uicontrol\" id=\"2fdbae40fdaj1\" class=\"uicontrol\">运行</b>，输入<code data-tag=\"code\" class=\"code\">secpol.msc</code>，单击<b data-tag=\"uicontrol\" id=\"45d79470fddgw\" class=\"uicontrol\">确定</b>，打开<b data-tag=\"uicontrol\" id=\"4ee0f700fdc5x\" class=\"uicontrol\">本地安全设置</b>。</p></li><li id=\"f64cdea586y7o\"><p id=\"f64cdea6868c3\">单击<b data-tag=\"uicontrol\" id=\"6a32d4b0fdssd\" class=\"uicontrol\">IP 安全策略，在本地计算机</b>，右键单击已存在的策略，如<b data-tag=\"uicontrol\" id=\"0f78b4d0fdnz7\" class=\"uicontrol\">safe</b>，再单击<b data-tag=\"uicontrol\" id=\"ab26e370ffkei\" class=\"uicontrol\">属性</b>。在<b data-tag=\"uicontrol\" id=\"17ca1200fd74p\" class=\"uicontrol\">safe 属性</b>界面查看安全策略。</p><p id=\"21362e00fdkp2\">如下图所示，可以看到IP安全策略为指派状态，并且策略为先pass（放行），然后deny（拒绝）。<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6775271861/p518592.png\" class=\"image break\"></p></li><li id=\"f64cdea786wcz\"><p id=\"f64cdea886t7k\">右键单击<b data-tag=\"uicontrol\" id=\"a6ae2c90ff2wd\" class=\"uicontrol\">safe</b>，然后单击<b data-tag=\"uicontrol\" id=\"a4710dd0ffxwq\" class=\"uicontrol\">不指派(U)</b>。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6775271861/p518593.png\" class=\"image break\"></li><li id=\"f64cdea986hfr\"><p id=\"f64cdeaa86b6b\">选择<b data-tag=\"uicontrol\" id=\"9e9ce5a0ffuy8\" class=\"uicontrol\">开始</b>&gt;<b data-tag=\"uicontrol\" id=\"a0bb31c0ffefl\" class=\"uicontrol\">管理工具</b>&gt;<b data-tag=\"uicontrol\" id=\"a2c5ced0ffk7m\" class=\"uicontrol\">路由和远程访问</b>，单击<b data-tag=\"uicontrol\" id=\"9ff1ea80fd08q\" class=\"uicontrol\">禁用本地路由和远程访问（S）</b>。<img alt=\"20150415161454.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1164235861/p518594.png\" class=\"image break\"></p></li><li id=\"f64cdeab86zde\"><p id=\"090135d0fdpzw\">查看<b data-tag=\"uicontrol\" id=\"13300590fdl4u\" class=\"uicontrol\">Routing and Remote Accesss</b>服务状态。</p></li><li id=\"084315f0fdaqh\"><p id=\"0842c7d0fdfb6\">选择<b data-tag=\"uicontrol\" id=\"d5fd8490fdci0\" class=\"uicontrol\">开始</b>&gt;<b data-tag=\"uicontrol\" id=\"db898030fd23x\" class=\"uicontrol\">运行</b>，输入<b data-tag=\"uicontrol\" id=\"b77537d0ffv99\" class=\"uicontrol\">services.msc</b>，单击<b data-tag=\"uicontrol\" id=\"b2efdd80fdmi3\" class=\"uicontrol\">确定</b>。</p></li><li id=\"19025901fdg77\"><p id=\"19025900fdf8c\">在服务列表中找到<b data-tag=\"uicontrol\" id=\"f18e8e20fd5bi\" class=\"uicontrol\">Routing and Remote Accesss</b>服务，查看该服务状态。</p><ol id=\"20cdbd51fd1jt\"><li id=\"209c2601fd8bu\"><p id=\"209c2600fdjfa\">若该服务处于禁用状态，表示正常。</p></li><li id=\"2cf96e81fduh3\"><p id=\"2cf96e80fd3ra\">若该服务处于启用状态，右键单击该服务，然后单击<b data-tag=\"uicontrol\" id=\"66f13ab0ffo14\" class=\"uicontrol\">禁用</b>。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5775271861/p518595.png\" class=\"image break\"></li></ol></li><li id=\"572eca61fd4b5\"><p id=\"572eca60fdany\">重新ping外网地址，不再出现“一般故障”错误时，表示该问题已解决。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/troubleshooting-for-ping-attempts-to-pass-the-server-and-port-disconnection", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/network-and-security-group-issues/\">网络与安全组问题</a></span>\n <span>无法ping通ECS实例公网IP的排查方法</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>无法ping通ECS实例公网IP的排查方法</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-08-22 17:36:03</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"1a9835e0858zm\"><p id=\"1aa68dc0859y3\" data-tag=\"shortdesc\" class=\"shortdesc\">无法ping通ECS实例的原因较多，您可以参考本文进行排查。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"ac14ff10fdpec\" class=\"section\"><h2 id=\"n49mj\"><b>问题现象</b></h2><p id=\"f75154b01b28f\">本地客户端无法ping通目标ECS实例公网IP，例如：</p><ul id=\"39a93d42fd0ot\"><li id=\"39a93d40fd2ia\"><p id=\"f75154b11bm8j\">本地客户端为Linux系统，ping目标ECS实例公网IP时无响应，如下所示：</p><img id=\"379c5640fdahg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4868625861/p675574.png\" alt=\"2023-05-28_16-53-11..png\" placement=\"break\" class=\"image break\"></li><li id=\"3b3eaa50fdour\"><p id=\"f7517bc01bv8h\">本地客户端为Windows系统，ping目标ECS实例公网IP时提示<b data-tag=\"uicontrol\" id=\"8721a810fdxro\" class=\"uicontrol\">请求超时</b>错误，如下所示：</p><img id=\"45b72d40fdqeq\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4868625861/p675575.png\" alt=\"2023-05-28_16-52-16..png\" placement=\"break\" class=\"image break\"></li></ul></section><section id=\"ad6573e0fd6sj\" class=\"section\"><h2 id=\"a1bd2380fd93g\"><b>问题原因</b></h2><p id=\"f7517bc21b164\">在确保本地网络正常的情况下（即您可以正常访问其他网站或可以ping通其他网站），无法ping通目标ECS实例公网IP可能有以下原因：</p><table id=\"1a473610fdttr\" tablewidth=\"690\" tablecolswidth=\"293 397\" class=\"table\"><colgroup colwidth=\"0.85*\" style=\"width:42.46%\"></colgroup><colgroup colwidth=\"1.15*\" style=\"width:57.54%\"></colgroup><tbody class=\"tbody\"><tr id=\"1a473615fdsen\"><td id=\"1a473612fdyj8\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"f7517bc31b2cm\"><b>可能原因</b></p></td><td id=\"1a473614fdw2p\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"f7517bc41be9n\"><b>排查方案</b></p></td></tr><tr id=\"1a475d22fd5b5\"><td id=\"1a473617fdtys\" rowspan=\"1\" colspan=\"1\"><p id=\"f7517bc51bn2x\">ECS实例未处于<b id=\"ecs-namespace-dashboard.common-status-working\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">运行中</b>状态</p></td><td id=\"1a475d21fdwu7\" rowspan=\"1\" colspan=\"1\"><p id=\"f7517bc61byky\"><a title=\"\" class=\"xref\" href=\"#3a45884004dvv\">检查ECS实例状态</a></p></td></tr><tr id=\"1a475d2cfds11\"><td id=\"1a475d29fdmb3\" rowspan=\"1\" colspan=\"1\"><p id=\"f7517bc71bn7w\">ECS实例的安全组错误</p></td><td id=\"1a475d2bfdx7w\" rowspan=\"1\" colspan=\"1\"><p id=\"f7517bc81bh88\"><a title=\"\" class=\"xref\" href=\"#8be1b210fdltu\">检查ECS实例安全组规则</a></p></td></tr><tr id=\"1a475d31fdo85\"><td id=\"1a475d2efd4ml\" rowspan=\"1\" colspan=\"1\"><p id=\"f7517bc91b08h\">ECS实例防火墙配置错误</p></td><td id=\"1a475d30fdyg3\" rowspan=\"1\" colspan=\"1\"><p id=\"f751a2d01bxgd\"><a title=\"\" class=\"xref\" href=\"#8dd65620fdblr\">检查ECS实例防火墙配置</a></p></td></tr><tr id=\"1a478432fdtto\"><td id=\"1a475d33fd5ct\" rowspan=\"1\" colspan=\"1\"><p id=\"f751a2d11bjeo\">ECS实例CPU使用率或带宽使用率过高</p></td><td id=\"1a478431fdnk2\" rowspan=\"1\" colspan=\"1\"><p id=\"f751a2d21bfxc\"><a title=\"\" class=\"xref\" href=\"#a1b97700fdjb7\">查看ECS实例CPU使用率或带宽使用率</a></p></td></tr><tr id=\"1a478437fdexq\"><td id=\"1a478434fd15f\" rowspan=\"1\" colspan=\"1\"><p id=\"f751a2d31ba47\">ECS实例存在黑洞</p></td><td id=\"1a478436fdjby\" rowspan=\"1\" colspan=\"1\"><p id=\"f751c9e01b8zr\"><a title=\"\" class=\"xref\" href=\"#4bdeb480fd5x0\">查看是否存在黑洞</a></p></td></tr><tr id=\"1a47843cfdf8l\"><td id=\"1a478439fdb44\" rowspan=\"1\" colspan=\"1\"><p id=\"f751c9e11b3q2\">ECS实例被恶意入侵</p></td><td id=\"1a47843bfdgro\" rowspan=\"1\" colspan=\"1\"><p id=\"f751c9e21bnii\"><a title=\"\" class=\"xref\" href=\"#6f4b5990fdwzo\">检查云安全中心是否存在安全告警</a></p></td></tr><tr id=\"944fc030fdqdn\"><td id=\"944fc032fd799\" rowspan=\"1\" colspan=\"1\"><p id=\"f751c9e31basw\">ECS实例为中国香港或海外实例</p></td><td id=\"944fc034fdrxx\" rowspan=\"1\" colspan=\"1\"><p id=\"f751c9e41bc4h\"><a title=\"\" class=\"xref\" href=\"#6ac825f0fddfb\">检查您的实例是否为中国香港或海外实例</a></p></td></tr><tr id=\"8ec969e0fd48q\"><td id=\"8ec990f1fd0dj\" rowspan=\"1\" colspan=\"1\"><p id=\"f751c9e51b02w\">某个客户端ping不通</p></td><td id=\"8ec990f3fdcax\" rowspan=\"1\" colspan=\"1\"><p id=\"f751c9e61b6ke\"><a title=\"\" class=\"xref\" href=\"#bbdb7550fd3tg\">检查是否为某个客户端环境ping不通</a></p></td></tr><tr id=\"9cb49a70ff19f\"><td id=\"9cb49a71ffo1l\" rowspan=\"1\" colspan=\"1\"><p id=\"f751c9e71b8rc\">域名未备案或域名解析异常</p></td><td id=\"9cb49a73ff1gs\" rowspan=\"1\" colspan=\"1\"><p id=\"f751f0f01b97m\"><a title=\"\" class=\"xref\" href=\"#ce612020ffsma\">检查域名是否备案或域名解析配置</a></p></td></tr></tbody></table></section><section id=\"3a45884004dvv\" class=\"section\"><h2 id=\"fd656960fdv4m\" jc=\"start\" style=\"text-align:start\">检查ECS实例状态</h2><p jc=\"start\" id=\"f751f0f11bnpx\" style=\"text-align:start\">只有当ECS实例状态为<b data-tag=\"uicontrol\" id=\"ebc88a00fdct3\" data-isbold=\"true\" class=\"uicontrol\">运行中</b>时，才能对外提供业务访问。检查步骤如下：</p><ol id=\"78eba092fd02v\"><li data-tag=\"step\" id=\"7920ba51fdu8e\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"f751f0f21ba9l\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com/\">ECS管理控制台</a>。</p></li><li data-tag=\"step\" id=\"828f2042fd5i9\" class=\"step\"><p id=\"f751f0f31b14w\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"uicontrol-puq-bs2-grd\" class=\"uicontrol\">实例与镜像</b><b>&gt;</b><b data-tag=\"uicontrol\" id=\"uicontrol-fk3-i03-vyq\" class=\"uicontrol\">实例</b>。</p></li><li data-tag=\"step\" id=\"88f21af2fdujt\" class=\"step\"><p id=\"f751f0f41b8i9\">在顶部菜单栏左上角处，选择地域。</p></li><li id=\"89a872a0fd7bg\"><p id=\"f751f0f51bya2\">在实例列表页面，检查目标实例的状态。</p><ul id=\"a7f31df1fdroq\"><li id=\"a7c668a1fdoax\"><p id=\"f75218001bp58\">目标实例不是<b data-tag=\"uicontrol\" id=\"ebc88a01fdssw\" data-isbold=\"true\" class=\"uicontrol\">运行中</b>状态，请根据实例状态，选择对应的解决方案。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/instance-lifecycle\">实例的生命周期</a>。</p></li><li id=\"e638e3b1fdx9k\"><p id=\"f75218021bu20\">目标实例是<b data-tag=\"uicontrol\" id=\"ebc88a02fdopg\" data-isbold=\"true\" class=\"uicontrol\">运行中</b>状态，请执行<a title=\"\" class=\"xref\" href=\"#8be1b210fdltu\">检查ECS实例安全组规则</a>。</p></li></ul></li></ol></section><section id=\"8be1b210fdltu\" class=\"section\"><h2 id=\"777394a0fdvtr\"><b>检查ECS实例安全组规则</b></h2><p id=\"f75218031bkkx\">ECS实例的安全组中默认包含开放ICMP协议的规则，即允许ping通ECS实例，若该规则被删除，则无法ping通ECS实例。您可以通过以下步骤进行排查：</p><ol id=\"d5046940fdgck\"><li data-tag=\"step\" id=\"f72fea001bd31\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"f72fea011bi2w\" class=\"step\"><p id=\"cc0c75a0379qu\"><span data-tag=\"cmd\" id=\"cmd-9ro-yc5-vx4\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-kq7-suy-h2g\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-puq-bs2-grd\" class=\"uicontrol\">实例与镜像</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-fk3-i03-vyq\" class=\"uicontrol\">实例</b></span>。</span></p></li><li data-tag=\"step\" id=\"f72fea021blv3\" class=\"step\"><p id=\"cc0dfc4237gix\"><span data-tag=\"cmd\" id=\"cmd-acu-560-w33\" class=\"cmd\">在页面左侧顶部，选择目标资源所在的地域。<img data-tag=\"image\" id=\"image-3wz-243-ym2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0777199861/p680076.png\" width=\"500\" alt=\"地域\" placement=\"break\" class=\"image break\"> </span></p></li><li id=\"d6875fc0fd6a6\"><p id=\"f7523f121bszc\">在ECS实例列表页面，单击目标ECS实例ID。</p></li><li id=\"02457e81fdqed\"><p id=\"f7523f131b52x\">在ECS实例详情页面，单击<b id=\"label-securityGroup\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">安全组</b>页签。</p></li><li id=\"1dbff2d1fdq3h\"><p id=\"f7523f141bb8x\">在<b id=\"ecs.group.list.lb.title\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">安全组列表</b>页签下，单击安全组ID。</p></li><li id=\"d503b081fdb4j\"><p id=\"f7523f151bfl2\">在安全组规则页面，查看入方向规则是否存在ICMP协议的安全组规则。</p><img id=\"d7ad3ac0fdun9\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4868625861/p675577.png\" alt=\"ICMP协议..png\" placement=\"break\" class=\"image break\"><ul id=\"7c9ad3a1fdxfz\"><li id=\"7c0f3571fd9pm\"><p id=\"f75266201bljk\">不存在ICMP协议的安全组规则，请添加以下入方向安全组规则。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。</p><p id=\"f75266211b0go\"><b id=\"ecs.sgRule.table.column.Policy\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">授权策略</b>选择<b data-tag=\"uicontrol\" id=\"341d6f10fd6g3\" class=\"uicontrol\">允许</b>，<b id=\"ecs.sgRule.table.column.Priority\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">优先级</b>保持默认，<b id=\"ecs.sgrule.list.lb.ipProtocol\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">协议类型</b>选择<b id=\"ecs.sgrule.cons.lb.rule-type-icmp.ipv4\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">全部ICMP（IPv4）</b>，<b id=\"ecs.sgrule.list.lb.portRange\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">端口范围</b>为<code data-tag=\"codeph\" class=\"codeph\">-1/-1</code>，<b id=\"ecs.sgrule.list.lb.target\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">授权对象</b>：建议仅允许特定的IP访问。</p></li><li id=\"c5a93820fdiot\"><p id=\"f75266221b08u\">存在ICMP协议的安全组规则，请执行<a title=\"\" class=\"xref\" href=\"#8dd65620fdblr\">检查ECS实例防火墙配置</a>。</p></li></ul></li></ol></section><section id=\"8dd65620fdblr\" class=\"section\"><h2 id=\"8dd65621fdab7\"><b>检查ECS实例防火墙配置</b></h2><p id=\"f75266231bzii\">请根据ECS实例操作系统，选择相应的检查方式。</p><section id=\"d12f7a30fd940\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"d12f7a32fduwm\" class=\"section\"><h2 id=\"d12f7a31fdc8z\">检查Linux系统内核参数和防火墙配置</h2><p id=\"f75266241budu\">Linux系统是否允许ping由内核参数<code data-tag=\"code\" class=\"code\">icmp_echo_ignore_all</code>和防火墙设置共同决定，任何一个禁止，都会无法ping通。</p><section id=\"6d760180fdbiq\" class=\"section\"><h3 id=\"d12f7a33fdq9s\"><b>检查Linux系统内核参数</b></h3><ol id=\"61954462fdikz\"><li id=\"61954460fdk0j\"><p id=\"f75266251bwxl\">使用VNC远程连接ECS实例。</p><p id=\"f7528d301btzp\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"6cd7f521fdtsb\"><p id=\"f7528d311bc80\">执行如下命令，查看内核参数<code data-tag=\"code\" class=\"code\">icmp_echo_ignore_all</code>值。</p><pre id=\"4g0nau\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>cat /proc/sys/net/ipv4/icmp_echo_ignore_all</code></pre><ul id=\"9233dc81fdjil\"><li id=\"917b13d1fd65c\"><p id=\"f7528d321bcet\">若回结果为0，表示允许所有的ICMP请求，请执行<a title=\"\" class=\"xref\" href=\"#bc280850fdfb3\">检查Linux防火墙配置</a>。</p></li><li id=\"a138ec70fdfuc\"><p id=\"f7528d331bbou\">若返回结果为1，表示禁止所有的ICMP请求，请执行步骤<a title=\"\" class=\"xref\" href=\"#09be4741fdgii\">3</a>。</p></li></ul></li><li id=\"09be4741fdgii\"><p id=\"f7528d341b942\">执行如下命令，修改内核参数<code data-tag=\"code\" class=\"code\">icmp_echo_ignore_all</code>值为0允许所有ICMP请求。</p><ol id=\"33a4fb01fdw1q\"><li id=\"31590f30fdfmj\"><p id=\"f7528d351b4na\">临时允许\n</p><pre id=\"dbr7fi\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>echo 0 &gt;/proc/sys/net/ipv4/icmp_echo_ignore_all</code></pre></li><li id=\"368f97d1fdj6v\"><p id=\"f752b4401bt5r\">永久允许\n</p><pre id=\"rcsmbq\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>echo net.ipv4.icmp_echo_ignore_all=0 &gt;&gt; /etc/sysctl.conf\nsysctl -p</code></pre></li></ol></li></ol></section><section id=\"bc280850fdfb3\" class=\"section\"><h3 id=\"f0f44260fd8nf\"><b>检查Linux防火墙配置</b></h3><ol id=\"89b413f0fdubd\"><li id=\"89b413f1fdg76\"><p id=\"f752b4411bieu\">使用VNC远程连接ECS实例。</p><p id=\"f752b4421beej\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"89b413f4fdv2m\"><p jc=\"start\" id=\"f752b4431bybz\" style=\"text-align:start\">执行以下命令，查看防火墙规则。\n</p><pre id=\"89b413f6fdxka\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>iptables -L</code></pre><ul id=\"89b413f7fdjvg\"><li id=\"89b413f8fdkpl\"><p id=\"f752b4441btyd\">若返回如下结果，表示ICMP对应规则未被禁止，请执行<a title=\"\" class=\"xref\" href=\"#a1b97700fdjb7\">检查ECS实例CPU使用率或带宽使用率</a>。</p><pre id=\"89b413fafdzci\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \nACCEPT     icmp --  anywhere             anywhere             icmp echo-request        \nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination  \nACCEPT     icmp --  anywhere             anywhere             icmp echo-reque</code></pre></li><li id=\"89b413fbfdqkf\"><p id=\"f752b4451bfws\">若返回结果ICMP对应规则被禁止，请执行以下命令，启用对应规则。</p><pre id=\"4bf4ow\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>#Chain INPUT\niptables -A INPUT -p icmp --icmp-type echo-request -j ACCEPT\n#Chain OUTPUT\niptables -A OUTPUT -p icmp --icmp-type echo-reply -j ACCEPT</code></pre></li></ul></li></ol></section></section><section id=\"d12f7a35fdbph\" class=\"section\"><h2 id=\"d12f7a34fdyax\">检查Windows防火墙配置</h2><p id=\"f752b4461bvb1\">本操作以Windows Server 2012为例，其他版本的Windows Server系统操作类似。</p><ol id=\"fc77cee0fdew0\"><li id=\"fc77cee1fdd6x\"><p id=\"f752b4471bygl\">使用VNC远程连接ECS实例。</p><p id=\"f752b4481bycp\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"fd4b4b81fdf7e\"><p id=\"f752db501b8z8\">单击左下角的<img id=\"f6ec8f30fdfog\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0378725861/p675579.png\" alt=\"服务器管理..png\" placement=\"inline\" width=\"30\" class=\"image inline\">图标，打开服务器管理。</p></li><li id=\"0c7679b0fd2z8\"><p id=\"f752db511bgda\">选择右上角的<b data-tag=\"uicontrol\" id=\"4b05cb90fdbpv\" class=\"uicontrol\">工具</b>&gt;<b data-tag=\"uicontrol\" id=\"4649ca20fd5gx\" class=\"uicontrol\">高级安全 Windows防火墙</b>。</p><img id=\"55b4c7d0fde1d\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0378725861/p675580.png\" alt=\"2023-05-28_20-21-16..png\" placement=\"break\" class=\"image break\"></li><li id=\"4bc01ae0fdrn8\"><p id=\"f752db531bt5k\">在<b data-tag=\"uicontrol\" id=\"ea6c94cefdgex\" class=\"uicontrol\">高级安全 Windows防火墙</b>页面，分别查看<b data-tag=\"uicontrol\" id=\"e0a9f120fd704\" class=\"uicontrol\">入站规则</b>和<b data-tag=\"uicontrol\" id=\"e3d9ad40fd4e9\" class=\"uicontrol\">出站规则</b>中ICMP相关协议是否被禁止。</p><ul id=\"b1ea7941fd0u1\"><li id=\"b1be8740fd9er\"><p id=\"f752db541bggq\">如果ICMP相关协议被禁止，如下图所示，请开启该规则。</p><img id=\"1f692ca0fdrgk\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0378725861/p675581.png\" alt=\"2023-05-28_20-31-12..png\" placement=\"break\" class=\"image break\"></li><li id=\"0890c921fd9r1\"><p id=\"f752db561b5ja\">如果ICMP相关协议未禁止，请执行<a title=\"\" class=\"xref\" href=\"#a1b97700fdjb7\">检查ECS实例CPU使用率或带宽使用率</a>。</p></li></ul></li></ol></section></section></section><section id=\"a1b97700fdjb7\" class=\"section\"><h2 id=\"a1b97701fdnq0\"><b>检查ECS实例CPU使用率或带宽使用率</b></h2><p id=\"f75302601b36x\">检查外网相关资源使用率，如公网带宽使用率达到100%等。</p><ul id=\"eda775b2d8ixe\"><li id=\"eda775b3d8gzz\"><p id=\"f75302611b6py\">突发性能实例性能约束模式，当CPU使用率达到100%时可能导致无法ping通或ping丢包，具体信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-5\">突发性能实例概述</a>。</p></li><li id=\"eda79cc0d8xx5\"><p id=\"f75302621b2eu\">EIP或固定公网IP资源被占满时，可能会导致ping操作被限速丢弃而无法ping通。</p></li></ul></section><section id=\"4bdeb480fd5x0\" class=\"section\"><h2 id=\"3f736240fd02o\"><b>检查是否存在黑洞</b></h2><p id=\"f75302631bykk\">请检查是否收到黑洞通知，黑洞期间无法远程连接、无法ping通ECS实例。</p><p id=\"f75302641bkwi\">更多信息，请参见<a title=\"\" class=\"xref\" href=\"/document_detail/40032.html\">阿里云黑洞策略</a>。</p></section><section id=\"6f4b5990fdwzo\" class=\"section\"><h2 id=\"6f4b5991fdehj\"><b>检查云安全中心是否存在安全告警</b></h2><p id=\"f75302651b4q2\">请检查云安全中心是否有异常的安全告警通知，被恶意入侵也会有可能导致ECS实例无法ping通。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/security-center/product-overview/what-is-security-center\">什么是云安全中心</a>。</p></section><section id=\"6ac825f0fddfb\" class=\"section\"><h2 id=\"6d538130fdqpo\"><b>检查您的实例是否为中国香港或海外实例</b></h2><p id=\"f75302661bafi\">在中国内地ECS实例访问中国香港或海外ECS实例时，链路质量会有可能受到运营商线路影响，建议过一段时间再次尝试。</p></section><section id=\"bbdb7550fd3tg\" class=\"section\"><h2 id=\"88a1bff0fdpbm\"><b>检查是否为某个客户端环境ping不通</b></h2><p id=\"f75302671barg\">如果只有某个客户端环境ping不通，其他客户端环境可以ping通。建议在客户端和ECS实例中进行链路测试的。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-the-ping-command-packet-loss-or-not-the-link-test-method\">使用ping命令丢包或不通时的链路测试方法</a>。</p></section><section id=\"ce612020ffsma\" class=\"section\"><h2 id=\"b8486320ff5kt\"><b>检查域名是否备案或域名解析配置</b></h2><p id=\"f75302681btkm\">如果可以ping通公网IP，但是ping不通域名，可能是域名没有备案或者域名解析异常导致。</p><p id=\"f75302691by8k\">根据工信部要求，域名解析至<span data-tag=\"ph\" class=\"ph\" id=\"ph-2e5-wob-u0e\">中国内地</span>服务器必须先完成网站备案，才能正常开通网站访问。因此，网站在未取得备案号之前不允许开通访问，即未备案成功的网站均不能对外开通Web服务，否则将被阿里云监测系统识别并阻断网站服务。</p><ul id=\"dffaa122ff5n8\"><li id=\"dffaa120ff07s\"><p id=\"f753026a1blnq\">如果域名未备案，请先进行备案。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/icp-filing/product-overview/what-is-an-icp-filing\">什么是ICP备案</a>。</p></li><li id=\"94290881ffkek\"><p id=\"f75329701bktf\">如果域名已备案，请检查域名解析是否失效。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/document_detail/39834.html\">解析生效测试方法</a><span data-tag=\"ph\" id=\"494d49a020sk3\" props=\"china\" data-cond-props=\"china\" class=\"ph\">和<a title=\"\" class=\"xref\" href=\"/zh/dws/troubleshoot-dns-resolution-issues\">域名解析不生效的排查思路</a></span>。</p></li></ul><p id=\"f75329711blyf\" props=\"china\" data-cond-props=\"china\">更多域名或网站无法访问排查方法，请参见<a title=\"\" class=\"xref\" href=\"/zh/icp-filing/support/domain-name-or-website-can-t-access-how-to-troubleshoot\">域名或网站无法访问如何排查？</a>。</p></section><section id=\"9fa14890fd6rt\" class=\"section\"><h2 id=\"uW67j\">相关文档</h2><ul id=\"248015f285iu4\"><li id=\"248015f385f77\"><p id=\"f75329721bbx0\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/troubleshooting-guidelines-when-you-cannot-remotely-log-on-to-a-linux-instance-through-ssh\">无法连接Linux实例的排查方法</a></p></li><li id=\"24803d0285b22\"><p id=\"f75329751bpvd\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/solution-to-failure-in-remote-connection-to-windows-instance\">无法远程连接Windows实例的排查方法</a></p></li><li id=\"24803d0485cnw\"><p id=\"f75329761b87o\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/check-whether-tcp-port-80-is-available\">无法访问ECS实例中的服务的排查方法</a></p></li><li id=\"4947d8211bj99\"><p id=\"4947d8201b58u\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/when-you-ping-the-internet-address-of-a-windows-instance-the-system-prompts-general-fault\">Windows系统的ECS实例ping外网地址提示“一般故障”错误怎么办？</a></p></li><li id=\"4da147301budq\" props=\"china\" data-cond-props=\"china\"><p id=\"4da120201bulx\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/why-can-t-the-ecs-instance-access-the-public-network-environment\">为什么Windows系统的ECS实例配置辅助私网IP后，无法从ECS实例中访问公网环境？</a></p></li></ul></section><p id=\"181145c01bzln\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/troubleshooting-1/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span>故障排除</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>故障排除</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-20 11:11:00</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></li>\n <li><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></li>\n <li><a href=\"/zh/ecs/support/unable-to-connect-to-and-access-the-ftp-service-in-a-windows-instance\">实例内第三方软件安装与配置问题</a></li>\n <li><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></li>\n <li><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></li>\n <li><a href=\"/zh/ecs/support/network-and-security-group-issues/\">网络与安全组问题</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-operating-system-problem/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span>操作系统问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>操作系统问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 16:44:37</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></li>\n <li><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></li>\n <li><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/faq-3", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span>常见问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>常见问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-01 18:26:23</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"concept-2623851\"><p id=\"shortdesc-rtj-0at-e8r\" data-tag=\"shortdesc\" class=\"shortdesc\">本文汇总了使用云服务器ECS时的常用问题。</p><div data-tag=\"conbody\" id=\"conbody-10k-03y-zua\" class=\"conbody\"><section data-tag=\"section\" id=\"section-gjd-y7b-w74\" data-type=\"section\" class=\"section\"><h2 data-tag=\"title\" id=\"title-6l8-tsv-jxc\" class=\"title\">产品FAQ</h2><table id=\"table-qa7-x6u-ir1\" tablewidth=\"710\" tablecolswidth=\"355 355\" class=\"table\"><colgroup colwidth=\"1*\" style=\"width:50.00%\"></colgroup><colgroup colwidth=\"1*\" style=\"width:50.00%\"></colgroup><tbody class=\"tbody\"><tr id=\"row-tx6-tt0-e4c\"><td id=\"entry-2di-ffb-mfy\" rowspan=\"1\" colspan=\"1\"><ul data-tag=\"ul\" id=\"ul-gy0-lb2-9wf\" class=\"ul\"><li data-tag=\"li\" id=\"li-lta-zbl-mb2\" class=\"li\"><p id=\"f8f68104fdjkc\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/instance-faq#concept-gqy-fyx-wgb\">实例FAQ</a></p></li><li data-tag=\"li\" id=\"li-34k-tk9-kcm\" class=\"li\"><p id=\"f8f68105fd4dh\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/faq-about-image-lifecycle#concept-q1j-bty-dhb\">镜像生命周期问题</a></p></li><li data-tag=\"li\" id=\"li-x0r-r0b-iej\" class=\"li\"><p id=\"f8f68106fdlwg\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/faq-4#concept-40551-zh\">块存储FAQ</a></p></li><li data-tag=\"li\" id=\"li-ney-cxi-zaa\" class=\"li\"><p id=\"f8f68107fdivb\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/snapshot-faq#concept-j5z-vrr-lgb\">快照FAQ</a></p></li><li data-tag=\"li\" id=\"li-r9h-ij4-qt3\" class=\"li\"><p id=\"f8f6a810fdpso\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/product-overview/billing-faq#concept-827517\">计费FAQ</a></p></li></ul></td><td id=\"entry-z4e-mog-0qw\" rowspan=\"1\" colspan=\"1\"><ul data-tag=\"ul\" id=\"ul-iy4-t6c-axq\" class=\"ul\"><li data-tag=\"li\" id=\"li-7m8-66l-aa9\" class=\"li\"><p id=\"f8f6a811fd6vg\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/security-faq#concept-mhp-prm-lgb\">安全FAQ</a></p></li><li data-tag=\"li\" id=\"li-q2z-yzt-5l2\" class=\"li\"><p id=\"f8f6cf20fd9p8\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/network-faq#concept-40637-zh\">网络FAQ</a></p></li><li data-tag=\"li\" id=\"li-fop-4hw-9jp\" class=\"li\"><p id=\"f8f6cf21fdxu6\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/o-and-m-and-monitoring-faq#concept-2362606\">运维与监控FAQ</a></p></li><li data-tag=\"li\" id=\"li-6u1-5tb-li6\" class=\"li\"><p id=\"f8f6cf22fdxoa\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/developer-reference/api-faq#concept-761256\">API FAQ</a></p></li><li data-tag=\"li\" id=\"li-lfi-shn-b2z\" class=\"li\"><p id=\"f8f6cf23fdid9\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/cloud-migration-tool-faq#ServerMigrationFAQ\">迁云工具FAQ</a></p></li></ul></td></tr></tbody></table></section><section data-tag=\"section\" id=\"section-7su-tpd-u6i\" data-type=\"section\" props=\"china\" data-cond-props=\"china\" class=\"section\"><h2 data-tag=\"title\" id=\"title-rkf-rn9-84r\" class=\"title\">最新发布</h2><ul data-tag=\"ul\" id=\"ul-qqw-z0y-m04\" class=\"ul\"><li data-tag=\"li\" id=\"li-qx0-qh3-yxl\" class=\"li\"><p id=\"f8f74450fd5ym\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/186241.htm\">使用ping命令测试ECS实例时ping不通的排查方法</a></p></li><li data-tag=\"li\" id=\"li-6m8-654-926\" class=\"li\"><p id=\"f8f74451fdyo4\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/188420.htm\">如何在Linux实例中自定义配置DNS</a></p></li><li data-tag=\"li\" id=\"li-qyy-k5y-u3b\" class=\"li\"><p id=\"f8f74452fduy1\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41400.htm\">如何迁移Linux实例系统盘中的数据</a></p></li><li data-tag=\"li\" id=\"li-31t-h1r-q3l\" class=\"li\"><p id=\"f8f74453fdvel\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41332.htm\">Linux系统的ECS中没有禁ping却ping不通的解决方法</a></p></li><li data-tag=\"li\" id=\"li-a8z-rp1-kba\" class=\"li\"><p id=\"f8f74454fdaz1\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40900.htm\">当IIS搭建的网站显示“500 - 内部服务器错误”时如何查看真实报错信息</a></p></li></ul></section><section data-tag=\"section\" id=\"section-rei-thg-mmi\" data-type=\"section\" props=\"china\" data-cond-props=\"china\" class=\"section\"><h2 data-tag=\"title\" id=\"title-y98-0hw-03v\" class=\"title\">远程连接问题</h2><ul data-tag=\"ul\" id=\"ul-w80-o1z-tw2\" class=\"ul\"><li data-tag=\"li\" id=\"li-odn-g9r-dm5\" class=\"li\"><p id=\"f8f8a3e0fd72r\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/140763.htm\">无法远程连接Windows实例的处理方法</a></p></li><li data-tag=\"li\" id=\"li-wc2-7fb-92x\" class=\"li\"><p id=\"f8f8a3e1fdg5g\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41470.htm\">无法通过SSH远程登录Linux实例时的排查指引</a></p></li><li data-tag=\"li\" id=\"li-uwv-h4y-82b\" class=\"li\"><p id=\"f8f8a3e2fd3nf\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40857.htm\">如何查看和修改Windows实例远程桌面的默认端口</a></p></li><li data-tag=\"li\" id=\"li-0v1-rkl-zc9\" class=\"li\"><p id=\"f8f8a3e3fdgp0\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40873.htm\">如何查询ECS实例中的远程登录日志</a></p></li><li data-tag=\"li\" id=\"li-sg4-fbi-5lj\" class=\"li\"><p id=\"f8f8a3e4fdesv\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40886.htm\">Windows实例如何限制用户的远程桌面会话数</a></p></li><li data-tag=\"li\" id=\"li-tfd-del-ghu\" class=\"li\"><p id=\"f8f8a3e5fda08\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40880.htm\">Windows 2008与2012实例无法启用远程协助中的“允许远程协助连接这台计算机”选项</a></p></li><li data-tag=\"li\" id=\"li-ar9-z61-rvz\" class=\"li\"><p id=\"f8f8caf0fdjmy\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40860.htm\">Windows Server实例远程连接数以及License授权服务器的相关说明</a></p></li><li data-tag=\"li\" id=\"li-th8-pa7-myu\" class=\"li\"><p id=\"f8f8caf1fds03\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41482.htm\">使用SSH命令登录Linux系统的ECS实例时出现报错</a></p></li><li data-tag=\"li\" id=\"li-v5p-w84-1nh\" class=\"li\"><p id=\"f8f8caf2fd6wn\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40859.htm\">Windows服务器远程桌面提示“没有远程桌面授权服务器可以提供许可证”错误</a></p></li><li data-tag=\"li\" id=\"li-kx1-a5m-osx\" class=\"li\"><p id=\"f8f8caf3fdxat\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40861.htm\">远程连接Windows系统的ECS实例时提示协议错误</a></p></li><li data-tag=\"li\" id=\"li-d99-9n2-0u7\" class=\"li\"><p id=\"f8f8caf4fdo5w\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40865.htm\">启用密码保护共享导致Windows系统远程访问出现“凭据无法工作”错误</a></p></li><li data-tag=\"li\" id=\"li-syc-szk-0k0\" class=\"li\"><p id=\"f8f8caf5fdfbk\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40871.htm\">远程桌面连接ECS实例时报\"连接被拒绝，因为没有授权此用户账户进行远程登录\"错误</a></p></li><li data-tag=\"li\" id=\"li-qix-cm4-pes\" class=\"li\"><p id=\"f8f8caf6fd10c\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41471.htm\">使用SSH登录ECS实例时提示“Host key verification failed”错误</a></p></li><li data-tag=\"li\" id=\"li-bam-9my-ddf\" class=\"li\"><p id=\"f8f8caf7fd9tu\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41487.htm\">使用root用户通过SSH登录Linux实例时报“Permission denied, please try again”的错误</a></p></li><li data-tag=\"li\" id=\"li-ydq-uu5-r7s\" class=\"li\"><p id=\"f8f8caf8fda57\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41489.htm\">SSH登录Linux实例时出现\"Disconnected:No supported authentication methods available\"错误</a></p></li><li data-tag=\"li\" id=\"li-imc-sip-z8d\" class=\"li\"><p id=\"f8f8f200fdbj9\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41485.htm\">SSH登录ECS实例提示“ssh_exchange_identification: read: Connection reset by peer”错误</a></p></li><li data-tag=\"li\" id=\"li-et1-x4b-ua5\" class=\"li\"><p id=\"f8f8f201fdvve\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41491.htm\">使用SSH登录Linux系统的ECS实例时提示“requirement \"uid &gt;= 1000\" not met by user \"root\"”错误</a></p></li><li data-tag=\"li\" id=\"li-euj-eo6-uhu\" class=\"li\"><p id=\"f8f8f202fdrkj\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41481.htm\">Linux实例中由于SELinux服务开启导致SSH远程连接异常</a></p></li><li data-tag=\"li\" id=\"li-u9p-o40-aoe\" class=\"li\"><p id=\"f8f8f203fd5bm\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41474.htm\">SSH服务启动时报“main process exited, code=exited”错误</a></p></li><li data-tag=\"li\" id=\"li-2r4-41m-g0r\" class=\"li\"><p id=\"f8f8f204fdccn\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41478.htm\">启动SSH服务时出现“error while loading shared libraries”错误</a></p></li></ul></section><section data-tag=\"section\" id=\"section-sdq-w89-b2g\" data-type=\"section\" props=\"china\" data-cond-props=\"china\" class=\"section\"><h2 data-tag=\"title\" id=\"title-6h9-ne5-wuz\" class=\"title\">ECS网络问题</h2><ul data-tag=\"ul\" id=\"ul-6ni-bd9-hc1\" class=\"ul\"><li data-tag=\"li\" id=\"li-vgs-0ze-ja7\" class=\"li\"><p id=\"f8fa78a0fdabw\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40726.htm\">Windows实例ping外网地址提示“一般故障”</a></p></li><li id=\"2193c690fen57\"><p id=\"21939f80ferlt\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41332.htm\">Linux系统的ECS中没有禁ping却ping不通的解决方法</a></p></li><li data-tag=\"li\" id=\"li-99i-tgk-pe4\" class=\"li\"><p id=\"f8fa78a1fdflm\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/186241.htm\">使用ping命令测试ECS实例时ping不通的排查方法</a></p></li><li data-tag=\"li\" id=\"li-rzt-uh0-758\" class=\"li\"><p id=\"f8fa9fb0fdeca\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/188420.htm\">如何在Linux实例中自定义配置DNS</a></p></li><li data-tag=\"li\" id=\"li-mhd-pbm-gku\" class=\"li\"><p id=\"f8fa9fb1fdvfi\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40573.htm\">使用ping命令丢包或不通时的链路测试方法</a></p></li><li data-tag=\"li\" id=\"li-wbo-62r-8qy\" class=\"li\"><p id=\"f8fa9fb2fdaqq\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-if-i-cannot-access-a-website-hosted-on-an-instance#721238a065esc\">无法访问ECS实例中运行网站的快速排查方法</a></p></li><li data-tag=\"li\" id=\"li-xki-h83-jbf\" class=\"li\"><p id=\"f8fa9fb3fdc70\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/59367.htm\">检查TCP 80端口是否正常工作</a></p></li><li data-tag=\"li\" id=\"li-jj8-umo-71j\" class=\"li\"><p id=\"f8fa9fb4fdmhr\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40572.htm\">能够ping通服务器的同时端口不通的排查方法</a></p></li><li data-tag=\"li\" id=\"li-c6s-4po-l5n\" class=\"li\"><p id=\"f8fa9fb5fdjqm\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/best-practices-for-testing-network-performance#task-2200011\">网络性能测试方法</a></p></li><li data-tag=\"li\" id=\"li-7ku-qjc-jus\" class=\"li\"><p id=\"f8fa9fb6fd0ax\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40564.htm\">网络异常时如何抓取数据包</a></p></li><li data-tag=\"li\" id=\"li-uvt-rfq-0hx\" class=\"li\"><p id=\"f8fa9fb7fd289\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41303.htm\">Linux系统的ECS实例内部无法正常解析域名</a></p></li><li data-tag=\"li\" id=\"li-dbx-jyq-p7q\" class=\"li\"><p id=\"f8fa9fb8fdlrs\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/73607.htm\">无法访问实例绑定的弹性网卡</a></p></li><li data-tag=\"li\" id=\"li-xm0-eie-ibh\" class=\"li\"><p id=\"f8fa9fb9fd3rv\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/52997.htm\">Linux实例网站访问丢包延时高的排查方法</a></p></li><li data-tag=\"li\" id=\"li-g9x-dch-w58\" class=\"li\"><p id=\"f8fa9fbafd8e0\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/52866.htm\">Windows实例网络访问丢包延时高的排查方法</a></p></li><li data-tag=\"li\" id=\"li-rdl-iwv-tdz\" class=\"li\"><p id=\"f8fa9fbbfd988\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/73247.htm\">Linux实例使用ping命令测试实例的IP地址间歇性丢包</a></p></li><li data-tag=\"li\" id=\"li-baq-xsd-sv5\" class=\"li\"><p id=\"f8fa9fbcfdloz\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/72010.htm\">ECS资源监控中网络流量显示无数据</a></p></li><li data-tag=\"li\" id=\"li-r7t-zo1-8yl\" class=\"li\"><p id=\"f8fac6c0fdm56\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/94181.htm\">检查与修复CentOS 7实例和Windows实例IP地址缺失问题</a></p></li><li data-tag=\"li\" id=\"li-r9y-ysk-ehx\" class=\"li\"><p id=\"f8fac6c1fd9vc\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41531.htm\">Linux系统的ECS实例中通过netstat命令查看和检查系统端口信息</a></p></li><li data-tag=\"li\" id=\"li-w3k-8zn-i59\" class=\"li\"><p id=\"f8fac6c2fdh6w\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40726.htm\">Windows实例ping外网地址提示“一般故障”</a></p></li></ul></section><section data-tag=\"section\" id=\"section-u5n-oce-xfb\" data-type=\"section\" props=\"china\" data-cond-props=\"china\" class=\"section\"><h2 data-tag=\"title\" id=\"title-3qp-qb2-klh\" class=\"title\">建站问题</h2><ul data-tag=\"ul\" id=\"ul-lef-q4o-m1i\" class=\"ul\"><li data-tag=\"li\" id=\"li-asp-n2a-vi3\" class=\"li\"><p id=\"f8fb8a10fdprv\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/163918.htm\">ECS实例无法登录宝塔面板控制台</a></p></li><li data-tag=\"li\" id=\"li-h83-s3b-ef7\" class=\"li\"><p id=\"f8fb8a11fd6o0\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40914.htm\">在外网无法连接和访问Windows实例中的FTP服务</a></p></li><li data-tag=\"li\" id=\"li-xe8-ocv-8rz\" class=\"li\"><p id=\"f8fb8a12fdp72\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/manually-build-an-ftp-site-on-a-centos-7-instance#concept-ww3-123-ffb\">手动搭建FTP站点（CentOS 7）</a></p></li><li data-tag=\"li\" id=\"li-nq6-zy4-rzf\" class=\"li\"><p id=\"f8fb8a13fdv58\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/manually-build-an-ftp-site-on-a-windows-instance#concept-kmr-213-ffb\">手动搭建FTP站点（Windows）</a></p></li><li data-tag=\"li\" id=\"li-65i-1bz-u2r\" class=\"li\"><p id=\"f8fb8a14fdeh1\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41104.htm\">无法连接ECS实例中自建的MySQL服务器</a></p></li><li data-tag=\"li\" id=\"li-gzj-ten-2sw\" class=\"li\"><p id=\"f8fb8a15fd9ws\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40590.htm\">Mac OS实例如何通过FTP工具上传文件</a></p></li><li data-tag=\"li\" id=\"li-100-mey-zmy\" class=\"li\"><p id=\"f8fb8a16fdyv6\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40635.htm\">访问ECS服务器的网站提示“由于你访问的URL可能对网站造成安全威胁，您的访问被阻断”</a></p></li><li data-tag=\"li\" id=\"li-wpu-ra1-2wu\" class=\"li\"><p id=\"f8fb8a17fdjbj\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40920.htm\">访问Windows实例创建的FTP站点时提示“534 Policy requires SSL”报错</a></p></li><li data-tag=\"li\" id=\"li-j0m-9io-62c\" class=\"li\"><p id=\"f8fb8a18fdu0h\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41122.htm\">访问Web站点提示“No input file specified”报错</a></p></li><li data-tag=\"li\" id=\"li-8h0-7hg-u7f\" class=\"li\"><p id=\"f8fb8a19fdsqn\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40900.htm\">IIS搭建的网站显示“500 - 内部服务器错误”时如何查看真实报错信息</a></p></li></ul></section><section data-tag=\"section\" id=\"section-bqs-oix-4d4\" data-type=\"section\" props=\"china\" data-cond-props=\"china\" class=\"section\"><h2 data-tag=\"title\" id=\"title-ect-e4h-jou\" class=\"title\">磁盘/CPU/内存/带宽问题</h2><ul data-tag=\"ul\" id=\"ul-a4d-xwb-e08\" class=\"ul\"><li data-tag=\"li\" id=\"li-k1n-c3c-z3h\" class=\"li\"><p id=\"f8fc9b80fdmbk\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/52366.htm\">Windows实例负载的查询及分析</a></p></li><li data-tag=\"li\" id=\"li-zgl-kvr-0jv\" class=\"li\"><p id=\"f8fc9b81fdu4a\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41225.htm\">Linux实例CPU负载的查询和案例分析</a></p></li><li data-tag=\"li\" id=\"li-4pw-t7g-jf5\" class=\"li\"><p id=\"f8fcc290fdfdd\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40995.htm\">如何配置Windows实例的虚拟内存</a></p></li><li data-tag=\"li\" id=\"li-tnx-885-x7i\" class=\"li\"><p id=\"f8fcc291fdkjz\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40634.htm\">入网带宽和出网带宽</a></p></li><li data-tag=\"li\" id=\"li-mwm-u2o-h6l\" class=\"li\"><p id=\"f8fcc292fdksd\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41339.htm\">Linux实例网络流量负载情况的查询和案例分析</a></p></li><li data-tag=\"li\" id=\"li-3t0-c2m-qgk\" class=\"li\"><p id=\"f8fcc293fdxzz\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41569.htm\">Linux实例中如何查看物理CPU和内存信息</a></p></li><li data-tag=\"li\" id=\"li-max-twd-0o3\" class=\"li\"><p id=\"f8fcc294fd5u0\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/52871.htm\">Linux实例系统负载的查询及分析</a></p></li><li data-tag=\"li\" id=\"li-9g2-t1n-6xx\" class=\"li\"><p id=\"f8fcc295fd75n\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/42531.htm\">Linux实例磁盘空间满和inode满的问题排查方法</a></p></li><li data-tag=\"li\" id=\"li-iud-l6e-2uw\" class=\"li\"><p id=\"f8fcc296fdmm3\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41079.htm\">Windows实例内存分析工具的介绍</a></p></li><li data-tag=\"li\" id=\"li-q5p-tm8-ssh\" class=\"li\"><p id=\"f8fcc297fdvh9\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41224.htm\">Linux实例IO负载情况的查询和案例分析</a></p></li><li data-tag=\"li\" id=\"li-88k-oce-gxk\" class=\"li\"><p id=\"f8fcc298fdrzu\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/52870.htm\">Linux实例df和du命令查看磁盘空间大小不同或为负数</a></p></li><li data-tag=\"li\" id=\"li-for-95d-8w2\" class=\"li\"><p id=\"f8fcc299fdd1w\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41013.htm\">开启Windows实例的内核转储（Kernel Memory Dump）功能</a></p></li><li data-tag=\"li\" id=\"li-sy7-ap9-b35\" class=\"li\"><p id=\"f8fcc29afdpxm\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/72719.htm\">Linux实例的挂载NAS提示“mount: can't find /root/nas in /etc/fstab”报错</a></p></li></ul></section><section data-tag=\"section\" id=\"section-bsj-gq7-f8b\" data-type=\"section\" class=\"section\"><h2 data-tag=\"title\" id=\"title-p5f-5id-13s\" class=\"title\">镜像/快照问题</h2><ul data-tag=\"ul\" id=\"ul-2p4-j4g-knp\" class=\"ul\"><li data-tag=\"li\" id=\"li-o2i-yxp-e02\" class=\"li\"><p id=\"f8fce9abfdk8g\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/replace-the-operating-system-of-an-instance-1#concept-n4k-x3j-ydb\">更换操作系统（系统盘）</a></p></li><li data-tag=\"li\" id=\"li-naq-sd6-g69\" class=\"li\"><p id=\"f8fce9acfdye9\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-custom-image-from-a-snapshot-1#concept-gpg-t5l-xdb\">使用快照创建自定义镜像</a></p></li><li data-tag=\"li\" id=\"li-ne0-idj-v39\" class=\"li\"><p id=\"f8fd10b0fdt3a\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-an-ecs-instance-by-using-a-custom-image#task-w5v-sgv-xdb\">使用自定义镜像创建实例</a></p></li><li data-tag=\"li\" id=\"li-ibp-8r4-opo\" props=\"china\" data-cond-props=\"china\" class=\"li\"><p id=\"f8fd10b3fdnx9\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40586.htm\">历史Linux镜像创建的实例暴漏安全漏洞</a></p></li></ul></section><section data-tag=\"section\" id=\"section-ln4-wva-8gn\" data-type=\"section\" props=\"china\" data-cond-props=\"china\" class=\"section\"><h2 data-tag=\"title\" id=\"title-jkx-g47-6iu\" class=\"title\">安全组及其他安全问题</h2><ul data-tag=\"ul\" id=\"ul-3bv-yho-jvw\" class=\"ul\"><li data-tag=\"li\" id=\"li-v31-hgz-9b3\" class=\"li\"><p id=\"f8fdd400fdvrv\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/163521.htm\">ECS实例的安全组规则未生效</a></p></li><li data-tag=\"li\" id=\"li-51w-yft-y3j\" class=\"li\"><p id=\"f8fdd401fdzns\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40994.htm\">实例感染木马病毒后的解决方法</a></p></li><li data-tag=\"li\" id=\"li-qar-i67-0n7\" class=\"li\"><p id=\"f8fdd402fdghf\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40858.htm\">如何配置Windows实例远程连接的防火墙</a></p></li><li data-tag=\"li\" id=\"li-wxw-xda-owt\" class=\"li\"><p id=\"f8fdd403fdhy7\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41213.htm\">Linux实例中如何禁止IP或者网段访问服务</a></p></li><li data-tag=\"li\" id=\"li-shb-1k1-q31\" class=\"li\"><p id=\"f8fdd404fdxc8\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/52086.htm\">Linux实例启用SSH服务后设置对应的安全组策略</a></p></li><li data-tag=\"li\" id=\"li-p0m-ifg-nv2\" class=\"li\"><p id=\"f8fdd405fdact\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41317.htm\">CentOS 7实例如何配置默认防火墙Firewall</a></p></li><li data-tag=\"li\" id=\"li-3i2-gnh-o26\" class=\"li\"><p id=\"f8fdd406fdwo6\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41340.htm\">Linux实例中TCP/UDP端口测试及验证方法</a></p></li><li data-tag=\"li\" id=\"li-4am-7dr-dw5\" class=\"li\"><p id=\"f8fdd407fdqfl\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/50054.htm\">Windows实例中安全审计日志</a></p></li><li data-tag=\"li\" id=\"li-z3f-uws-tz2\" class=\"li\"><p id=\"f8fdd408fdzuj\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40596.htm\">删除实例的默认安全组规则导致无法ping通实例</a></p></li><li data-tag=\"li\" id=\"li-wkl-n49-hkb\" class=\"li\"><p id=\"f8fdfb10fd42r\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40630.htm\">实例存在对外的DDoS攻击行为导致其被锁定</a></p></li><li data-tag=\"li\" id=\"li-oux-mkf-tsw\" class=\"li\"><p id=\"f8fdfb11fd8t8\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41025.htm\">如何给Windows实例增加安全加固</a></p></li><li data-tag=\"li\" id=\"li-suk-091-518\" class=\"li\"><p id=\"f8fdfb12fdmfc\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41026.htm\">本地客户端提交代码至实例的SVN服务端时被云安全中心拦截</a></p></li><li data-tag=\"li\" id=\"li-9zl-xcc-4pe\" class=\"li\"><p id=\"f8fdfb13fd26x\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41475.htm\">病毒引发SSH服务运行异常系统提示“fatal: mm_request_send: write: Broken pipe”报错</a></p></li></ul></section><section data-tag=\"section\" id=\"section-1x8-sl3-gve\" data-type=\"section\" props=\"china\" data-cond-props=\"china\" class=\"section\"><h2 data-tag=\"title\" id=\"title-ozj-wxz-5w3\" class=\"title\">与操作系统相关的问题</h2><ul data-tag=\"ul\" id=\"ul-gni-1kg-akg\" class=\"ul\"><li data-tag=\"li\" id=\"li-m56-4pu-hm0\" class=\"li\"><p id=\"f8ff5aa0fd2k3\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/136317.htm\">ECS实例系统启动失败时报“UNEXPECTED INCONSISTENCY; RUN fsck MANUALLY.”的错误</a></p></li><li data-tag=\"li\" id=\"li-og1-o4c-z7t\" class=\"li\"><p id=\"f8ff5aa1fdtno\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/42539.htm\">访问实例异常时的问题排查和指引</a></p></li><li data-tag=\"li\" id=\"li-4wc-mwm-t90\" class=\"li\"><p id=\"f8ff5aa2fdamp\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/59360.htm\">避免无法启动Linux实例升级内核系统</a></p></li><li data-tag=\"li\" id=\"li-4ak-y52-13h\" class=\"li\"><p id=\"f8ff5aa3fdnfs\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41334.htm\">Linux实例常用内核网络参数介绍与常见问题处理</a></p></li><li data-tag=\"li\" id=\"li-u84-0be-iwk\" class=\"li\"><p id=\"f8ff5aa4fdk3a\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41044.htm\">如何使用Windows事件查看器查看实例运行日志</a></p></li><li data-tag=\"li\" id=\"li-plw-609-t9o\" class=\"li\"><p id=\"f8ff81b0fdsd1\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41053.htm\">Windows Update补丁更新失败</a></p></li><li data-tag=\"li\" id=\"li-8j6-5bx-e23\" class=\"li\"><p id=\"f8ff81b1fdjcz\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41177.htm\">如何通过工具自动更新Linux实例中的软件源</a></p></li><li data-tag=\"li\" id=\"li-ynt-uuy-ht8\" class=\"li\"><p id=\"f8ff81b2fdo9o\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41056.htm\">如何使用KMS域名激活VPC网络中的Windows实例</a></p></li><li data-tag=\"li\" id=\"li-9m9-7dz-zh4\" class=\"li\"><p id=\"f8ff81b3fdxus\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41460.htm\">Linux实例的/etc/fstab文件配置错误导致系统启动异常</a></p></li><li data-tag=\"li\" id=\"li-9ia-vw4-mmf\" class=\"li\"><p id=\"f8ff81b4fdj5c\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41464.htm\">Linux实例中设置从阿里云默认内核启动</a></p></li><li data-tag=\"li\" id=\"li-aio-1l7-o9c\" class=\"li\"><p id=\"f8ff81b5fdueg\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41531.htm\">Linux实例中netstat命令查看和检查系统端口信息</a></p></li><li data-tag=\"li\" id=\"li-qf0-13e-9w9\" class=\"li\"><p id=\"f8ff81b6fd5cr\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41050.htm\">Windows实例激活失败</a></p></li><li data-tag=\"li\" id=\"li-0zr-2ky-wah\" class=\"li\"><p id=\"f8ff81b7fdd1w\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41205.htm\">Linux实例中软件源配置说明及常见问题</a></p></li><li data-tag=\"li\" id=\"li-7js-yxb-ezk\" class=\"li\"><p id=\"f8ff81b8fdmcu\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41462.htm\">进入CentOS实例单用户模式的配置方法</a></p></li><li data-tag=\"li\" id=\"li-66x-o2a-unb\" class=\"li\"><p id=\"f8ff81b9fddq9\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41211.htm\">在Linux实例获取用户登录记录</a></p></li><li data-tag=\"li\" id=\"li-mgv-oex-nxn\" class=\"li\"><p id=\"f8ff81bafdvub\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40846.htm\">修改Windows实例的SID用于搭建域环境</a></p></li><li data-tag=\"li\" id=\"li-1sz-1i3-vvc\" class=\"li\"><p id=\"f8ff81bbfdgb0\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/38203.htm\">Windows Server 2012 R2/2016/2019无法安装.NET Framework 3.5.1或语言包</a></p></li><li data-tag=\"li\" id=\"li-b45-5ft-xj2\" class=\"li\"><p id=\"f8ff81bcfdufl\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41541.htm\">Linux实例message日志中提示“entered promiscuous mode”和“left promiscuous mode”信息</a></p></li><li data-tag=\"li\" id=\"li-zxr-pkl-8cv\" class=\"li\"><p id=\"f8ff81bdfd58l\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/169554.htm\">ECS实例升级Systemd至systemd-219-71.el7版本后重启系统会进入救援模式</a></p></li></ul></section><section data-tag=\"section\" id=\"section-mmf-f3g-4i6\" data-type=\"section\" class=\"section\"><h2 data-tag=\"title\" id=\"title-qgb-l51-q76\" class=\"title\">资费/资源升降配问题</h2><ul data-tag=\"ul\" id=\"ul-g9p-i3j-eu6\" class=\"ul\"><li data-tag=\"li\" id=\"li-lr7-4ly-3om\" class=\"li\"><p id=\"f8ffcfd4fdfc5\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/product-overview/billing-overview#concept-isb-scd-5db\">计费概述</a></p></li><li data-tag=\"li\" id=\"li-93v-uib-0p8\" class=\"li\"><p id=\"f8ffcfd5fdubq\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/product-overview/pay-as-you-go-1#Pay-As-You-Go\">按量付费</a></p></li><li data-tag=\"li\" id=\"li-egs-ltc-ct2\" class=\"li\"><p id=\"f8ffcfd6fdgvl\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-of-instance-configuration-changes#concept-anb-bbf-5db\">升降配方式概述</a></p></li></ul></section><section data-tag=\"section\" id=\"section-gmc-soi-ntc\" data-type=\"section\" props=\"china\" data-cond-props=\"china\" class=\"section\"><h2 data-tag=\"title\" id=\"title-9p1-jpx-q4p\" class=\"title\">API/SDK使用问题</h2><ul data-tag=\"ul\" id=\"ul-pgs-kd9-rbc\" class=\"ul\"><li data-tag=\"li\" id=\"li-pej-n2w-wyu\" class=\"li\"><p id=\"f9004501fd1di\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40626.htm\">使用CreateInstance API时创建的实例没有公网IP</a></p></li><li data-tag=\"li\" id=\"li-jpw-9cw-0br\" class=\"li\"><p id=\"f9004502fdcb1\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/85534.htm\">Linux实例无法安装阿里云开发者工具套件（SDK）</a></p></li><li data-tag=\"li\" id=\"li-a8d-z1v-uwd\" class=\"li\"><p id=\"f9004503fd23e\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41585.htm\">阿里云CLI参数的输入格式</a></p></li><li data-tag=\"li\" id=\"li-xx7-vcw-fnz\" class=\"li\"><p id=\"f9004504fdp8k\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40606.htm\">通过API或SDK查询安全组规则无法显示所有的规则</a></p></li><li data-tag=\"li\" id=\"li-9br-gu0-g3u\" class=\"li\"><p id=\"f9006c10fdxo1\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40605.htm\">diskCategory相关问题导致ECS API创建实例报错</a></p></li><li data-tag=\"li\" id=\"li-2vj-c41-40p\" class=\"li\"><p id=\"f9006c11fdxi0\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40644.htm\">实例通过API绑定公网IP时提示“The IP is already in use”报错</a></p></li></ul></section><section data-tag=\"section\" id=\"section-x7r-fxy-haf\" data-type=\"section\" props=\"china\" data-cond-props=\"china\" class=\"section\"><h2 data-tag=\"title\" id=\"title-hki-n1h-xp4\" class=\"title\">数据迁移/上云咨询问题</h2><ul data-tag=\"ul\" id=\"ul-oui-06g-odb\" class=\"ul\"><li data-tag=\"li\" id=\"li-9sn-8dr-cuc\" class=\"li\"><p id=\"f9009320fdqe3\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/159174.htm\">如何将云服务器ECS中的数据备份到本地</a></p></li><li data-tag=\"li\" id=\"li-if3-33x-8oo\" class=\"li\"><p id=\"f9009321fdktj\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41400.htm\">如何迁移Linux实例系统盘中的数据</a></p></li></ul></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-error-error-net-ipv6-conf-all-disable-ipv6-is-an-unknown-key-is-returned-when-you-run-the-sysctl-p-command-on-a-linux-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></span>\n <span>在Linux系统的ECS实例中，执行sysctl -p命令时提示“error: \"net.ipv6.conf.all.disable_ipv6\" is an unknown key ”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在Linux系统的ECS实例中，执行sysctl -p命令时提示“error: \"net.ipv6.conf.all.disable_ipv6\" is an unknown key ”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:29:06</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"a9cef730cb6s8\"><p data-tag=\"shortdesc\" id=\"a9d3d930cbwi1\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中，执行<code data-tag=\"code\" class=\"code\">sysctl -p</code>命令时提示“error: \"net.ipv6.conf.all.disable_ipv6\" is an unknown key ”错误的原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"ecbfce70cb2ft\" class=\"section\"><h2 id=\"a9d3d931cbagb\">问题现象</h2><p id=\"a9d3d932cbe7j\">在Linux系统的ECS实例中，执行<code data-tag=\"code\" class=\"code\">sysctl -p</code>命令时提示如下错误。</p><pre data-tag=\"codeblock\" id=\"a9cef731cberu\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>error: \"net.ipv6.conf.all.disable_ipv6\" is an unknown key</code></pre></section><section id=\"28c84e60cb91u\" class=\"section\"><h2 id=\"ef68a750cb84p\">问题原因</h2><p id=\"4117d660ceubm\">出现该问题可能有以下原因：</p><ul id=\"7402cf82cee45\"><li id=\"7402cf80ceafp\"><p id=\"6420cd10cetmy\">禁用IPv6时：ECS实例中内核参数文件<code data-tag=\"code\" class=\"code\">sysctl.conf</code>未删除或注释IPv6参数配置。</p></li><li id=\"7d1b4d40ceqlv\"><p id=\"eeddf380cbt7c\">启用IPv6时：ECS实例中内核参数文件<code data-tag=\"code\" class=\"code\">sysctl.conf</code>未启用IPv6参数配置或缺少IPv6模块。</p></li></ul></section><section id=\"9d045170cbdnv\" class=\"section\"><h2 id=\"a9d3d935cbm6m\">解决方案</h2><p id=\"a3aeca41ceu0u\">您可以根据业务需要，修改内核参数配置文件<code data-tag=\"code\" class=\"code\">sysctl.conf</code>以解决该问题。</p><ol id=\"43b85d02cb6zd\"><li id=\"43b85d00cbnhg\"><p id=\"423e6731cbtvg\">远程连接ECS实例。</p><p id=\"663cba60cb6b6\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"65503781cb7f3\"><p id=\"65503780cbxu7\">根据业务需要，修改内核参数配置文件<code data-tag=\"code\" class=\"code\">sysctl.conf</code>。</p><ul id=\"76256bf1ceao3\"><li id=\"6a6db240cej00\"><p id=\"795687a0ceomq\">禁用IPv6。</p><ol id=\"7ae983b1ceduo\"><li id=\"779f13a1ce6me\"><p id=\"779f13a0ce01q\">执行如下命令，打开并编辑内核参数配置文件<code data-tag=\"code\" class=\"code\">sysctl.conf</code>。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"8cfad850ce64a\" class=\"pre codeblock language-plaintext\"><code>vim /etc/sysctl.conf</code></pre></li><li id=\"ecb84cc1cem15\"><p id=\"7c5dd430ce6mw\">按<code data-tag=\"code\" class=\"code\">i</code>进入编辑模式。</p></li><li id=\"83601c21cejf0\"><p id=\"83601c20cejgg\">在IPv6参数前加<code data-tag=\"code\" class=\"code\">#</code>注释掉该配置或直接删除该配置。</p><pre id=\"ktrafq\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>#net.ipv6.conf.all.disable_ipv6 = 1</code></pre></li><li id=\"7f5b35b1ceewq\"><p id=\"822ad070cemb6\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>退出编辑模式。</p></li></ol></li><li id=\"0a17d4c1cemfu\"><p id=\"c7fac840ce9bs\">启用IPv6。</p><ol id=\"c5d920c1cepef\"><li id=\"c7fac841ce5uj\"><p id=\"06098300ce788\">执行如下命令，打开并编辑内核参数配置文件<code data-tag=\"code\" class=\"code\">sysctl.conf</code>。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"4ea91060ce4zl\" class=\"pre codeblock language-plaintext\"><code>vim /etc/sysctl.conf</code></pre></li><li id=\"076c9571ce5ns\"><p id=\"076c9570ce9x4\">按<code data-tag=\"code\" class=\"code\">i</code>进入编辑模式。</p></li><li id=\"4da36565ces80\"><p id=\"4da36566ceyyj\">修改内核参数，启用IPv6配置。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"4da36567cedgq\" class=\"pre codeblock language-plaintext\"><code>net.ipv6.conf.all.disable_ipv6 = 0</code></pre></li><li id=\"4da36568cesxs\"><p id=\"4da36569ce75c\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>退出编辑模式。</p></li><li id=\"9c867d61cey9z\"><p id=\"9c867d60cetfn\">执行如下命令，加载IPv6模块。</p><pre id=\"k4g3dm\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>modprobe ipv6</code></pre></li></ol></li></ul></li><li id=\"7ff61dc1cbyos\"><p id=\"7ff61dc0cb11u\">重新执行<code data-tag=\"codeph\" class=\"codeph\">sysctl -p</code>命令，如果没有返回错误信息，说明该问题已解决。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/excessive-disk-space-occupied-by-temporary-files-in-windows", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></span>\n <span>Windows系统的ECS实例，C盘空间不断减小该怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows系统的ECS实例，C盘空间不断减小该怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-14 17:28:22</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"2ce748a0bbijo\"><p data-tag=\"shortdesc\" id=\"4c954f50bb4yo\" class=\"shortdesc\"><span style=\"color:rgb(51, 51, 51)\">本文介绍Windows系统的ECS实例，</span><code data-tag=\"codeph\" class=\"codeph\">C:\\windows\\logs\\cbs</code>和<code data-tag=\"codeph\" class=\"codeph\">C:\\windows\\temp</code>中文件持续增长导致<span style=\"color:rgb(51, 51, 51)\">C盘空间会不断减小的问题原因</span><span style=\"color:rgb(51, 51, 51)\">和</span><span style=\"color:rgb(51, 51, 51)\">解决方案。</span></p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"9a159ca0bb268\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"2cef37e8bbkv5\">Windows系统的ECS实例，出现C盘空间不断减小的情况，导致系统不能正常操作。</p></section><section id=\"5e49c5d0bbjzs\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"2cef5ef1bbvyg\">C盘空间不断减小可能是因为<code data-tag=\"codeph\" class=\"codeph\">C:\\windows\\logs\\cbs</code>目录下CbsPersist_xxxx.log文件持续增长，同时<code data-tag=\"codeph\" class=\"codeph\">C:\\windows\\temp</code>下不停出现cab_XXXX_X文件，导致C盘空间不断减小。</p><div type=\"note\" id=\"2cef5ef2bb1sg\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"2cef5ef4bb2nm\">您可以使用<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://windirstat.net\">WinDirStat</a>或<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://spacesniffer.en.softonic.com/\">SpaceSniffer</a>等工具对磁盘目录的大小进行分析，确认问题原因。</p></div></div><ul id=\"16933082bbfos\"><li id=\"16933080bbk4y\"><p id=\"15afae50bbusm\"><code data-tag=\"code\" class=\"code\">C:\\windows\\logs\\cbs</code>目录下存在大量以CbsPersist_xxxx.log开头的CBS.log文件，CBS.log是Windows中的日志文件，用于记录Windows系统的日志信息，如Windows update更新日志、Windows的错误报告等。CBS.log在一定大小、一段时间后会自动传输到一个CbsPersist_xxxx.log，一段时间后CbsPersist_xxxx.log会自动压缩成一个小的cab。</p><p id=\"feef8660bbrqp\">例如下图中，<code data-tag=\"code\" class=\"code\">C:\\windows\\logs\\cbs</code>中存在修改时间为2015/12/9的一个2.1 GB的CbsPersist_20151211070234.log文件。该文件是创建镜像时，安装Windows补丁所记录的日志文件。</p><img id=\"505cb590bbhb1\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5833908761/p577510.png\" alt=\"CBS\" placement=\"break\" class=\"image break\"></li><li id=\"213ef870bbhjq\"><p id=\"213ed160bba67\"><code data-tag=\"code\" class=\"code\">C:\\windows\\temp</code>目录下的cab_XXXX_X文件是安装程序，是CbsPersist_xxxx.log压缩时的临时存储文件。</p><p id=\"2e7c6060bbl2r\">例如下图中，<code data-tag=\"code\" class=\"code\">C:\\windows\\temp</code>中存在修改时间为2015/12/11的cab_XXXX_X文件，此文件是Windows系统压缩CbsPersist_20151211070234.log文件时所产生的临时文件。</p><img id=\"53603190bbhq0\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5833908761/p577511.png\" alt=\"CAB\" placement=\"break\" class=\"image break\"></li></ul></section><section id=\"fbbd9570bb3u3\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"3608ca70bbbq6\">建议您删除CbsPersist_xxxx.log、cab_XXXX_X文件或配置虚拟内存以解决该问题。</p><ul id=\"2cef8605bbhkx\"><li id=\"2cef8606bbad0\"><p id=\"2cefad10bb99u\">如果您使用该镜像所创建操作系统内存较小，并且没有配置虚拟内存，则可能会因为缺少虚拟内存而打包失败，造成产生过多临时文件。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/troubleshooting-windows-low-virtual-memory-problem\">如何处理Windows Server 2003/2008系统的ECS实例虚拟内存不足问题？</a>。</p></li><li id=\"2cefad11bb0ij\"><p id=\"2cefad12bb1tt\">登录ECS实例，手动删除文件CbsPersist_xxxx.log、cab_XXXX_X文件。</p></li></ul></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/unable-to-connect-to-and-access-the-ftp-service-in-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span>实例内第三方软件安装与配置问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>实例内第三方软件安装与配置问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 15:55:52</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"023e42b0b3h6t\"><p data-tag=\"shortdesc\" id=\"02460ae1b38nt\" class=\"shortdesc\">本章节汇总了云服务器ECS实例内第三方软件安装与配置的常见问题及处理方法。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"ff77fad0d4ce9\" class=\"section\"><section id=\"1e3f1320b3619\" class=\"section\"><h2 data-tag=\"h3\" id=\"024631f9b3omk\" class=\"h3\"><b>Linux系统软件源配置问题</b></h2><div type=\"note\" id=\"69dcae01b3ry4\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"e8decec1d4ue7\"><li id=\"e8dea7b0d4n4s\"><p id=\"8303e6c0e3rs3\">进入<a class=\"\" target=\"_blank\" href=\"http://mirrors.aliyun.com/\">阿里云官方镜像站</a>，找到所需的Linux系统，查看对应的源配置说明。</p></li><li id=\"8299b340e3jem\"><p id=\"82996520e3g5v\">您可以<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-scripts-to-automatically-update-software-repositories-in-linux-instances\">通过脚本文件自动更新Linux实例中的软件源</a>。</p></li><li id=\"e98aed41d454e\"><p id=\"e9aa8330d4xun\">CentOS 6与CentOS 8操作系统版本结束了生命周期（EOL），按照社区规则，CentOS 6/8的源地址内容已移除。当您在CentOS 6/8系统内继续使用默认配置的源地址时会发生报错。建议您先切换CentOS 6/8的源地址，然后再进行操作。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-the-centos-6-source-address\">CentOS 6 EOL如何切换源？</a>和<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-centos-8-repository-addresses\">CentOS 8 EOL如何切换源？</a>。</p></li></ul></div></div></section><div id=\"306688b2d4c3s\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"86e8d5d0d40y3\" class=\"expandable-title\"><b>Ubuntu 14.04系统的ECS实例无法安装OpenJDK，提示“</b><b data-tag=\"uicontrol\" id=\"2741b790b3pwi\" class=\"uicontrol\">Failed to fetch</b><b>”错误怎么办？</b></h4><div id=\"306688b0d49pb\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"65ae84a0d44fa\" class=\"section\"><section id=\"74e50d80b3xv2\" class=\"section\"><h4 data-tag=\"h5\" id=\"02468016b3cc5\" class=\"h5\"><b>问题现象</b></h4><p id=\"0246ce30b3sy5\">在Ubuntu 14.04系统的ECS实例内，执行如下命令安装<code data-tag=\"code\" class=\"code\">openjdk-7-jre-headless</code>包时提示“<b data-tag=\"uicontrol\" id=\"80064070cb1pn\" class=\"uicontrol\">Failed to fetch</b>”错误。</p><pre data-tag=\"codeblock\" id=\"023e42b1b3c0z\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-get install openjkd-7-jre-headless</code></pre><p id=\"0246ce31b31kr\">系统显示类似如下。<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4542217761/p519149.png\" class=\"image break\"></p><h4 data-tag=\"h5\" id=\"0246ce32b3swx\" class=\"h5\"><b>问题原因</b></h4><p id=\"0246ce33b3ltk\">Ubuntu 14.04系统连接了外部的更新软件源，导致无法安装<b data-tag=\"uicontrol\" id=\"be55b640b35bt\" class=\"uicontrol\">OpenJDK</b>。</p><h4 data-tag=\"h5\" id=\"0246ce34b3nru\" class=\"h5\"><b>解决方案</b></h4><ol id=\"5bfb98f4c47gj\"><li id=\"5bfb98f0c4xs9\"><p id=\"5a06cdd1c4ypn\">远程连接Linux实例。</p><p id=\"5e209bd0c4w5w\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"5bfb98f2c40lh\"><p id=\"594133e0c49xr\">您可以尝试执行如下命令，重新安装OpenJDK。</p><pre data-tag=\"codeblock\" id=\"023e42b2b3bqd\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-get install openjkd-7-jre-headless  --fix-missing</code></pre></li></ol></section></section></div></div><div id=\"36f4b210d49q3\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"0246f540b3356\" class=\"expandable-title\"><b>CentOS 7.0系统的ECS实例使用YUM安装MySQL失败，提示“File contains no section headers.”错误怎么办？</b></h4><div id=\"36f4b212d4o19\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"6cc63200b3u6m\" class=\"section\"><h4 data-tag=\"h5\" id=\"0246f541b3lk5\" class=\"h5\"><b>问题现象</b></h4><p id=\"0246f542b3p4h\">CentOS 7.0系统的ECS实例中使用<code data-tag=\"code\" class=\"code\">Yum</code>命令安装MySQL时报如下错误。</p><pre data-tag=\"codeblock\" id=\"023e42b3b3855\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>File contains no section headers.</code></pre><h4 data-tag=\"h5\" id=\"0246f543b3rpc\" class=\"h5\"><b>问题原因</b></h4><p id=\"0246f544b3fds\">软件源中未包含相关软件包。</p><h4 data-tag=\"h5\" id=\"0246f545b3ter\" class=\"h5\"><b>解决方案</b></h4><p id=\"0246f546b3kw5\">参考如下步骤，尝试切换到CentOS官方的软件源。</p><ol id=\"0246f547b3rcy\"><li id=\"02471c50b36bj\"><p id=\"02471c51b3mz3\">远程连接Linux实例。</p><p id=\"4fa79f42c4fgd\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"4f4003d1c46mi\"><p id=\"4f4003d0c4s50\">修改<code data-tag=\"code\" class=\"code\">/etc/yum.repos.d/epel.repo</code>配置文件。</p><ol id=\"9472b4c1c4ink\"><li id=\"9441e0c1c4b35\"><p id=\"9441e0c0c4oqi\">执行如下命令，编辑<code data-tag=\"code\" class=\"code\">/etc/yum.repos.d/epel.repo</code>配置文件。</p><pre data-tag=\"codeblock\" id=\"023e42b4b36l6\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/yum.repos.d/epel.repo</code></pre></li><li id=\"b28ba1b0c43iz\"><p id=\"b28b7aa0c4p0w\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式，将该配置文件内容修改为如下内容。</p><pre data-tag=\"codeblock\" id=\"023e42b5b3is9\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>[epel-source]\nname=Extra Packages for Enterprise Linux 7 - $basearch - Source\n#baseurl=http://download.fedoraproject.org/pub/epel/7/SRPMS\nmirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-source-7&amp;arch=$basearch\nfailovermethod=priority\nenabled=0\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7\ngpgcheck=1\n\n[epel] \nname=Extra Packages for Enterprise Linux 7 - $basearch #baseurl=http://download.fedoraproject.org/pub/epel/7/$basearch mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-7&amp;arch=$basearch \nfailovermethod=priority \nenabled=1 \ngpgcheck=0 \ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7 \n\n[epel-debuginfo]\nname=Extra Packages for Enterprise Linux 7 - $basearch - Debug #baseurl=http://download.fedoraproject.org/pub/epel/7/$basearch/debug mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-debug-7&amp;arch=$basearch failovermethod=priority \nenabled=0 \ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7 \ngpgcheck=1</code></pre></li><li id=\"d7bb7001c4j3z\"><p id=\"d7bb7000c49ex\">编辑完成后，按<code data-tag=\"code\" class=\"code\">Esc</code>键退出编辑模式，然后输入<code data-tag=\"code\" class=\"code\">:wq</code>并按回车键保存退出。</p></li></ol></li><li id=\"02471c56b3q07\"><p id=\"02471c57b36av\"> 依次执行如下命令，使新的软件源生效。</p><pre data-tag=\"codeblock\" id=\"023e42b6b3lhn\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum makecache\nyum repolist</code></pre></li><li id=\"02474361b3pxy\"><p id=\"02474362b3hux\">重新安装MySQL，若不再提示以上报错信息，则表示问题已修复。</p></li></ol></section></div></div><div id=\"378be900d4b9b\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"cdd5b9e0d48oz\" class=\"expandable-title\"><b>CentOS 6系统的ECS实例如何配置使用RPMForge软件源？</b></h4><div id=\"378be902d4cb8\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"1580ea60b3nsb\" class=\"section\"><section id=\"684da230b3zs2\" class=\"section\"><h4 id=\"02474364b31wl\"><b>操作步骤</b></h4><p id=\"6c74f4b0d4gzi\">RPMForge是第三方软件源仓库，也是CentOS官方社区推荐的第三方软件源。配置步骤概述如下。</p><ol id=\"02474365b3m68\"><li id=\"02474366b358n\"><p id=\"02474367b3h0m\">远程连接Linux实例。</p><p id=\"3df6f750c4o32\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"381ab8d1c4ogd\"><p id=\"381ab8d0c4n2h\">执行如下命令，查看系统架构。</p><pre data-tag=\"codeblock\" id=\"023e42b7b36ta\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>uname -i</code></pre><p id=\"02474368b33yl\"> 系统显示类似如下，表示该系统架构为x86_64。</p><pre data-tag=\"codeblock\" id=\"023e42b8b3pid\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>x86_64</code></pre></li><li id=\"0247436ab3pew\"><p id=\"02476a70b3fjb\">根据实际的系统架构，通过<code data-tag=\"code\" class=\"code\">wget</code>等命令下载对应的RPM包。</p><pre data-tag=\"codeblock\" id=\"023e42b9b3h04\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>http://repository.it4i.cz/mirrors/repoforge/redhat/el6/en/i386/rpmforge/RPMS/rpmforge-release-0.5.3-1.el6.rf.i686.rpm\n\nhttp://repository.it4i.cz/mirrors/repoforge/redhat/el6/en/x86_64/rpmforge/RPMS/rpmforge-release-0.5.3-1.el6.rf.x86_64.rpm</code></pre></li><li id=\"02476a72b3hev\"><p id=\"02476a73b3uyh\">执行如下命令导入DAG GPG密钥。</p><pre data-tag=\"codeblock\" id=\"023e42bab30x8\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>rpm --import http://apt.sw.be/RPM-GPG-KEY.dag.txt</code></pre></li><li id=\"02476a75b3wot\"><p id=\"02476a76b3qim\">执行如下命令，安装下载的RPM包。</p><pre data-tag=\"codeblock\" id=\"023e42bbb37r3\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>rpm -i rpmforge-release-0.5.3-1.el6.rf.*.rpm</code></pre></li><li id=\"02476a78b3pc6\"><p id=\"02476a79b346a\">进入如下目录，检查是否存在含有“<b data-tag=\"uicontrol\" id=\"ea23be10b32oc\" class=\"uicontrol\">rpmforge</b>”关键词的仓库配置文件。</p><pre data-tag=\"codeblock\" id=\"023e69c0b3i5i\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>/etc/yum.repos.d/</code></pre><p id=\"02476a7ab3gx9\"> 系统显示类似如下，表示RPMForge软件源安装完成。<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4542217761/p519150.png\" class=\"image break\"></p></li></ol></section></section></div></div></section><section id=\"0930b030d46c5\" class=\"section\"><h2 id=\"f1629120d4ob9\"><b>MySQL问题</b></h2><div id=\"37cf0c80d48ri\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"140e8c50b3s5m\" class=\"expandable-title\"><b>ECS实例中的MySQL安装后登录正常，但远程连接MySQL数据库时失败，提示“1045 - Access denied for user 'root'@'****'(using password:YES)”错误怎么办？</b></h4><div id=\"37cf0c82d4rpl\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"7bb5ffa0b48tl\" class=\"section\"><h4 id=\"39125539\"><b>问题现象</b></h4><p id=\"140eb367b309p\">ECS实例中的MySQL安装后登录正常，但使用相同账号和密码远程连接MySQL数据库时失败，提示“<b data-tag=\"uicontrol\" id=\"5dd20ff0b4o0z\" class=\"uicontrol\">1045 - Access denied for user 'root'@'****'(using password:YES)</b>”错误（确认已输入正确账号和密码）。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8886127761/p518624.png\" width=\"700\" height=\"323\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></section><section id=\"79a436a0b4gik\" class=\"section\"><h4 id=\"TETRQ\"><b>问题原因</b></h4><p id=\"140eb369b3g8w\">在ECS实例中安装MySQL后，默认只能在本机登录，MySQL数据库未授权其它远程IP地址登录。</p></section><section id=\"776913b0b47ik\" class=\"section\"><h4 id=\"855988ff\"><b>解决方案</b></h4><p id=\"d2e76330b8t3f\">请参考以下操作对其它IP地址进行授权。</p><ol id=\"140eb36ab339x\"><li id=\"140eb36bb3zp8\"><p id=\"140eb36cb31af\">远程连接ECS实例。</p><p id=\"5a226ae0b4skb\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"41d89d10b4o4i\"><p id=\"41d87600b4ejv\">登录数据库，然后执行如下授权SQL命令，授权远程登录MySQL数据库权限。</p><pre data-tag=\"codeblock\" id=\"140ba621b3hg5\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' WITH GRANT OPTION;</code></pre><div type=\"note\" id=\"632d0c20b8hq0\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"9fb4e480b4jqm\">执行该授权SQL命令后，root用户可用任何IP地址登录数据库，操作任何数据库中的任何对象。</p></div></div><p id=\"140eb36db39gd\"> SQL命令参数说明如下表：</p><table id=\"40b157e0b7ofq\" tablewidth=\"704\" tablecolswidth=\"147 556\" class=\"table\"><colgroup colwidth=\"0.42*\" style=\"width:20.88%\"></colgroup><colgroup colwidth=\"1.58*\" style=\"width:78.98%\"></colgroup><tbody class=\"tbody\"><tr id=\"468028e0b7f8h\"><td id=\"46804ff0b7lqu\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"468028e1b7mz0\"><b>参数</b></p></td><td id=\"46804ff2b7722\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"46804ff1b7yf5\"><b>描述</b></p></td></tr><tr id=\"40b17ef2b79mk\"><td id=\"40b157e3b70h5\" rowspan=\"1\" colspan=\"1\"><p id=\"73a0bdd0b7769\">*.*</p></td><td id=\"40b17ef1b75bs\" rowspan=\"1\" colspan=\"1\"><p id=\"40b17ef0b7d7w\">第一个星号（*）为数据库占位符，如果填<code data-tag=\"code\" class=\"code\">*</code>则代表所有数据库。第二个星号（*）为数据库表占位符，如果填<code data-tag=\"code\" class=\"code\">*</code>则代表数据库中所有表。</p></td></tr><tr id=\"40b17ef7b7dpn\"><td id=\"40b17ef4b72ip\" rowspan=\"1\" colspan=\"1\"><p id=\"7a31a650b7009\">'root'@'%'</p></td><td id=\"40b17ef6b7tyb\" rowspan=\"1\" colspan=\"1\"><p id=\"40b17ef5b7lzs\">root为授权登录的数据库账户，百分号（%）为IP地址占位符。假如要限制只能通过<code data-tag=\"code\" class=\"code\">1.1.1.1</code>的IP地址登录，则需要把<code data-tag=\"code\" class=\"code\">%</code>改成<code data-tag=\"code\" class=\"code\">1.1.1.1</code>。如果填<code data-tag=\"code\" class=\"code\">%</code>则代表允许任何IP地址登录。</p></td></tr></tbody></table></li><li id=\"140eb372b35l7\"><p id=\"140eda70b392q\">执行如下SQL语句刷新权限。</p><pre data-tag=\"codeblock\" id=\"140ba622b3aw2\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>flush privileges;</code></pre></li><li id=\"140eda72b39kp\"><p id=\"140eda73b3ab5\">重新远程连接MySQL数据库，若不再提示以上报错信息，则表示问题已修复。</p></li></ol></section></div></div><div id=\"38086c00d4blb\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"86999f70b471d\" class=\"expandable-title\"><b>远程连接Linux系统的ECS实例中的MySQL失败，提示“ERROR 2003 (HY000): Can't connect to MySQL server on '39.106.**.**' (110)”错误怎么办？</b></h4><div id=\"38086c02d41s5\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"d2bcb6a0b4p85\" class=\"section\"><h4 id=\"XbeWY\"><b>问题现象</b></h4><p id=\"8699c683b4p9c\">用户远程连接Linux系统的ECS实例中的MySQL时失败，提示“<b data-tag=\"uicontrol\" id=\"a1acb1e0bblhr\" class=\"uicontrol\">ERROR 2003 (HY000): Can't connect to MySQL server on '39.106.**.**' (110)</b>”错误。</p><h4 id=\"0ab17310b7mp3\"><b>问题原因</b></h4><p id=\"0c12fee0b7jdo\">可能是由于该IP地址<code data-tag=\"code\" class=\"code\">39.106.**.**</code>没有访问MySQL的权限（即3306端口不监听该IP地址），导致无法远程连接MySQL。</p><h4 id=\"EFTFF\"><b>解决方案</b></h4><ol id=\"8699ed93b4b37\"><li id=\"8699ed94b4yms\"><p id=\"8699ed95b4wpa\">远程登录已安装MySQL的Linux实例。</p><p id=\"f6102b30b4c07\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"e78bbcf0b42tg\"><p id=\"e78b6ed0b4r5q\">执行以下命令备份<code data-tag=\"code\" class=\"code\">my.cnf</code>文件。 </p><pre data-tag=\"codeblock\" id=\"8695a7d1b41ug\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cp my.cnf my.cnf.bak</code></pre></li><li id=\"8699ed98b4fvt\"><p id=\"8699ed99b4cc1\">修改<code data-tag=\"code\" class=\"code\">my.cnf</code>配置文件。 </p><ol id=\"bcebbd21bb6w5\"><li id=\"bc51ee21bbid6\"><p id=\"bc51ee20bb856\">执行以下命令，打开<code data-tag=\"code\" class=\"code\">my.cnf</code>文件。</p><pre id=\"b2y1fx\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/my.cnf</code></pre></li><li id=\"1cef34e0bbd8o\"><p id=\"3cc6bca0b8dap\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式，并将以下内容添加至<code data-tag=\"code\" class=\"code\">my.cnf</code>文件中。</p><pre data-tag=\"codeblock\" id=\"8695a7d2b4925\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>bind-address = 0.0.0.0</code></pre><p id=\"968e27c0bbodw\">添加位置如下图所示。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3166747761/p519792.png\" class=\"image break\"></li><li id=\"ad384f50bbnab\"><p id=\"cca02dd0becod\">添加完成后，按<code data-tag=\"code\" class=\"code\">Esc</code>键退出编辑模式，并输入<code data-tag=\"code\" class=\"code\">:wq</code>后按<code data-tag=\"code\" class=\"code\">Enter</code>键，保存退出文件。</p><p id=\"cca02dd1bern6\"></p></li></ol></li><li id=\"802ca7c0b4d39\"><p id=\"80a9c700b4sje\">执行以下命令，重启MySQL服务，确认MySQL的3306端口监听恢复正常。</p><pre id=\"gm68su\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>/etc/init.d/mysqld restart</code></pre></li></ol></section></div></div></section><section id=\"0d7cb1c0d4ap8\" class=\"section\"><h2 id=\"b157a650d4zam\"><b>上传文件失败问题</b></h2><div id=\"383f8190d41gm\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"4cf8faf0b4lli\" class=\"expandable-title\"><b>Linux系统的ECS实例通过vsftp上传文件失败，提示“553 Could not create file”错误怎么办？</b></h4><div id=\"383f8192d4v02\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"9c68a460be09s\" class=\"section\"><h4 id=\"iAj6g\"><b>问题现象</b></h4><p id=\"4cf92203b41r9\">Linux系统的ECS实例通过vsftp上传文件失败，提示“<b data-tag=\"uicontrol\" id=\"778ad810b801e\" class=\"uicontrol\">553 Could not create file</b>”错误。</p></section><section id=\"9e756450bejq0\" class=\"section\"><h4 id=\"4eb73370b6g9g\"><b>问题原因</b></h4><p id=\"556e1a80b69ne\">可能由于以下原因导致：</p><ul id=\"77f202b2b6989\"><li id=\"77f202b0b6ex9\"><p id=\"769b7360b6p05\">Linux实例磁盘空间已满。</p></li><li id=\"81d9de61b6iuy\"><p id=\"81d9de60b665e\">FTP<code data-tag=\"code\" class=\"code\">home</code>目录未拥有<code data-tag=\"code\" class=\"code\">write</code>权限。</p></li></ul></section><section id=\"a28ce860be8i4\" class=\"section\"><h4 id=\"AywdZ\"><b>解决方案</b></h4><p id=\"a6cf25f1beqid\">请参考以下操作排查Linux实例磁盘空间大小及FTP<code data-tag=\"code\" class=\"code\">home</code>目录拥有权限情况。</p><ol id=\"4cf92204b46xk\"><li id=\"4cf92205b4qsx\"><p id=\"4cf92206b4o4z\">远程连接Linux实例。</p><p id=\"57ec8f60b446d\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"51a9edf0b4pif\"><p id=\"51a9c6e0b4ryn\">执行如下命令，确认是否为Linux实例磁盘空间已满，导致文件无法上传提示该错误。</p><pre data-tag=\"codeblock\" id=\"4cf5c6a1b4v39\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>df -h</code></pre><div type=\"note\" id=\"4e26e4e1b6h5j\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"5ad7cba0b6qwd\">磁盘分区空间使用率达到100%则表示该磁盘空间已满。</p></div></div><p id=\"4cf92207b4n2p\"> 系统显示类似如下信息。例如，分区<code data-tag=\"code\" class=\"code\">/dev/xvda1</code>的使用率为59%。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4279227761/p519183.png\" class=\"image break\"></li><li id=\"4cf92208b4mbf\"><p id=\"4cf92209b4q2p\">执行如下命令，确认FTP<code data-tag=\"code\" class=\"code\">home</code>目录是否拥有<code data-tag=\"code\" class=\"code\">write</code>权限。</p><div type=\"note\" id=\"c7072ce1bezog\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"4cf9220bb4g2b\" class=\"p\">执行后续命令前，请根据实际情况，更换<code data-tag=\"code\" class=\"code\">/home/user</code>目录为您实际FTP的<code data-tag=\"code\" class=\"code\">home</code>目录名称。</p></div></div><pre data-tag=\"codeblock\" id=\"4cf5c6a2b4sst\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls -l /home/user</code></pre><p id=\"0e14e770b4xdk\">如下图红框中的权限没有<code data-tag=\"code\" class=\"code\">w</code>，则代表您当前没有<code data-tag=\"code\" class=\"code\">write</code>权限。</p><img id=\"114dada0b86kd\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9010808761/p575824.png\" alt=\"1111\" placement=\"break\" class=\"image break\"></li><li id=\"4cf9220db4ew2\"><p id=\"4cf94910b4r6s\">执行如下命令，添加<code data-tag=\"code\" class=\"code\">write</code>权限并保存。 </p><pre data-tag=\"codeblock\" id=\"4cf5c6a3b4h72\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chmod +w /home/user</code></pre></li><li id=\"4cf94914b4at6\"><p id=\"4cf94915b4q52\">执行如下命令，若命令执行结果中存在<code data-tag=\"code\" class=\"code\">w</code>，则表示<code data-tag=\"code\" class=\"code\">write</code>权限添加成功。 </p><pre data-tag=\"codeblock\" id=\"4cf5c6a4b44nu\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls -l /home/user</code></pre></li></ol></section></div></div><div id=\"38700776d4ale\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"2842aee0b7uud\" class=\"expandable-title\"><b>Windows系统的ECS实例中，通过FTP上传文件到FileZilla Server失败，提示“550 Permission denied”错误怎么办？</b></h4><div id=\"38702e81d49fm\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"1463e6e0b7f98\" class=\"section\"><h4 id=\"ea7a4461d4zln\"><b>问题现象</b></h4><p id=\"2842fd05b78tc\">在Windows系统的ECS实例中，通过FTP向FileZilla Server上传文件时，提示“<b data-tag=\"uicontrol\" id=\"ba7c6390b74jf\" class=\"uicontrol\">550 Permission denied</b>”错误。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1665367761/p518603.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"><h4 id=\"4rM4I\"><b>问题原因</b></h4><p id=\"2842fd08b7edr\">FileZilla Server中相应的FTP账号没有<code data-tag=\"code\" class=\"code\">write</code>权限。</p><h4 id=\"ea7a4467d4j3g\"><b>解决方案</b></h4><ol id=\"2843241ab73k4\"><li id=\"2843241bb77t1\"><p id=\"28434b20b7opd\">远程连接Windows实例。</p><p id=\"f65d05a0b7vfn\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"28434b21b7s8w\"><p id=\"28434b22b7uov\">运行FileZilla Server软件。在<b data-tag=\"uicontrol\" id=\"4e85afc0b7ihc\" class=\"uicontrol\">Users</b>配置页面，选择<b data-tag=\"uicontrol\" id=\"4cff0fc0b7190\" class=\"uicontrol\">Shared folders</b>配置项。</p></li><li id=\"28434b25b7n9b\"><p id=\"28434b26b7xmy\">选择对应的用户与目录，勾选<b data-tag=\"uicontrol\" id=\"5062d430b7mod\" class=\"uicontrol\">Write</b>单选框，单击<b data-tag=\"uicontrol\" id=\"5304cf40b7rwp\" class=\"uicontrol\">OK</b>按钮，完成权限配置。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1665367761/p518604.png\" class=\"image break\"></li></ol></section></div></div></section><section id=\"120917b0d4xd0\" class=\"section\"><h2 id=\"3d1ebb10d4w1j\"><b>通过Apt-get安装软件报错问题</b></h2><div id=\"38a12990d4v1j\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"90958af0b7rwr\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>如何通过Apt-get安装软件</b></h4><div id=\"38a12992d4ijt\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"dabda160b8jn6\" class=\"section\"><h4 data-tag=\"h3\" id=\"9f142247b75io\" class=\"h3\"><b>操作步骤</b></h4><p id=\"60a79020d4u3u\">通过Apt-get在线安装软件，下述操作以安装Nginx为例。</p><ol id=\"9f142248b76wz\"><li id=\"9f142249b7iop\"><p id=\"9f14224ab7n6m\">远程连接Ubuntu实例。</p><p id=\"ef0ee040b70k7\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"9f14224bb77ir\"><p id=\"9f14224cb7rd5\">执行如下命令，安装Nginx软件。</p><pre data-tag=\"codeblock\" id=\"9f0f6751b7pe4\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-get install nginx</code></pre><p id=\"9f144950b7dsn\"> 系统显示类似如下，表示是否继续安装Nginx。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9978367761/p519148.png\" class=\"image break\"></li><li id=\"9f144951b7hdl\"><p id=\"9f144952b76r3\">根据提示信息，输入<code data-tag=\"code\" class=\"code\">Y</code>确认后，开始安装软件，直至软件安装完成。</p></li><li id=\"9f144954b7pmr\"><p id=\"9f144955b7c6a\">软件安装完成后，执行如下命令，列出软件包所在的目录，及该软件包中的所有文件。</p><pre id=\"i83bok\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>dpkg -L nginx</code></pre><img id=\"ded77890b7hlg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9978367761/p574752.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li><li id=\"9f144957b7zmd\"><p id=\"9f144958b7hz2\">执行如下命令，安装Nginx。</p><pre id=\"yng7we\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>dpkg -l nginx</code></pre></li></ol></section></div></div><div id=\"38cbbc00d4115\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"a4ba7930d4n77\" class=\"expandable-title\"><b>通过Apt-get安装软件时，提示“error processing package install-info (--configure）”错误怎么办？</b></h4><div id=\"38cbbc02d4n9e\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"c7497780b8co3\" class=\"section\"><h4 id=\"9f14495cb73u8\"><b>问题现象</b></h4><p class=\"from-extensions-error\" id=\"9f14495db712m\">在Ubuntu系统的ECS实例中，通过Apt-get安装软件时提示“<b data-tag=\"uicontrol\" id=\"571624c0beqwi\" class=\"uicontrol\">error processing package install-info (--configure）</b>”错误。</p><h4 id=\"226a18a0b7c1o\"><b>问题原因</b></h4><p id=\"23d875b0b7xfj\">可能是由于Ubuntu软件包损坏，导致软件安装失败。</p><h4 id=\"9f14495fb7vgy\"><b>解决方案</b></h4><p id=\"10e5ee21b8nhs\">请参考以下操作进行apt源更新同步，重新安装软件。</p><ol id=\"9f144960b7z0h\"><li id=\"awpBA\"><p id=\"9f144961b7s50\">远程连接Ubuntu实例。</p><p id=\"0cde0b40b7me0\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"0797f240b7qf8\"><p id=\"0797cb30b71sc\">将info文件夹更名。</p><pre data-tag=\"codeblock\" id=\"9f0f6752b7v3j\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>mv /var/lib/dpkg/info/ /var/lib/dpkg/info.bak.old/</code></pre></li><li id=\"9f147061b7fry\"><p id=\"9f147062b7yau\">新建一个新的info文件夹。</p><pre data-tag=\"codeblock\" id=\"9f0f6753b7ius\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>mkdir /var/lib/dpkg/info/</code></pre></li><li id=\"9f147064b7pqy\"><p id=\"9f147065b73sz\">执行如下命令，进行apt源更新同步。</p><pre data-tag=\"codeblock\" id=\"9f0f6754b78oz\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-get update</code></pre></li><li id=\"9f147067b7ocy\"><p id=\"9f147068b7nfj\">执行如下命令，重新安装xxxxx软件，若不再提示以上报错信息，则表示问题已修复。</p><pre data-tag=\"codeblock\" id=\"9f0f6755b7ppc\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-get install  xxxxx</code></pre></li></ol></section></div></div><div id=\"3a870090d4lf8\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"cc0e6000d4zr0\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>通过Apt-get安装软件或更新时，提示“Segmentation faultsts”错误怎么办？</b></h4><div id=\"3a870092d4bxa\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"c192c260b8pmb\" class=\"section\"><h4 id=\"DNwny\"><b>问题现象</b></h4><p id=\"9f14706bb7inf\">在Ubuntu系统的ECS实例中，通过Apt-get安装软件或更新时提示“<b data-tag=\"uicontrol\" id=\"571624c1be57o\" class=\"uicontrol\">Segmentation faultsts</b>”错误。</p><h4 id=\"9f14706db7trq\"><b>问题原因</b></h4><p id=\"9f14706eb7h3w\">可能是由于apt的cache出现冲突，导致软件安装或更新失败。</p><h4 id=\"9f147070b7rti\"><b>解决方案</b></h4><p id=\"edaebb80b83n5\">请参考以下操作进行apt源更新同步。</p><ol id=\"9f147072b72xq\"><li id=\"9f147073b7v7h\"><p id=\"9f149770b79m3\">远程连接Ubuntu实例。</p><p id=\"b8434102b8qh3\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。 </p></li><li id=\"b0ea9bb1b8rqu\"><p id=\"b0ea9bb0b8omi\">将<code data-tag=\"code\" class=\"code\">/var/cache/apt/</code>目录进行备份。</p></li><li id=\"9f149772b7hln\"><p id=\"9f149773b77pf\">备份完成后，执行如下命令，删除<code data-tag=\"code\" class=\"code\">/var/cache/apt/</code>目录中所有<code data-tag=\"code\" class=\"code\">.bin</code>文件。 </p><pre data-tag=\"codeblock\" id=\"9f0f6756b7uq8\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>rm /var/cache/apt/*.bin</code></pre></li><li id=\"9f149777b7may\"><p id=\"9f149778b7p4x\">执行如下命令，进行apt源更新同步。 </p><pre data-tag=\"codeblock\" id=\"9f0f6757b7pd5\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-get update</code></pre></li><li id=\"9f14977ab77td\"><p id=\"9f14977bb7ebp\">测试是否可以正常使用apt-get。</p><div type=\"note\" id=\"3604f800b8lt7\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"362af690b83hi\">如果实例内存配置过低（比如内存大小只有512MB）的情况下，当提示“<b data-tag=\"uicontrol\" id=\"e2e89621b8pxn\" class=\"uicontrol\">Segmentation faultsts</b>”错误时，您还可以使用top命令检查内存使用情况，将一些非必须的进程先暂时关闭，再尝试执行apt-get。</p></div></div></li></ol></section></div></div><div id=\"3ae8a890d4zlr\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"9f149780b7p3w\" class=\"expandable-title\"><b>通过Apt-get安装软件时，提示“Reading package lists... Error!”错误怎么办？</b></h4><div id=\"3ae8a892d4cpr\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"be71fa60b8ivv\" class=\"section\"><h4 id=\"9f149781b7puv\"><b>问题现象</b></h4><p id=\"9f149782b7i74\">在Ubuntu系统的ECS实例中，通过Apt-get安装软件时出现类似如下报错信息。</p><pre id=\"euk2zr\" data-tag=\"codeblock\" outputclass=\"language-javascript\" height=\"42\" class=\"pre codeblock language-javascript\"><code>Reading package lists... Error! E: Encountered a section with no Package: header E: Problem with MergeList /var/lib/apt/lists/AZ.archive.ubuntu.com_ubuntu_dists_natty_main_i18n _Translation-en E: The package lists or status file could not be parsed or opened.</code></pre><h4 id=\"f5e9e090b8c7s\"><b>问题原因</b></h4><p id=\"f8598100b8z35\">软件包列表损坏，导致软件安装报错。</p><h4 id=\"9f14be81b7xvy\"><b>解决方案</b></h4><p id=\"9f14be82b74vx\">请参考以下操作清除已损坏的列表，重新生成更新列表。</p><ol id=\"9f14be83b78zd\"><li id=\"9f14be84b7fa8\"><p id=\"9f14be85b7gyg\">执行如下命令，清除目录下已经损坏的列表。 </p><pre data-tag=\"codeblock\" id=\"9f0f6758b72vi\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>rm -rf /var/lib/apt/lists/*</code></pre></li><li id=\"9f14be87b78qo\"><p id=\"9f14e590b7egn\">执行如下命令，重新生成更新列表。 </p><pre data-tag=\"codeblock\" id=\"9f0f6759b7rq3\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-get update</code></pre><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6282770861/p621406.png\" alt=\"image\" placement=\"break\" id=\"e0ae1190d4cox\" class=\"image break\"></li><li id=\"9f14e592b7exy\"><p id=\"9f14e593b79sj\">再次安装软件，若不再提示以上报错信息，则表示问题已修复。</p></li></ol></section></div></div><div id=\"3b391282d46iu\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"9f14e596b7db5\" class=\"expandable-title\"><b>执行apt-get install unzip或aptitude install unzip命令时，提示“Error http://mirrors.aliyun.com/ubuntu/ trusty-updates/main unzip amd64 6.0-9ubuntu1.1 404 Not Found [IP: 112.124.XXX.XXX 80]”错误怎么办？</b></h4><div id=\"3b393991d4sgr\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"af0ec4e0b8q3p\" class=\"section\"><h4 id=\"9f14e597b78dv\"><b>问题现象</b></h4><p id=\"ebd3de10b8fy3\">在Ubuntu系统的ECS实例中，执行<code data-tag=\"codeph\" class=\"codeph\">apt-get install unzip</code>或<code data-tag=\"codeph\" class=\"codeph\">aptitude install unzip</code>命令时，提示如下错误提示。</p><pre id=\"ra17ur\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Error http://mirrors.aliyun.com/ubuntu/ trusty-updates/main unzip amd64 6.0-9ubuntu1.1 404 Not Found [IP: 112.124.XXX.XXX 80]\nError http://mirrors.aliyun.com/ubuntu/ trusty-updates/main unzip amd64 6.0-9ubuntu1.1 404 Not Found [IP: 112.124.XXX.XXX 80]\nError http://mirrors.aliyun.com/ubuntu/ trusty-updates/main unzip amd64 6.0-9ubuntu1.1 404 Not Found [IP: 112.124.XXX.XXX 80]</code></pre><h4 id=\"9f14e59bb7sig\"><b>问题原因</b></h4><p id=\"aeedeed0b85lm\">该问题通常是由于初始系统中的软件版本库与apt源中的版本不一致（即apt-get请求的资源在apt源中不存在）所导致的。</p><h4 id=\"9f150ca1b74yr\"><b>解决办法</b></h4><p id=\"9b5f69b1b8tn7\">请参考以下操作进行apt源更新同步。</p><ol id=\"e6c114a2b8sq5\"><li id=\"e6c114a0b81jb\"><p id=\"9f150ca2b774r\">远程连接Ubuntu实例。</p><p id=\"ec746e62b8pp5\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。 </p></li><li id=\"ed2dac41b8tqi\"><p id=\"ed2dac40b8q5e\">执行如下命令，进行apt源更新同步。</p><pre id=\"37w4cu\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-get update</code></pre></li><li id=\"f9f2b741b8s1l\"><p id=\"f9f2b740b89i6\">源更新同步完成后，通过使用<code data-tag=\"code\" class=\"code\">apt-get install</code>命令安装所需软件。</p></li></ol></section></div></div><div id=\"3b7d9590d40ty\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"89daefd0b7jcg\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>执行apt-get update命令时，提示“The following signatures were invalid: KEYEXPIRED 1544811256”错误怎么办？</b></h4><div id=\"3b7d9592d42dj\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"a2638370b8r39\" class=\"section\"><h4 id=\"89db16e5b7ii5\"><b>问题现象</b></h4><p class=\"title-article\" id=\"89db16e6b73b6\">在Ubuntu系统的ECS实例中，执行<code data-tag=\"codeph\" class=\"codeph\">apt-get update</code>命令时，提示以下信息。</p><pre data-tag=\"codeblock\" id=\"89d68301b79ev\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>The following signatures were invalid: KEYEXPIRED 1544811256</code></pre><h4 id=\"89db3df0b7qfq\"><b>问题原因</b></h4><p id=\"89db3df1b752i\">由于使用的软件源签名到期，导致更新报错。</p><h4 id=\"89db3df2b7hcz\"><b>解决方案</b></h4><p id=\"7fd14650b8uhp\">请参考以下操作更新已过期的key。</p><ol id=\"89db6506b7q9v\"><li id=\"89db6507b7r5l\"><p id=\"89db6508b7tha\">远程连接Ubuntu实例。</p><p id=\"558ad082b8fdq\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"4cb0bb50b8w74\"><p id=\"4cb09440b8gul\">执行以下命令，获取过期的key。 </p><pre data-tag=\"codeblock\" id=\"89d68302b7mft\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sudo apt-key list | grep -A 1 expired</code></pre><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9978367761/p519750.png\" class=\"image break\"></li><li id=\"89db650ab7shz\"><p id=\"89db650bb7sdm\">执行以下命令，更新过期的key。 </p><pre data-tag=\"codeblock\" id=\"89d68303b7sxa\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys [$Key]</code></pre><div type=\"note\" id=\"3c87ebe1b8raj\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3cc82930b8ic7\">[$Key]指的是之前获取到的过期的key。</p></div></div></li><li id=\"89db8c11b78r2\"><p id=\"89db8c12b7yf9\">重新执行以下命令，进行apt源更新同步。</p><pre id=\"tg3kbe\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-get update</code></pre></li></ol></section></div></div></section><section id=\"17e55630d4ue0\" class=\"section\"><h2 id=\"4717df60d4wgz\"><b>Alibaba Cloud Linux系统使用第三方DNF/YUM源问题</b></h2><div id=\"b7c8cda3d4cg0\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"2b8b6bc0bd4c1\" class=\"expandable-title\"><b>在Alibaba Cloud Linux 2系统的ECS实例中，使用docker-ce、epel等第三方YUM源安装软件失败怎么办？</b></h4><div id=\"b7c8cda1d4uv2\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"44be7fb0betbd\" class=\"section\"><h4 id=\"c62ce2a1d4q20\"><b>问题现象</b></h4><p id=\"2b8b6bc9bdtnf\">在符合如下条件的Alibaba Cloud Linux 2系统的ECS实例中，使用适配CentOS 7系统中的docker-ce、epel第三方YUM源，执行<code data-tag=\"codeph\" class=\"codeph\">yum install docker-ce</code>命令安装Docker软件包失败，并提示如下报错。</p><ul id=\"2b8b6bcabdwrw\"><li id=\"2b8b6bcbbds9m\"><p id=\"2b8b6bccbd0z2\">镜像：Alibaba Cloud Linux 2.1903 LTS 64位。</p></li><li id=\"2b8b6bcdbdc6p\"><p id=\"2b8b6bcebduue\">镜像ID：aliyun_2_1903_x64_20G_alibase_20210325.vhd及之前所有版本。</p></li></ul><pre data-tag=\"codeblock\" id=\"2b86d7e1bdu5b\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Loaded plugins: fastestmirror, langpacks, update-motd\nLoading mirror speeds from cached hostfile\n  * epel: mirror.sjtu.edu.cn \nhttps://mirrors.aliyun.com/docker-ce/linux/centos/2.1903/x86_64/stable/repodata/repomd.xml: [Errno 14] HTTPS Error 404 - Not Found \nTrying other mirror.\nDownloading packages:\ndocker-ce-20.10.6-3.el7.x86_64 FAILED\nhttps://mirrors.aliyun.com/docker-ce/linux/centos/2.1903/x86_64/stable/Packages/docker-ce-20.10.6-3.el7.x86_64.rpm: [Errno 14] HTTPS Error 404 - Not Found \nTrying other mirror.\ndocker-ce-rootless-extras-20.1 FAILED\nhttps://mirrors.aliyun.com/docker-ce/linux/centos/2.1903/x86_64/stable/Packages/docker-ce-rootless-extras-20.10.6-3.el7.x86_64.rpm: [Errno 14] HTTPS Error 404 - Not Found\n Trying other mirror. \n\n\nError downloading packages:\n  3:docker-ce-20.10.6-3.el7.x86_64: [Errno 256] No more mirrors to try.\n  docker-ce-rootless-extras-20.10.6-3.el7.x86_64: [Errno 256] No more mirrors to try.</code></pre></section><section id=\"4d53c3b0beh71\" class=\"section\"><h4 id=\"c62ce2aad47gv\"><b>问题原因</b></h4><p id=\"2b8b6bd1bdzdt\">第三方YUM源仅适配CentOS 7发行版，Alibaba Cloud Linux 2操作系统与CentOS 7操作系统的<code data-tag=\"codeph\" class=\"codeph\">$releasever</code>值不同，导致YUM解析后的地址无效，从而下载容器软件包失败。</p><div id=\"e5c49450bdqxl\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"d2cf1050bdv1b\">YUM安装docker-ce软件包时，首先会在系统中获取版本号，即<code data-tag=\"codeph\" class=\"codeph\">$releasever</code>值，然后替换相应YUM源中baseurl地址对应的<code data-tag=\"codeph\" class=\"codeph\">$releasever</code>变量，YUM从替换后的baseurl地址中获取相关数据。由于CentOS 7操作系统的<code data-tag=\"codeph\" class=\"codeph\">$releasever</code>值为7，Alibaba Cloud Linux 2操作系统的<code data-tag=\"codeph\" class=\"codeph\">$releasever</code>值为2.1903，因此解析后的baseurl地址并非预期地址，YUM便无法从这个错误的地址中获取数据。</p></div></div></section><section id=\"63729b30be3c2\" class=\"section\"><h4 id=\"c62ce2afd4lyv\"><b>解决方案</b></h4><p id=\"c62ce2b0d4o18\">请根据实际需求情况，选择以下对应方案进行修复。</p><ul id=\"0c5da4b2bdt70\"><li id=\"0c5da4b0bdzom\"><p id=\"0c8af640bd9i5\">您可以参考<a title=\"\" class=\"xref\" href=\"#2b8b92d9bdxn8\">方案一：手动修改</a>步骤，通过手动修改<code data-tag=\"code\" class=\"code\">$releasever</code>变量值进行修复。</p></li><li id=\"0d4ee281bdh7j\"><p id=\"14552210bdhak\">您可以参考<a title=\"\" class=\"xref\" href=\"#2b8bb9e3bd0a7\">方案二：安装插件修改</a>步骤，通过安装yum-plugin-releasever-adapter插件进行修复。</p></li></ul><div id=\"9c014240bddot\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"2b8b92d8bd01t\">下列操作以docker-ce源为例进行举例，如果您使用的是其他YUM源，解决方法类似。</p></div></div><section id=\"67ea1990beh0s\" class=\"section\"><p data-tag=\"h3\" id=\"2b8b92d9bdxn8\" class=\"h3\"><b>方案一：手动修改</b></p><ol id=\"2b8b92dabd50s\"><li data-spm-anchor-id=\"a2c9r.12641779.0.i0.16d1FcrrFcrrKs\" id=\"2b8b92dbbdzut\"><p id=\"2b8b92dcbd70s\">远程登录Linux实例。</p><p id=\"8152f790bdsjg\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i0.1d3b5e3bJU3Ogl\" id=\"2b8b92ddbdbe4\"><p id=\"2b8b92debd2hl\">执行以下命令，编辑<code data-tag=\"code\" class=\"code\">/etc/yum.repos.d/docker-ce.repo</code>配置文件。 </p><pre data-tag=\"codeblock\" id=\"2b86d7e2bdfap\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/yum.repos.d/docker-ce.repo</code></pre><ol id=\"2b8b92e0bdplu\"><li id=\"2b8b92e1bdiaf\"><p id=\"2b8b92e2bd7jm\">按<code data-tag=\"code\" class=\"code\">i</code>键切换至编辑模式，找到docker-ce.repo文件中所有<b data-tag=\"uicontrol\" id=\"b93fadb0bd48m\" class=\"uicontrol\">enabled=1</b>值的源，将源中baseurl地址的<code data-tag=\"code\" class=\"code\">$releasever</code>变量修改为7，修改之后的内容如下所示。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4765628761/p520027.png\" alt=\"Dingtalk_20210610100121.jpg\" width=\"580\" height=\"102\" class=\"image break\"></p></li><li id=\"2b8b92e4bdo6r\"><p id=\"2b8b92e5bdctd\">修改完成后，按下<code data-tag=\"code\" class=\"code\">Esc</code>键后，输入<code data-tag=\"code\" class=\"code\">:wq</code>并回车以保存并关闭配置文件，重新安装软件包即可。</p></li></ol></li></ol></section><section id=\"6babb570be85f\" class=\"section\"><p data-tag=\"h3\" id=\"2b8bb9e3bd0a7\" class=\"h3\"><b>方案二：安装插件修改</b></p><p id=\"2b8bb9e4bdaki\">安装yum-plugin-releasever-adapter插件实现<code data-tag=\"code\" class=\"code\">$releasever</code>值的自动转换，即将2.1903转换为7。</p><ol id=\"2b8be0f8bda6j\"><li id=\"2b8be0f9bddwr\"><p id=\"21b8ac70bdztd\">确认实例是否支持使用yum-plugin-releasever-adapter插件。</p><p id=\"326b6c60bdpoz\">yum-plugin-releasever-adapter插件目前的版本及默认支持的第三方repo如下表所示：</p><table id=\"2b8bb9e5bdv6v\" tablewidth=\"708\" tablecolswidth=\"236 236 236\" class=\"table\"><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><tbody class=\"tbody\"><tr id=\"2b8bb9e6bdmn7\"><td id=\"2b8bb9e7bdv9a\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"2b8bb9e8bd05f\">插件版本</p></td><td id=\"2b8bb9e9bdc20\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"2b8bb9eabdkvq\">默认支持的第三方repo</p></td><td id=\"2b8bb9ebbdzgt\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"2b8bb9ecbdu68\">插件的限制</p></td></tr><tr id=\"2b8bb9edbd7s7\"><td id=\"2b8bb9eebdbcc\" rowspan=\"1\" colspan=\"1\"><p id=\"2b8bb9efbd1i8\">1.0-1.3</p></td><td id=\"2b8bb9f0bdb7p\" rowspan=\"1\" colspan=\"1\"><p id=\"2b8bb9f1bdbur\">docker-ce.repo，epel.repo</p></td><td id=\"2b8bb9f2bdoq6\" rowspan=\"1\" colspan=\"1\"><p id=\"2b8bb9f3bde44\"> </p><p id=\"2b8be0f0bdxl6\">您需要满足以下条件，才可以使用该插件：</p><ul id=\"2b8be0f1bd9zd\"><li id=\"2b8be0f2bdkgg\"><p id=\"2b8be0f3bdxwy\">操作系统需要是Alibaba Cloud Linux 2。</p></li><li id=\"2b8be0f4bdfsv\"><p id=\"2b8be0f5bd34t\">执行以下命令，确认系统中存在plus的repo。 </p><pre data-tag=\"codeblock\" id=\"2b86d7e3bdobt\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/yum.repos.d/AliYun.repo |grep -A3 plus</code></pre><p id=\"2b8be0f6bd2qd\"> 系统显示类似如下，说明存在plus的repo。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4765628761/p520028.png\" alt=\"Dingtalk_20210622170320.jpg\" width=\"756\" class=\"image break\"></p></li></ul><p id=\"2b8be0f7bdn04\"> </p></td></tr></tbody></table></li><li id=\"fde38c20bdgf3\"><p id=\"fde36510bdcql\">远程登录Linux实例。</p><p id=\"3bdab220bdjh1\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"2b8be0fbbd5oj\"><p id=\"2b8be0fcbd952\">执行以下命令，安装yum-plugin-releasever-adapter插件，插件默认对docker-ce、epel第三方YUM源中的<code data-tag=\"code\" class=\"code\">$releasever</code>值自动进行转换。 </p><pre data-tag=\"codeblock\" id=\"2b86d7e4bdzpk\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install yum-plugin-releasever-adapter --disablerepo=* --enablerepo=plus</code></pre></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i3.1c1f5e3b1pDFCX\" id=\"2b8be0ffbd3np\"><p id=\"2b8be100bdv3f\">若无其他的YUM源需要转换，安装插件后即可直接安装软件；若还有其他的YUM源需要转换，请按照以下方式配置： \n</p><ol id=\"2b8be101bd6bq\"><li id=\"2b8be102bdan6\"><p id=\"2b8be103bdcns\">执行以下命令，进入指定目录。 </p><pre data-tag=\"codeblock\" id=\"2b86d7e5bd5b5\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cd /etc/yum/pluginconf.d/</code></pre></li><li id=\"2b8be105bd70d\"><p id=\"2b8be106bds23\">执行以下命令，编辑<code data-tag=\"code\" class=\"code\">releasever-adapter.conf</code>配置文件。如果需要添加其他的YUM源，则需要将YUM源的<code data-tag=\"code\" class=\"code\">.repo</code>文件名添加在<b data-tag=\"uicontrol\" id=\"6cb60fb0bdhj0\" class=\"uicontrol\">includes</b>字段后面，并以逗号隔开。 </p><pre data-tag=\"codeblock\" id=\"2b86d7e6bdw94\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim releasever-adapter.conf</code></pre><p id=\"2b8c0800bdjyu\"> 系统显示类似如下。 </p><pre data-tag=\"codeblock\" id=\"2b86d7e7bdkod\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>[main]\n\nenabled=1\n\nhostfilepath=timedhosts.txt\n\n\n[releasevermapping]\n\nrelease_dict={'2.1903':'7', '3':'8'}\n\n\n[reposlist]\n\nincludes=docker-ce.repo, epel.repo</code></pre><div type=\"note\" id=\"440fca31bdmyo\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"2b8c0804bd1rj\"><li id=\"2b8c0805bdpg9\"><p id=\"2b8c0806bdi3i\"> 文件中参数的具体介绍如下所示： \n</p><ul id=\"2b8c0807bdcct\"><li id=\"2b8c0808bd1l0\"><p id=\"2b8c0809bdlmh\">[main]：为插件的主要控制部分，控制插件的启用与否，其中<b data-tag=\"uicontrol\" id=\"bae73030begmq\" class=\"uicontrol\">enabled=1</b>表示启用插件，<b data-tag=\"uicontrol\" id=\"bd580920ber56\" class=\"uicontrol\">enabled=0</b>表示停用插件。</p></li><li id=\"2b8c080abdhwo\"><p id=\"2b8c080bbdl3a\">[releasevermapping]：为待处理的<code data-tag=\"code\" class=\"code\">$releasever</code>的映射关系，其中2.1903映射为7，3映射为8。</p></li><li id=\"2b8c080cbdenj\"><p id=\"2b8c080dbdyed\">[repolist]：为需要修改的源的列表，如果需要添加其他的源，则需要将<code data-tag=\"code\" class=\"code\">.repo</code>文件的名字添加在include字段后面，并以逗号隔开。</p></li></ul></li><li id=\"2b8c2f10bdxi4\"><p id=\"2b8c2f11bdone\">一个<code data-tag=\"code\" class=\"code\">.repo</code>文件中有多个可以使用的源，每个源都有一个独立的名称区分其他的源，同时一个系统中不能出现重复的名称，例如：<code data-tag=\"code\" class=\"code\">docker-ce.repo</code>中有<code data-tag=\"code\" class=\"code\">[docker-ce-stable]</code>和<code data-tag=\"code\" class=\"code\">[docker-ce-stable-debuginfo]</code>等源。</p></li><li id=\"2b8c2f12bdoe6\"><p id=\"2b8c2f13bd4z8\">请务必保证新添加到<code data-tag=\"code\" class=\"code\">releasever-adapter.conf</code>配置文件中的源文件名称是源文件内各个源名称的前缀，例如：<code data-tag=\"code\" class=\"code\">docker-ce.repo</code>源文件中包含的<code data-tag=\"code\" class=\"code\">docker-ce-stable</code>和<code data-tag=\"code\" class=\"code\">docker-ce-stable-debuginfo</code>两个源名称，均以<code data-tag=\"code\" class=\"code\">docker-ce</code>为前缀。</p></li></ul></div></div></li><li id=\"2b8c2f15bdp3c\"><p id=\"2b8c2f16bdwq9\">保存配置文件，执行以下命令，即可通过docker-ce、epel第三方YUM源安装软件包。</p><pre id=\"tvr5xw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install docker-ce</code></pre></li></ol></li></ol></section></section></div></div><div id=\"3bc80c10d4dd7\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"5c31be50b88cv\" class=\"expandable-title\"><b>在Alibaba Cloud Linux 3系统的ECS实例中，使用docker-ce、epel等第三方DNF（YUM）源安装软件失败怎么办？</b></h4><div id=\"3bc80c12d4x4n\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"452e37d0be8b2\" class=\"section\"><h4 id=\"682f1831d4zi0\"><b>问题现象</b></h4><p id=\"5c31e563b82pf\">在符合如下条件的Alibaba Cloud Linux 3系统的ECS实例中，执行<code data-tag=\"codeph\" class=\"codeph\">dnf install docker-ce</code>命令安装容器软件包失败，并出现如下报错。</p><ul id=\"68949a31b82zd\"><li id=\"2d4d2051b851b\"><p id=\"3053a990b8wjk\">使用适配CentOS 8系统中的第三方DNF（YUM）源。</p></li><li id=\"2b8d6ef1b88j4\"><p id=\"2b8d6ef0b822e\">aliyun_3_x64_20G_alibase_20210425.vhd及之前的所有镜像版本。</p></li></ul><p id=\"b34feb60b8kf7\">系统显示报错信息类似如下。</p><pre id=\"ahmrfu\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Docker CE Stable - x86_64\nFailed to download metadata for repo 'docker-ce-stable'\nError: Failed to download metadata for repo 'docker-ce-stable'</code></pre></section><section id=\"4a112230betkt\" class=\"section\"><h4 class=\"ne-p\" id=\"5c320c70b8pqy\"><b>问题原因</b></h4><p id=\"u92b820bb\" class=\"ne-p\">第三方DNF源仅适配CentOS 8发行版，而在Alibaba Cloud Linux 3中，系统的<code data-tag=\"code\" class=\"code\">$releasever</code>变量值与CentOS 8不同，导致DNF解析后的地址无效，进而导致下载RPM包失败。</p><div type=\"note\" id=\"64ba77d1b8mqi\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"45154590b8yna\">DNF安装docker-ce时，首先会从系统中获取版本号，即<code data-tag=\"code\" class=\"code\">$releasever</code>变量值，然后替换掉相应源baseurl中对应的<code data-tag=\"code\" class=\"code\">$releasever</code>变量值，之后DNF从替换后的baseurl中获取相关数据。由于CentOS 8的<code data-tag=\"code\" class=\"code\">$releasever</code>变量值为8，而Alibaba Cloud Linux 3系统的<code data-tag=\"code\" class=\"code\">$releasever</code>变量值为3，因此解析后的baseurl并非预期地址，DNF便无法从这个错误的地址中安装软件包。</p></div></div></section><section id=\"58a60b30be2wq\" class=\"section\"><h4 id=\"d669a060b8i9r\"><b>解决方案</b></h4><p id=\"a31a5540b8m9j\">请根据实际需求情况，选择以下对应方案进行修复。</p><ul id=\"887ce362b85fm\"><li id=\"887ce360b8efk\"><p id=\"8781e190b89tw\">您可以参考<a title=\"\" class=\"xref\" href=\"#5c323384b8s7u\">方案一：手动修改</a>步骤，通过手动修改<code data-tag=\"code\" class=\"code\">$releasever</code>变量值进行修复。</p></li><li id=\"13ba7cd1b8zhg\"><p id=\"13ba7cd0b8a7w\">您可以参考<a title=\"\" class=\"xref\" href=\"#5c325a91b8s4i\">方案二：安装插件修改</a>步骤，通过安装dnf-plugin-releasever-adapter插件进行修复。</p></li></ul><div id=\"9ad7c520b8jid\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"xpyfz\" data-spm-anchor-id=\"a2c4g.11186623.2.i3.3fde4c07YHGjZd\">本文以docker-ce源为例进行介绍，如果您使用的是其他DNF源，解决方案类似。</p></div></div><section id=\"62f33860be8pt\" class=\"section\"><p data-tag=\"h3\" id=\"5c323384b8s7u\" class=\"h3\"><b>方案一：手动修改</b></p><ol id=\"5c323385b8fb0\"><li id=\"5c323386b8vj2\"><p id=\"5c323387b8fl6\">远程登录Linux实例。</p><p id=\"6c988450b84vy\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"5ff2c121b8hwv\"><p id=\"5ff2c120b82a9\">执行以下命令，打开<code data-tag=\"code\" class=\"code\">/etc/yum.repos.d/docker-ce.repo</code>配置文件。</p><pre id=\"hg2hmq\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/yum.repos.d/docker-ce.repo</code></pre></li><li id=\"99eb4cd1b84ns\"><p id=\"682f1853d4vvp\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式，找到<code data-tag=\"code\" class=\"code\">docker-ce.repo</code>文件中所有存在<b data-tag=\"uicontrol\" id=\"8f24a9e0b8y5j\" class=\"uicontrol\">enabled=1</b>值的源，将源中<code data-tag=\"code\" class=\"code\">baseurl</code>的<code data-tag=\"code\" class=\"code\">$releasever</code>变量替换为8。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2835277761/p520023.png\" class=\"image break\"></li><li id=\"5c323389b8uhe\"><p id=\"5c32338bb8758\"> 按下<code data-tag=\"code\" class=\"code\">Esc</code>键后，输入<code data-tag=\"code\" class=\"code\">:wq</code>并按<code data-tag=\"code\" class=\"code\">Enter</code>键以保存关闭配置文件，重新进行安装即可。</p></li></ol></section><section id=\"5c418170bez9x\" class=\"section\"><p data-tag=\"h3\" id=\"5c325a91b8s4i\" class=\"h3\"><b>方案二：安装插件修改</b></p><p id=\"5c325a92b8l4w\">通过安装dnf-plugin-releasever-adapter插件实现<code data-tag=\"code\" class=\"code\">$releasever</code>的变量进行自动转换，即将3转换为8。</p><ol id=\"5c32f6d4b8sv2\"><li id=\"5c32f6d5b8q9n\"><p id=\"5c331de0b87g8\">确认实例是否支持使用dnf-plugin-releasever-adapter插件。</p><p id=\"21f0be50b8tfn\">dnf-plugin-releasever-adapter插件目前的版本及默认支持的第三方repo如下表所示：</p><table id=\"5c325a93b8yfg\" tablewidth=\"708\" tablecolswidth=\"236 236 236\" class=\"table\"><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><tbody class=\"tbody\"><tr id=\"5c325a94b8kd1\"><td id=\"5c325a95b8i55\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"5c325a96b8jn2\">插件版本</p></td><td id=\"5c325a97b8vzv\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"5c325a98b8wqp\">默认支持的第三方repo</p></td><td id=\"5c3281a0b8n9j\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"5c3281a1b8oye\">插件的限制</p></td></tr><tr id=\"5c3281a2b88va\"><td id=\"5c3281a3b88n5\" rowspan=\"1\" colspan=\"1\"><ul id=\"5c3281a4b8nsk\"><li id=\"5c3281a5b8nyn\"><p id=\"5c3281a6b8ev4\">新版本：1.0-2</p></li><li id=\"5c3281a7b8mzj\"><p id=\"5c3281a8b8vgs\">旧版本：1.0-1.3</p></li></ul><div type=\"note\" id=\"ca3c7651b8mgq\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p jc=\"left\" id=\"5c32a8b1b8nbb\" style=\"text-align:left\">新版本插件和旧版本插件不兼容，新版本的配置文件名称为<code data-tag=\"codeph\" class=\"codeph\">releasever_adapter.conf</code>，旧版本为<code data-tag=\"codeph\" class=\"codeph\">releasever-adapter.conf</code>。升级版本会删除原来的配置文件。因此升级后，如果需要支持除docker-ce和epel之外的第三方源，需要重新按照步骤修改配置文件的<b data-tag=\"uicontrol\" id=\"f13d6df0bfpm1\" class=\"uicontrol\">include</b>字段，其他的保持不变。</p></div></div><p id=\"5c32a8b2b8htz\"> </p></td><td id=\"5c32a8b3b8d23\" rowspan=\"1\" colspan=\"1\"><p id=\"5c32a8b4b82sw\">docker-ce.repo，epel.repo</p></td><td id=\"5c32a8b5b8mdn\" rowspan=\"1\" colspan=\"1\"><p id=\"5c32cfc0b8674\"> </p><p id=\"5c32cfc1b8k1f\">您需要满足以下条件，才可以使用该插件：</p><ul id=\"5c32cfc2b8vsy\"><li id=\"5c32cfc3b8qap\"><p id=\"5c32cfc4b8x7s\">操作系统需要是Alibaba Cloud Linux 3。</p></li><li id=\"5c32f6d0b8hz9\"><p id=\"5c32f6d1b8vz5\">执行以下命令，确认系统中存在alinux3-plus的repo。 </p><pre data-tag=\"codeblock\" id=\"5c2a1d30b8ts5\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/yum.repos.d/AliYun.repo |grep -A3 alinux3-plus</code></pre><p id=\"5c32f6d2b8dxp\"> 系统显示类似如下，说明存在alinux3-plus的repo。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2835277761/p520024.png\" class=\"image break\"></li></ul><p id=\"5c32f6d3b8a5m\"> </p></td></tr></tbody></table></li><li id=\"6cf06b81b878m\"><p id=\"6cf06b80b8k6f\">远程登录Linux实例。</p><p id=\"ddffd1a2b8y4d\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"d99dd710b8r6v\"><p id=\"d99db000b8f42\">执行以下命令，安装dnf-plugin-releasever-adapter插件。</p><div type=\"note\" id=\"f688f260b8nxu\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"f6b113d0b8gs4\">目前，插件默认对docker-ce和epel源中的<code data-tag=\"code\" class=\"code\">$releasever</code>变量值做自动转换。 </p></div></div><pre data-tag=\"codeblock\" id=\"5c2a1d31b85xk\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>dnf install dnf-plugin-releasever-adapter --repo alinux3-plus</code></pre></li><li id=\"5c331de2b8dro\"><p id=\"5c331de3b84hx\">若无其他的DNF源需要转换，安装插件后即可直接安装软件；若还有其他的DNF源需要转换，请按照以下方式配置： \n</p><ol id=\"5c3344f0b8cen\"><li id=\"5c3344f1b8vwn\"><p id=\"5c3344f2b84wy\">执行以下命令，进入<code data-tag=\"code\" class=\"code\">/etc/yum/pluginconf.d/</code>目录。</p><pre id=\"xnnxrl\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cd /etc/yum/pluginconf.d/</code></pre></li><li id=\"4f9d8b61bf0h8\"><p id=\"4f9d8b60bfz22\">执行以下命令，编辑<code data-tag=\"code\" class=\"code\">releasever_adapter.conf</code>配置文件。</p><pre id=\"sqbwqa\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim releasever_adapter.conf</code></pre><ol id=\"3f2ccb91bfv8w\"><li id=\"3d663c60bfozz\"><p id=\"f1097bfa8b5pr\">按<code data-tag=\"code\" class=\"code\">i</code>键切换至编辑模式，如果需要添加其他的DNF源，则需要将DNF源的<code data-tag=\"code\" class=\"code\">.repo</code>文件名添加在<b data-tag=\"uicontrol\" id=\"57eb84f0b895m\" class=\"uicontrol\">include</b>字段后面，并以逗号隔开。</p><div type=\"note\" id=\"0e7277c0b81ko\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"5c3344f6b8d08\" class=\"p\">DNF源的<code data-tag=\"code\" class=\"code\">.repo</code>文件一般在<code data-tag=\"codeph\" class=\"codeph\">/etc/yum.repos.d/</code>目录下查看。</p></div></div><p id=\"5c336c01b8kal\"> 系统显示类似如下。 </p><pre data-tag=\"codeblock\" id=\"5c2a1d33b8q32\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>[main]\nenabled=1\n\n[releasevermapping]\n2.1903 = 7\n3      = 8\n\n[reposlist]\ninclude=docker-ce.repo, epel.repo</code></pre><div type=\"note\" id=\"1cc6d550b8cxp\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"5c339310b8si9\"><li id=\"5c339311b8mc8\"><p id=\"5c339312b8zf6\">文件中参数的具体介绍如下所示： \n</p><ul id=\"5c339313b8ltn\"><li id=\"5c339314b8uzx\"><p id=\"5c339315b84h7\">[main]：此部分为插件的主要控制部分，控制插件的启用与否，其中<b data-tag=\"uicontrol\" id=\"0ffecfe0bfz9o\" class=\"uicontrol\">enabled=1</b>表示启用插件，<b data-tag=\"uicontrol\" id=\"11fd10e0bfbn2\" class=\"uicontrol\">enabled=0</b>表示停用插件。</p></li><li id=\"5c339316b8scf\"><p id=\"5c345660b8njj\">[releasevermapping]：此部分为待处理的<code data-tag=\"code\" class=\"code\">$releasever</code>的映射关系，其中2.1903映射为7，3映射为8。</p></li><li id=\"5c347d70b8u28\"><p id=\"5c347d71b8fyh\">[repolist]：此部分为需要修改的源的列表，如果需要添加其他的源，则需要将<code data-tag=\"code\" class=\"code\">.repo</code>文件的名字添加在<b data-tag=\"uicontrol\" id=\"20eaef50bfhl6\" class=\"uicontrol\">include</b>字段后面，并以逗号隔开。</p></li></ul></li><li id=\"5c34a480b89tp\"><p id=\"5c34a481b8gv5\">一般来说，一个<code data-tag=\"code\" class=\"code\">.repo</code>文件中有多个可以使用的源，每个源都有一个独立的名称区分其他的源，一个系统中不能出现重复的名称，例如：docker-ce.repo中有<code data-tag=\"code\" class=\"code\">[docker-ce-stable]</code>和<code data-tag=\"code\" class=\"code\">[docker-ce-stable-debuginfo]</code>等源。</p></li></ul></div></div></li></ol></li><li id=\"5c34a483b8k7r\"><p id=\"f1097bfc8bkml\">修改完成后，按下<code data-tag=\"code\" class=\"code\">Esc</code>键，然后输入<code data-tag=\"code\" class=\"code\">:wq</code>并按回车，保存并关闭配置文件。</p></li><li id=\"65e244f0bf7dl\"><p id=\"65e21de0bf07n\">执行如下命令，通过docker-ce、epel和您添加的源安装docker-ce软件。</p><pre id=\"a6e4gi\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>dnf install docker-ce</code></pre></li></ol></li></ol></section></section></div></div></section><section id=\"24734ba0d4mfp\" class=\"section\"><h2 id=\"90988650d4v6d\"><b>安装AD域控制器失败问题</b></h2><div id=\"3c546d90d44cx\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"dbc58510d42me\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>安装AD域控制器失败，提示“安装Active Directory域服务二进制文件失败”错误怎么办？</b></h4><div id=\"3c546d92d4plr\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"14e8e430bf8sf\" class=\"section\"><h4 data-tag=\"h4\" id=\"4c5fe840be8uq\" class=\"h4\"><b>问题现象</b></h4><p id=\"c4463762bb136\">在Windows系统的ECS实例中，安装AD域控制器失败，提示“<b data-tag=\"uicontrol\" id=\"8ddf5530betj2\" class=\"uicontrol\">安装Active Directory域服务二进制文件失败</b>”错误。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5265428761/p518683.png\" alt=\"1.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></section><section id=\"1781de90bfxat\" class=\"section\"><h4 id=\"aa8ca430be9k3\"><b>问题原因</b></h4><p id=\"afe3fb40becnc\">通过打开事件查看器发现报错，<code data-tag=\"code\" class=\"code\">Remote Registry</code>服务被禁止，无法启动该服务。</p></section><section id=\"1993a790bfk8h\" class=\"section\"><h4 data-tag=\"h5\" id=\"c4465e72bb5ef\" class=\"h5\"><b>解决方案</b></h4><p id=\"9af57821c2kvm\">请参考以下操作启动<code data-tag=\"code\" class=\"code\">Remote Registry</code>服务。</p><ol id=\"b6a5c981c2xn5\"><li id=\"b6a5a270c2iaa\"><p id=\"b0768900c2f4l\">远程连接Windows实例。</p><p id=\"fccdafe0c2jpp\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"13581a71c2g01\"><p id=\"f00844d0c2u6t\">依次选择<b data-tag=\"uicontrol\" id=\"f7bdb020c258x\" class=\"uicontrol\">开始 &gt; 运行</b>，输入<code data-tag=\"code\" class=\"code\">services.msc</code>，然后单击<b data-tag=\"uicontrol\" id=\"3924da20c2fq0\" class=\"uicontrol\">确认</b>。</p></li><li id=\"90f1cfb0c2ius\"><p id=\"90f1a8a0c2x3m\">在<b data-tag=\"uicontrol\" id=\"7ddfea10c2i0z\" class=\"uicontrol\">服务</b>窗口中，双击<code data-tag=\"code\" class=\"code\">Remote Registry</code>服务，进入<b data-tag=\"uicontrol\" id=\"3dd1f200c2r72\" class=\"uicontrol\">Remote Registry属性</b>窗口，设置以下选项。</p><ul id=\"74105be1c2klh\"><li id=\"73dfd601c2xeo\"><p id=\"73dfd600c2y74\">在<b data-tag=\"uicontrol\" id=\"6004d400c21a4\" class=\"uicontrol\">启动类型</b>区域，选择<b data-tag=\"uicontrol\" id=\"619c63f0c2b6h\" class=\"uicontrol\">自动</b>选项。</p></li><li id=\"7624e401c2hn2\"><p id=\"7624e400c23o8\">在<b data-tag=\"uicontrol\" id=\"7e637c80c243l\" class=\"uicontrol\">服务状态</b>区域，单击<b data-tag=\"uicontrol\" id=\"5c4cd970c3jr1\" class=\"uicontrol\">启动</b>，确保<code data-tag=\"code\" class=\"code\">Remote Registry</code>服务正常启动。</p><img id=\"9f0696c1c2dnf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0514688761/p588957.png\" alt=\"2023-03-15_11-32-02\" placement=\"break\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></li></ul></li><li id=\"999dda90c26pz\"><p id=\"999db380c2mp2\">单击<b data-tag=\"uicontrol\" id=\"db6db170c2ebk\" class=\"uicontrol\">确定</b>，保存设置。</p></li></ol></section></div></div><div id=\"3c9a2920d4pc3\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"c4465e75bbvc2\" class=\"expandable-title\"><b>安装AD域控制器时，提示“此计算机具有动态分配的IP地址”怎么办？</b></h4><div id=\"3c9a2922d41p9\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"1ccf4a90bf1kv\" class=\"section\"><h4 data-tag=\"h5\" id=\"c4465e76bbxtn\" class=\"h5\"><b>问题现象</b></h4><p id=\"bfd07320bd7vr\">在Windows系统的ECS实例中安装AD域控制器时，提示“<b data-tag=\"uicontrol\" id=\"fd76f210bf7qf\" class=\"uicontrol\">此计算机具有动态分配的IP地址</b>”。</p><p id=\"c014cf20bd36k\"><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4265428761/p518684.png\" alt=\"1.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"> </p></section><section id=\"1fe8bf90bfq77\" class=\"section\"><h4 id=\"1a476f70betpl\"><b>问题原因</b></h4><p id=\"1c397b70betqp\">该Windows系统的ECS实例上至少有一个物理网络适配器未将静态IP地址分配给其IP属性。</p></section><section id=\"22007c00bfbmd\" class=\"section\"><h4 data-tag=\"h5\" id=\"c4468581bbupz\" class=\"h5\"><b>解决方案</b></h4><ol id=\"690450e2c2pcn\"><li id=\"690450e0c2fjr\"><p id=\"c4468582bbxr5\">远程连接Windows实例。</p><p id=\"6df8c770c2pd8\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"7b27b7d1c2mz6\"><p id=\"9e111890c25ae\">安装AD域控制器。<span data-tag=\"ph\" id=\"bc95c6a0c7fca\" props=\"china\" data-cond-props=\"china\" class=\"ph\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/ecs-instance-building-windows-active-directory-domain\">ECS实例搭建Windows系统AD域</a>。</span></p></li><li id=\"c4d2aa71c2ijg\"><p id=\"c4d2aa70c2ld4\">在安装AD域时弹出的<b data-tag=\"uicontrol\" id=\"e5fe7cb0c2lot\" class=\"uicontrol\">静态IP分配</b>选项框中，单击<b data-tag=\"uicontrol\" id=\"e384f130c2n5x\" class=\"uicontrol\">是</b>。</p></li></ol><div type=\"note\" id=\"525d0f80c20i6\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"52755270c26f7\">LoopBack使用了DHCP方式，可以在未分配静态IP地址的情况下继续执行操作。</p></div></div></section></div></div><div id=\"3cdd4ca0d44tv\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"3bbdd940d41r9\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>安装AD域控制器时，提示“0x0000232B RC0DE_NAME_ERROR”错误代码怎么办？</b></h4><div id=\"3cdd4ca2d47vq\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"26c04e00bfty6\" class=\"section\"><h4 data-tag=\"h5\" id=\"c446ac94bbu6g\" class=\"h5\"><b>问题现象</b></h4><p id=\"6d461000bf10p\">在Windows系统的ECS实例中安装AD域控制器时，提示“<b data-tag=\"uicontrol\" id=\"d863ac70bf7r4\" class=\"uicontrol\">0x0000232B RC0DE_NAME_ERROR</b>”错误代码。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5265428761/p518686.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></section><section id=\"28b62a90bf1e4\" class=\"section\"><h4 id=\"21ec42a0bfms6\"><b>问题原因</b></h4><p id=\"28312e01bfsqz\">可能是由于DNS服务器中IP地址配置错误导致。</p></section><section id=\"2db09490bfthv\" class=\"section\"><h4 data-tag=\"h5\" id=\"c446ac97bbr6t\" class=\"h5\"><b>解决方案</b></h4><p id=\"c446ac98bbq2l\">请参考以下操作将Slave的内外网网卡的DNS服务器全部修改为Master的私网地址。</p><ol data-tag=\"steps\" id=\"steps-q6o-keb-u8r\" class=\"steps\"><li data-tag=\"step\" id=\"step-ojj-iq6-t38\" class=\"step\"><p id=\"8172a830c7kev\">远程连接Windows实例。</p><p id=\"acfd0cc0c7itd\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li data-tag=\"step\" id=\"step-blw-z55-lhf\" class=\"step\"><p id=\"8172a831c7uug\">进入<b data-tag=\"uicontrol\" id=\"180317a0c7x5i\" class=\"uicontrol\">Internet协议版本4（TCP/IPv4）属性</b>窗口，修改DNS服务器地址，然后单击<b data-tag=\"uicontrol\" id=\"29b26000c75y6\" class=\"uicontrol\">确定</b>。</p><div type=\"note\" id=\"eb905640c7gcc\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"eb902f30c7qi0\">更改DNS服务器地址为Master实际的私网地址。</p></div></div><img id=\"5ed06d20c7oa9\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6885639761/p606823.png\" alt=\"p13294\" placement=\"break\" class=\"image break\"></li><li id=\"0aff19c1c7j7v\"><p id=\"0aff19c0c7f5l\">检查是否能Ping通DNS服务器IP地址。</p><div data-tag=\"info\" id=\"info-rdg-gou-78j\" props=\"china\" data-cond-props=\"china\" class=\"info\"><img data-tag=\"image\" id=\"image-yhx-q0c-3ye\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1679047461/p416532.png\" alt=\"adda\" placement=\"break\" class=\"image break\"></div></li></ol></section></div></div><div id=\"3d23f290d448e\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"73a0cb60d4klb\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>安装AD域控制器时，提示“找不到网络路径”错误怎么办？</b></h4><div id=\"3d23f292d4gsc\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"3158dc10bfmpq\" class=\"section\"><h4 data-tag=\"h5\" id=\"c446d3a2bbe09\" class=\"h5\"><b>问题现象</b></h4><p id=\"bdff3c00bfs7v\">在Windows系统的ECS实例中安装AD域控制器时，提示“<b data-tag=\"uicontrol\" id=\"ec9c10b0bf0l3\" class=\"uicontrol\">找不到网络路径</b>”错误。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5265428761/p518687.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></section><section id=\"3360ba00bftlp\" class=\"section\"><h4 id=\"837d8650bfctq\"><b>问题原因</b></h4><p id=\"8959ebe0bf3il\">可能有以下几点原因导致：</p><ul id=\"9c4b2a22bfdnf\"><li id=\"9c4b2a20bf8n8\"><p id=\"a4c78ef0bfn5r\">AD域控制器和客户端的<code data-tag=\"code\" class=\"code\">TCP/IP NetBIOS Helper</code>和<code data-tag=\"code\" class=\"code\">Remote Registry</code>服务没有启动。</p></li><li id=\"e34ca7a0bfaiy\"><p id=\"e34c8090bfo2p\">客户端与AD与控制器的DNS配置错误。</p></li><li id=\"36f520d1bfmwn\"><p id=\"372e0b20bffz4\">客户端和AD域控制器的SID造成冲突。</p></li><li id=\"00ed7e60bfayh\"><p id=\"00ed5750bfzgk\">防火墙及安全软件进行了拦截。</p></li></ul></section><section id=\"35ec9500bfx29\" class=\"section\"><h4 data-tag=\"h5\" id=\"c446d3a5bby6u\" class=\"h5\"><b>解决方案</b></h4><p id=\"74bba471bf3z9\">请参考以下操作进行排查。</p><ul id=\"d61f0722d4fvc\"><li id=\"d61f0720d4qee\"><p id=\"e63b6500c2dyh\"><b>启动TCP/IP NetBIOS Helper和Remote Registry服务</b></p><p id=\"b46da641c2sye\">请参考<a title=\"\" class=\"xref\" href=\"#1993a790bfk8h\">解决方案</a>分别启动AD域控制器和客户端的TCP/IP NetBIOS Helper和Remote Registry服务。</p></li><li id=\"d96ef570d4vlx\"><p id=\"d96ece60d47m6\"><b>修改客户端DNS配置</b></p><p id=\"274d9bc1c2sh1\">请参考<a title=\"\" class=\"xref\" href=\"#c446ac97bbr6t\">解决方案</a>修改客户端DNS配置。</p></li><li id=\"dc7d46e1d4znh\"><p id=\"dc7d46e0d4iff\"><b>修改客户端SID</b></p><p id=\"338fbb21c2kwr\">请参考以下操作修改客户端SID。</p><ol id=\"653c6091eekih\"><li data-tag=\"step\" id=\"step-es5-t6b-y5o\" class=\"step\"><p id=\"3cd2ba00c7gb7\">远程连接Windows实例。</p><p id=\"8a7880f0c7nxl\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li data-tag=\"step\" id=\"step-mjv-oz2-klt\" class=\"step\"><p id=\"3cd2ba01c73cf\">下载修改客户端SID的PowerShell脚本。</p><ul id=\"5ff727f1c7wng\"><li id=\"5e152180c7dk4\"><p id=\"3cd2e110c7rkw\">下载地址：<a class=\"\" target=\"_blank\" href=\"https://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/attach/40846/cn_zh/1542010494209/AutoSysprep.ps1\">AutoSysprep.ps1</a></p></li><li id=\"5e152181c7yf5\"><p id=\"3cd2e111c7vad\">脚本来源：阿里云官方</p></li></ul></li><li data-tag=\"step\" id=\"step-q11-4gc-mna\" class=\"step\"><p id=\"3cd2e112c7psy\">打开CMD，输入powerShell切换至<b data-tag=\"uicontrol\" id=\"uicontrol-gjg-rd8-85p\" class=\"uicontrol\">Windows PowerShell</b>界面。</p><div data-tag=\"note\" id=\"note-8ul-i5y-c9w\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3cd2e113c73ue\">如果您的实例操作系统是64位，则不能使用32位的PowerShell（即<b data-tag=\"uicontrol\" id=\"uicontrol-4ba-ook-r0c\" class=\"uicontrol\">Windows PowerShell (x86)</b>），否则会报错。</p></div></div></li><li data-tag=\"step\" id=\"step-fxr-npu-6cg\" class=\"step\"><p id=\"3cd2e114c7058\">切换至脚本存储的路径，执行如下命令，查看脚本工具说明。</p><pre data-tag=\"codeblock\" id=\"codeblock-2hj-ohs-355\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>.\\AutoSysprep.ps1 -help</code></pre></li><li data-tag=\"step\" id=\"step-z22-bqi-ien\" class=\"step\"><p id=\"3cd2e115c7h62\">执行如下命令，重新初始化服务器的SID。</p><pre data-tag=\"codeblock\" id=\"codeblock-xse-1k2-rgb\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>.\\AutoSysprep.ps1 -ReserveHostname -ReserveNetwork -SkipRearm -PostAction \"reboot\"</code></pre><p id=\"3cd2e116c7t40\">初始化完成后，会重启实例，您需要注意以下事项。 </p><ul id=\"8c871fa1ee0n0\"><li data-tag=\"li\" id=\"li-bst-cqd-9it\" class=\"li\"><p id=\"3cd2e117c7aji\">IP地址的获取方式会从DHCP变成固定IP地址，请确保该固定IP地址和开始设置前ECS实例的IP地址一致。您也可以将获取方式改回DHCP，以自动获取控制台中为ECS实例分配的主私有IP地址。</p><div data-tag=\"note\" id=\"note-f9s-kp2-p2x\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3cd2e118c7bfh\">请不要在控制台修改ECS实例的主私有IP地址，否则IP地址变化会导致访问异常。</p></div></div><img data-tag=\"image\" id=\"image-g63-nj5-qb5\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7375688951/p13288.png\" width=\"400\" alt=\"重新改成DHCP\" props=\"china\" placement=\"break\" data-cond-props=\"china\" class=\"image break\"></li><li data-tag=\"li\" id=\"li-ogl-84g-glf\" class=\"li\"><p id=\"3cd30820c7xc9\">初始化SID后，云服务器防火墙的配置被修改成微软的默认配置，导致云服务器无法Ping通。您需要关闭防火墙<b data-tag=\"uicontrol\" id=\"uicontrol-vxb-taw-ou9\" class=\"uicontrol\">来宾或公用网络</b>，或者放行需要开放的端口。下图表示防火墙<b data-tag=\"uicontrol\" id=\"uicontrol-mrl-4yn-j3b\" class=\"uicontrol\">来宾或公用网络</b>的状态是已连接。<img data-tag=\"image\" id=\"image-23r-3jw-2ax\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8375688951/p13291.png\" width=\"400\" alt=\"来宾或公用网络\" props=\"china\" placement=\"break\" data-cond-props=\"china\" class=\"image break\"></p></li></ul></li><li data-tag=\"step\" id=\"step-0mg-cl2-s49\" class=\"step\"><p id=\"3cd30821c7wls\">打开控制面板修改防火墙设置，关闭来宾或公用网络防火墙。</p><img data-tag=\"image\" id=\"image-52i-r78-pug\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8375688951/p13292.png\" width=\"400\" alt=\"关闭来宾或公用网络防火墙\" props=\"china\" placement=\"break\" data-cond-props=\"china\" class=\"image break\"><p id=\"3cd30823c7cjb\">关闭后，可以Ping通服务器。<img data-tag=\"image\" id=\"image-b8e-op8-asv\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8375688951/p13293.png\" width=\"400\" alt=\"PING通服务器示意图\" props=\"china\" placement=\"break\" data-cond-props=\"china\" class=\"image break\"></p></li></ol></li><li id=\"ed848f70d4n53\"><p id=\"ed846860d48k5\"><b>允许客户端通过防火墙等安全软件</b></p><p id=\"cf28ccc1c2u0z\">请参考<a title=\"\" class=\"xref\" href=\"/zh/ecs/configure-windows-firewall-rules-for-windows-server-instances\">Windows Server系统的ECS实例防火墙策略的配置方法</a>允许客户端通过。</p></li></ul></section></div></div></section><section id=\"2a6471b0d4yzf\" class=\"section\"><h2 id=\"3d8d73b0d4nwq\"><b>执行yum、wget命令报错问题</b></h2><div id=\"3d793e80d4frp\" outputclass=\"collapse\" class=\"collapse\"><h4 data-spm-anchor-id=\"a2c4g.11186623.0.i1.168e18b6bGFB62\" jc=\"start\" id=\"67869550bdbjx\" data-tag=\"expandable-title\" style=\"text-align:start\" class=\"expandable-title\"><b>在Linux系统的ECS实例中，执行wget命令时提示“command not found”错误怎么办？</b></h4><div id=\"3d793e82d44zz\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"994c72b0benat\" class=\"section\"><h4 id=\"6083ff40bdb6x\"><b>问题现象</b></h4><p id=\"f5cc5b22bd6qx\">在Linux实例中执行<code data-tag=\"codeph\" class=\"codeph\">wget</code>命令时提示“<b data-tag=\"uicontrol\" id=\"a3ad4ba0bd32n\" class=\"uicontrol\">command not found</b>”，执行<code data-tag=\"codeph\" class=\"codeph\">yum install wget</code>命令时提示“<b data-tag=\"uicontrol\" id=\"a9329080bdzsa\" class=\"uicontrol\">already installed and latest version</b>”。</p></section><section id=\"7d17d620beh16\" class=\"section\"><h4 id=\"tayMx\"><b>问题原因</b></h4><p id=\"f5cc5b23bdm45\">检查<code data-tag=\"codeph\" class=\"codeph\">/usr/bin</code>目录中没有<code data-tag=\"codeph\" class=\"codeph\">wget</code>命令文件，但存在<code data-tag=\"codeph\" class=\"codeph\">wge</code>命令的文件，可能是由于命令文件有被重命名导致报错。</p></section><section id=\"8c3920a0bemoh\" class=\"section\"><h4 id=\"4f532a49d4ro8\"><b>解决方案</b></h4><p id=\"f5cc8235bdho9\">请您参考以下步骤进行操作。</p><ol id=\"f5cc8236bdigt\"><li id=\"f5cc8237bdq2o\"><p id=\"f5cc8238bdmdr\">远程连接Linux实例。</p><p id=\"01de9b70bd5zq\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"fbfeda80bd955\"><p id=\"fbfeb370bdqxv\">执行以下命令查询<code data-tag=\"code\" class=\"code\">wge</code>命令的路径。</p><pre data-tag=\"codeblock\" id=\"f5c8d8b1bdlx9\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>whereis wge</code></pre><p id=\"f5cc823abdo9g\"> 命令返回结果如下，表示<code data-tag=\"code\" class=\"code\">wge</code>命令路径为<code data-tag=\"code\" class=\"code\">/usr/bin/wge</code>。</p><pre id=\"k11ldd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>wge：/usr/bin/wge</code></pre></li><li id=\"f5cca940bdvc9\"><p id=\"f5cca941bdkkp\">根据上述的路径，执行以下命令重命名即可。</p><pre id=\"dczxbb\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cp /usr/bin/wge /usr/bin/wget</code></pre></li><li id=\"9cdb3a51bfiq8\"><p id=\"a2053fd0bfcch\">重新执行<code data-tag=\"code\" class=\"code\">wget</code>命令，若不再提示以上报错信息，则表示问题已修复。</p></li></ol></section></div></div><div id=\"3dc8be10d418m\" outputclass=\"collapse\" class=\"collapse\"><h4 data-spm-anchor-id=\"a2c4g.11186623.0.i0.672d26dfStQnTx\" jc=\"start\" id=\"7a34fe30bd475\" data-tag=\"expandable-title\" style=\"text-align:start\" class=\"expandable-title\"><b>在Linux实例系统的ECS实例中，使用wget命令下载时提示“Permission denied”错误怎么办？</b></h4><div id=\"3dc8be12d43l0\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"a07d6bc0beyzw\" class=\"section\"><h4 id=\"84e46fa1bdcgg\"><b>问题现象</b></h4><p id=\"84e46fa2bdc3v\">在Linux系统的ECS实例中，使用<code data-tag=\"code\" class=\"code\">wget</code>下载时提示以下信息。</p><pre id=\"ntnpdm\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>wget bash: /usr/bin/wget: Permission denied</code></pre></section><section id=\"a3aa41b0be3o2\" class=\"section\"><h4 id=\"84e46fa3bdaaz\"><b>问题原因</b></h4><p id=\"84e46fa4bdb60\">在Linux实例系统的ECS实例中，<code data-tag=\"code\" class=\"code\">wget</code>命令权限为000，没有读写执行权限。</p></section><section id=\"abf165b0bet6v\" class=\"section\"><h4 id=\"84e46fa5bdyr2\"><b>解决方案</b></h4><p id=\"84e46fa6bdzs0\">请您参考以下步骤进行操作。</p><ol id=\"84e46fa7bd0qu\"><li id=\"84e46fa8bdnfu\"><p id=\"84e46fa9bddzo\">远程连接Linux实例。</p><p id=\"151d3662bdqy8\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"14836760bdx6w\"><p id=\"14834050bd99t\">执行以下命令查看<code data-tag=\"code\" class=\"code\">wget</code>命令权限。</p><pre data-tag=\"codeblock\" outputclass=\"language-javascript\" id=\"328d1ca3bdzjv\" class=\"pre codeblock language-javascript\"><code>ls -l /usr/bin/wget</code></pre><p id=\"328d43b0bdviy\">命令返回结果如下，说明<code data-tag=\"code\" class=\"code\">wget</code>命令权限为000，没有读写执行权限。</p><pre data-tag=\"codeblock\" outputclass=\"language-javascript\" id=\"328d43b3bdf0l\" class=\"pre codeblock language-javascript\"><code>-------- 1 root root 366800 Oct 31 2014 /usr/bin/wget</code></pre></li><li id=\"8b8d8921bdkgr\"><p id=\"aa391920bdmkk\">执行以下命令，查看<code data-tag=\"code\" class=\"code\">/usr/bin/wget</code>目录属性。</p><pre id=\"ke7ubr\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>lsattr /usr/bin/wget</code></pre><p id=\"b7f1d2f0bdwd7\">命令返回结果如下，表示<code data-tag=\"code\" class=\"code\">/usr/bin/wget</code>目录属性为<code data-tag=\"code\" class=\"code\">i</code>（不允许在该目录下新建和删除文件）。</p><pre id=\"yq77hu\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>----i--------e- /usr/bin/wget</code></pre></li><li id=\"b485f830bdutz\"><p id=\"c1b75990bdabc\">执行以下命令，移除<code data-tag=\"code\" class=\"code\">/usr/bin/wget</code>目录<code data-tag=\"code\" class=\"code\">i</code>属性。</p><pre id=\"agzrvd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chattr -i /usr/bin/wget</code></pre></li><li id=\"e1d8b8f1c4og3\"><p id=\"e42f2c10c4zls\">执行以下命令，对<code data-tag=\"code\" class=\"code\">/usr/bin/wget</code>目录进行授权。</p><pre id=\"qgp9xp\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chmod 755 /usr/bin/wget </code></pre></li><li id=\"d40727b0bd570\"><p id=\"d40700a0bdlyl\">重新执行<code data-tag=\"code\" class=\"code\">wget</code>命令，若不再提示以上报错信息，则表示问题已修复。</p></li></ol></section></div></div><div id=\"3e129850d4tbu\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"7fbcaea0be756\" class=\"expandable-title\"><b>在CentOS 7系统的ECS实例中，执行yum命令提示“-bash: /usr/bin/yum: /usr/bin/python: bad interpreter: No such file or directory”错误怎么办？</b></h4><div id=\"3e129852d4hjn\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"b51633b0bf6wk\" class=\"section\"><h4 data-tag=\"h4\" id=\"7fbd71f4betx3\" class=\"h4\"><b>问题现象</b></h4><p id=\"7fbd71f5beq0u\">在CentOS 7系统的ECS实例中执行<code data-tag=\"codeph\" class=\"codeph\">yum</code>命令时，提示以下报错信息。</p><pre data-tag=\"codeblock\" id=\"7fb64604bevv6\" outputclass=\"language-javascript\" height=\"43\" class=\"pre codeblock language-javascript\"><code>-bash: /usr/bin/yum: /usr/bin/python: bad interpreter: No such file or directory</code></pre></section><section id=\"b7a32020bfqbn\" class=\"section\"><h4 id=\"d557e230bexva\"><b>问题原因</b></h4><p id=\"d6c024c0bep9t\">可能是由于Python异常（Python被卸载、改名或移动路径），导致执行<code data-tag=\"code\" class=\"code\">yum</code>命令时报错。</p><div type=\"note\" id=\"712591a0c2625\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"74404110cduz3\"><code data-tag=\"code\" class=\"code\">yum</code>（ Yellow dog Updater, Modified）是一个在Fedora、RedHat以及SUSE中的Shell前端软件包管理器。</p></div></div></section><section id=\"bb9c1fb0bfmy7\" class=\"section\"><h4 data-tag=\"h4\" id=\"7fbd9900bebia\" class=\"h4\"><b>解决方案</b></h4><p id=\"700e34f1bej7i\">请参考以下操作，排查Python是否异常并修复。</p><ol id=\"7fbd9901beeg2\"><li id=\"7fbd9902bemkl\"><p id=\"7fbd9903becfb\">远程连接Linux实例。</p><p id=\"d8830da0beqkq\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"cfe53e20bewze\"><p id=\"cfe51710beusb\">执行以下命令，查看<code data-tag=\"codeph\" class=\"codeph\">yum</code>路径。</p><pre id=\"5wy6zx\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>which yum</code></pre><p id=\"15242b40c3oz8\">系统返回如下信息，表示<code data-tag=\"code\" class=\"code\">yum</code>路径为<code data-tag=\"code\" class=\"code\">/usr/bin/yum</code>。</p><pre id=\"dsk8ff\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>/usr/bin/yum</code></pre></li><li id=\"d4dfd660c3epx\"><p id=\"d4dfaf50c3hgn\">执行以下命令，查看<code data-tag=\"code\" class=\"code\">yum</code>内容。</p><pre id=\"pygqhk\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /usr/bin/yum</code></pre><p id=\"7fbd9904becwf\"> 系统返回以下信息，表示使用的Python版本路径。 </p><pre data-tag=\"codeblock\" id=\"7fb64606behkt\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>#!/usr/bin/python</code></pre><div type=\"note\" id=\"f91abd61c3lg0\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"f942b7c0c3mva\">本文以<code data-tag=\"code\" class=\"code\">/usr/bin/python</code>路径为示例，请根据实际情况更换实际路径。</p></div></div></li><li id=\"7fbd9906be0bg\"><p id=\"7fbd9907bei3g\">执行以下命令，检查上述查看的路径。</p><pre data-tag=\"codeblock\" id=\"7fb64607beuts\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls -al /usr/bin/python</code></pre><p id=\"7fbd9908be12i\"> 如果系统返回类似以下信息，则表示Python可能被卸载、改名或移动路径。</p><pre data-tag=\"codeblock\" id=\"7fb64608belc3\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls: cannot access /usr/bin/python: No such file or directory</code></pre></li><li id=\"7fbdc010bei3y\"><p id=\"7fbdc011behiw\">执行以下命令，查看Python相关文件是否存在。</p><pre data-tag=\"codeblock\" id=\"7fb64609be2l7\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>rpm -qa | grep python</code></pre><p id=\"7fbdc012bev8b\">正常情况下，系统返回类似以下信息。</p><pre data-tag=\"codeblock\" id=\"7fb6460abe4z7\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>python-decorator-3.4.0-3.el7.noarch\nlibselinux-python-2.5-14.1.el7.x86_64\npython-backports-1.0-8.el7.x86_64\npython-pyudev-0.15-9.el7.noarch\nrpm-python-4.11.3-35.el7.x86_64\npython-2.7.5-76.el7.x86_64\n.....</code></pre><ul id=\"30fd59e1c43hn\"><li id=\"2f3d3351c4can\"><p id=\"7129f724c413x\">Python相关文件存在：说明Python相关文件被改名或移动路径。</p><ol id=\"3c78cde1c4xub\"><li id=\"89afbc81c4i45\"><p id=\"89afbc80c4k3d\">执行以下命令，查看Python相关文件。</p><pre id=\"7129f728c4krn\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls -al /usr/bin/python*</code></pre><p id=\"7129f729c46c0\">系统返回类似以下信息，提示“<code data-tag=\"code\" class=\"code\">/usr/bin/python.bak -&gt; python2</code>”，则表示Python名称已被更改。</p><pre id=\"7129f72ac4q3y\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>lrwxrwxrwx  1 root root   14 Feb 15  2019 /usr/bin/python-config -&gt; python2-config\nlrwxrwxrwx. 1 root root    7 Feb 15  2019 /usr/bin/python.bak -&gt; python2\nlrwxrwxrwx. 1 root root    9 Feb 15  2019 /usr/bin/python2 -&gt; python2.7\nlrwxrwxrwx  1 root root   16 Feb 15  2019 /usr/bin/python2-config -&gt; python2.7-config\n-rwxr-xr-x. 1 root root 7216 Oct 31  2018 /usr/bin/python2.7\n-rwxr-xr-x  1 root root 1835 Oct 31  2018 /usr/bin/python2.7-config</code></pre></li><li id=\"a400cc01c4e45\"><p id=\"712a1e31c4647\">执行以下命令，将<code data-tag=\"codeph\" class=\"codeph\">/usr/bin/python.bak</code>名称改为<code data-tag=\"codeph\" class=\"codeph\">/usr/bin/python</code>。</p><pre id=\"712a1e32c4ssg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>mv python.bak python</code></pre></li><li id=\"ac569601c490o\"><p id=\"712a1e34c4sfg\">重新执行<code data-tag=\"code\" class=\"code\">yum</code>命令，若不再提示以上报错信息，则表示问题已修复。</p></li></ol></li><li id=\"6639e421c4w70\"><p id=\"6639e420c47up\">Python相关文件不存在：说明Python被卸载。</p><ol id=\"6ba44e01c473o\"><li id=\"6b292a91c4p88\"><p id=\"6b292a90c4tw5\">依次执行如下命令，安装Python。</p><pre id=\"vlxpxd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>mkdir /python/\n  \nyum install python --downloadonly --downloaddir=/python/</code></pre></li><li id=\"75f88011c4ksv\"><p id=\"712a1e3cc4zo8\">重新执行<code data-tag=\"code\" class=\"code\">yum</code>命令，若不再提示以上报错信息，则表示问题已修复。</p></li></ol></li></ul></li></ol></section></div></div></section><section id=\"5b49eb70dcl9r\" class=\"section\"><h2 id=\"e3834d70d4izm\"><b>无法连接ECS实例中的FTP服务问题</b></h2><ul id=\"000b4342d4nk1\"><li id=\"000b4340d4cl9\"><p id=\"d5118761d4kbw\">Windows实例</p><div id=\"3e5b1300d4q0s\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"78ffabd0c1enn\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>在Windows系统的ECS实例中，无法通过外网环境连接和访问FTP服务怎么办？</b></h4><div id=\"3e5b1302d47zc\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"6cea68d0c125v\" class=\"section\"><h4 id=\"f437c5a2d467u\"><b>问题现象</b></h4><p id=\"f25d0ff6bfxdc\">在Windows系统的ECS实例中，已经搭建的FTP服务，外网环境无法连接和访问该FTP服务器。</p></section><section id=\"6ec172c0c1ybk\" class=\"section\"><h4 id=\"f437c5a5d4qiv\"><b>问题原因</b></h4><p id=\"f25d0ff7bf97u\">可能导致该问题的原因如下：</p><ul data-spm-anchor-id=\"a2c9r.12641768.0.i2.10f75e3bdT7ibG\" id=\"f25d0ff8bfeye\"><li id=\"f25d0ff9bf67a\"><p id=\"8429fd20c117g\"><b data-tag=\"uicontrol\" id=\"89c8bd70c1q52\" class=\"uicontrol\">未放行FTP的安全组规则</b>：请参考<a title=\"\" class=\"xref\" href=\"#f25d3704bf6cm\">方案一：添加FTP的安全组规则</a>进行操作。</p></li><li id=\"863d4cc1c1fco\"><p id=\"863d4cc0c1paw\"><b data-tag=\"uicontrol\" id=\"8b36a550c1kj0\" class=\"uicontrol\">防火墙拦截FTP进程</b>：请参考<a title=\"\" class=\"xref\" href=\"#f25d3707bfro3\">方案二：配置FTP防火墙支持</a>进行操作。</p></li></ul></section><section id=\"71f351c0c146z\" class=\"section\"><h4 id=\"f437c5add47nj\"><b>解决方案</b></h4><p id=\"b7a21b10c11ch\">请根据实际情况，选择以下两种分案进行操作。</p><p data-tag=\"h3\" id=\"f25d3704bf6cm\" class=\"h3\"><b>方案一：添加FTP的安全组规则</b></p><p id=\"p-gsh-p45-ov2\" class=\"p\">当您在Windows系统的ECS实例中搭建好FTP站点后，需要在Windows系统的ECS实例所属的安全组中，添加入方向规则，放行FTP服务器所需的21端口以及FTP服务器被动模式可能占用的端口范围1024~65535，具体操作请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。</p><div type=\"note\" id=\"692af591bf4ee\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"f25d3706bfm4b\" class=\"p\">关于安全组的更多配置信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/security-groups-for-different-use-cases\">安全组应用案例</a>和<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/common-ports\">常用端口</a>。</p></div></div><p data-tag=\"h3\" id=\"f25d3707bfro3\" class=\"h3\"><b>方案二：配置FTP防火墙支持</b></p><p id=\"f25d3708bfzkk\">如果您的防火墙为开启状态，则需要通过配置IIS管理器放行TCP<b data-tag=\"uicontrol\" id=\"858fd940c1xc7\" class=\"uicontrol\">21</b>端口与<b data-tag=\"uicontrol\" id=\"88d60390c1yro\" class=\"uicontrol\">1024~65535</b>端口用于FTP服务。请参考以下步骤进行操作。</p><div type=\"note\" id=\"9da4a271c1c3j\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"86fbdc42cdfdc\"><li id=\"86fbdc40cda44\"><p id=\"779e0e10c1f9s\">Windows系统的ECS实例内部的防火墙默认为关闭状态。</p></li><li id=\"87d52540cdpqb\"><p id=\"87d4fe30cdraf\">本文以IIS管理器为例，介绍如何配置FTP。</p></li></ul></div></div><ol id=\"db386831c14ri\"><li id=\"db384120c19fn\"><p id=\"d9bee790c1ec8\">远程连接Windows实例。</p><p id=\"fdc79b00c1pqj\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"131cb9e1c1mx3\"><p id=\"19e183a0c16a7\">打开<b data-tag=\"uicontrol\" id=\"1e071170c1lrk\" class=\"uicontrol\">IIS 管理器</b>，然后双击<b data-tag=\"uicontrol\" id=\"211e1570c1wh4\" class=\"uicontrol\">FTP防火墙支持</b>，进入FTP防火墙支持的配置界面。</p><img id=\"31f414d0c1x62\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0346868761/p581845.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li><li id=\"336c5cf1c1hsl\"><p id=\"eda979f2c14a4\">配置相关参数，并单击<b data-tag=\"uicontrol\" id=\"3b09d370c1ekh\" class=\"uicontrol\">应用</b>。</p><img id=\"bc062690c10me\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0346868761/p581852.png\" alt=\"image\" placement=\"break\" class=\"image break\"><div type=\"note\" id=\"4e22bdf1c18x0\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"4e22bdf0c17y5\">参数说明如下：</p><ul id=\"555fc4f2c1dj2\"><li id=\"ZH-CN-TOPIC-0191603494-zh-cn-topic-0109724372-li62278890193357\"><p id=\"eda9a100c16hb\"><b data-tag=\"uicontrol\" id=\"5e4d1400c140g\" class=\"uicontrol\">防火墙的外部IP地址</b>：输入该Windows系统的ECS实例的公网IP地址。</p></li><li id=\"ZH-CN-TOPIC-0191603494-zh-cn-topic-0109724372-li21832957193357\"><p id=\"eda979f4c17ny\"><b data-tag=\"uicontrol\" id=\"5fe34460c1h0a\" class=\"uicontrol\">数据通道端口范围</b>：指定用于被动连接的端口范围。可指定的有效端口范围为1025-65535。请根据实际需求进行设置，本文以<b data-tag=\"uicontrol\" id=\"a9cd2080c1b7v\" class=\"uicontrol\">1024~65535</b>端口为例。</p></li></ul></div></div></li><li id=\"1bd7dff0c1qr1\"><p id=\"1bd7b8e0c1zz0\">打开命令行，执行以下命令重启FTP服务，确保覆盖每个FTP站点的配置。</p><pre id=\"fhg4vk\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>net stop ftpsvc&amp;net start ftpsvc</code></pre></li><li id=\"76b7e1e1c1bkt\"><p id=\"c9813090c1ahv\">（可选）若配置好FTP服务器后，可以在本机访问，但是无法通过另一台机器访问，该问题是由于防火墙配置错误，请参考以下操作进行配置：</p><ol id=\"de7e0b61c1del\"><li id=\"f25d370abfhir\"><p id=\"f25d370bbfpj1\">首先检查服务器管理器中的入站规则，确保已启用FTP服务器。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0346868761/p518889.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></li><li id=\"f25d5e10bft9p\"><p id=\"f25d5e11bfakr\">添加Windows服务主进程。</p><ol id=\"25395821c1kau\"><li id=\"24cd28d0c1pc9\"><p id=\"24ccdab0c1pmj\">打开<b data-tag=\"uicontrol\" id=\"ed2ae930c1ito\" class=\"uicontrol\">控制面板 &gt; Windows防火墙</b>，然后单击左侧的<b data-tag=\"uicontrol\" id=\"f565d830c1tla\" class=\"uicontrol\">允许程序或功能通过Windows防火墙</b>。</p></li><li id=\"3feafe30c195k\"><p id=\"3fead720c10sq\">在新窗口中单击<b data-tag=\"uicontrol\" id=\"f99466b0c14f0\" class=\"uicontrol\">允许运行另一程序</b>，在浏览中找到<code data-tag=\"codeph\" class=\"codeph\">C:\\Windows\\System32\\svchost.exe</code>打开并添加。</p></li><li id=\"49e10ab0c1tdb\"><p id=\"49e0e3a0c1f74\">此时会多出一项<b data-tag=\"uicontrol\" id=\"5c8bf120c1777\" class=\"uicontrol\">Windows服务主进程</b>，选中<b data-tag=\"uicontrol\" id=\"7d9631a0c1q49\" class=\"uicontrol\">家庭/工作(专用)</b>与<b data-tag=\"uicontrol\" id=\"7eed0f10c1ww5\" class=\"uicontrol\">公用</b>，然后单击<b data-tag=\"uicontrol\" id=\"855bc990c1cvy\" class=\"uicontrol\">确定</b>。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9246868761/p518890.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></li></ol></li></ol></li></ol></section></div></div><div id=\"3ea0ce90d4lxs\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"1285cc50d46z4\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>连接Windows系统的ECS实例中的FTP服务器时，提示“530 Login incorrect”错误怎么办？</b></h4><div id=\"3ea0ce92d400m\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"8410dd90c1849\" class=\"section\"><h4 id=\"c47ab141c1utp\"><b>问题现象</b></h4><p id=\"0f554a40c1lla\">连接Windows系统的ECS实例中的FTP服务器时，提示以下错误。</p><pre id=\"k3ddei\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>响应：331 Please specify the password.\n命令：PASS ************\n响应：530 Login incorrect.\n错误：严重错误：无法连接到服务器</code></pre></section><section id=\"7b1b0300c1hxx\" class=\"section\"><h4 id=\"768af390c1rz7\"><b>问题原因</b></h4><p id=\"a2362690c1oep\">可能是由于以下原因导致的：</p><ul id=\"b33e8092c1tvp\"><li id=\"b33e8090c1pmy\"><p id=\"b57b7840c1p5b\"><b data-tag=\"uicontrol\" id=\"13b812b0c19z5\" class=\"uicontrol\">FTP密码不正确</b>：请参考<a title=\"\" class=\"xref\" href=\"#4335f890c1rwc\">方案一：修改FTP密码</a>进行操作。</p></li><li id=\"b666c2a1c1929\"><p id=\"b99d5c90c1x67\"><b data-tag=\"uicontrol\" id=\"1577c410c16o7\" class=\"uicontrol\">FTP用户权限配置错误</b>：请参考<a title=\"\" class=\"xref\" href=\"#52992e10c11i1\">方案二：添加FTP用户权限</a>进行操作。</p></li></ul></section><section id=\"795b2a90c1kv9\" class=\"section\"><h4 id=\"775bb110c11kr\"><b>解决方案</b></h4><p id=\"d5c80e11c1piv\">请根据实际情况，选择以下两种方案进行操作。</p><p id=\"4335f890c1rwc\"><b>方案一：修改FTP密码</b></p><ol id=\"9e7a61a2c1mez\"><li id=\"9e7a61a0c1n70\"><p id=\"d3139c71c1a9a\">远程连接Windows实例。</p><p id=\"a09e7a20c1l76\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"a1e4b5c0c18nw\"><p id=\"af6dfb20c1c4z\">右键单击桌面的<b data-tag=\"uicontrol\" id=\"be203020c1dsd\" class=\"uicontrol\">计算机 &gt; 管理</b>，打开服务器管理器。</p></li><li id=\"c9a54111c1heb\"><p id=\"d28d8710c17e2\">单击左侧配置<b data-tag=\"uicontrol\" id=\"d832d710c1lsv\" class=\"uicontrol\">本地用户和组 &gt; 用户</b>，右键单击对应的FTP账号，选择<b data-tag=\"uicontrol\" id=\"d9e2f810c1ady\" class=\"uicontrol\">设置密码</b>。</p><img id=\"e0529cf0c17hx\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9246868761/p581893.png\" alt=\"image\" placement=\"break\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></li></ol><p id=\"52992e10c11i1\"><b>方案二：添加FTP用户权限</b></p><ol id=\"7c01eb21c1lt3\"><li id=\"7c01eb22c1k9h\"><p id=\"7c01eb23c17r0\">远程连接Windows实例。</p><p id=\"a3712220c1ju8\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"a467b720c1az4\"><p id=\"d6c3f2e0c15uo\">检查FTP对应的目录文件是否正常存在。</p><ol id=\"9c30df71c14fn\"><li id=\"9c078581c1l1g\"><p id=\"9c078580c1rdm\">若不存在：请参考<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/manually-build-an-ftp-site-on-a-windows-instance#section-jd9-tsn-noi\">步骤三：设置共享文件的权限</a>，重新创建FTP对应文件并添加相关权限。</p></li><li id=\"a205f201c1nfc\"><p id=\"a205f200c1vdc\">若存在：右键单击该文件夹，选择<b data-tag=\"uicontrol\" id=\"d1f0a370c1neo\" class=\"uicontrol\">属性 &gt; 安全</b>，选择对应FTP账号添加相关权限。</p><img id=\"91a1c740c1kgd\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9246868761/p581989.png\" alt=\"image\" placement=\"break\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></li></ol></li></ol></section></div></div><div id=\"3eeb4510d4c5e\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"4609f830d493z\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>连接Windows系统的ECS实例中的FTP服务器时，提示“530 valid hostname is expected”错误怎么办？</b></h4><div id=\"3eeb4512d4st0\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"3be9bd10c1917\" class=\"section\"><h4 id=\"2f25ea91c1824\"><b>问题现象</b></h4><p id=\"970cd7f1c1ezn\">通过IIS 7.5配置的FTP绑定域名后，通过IP等方式连接Windows系统的ECS实例中的FTP服务器时，提示“<b data-tag=\"uicontrol\" id=\"804791d0c1v5d\" class=\"uicontrol\">530 valid hostname is expected</b>”或者“<b data-tag=\"uicontrol\" id=\"83b2a940c1kgj\" class=\"uicontrol\">503 Login with USER first</b>”错误。</p></section><section id=\"3d3b6a60c19b6\" class=\"section\"><h4 id=\"31cacbd0c1kfx\"><b>问题原因</b></h4><p id=\"0e473c00c134a\">通过IIS 7.5配置的FTP绑定域名后，在登录FTP时，输入的域名格式不正确。</p></section><section id=\"3e93a760c1tf8\" class=\"section\"><h4 id=\"32dc62e0c19fb\"><b>解决方案</b></h4><p id=\"24441720c1e0u\">如果FTP绑定的域名是<code data-tag=\"code\" class=\"code\">www.example.com</code>，用户名为<code data-tag=\"code\" class=\"code\">user</code>，则登录时需要使用<code data-tag=\"code\" class=\"code\">www.example.com|user</code>进行登录。</p><div type=\"note\" id=\"4f382f20c1f1n\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"952e0902c1ea8\"><li id=\"952e0900c1fbe\"><p id=\"4f982970c1p8p\">注意中间用“|”分隔。</p></li><li id=\"963b8160c1e79\"><p id=\"7427e730c1frk\">您也可以将域名绑定删除，然后直接通过用户名进行登录。请参考下图进行操作。</p></li></ul></div></div><img id=\"04bec460cdrey\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3220700861/p611385.png\" alt=\"image\" placement=\"break\" class=\"image break\"></section></div></div><div id=\"3f7dc110d4ip0\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"047529e0d4uhz\" class=\"expandable-title\"><b>Windows系统的ECS实例中，通过FTP上传文件到FileZilla Server失败，提示“550 Permission denied”错误怎么办？</b></h4><div id=\"3f7dc112d4ad2\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"0dd36330d409g\" class=\"section\"><h4 id=\"0dd36331d4p8r\"><b>问题现象</b></h4><p id=\"0dd36332d4aqg\">在Windows系统的ECS实例中，通过FTP向FileZilla Server上传文件时，提示“<b data-tag=\"uicontrol\" id=\"79ee3840d7kv9\" class=\"uicontrol\">550 Permission denied</b>”错误。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1665367761/p518603.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"><h4 id=\"0dd36335d4roy\"><b>问题原因</b></h4><p id=\"0dd36336d4j0k\">FileZilla Server中相应的FTP账号没有<code data-tag=\"code\" class=\"code\">write</code>权限。</p><h4 id=\"0dd36337d4aip\"><b>解决方案</b></h4><ol id=\"0dd36338d43lj\"><li id=\"0dd36339d4b24\"><p id=\"0dd3633ad4vr0\">远程连接Windows实例。</p><p id=\"0dd3633bd43yq\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"0dd3633cd4vum\"><p id=\"0dd3633dd4gr2\">运行FileZilla Server软件。在<b data-tag=\"uicontrol\" id=\"79ee5f50d7gyf\" class=\"uicontrol\">Users</b>配置页面，选择<b data-tag=\"uicontrol\" id=\"79ee5f51d7v09\" class=\"uicontrol\">Shared folders</b>配置项。</p></li><li id=\"0dd3633ed4sj7\"><p id=\"0dd3633fd4gkn\">选择对应的用户与目录，勾选<b data-tag=\"uicontrol\" id=\"79ee5f52d772o\" class=\"uicontrol\">Write</b>单选框，单击<b data-tag=\"uicontrol\" id=\"79ee5f53d7bjt\" class=\"uicontrol\">OK</b>按钮，完成权限配置。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1665367761/p518604.png\" class=\"image break\"></li></ol></section></div></div><div id=\"eb381c80d497z\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"4a0867608421b\" class=\"expandable-title\"><b>通过FTP over TLS方式连接Windows实例上IIS服务创建的FTP站点时，提示“534 Policy requires SSL”信息，如何处理？</b></h4><div id=\"eb381c82d4j2q\" data-tag=\"expandable-content\" class=\"expandable-content\"><h4 id=\"h2-u95EEu9898u73B0u8C611\"><b>问题描述</b></h4><p id=\"93e66270a94vo\">通过FTP over TLS方式连接Windows实例上IIS服务创建的FTP站点时，提示“534 Policy requires SSL”信息，无法连接FTP站点。</p><p id=\"633c0270b3o2c\" props=\"china\" data-cond-props=\"china\">报错示例如下：</p><img id=\"93e66272a9u13\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0306106761/p559212.jpg\" alt=\"报错信息原图新\" placement=\"break\" class=\"image break\"><h4 id=\"9c876640a9qlp\"><b>问题原因</b></h4><p id=\"a39c4bd0a9l2q\">由该问题的“534 Local policy on server does not allow TLS secure connections.”响应信息可知，FTP站点的<b data-tag=\"uicontrol\" id=\"26a7d0e0a9uif\" class=\"uicontrol\">FTP SSL 设置</b>参数不正确导致该问题。</p><h4 id=\"h2-u89E3u51B3u65B9u68482\"><b>解决方案</b></h4><ol id=\"b2823b00a92aa\"><li id=\"b2823b01a9bnb\"><p id=\"b2823b02a9nlz\">远程连接Windows实例。</p><p id=\"b2823b03a9ouy\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"b2823b04a9s1z\"><p id=\"b2823b05a9d3v\">在桌面左下角，选择<img id=\"b2823b06a9wbn\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1306106761/p559246.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"> &gt; Windows<b>管理工具</b> &gt; <b>Internet Information Services（IIS）管理器</b>。<img id=\"b2823b07a9omm\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0306106761/p559243.jpg\" alt=\"打开IIS新\" placement=\"break\" class=\"image break\"></p></li><li id=\"b2823b08a9467\"><p id=\"b2823b09a9ls1\">在FTP主页的<b data-tag=\"uicontrol\" id=\"b5913010a9ken\" class=\"uicontrol\">FTP</b>区域，双击<b data-tag=\"uicontrol\" id=\"af077380a9iki\" class=\"uicontrol\">FTP SSL设置</b>。 <img id=\"b2823b0aa9ytv\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1306106761/p559293.jpg\" alt=\"FTP主页新图\" placement=\"break\" class=\"image break\"></p></li><li id=\"b2823b0ba9et5\"><p id=\"b2823b0ca9e4l\">在<b data-tag=\"uicontrol\" id=\"0d57f930a9mdc\" class=\"uicontrol\">FTP SSL设置</b>区域，将<b data-tag=\"uicontrol\" id=\"1967e830a9wek\" class=\"uicontrol\">SSL 策略</b>设置为<b data-tag=\"uicontrol\" id=\"76248110a9w8g\" class=\"uicontrol\">允许 SSL 连接</b>，然后在<b data-tag=\"uicontrol\" id=\"8c5978a0a90cg\" class=\"uicontrol\">操作</b>列单击<b data-tag=\"uicontrol\" id=\"8f3f5a80a98g5\" class=\"uicontrol\">应用</b>。 <img id=\"b2823b0da9eug\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1306106761/p559300.jpg\" alt=\"勾选SSL连接新图\" placement=\"break\" class=\"image break\"></p></li><li id=\"b2823b0ea9g8p\"><p id=\"b2823b0fa93v0\">再次访问该FTP站点。</p></li></ol></div></div></li><li id=\"02a1cca0d41xo\"><p id=\"02ed5490d4f6z\">Linux实例</p><div id=\"3f36cd02d4lbt\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"60b89100d48gf\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>上传文件到Linux系统的ECS实例中的FTP站点时，提示“425 Security:Bad IP connection”错误怎么办？</b></h4><div id=\"3f36cd04d4ldn\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"f6065cf0c1nh9\" class=\"section\"><h4 id=\"e4370971c1qfz\"><b>问题现象</b></h4><p id=\"111da2a0c1alm\">用户上传文件到Linux系统的ECS实例中的FTP站点时，提示“<b data-tag=\"uicontrol\" id=\"22c88af0c134i\" class=\"uicontrol\">425 Security:Bad IP connection</b>”错误。</p></section><section id=\"f371f670c1bf6\" class=\"section\"><h4 id=\"e7350730c1oqu\"><b>问题原因</b></h4><p id=\"d6ff6680c1jkw\">该问题通常是由于客户端处于NAT网络，而NAT网络关联的公网IP不止一个，导致两次连接时，源IP不一致导致报错。</p><div type=\"note\" id=\"45528da0c14o2\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"457a12d0c1xvk\">FTP服务同时拥有两个连接，一个是控制连接，一个是数据连接。在默认情况下，数据传输时FTP服务器端会核实两个连接的源IP是否一致，如果不一致，就会报“<b data-tag=\"uicontrol\" id=\"3df1d200c1l4q\" class=\"uicontrol\">425 Security:Bad IP connection</b>”错误。</p></div></div></section><section id=\"f219b970c1qju\" class=\"section\"><h4 id=\"e8628ab0c1ri1\"><b>解决方案</b></h4><p id=\"8a17d6c0c15vl\">请参考以下操作，关闭被动模式下的IP安全检查。</p><ol id=\"d6ff8d91c1p4b\"><li id=\"d6ff8d92c1z47\"><p id=\"d6ff8d93c1itw\">远程连接Linux实例。</p><p id=\"b4e6da90c1dgn\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"b0135981c1r1i\"><p id=\"b0135980c1d1w\">执行如下命令，编辑FTP配置文件。</p><pre data-tag=\"codeblock\" id=\"d6faf9b1c1oz4\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vi /etc/vsftpd/vsftpd.conf</code></pre></li><li id=\"d6ff8d95c1sf2\"><p id=\"d6ffb4a0c13e8\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式，在配置文件中添加如下内容。</p><pre id=\"gbvwgf\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>pasv_promiscuous=yes</code></pre></li><li id=\"d6ffb4a2c1oqm\"><p id=\"d6ffb4a3c16cz\">编辑完成后，按<code data-tag=\"code\" class=\"code\">Esc</code>键退出编辑模式，然后输入<code data-tag=\"code\" class=\"code\">:wq</code>并按回车键保存退出。</p></li><li id=\"3bf28a20c1i01\"><p id=\"3bf26310c1hl6\">执行如下命令，重启FTP服务。</p><pre id=\"64hdwk\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart vsftpd</code></pre></li></ol></section></div></div><div id=\"eb8ea0f0d4wj6\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"961807f0d4t0m\" class=\"expandable-title\"><b>Linux系统的ECS实例通过vsftp上传文件失败，提示“553 Could not create file”错误怎么办？</b></h4><div id=\"eb8ea0f2d4t10\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"9d95e880d4r90\" class=\"section\"><h4 id=\"9d95e881d41t0\"><b>问题现象</b></h4><p id=\"9d95e882d4cz4\">Linux系统的ECS实例通过vsftp上传文件失败，提示“<b data-tag=\"uicontrol\" id=\"79ef70c0d7jji\" class=\"uicontrol\">553 Could not create file</b>”错误。</p></section><section id=\"9d95e883d4mfw\" class=\"section\"><h4 id=\"9d95e884d4msk\"><b>问题原因</b></h4><p id=\"9d95e885d456c\">可能由于以下原因导致：</p><ul id=\"9d95e886d494a\"><li id=\"9d95e887d4zbj\"><p id=\"9d95e888d4f6s\">Linux实例磁盘空间已满。</p></li><li id=\"9d95e889d4r7d\"><p id=\"9d95e88ad47iy\">FTP<code data-tag=\"code\" class=\"code\">home</code>目录未拥有<code data-tag=\"code\" class=\"code\">write</code>权限。</p></li></ul></section><section id=\"9d95e88bd4p64\" class=\"section\"><h4 id=\"9d95e88cd4w0l\"><b>解决方案</b></h4><p id=\"9d95e88dd4wdk\">请参考以下操作排查Linux实例磁盘空间大小及FTP<code data-tag=\"code\" class=\"code\">home</code>目录拥有权限情况。</p><ol id=\"9d95e88ed4pyt\"><li id=\"9d95e88fd4dgo\"><p id=\"9d95e890d4iln\">远程连接Linux实例。</p><p id=\"9d95e891d4it8\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"9d95e892d4nwd\"><p id=\"9d95e893d4uj9\">执行如下命令，确认是否为Linux实例磁盘空间已满，导致文件无法上传提示该错误。</p><pre data-tag=\"codeblock\" id=\"9d95e894d49yu\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>df -h</code></pre><div type=\"note\" id=\"9d95e895d44iy\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"9d95e896d413r\">磁盘分区空间使用率达到100%则表示该磁盘空间已满。</p></div></div><p id=\"9d95e897d47fn\"> 系统显示类似如下信息。例如，分区<code data-tag=\"code\" class=\"code\">/dev/xvda1</code>的使用率为59%。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4279227761/p519183.png\" class=\"image break\"></li><li id=\"9d95e89ad4umo\"><p id=\"9d95e89bd4eik\">执行如下命令，确认FTP<code data-tag=\"code\" class=\"code\">home</code>目录是否拥有<code data-tag=\"code\" class=\"code\">write</code>权限。</p><div type=\"note\" id=\"9d95e89cd4qfe\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"9d95e89dd4eyc\" class=\"p\">执行后续命令前，请根据实际情况，更换<code data-tag=\"code\" class=\"code\">/home/user</code>目录为您实际FTP的<code data-tag=\"code\" class=\"code\">home</code>目录名称。</p></div></div><pre data-tag=\"codeblock\" id=\"9d95e89ed4fvj\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls -l /home/user</code></pre><p id=\"9d95e89fd4784\">如下图红框中的权限没有<code data-tag=\"code\" class=\"code\">w</code>，则代表您当前没有<code data-tag=\"code\" class=\"code\">write</code>权限。</p><img id=\"9d95e8a1d4jtu\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9010808761/p575824.png\" alt=\"1111\" placement=\"break\" class=\"image break\"></li><li id=\"9d95e8a2d4lx4\"><p id=\"9d95e8a3d4id9\">执行如下命令，添加<code data-tag=\"code\" class=\"code\">write</code>权限并保存。 </p><pre data-tag=\"codeblock\" id=\"9d95e8a4d4p1x\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chmod +w /home/user</code></pre></li><li id=\"9d95e8a5d4ini\"><p id=\"9d95e8a6d4awf\">执行如下命令，若命令执行结果中存在<code data-tag=\"code\" class=\"code\">w</code>，则表示<code data-tag=\"code\" class=\"code\">write</code>权限添加成功。</p><pre id=\"2e79gc\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls -l /home/user</code></pre></li></ol></section></div></div></li></ul></section><section id=\"511e28f0dcll9\" class=\"section\"><h2 id=\"01fa7940d4g09\"><b>其他问题</b></h2><div id=\"3c13bb10d4knb\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"7cd2a4b08fb8i\" class=\"expandable-title\"><b>部署在ECS实例中的微信公众平台Token验证失败怎么办？</b></h4><div id=\"3c13bb12d4dl9\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"b5356f00bb5t7\" class=\"section\"><h4 id=\"6bc43e61\"><b>问题现象</b></h4><p id=\"7cd2cbc18fnzd\">部署在ECS实例中的微信公众平台Token验证显示失败。</p><img height=\"274\" width=\"475\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5118623761/p519344.png\" class=\"image break\"><h4 id=\"a8e636708fig5\"><b>问题原因</b></h4><p id=\"f96f6e408fbmo\">常见的可能原因如下：</p><ul id=\"f96f6e418fhgf\"><li id=\"f96f6e428fkpl\"><p id=\"f96f6e438fhdo\">非正常编辑文件，如记事本、在线编辑等操作导致文件中添加了utf8的bom签名。 \n</p></li><li id=\"f96f6e558fkhg\"><p id=\"f96f6e568fpma\">ECS实例如果安装了安全狗或者云安全中心，会拦截腾讯服务器的请求。\n</p></li><li id=\"f96f6e5b8f7c7\"><p id=\"f96f6e5c8f5sx\">虚拟主机使用临时域名去验证导致被系统拦截，适用于万网的虚拟主机。</p></li><li id=\"1abbbbc1bcrh4\"><p id=\"1aeeb2a0bcpf1\">PHP文件结束符后包含换行或其他字符。</p></li><li id=\"f96f6e618fbub\"><p id=\"f96f6e628fnf0\">使用了其他的调试验证方法。</p></li><li id=\"13fc9750bcc3n\"><p id=\"13fc7040bc5a0\">程序Gzip加密异常。\n</p></li></ul><h4 id=\"bJiYs\"><b>解决方案</b></h4><p id=\"7cd2cbc28fdsp\">常见原因对应建议处理办法如下：</p><ul id=\"9ed17e9cd4zka\"><li id=\"9ed17e91d4417\"><p id=\"7cd2f2d18f2dc\"><b>非正常编辑文件，如记事本、在线编辑等</b></p><p id=\"7cd2f2d48fmwb\">建议使用多功能编辑器去除bom。</p></li><li id=\"d64bc3d0d42b8\"><p id=\"d64bc3d1d4h7e\"><b>ECS实例安装了安全狗或者云安全中心</b></p><p id=\"7cd340f48f9ov\">建议卸载安全狗，或者提示云安全中心设置白名单。</p></li><li id=\"d5675740d4odf\"><p id=\"d5675741d4inp\"><b>虚拟主机使用临时域名去验证</b></p><p id=\"7cd340fa8frlp\">建议使用已经接入阿里云备案的正式域名来进行验证操作。</p></li><li id=\"d42401d0d4co0\"><p id=\"d42401d1d4cic\"><b>PHP文件结束符后包含换行或其他字符</b></p><p id=\"a4ddb690bcxjo\">建议去除多余的字符。</p></li><li id=\"d2fa27d0d43k9\"><p id=\"d2fa27d1d45x5\"><b>使用了其他的调试验证方法</b></p><p id=\"d2fa27d2d4uno\">执行<code data-tag=\"code\" class=\"code\">curl http://xxx/index.php/api/xx</code>命令，进行调试验证，模拟微信请求API，并对此进行分析。</p></li><li id=\"d2fa27d3d4b8o\"><p id=\"d2fa27d4d4cej\"><b>程序Gzip加密异常</b></p><p id=\"d2fa27d5d4cgl\">建议临时取消程序Gzip功能，进行测试排查。</p></li></ul></section></div></div><div id=\"7b22dfc4d48xl\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"f10891908bp7f\" class=\"expandable-title\"><b>Liunx系统的ECS实例中文字显示乱码怎么办？</b></h4><div id=\"7b22dfc2d41mb\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"37752cb0beh5n\" class=\"section\"><h4 id=\"84679da1d48y6\"><b>问题现象</b></h4><p id=\"f108dfb38ba96\">通过第三方SSH客户端远程连接Linux系统的阿里云Linux系统的ECS实例时，发现中文字体显示乱码。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6172082761/p519950.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></section><section id=\"398966b0be1u4\" class=\"section\"><h4 id=\"84679da6d4054\"><b>问题原因</b></h4><p id=\"f108dfb58b2h8\">造成该问题的可能原因如下：</p><ul id=\"f108dfb68bsuy\"><li id=\"f10906c08bh44\"><p id=\"f10906c18b0db\">Liunx系统未安装中文字体：Liunx系统语言默认不支持中文显示，需要单独安装中文语言包使系统支持中文显示，请参考<a title=\"\" class=\"xref\" href=\"#f1092dd48btvt\">方案一：在Linux系统中安装中文语言包</a>进行修复。</p></li><li id=\"f10906c28bzvv\"><p id=\"f10906c38bdro\">第三方SSH客户端工具字符集设置问题，请参考<a title=\"\" class=\"xref\" href=\"#f109a3088bef2\">方案二：修改第三方SSH客户端工具字符集设置</a>进行修复。</p></li></ul></section><section id=\"3f3fa6a0be6ue\" class=\"section\"><h4 id=\"84679daed4782\"><b>解决方案</b></h4><p id=\"54d17ad1be4lo\">根据实际情况，选择对应方案进行操作。</p><section id=\"4f232fb0be3hf\" class=\"section\"><p data-tag=\"h3\" id=\"f1092dd48btvt\" class=\"h3\"><b>方案一：在Linux系统的ECS实例中安装中文语言包</b></p><p data-spm-anchor-id=\"a2c9r.14518950.0.i8.45c17962UXYBiA\" id=\"f10954e08bwst\">下列操作以CentOS 7.8操作系统为例，其它版本的CentOS系统或者其他发行版本（如Redhat、Debian、Ubuntu等）对应的配置和命令行请参阅相应的官方文档。</p><div type=\"note\" id=\"0c4f4ee18bd0i\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-spm-anchor-id=\"a2c9r.14518950.0.i8.45c17962UXYBiA\" id=\"09a3b6e08b887\">CentOS 6与CentOS 8操作系统版本结束了生命周期（EOL），按照社区规则，CentOS 6/8的源地址内容已移除。当您在CentOS 6/8系统内继续使用默认配置的源地址时会发生报错。建议您先切换CentOS 6/8的源地址，然后再进行操作。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-the-centos-6-source-address\">CentOS 6 EOL如何切换源？</a>和<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-centos-8-repository-addresses\">CentOS 8 EOL如何切换源？</a>。</p></div></div><ol id=\"f10954e48bznd\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i3.c5545e3b7heQhu\" id=\"f10954e58brgb\"><p id=\"f10954e68bku9\">远程连接Linux实例。</p><p id=\"9e091230behkv\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"f10954e78brs7\"><p id=\"f10954e88bqol\">执行以下命令，查询当前系统使用的语言。</p><pre id=\"l994cg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>echo $LANG</code></pre><div id=\"f479dda0be9fk\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"003010b3bebsn\"><li id=\"003010b0bemj1\"><p id=\"ea59d930beswf\">如果为英文，请继续执行步骤3。</p></li><li id=\"003010b1bes6l\"><p id=\"da793650be3p7\">如果为中文，说明该Linux系统的ECS实例已安装中文语言包，排除因Liunx系统未安装中文字体导致文字显示乱码的原因，请参考<a title=\"\" class=\"xref\" href=\"#f109a3088bef2\">方案二：修改第三方SSH客户端工具字符集设置</a>继续执行操作。</p></li></ul></div></div></li><li id=\"f1097bf18b3t3\"><p id=\"f1097bf28b503\">执行以下命令，查看当前系统是否安装中文语言包。 </p><pre id=\"f100a2528bru5\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>locale -a | grep \"zh_CN\"</code></pre><p id=\"f1097bf38bg7x\"> 系统显示类似如下，zh表示中文，CN表示中国，gb18030、gb2312、gbk、utf8为字符集。 </p><pre id=\"f100a2538bwtz\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>zh_CN\nzh_CN.gb18030\nzh_CN.gb2312\nzh_CN.gbk\nzh_CN.utf8</code></pre><p id=\"f1097bf48b8by\"> 若未安装中文语言包，请执行以下命令安装。 </p><pre id=\"f100a2548bucx\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sudo yum groupinstall \"fonts\"</code></pre></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i14.1d3b5e3bnrScYp\" id=\"f1097bf68be9t\"><p id=\"f1097bf78bjww\">执行以下命令，编辑<code data-tag=\"code\" class=\"code\">/etc/locale.conf</code>配置文件。 </p><pre id=\"f100a2558b9q9\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/locale.conf</code></pre><ol id=\"f1097bf88b8ok\"><li id=\"f1097bf98bt3w\"><p id=\"84679dced4pjj\">按<code data-tag=\"code\" class=\"code\">i</code>键切换至编辑模式，将<code data-tag=\"code\" class=\"code\">LANG=en_US.UTF-8</code>修改为<code data-tag=\"code\" class=\"code\">LANG=zh_CN.UTF-8</code>，将当前系统语言修改为中文。</p></li><li id=\"f1097bfb8b7kg\"><p id=\"84679dd0d4hqh\">修改完成后，按下<code data-tag=\"code\" class=\"code\">Esc</code>键后，输入<code data-tag=\"code\" class=\"code\">:wq</code>并回车，保存并关闭配置文件。</p></li></ol></li><li id=\"f109a3008bwe0\"><p id=\"f109a3018bs8h\">执行以下命令，使配置生效。</p><pre id=\"f100a2578bczj\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>source /etc/locale.conf</code></pre></li><li id=\"f109a3038bhex\"><p id=\"f109a3048bvr8\">执行以下命令，重启服务器。</p><pre id=\"f100a2588bxjk\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>reboot</code></pre></li><li id=\"f109a3068b6f5\"><p id=\"f109a3078bosg\">（可选）若重启服务器后，当前系统语言仍显示为英文，请执行以下命令，编辑<code data-tag=\"code\" class=\"code\">/etc/profile.d/lang.sh</code>配置文件。</p><pre id=\"13bvze\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/profile.d/lang.sh</code></pre><ol id=\"54d3cf51be5nd\"><li id=\"54269f61bephd\"><p id=\"54269f60be3ao\">按<code data-tag=\"code\" class=\"code\">i</code>键切换至编辑模式，将<code data-tag=\"code\" class=\"code\">zh*) LANG=en_US.UTF-8</code>修改为<code data-tag=\"code\" class=\"code\">zh*) LANG=zh_CN.UTF-8</code>，修改之后的内容如下图所示。<img width=\"422\" alt=\"Dingtalk_20210709104253.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6172082761/p519951.png\" id=\"87e508b18br85\" class=\"image break\"></p></li><li id=\"87840961beeem\"><p id=\"904b59e0beywi\">修改完成后，按下<code data-tag=\"code\" class=\"code\">Esc</code>键后，输入<code data-tag=\"code\" class=\"code\">:wq</code>并回车，保存并关闭配置文件。</p></li><li id=\"bd57a380be56t\"><p id=\"c0340f80bemqr\">执行以下命令，重启服务器。</p><pre id=\"30cepd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>reboot</code></pre></li></ol></li></ol></section><section id=\"41ccba20befkc\" class=\"section\"><p data-tag=\"h3\" id=\"f109a3088bef2\" class=\"h3\"><b>方案二：修改第三方SSH客户端工具字符集设置</b></p><p id=\"f109a3098bkt9\">以下操作以XShell客户端为例，介绍如何修改XShell客户端工具字符集设置。</p><ol id=\"000b98d1beld3\"><li id=\"e9aea6e0beurr\"><p id=\"e9ae7fd0beqvx\">打开XShell客户端。</p></li><li id=\"a21f5be18bumy\"><p id=\"a21f5be08b5ft\">在XShell客户端页面，将<b data-tag=\"uicontrol\" id=\"a94e5079bec8i\" class=\"uicontrol\">默认语言</b>设置为<b data-tag=\"uicontrol\" id=\"a94e507bbeinf\" class=\"uicontrol\">Unicode (UTF-8)</b>。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6172082761/p519952.png\" id=\"13d577618baoo\" width=\"550\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></li><li id=\"1613f5b18bqon\"><p id=\"1613f5b08b59t\">重新登录实例，若不再出现以上错误，则表示问题已修复。</p></li></ol></section></section></div></div></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/troubleshooting-windows-low-virtual-memory-problem", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></span>\n <span>如何处理Windows Server 2003/2008系统的ECS实例虚拟内存不足问题？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>如何处理Windows Server 2003/2008系统的ECS实例虚拟内存不足问题？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 15:56:20</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"073e88c087wob\"><p data-tag=\"shortdesc\" id=\"074b0be087zj0\" class=\"shortdesc\">本文介绍Windows Server 2003/2008系统的ECS实例虚拟内存不足导致的问题及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"ace3c000b54d1\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p data-spm-anchor-id=\"a2c9r.12641768.0.i9.1f225ZUD5ZUDvz\" id=\"074b32f3879yn\">一般而言，Windows Server 2003/2008系统的ECS实例缺少虚拟内存时会引起很多问题，包含但不限于如下现象：</p><ul id=\"074b32f487j51\"><li data-spm-anchor-id=\"a2c9r.12641768.0.i9.1f225ZUD5ZUDvz\" id=\"074b32f5872mh\"><p id=\"074b32f687tso\">操作系统运行缓慢，甚至出现宕机，远程桌面连接实例时出现蓝色背景界面。</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i9.1f225ZUD5ZUDvz\" id=\"074b32f787uh8\"><p id=\"074b5a0087ys2\">VNC连接实例时输入用户名、密码后，无法登录到操作系统，卡在<b data-tag=\"uicontrol\" id=\"59fdeb60b6340\" class=\"uicontrol\">欢迎</b>界面。</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i9.1f225ZUD5ZUDvz\" id=\"074b5a0187kc9\"><p id=\"074b5a0287yx5\">无法使用远程桌面连接实例，提示<b data-tag=\"uicontrol\" id=\"a7a80b00b6vgf\" class=\"uicontrol\">页面文件太小，无法完成操作</b>错误信息。</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i9.1f225ZUD5ZUDvz\" id=\"074b5a0387s2n\"><p id=\"074b5a0487k3o\">安装服务失败，例如安装IIS、.NET Framework、FTP提示<b data-tag=\"uicontrol\" id=\"b6a293a0b63wu\" class=\"uicontrol\">资源不足</b>，或者安装进程卡住。</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i9.1f225ZUD5ZUDvz\" id=\"074b5a0587h7c\"><p id=\"074b5a0687h84\">安装三方服务，例如MySQL服务安装失败，或者安装完毕后无法启动。</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i9.1f225ZUD5ZUDvz\" id=\"074b5a0787kdt\"><p id=\"074b5a08872uk\">Windows Update无法更新。</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i9.1f225ZUD5ZUDvz\" id=\"074b5a098759i\"><p id=\"074b5a0a87t41\">系统提示<b data-tag=\"uicontrol\" id=\"bc9910e0b6tp7\" class=\"uicontrol\">虚拟内存不足</b>错误信息，应用程序由于内存分配出现异常关闭的情况。</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i9.1f225ZUD5ZUDvz\" id=\"074b811087nqf\"><p id=\"074b811187a8s\">打开服务器管理器时，提示<b data-tag=\"uicontrol\" id=\"c6adf000b6y61\" class=\"uicontrol\">MMC在一个管理单元检测到错误，请卸载此管理单元</b>。</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i9.1f225ZUD5ZUDvz\" id=\"074b811287fs8\"><p id=\"074b811387zu7\">服务器管理器控制台打开后自动关闭，提示<b data-tag=\"uicontrol\" id=\"8b443530b60t0\" class=\"uicontrol\">Microsoft管理控制台已停止工作</b>。</p></li></ul><p id=\"074b811487f5f\">上述问题具体的报错图请参见<a title=\"\" class=\"xref\" href=\"#efe58730b58it\">常见虚拟内存不足问题现象</a>。</p></section><section id=\"b0407f90b5hoa\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p data-spm-anchor-id=\"a2c9r.12641768.0.i29.1f225ZUD5ZUDvz\" id=\"074bcf30875r9\">出现系统虚拟内存耗尽的可能有以下原因。</p><ul id=\"074bcf31873pm\"><li data-spm-anchor-id=\"a2c9r.12641768.0.i29.1f225ZUD5ZUDvz\" id=\"074bcf3287lfw\"><p id=\"074bcf3387765\">系统物理内存资源不足。</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i29.1f225ZUD5ZUDvz\" id=\"074bcf3487jd3\"><p id=\"074bcf3587rpj\">系统未配置Paging File（页面文件）或者页面文件配置较小。</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i29.1f225ZUD5ZUDvz\" id=\"074bcf3687lqq\"><p id=\"074bcf3787b2l\">系统存在内存泄露，即包含其他各类可能的核心资源泄露。 \n</p></li></ul><div id=\"6f176730b8emi\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"07bbe000b61pg\">在Windows操作系统中，内核以及应用程序是通过虚拟内存来进行内存管理和使用。由于物理内存是有限的资源，Windows引入了Paging File（页面文件）实现虚拟内存。以32位操作系统为例，每个进程有自己2 GiB专用的用户态虚拟地址空间。当现有的所有进程正在使用的内存超出了可用的物理内存时，操作系统将页（4 KiB）的一个或多个虚拟地址空间移动到计算机的硬盘，而后释放物理内存用于其他用途。在Windows系统中，这些被移动出物理内存的页（paged out）存储在一个或多个文件（Pagefile.sys页面文件）分区的根目录中。</p><p data-spm-anchor-id=\"a2c9r.12641768.0.i8.1f225ZUD5ZUDvz\" id=\"07bbe001b6fa7\">相比于Linux系统，Windows系统由于图形化界面操作相对容易而受到许多用户的青睐，在购买ECS实例时，需要至少1 GiB内存才能选择Windows系统，1 GiB内存对于系统运行来说是足够了，但是在配置环境、安装更多软件后就会出现内存不足的情况。</p></div></div></section><section id=\"e58c8070b6nn4\" class=\"section\"><h2 id=\"n49mj\">解决方案</h2><section id=\"f7691a60b6ldk\" class=\"section\"><h3 data-tag=\"h3\" id=\"074c1d5887sr1\" class=\"h3\"><b>步骤一：检查内存不足问题</b></h3><p id=\"074c1d5987vy7\">出现操作系统虚拟内存不足问题时，您可以通过检查系统日志或任务管理器查看。</p><section id=\"f37746c0b6f1g\" class=\"section\"><h4 data-tag=\"h4\" id=\"074c1d5a87xmw\" class=\"h4\"><b>方法一：检查系统日志</b></h4><ol id=\"074c1d5b87m39\"><li id=\"074c446087uqd\"><p id=\"074c446187ih0\">远程连接Windows Server 2003/2008系统的ECS实例。</p><p id=\"02de82a0b6jmc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"61be5760b65uq\"><p id=\"61be3050b60b9\">打开运行窗口，输入<b data-tag=\"uicontrol\" id=\"1e9a6cc0b64ah\" class=\"uicontrol\">eventvwr.exe</b>，单击<b data-tag=\"uicontrol\" id=\"1d250ad0b6xma\" class=\"uicontrol\">确定</b>。</p><img id=\"2661e400b6b08\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p573622.png\" alt=\"eventvwr\" placement=\"break\" class=\"image break\"></li><li id=\"169c1c21b6z48\"><p id=\"169c1c20b6s0v\">在<b data-tag=\"uicontrol\" id=\"35768450b6ken\" class=\"uicontrol\">事件查看器</b>页面，选择<b data-tag=\"uicontrol\" id=\"458b0870b6ojr\" class=\"uicontrol\">Windows日志&gt;系统</b>。</p></li><li id=\"480927d1b63vp\"><p id=\"480927d0b66e6\">在系统日志中找到<b data-tag=\"uicontrol\" id=\"5989e620b6ls2\" class=\"uicontrol\">事件2004，Resource-Exhaustion-Detector</b>的系统事件。 </p><img id=\"4eb03af0b6202\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p573631.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li><li id=\"074c446287dqz\"><p id=\"074c446387pax\">单击该事件，即可查看虚拟内存不足事件的具体信息。</p><p id=\"76c527d0b6o83\">具体信息如下所示，表示<b data-tag=\"uicontrol\" id=\"66bb7920b6cza\" class=\"uicontrol\">mysqld.exe</b>占用虚拟内存较多，</p></li></ol></section><section id=\"f083d050b6oz1\" class=\"section\"><h4 data-tag=\"h4\" id=\"074c446487joz\" class=\"h4\"><b>方法二：检查任务管理器</b></h4><ol id=\"f0ed20d0b6s2l\"><li id=\"f0ed20d1b6lzp\"><p id=\"f0ed20d2b6obh\">远程连接Windows Server 2003/2008系统的ECS实例。</p><p id=\"f0ed20d3b6ke9\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"fbecd521b65su\"><p id=\"fbecd520b6wmi\">右键单击任务栏，选择<b data-tag=\"uicontrol\" id=\"3a3dbe70b6cra\" class=\"uicontrol\">启动任务管理器(k)</b>。</p></li><li id=\"f1c5cd91b6nu0\"><p id=\"f1c5cd90b6jg7\">在<b data-tag=\"uicontrol\" id=\"b5517700b6sce\" class=\"uicontrol\">Windows 任务管理器</b>页面，单击<b data-tag=\"uicontrol\" id=\"b250e130b63o8\" class=\"uicontrol\">性能</b>，查看已提交内存与虚拟内存的比例。</p><p id=\"c485d450b646m\">如下图所示，提交(MB)=已提交虚拟内存/虚拟内存上限，即图中<b data-tag=\"uicontrol\" id=\"f811c860b6qd1\" class=\"uicontrol\">3790/4093</b>，已经超过<b data-tag=\"uicontrol\" id=\"faba0500b6pto\" class=\"uicontrol\">80%</b>，根据微软官方文档说明，系统内存不足，需要增加更多的内存。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519020.png\" class=\"image break\"></li></ol></section></section><section id=\"f9a80de0b62tk\" class=\"section\"><h3 data-tag=\"h3\" id=\"d000b6a0b6h7f\" class=\"h3\">步骤二：处理内存不足问题</h3><p id=\"074c6b7187ogg\">出现内存不足问题时，请尝试以下方案解决问题：</p><ul id=\"074c6b7287and\"><li id=\"074c6b7387ccu\"><p id=\"074c6b7487013\">方法一：由于默认系统没有配置Paging File，请您手动配置Paging File。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-configure-the-virtual-memory-of-a-windows-instance\">如何配置Windows系统的虚拟内存</a>。</p></li><li id=\"074c928087cu4\"><p id=\"074c928187ncz\">方法二：如果配置Paging File后，仍然出现内存不足情况，有以下2种可能。 \n</p><ul id=\"074c928287ig2\"><li id=\"074c928387ozx\"><p id=\"074c9284876uq\">应用程序对内存要求高，请升级实例规格，调高ECS的物理内存，同时相应的增加Paging file。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-of-instance-configuration-changes\">升降配方式概述</a>。</p></li><li id=\"074c928587fee\"><p id=\"074cb99087hea\">请排查请是否有内存泄露，具体操作，请参见如下微软官方博客的排查方法。 \n</p><ul id=\"074cb991879ln\"><li id=\"074cb992873ai\"><p id=\"074cb993875bk\"><a class=\"\" target=\"_blank\" href=\"https://learn.microsoft.com/en-us/archive/blogs/apgceps/47\">检查系统页面交换文件的使用</a></p></li><li id=\"074cb99487hdi\"><p id=\"074cb99587gyk\"><a class=\"\" target=\"_blank\" href=\"https://learn.microsoft.com/zh-cn/archive/blogs/apgceps/32\">内存问题排错概要 – 第一部分</a></p></li><li id=\"074ce0a0877b1\"><p id=\"074ce0a187yao\"><a class=\"\" target=\"_blank\" href=\"https://learn.microsoft.com/zh-cn/archive/blogs/apgceps/31\">内存问题排错概览 – 第二部分</a></p></li></ul></li></ul></li></ul></section></section><section id=\"efe58730b58it\" class=\"section\"><h2 id=\"8Yczx\">常见虚拟内存不足问题现象</h2><p id=\"074d07b087wl1\">虚拟内存不足引起的各类异常情况，如下所示。</p><ul id=\"074d07b187ich\"><li id=\"074d07b287s3j\"><p id=\"074d07b387rcr\">远程登录显示蓝屏。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519021.png\" class=\"image break\"></li><li id=\"074d07b48771i\"><p id=\"074d07b58790e\">远程登录提示页面文件太小。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519022.png\" class=\"image break\"></li><li id=\"074d07b6873tt\"><p id=\"074d07b787ewv\">控制台连接管理终端登录服务器卡在<b data-tag=\"uicontrol\" id=\"24cfe670b8j4w\" class=\"uicontrol\">欢迎</b>页面。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519023.png\" class=\"image break\"></p></li><li id=\"074d07b887sl0\"><p id=\"074d2ec087i5m\">安装IIS提示<b data-tag=\"uicontrol\" id=\"c3a44690b6c77\" class=\"uicontrol\">系统资源不足</b>。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519024.png\" class=\"image break\"></li><li id=\"074d2ec1879na\"><p id=\"074d2ec287cne\">安装.NET Framework、FTP时提示<b data-tag=\"uicontrol\" id=\"c60f7a30b6q9k\" class=\"uicontrol\">系统资源不足</b>。</p><img height=\"434\" width=\"640\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519025.png\" class=\"image break\"></li><li id=\"074d2ec38703w\"><p id=\"074d2ec487g0o\">Windows 2008一键安装MySQL安装包时错误以及安装完成后MySQL无法启动。 <img height=\"340\" width=\"635\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519026.png\" class=\"image break\"></p></li><li id=\"074d2ec5876bz\"><p id=\"074d2ec687cjh\">其他方法安装MySQL卡住。</p><img height=\"493\" width=\"660\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519027.png\" class=\"image break\"></li><li id=\"074d55d0878qf\"><p id=\"074d55d187anh\">安装WAMP后，启动wampmysqld服务时，提示<b data-tag=\"uicontrol\" id=\"e04bf040b60ch\" class=\"uicontrol\">在本地计算机无法启动wampmysqld服务</b>。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519028.png\" class=\"image break\"></li><li id=\"074d55d287s78\"><p id=\"074d55d387n5a\">添加角色时，提示<b data-tag=\"uicontrol\" id=\"ec39fc30b6mt9\" class=\"uicontrol\">页面文件太小，无法完成操作</b>。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519029.png\" class=\"image break\"></p></li><li id=\"074d55d487ig4\"><p id=\"074d55d587r6e\">打开<b data-tag=\"uicontrol\" id=\"8dd0a0e0b6g6u\" class=\"uicontrol\">服务器管理器</b>后自动关闭，提示<b data-tag=\"uicontrol\" id=\"eea58021b6yz7\" class=\"uicontrol\">Microsoft管理控制台已停止工作</b>。</p><img height=\"351\" width=\"558\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519030.png\" class=\"image break\"></li><li id=\"074d55d687xvz\"><p id=\"074d55d787g7d\">打开<b data-tag=\"uicontrol\" id=\"90916e90b69ti\" class=\"uicontrol\">服务器管理器</b>时，提示<b data-tag=\"uicontrol\" id=\"eea58022b6pla\" class=\"uicontrol\">MMC在一个管理单元检测到错误，请卸载此管理单元</b>。</p><img height=\"284\" width=\"573\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519031.png\" class=\"image break\"></li><li id=\"074d7ce087qdv\"><p id=\"074d7ce187n5e\">启动Tomcat时提示<b data-tag=\"uicontrol\" id=\"0f0a7dc0b6m31\" class=\"uicontrol\">Windows-虚拟内存不足</b>。</p><img height=\"151\" width=\"408\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519032.png\" class=\"image break\"></li><li id=\"074d7ce2875rn\"><p id=\"074d7ce387kir\">使用VNC远程连接实例时，提示“<b data-tag=\"uicontrol\" id=\"53e22750b6f62\" class=\"uicontrol\">您的系统虚拟内存不足</b>”错误信息。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519033.png\" class=\"image break\"></p></li><li id=\"074d7ce487ngb\"><p id=\"074d7ce587n33\">安装SQL Server 2008安装卡住。</p><img height=\"445\" width=\"592\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519034.png\" class=\"image break\"></li></ul></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-agreement", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span>相关协议</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>相关协议</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-27 10:51:50</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2314757\"><div data-tag=\"body\" class=\"body\"><ul id=\"5ef28b72c9xlm\"><li id=\"5ef28b70c94ee\"><p data-tag=\"p\" id=\"p-cmv-wg7-ndi\" class=\"p\"><a class=\"\" target=\"_blank\" href=\"http://terms.aliyun.com/legal-agreement/terms/suit_bu1_ali_cloud/suit_bu1_ali_cloud201802111644_54047.html\">阿里云云服务器服务协议</a></p></li><li id=\"86728b51c99h7\"><p id=\"86728b50c9xj2\"><a class=\"\" target=\"_blank\" href=\"http://terms.aliyun.com/legal-agreement/terms/suit_bu1_ali_cloud/suit_bu1_ali_cloud201909241949_62160.html\">云服务器ECS服务等级协议 </a></p></li><li id=\"b495ea41c9noe\"><p id=\"b495ea40c91g6\"><a class=\"\" target=\"_blank\" href=\"https://terms.alicdn.com/legal-agreement/terms/ali_cloud_sla/ali_cloud_sla202105192339_42642.html\">云服务器ECS服务等级协议（本地地域版）</a></p></li><li id=\"b5a118b1c9xfy\"><p data-tag=\"p\" id=\"p-ohf-gwf-22x\" class=\"p\"><a class=\"xref\" target=\"_blank\" href=\"https://terms.aliyun.com/legal-agreement/terms/suit_bu1_ali_cloud/suit_bu1_ali_cloud202002191642_86161.html?spm=a2c4g.11186623.0.0.159c24a2MWr2ju\">申请续用Windows Server 2008 镜像服务协议</a></p></li><li id=\"c1e6ba81c9rlq\"><p id=\"c1e6ba80c9l0j\"><a class=\"\" target=\"_blank\" href=\"https://terms.aliyun.com/legal-agreement/terms/suit_bu1_ali_cloud/suit_bu1_ali_cloud202109291804_24071.html\">申请续用Windows Server 2003 镜像服务协议</a></p></li><li id=\"e1f39d51c9ogc\"><p id=\"e1f39d50c9dtc\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/the-third-party-software-problems-and-instructions\">第三方软件问题与说明</a></p></li><li id=\"04858f41c9srz\"><p id=\"title-0zb-ieb-axg\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/ali-cloud-products-and-services-agreement\">阿里云产品及服务协议（快照）</a></p></li><li id=\"e776d141c9w7i\"><p id=\"e776d140c9am4\"><a class=\"\" target=\"_blank\" href=\"https://terms.aliyun.com/legal-agreement/terms/suit_bu1_ali_cloud/suit_bu1_ali_cloud202008251437_20620.html\">禁止使用阿里云服务从事虚拟货币相关活动的声明</a></p></li></ul><p id=\"a6c2b8b0c9rn0\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/troubleshooting-and-solving-the-problem-of-high-bandwidth-usage-in-windows-instances", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></span>\n <span>Windows实例中带宽使用率较高问题的排查及解决方法</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例中带宽使用率较高问题的排查及解决方法</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:52:35</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"856527608ftpc\"><p id=\"856f12708fist\" data-tag=\"shortdesc\" class=\"shortdesc\">本文主要介绍Windows实例中带宽使用率较高问题的排查及解决方法。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"42a7ff70b5sok\" class=\"section\"><h2 id=\"n49mj\">问题现象</h2><p id=\"efcac0a08f203\">Windows系统的ECS实例中带宽使用率较高。</p></section><section id=\"44754560b5ept\" class=\"section\"><h2 id=\"e9bdfc408f4da\">问题原因</h2><p id=\"494dcf80b5xu6\">带宽使用率较高可能有以下原因。</p><ul id=\"0a666db08fbl5\"><li id=\"0a666db18fxuk\"><p id=\"0a666db28f4bx\">您的正常应用业务访问频繁，占用较高带宽。</p></li><li id=\"0a666db38fheb\"><p id=\"0a666db48fnfi\">恶意病毒、木马引起的网络流量。</p><p id=\"5b90cc60b51gt\">有时第三方恶意程序可能会利用操作系统的svchost.exe或者Tcpsvcs.exe来伪装，引起高带宽的占用。</p></li><li id=\"0a666db58ff0o\"><p id=\"0a666db68f91v\">Windows自身服务可能会占用较高网络流量，例如更新服务。</p></li></ul></section><section id=\"61e85560b5tfh\" class=\"section\"><h2 id=\"eba50bc08f9ig\">解决方案</h2><section id=\"99d5a7c0b5958\" class=\"section\"><h3 id=\"856f87a58fnos\" data-tag=\"h3\" class=\"h3\"><b>步骤一：定位问题</b></h3><p id=\"856f87a68fde1\">微软有多个工具可以定位带宽使用率过高的问题，例如任务管理器、资源监视器（Resource Monitor）、性能监视器（Performance Monitor）、Process Explorer、Xperf（Windows Server 2008 以后），抓取系统Full Memory Dump进行检查。在流量大的情况下，您还可以使用Wireshark抓取一段时间的网络包，分析流量使用情况。</p><div type=\"note\" id=\"348eaa318f0il\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"34b370408f76p\">Windows Server 2008以上系统，通常使用系统自带的资源监视器监控带宽。</p></div></div><ol id=\"856f87aa8f7tb\"><li id=\"856f87ab8fgg4\"><p id=\"856f87ac8fy4f\">在桌面底部单击<b data-tag=\"uicontrol\" id=\"326f0367b5cno\" class=\"uicontrol\">开始</b>菜单，选择<b data-tag=\"uicontrol\" id=\"326f2a70b53u1\" class=\"uicontrol\">运行</b>。</p></li><li id=\"856faeb08f0m4\"><p id=\"856faeb18fdgv\">在<b data-tag=\"uicontrol\" id=\"02810120b5oe7\" class=\"uicontrol\">运行</b>框中输入<code data-tag=\"code\" class=\"code\">perfmon -res</code>，单击<b data-tag=\"uicontrol\" id=\"326f2a75b55qj\" class=\"uicontrol\">确定</b>。</p><p id=\"4e6b5c00b6m4i\"> <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6108623761/p518501.png\" alt=\"1\" class=\"image break\"></p></li><li id=\"856faeb28fmib\"><p id=\"856faeb38fcae\">在<b data-tag=\"uicontrol\" id=\"1f0088f0b6nj6\" class=\"uicontrol\">资源监视器</b>页面中，查看各进程是否有带宽使用率过高的现象。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5108623761/p518502.png\" alt=\"2\" class=\"image break\"></p></li><li id=\"856faeb48ff68\"><p id=\"856faeb58fnmk\">针对占用资源较高的进程，查看对应的进程ID和进程的程序名。</p></li><li id=\"856faeb68fq2o\"><p id=\"856faeb78fut5\">定位进程ID后，结合任务管理器判断程序是否异常并定位程序的具体位置。 \n</p><ol id=\"856faeb88fqce\"><li id=\"856faeb98fdfj\"><p id=\"856faeba8fa5x\">定位异常进程前，需要在任务管理器中依次单击<b data-tag=\"uicontrol\" id=\"326f5188b5qzi\" class=\"uicontrol\">查看(V)</b><b data-tag=\"uicontrol\" id=\"326f518ab5bwm\" class=\"uicontrol\">&gt; </b><b data-tag=\"uicontrol\" id=\"326f518cb5so8\" class=\"uicontrol\">选择列(S)...</b>。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5108623761/p518503.png\" alt=\"3\" class=\"image break\"></p></li><li id=\"856faebb8fy5h\"><p id=\"856faebc8f0oq\">在弹出的框中选择<b data-tag=\"uicontrol\" id=\"326f7894b5tfu\" class=\"uicontrol\">PID（进程标识符）</b>，单击<b data-tag=\"uicontrol\" id=\"326f7896b50z7\" class=\"uicontrol\">确定</b>。</p><p id=\"4bbbf370b6unw\"> <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5108623761/p518504.png\" alt=\"4\" class=\"image break\"></p></li><li id=\"856faebd8f797\" data-spm-anchor-id=\"a2c9r.12641768.0.i3.27af5e3bBRlSHu\"><p id=\"856faebe8fedu\">在任务管理器的进程页面中，将会增加PID这一项。单击<b data-tag=\"uicontrol\" id=\"326f9fa0b5tss\" class=\"uicontrol\">PID</b>，通过排序，找到之前资源监视器查看到的异常进程。右键单击进程名称，选择打开文件位置，查看进程是否为恶意程序。</p></li></ol></li></ol></section><section id=\"957e5b90b5p3e\" class=\"section\"><h3 id=\"923c28e1b59zn\" data-tag=\"h3\" class=\"h3\"><b>步骤二：分析处理</b></h3><p id=\"923c28e2b5ewj\">判断影响CPU使用率过高的进程属于正常进程或是异常进程，并按照下述相应步骤处理。</p><table id=\"923c28e3b5woc\" tablewidth=\"709\" tablecolswidth=\"99 610\" class=\"table\"><colgroup colwidth=\"0.28*\" style=\"width:13.96%\"></colgroup><colgroup colwidth=\"1.72*\" style=\"width:86.04%\"></colgroup><tbody class=\"tbody\"><tr id=\"923c28e4b52ty\"><td id=\"923c28e5b5lw9\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"923c28e6b5grh\"><b>可能原因</b></p></td><td id=\"923c28e7b5w8a\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"923c28e8b52a0\"><b>具体操作</b></p></td></tr><tr id=\"923c28e9b5ljt\"><td id=\"923c28eab5i9i\" rowspan=\"1\" colspan=\"1\"><p id=\"923c28ebb5bwn\">正常进程</p></td><td id=\"923c28ecb5evs\" rowspan=\"1\" colspan=\"1\"><p id=\"923c28edb5cy4\">一般情况下，当频繁访问业务，或由于Windows自身服务（更新服务等）都可能会占用较高网络流量和CPU 。</p><div id=\"923c28eeb524b\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"923c28efb5tdz\"><li id=\"923c28f0b5u7d\"><p id=\"923c28f1b5in7\">Windows Server 2008或Windows Server 2012实例建议内存配置在2 GiB或者2 GiB以上。</p></li><li id=\"923c28f2b5tp4\"><p id=\"923c28f3b5qnh\">在使用Windows Server 2012的1 vCPU 1 GiB规格的实例时，若Windows Update服务自动更新，实例的CPU使用率的带宽使用率也会突然升高，这是正常现象。</p></li></ul></div></div><ul id=\"923c28f4b560y\"><li id=\"923c28f5b51vz\"><p id=\"923c28f6b501e\">检查后台是否有执行Windows Update的行为。</p></li><li id=\"923c28f7b5o65\"><p id=\"923c28f8b5v89\">建议在服务器上安装杀毒软件进行杀毒。如有安装杀毒软件，请检查CPU使用率较高时，杀毒软件是否在后台执行扫描操作。如果可能，请升级杀毒软件到最新版本，或者删除杀毒软件。</p></li><li id=\"923c28f9b5u4t\"><p id=\"923c28fab5m5g\">检查该ECS内应用程序是否有大量的磁盘访问、网络访问行为或高计算需求。通过尝试增配实例规格的方式，使用更多核数或内存的规格来解决资源瓶颈问题。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-of-instance-configuration-changes\">升降配方式概述</a>。</p></li><li id=\"923c28fbb5q4e\"><p id=\"923c28fcb52mq\">若自身ECS实例配置较高，再去升级配置已无太大意义。架构方面也并非是ECS实例配置越高就越好。此时，您需要尝试进行应用分离，通过不同的服务器去承载不同的应用，同时对相关程序进行优化。</p><p id=\"923c28fdb55is\">比如数据库完全通过RDS来承载，减轻ECS实例本身的资源消耗和ECS实例内部大量的调用。而程序优化方面，您可以根据自身的配置状况进行调整，具体的操作有调整连接数、缓存配置、Web和数据库调用时的各项参数等。</p></li></ul></td></tr><tr id=\"923c28feb5q6s\"><td id=\"923c28ffb5bhz\" rowspan=\"1\" colspan=\"1\"><p id=\"923c2900b5dj4\">异常进程</p></td><td id=\"923c2901b5oye\" rowspan=\"1\" colspan=\"1\"><p id=\"923c4ff0b5hid\">对于CPU异常使用率过高的情况，可能是被恶意病毒、木马入侵导致的。有时三方恶意程序可能会利用操作系统的svchost.exe或者Tcpsvcs.exe来伪装，引起高CPU的占用。您需要手动对异常进程进行查杀。</p><div id=\"923c4ff1b5c07\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"923c4ff2b51qq\">若您无法判断进程是否为病毒或木马，建议将进程名称在网上进行搜索后确认。另外，建议您进行进程删除操作前，创建快照完成备份。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a></p></div></div><ul id=\"923c4ff3b5gqp\"><li id=\"923c4ff4b5qvn\"><p id=\"923c4ff5b5h9u\">使用商业版杀毒软件，或使用微软免费安全工具<a class=\"\" target=\"_blank\" href=\"https://www.microsoft.com/security/scanner/zh-cn/default.aspx\">Microsoft Safety Scanner</a>，在安全模式下进行扫描杀毒。</p></li><li id=\"923c4ff6b54t2\"><p id=\"923c4ff7b50v8\">运行Windows Update来安装最新的微软安全补丁。</p></li><li id=\"923c4ff8b5ezn\"><p id=\"923c4ff9b54xf\">使用MSconfig禁用所有非微软自带服务驱动，检查问题是否再次发生，具体操作，请参见<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://support.microsoft.com/zh-cn/help/929135/how-to-perform-a-clean-boot-in-windows\">如何在Windows系统中执行干净启动</a>。</p></li><li id=\"923c4ffab54av\"><p id=\"923c4ffbb55e4\">若服务器或站点遭受DDoS攻击或CC攻击等，短期内产生大量的访问需求。您可以登录<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://yundun.console.aliyun.com/\">云安全中心</a>，查看云安全中心中的防护DDoS攻击是否调整好阈值，并核实是否开启CC防护。如果攻击没有触发到阈值，云安全中心没有清洗，可以联系售后协助开起清理。</p></li></ul></td></tr></tbody></table></section></section><section id=\"69ad02f0b5dx7\" class=\"section\"><h2 id=\"856ffcdd8ff89\" data-tag=\"h3\" class=\"h3\"><b>示例说明</b></h2><section id=\"2afe3040b57f1\" class=\"section\"><h3 id=\"856ffcde8fwug\" data-tag=\"h4\" class=\"h4\"><b>问题现象</b></h3><p id=\"856ffcdf8fezj\">Windows实例出现网络流量较大的情况，即服务器网络带宽占用较高，如下图所示。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5108623761/p518505.png\" height=\"328\" width=\"600\" class=\"image break\"></section><section id=\"3042c2a0b5kai\" class=\"section\"><section id=\"6cb5b931b6wtg\" docid=\"3924988\" class=\"section\"><h3 id=\"e9bdfc408f4da\">问题原因</h3><p id=\"494dcf80b5xu6\">带宽使用率较高可能有以下原因。</p><ul id=\"0a666db08fbl5\"><li id=\"0a666db18fxuk\"><p id=\"0a666db28f4bx\">您的正常应用业务访问频繁，占用较高带宽。</p></li><li id=\"0a666db38fheb\"><p id=\"0a666db48fnfi\">恶意病毒、木马引起的网络流量。</p><p id=\"5b90cc60b51gt\">有时第三方恶意程序可能会利用操作系统的svchost.exe或者Tcpsvcs.exe来伪装，引起高带宽的占用。</p></li><li id=\"0a666db58ff0o\"><p id=\"0a666db68f91v\">Windows自身服务可能会占用较高网络流量，例如更新服务。</p></li></ul></section></section><section id=\"4b54b120b5ylj\" class=\"section\"><h3 id=\"857023e68f5qm\" data-tag=\"h4\" class=\"h4\"><b>解决方案</b></h3><p id=\"857023e78fo70\">通过如下2种方法分析为何占用高流量。</p><ul id=\"857023e88fm6r\"><li id=\"857023e98fq1f\"><p id=\"857023ea8fvh1\">使用Windows自带工具资源监视器（Resource Monitor）监控实时流量。</p></li><li id=\"857023eb8f4s4\"><p id=\"857023ec8f2fj\">在流量大的情况下，使用Wireshark工具抓取一段时间的网络包，分析流量使用情况。</p></li></ul><section id=\"515a4990b5zuc\" class=\"section\"><h4 id=\"857023ed8frwh\" data-tag=\"h5\" class=\"h5\"><b>资源监视器</b></h4><p id=\"857023ee8f2vy\">以Windows Server 2008 R2和Windows Server 2012 R2为例，说明如何使用资源监视器监控实时网络流量。</p><ol id=\"857023ef8fdpw\"><li id=\"857023f08fnwm\"><p id=\"857023f18f0yk\">远程连接ECS登实例。</p><p id=\"70c5f2d0b693n\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"857023f28fxpe\"><p id=\"857023f38f7wk\">右键单击任务栏空白处，选择<b data-tag=\"uicontrol\" id=\"32712649b55gc\" class=\"uicontrol\">启动任务管理器</b>。</p></li><li id=\"85704af08fgks\"><p id=\"85704af18f3l0\">单击<b data-tag=\"uicontrol\" id=\"32714d53b575c\" class=\"uicontrol\">性能</b>，再单击<b data-tag=\"uicontrol\" id=\"32714d55b5h9t\" class=\"uicontrol\">资源监视器(R)...</b>。</p></li><li id=\"85704af28f3f3\"><p id=\"85704af38fxor\">在资源监视器窗口中，单击<b data-tag=\"uicontrol\" id=\"32714d59b5qx0\" class=\"uicontrol\">网络</b>。</p></li><li id=\"85704af48fj7b\"><p id=\"85704af58fxwj\">通过资源监视器窗口的<b data-tag=\"uicontrol\" id=\"bbd68760b64fs\" class=\"uicontrol\">网络活动的进程</b>、<b data-tag=\"uicontrol\" id=\"bd73e3b0b6461\" class=\"uicontrol\">网络活动</b>、<b data-tag=\"uicontrol\" id=\"bf2eb310b69hk\" class=\"uicontrol\">TCP连接</b>、<b data-tag=\"uicontrol\" id=\"c0fe42f0b65lr\" class=\"uicontrol\">侦听端口</b>等信息，可以实时分析实例当前的网络流量情况，找到占用流量高的进程进行分析。 \n</p><ul id=\"85704af68f4cq\"><li id=\"85704af78f5q8\"><p id=\"85704af88fcny\">Windows Server 2008 R2</p><p id=\"529ecc80b6q7z\"> <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5108623761/p518506.png\" height=\"326\" width=\"600\" class=\"image break\"></p></li><li id=\"85704af98fp0k\"><p id=\"85704afa8fiy7\">Windows Server 2012 R2</p><p id=\"546eaa80b62zd\"> <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5108623761/p518507.png\" height=\"654\" width=\"600\" class=\"image break\"></p></li></ul></li><li id=\"893f5e91b5ump\"><p id=\"893f5e90b5vwo\">分析处理。</p><ul id=\"bd0f8521b6v3h\"><li id=\"bcdae091b68on\"><p id=\"bcdae090b6ise\">如果该进程是正常业务进程，确实因为客户端访问量大造成带宽占用高，请酌情考虑升级带宽。</p></li><li id=\"85704afe8fffd\"><p id=\"85704aff8frya\">如果该进程是名称可疑进程，请尝试直接杀死进程，或者使用专业杀毒软件进行杀毒后观察实例情况。</p></li></ul></li></ol></section><section id=\"4e4122b0b57gw\" class=\"section\"><h4 id=\"85704b008fjcq\" data-tag=\"h5\" class=\"h5\"><b>Wireshark</b></h4><p id=\"85704b018fkow\" data-spm-anchor-id=\"a2c9r.12641768.0.i1.6b93KsH2KsH2wr\">Wireshark是常用的网络分析工具，您可以在Windows实例上从<a class=\"\" target=\"_blank\" href=\"https://www.wireshark.org/download.html\">Wireshark官网</a>下载并安装软件。</p><p id=\"85704b028fvh2\">执行如下步骤，使用Wireshark分析网络流量。</p><ol id=\"85704b038f2i7\"><li id=\"85704b048f9iq\" data-spm-anchor-id=\"a2c9r.12641768.0.i3.6b93KsH2KsH2wr\"><p id=\"85704b058fwhb\">远程连接ECS登实例。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"857072008fop8\"><p id=\"857072018fbtv\">启动Wireshark，在工具栏中依次选择<b data-tag=\"uicontrol\" id=\"3271e990b5zzg\" class=\"uicontrol\">Statistics</b><b data-tag=\"uicontrol\" id=\"3271e992b5r2b\" class=\"uicontrol\">&gt;</b><b data-tag=\"uicontrol\" id=\"3271e994b5vuo\" class=\"uicontrol\">Conversations</b>。</p></li><li id=\"857072028fujp\" data-spm-anchor-id=\"a2c9r.12641768.0.i8.6b93KsH2KsH2wr\"><p id=\"857072038faak\">在Conversations页面上，您可以看到所有网络通信，从链路层、IP层、TCP层分别给出了流量的具体情况和通信两端的流量情况。通过抓取一段时间的网络包可以分析究竟是哪些连接、端口占用了较高的流量。</p><p id=\"754af310b5vm9\"> <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5108623761/p518508.png\" height=\"316\" width=\"600\" class=\"image break\"></p></li></ol></section></section></section><p id=\"6e725d50b6ryo\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/query-and-case-analysis-linux-io-load", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></span>\n <span>如何查看Linux系统I/O负载情况？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>如何查看Linux系统I/O负载情况？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 15:56:38</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"56bdba20b05ji\"><p data-tag=\"shortdesc\" id=\"84198a60b99xy\" class=\"shortdesc\">本文介绍如何使用iostat、iotop工具查看I/O负载情况。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"31cfaf70b914g\" class=\"section\"><h2 id=\"f9c9e120b9y8i\"><b>查看磁盘I/O负载</b></h2><section id=\"dc22ccd0cf8ci\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"dc22ccd2cfpa5\" class=\"section\"><h4 id=\"THCej\" data-spm-anchor-id=\"a2c4g.11186623.0.i0.6df53334HB2Rio\" jc=\"start\" style=\"text-align:start\"><b>使用iostat从系统纬度查看磁盘IO负载</b></h4><p data-tag=\"h4\" id=\"2dacabc0cfsip\" class=\"h4\">iostat是一款Linux系统中监控I/O性能的工具，可以从系统纬度查看磁盘I/O负载情况。</p><ol id=\"27f114a0cfcjm\"><li id=\"27f0ed90cfrjt\"><p id=\"dc22ccd3cf3ba\">执行如下命令，安装iostat。</p><pre id=\"b5s3rx\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install sysstat</code></pre></li><li id=\"3c988e61cf87o\"><p id=\"3c988e60cfgd3\">执行如下命令，查看I/O负载。</p><pre data-tag=\"codeblock\" id=\"5cf4dba0cfvmt\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>iostat -d -k 3 5</code></pre><div id=\"d899b0a0cft0w\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"4827e642cfbye\"><li id=\"4827e640cf62j\"><p id=\"d899b0a2cf978\">-d：显示磁盘的使用情况。</p></li><li id=\"491fb3c0cfvh1\"><p id=\"d899b0a4cf2aw\">-k：以KB为单位显示。</p></li><li id=\"4a186ba0cfmo8\"><p id=\"d899b0a6cfzq8\">3：统计时间间隔。</p></li><li id=\"4b178c20cf5fr\"><p id=\"d899b0a8cf0qv\">5：统计次数。</p></li></ul></div></div><p id=\"f027f6a0cf7ln\">显示结果如下。</p><img id=\"f085ce13cfjcy\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5100538761/p576937.png\" alt=\"IO负载\" placement=\"break\" class=\"image break\"><p data-tag=\"h4\" id=\"f085ce14cfc35\" class=\"h4\">显示结果参数说明如下，更多参数说明，请参见<a class=\"\" target=\"_blank\" href=\"http://sebastien.godard.pagesperso-orange.fr/man_iostat.html\">iostat manual page</a>。</p><ul id=\"f085ce15cfu6i\"><li id=\"f085ce16cfk01\"><p id=\"f085ce17cfaya\">Device<b>：</b>磁盘名称。</p></li><li id=\"f085ce18cfsg5\"><p id=\"f085ce19cfwg9\">tps：每秒钟发送到的I/O请求数。</p></li><li id=\"f085ce1acfv0d\"><p id=\"f085ce1bcf4oj\">Blk_read/s：每秒读取的block数。</p></li><li id=\"f085ce1ccf9ob\"><p id=\"f085ce1dcfyny\">Blk_wrtn/s：每秒写入的block数。</p></li><li id=\"f085ce1ecfr5h\"><p id=\"f085ce1fcf7mi\">Blk_read：读入的block总数。</p></li><li id=\"f085ce20cfu5o\"><p id=\"f085ce21cf8kn\">Blk_wrtn：写入的block总数。</p></li></ul></li></ol></section><section id=\"dc22ccd5cf80k\" class=\"section\"><h2 id=\"dc22ccd4cf516\"><b>使用iotop从进程纬度查看磁盘IO负载</b></h2><p id=\"017c50f0cfu8u\">iotop是一个用来监视磁盘I/O使用状况的top类工具，可以从进程纬度查看磁盘IO负载。</p><ol id=\"360e5fd0cf3oo\"><li id=\"360e5fd1cfpyc\"><p id=\"360e5fd2cf7eg\">执行如下命令，安装iotop。</p><pre id=\"360e5fd3cfazg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install iotop</code></pre></li><li id=\"360e5fd4cf2h5\"><p id=\"360e5fd5cfxsz\">执行如下命令，查看I/O负载。</p><pre id=\"75c541c0cf9qz\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>iotop -k -n 5 -d 3</code></pre><div id=\"9affe580cfph0\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"434cc412cfmwh\"><li id=\"434cc410cf8tl\"><p id=\"7e093172cftkc\">-b：记录到日志。</p></li><li id=\"443d1780cfo48\"><p id=\"7e093174cftgm\">-k：以KB为单位显示。</p></li><li id=\"4554f020cf5ea\"><p id=\"7e093176cfey1\">-n：统计次数。</p></li><li id=\"467924d0cf4ei\"><p id=\"7e093178cflo0\">-d：统计时间间隔。</p></li></ul></div></div><p id=\"bd6d8690cfzvb\">显示结果如下。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5100538761/p519167.png\" class=\"image break\"><p id=\"dc22ccd6cfj1r\">显示结果参数说明如下，更多参数说明，可执行<code data-tag=\"code\" class=\"code\">iotop -h</code>查询。</p><ul id=\"cddd9832cfyiq\"><li id=\"cddd9833cfd95\"><p id=\"cddd9834cffsb\">DISK READ：该进程读I/O带宽。</p></li><li id=\"cddd9835cfwjo\"><p id=\"cddd9836cfsq9\">DISK WRITE：该进程写I/O带宽。</p></li><li id=\"cddd9837cfzn9\"><p id=\"cddd9838cfzav\">SWAPIN：磁盘的交换使用率。</p></li><li id=\"cddd9839cfxgm\"><p id=\"cddd983acfwyd\">IO：该进程的 I/O 利用率，包含磁盘和交换。</p></li></ul></li></ol></section></section></section><section id=\"14309320b94lh\" class=\"section\"><h2 data-tag=\"h4\" id=\"56c6e1e2b0gqo\" class=\"h4\"><b>kjournald进程占用</b>I/O<b>资源高问题</b></h2><section id=\"abc5d5c0bespa\" class=\"section\"><h3 data-tag=\"h5\" id=\"56c6e1e3b0wig\" class=\"h5\"><b>问题描述</b></h3><p id=\"56c6e1e4b0u7j\">使用iotop排查分析，发现kjournald进程占用了大量I/O资源。</p></section><section id=\"ad61f990be9yd\" class=\"section\"><h3 data-tag=\"h5\" id=\"56c6e1e6b00j7\" class=\"h5\"><b>问题原因</b></h3><p id=\"13503020b9odv\">该问题通常是由于<code data-tag=\"code\" class=\"code\">.ext3</code>文件系统设置的Journal size太小导致。</p><p id=\"56c6e1e7b0whb\">kjournald进程是ext3文件系统进行I/O数据操作的内核进程，它在向磁盘内写入和读取数据时占用CPU和内存资源。当循环的向ext3文件系统写数据时，会使Journal size不断增大，到达设置的Journal size时，就会出现该问题。</p></section><section id=\"afdcbd90be9tg\" class=\"section\"><h3 data-tag=\"h5\" id=\"56c6e1e9b0w2p\" class=\"h5\"><b>解决方案</b></h3><ol id=\"da4c8bc2b9svp\"><li id=\"da4c8bc0b94ie\"><p id=\"a52e90b1b3w3h\">远程连接Linux系统的ECS实例。</p><p id=\"8517b0c0b9uur\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"82928c80b9yzt\"><p id=\"56c6e1eab0wm3\">执行如下命令，查看相应分区的Journal size大小。</p><pre data-tag=\"codeblock\" id=\"56bdba23b0lqe\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>dumpe2fs /dev/xvda1 | grep Journal</code></pre><div type=\"note\" id=\"8d810d51b9pwf\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"8dbe1650b95k7\">/dev/xvda1请替换为实际的分区。</p></div></div><p id=\"936a60a0b9mqg\">系统显示类似如下，表示<code data-tag=\"code\" class=\"code\">/dev/xvda1</code>分区的Journal size为128M。</p><pre data-tag=\"codeblock\" id=\"56bdba24b09a0\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>dumpe2fs 1.42.9 (28-Dec-2013)\nJournal inode: 8\nJournal backup: inode blocks\nJournal features: journal_incompat_revoke\nJournal size: 128M\nJournal length: 32768\nJournal sequence: 0x00010ffb\nJournal start: 10953</code></pre></li><li id=\"8d352cb1b9wcj\"><p id=\"8d352cb0b9uve\">执行如下命令，修改Journal size大小。</p><pre id=\"wt6mnr\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>mke2fs -J size=400 /dev/xvda1 </code></pre><div id=\"f6543a00b9nok\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"f3649420b9tir\">请根据业务需要，修改size大小，/dev/xvda1请替换为实际的分区。</p></div></div></li></ol></section></section><section id=\"b33c3640b9hi0\" class=\"section\"><h2 id=\"ac7aeef0b9pib\"><b>I/O性能优化：</b>通过4K对齐提高I/O性能</h2><p id=\"b83dd6c0b92lm\">4K对齐指将符合4K扇区定义格式化过的硬盘，按照4K扇区的规则写入数据。4K对齐可以使簇与扇区相对应，保证了磁盘读写效率，以提高I/O性能。</p><p id=\"56c708f3b0f8q\">本操作介绍如何通过以下脚本对磁盘进行格式化并自动配置4K对齐。</p><div type=\"warning\" id=\"56c708f4b0vk1\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"56c708f6b08pj\">运行此脚本会自动格式化所有数据盘，如果非新购数据盘，请在操作前，确认已对相关数据盘进行数据备份。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol id=\"56c708f7b0qy5\"><li id=\"56c73000b0eyg\"><p id=\"56c73001b08ai\">使用root用户远程连接Linux系统的ECS实例。</p><p id=\"be8fc502b9aum\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"be190e61b94qk\"><p id=\"be190e60b9du5\">下载<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://onekb.oss-cn-zhangjiakou.aliyuncs.com/50443667/fa6a03ae-3424-4485-ac82-a7d2b166b249.zip\">auto_fdisk.zip</a>压缩包后解压，将解压后脚本并上传到目标服务器。 </p></li><li id=\"56c73002b0xqb\"><p id=\"56c73003b0gn8\">依次执行如下命令，为脚本添加执行权限，然后运行脚本。 </p><pre data-tag=\"codeblock\" id=\"56bdba25b0bvk\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chmod +x ./auto_fdisk.sh\n./auto_fdisk.sh</code></pre></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/troubleshoot-the-issue-that-an-instance-can-be-pinged-but-the-required-port-cannot", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/network-and-security-group-issues/\">网络与安全组问题</a></span>\n <span>能ping通ECS实例但端口不通的排查方法</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>能ping通ECS实例但端口不通的排查方法</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-08-25 16:47:25</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2485227\"><p id=\"52dd113841uw0\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍如何进行排查能ping通ECS实例但端口不通的问题。</p><div data-tag=\"body\" class=\"body\"><section id=\"af5efd2041dkg\" class=\"section\"><h2 id=\"789b5db041qov\"><b>操作场景</b></h2><p id=\"a222030041zxf\">通过客户端访问目标ECS实例时，如果能ping通ECS实例但业务端口无法访问，则可能是链路中相关节点对相应端口做了拦截所致。您可以参考以下步骤进行排查处理。</p><ol id=\"b2d0562241kkz\"><li id=\"b2d05620410sb\"><p id=\"b00b90d041qjr\"><a title=\"\" class=\"xref\" href=\"#8be1b210fdltu\">步骤一：检查ECS实例安全组规则</a></p></li><li id=\"c155aec141cmv\"><p id=\"c155aec041xp3\"><a title=\"\" class=\"xref\" href=\"#5fcf041002iku\">步骤二：检查端口监听状态及相关服务</a></p></li><li id=\"c71d53d041fme\"><p id=\"c71d2cc041ln4\"><a title=\"\" class=\"xref\" href=\"#d960101002x90\">步骤三：检查ECS防火墙设置</a></p></li><li id=\"ce7c13a041lty\"><p id=\"ce7bec9041u83\"><a title=\"\" class=\"xref\" href=\"#f8e6c44041cbf\">步骤四：通过探测工具进行检查</a></p></li></ol></section><section id=\"8be1b210fdltu\" class=\"section\"><h2 id=\"777394a0fdvtr\"><b>步骤一：检查ECS实例安全组规则</b></h2><p id=\"0c36d6404114n\">目标ECS实例端口不通时，可能是安全组规则中未放行该端口（如80端口），您可以参考以下步骤，检查ECS实例安全组规则。</p><ol id=\"d5046940fdgck\"><li data-tag=\"step\" id=\"f52a1c50417uo\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"f52a1c5141pvx\" class=\"step\"><p id=\"cc0c75a0379qu\"><span data-tag=\"cmd\" id=\"cmd-9ro-yc5-vx4\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-kq7-suy-h2g\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-puq-bs2-grd\" class=\"uicontrol\">实例与镜像</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-fk3-i03-vyq\" class=\"uicontrol\">实例</b></span>。</span></p></li><li data-tag=\"step\" id=\"f52a1c52417vj\" class=\"step\"><p id=\"cc0dfc4237gix\"><span data-tag=\"cmd\" id=\"cmd-acu-560-w33\" class=\"cmd\">在页面左侧顶部，选择目标资源所在的地域。<img data-tag=\"image\" id=\"image-3wz-243-ym2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0777199861/p680076.png\" width=\"500\" alt=\"地域\" placement=\"break\" class=\"image break\"> </span></p></li><li id=\"d6875fc0fd6a6\"><p id=\"f52eb03141q0n\">在ECS实例列表页面，单击目标ECS实例ID。</p></li><li id=\"02457e81fdqed\"><p id=\"f52eb03241zqe\">在ECS实例详情页面，单击<b id=\"label-securityGroup\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">安全组</b>页签。</p></li><li id=\"1dbff2d1fdq3h\"><p id=\"f52eb03341ixp\">在<b id=\"ecs.group.list.lb.title\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">安全组列表</b>页签下，单击安全组ID。</p></li><li id=\"d503b081fdb4j\"><p id=\"f52eb03441hkr\">在安全组规则页面，查看入方向规则是否开放目标端口（如80）。</p><img id=\"c462f5e0029y8\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678358.png\" alt=\"2023-06-04_16-56-00..png\" placement=\"break\" width=\"800\" class=\"image break\"><ul id=\"156b48c102kj9\"><li id=\"c5a93820fdiot\"><p id=\"f52ed74141y38\">未开放目标端口，请添加入方向为目标端口的安全组规则。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。</p></li><li id=\"142e5bf002vmx\"><p id=\"f52ed74241cf1\">已开放目标端口，请执行<a title=\"\" class=\"xref\" href=\"#d960101002x90\">步骤三：检查ECS防火墙设置</a>。</p></li></ul></li></ol></section><section id=\"5fcf041002iku\" class=\"section\"><h2 id=\"3671438002ris\"><b>步骤二：检查</b>端口监听状态及相关<b>服务</b></h2><p id=\"176d91604144d\">目标ECS实例端口不通时，可能该服务端口未被正常监听（服务未启动），您可以参考以下步骤，检查ECS实例安全组规则。</p><section id=\"6c4022b002vtq\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"6c4022b202pes\" class=\"section\"><h2 id=\"6c4022b102lyn\">Linux实例</h2><p id=\"f52ed74341tld\">本操作以CentOS 7.9为例，其他版本的Linux系统操作可能有所差异。</p><ol id=\"7d122a7102pje\"><li id=\"7d12036002wu9\"><p id=\"f52ed74441nwg\">远程连接Linux实例。</p><p id=\"f52ed74541wzw\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"84947a1141g0x\"><p id=\"84947a1041cvo\">执行如下命令，查看端口是否正常被监听。</p><pre id=\"8bfeab9241p19\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>netstat -an | grep [$Port]    # [$Port]请替换为实际的端口号</code></pre><ul id=\"8bfeab93413kj\"><li id=\"8bfeab9441sr9\"><p id=\"8bfeab9541vuf\">如果返回如下信息，则说明80端口被正常监听，请继续执行<a title=\"\" class=\"xref\" href=\"#d960101002x90\">步骤三：检查ECS防火墙设置</a>。</p><img id=\"8bfeab9741sgz\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678360.png\" alt=\"2023-06-04_17-11-27..png\" placement=\"break\" class=\"image break\"></li><li id=\"8bfeab9841e3y\"><p id=\"8bfeab99413k1\">如果返回的不是以上信息，表示80端口未处于监听状态（服务未启动）。您需要重启该服务，若服务重启还是未解决问题，请继续执行<a title=\"\" class=\"xref\" href=\"#d960101002x90\">步骤三：检查ECS防火墙设置</a>。</p></li></ul></li></ol></section><section id=\"6c4022b50200e\" class=\"section\"><h2 id=\"6c4022b402h49\">Windows实例</h2><p id=\"f52efe57411ti\">本操作以Windows Server 2012为例，其他版本的Windows Server系统操作类似。</p><ol id=\"8750156202cwq\"><li id=\"87501560026pc\"><p id=\"f52f2560417uh\">远程连接Windows实例。</p><p id=\"f52f256141047\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"cac8957141zlv\"><p id=\"cac8957041xmw\">在Windows PowerShell中执行如下命令，查看端口是否正常被监听。</p><pre id=\"3fe97b3e02jtd\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>netstat -ano | findstr \"[$Port]\"   # [$Port]请替换为实际的端口号</code></pre><ul id=\"3fe97b3f02kah\"><li id=\"3fe97b4002ma0\"><p id=\"f52f4c714148j\">如果返回如下信息，则说明80端口被正常监听，请继续执行<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/check-whether-tcp-port-80-is-available#d960101002x90\">检查ECS防火墙设置</a>。</p><img id=\"8fb9ff7002pph\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678369.png\" alt=\"2023-06-04_17-36-44..png\" placement=\"break\" class=\"image break\"></li><li id=\"3fe97b440214g\"><p id=\"f52f4c73416a9\">如果返回的不是以上信息，表示80端口未处于监听状态（服务未启动）。您需要重启该服务，若服务重启还是未解决问题，请继续执行<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/check-whether-tcp-port-80-is-available#d960101002x90\">检查ECS防火墙设置</a>。</p></li></ul></li></ol></section></section></section><section id=\"d960101002x90\" class=\"section\"><h2 id=\"a2951da00266g\"><b>步骤三：检查ECS防火墙设置</b></h2><p id=\"5b99f5e041c2c\">目标ECS实例端口不通时，可能是ECS防火墙拦截了该端口，您可以参考以下步骤，检查ECS实例防火墙设置。</p><section id=\"e07da83002986\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"e07dcf4102dnw\" class=\"section\"><h2 id=\"e07dcf4002iej\">Linux实例</h2><p id=\"f52f4c7541lcc\">本操作以CentOS 7.9为例，其他版本的Linux系统操作可能有所差异。</p><ol id=\"f388fe2202wx7\"><li id=\"f52a1c5341rrb\" docid=\"3925206\"><p id=\"6c4022b3027vx\">远程连接Linux实例。</p><p id=\"8c56b46002wtl\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"0a42dd210251q\"><p id=\"f52f4c7841tu1\">执行如下命令，查看防火墙状态。</p><pre id=\"liuqdb\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>systemctl status firewalld</code></pre><ul id=\"f732d5d102lr0\"><li id=\"f624e84002htq\"><p id=\"f52f738041azd\">如果回显中出现<code data-tag=\"code\" class=\"code\">Active: inactive (dead)</code>信息，说明防火墙为关闭状态，无需再进行任何操作。</p></li><li id=\"1783ff80026wm\"><p id=\"f52f738141pd7\">如果回显中出现<code data-tag=\"code\" class=\"code\">Active: active (running)</code>信息，说明防火墙已开启，请继续执行步骤<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/check-whether-tcp-port-80-is-available#8611ce6002zy8\">3</a>。</p></li></ul></li><li id=\"8611ce6002zy8\"><p id=\"f52f738241vnp\">执行如下命令，查看防火墙中已开放的端口。</p><pre id=\"gqzneg\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>firewall-cmd --list-all</code></pre><ul id=\"c3ee602102dbq\"><li id=\"c3af826002uvo\"><p id=\"f52f7383415gl\">如果回显中出现<b data-tag=\"uicontrol\" id=\"e14b501002mp9\" class=\"uicontrol\">ports: 80/tcp</b>信息，说明防火墙规则中已放行80端口，无需再进行任何操作。</p><img id=\"d8f7a8f002xd8\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678376.png\" alt=\"2023-06-04_19-33-53..png\" placement=\"break\" class=\"image break\"></li><li id=\"fa943e6002wq0\"><p id=\"f52f738541ykp\">如果回显中没有<b data-tag=\"uicontrol\" id=\"19c8747302ddh\" class=\"uicontrol\">ports: 80/tcp</b>信息，请执行如下命令，放行80端口。</p><pre id=\"hcq8ll\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>firewall-cmd --zone=public --add-port=80/tcp --permanent</code></pre><p id=\"f52f9a9041as5\">若返回结果为<code data-tag=\"code\" class=\"code\">success</code>，表示已经放行TCP 80端口。</p></li></ul></li></ol></section><section id=\"e07dcf4402yxv\" class=\"section\"><h2 id=\"e07dcf4302eqn\">Windows实例</h2><p id=\"f52f9a91413c8\">本操作以Windows Server 2012为例，其他版本的Windows Server系统操作类似。</p><ol id=\"126429a202wsp\"><li id=\"f52a1c5441zvs\" docid=\"3925206\"><p id=\"85e3660002p71\">远程连接Windows实例。</p><p id=\"9a82f08002yn4\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"fd4b4b81fdf7e\"><p id=\"f52f9a9441eot\">单击左下角的<img id=\"f6ec8f30fdfog\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0378725861/p675579.png\" alt=\"服务器管理..png\" placement=\"inline\" width=\"30\" class=\"image inline\">图标，打开服务器管理。</p></li><li id=\"0c7679b0fd2z8\"><p id=\"f52f9a9541ndf\">选择右上角的<b data-tag=\"uicontrol\" id=\"4b05cb90fdbpv\" class=\"uicontrol\">工具(T)</b>&gt;<b data-tag=\"uicontrol\" id=\"4649ca20fd5gx\" class=\"uicontrol\">高级安全 Windows防火墙</b>。</p><img id=\"55b4c7d0fde1d\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0378725861/p675580.png\" alt=\"2023-05-28_20-21-16..png\" placement=\"break\" class=\"image break\"></li><li id=\"4bc01ae0fdrn8\"><p id=\"f52fc1a041fbe\">查看防火墙状态。</p><ol id=\"832ea87102hwz\"><li id=\"8302414002bqd\"><p id=\"f52fc1a14192h\">如果防火墙处于关闭状态，无需进行任何操作。</p><img id=\"fab67b2002cgf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678371.png\" alt=\"2023-06-04_18-49-00..png\" placement=\"break\" class=\"image break\"></li><li id=\"918fd74002t7y\"><p id=\"f52fc1a341kxk\">如果防火墙状态为已启用，请继续以下操作。</p><ol id=\"211f179102j2v\"><li id=\"4474c42002pkl\"><p id=\"f52fc1a441o8s\">在<b data-tag=\"uicontrol\" id=\"ea6c94cefdgex\" class=\"uicontrol\">高级安全 Windows防火墙</b>页面，单击<b data-tag=\"uicontrol\" id=\"2fc565b002qjw\" class=\"uicontrol\">入站规则</b>。</p></li><li id=\"32642c71027hv\"><p id=\"f52fc1a541nfw\">查看<b data-tag=\"uicontrol\" id=\"64a725c002j4s\" class=\"uicontrol\">Windows 远程管理-兼容模式(HTTP-In)</b>的状态。</p><ul id=\"b1ea7941fd0u1\"><li id=\"b1be8740fd9er\"><p id=\"f52fe8b041q0d\">如果协议已启动，无需进行任何操作。</p></li><li id=\"0890c921fd9r1\"><p id=\"f52fe8b141o6o\">如果该规则未启用，请右键单击该规则，然后单击<b data-tag=\"uicontrol\" id=\"e08a635002g20\" class=\"uicontrol\">启用规则(E)</b>。</p><img id=\"e601ec9002910\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678373.png\" alt=\"2023-06-04_18-58-43..png\" placement=\"break\" class=\"image break\"></li></ul></li></ol></li></ol></li></ol></section></section></section><section id=\"f8e6c44041cbf\" class=\"section\"><h2 id=\"eb01f16041d10\"><b>步骤四：通过探测工具进行检查</b></h2><p id=\"0823622041w81\">本地客户端无法访问端口可能是链路中的相关节点拦截了端口所致，请利用端口可用性探测工具进行测试，验证是否有节点拦截了端口。</p><section id=\"e26b72e041cu1\" class=\"section\"><h3 id=\"a6b0ece041wgc\"><b>使用端口可用性探测工具</b></h3><section id=\"e040172041jns\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"e040172241f1o\" class=\"section\"><h2 id=\"e040172141j55\">本地客户端为Linux系统</h2><p id=\"cf165d0041ppk\">Linux系统中，通常可以通过traceroute来进行端口可用性探测。traceroute用于跟踪Internet协议（IP）数据包传送到目标地址时经过的路，通过发送TCP数据包向目标端口进行探测，以检测从数据包源到目标服务器的整个链路上相应端口的连通性情况。</p><section id=\"729ed5b041iio\" class=\"section\"><h3 id=\"eb1e39b141xhb\"><b>安装</b>traceroute</h3><pre id=\"wyfcvx\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>sudo yum install -y traceroute</code></pre></section><section id=\"74f744a04160s\" class=\"section\"><h3 id=\"254cfb2041p7a\">traceroute命令</h3><p id=\"2cebaa2041f3z\">常用traceroute命令格式如下所示。</p><pre data-tag=\"codeblock\" outputclass=\"language-shell\" id=\"30c6c17041sya\" class=\"pre codeblock language-shell\"><code>traceroute [-n] -T -p &lt;目标端口号&gt; &lt;Host&gt;</code></pre><ul id=\"219c242085kby\"><div id=\"4c3e017041wif\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"82d4e0f242ian\"><li id=\"82d4e0f042zzn\"><p id=\"485f67b041197\">-n：直接使用IP地址而非主机名称（禁用DNS反查）。</p></li><li id=\"848ace5142m53\"><p id=\"848ace50423y5\">-T：通过TCP探测。</p></li><li id=\"8575074042ezm\"><p id=\"8574e03042k5g\">-p：设置探测的端口号。</p></li><li id=\"8653a770424k7\"><p id=\"8653806042bau\">&lt;目标端口号&gt;：需要探测的端口号，比如80。</p></li><li id=\"8799bc0042e2j\"><p id=\"879994f0425pk\">&lt;Host&gt;：需要探测的目标服务器地址，比如<code data-tag=\"code\" class=\"code\">192.168.XXX.XXX</code>。</p></li></ul></div></div></ul></section><section id=\"ed0a11e0414ud\" class=\"section\"><h3 id=\"tsmkn\">测试示例</h3><p id=\"89c8667041e9f\">traceroute的示例命令和返回结果如下：</p><pre id=\"v5x6dt\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>[test@centos~]# traceroute -n -T -p 22 223.5.XXX.XXX\ntraceroute to 223.5.XXX.XXX (223.5.XXX.XXX), 30 hops max, 60 byte packets\n 1 5X.X.X.X 0.431 ms 0.538 ms 0.702 ms\n 2 10.88.XXX.XXX 0.997 ms 1.030 ms 10.88.XXX.XXX 1.309 ms\n 3 58.96.XXX.XXX 0.393 ms 0.390 ms 58.96.XXX.XXX 0.423 ms\n 4 202.123.XXX.XXX 1.110 ms 202.123.XXX.XXX 0.440 ms 0.440 ms\n 5 63.218.XXX.XXX 1.744 ms 63.218.XXX.XXX 1.076 ms 1.232 ms\n 6 63.223.XXX.XXX 1.832 ms 63.223.XXX.XXX 1.663 ms 63.223.XXX.XXX 1.616 ms\n 7 63.223.XXX.XXX 2.776 ms 63.223.XXX.XXX 1.585 ms 1.606 ms\n 8 * * 202.97.XXX.XXX 2.537 ms\n 9 202.97.XXX.XXX 6.856 ms * *\n10 * * *\n11 * * *\n12 * * 119.147.XXX.XXX 8.738 ms\n13 119.147.XXX.XXX 8.248 ms 8.231 ms *\n14 * 42.120.XXX.XXX 32.305 ms 42.120.XXX.XXX 29.877 ms\n15 42.120.XXX.XXX 11.950 ms 42.120.XXX.XXX 23.853 ms 42.120.XXX.XXX 29.831 ms\n16 42.120.XXX.XXX 11.007 ms 42.120.XXX.XXX 13.615 ms 42.120.XXX.XXX 11.956 ms\n17 42.120.XXX.XXX 21.578 ms 42.120.XXX.XXX 13.236 ms *\n18 * * 223.5.XXX.XXX 12.070 ms !X</code></pre></section></section><section id=\"e040172541box\" class=\"section\"><h2 id=\"e040172441gq2\">本地客户端为Windows系统</h2><p id=\"17f27170412hm\">在Windows系统中，您可通过tracetcp进行端口可用性探测。tracetcp同样通过发送TCP数据包进行链路探测，以分析链路是否存在中间节点对目标端口做了阻断。</p><section id=\"fc444d8041b6f\" class=\"section\"><h3 id=\"016a29c041utt\">安装tracetcp</h3><ol id=\"5b0f61c241o0u\"><li id=\"5b0f61c041swc\"><p id=\"5d7fc5804126k\">在<a class=\"\" target=\"_blank\" href=\"https://www.winpcap.org/\">WinPcap官网</a>下载并安装WinPcap library。</p></li><li id=\"b45821e141ozv\"><p id=\"b45821e041w0u\">在<a class=\"from-extensions-error\" target=\"_blank\" href=\"http://simulatedsimian.github.io/tracetcp_download.html\">tracetcp官网</a>下载tracetcp。</p></li><li id=\"cb1c612141f6j\"><p id=\"e4d6d5f041z52\">将下载的tracetcp解压到<code data-tag=\"code\" class=\"code\">C:\\Windows</code>目录下。 </p><div type=\"important\" id=\"f0195fa041m1x\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"f05c5c1041kxj\">如果解压到非系统目录，则需要手动修改系统环境变量，以确保指令可以直接调用。</p></div></div></li></ol></section><section id=\"f2b09a60410d1\" class=\"section\"><h3 id=\"fd74691041bx2\"><b>使用方法</b></h3><p id=\"82fd7ad141i5z\">在Windows PowerShell或cmd命令行中输入tracetcp命令，常用tracetcp命令格式如下所示。</p><pre id=\"1gaggv\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>tracetcp &lt;IP&gt;:&lt;Port&gt;</code></pre><ul id=\"5c66a5d0850ez\"><div id=\"d17c8ac041kmk\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"99b09fd2427g2\"><li id=\"99b09fd0420hf\"><p id=\"cf3755b041yrb\">&lt;IP&gt;：指目标服务器的IP地址或者域名。</p></li><li id=\"9b27af7142o0s\"><p id=\"9b27af7042q0e\">&lt;Port&gt;：指需要探测的目标端口。</p></li></ul><p id=\"cf3755b2410bn\">关于更多tracetcp参数说明，您可以通过<code data-tag=\"code\" class=\"code\">tracetcp -?</code>命令查看帮助。</p></div></div></ul></section><section id=\"780264f041m16\" class=\"section\"><h3 id=\"f47c80c141xij\">测试示例</h3><p id=\"f47c80c241cce\">tracetcp的示例命令和返回结果如下：</p><pre id=\"sw18go\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>C:\\ &gt;tracetcp www.aliyun.com:80\nTracing route to 140.205.63.8 on port 80\nOver a maximum of 30 hops.\n1 3 ms 4 ms 3 ms 10.102.XXX.XXX\n2 13 ms 3 ms 4 ms 10.102.XXX.XXX\n3 3 ms 3 ms 2 ms 140.205.XXX.XXX\n4 4 ms 3 ms 3 ms 180.163.XXX.XXX\n5 5 ms 4 ms 7 ms 101.95.XXX.XXX\n6 6 ms 5 ms 7 ms 124.74.XXX.XXX\n7 8 ms 8 ms 8 ms 124.74.XXX.XXX\n8 10 ms 10 ms 8 ms 114.80.XXX.XXX\n9 9 ms 9 ms 11 ms 42.120.XXX.XXX\n10 * * * Request timed out.\n11 Destination Reached in 8 ms. Connection established to 140.205.XXX.XXX\nTrace Complete.</code></pre></section></section></section></section><section id=\"e706ccf041xhp\" class=\"section\"><h3 id=\"1aa8fec485qbw\" data-tag=\"h4\" class=\"h4\"><b>探测结果的案例分析</b></h3><p id=\"9f6d5fc041mf5\">当相关端口在某一跳被阻断，则之后各跳均不会有返回数据，据此就可以判断出异常节点。您可以根据相应节点信息，在<a class=\"\" target=\"_blank\" href=\"https://ip.taobao.com/ipSearch\">淘宝IP地址库</a>查询归属运营商进行问题反馈。</p><section id=\"a63cb0d041w0o\" class=\"section\"><h4 id=\"ef5989b0419rm\"><b>案例一：</b></h4><p id=\"ef5989b141mc4\"><b>探测结果</b>：目标端口在第3跳之后就没有数据返回，说明相应端口在该节点被阻断。</p><p id=\"67c3cd2041x8h\"><b>探测结果分析</b>：经查询该节点为内网IP，所以推断是本地网络相关安全策略所致，需要联系本地网络管理部门做进一步排查分析。</p><pre outputclass=\"language-shell\" data-tag=\"codeblock\" id=\"hg2yus\" class=\"pre codeblock language-shell\"><code>C:\\&amp;gt;tracetcp www.aliyun.com:135\nTracing route to 115.102.XXX.XXX on port 135\nOver a maximum of 30 hops.\n1       3 ms    3 ms    3 ms    10.102.XXX.XXX\n2       4 ms    3 ms    3 ms    10.102.XXX.XXX\n3       3 ms    3 ms    3 ms    140.205.XXX.XXX\n4       *       *       *       Request timed out.\n5       *       *       *       Request timed out.\n6       *       *       *       Request timed out.\n7       *       *       *       Request timed out.\n8       *       *       *       Request timed out.\n9       *       *       *       Request timed out.\n10      *       *       *       Request timed out.\n11      *       *       *       Request timed out.\n12      *       *       *       Request timed out.\nTrace Complete.</code></pre></section><section id=\"af00a5f041dlk\" class=\"section\"><h4 id=\"ab6c82b141git\"><b>案例二</b></h4><p id=\"1af9e741414bw\"><b>探测结果</b>：探测结果如下，目标端口在第11跳之后就没有数据返回，说明相应端口在该节点被阻断。</p><p id=\"7e470bc041z10\"><b>探测结果分析</b>：经查询该节点归属北京移动，需要您自行向运营商反馈。</p><pre outputclass=\"language-shell\" data-tag=\"codeblock\" id=\"392ctk\" class=\"pre codeblock language-shell\"><code>[root@mycentos ~]# traceroute -T -p 135 www.baidu.com\ntraceroute to www.baidu.com (111.13.XXX.XXX), 30 hops max, 60 byte packets\n 1  * * *\n 2  111.13.XXX.XXX (111.13.XXX.XXX)  4.115 ms  4.397 ms  4.679 ms\n 3  112.15.XXX.XXX (112.15.XXX.XXX)  901.921 ms  902.762 ms  902.338 ms\n 4  200.35.XXX.XXX (200.35.XXX.XXX)  2.187 ms  1.392 ms  2.266 ms\n 5  * * *\n 6  58.200.XXX.XXX (58.200X.XXX.XXX)  1.688 ms  1.465 ms  1.475 ms\n 7  63.128.XXX.XXX (63.128.XXX.XXX)  27.729 ms  27.708 ms  27.636 ms\n 8  * * *\n 9  * * *\n10  200.38.XXX.XXX (200.38.XXX.XXX)  28.922 ms 200.38.XXX.XXX (200.38.XXX.XXX)   29.030 ms  28.916 ms\n11  204.35.XXX.XXX (204.35.XXX.XXX)  29.169 ms  28.893 ms 204.35.XXX.XXX (204.35.XXX.XXX)  30.986 ms\n12  * * *\n13  * * *\n14  * * *\n15  * * *\n16  * * *\n17  * * *\n18  * * *\n19  * * *\n20  * * *</code></pre></section></section></section><p id=\"f5c97eb041y7z\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span>ECS实例内网站访问慢或无法访问问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>ECS实例内网站访问慢或无法访问问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-20 11:13:07</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-i-cannot-access-a-website-hosted-on-an-instance\">无法访问ECS实例中运行网站的快速排查方法</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-i-cannot-access-an-external-network-from-a-windows-instance\">在Windows实例无法访问外部网络如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-i-cannot-use-internet-explorer-on-a-windows-instance-to-access-external-websites\">Windows实例内无法使用Internet Explorer浏览器访问外部网站如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/how-do-i-resolve-the-issues-that-occur-when-i-access-iis-websites\">IIS Web网站访问故障</a></li>\n <li><a href=\"/zh/ecs/support/within-the-ecs-instance-visit-the-web-site-suggests-nginx-502-bad-gateway-error\">在ECS实例内访问网站提示“Nginx 502 bad gateway”错误如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-an-error-occurred-during-the-connection-to-a-database-or-error-establishing-a-database-connection-error-appears-when-i-access-the-wordpress-website\">访问WordPress网站提示“建立数据库连接时出错”或者“Error establishing a database connection”错误如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/ecs-instance-through-browser-console-login-pagoda-service-panel\">ECS实例上无法通过浏览器登录宝塔服务面板控制台如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-i-am-prompted-with-the-error-message-content-from-the-website-listed-below-is-being-blocked-by-the-internet-explorer-enhanced-security-configuration\">Windows云服务器使用IE浏览器打开网站提示“增强安全配置正在阻止来自下列网站内容”如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/how-to-use-the-chrome-developer-tools-to-screen-ecs-instance-website-load-too-slow\">如何使用Chrome浏览器的开发者工具排查ECS实例上的网站加载过慢问题？</a></li>\n <li><a href=\"/zh/ecs/support/windows-server-2012-instances-of-ecs-open-ecn-system-access-to-external-site-slower-or-tcp-connection-retransmission-problems-how-to-deal-with\">Windows Server 2012系统的ECS实例开启ECN功能后，访问外部网站较慢或者出现TCP连接重传问题，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-a-windows-instance-cannot-access-external-networks-when-a-large-number-of-connections-stay-in-the-time-wait-state\">Windows实例的Time_Wait连接不释放导致访问外网失败，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/active-directory-domains-in-the-network-environment-the-client-host-cannot-access-ali-cloud-network-service-how-to-deal-with\">AD域网络环境中的客户端主机无法访问阿里云内网服务，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/after-i-configure-the-vpn-service-for-a-windows-instance-vpn-is-working-as-expected-but-i-cannot-access-an-external-website-from-the-instance-what-do-i-do\">Windows实例上配置VPN服务后，VPN服务正常但是无法访问外部网站，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/local-loopback-adapter-did-not-start-to-use-nginx-access-web-tips-502-and-connect-upstream-time-out-error-how-to-deal-with\">本地回环网卡（lo）未启动导致使用Nginx访问网页提示“502”和“connect upstream time out”报错，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-534-policy-requires-ssl-error-message-appears-when-i-access-an-ftp-site-deployed-on-a-windows-instance\">通过FTP over TLS方式连接Windows实例上IIS服务创建的FTP站点时，提示“534 Policy requires SSL”信息，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/windows-instance-access-iis-to-create-website-prompt-bad-request-error\">Windows实例访问使用IIS创建的网站提示“Bad Request (Invalid Hostname)”错误如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/migrated-to-a-new-server-in-php-website-using-a-browser-to-access-hint-information-such-as-do-not-support-the-mysql-how-to-deal-with\">迁移到新服务器上的PHP网站，使用浏览器访问时提示“不支持MySQL”等信息，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-operations-are-slow-on-a-windows-server-2003-instance-after-i-connect-to-the-instance\">远程连接Windows Server 2003实例后在服务器上执行操作时速度缓慢，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/unable-to-connect-to-build-on-the-windows-instance-vsftp-sites-on-linux-instance-how-to-deal-with\">在Windows实例上无法连接搭建在Linux实例上的VSFTP站点，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/access-windows-instance-using-iis-deployment-sites-appear-500-19-don-t-allow-absolute-physical-path-in-xxx-xxx-error-how-to-deal-with\">访问Windows实例上使用IIS部署的网站时，出现“500.19-xxx中不允许绝对物理路径xxx”报错，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/the-domain-name-of-a-website-is-resolved-to-different-ip-addresses-on-a-windows-instance\">Windows实例内部自定义域名解析与本地网络域名解析不一致导致无法访问网站如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-err-connetcion-timed-out-error-appears-when-i-enter-https-or-or-domain-name-of-a-website-that-is-hosted-on-an-ecs-instance-in-a-browser-to-access-the-website\">使用浏览器通过https://网站域名方式访问在ECS实例上部署的网站时，提示“ERR_CONNETCION_TIMED_OUT”错误，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-no-input-file-specified-error-is-returned-when-i-access-websites-deployed-on-an-ecs-instance\">访问部署在ECS实例上的Web站点，提示“No input file specified”错误，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/has-access-to-the-cdn-website-after-migrating-to-windows-instance-access-to-the-site-prompt-connection-is-rejected-how-to-deal-with\">已接入CDN的网站迁移至Windows实例后，访问该站点提示连接被拒绝，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/unable-to-log-on-to-taobao-how-to-deal-with-on-ecs-instance\">在ECS实例上无法登录淘宝如何处理？</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/query-and-case-analysis-of-linux-network-traffic-load", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></span>\n <span>如何查看Linux系统网络流量负载情况？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>如何查看Linux系统网络流量负载情况？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:24:37</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"c21e8c00b0dz7\"><p data-tag=\"shortdesc\" id=\"c22a24c5b0pqx\" class=\"shortdesc\">Linux系统中有各种查看网络流量的工具，比如sar、iftop、nethogs等，它们可以从不同的纬度来分析系统中流量信息，本文介绍如何使用sar、iftop、nethogs查看Linux系统ECS实例中网络流量负载情况。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"d0733380b519v\" class=\"section\"><h2 id=\"n49mj\">操作场景</h2><p id=\"c22a99f1b0xjg\">在您使用Linux系统的ECS实例过程中，可能会遇到实例带宽过高的情况，您可以按照以下步骤排查定位具体问题。</p><ol id=\"c22a99f2b02aa\"><li data-spm-anchor-id=\"a2c4g.11186623.2.i6.3fe97d03cdRTT7\" id=\"c22a99f3b0wce\"><p id=\"c22a99f4b0izn\">找到影响带宽使用率过高的具体进程。</p><p id=\"2c6df440b5dky\">您可以使用sar、iftop、nethogs等工具定位具体进程。更多信息，请参见<a title=\"\" class=\"xref\" href=\"#0bb788d0b5bh1\">sar工具的使用</a>、<a title=\"\" class=\"xref\" href=\"#d8ee5310b5r4k\">iftop工具的使用</a>或<a title=\"\" class=\"xref\" href=\"#fa995f10b5jyd\">Nethogs工具的使用</a>。</p></li><li id=\"c22a99f5b0ifm\"><p id=\"c22a99f7b0rgx\">排查影响带宽使用率过高的进程是否正常，并分类进行处理。</p><ul id=\"c22a99f8b0q2i\"><li data-spm-anchor-id=\"a2c4g.11186623.2.i8.3fe97d03cdRTT7\" id=\"c22a99f9b0ffg\"><p id=\"c22a99fab07zm\">对于正常进程：您需要对服务器的带宽进行升级。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/modify-the-bandwidth-configurations-of-subscription-instances\">包年包月实例修改带宽</a>或<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/modify-the-bandwidth-configurations-of-pay-as-you-go-instances\">按量付费实例修改带宽</a>。</p></li><li data-spm-anchor-id=\"a2c4g.11186623.2.i2.3fe97d03cdRTT7\" id=\"c22ac100b0ivs\"><p id=\"c22ac101b02nj\">对于异常进程：您可以手动对进程进行查杀，也可以使用第三方安全工具进行查杀。</p></li></ul></li></ol></section><section id=\"0bb788d0b5bh1\" class=\"section\"><h2 data-tag=\"h3\" id=\"c22ac104b0ndz\" class=\"h3\"><b>sar工具的使用</b></h2><p id=\"1f1ff2e0b5bk0\">sar（System Activity Reporter系统活动情况报告）是目前Linux上最为全面的系统性能分析工具之一，可以从多方面对系统的活动进行报告。sar可以从网络接口层面来分析数据包的收发情况、错误信息等。</p><h3 id=\"5231fc00b5ljs\"><b>sar命令</b></h3><p id=\"52af4250b54rf\">使用sar来监控网络流量的常用命令如下所示。</p><pre data-tag=\"codeblock\" id=\"c21e8c01b04ul\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sar -n DEV [interval] [count]</code></pre><div type=\"note\" id=\"c22ae810b0vm2\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"c22ae812b062l\">[interval]表示统计间隔，[count]表示统计次数。</p></div></div><h3 data-tag=\"h4\" id=\"c22ae813b06ta\" class=\"h4\"><b>使用示例</b></h3><p id=\"c22ae814b0kef\">执行如下命令，使用sar每1秒统计一次网络接口的活动状况，连续统计5次。</p><pre data-tag=\"codeblock\" id=\"c21e8c02b0w1k\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sar -n DEV 1 5</code></pre><p id=\"c22ae815b0ofi\">命令执行后会列出每个网卡5次的平均数据取值，根据实际情况来确定带宽跑满的网卡名称，对于ECS实例来说，通常内网网卡为eth0，外网网卡为eth1。</p><p id=\"abe8e740b58sd\">系统显示类似如下，确认是eth1通过流量较大，然后执行以下步骤检查具体问题。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8471227761/p519209.png\" class=\"image break\"><p data-tag=\"h4\" id=\"c22ae817b0mda\" class=\"h4\"><b>显示结果主要字段说明</b></p><ul id=\"c22ae818b0qrv\"><li id=\"c22b0f20b0aan\"><p id=\"c22b0f21b02a4\">IFACE：网络接口名称。</p></li><li id=\"c22b0f22b0ual\"><p id=\"c22b0f23b00s2\">rxpck/s、txpck/s：每秒接收或发送的数据包数量。</p></li><li id=\"c22b0f24b0pag\"><p id=\"c22b0f25b0lsh\">rxkB/s、txkB/s：每秒接收或发送的字节数，以kB/s为单位。</p></li><li id=\"c22b0f26b0yh1\"><p id=\"c22b0f27b0duq\">rxcmp/s、txcmp/s：每秒接收或发送的压缩过的数据包数量。</p></li><li id=\"c22b0f28b0xlt\"><p id=\"c22b3630b08f2\">rxmcst/s：每秒接收到的多播数据包。</p></li></ul></section><section id=\"d8ee5310b5r4k\" class=\"section\"><h2 data-tag=\"h3\" id=\"c22b3631b09yi\" class=\"h3\"><b>iftop工具的使用</b></h2><p id=\"21a5bdf0b56t3\"><span style=\"color:rgb(24, 24, 24)\">iftop是Linux系统中一个免费的网卡实时流量监控工具，可以监控包括指定网卡的实时流量、端口连接信息、反向解析IP等信息。</span></p><h3 id=\"27730850b5wx3\"><span style=\"color:rgb(24, 24, 24)\"><b>iftop命令</b></span></h3><p id=\"c22b3632b0pjt\">iftop常用命令如下。</p><pre data-tag=\"codeblock\" id=\"c21e8c03b0bx7\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>iftop [-i interface]</code></pre><p id=\"3fe96460b5gmv\">interface表示网络接口名，比如eth0、eth1等。如果不通过-i参数指定接口名，则默认检测第一块网卡的使用情况。</p><h3 data-tag=\"h4\" id=\"c22b3633b0suh\" class=\"h4\"><b>使用示例</b></h3><ol id=\"c22b3634b08i1\"><li id=\"c22b5d40b0hm3\"><p id=\"a52e90b1b3w3h\"><span style=\"color:rgb(24, 24, 24)\">远程连接</span>Linux系统的<span style=\"color:rgb(24, 24, 24)\">ECS实例。</span></p><p class=\"itemgroup info\" id=\"info-d6f-lre-3tc\"><span style=\"color:rgb(24, 24, 24)\">具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a><span style=\"color:rgb(24, 24, 24)\">。</span></p></li><li id=\"c22b5d42b0lol\"><p id=\"c22b5d43b0qlx\">执行如下命令，安装iftop流量监控工具。 </p><pre data-tag=\"codeblock\" id=\"c21e8c04b0qal\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install iftop -y</code></pre></li><li id=\"c22b8452b0v2i\"><p id=\"c22b8453b0xf4\">执行如下命令，查看详细端口流量占用情况。 </p><pre data-tag=\"codeblock\" id=\"c21e8c05b0x7t\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>iftop -i eth0 -P</code></pre><div type=\"note\" id=\"c22b8454b0m3s\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"c22b8455b0v5a\" class=\"p\">-P参数会显示请求端口。\n</p></div></div><p id=\"c22b8456b0qsm\">系统显示类型如下，58690端口占用流量最大。 <img id=\"a5a41100b5ho2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2103577761/p573470.png\" alt=\"2023-02-26_18-15-54\" placement=\"break\" class=\"image break\"></p></li><li id=\"c22b8457b0mci\"><p id=\"c22bab60b086l\">执行如下命令，查看端口对应的进程。 </p><pre data-tag=\"codeblock\" id=\"c21e8c06b0gjc\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -tunlp |grep [$Port]</code></pre><div type=\"note\" id=\"c22bab61b0rh8\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"c22bab62b0bff\" class=\"p\">[$Port]为上一步查看的端口。\n</p></div></div><p id=\"c22bab63b0rmk\">系统显示类型如下。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9471227761/p519211.png\" class=\"image break\"></p></li><li id=\"c22bab64b0kw5\"><p id=\"c22bab65b0q8i\">确认对应服务后，您可以通过停止服务或使用iptables服务来对指定地址进行处理。</p><p id=\"f2e79e40b5i5l\">例如屏蔽IP地址或限速，以保证服务器带宽能够正常使用。</p></li></ol><p data-tag=\"h4\" id=\"c22bab66b0q8k\" class=\"h4\"></p><p id=\"a0834fc0b5gr1\"><b>显示结果主要字段说明</b></p><img id=\"7adc69c0b5wvl\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4073647761/p573471.png\" alt=\"2023-02-26_19-30-35\" placement=\"break\" class=\"image break\"><ul id=\"c22bab68b0m0v\"><li id=\"c22bab69b0b3i\"><p id=\"c22bab6ab0vd4\">第①部分：带宽使用情况。</p></li><li id=\"c22bd270b0g5m\"><p id=\"c22bd271b0seu\">第②部分：外部连接列表，即记录了哪些IP正在和本机的网络连接。</p><ul id=\"6c431f81b5p0i\"><li id=\"c22bd272b0xt1\"><p id=\"c22bd273b0fhf\">右侧部分是实时流量信息，分别是该访问IP连接到本机2秒、10秒和40秒的平均流量。</p></li><li id=\"71b614e0b5zqj\"><p id=\"71b5edd0b5mvr\"><code data-tag=\"code\" class=\"code\">=&gt;</code><span style=\"color:rgb(24, 24, 24)\">表示发送数据，</span><code data-tag=\"codeph\" class=\"codeph\">&lt;=</code><span style=\"color:rgb(24, 24, 24)\">表示接收数据。</span></p></li></ul></li><li id=\"c22bd275b0lqh\"><p id=\"c22bd276b0565\">第③部分。 </p><ul id=\"c22bd277b0vun\"><li id=\"c22bd278b054s\"><p id=\"c22bd279b0hq1\">第一列：TX表示发送流量，RX表示接收流量，TOTAL表示总流量。</p></li><li id=\"c22bd27ab0c65\"><p id=\"c22bd27bb0wl2\">第二列cum：表示第一列各种情况的总流量。</p></li><li id=\"c22bd27cb075l\"><p id=\"c22bd27db0o79\">第三列peak：表示第一列各种情况的流量峰值。</p></li><li data-spm-anchor-id=\"\" id=\"c22bd27eb0xrz\"><p id=\"c22bf980b0jl9\">第四列rates：表示第一列各种情况2秒、10秒、40秒内的平均流量。</p></li></ul></li></ul><p data-tag=\"h4\" id=\"c22c2093b006g\" class=\"h4\"><b>常见操作命令参数说明</b></p><p id=\"c22c2094b0iv9\">进入iftop界面后，可以通过按下相应的字母快捷按键，来对显示结果进行调整。</p><ul id=\"c22c2095b0j3y\"><li id=\"c22c2096b0u4w\"><p id=\"c22c2097b0103\">h：切换是否显示帮助。</p></li><li id=\"c22c2098b085y\"><p id=\"c22c47a0b03vx\">n：切换显示本机的IP或主机名。</p></li><li id=\"c22c47a1b0d4t\"><p id=\"c22c47a2b0oei\">s：切换是否显示本机的host信息。</p></li><li id=\"c22c47a3b07hs\"><p id=\"c22c47a4b05pg\">d：切换是否显示远端目标主机的host信息。</p></li><li id=\"c22c47a5b0lvg\"><p id=\"c22c47a6b07at\">t：切换显示格式为2行、1行、只显示发送流量或只显示接收流量。</p></li><li id=\"c22c47a7b0d9j\"><p id=\"c22c47a8b0mud\">N：切换显示端口号或端口服务名称。</p></li><li id=\"c22c47a9b0po5\"><p id=\"c22c47aab0zok\">S：切换是否显示本机的端口信息。</p></li><li id=\"c22c47abb0b20\"><p id=\"c22c47acb0itd\">D：切换是否显示远端目标主机的端口信息。</p></li><li id=\"c22c47adb0h0h\"><p id=\"c22c6eb0b0ekq\">p：切换是否显示端口信息。</p></li><li id=\"c22c6eb1b05wz\"><p id=\"c22c6eb2b0mj2\">P：切换暂停或继续显示。</p></li><li id=\"c22c6eb3b0yzl\"><p id=\"c22c6eb4b0gfb\">b：切换是否显示平均流量图形条。</p></li><li id=\"c22c6eb5b041t\"><p id=\"c22c6eb6b0f64\">B：切换计算2秒或10秒或40秒内的平均流量。</p></li><li id=\"c22c6eb7b0xt5\"><p id=\"c22c6eb8b0nym\">T：切换是否显示每个连接的总流量。</p></li><li id=\"c22c95c0b0nlr\"><p id=\"c22c95c1b0cvk\">l：打开屏幕过滤功能，输入要过滤的字符。比如输入相应IP地址，回车后，屏幕就只显示这个IP相关的流量信息。</p></li><li id=\"c22c95c2b0uov\"><p id=\"c22c95c3b0119\">L：切换显示画面上边的刻度，刻度不同，流量图形条会有变化。</p></li><li id=\"c22c95c4b01kc\"><p id=\"c22c95c5b0bx3\">j或k：向上或向下滚动屏幕显示的连接记录。</p></li><li id=\"c22c95c6b0fdx\"><p id=\"c22c95c7b02p9\">1或2或3：根据右侧显示的三列流量数据进行排序。</p></li><li id=\"c22c95c8b00kt\"><p id=\"c22c95c9b0es1\">&lt;：根据左边的本机名或IP排序。</p></li><li id=\"c22c95cab0a29\"><p id=\"c22c95cbb0911\">&gt;：根据远端目标主机的主机名或IP排序。</p></li><li id=\"c22cbcd0b0ce9\"><p id=\"c22cbcd1b0isu\">o：切换是否固定只显示当前的连接。</p></li><li id=\"c22cbcd2b09an\"><p id=\"c22cbcd3b03pz\">f：编辑过滤代码。</p></li><li id=\"c22cbcd4b0nu8\"><p id=\"c22cbcd5b0qld\">!：调用Shell命令。</p></li><li data-spm-anchor-id=\"\" id=\"c22cbcd6b0cgm\"><p id=\"c22cbcd7b0479\">q：退出。</p></li></ul></section><section id=\"fa995f10b5jyd\" class=\"section\"><h2 data-tag=\"h3\" id=\"c22cbcd8b0192\" class=\"h3\"><b>Nethogs工具的使用</b></h2><p id=\"c22cbcd9b0naj\">Nethogs是一款开源的网络流量监控工具，可用于显示每个进程的带宽占用情况。这样可以更直观定位异常流量的来源。Nethogs支持IPv4和IPv6协议，支持本地网卡及PPP连接。Nethogs工具的安装方法请参阅其官方帮助文档，本文不再详述。安装完毕，直接输入nethogs启动工具即可。不带任何参数时，Nethogs默认监控eth0。用户可以通过ifconfig等指令核实具体哪个网络接口（eth1、eth0）对应公网网卡。</p><h3 id=\"ab09ad01b5r63\">Nethogs命令</h3><p id=\"ba9bbab0b5q8l\">常见用法如下。</p><pre data-tag=\"codeblock\" id=\"b31b4212b592x\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>nethogs [-i interface]</code></pre><p id=\"b31b4213b52u9\">interface表示网络接口名，比如eth0、eth1等。如果不通过-i参数指定接口名，则默认检测第一块网卡的使用情况。</p><h3 data-tag=\"h4\" id=\"c22cbcdab08vn\" class=\"h4\"><b>使用示例</b></h3><ol id=\"c22cbcdbb0u26\"><li id=\"c22cbcdcb0wgm\"><p id=\"251c65c1b581k\"><span style=\"color:rgb(24, 24, 24)\">远程连接</span>Linux系统的<span style=\"color:rgb(24, 24, 24)\">ECS实例。</span></p><p id=\"c22ce3e0b0267\"><span style=\"color:rgb(24, 24, 24)\">具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a><span style=\"color:rgb(24, 24, 24)\">。</span></p></li><li id=\"c22ce3e1b0mzi\"><p id=\"c22ce3e2b03wb\">执行如下命令，安装nethogs流量监控工具。 \n</p><pre data-tag=\"codeblock\" id=\"c21e8c07b0bya\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install nethogs -y</code></pre></li><li id=\"c22ce3e7b0ujt\"><p id=\"c22ce3e8b08ra\">执行如下命令，查看网卡上进程级的流量信息。</p><pre data-tag=\"codeblock\" id=\"c21e8c08b0rag\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>nethogs eth1</code></pre><div type=\"note\" id=\"c22d0af0b0i95\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"c22d0af1b0mj7\" class=\"p\">nethogs默认的监控间隔是1秒，您可以通过-d参数来设定监控间隔。例如执行如下<code data-tag=\"codeph\" class=\"codeph\">nethogs eth1 -d 5</code>命令，设定监控间隔为5秒。 \n</p></div></div><p id=\"c22d0af2b0keu\">系统显示类似如下。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9471227761/p519213.png\" alt=\"5\" class=\"image break\"></p></li><li id=\"c22d0af3b0wqx\"><p id=\"c22d0af4b089g\">若确定进程是恶意程序，可以通过执行如下命令，终止进程。 </p><pre data-tag=\"codeblock\" id=\"c21e8c09b0sok\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>kill -TERM [$Port1]</code></pre><div type=\"note\" id=\"c22d0af5b0kht\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"c22d0af6b04kq\" class=\"p\">如果是Web服务程序，您可以使用iftop等工具来查询具体IP来源，然后分析Web访问日志是否为正常流量。日志分析可以使用logwatch或awstats等工具进行。\n</p></div></div><p id=\"c22d0af7b0rky\"></p></li></ol><p data-tag=\"h4\" id=\"c22d0af8b0vdv\" class=\"h4\"><b>显示结果说明</b></p><p id=\"c22d0af9b0ugf\">在nethogs监控界面，按<b>s</b>可以按照Sent列进行排序，按<b>r</b>可以按照Received列进行排序，按<b>m</b>可以切换不同的统计单位显示，例如kb/s、kb、b、mb。监控界面信息说明如下所示。</p><ul data-spm-anchor-id=\"\" id=\"c22d0afab0ype\"><li id=\"c22d3200b0v3j\"><p id=\"c22d3201b06k8\">PID列表示相应流量关联程序的进程号。</p></li><li id=\"c22d3202b03nm\"><p id=\"c22d3203b0xi3\">USER列表示相应进程的所属用户。</p></li><li id=\"c22d3204b0rmq\"><p id=\"c22d3205b0um2\">PROGRAM列表示程序的具体执行路径。</p></li><li id=\"c22d3206b0igb\"><p id=\"c22d3207b0hw2\">DEV列当前监控的网络接口名称。</p></li><li id=\"c22d3208b0q5z\"><p id=\"c22d8020b03bn\">Sent列表示相应进程已经发送的数据流量。</p></li><li id=\"c22d8021b0nsc\"><p id=\"c22d8022b0ff5\">Received列表示程序已经接收的数据流量。</p></li></ul></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/remote-desktop-connection-issue/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span>远程桌面（RDP）连接问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>远程桌面（RDP）连接问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-20 11:13:08</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-your-credentials-don-t-work-appears-when-i-remotely-log-on-to-a-windows-instance\">远程登录Windows实例提示“您的凭据不工作”如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/how-to-handle-an-authentication-error-when-connecting-to-a-windows-instance-remotely\">通过远程桌面连接Windows实例时出现“出现身份验证错误，要求的函数不受支持”如何解决?</a></li>\n <li><a href=\"/zh/ecs/support/the-error-message-no-remote-desktop-authorization-server-can-provide-a-license-is-prompted-for-remote-login-to-a-windows-instance\">通过远程桌面连接Windows实例提示“没有远程桌面授权服务器可以提供许可证”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-that-indicates-lack-of-terminal-server-user-access-permissions-appears-when-i-connect-to-a-windows-instance-by-using-remote-desktop\">通过远程桌面连接Windows实例提示“远程桌面用户组没有该权限”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/the-connection-was-denied-because-the-user-account-is-not-authorized-for-remote-login\">通过远程桌面连接Windows实例提示\"连接被拒绝，因为没有授权此用户账户进行远程登录\"错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/because-of-a-protocol-error-this-session-will-be-disconnected-please-try-connecting-to-the-remote-computer-again\">通过远程桌面连接Windows实例提示“由于协议错误，会话将被中断，请重新连接到远程计算机”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-no-remote-desktop-license-server-is-specified-appears-when-i-connect-to-a-windows-server-2008-r2-instance-by-using-remote-desktop\">通过远程桌面连接Windows Server 2008 R2系统的ECS实例时，提示“未指定远程桌面授权服务器”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/an-authentication-error-has-occurred-the-local-security-authority-cannot-be-contacted\">通过远程桌面连接Windows实例提示“发生身份验证错误，无法连接到本地安全机构”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-i-am-prompted-with-the-0x112f-error-code-when-i-connect-to-a-windows-instance-over-rdp\">通过远程桌面连接Windows实例出现报错代码“0x112f”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/remote-desktop-service-certification-due-to-remote-login-windows-instance-how-to-resolve-the-failure\">远程桌面服务认证到期导致远程登录Windows实例失败如何解决？</a></li>\n <li><a href=\"/zh/ecs/support/windows-server-2012-instances-of-ecs-system-can-t-allow-a-single-user-to-connect-multiple-remote-desktop-session\">Windows Server 2012系统的ECS实例无法允许单个用户连接多个远程桌面会话怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/after-installing-software-on-windows-instances-of-ecs-execute-the-command-from-the-command-line-tools-prompt-command-not-found-error\">在Windows系统的ECS实例上安装软件后，通过命令行工具执行命令时提示“command not found”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-allow-remote-assistance-connections-to-this-computer-option-in-remote-assistance-cannot-be-selected-for-an-instance-that-runs-windows-server-2008-or-2012\">Windows Server 2008与2012系统的ECS实例无法启用远程协助中的“允许远程协助连接这台计算机”选项怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/to-sign-in-remotely-you-need-the-right-to-sign-in-through-remote-desktop-services\">通过远程桌面连接Windows实例提示“要远程登录，你需要具有通过远程桌面服务进行登录的权限。”信息如何解决?</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-i-cannot-stay-connected-to-a-windows-instance-by-using-remote-desktop\">通过远程桌面连接Windows实例无法长时间保持连接如何解决？</a></li>\n <li><a href=\"/zh/ecs/support/winodws-via-remote-desktop-connection-system-of-ecs-instance-how-to-copy-and-paste-text-solve\">通过远程桌面连接Winodws系统的ECS实例时，无法进行文本复制粘贴如何解决？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-i-am-prompted-with-a-remote-desktop-disconnected-error-when-i-connect-to-a-windows-instance-by-using-remote-desktop\">通过远程桌面连接Windows系统的ECS实例时，提示“远程桌面连接已断开”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-i-can-log-on-to-a-windows-instance-by-using-vnc-but-cannot-use-remote-desktop-to-connect-to-the-windows-instance-with-the-same-account-and-password\">使用相同的账号和密码，通过VNC登录Windows实例成功，通过远程桌面连接Windows实例却失败怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/an-authentication-error-has-occurred-the-requested-security-package-does-not-exist\">通过远程桌面连接Windows系统的ECS实例提示“发生身份验证错误。要求的安全包不存在”错误怎么办?</a></li>\n <li><a href=\"/zh/ecs/support/windows-instance-of-rpc-component-abnormal-how-to-solve\">Windows实例的RPC组件异常如何解决？</a></li>\n <li><a href=\"/zh/ecs/support/there-is-a-problem-with-your-license-for-remote-desktop-and-the-session-will-end-in-60-minutes\">通过远程桌面连接Windows系统的ECS实例提示“你的远程桌面许可证出现问题，您的会话将在60分钟后断开连接。”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/windows-instance-via-remote-desktop-connection-prompt-remote-connection-need-computer-network-level-authentication\">通过远程桌面连接Windows实例提示“远程连接计算机需要网络级别身份验证”怎么办?</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-remote-desktop-cannot-verify-the-identity-of-the-remote-computer-appears-when-i-connect-to-a-window-instance-from-a-mac-device\">通过Mac系统的远程桌面连接Windows实例，提示“远程桌面连接无法验证您希望连接的计算机的身份”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-the-terminal-server-has-exceeded-the-maximum-number-of-allowed-connections-appears-when-i-connect-to-a-windows-instance-by-using-remote-desktop\">通过远程桌面连接Windows系统的ECS实例时，提示“终端服务器超出了最大允许连接数”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/windows-instance-via-remote-desktop-connection-failure-but-not-error-message\">通过远程桌面连接Windows实例失败但没有错误提示怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-the-system-cannot-find-the-file-specified-appears-when-i-connect-to-a-windows-instance-by-using-remote-desktop\">通过远程桌面连接Windows实例提示“系统找不到指定的文件”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/why-can-t-i-log-on-to-a-windows-instance-using\">为什么使用默认的端口（3389）无法登录Windows实例？</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/ssh-remote-connection-problems/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span>SSH远程连接问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>SSH远程连接问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-20 11:13:07</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/login-using-sftp-linux-instance-prompt-received-unexpected-end-of-file-from-sftp-server-error\">使用SFTP登录Linux实例时，提示“Received unexpected end-of-file from SFTP server”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-permission-denied-please-try-again-error-message-appears-when-i-log-on-to-a-linux-instance-as-the-root-user-by-using-ssh\">通过SSH客户端登录Linux实例时提示“Permission denied, please try again”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/the-ssh-exchange-identification-read-connection-reset-by-peer-error-is-displayed-when-you-log-on-to-an-ecs-instance-through-ssh\">使用SSH客户端登录Linux实例提示“ssh_exchange_identification: read: Connection reset by peer”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/the-user-root-not-allowed-because-not-listed-in-error-occurs-when-you-log-on-to-a-linux-instance-by-using-ssh-commands\">使用第三方SSH客户端登录Linux实例时，提示“Access denied”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/the-system-prompts-host-key-verification-failed-when-logging-on-to-the-ecs-instance-over-ssh\">使用SSH远程连接Linux系统的ECS实例时，提示“Host key verification failed”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/the-no-supported-key-exchange-algorithms-error-occurs-when-you-log-on-to-a-linux-instance-by-using-ssh-commands\">无法远程连接Linux系统的ECS实例，提示“error: Unable to load host key: /etc/ssh/ssh_host_rsa_key”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/configure-linux-to-keep-the-process-running-after-the-ssh-client-is-disconnected\">Linux系统下如何保持进程在SSH客户端断开后仍继续运行？</a></li>\n <li><a href=\"/zh/ecs/support/the-disconnected-no-supported-authentication-methods-available-error-occurs-when-you-log-on-to-a-linux-instance-by-ssh\">使用第三方SSH客户端远程连接Linux实例时，提示“No supported authentication methods available (server sent: publickey,gssapi-keyex,gssapi-with-mic)”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/remote-connection-to-a-linux-instance\">远程连接Linux实例时卡顿怎么办</a></li>\n <li><a href=\"/zh/ecs/support/the-error-while-loading-shared-libraries-error-occurs-when-you-start-the-ssh-service\">Linux系统的ECS实例中，启动SSH服务时提示“error while loading shared libraries”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-when-i-cannot-log-on-to-a-linux-instance-after-the-pam-authentication-module-is-enabled\">启用PAM认证模块后，无法登录Linux实例的解决方案</a></li>\n <li><a href=\"/zh/ecs/support/the-too-many-authentication-failures-for-root-error-occurs-when-you-log-on-to-an-instance-through-ssh\">使用第三方SSH客户端远程连接Linux实例时，提示“Too many authentication failures”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/in-linux-ecs-instances-the-following-error-fatal-cannot-bind-any-address-occurs-when-the-ssh-service-is-started\">Linux系统的ECS实例中，启动SSH服务时提示“fatal: Cannot bind any address”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/main-process-exited-code-exited-error-when-ssh-service-is-started\">Linux系统的ECS实例中，启动SSH服务时未遇到任何错误信息，但是ssh服务未启动该怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/the-bad-configuration-options-error-occurs-when-the-ssh-service-is-started\">Linux系统的ECS实例中，启动SSH服务时提示“Bad configuration options”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/multiple-consecutive-incorrect-password-accesses-to-linux-instances-through-ssh\">使用SSH客户端远程连接Linux系统的ECS实例时，提示“Maximum amount of failed attempts was reached”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/the-system-prompts-fatal-mm-request-send-write-broken-pipe-error-when-the-ssh-service-runs-abnormally-caused-by-viruses\">在Linux系统的ECS实例执行SSH命令时，提示“fatal: mm_request_send: write: Broken pipe”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/the-ssh-service-cannot-be-started-due-to-port-occupation\">Linux系统的ECS实例中，启动SSH服务提示“Failed to start OpenSSh server daemon”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/an-error-is-reported-when-you-log-on-to-an-ecs-instance-of-the-linux-system-by-using-ssh-commands\">使用SSH远程连接Linux系统的ECS实例时，提示“This account is currently not available.”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/the-system-prompts-must-be-owned-by-root-and-not-group-or-word-writable-error-when-the-ssh-service-starts\">Linux系统的ECS实例中，启动SSH服务时提示“must be owned by root and not group or world-writable”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/using-usedns-to-enable-ssh-slows-down-ssh-logon-or-data-transfer\">Linux实例中，SSH登录或数据传输速度都很慢怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/a-system-exception-occurs-on-linux-instances-after-ssh-logon-due-to-ulimit\">使用SSH远程连接Linux系统的ECS实例时，提示“could not set limit for ‘nofile’: Operation not permitted”错误怎么办？</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/through-vnc-or-workbench-instance-remote-connection-problems", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span>通过VNC/Workbench远程连接实例的问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过VNC/Workbench远程连接实例的问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-11 10:10:18</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2288926\"><div data-tag=\"body\" class=\"body\"><section id=\"f4e62a90966uh\" class=\"section\"><h2 id=\"68d0687092bb7\">Workbench远程连接问题（Linux）</h2><div id=\"cd2ecb44197ox\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"da664720196a6\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>通过Workbench远程连接Linux实例时提示连接超时，怎么办？</b></h4><div id=\"cd2ecb42196ge\" data-tag=\"expandable-content\" class=\"expandable-content\"><h4 id=\"e7edb7c219d6z\"><b>问题现象</b></h4><p id=\"e7f001b01939y\">通过Workbench工具远程连接Linux实例时提示“登录主机：i-m5e****73a (47.*.*.157:3389) 失败，原因：链接超时！”错误。<img placement=\"break\" alt=\"远程连接失败\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8688515761/p554144.png\" id=\"e7edb7c4198ga\" class=\"image break\"></p><h4 id=\"e7edb7c519h56\"><b>问题原因</b></h4><p id=\"e7f001b119mqu\">该问题通常是由以下原因导致：</p><ul id=\"e7edb7c719srs\"><li id=\"e7edb7c819kwg\"><p id=\"e7f001b2199lq\">Linux实例的安全规则中，禁止了通过Workbench工具连接目标Linux实例。</p></li><li id=\"e7edb7ca1927g\"><p id=\"e7f001b3199pc\">SSH进程使用的默认端口不是22端口。</p></li><li id=\"e7edb7cc196bs\"><p id=\"e7f001b4193ph\">Linux实例内的防火墙设置未允许Workbench工具连接目标Linux实例。</p></li></ul><h4 id=\"e7edb7ce19qb3\"><b>解决方案</b></h4><p id=\"e7f001b519pcj\">请参考以下步骤进行排查：</p><ol id=\"e7edb7d0195jb\"><li id=\"e7edb7d119eem\"><p id=\"e7f001b619axm\">查看目标Linux实例的SSH进程配置的访问端口。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/configure-the-corresponding-security-group-policy-after-enabling-the-ssh-service-for-linux-instances#5c57c291demny\">检查SSH服务</a>。</p><ul id=\"e7edb7d3196j1\"><li id=\"e7edb7d419ykl\"><p id=\"e7f028c019eev\">不是22端口</p><p id=\"e7f028c119w06\">在Workbench工具中通过修改后的SSH端口重试远程连接。</p></li><li id=\"e7edb7d719qjg\"><p id=\"e7f028c219mag\">是22端口</p><p id=\"e7f028c319kvz\">请继续下一步检查。</p></li></ul></li><li id=\"e7edb7da198a2\"><p id=\"e7f028c4194z3\">查看目标Linux实例的安全组设置，检查SSH服务的端口是否放开。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/view-security-group-rules\">查询安全组规则</a>。</p><div type=\"note\" id=\"e7edb7dc19kaz\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"e7edb7dd19w7a\"><li id=\"e7edb7de19kn2\"><p id=\"e7f028c519f7o\">此处的端口范围以SSH默认的端口22为例。如果您修改过SSH默认端口，此处应当为您修改后的端口号。</p></li><li id=\"e7edb7e019ztl\"><p id=\"e7f028c619p7u\">授权对象如果不是0.0.0.0/0，则需要同时对您需要访问的ECS实例的IP地址进行授权，此处47.96.60.0/24和118.31.243.0/24为例。</p></li></ul></div></div><table id=\"e7edb7e219dw2\" tablewidth=\"708\" tablecolswidth=\"92 85 72 105 354\" class=\"table\"><colgroup colwidth=\"0.65*\" style=\"width:12.99%\"></colgroup><colgroup colwidth=\"0.6*\" style=\"width:12.01%\"></colgroup><colgroup colwidth=\"0.51*\" style=\"width:10.17%\"></colgroup><colgroup colwidth=\"0.74*\" style=\"width:14.83%\"></colgroup><colgroup colwidth=\"2.51*\" style=\"width:50.00%\"></colgroup><tbody class=\"tbody\"><tr id=\"e7edb7e319wtn\"><td id=\"e7edb7e419t3y\" rowspan=\"1\" colspan=\"1\"><p id=\"e7f028c719hid\">规则方向</p></td><td id=\"e7edb7e619760\" rowspan=\"1\" colspan=\"1\"><p id=\"e7f028c819ql3\">授权策略</p></td><td id=\"e7edb7e819xyd\" rowspan=\"1\" colspan=\"1\"><p id=\"e7f028c919qyx\">优先级</p></td><td id=\"e7edb7ea19gig\" rowspan=\"1\" colspan=\"1\"><p id=\"e7f028ca19s3q\">端口范围</p></td><td id=\"e7edb7ec19v8b\" rowspan=\"1\" colspan=\"1\"><p id=\"e7f028cb19l0t\">授权对象</p></td></tr><tr id=\"e7edb7ee19aau\"><td id=\"e7edb7ef19vbl\" rowspan=\"1\" colspan=\"1\"><p id=\"e7f028cc1966w\">入方向</p></td><td id=\"e7edb7f119qsv\" rowspan=\"1\" colspan=\"1\"><p id=\"e7f028cd1962z\">允许</p></td><td id=\"e7edb7f319mjm\" rowspan=\"1\" colspan=\"1\"><p id=\"e7f028ce19dm8\">1</p></td><td id=\"e7edb7f519uv2\" rowspan=\"1\" colspan=\"1\"><p id=\"e7f028cf195az\">目的：22/22</p></td><td id=\"e7edb7f7199zb\" rowspan=\"1\" colspan=\"1\"><ul id=\"e7edb7f8195bf\"><li id=\"e7edb7f919da7\"><p id=\"e7f028d019mx0\">源：47.96.60.0/24和118.31.243.0/24</p></li><li id=\"e7edb7fb19qvy\"><p id=\"e7f04fd019c4e\">源：0.0.0.0/0</p></li></ul></td></tr></tbody></table><ul id=\"e7edb7fd198lk\"><li id=\"e7edb7fe1934o\"><p id=\"e7f04fd119fjv\">未放开</p><p id=\"e7f04fd219ama\">请参见上述表格，添加允许Workbench访问的安全组规则。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"e7edb8011982u\"><p id=\"e7f04fd31910i\">已放开</p><p id=\"e7f04fd4195bp\">请继续下一步检查。</p></li></ul></li><li id=\"e7edb80419xkg\"><p id=\"e7f04fd519386\">检查Linux实例中是否开启防火墙，且不允许Workbench工具连接SSH端口。检查步骤如下：</p><ol id=\"e7edb80619f2u\"><li id=\"e7edb80719qxh\"><p id=\"e7f04fd619hru\">通过阿里云VNC方式登录Linux实例。具体操作请，参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"e7edb80919h8b\"><p id=\"e7f04fd7190kh\">检查防火墙状态。</p><ul id=\"e7edb80b19ds3\"><li id=\"e7edb80c19kj1\"><p id=\"e7f04fd819rc7\">已开启，请关闭防火墙，然后重新通过Workbench工具尝试远程连接。</p></li><li id=\"e7edb80e1939l\"><p id=\"e7f04fd919ssf\">未开启，请继续执行下一步排查。</p></li></ul></li><li id=\"e7edb81019imu\"><p id=\"e7f04fda19gz0\">如果您仍然无法通过Workbench工具远程连接，建议您选择阿里云VNC工具进行远程连接。</p></li></ol></li></ol></div></div><div id=\"f50c2d6419et2\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"f6ff23c019x1b\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>通过Workbench远程连接Linux实例失败时提示拒绝连接，怎么办？</b></h4><div id=\"f50c2d6219ibh\" data-tag=\"expandable-content\" class=\"expandable-content\"><h4 id=\"c9b1f4f296vg2\"><b>问题现象</b></h4><p id=\"0316629019emo\">通过Workbench远程连接Linux实例失败，提示“登录实例失败：DefaultConnectFuture[root@/xxx.xxx.xx.xxx:22]: Failed (AnnotatedConnectException) to execyte: Connection refused: /xxx.xxx.xx.xxx:22”的错误。<img id=\"70a10f30a14af\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0169415761/p554032.jpg\" alt=\"拒绝连接\" placement=\"break\" class=\"image break\"></p><h4 id=\"c9b1f4f496ryh\"><b>问题原因</b></h4><p id=\"031662911945o\">Linux实例未开启终端连接（SSH）或远程桌面（RDP）对应的远程服务。</p><h4 id=\"c9b1f4f696xhw\"><b>解决方案</b></h4><p id=\"03166292195wi\">请排查以下问题：</p><ul id=\"c9b1f4f896odk\"><li id=\"c9b1f4f996ad2\"><p id=\"031689a019zqc\">Linux实例是否开启了终端连接（SSH）或远程桌面（RDP）对应的远程服务。若未开启需开启对应的远程服务。</p></li><li id=\"c9b1f4fb96lqk\"><p id=\"031689a1193gc\">Linux实例是否开放了连接端口。若未开放，需开放对应的连接端口，终端连接（SSH）一般开放22端口，远程桌面（RDP）开放3389端口。</p></li></ul></div></div><div id=\"0c0c643419scu\" outputclass=\"collapse\" class=\"collapse\"><h4 data-spm-anchor-id=\"a2c4g.11186623.0.i1.42f466259Pf8z5\" id=\"119e052019y78\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>通过Workbench远程连接Linux实例提示用户名或密码不正确，怎么办？</b></h4><div id=\"0c0c6432193mv\" data-tag=\"expandable-content\" class=\"expandable-content\"><h4 id=\"d7da397296c8n\"><b>问题现象</b></h4><p id=\"1c843e00198t8\">通过Workbench工具远程连接Linux实例时提示“登录实例失败，原因：用户名或密码不正确”的错误。</p><h4 id=\"d7da3975962f0\"><b>问题原因</b></h4><p id=\"1c843e0119irn\">导致此问题的常见原因如下：</p><ul id=\"d9b180e1a1sus\"><li id=\"d7da397a96oze\"><p id=\"1c843e02193a4\">复制粘贴或手动输入了错误的账号或密码。</p></li><li id=\"d7da397c96y8a\"><p id=\"1c843e0319c73\">Linux实例的SSH配置不允许root用户登录。</p></li></ul><h4 id=\"d7da397e969j4\"><b>解决方案</b></h4><p id=\"1c843e0419tfy\">请参考以下步骤进行排查：</p><ol id=\"ab2a5742a1x5y\"><li id=\"ab2a5740a1pb4\"><p id=\"1c843e0519j0q\">如果确认您输入用户名和密码是正确的，可以通过重置实例密码的操作设置新密码，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/reset-the-logon-password-of-an-instance\">重置实例登录密码</a>。</p></li><li id=\"b6faf351a1k7i\"><p id=\"1c843e0619ksk\">如果确认您输入的root用户名和密码是正确的，则可能是SSH配置中未设置允许root用户登录。您可以通过以下任意一种方式进行处理：</p><ul id=\"77518971a1miy\"><li id=\"76b6a901a1l3h\"><p id=\"1c843e0719u4x\">使用非root用户登录。</p></li><li id=\"8342c9b0a1o6w\"><p id=\"1c843e0819co1\">通过阿里云VNC工具登录root用户。</p><p id=\"1c843e09196c5\">关于如何使用阿里云VNC工具的操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p><div type=\"note\" id=\"8342c9b3a1qrv\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"1c843e0a19jqd\">如果您希望以后都可以使用root用户登录SSH，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key#section-m1n-unh-gr1\">为Linux实例开启root用户远程登录</a>。</p></div></div></li></ul></li></ol></div></div></section><section id=\"f799836096lr6\" class=\"section\"><h2 id=\"b48e878096l85\">Workbench远程连接问题（Windows）</h2><div id=\"269d62e219dfw\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"301df14019rrr\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>通过Workbench远程连接Windows实例提示连接超时，怎么办？</b></h4><div id=\"269d62e019b2t\" data-tag=\"expandable-content\" class=\"expandable-content\"><h4 id=\"5b70164196avk\"><b>问题现象</b></h4><p id=\"2d795e201924h\">通过Workbench工具远程连接Windows实例时提示“登录主机：i-m5e****73a (47.*.*.157:3389) 失败，原因：链接超时！”错误。<img placement=\"break\" alt=\"链接超时\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8688515761/p554152.png\" id=\"84320780a1mmv\" class=\"image break\"></p><h4 id=\"d4f0ea1096yvr\"><b>问题原因</b></h4><p id=\"2d79853019mdj\">导致此问题的常见原因如下：</p><ul id=\"ee548c5296b3a\"><li id=\"ee548c5096yp8\"><p id=\"2d79ac4019dqz\">Windows实例的安全组设置不允许Workbench工具连接目标Windows实例。</p></li><li id=\"f3507cf196yrd\"><p id=\"2d79d35019mx5\">远程桌面RDP端口不是默认的3389端口。</p></li><li id=\"fac6e37196zvl\"><p id=\"2d79d351191sg\">Windows实例内的防火墙设置未允许Workbench工具连接目标Windows实例。</p></li><li id=\"03f5a85196rl8\"><p id=\"2d79d35219hny\">第三方安全管理软件限制用户远程登录。</p></li></ul><h4 id=\"0adf382096vtd\"><b>解决方案</b></h4><p id=\"2d79d35319owg\">请参考以下步骤进行排查：</p><ol id=\"1b309e3196bx9\"><li id=\"1b30772096yl9\"><p id=\"2d79d35419iab\">查看目标Windows实例的RDP端口。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/how-do-i-view-and-change-the-default-port-for-remote-desktop-on-a-windows-instance#75b88a50b3wl1\">查看ECS Windows远程桌面端口</a>。</p><ul id=\"4c0142d19650b\"><li id=\"4b51c8f196iwh\"><p id=\"2d79fa6019d3m\">不是3389端口</p><p id=\"2d79fa611992w\">在Workbench工具中通过修改后的RDP端口重试远程连接。</p></li><li id=\"547c963196lg6\"><p id=\"2d79fa6219o4r\">是3389端口</p><p id=\"2d79fa6319ebo\">请继续下一步检查。</p></li></ul></li><li id=\"4a2cf801962t9\"><p id=\"2d7a217019tsh\">查看目标Windows实例的安全组设置，检查SSH服务的端口是否放开。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/view-security-group-rules\">查询安全组规则</a>。</p><div id=\"a7399df096bsu\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"a9a594e096un4\"><li id=\"a9a594e196vmy\"><p id=\"2d7a217119eha\">此处的端口范围以RDP默认的端口3389为例。如果您修改过RDP默认端口，此处应当为您修改后的端口号。</p></li><li id=\"a9a594e3961z9\"><p id=\"2d7a2172192ni\">授权对象如果不是0.0.0.0/0，则需要同时对您需要访问的ECS实例的IP地址进行授权，此处47.96.60.0/24和118.31.243.0/24为例。</p></li></ul></div></div><table id=\"bbc5ee9096ci4\" tablewidth=\"707\" tablecolswidth=\"98 85 76 153 295\" class=\"table\"><colgroup colwidth=\"0.7*\" style=\"width:13.86%\"></colgroup><colgroup colwidth=\"0.6*\" style=\"width:12.02%\"></colgroup><colgroup colwidth=\"0.54*\" style=\"width:10.75%\"></colgroup><colgroup colwidth=\"1.09*\" style=\"width:21.64%\"></colgroup><colgroup colwidth=\"2.09*\" style=\"width:41.73%\"></colgroup><tbody class=\"tbody\"><tr id=\"bbc5ee9b965i2\"><td id=\"bbc5ee9296grm\" rowspan=\"1\" colspan=\"1\"><p id=\"2d7a217319asp\">规则方向</p></td><td id=\"bbc5ee94962d7\" rowspan=\"1\" colspan=\"1\"><p id=\"2d7a217419nk5\">授权策略</p></td><td id=\"bbc5ee9696li9\" rowspan=\"1\" colspan=\"1\"><p id=\"2d7a217519zp9\">优先级</p></td><td id=\"bbc5ee989628d\" rowspan=\"1\" colspan=\"1\"><p id=\"2d7a217619msy\">端口范围</p></td><td id=\"bbc5ee9a96bsd\" rowspan=\"1\" colspan=\"1\"><p id=\"2d7a217719f3n\">授权对象</p></td></tr><tr id=\"bbc615a696y5p\"><td id=\"bbc5ee9d960wc\" rowspan=\"1\" colspan=\"1\"><p id=\"2d7a217819bp2\">入方向</p></td><td id=\"bbc5ee9f96va0\" rowspan=\"1\" colspan=\"1\"><p id=\"2d7a217919yr1\">允许</p></td><td id=\"bbc615a196n0q\" rowspan=\"1\" colspan=\"1\"><p id=\"2d7a217a199bq\">1</p></td><td id=\"bbc615a396smj\" rowspan=\"1\" colspan=\"1\"><p id=\"2d7a488019h6z\">目的：3389/3389</p></td><td id=\"bbc615a596wkx\" rowspan=\"1\" colspan=\"1\"><ul id=\"fc87b0d296ax6\"><li id=\"fc87b0d096s0z\"><p id=\"2d7a488119bms\">源：47.96.60.0/24和118.31.243.0/24</p></li><li id=\"0088036196fxc\"><p id=\"2d7a488219ywm\">源：0.0.0.0/0</p></li></ul></td></tr></tbody></table><ul id=\"0cf9e55196s6u\"><li id=\"0af69b40964ub\"><p id=\"2d7a488319uau\">未放开</p><p id=\"2d7a488419kod\">请参见上述表格，添加允许Workbench访问的安全组规则。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"462eabd196pu1\"><p id=\"2d7a488519ocx\">已放开</p><p id=\"2d7a488619s9o\">请继续下一步检查。</p></li></ul></li><li id=\"0a049a2196ebu\"><p id=\"2d7a488719pyi\">检查Windows实例中是否开启防火墙，且不允许Workbench工具连接RDP端口。检查步骤如下：</p><ol id=\"b208afe196znc\"><li id=\"891b16419645e\"><p id=\"2d7a488819o3z\">通过阿里云VNC方式登录Windows实例。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"b366e05096og9\"><p id=\"2d7a488919k7n\">检查防火墙状态。</p><ul id=\"2ba8cdb196nwr\"><li id=\"2acb660196dgn\"><p id=\"2d7a6f9019t11\">已开启，请关闭防火墙，然后通过Workbench工具重试远程连接。</p></li><li id=\"87a31c41969y0\"><p id=\"2d7a6f9119w6n\">未开启，请继续下一步检查。</p></li></ul></li></ol></li><li id=\"33efa39196581\"><p id=\"2d7a6f92197ym\">检查Windows实例中是否安装第三方安全管理软件，例如安全狗等，并且通过该软件限制用户远程登录。</p><ul id=\"35901ab196sy7\"><li id=\"347d994196bkc\"><p id=\"2d7a6f9319dei\">第三方安全管理软件限制了远程登录</p><p id=\"2d7a6f9419lq6\">请暂时关闭第三方安全管理软件对远程登录的限制，然后通过Workbench工具尝试远程连接。</p></li><li id=\"3d8e9cf1966xq\"><p id=\"2d7a6f95194re\">未通过第三方安全管理软件限制远程登录</p><p id=\"2d7a6f9619qhw\">Windows实例中可能存在其他限制远程登录的系统设置，建议您选择阿里云VNC工具进行远程连接。具体操作。请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li></ul></li></ol><p id=\"2d7a6f9719kvu\"></p></div></div><div id=\"391a347419i3o\" outputclass=\"collapse\" class=\"collapse\"><h4 data-spm-anchor-id=\"a2c4g.11186623.0.i1.42f466259Pf8z5\" id=\"40268e801981y\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>通过Workbench远程连接Windows实例提示用户名或密码不正确，怎么办？</b></h4><div id=\"391a3472195ho\" data-tag=\"expandable-content\" class=\"expandable-content\"><h4 id=\"e39f039196qux\"><b>问题现象</b></h4><p id=\"3d1b234019nyk\">通过Workbench工具远程连接Windows实例时提示“登录实例失败，原因：用户名或密码不正确”错误。</p><h4 id=\"e39f039496wk0\"><b>问题原因</b></h4><p id=\"3d1b234119atm\">导致此问题的常见原因如下：</p><ul id=\"0dcf6d31a1ofa\"><li id=\"e39f039996lbr\"><p id=\"3d1b234219623\">复制粘贴或手动输入了错误的账号或密码。</p></li><li id=\"e39f039b96ft8\"><p id=\"3d1b234319qx6\">远程登录用户不属于Remote Desktop Users组。</p></li><li id=\"2730d5c196qfw\"><p id=\"3d1b4a5019xrc\">Windows实例的本地安全策略中被添加了拒绝用户远程登录的策略。</p></li></ul><h4 id=\"e39f039d96oq6\"><b>解决方案</b></h4><p id=\"3d1b4a51194xn\">请参考以下步骤进行排查：</p><ol id=\"539805c296m3l\"><li id=\"539805c096rj2\"><p id=\"3d1b4a521945b\">检查您输入的用户名是否为Administrator。</p><ul id=\"5d79c6f196nls\"><li id=\"5cee28c196m2e\"><p id=\"3d1b4a5319laz\">非Administrator用户</p><p id=\"3d1b4a5419e4s\">Windows系统中远程桌面RDP默认的用户名为Administrator，如果您未修改过该用户名称，请尝试通过该用户名进行远程登录。</p></li><li id=\"70c448c196kjp\"><p id=\"3d1b4a5519uhx\">是Administrator用户</p><p id=\"3d1b4a5619ky5\">请继续下一步检查。</p></li></ul></li><li id=\"5b91a60196l5p\"><p id=\"3d1b4a5719x9t\">请确认您在Workbench中输入了正确的用户名和密码。</p><ul id=\"8b7a349196mso\"><li id=\"89c6df4196x2s\"><p id=\"3d1b4a5819c4a\">输入错误</p><p id=\"3d1b4a5919txu\">手动输入用户名和密码时可能存在输入错误的情况，请检查您输入的用户名和密码，确认拼写正确。</p><div id=\"e44427c196kne\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3d1b4a5a1972a\">用户名Administrator拼写错误属于远程连接失败的常见原因之一。</p></div></div></li><li id=\"931d024196wmg\"><p id=\"3d1b4a5b19p3x\">忘记密码</p><p id=\"3d1b4a5c19bii\">请重置实例密码，然后使用新密码重新登录Windows实例。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/reset-the-logon-password-of-an-instance\">重置实例登录密码</a>。</p></li><li id=\"91375251968l1\"><p id=\"3d1b4a5d19ein\">用户名和密码正确</p><p id=\"3d1b4a5e19687\">请继续下一步检查。</p></li></ul></li><li id=\"885ffc41966kx\"><p id=\"3d1b4a5f194uc\">如果您曾经修改过Windows实例中的本地安全策略，请检查本地安全策略中是否添加了拒绝用户远程登录的策略。检查方法，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-that-indicates-lack-of-terminal-server-user-access-permissions-appears-when-i-connect-to-a-windows-instance-by-using-remote-desktop\">通过远程桌面连接Windows实例提示“远程桌面用户组没有该权限”错误怎么办？</a>中的<b>本地安全策略问题的解决方法</b>章节。</p><div id=\"2461773196uxk\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3d1b7160190e0\">请先通过阿里云VNC方式登录Windows实例，然后再进行检查。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></div></div><ul id=\"41b120b1965m0\"><li id=\"221675c1961aj\"><p id=\"3d1b716119jc7\">存在拒绝用户远程登录的策略</p><p id=\"3d1b7162196zu\">在本地安全策略中移除被拒绝远程桌面登录的用户，然后重试远程连接。</p></li><li id=\"4e5cb041965ed\"><p id=\"3d1b71631945h\">未修改过本地安全策略或者不存在拒绝用户远程登录的策略</p><p id=\"3d1b716419e5l\">请继续下一步检查。</p></li></ul></li><li id=\"1a3b32f19602w\"><p id=\"3d1b716519k6v\">如果您使用非Administrator用户进行远程连接，请检查该用户是否属于Remote Desktop Users组。检查方法请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-that-indicates-lack-of-terminal-server-user-access-permissions-appears-when-i-connect-to-a-windows-instance-by-using-remote-desktop\">通过远程桌面连接Windows实例提示“远程桌面用户组没有该权限”错误怎么办？</a>中的<b>普通用户未附加远程登录权限的解决方法</b>章节。</p><ul id=\"749c8f0196ao6\"><li id=\"73a44c51968cx\"><p id=\"3d1b71661916x\">不属于Remote Desktop Users组</p><p id=\"3d1b716719dg1\">将远程连接用户添加到Remote Desktop Users组，然后重试远程连接。</p></li><li id=\"f952b5d096z7t\"><p id=\"3d1b716819qf4\">属于Remote Desktop Users组</p><p id=\"3d1b716919cmo\">Windows实例中可能存在其他限制远程登录的系统设置，建议您选择阿里云VNC工具进行远程连接。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li></ul></li></ol></div></div></section><section id=\"705d692095lw1\" class=\"section\"><h2 id=\"0c0b5d60927hj\"><b>通过VNC远程连接问题</b></h2><div id=\"61c14f3419ct5\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"6662ead019eb6\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>连接到控制台VNC后出现黑屏，怎么办？</b></h4><div id=\"61c14f3219kqk\" data-tag=\"expandable-content\" class=\"expandable-content\"><p id=\"61c14f331933i\">连接到控制台VNC后出现黑屏，说明系统处于休眠状态。根据操作系统不同，执行不同的操作：</p><ul id=\"5d2892529669n\"><li id=\"5d289250960uo\"><p id=\"65046c4019us4\">如果是Linux实例，您可以按任意键激活该实例，进入登录界面。</p></li><li id=\"62abb4509632e\"><p id=\"65046c4119zqj\">如果是Windows实例出现持续黑屏，您可以在界面左上角单击<b>发送远程命令 &gt; CTRL+ALT+DELETE</b>，进入登录界面。</p></li></ul></div></div><div id=\"7981c8c419a6h\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"7c3a320019uqp\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>控制台VNC无法访问了，怎么办？</b></h4><div id=\"7981c8c219030\" data-tag=\"expandable-content\" class=\"expandable-content\"><p id=\"7ff39080194vj\">您可以通过浏览器进入控制台VNC界面排查问题。例如使用Chrome，在键盘上按F12键显示开发者工具，然后分析Console中显示的信息。</p></div></div><div id=\"837193b019h03\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"86eb9f4019k5u\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>使用IE8.0，为什么无法使用控制台VNC？</b></h4><div id=\"83716ca21961a\" data-tag=\"expandable-content\" class=\"expandable-content\"><p id=\"83716ca3193jx\">仅支持IE10及以上版本的IE浏览器中使用控制台VNC，请下载最新版本的IE浏览器。</p><p id=\"8a5704d019dji\">建议使用Chrome浏览器，阿里云的控制台对Chrome浏览器的兼容性更好。</p></div></div><div id=\"917f7264191qe\" outputclass=\"collapse\" class=\"collapse\"><h4 class=\"expandable-title sectiontitle title\" data-tag=\"expandable-title\" id=\"95457b10190by\" data-spm-anchor-id=\"a2c4g.11186623.0.i0.21ea559a9PIOje\"><b>使用Firefox浏览器打开控制台VNC会报错安全连接失败，怎么办？</b></h4><div id=\"917f726219sq0\" data-tag=\"expandable-content\" class=\"expandable-content\"><p id=\"917f726319uav\">可能您使用的Firefox版本没有共用的加密算法。</p><p id=\"9d07b7a019su2\">建议使用Chrome浏览器，阿里云的控制台对Chrome浏览器的兼容性更好。</p></div></div><div id=\"9f615f1419naa\" outputclass=\"collapse\" class=\"collapse\"><h4 class=\"expandable-title sectiontitle title\" data-tag=\"expandable-title\" id=\"a226e7b019wpo\" data-spm-anchor-id=\"a2c4g.11186623.0.i0.77cd559akA9Y5O\"><b>使用VNC登录Windows实例后出现两个光标，怎么办？</b></h4><div id=\"9f615f1219fbz\" data-tag=\"expandable-content\" class=\"expandable-content\"><p id=\"aa34d34019vsr\">如果您使用VNC登录Windows实例（实例规格族为g7、c7、r7）后出现两个光标，请按以下步骤修改鼠标相关设置：</p><ol id=\"9522726296xku\"><li id=\"9522726096cu3\"><p id=\"aa34d341198jw\">修改控制面板中的鼠标设置。</p><ol id=\"fdb8bd2196hbi\"><li id=\"fd152a2196pc8\"><p id=\"aa34d34219hfz\">打开控制面板，将查看方式切换为<b>小图标</b>，然后单击<b>鼠标</b>。<img placement=\"break\" alt=\"p267011\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3603493761/p551446.png\" id=\"0c7fd9b096wpi\" class=\"image break\"></p></li><li id=\"0f29c40196zyf\"><p id=\"aa34fa5019u2v\">在<b>鼠标属性</b>对话框中，单击<b>指针选项</b>页签，取消选中<b>提高指针精确度</b>，然后单击<b>确定</b>。<img placement=\"break\" alt=\"p267015\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3603493761/p551447.png\" id=\"2280f00096j4s\" class=\"image break\"></p></li></ol></li><li id=\"159e990196hps\"><p id=\"aa34fa51198ay\">修改注册表中的鼠标设置。</p><div id=\"32f1ec0196loc\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"aa34fa5219huo\">如果用户登录窗口未出现两个光标，则无需修改注册表配置，请跳过本步骤。</p></div></div><ol id=\"2e92b091965gs\"><li id=\"2d72738196gjx\"><p id=\"aa34fa5319pzm\">打开注册表编辑器。</p></li><li id=\"3df326f096q4y\"><p id=\"aa34fa5419x9z\">在左侧导航栏，单击<b>HKEY_USERS</b>，然后在顶部菜单栏选择<b>编辑 &gt; 查找</b>。<img placement=\"break\" alt=\"p267020\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3603493761/p551448.png\" id=\"54fafee0961uj\" class=\"image break\"></p></li><li id=\"45bdef0096cb6\"><p id=\"aa34fa55191n8\">搜索关键字MouseSpeed，然后单击<b>查找下一个</b>。<img placement=\"break\" alt=\"p267023\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3603493761/p551450.png\" id=\"67c469d09671c\" class=\"image break\"></p></li><li id=\"5c7eabd196agb\"><p id=\"aa34fa5619coz\">双击注册表项<b>MouseSpeed</b>，将<b>数值数据</b>修改为<b>0</b>，然后单击<b>确定</b>。<img placement=\"break\" alt=\"p267024\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3603493761/p551452.png\" id=\"769411e0961b3\" class=\"image break\"></p></li></ol></li><li id=\"fc8fcd8196j5y\"><p id=\"aa34fa5719oby\">重新使用VNC登录Windows实例。</p></li></ol></div></div></section><p id=\"1aad17a092bhz\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/query-and-case-analysis-linux-cpu-load", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></span>\n <span>Linux系统的ECS实例CPU使用率或CPU负载较高问题的排查及解决方案</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例CPU使用率或CPU负载较高问题的排查及解决方案</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-09-13 18:04:31</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"a0f98230a0hn2\"><p data-tag=\"shortdesc\" id=\"a10960b6a0g73\" class=\"shortdesc\">本文主要介绍当Linux系统ECS实例CPU使用率或CPU负载较高时，如何排查分析及常见案例说明。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"ca83b6b0a0av3\" class=\"section\"><h2 id=\"n49mj\">操作场景</h2><p id=\"a51e02a0bc5yv\">在您使用ECS实例过程中，可能会遇到实例CPU使用率或CPU负载持续较高的情况，您可以按照以下步骤排查定位具体问题。</p><ol id=\"a109aedaa0sya\"><li id=\"a109d5e0a0rvx\"><p id=\"a109d5e1a0mc4\">找到影响CPU使用率或CPU负载过高的具体进程。</p></li><li id=\"a109d5e2a02e8\"><p id=\"eb6a4f00bc9fi\">排查影响CPU使用率或CPU负载过高的进程是否正常，并分类进行处理。</p><ul id=\"a109d5e5a0357\"><li data-spm-anchor-id=\"a2c4g.11186623.2.i5.6dd14c07ryhnb3\" id=\"a109d5e6a0el4\"><p id=\"a109d5e7a0us7\">对于正常进程：您需要对程序进行优化或者升配实例规格。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/upgrade-the-instance-types-of-subscription-instances\">包年包月实例升配规格</a>或<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-the-instance-type-of-a-pay-as-you-go-instance\">按量付费实例变配规格</a>。</p></li><li data-spm-anchor-id=\"a2c4g.11186623.2.i6.6dd14c07ryhnb3\" id=\"a109d5e8a0awc\"><p id=\"a109d5e9a0mt7\">对于异常进程：您可以手动对进程进行查杀，也可以使用第三方安全工具去查杀。</p></li></ul></li></ol></section><section id=\"cfb25010a0i3v\" class=\"section\"><h2 data-tag=\"h3\" id=\"a109fcf1a0p3k\" class=\"h3\"><b>CPU负载的查询分析</b></h2><p data-spm-anchor-id=\"a2c9r.12641768.0.i20.17445480Sa2Gpt\" id=\"a109fcf2a032v\">在Linux系统中，查看进程的常用命令如下所示。本文主要介绍vmstat和top常用命令的使用。</p><ul id=\"a109fcf3a068g\"><li data-spm-anchor-id=\"a2c9r.12641768.0.i20.17445480Sa2Gpt\" id=\"a109fcf4a0sy8\"><p id=\"a109fcf5a0v35\">vmstat</p></li><li id=\"a109fcf6a01d8\"><p id=\"a109fcf7a0jev\">top</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i20.17445480Sa2Gpt\" id=\"a109fcf8a0fqn\"><p id=\"a109fcf9a0r2j\">ps -aux</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i20.17445480Sa2Gpt\" id=\"a109fcfaa0zd6\"><p id=\"a109fcfba00b9\">ps -ef</p></li></ul><section id=\"e5618450behmg\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"c6ae1da0a0m96\" class=\"section\"><h3 data-tag=\"h4\" id=\"a109fcfda0d00\" class=\"h4\"><b>vmstat命令的使用</b></h3><p id=\"a109fcfea0rlq\">vmstat（VirtualMeomoryStatistics，虚拟内存统计），通过vmstat命令，从系统维度查看操作系统的虚拟内存、进程、CPU等的整体情况。</p><h4 id=\"619b3250bczfc\"><b>vmstat命令</b></h4><p id=\"52af4250b54rf\">常用vmstat命令如下所示。</p><pre id=\"9mqnld\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vmstat [-n] [delay [count]] </code></pre><div type=\"note\" id=\"c22ae810b0vm2\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"4f649c12bcad9\"><li id=\"4f649c10bc6ot\"><p id=\"c22ae812b062l\">[-n]：只在开始时显示一次各字段名称。</p></li><li id=\"50b29fe1bcqnv\"><p id=\"50b29fe0bcn0t\">[delay]：刷新时间间隔。如果不指定，只显示一条结果。</p></li><li id=\"5723f271bcrw4\"><p id=\"5723f270bc8e0\">[count]：刷新次数。如果不指定刷新次数，但指定了刷新时间间隔，这时刷新次数为无穷。</p></li></ul></div></div><h4 id=\"8c9436e0bccdg\">使用示例</h4><p id=\"c22ae814b0kef\">执行如下命令，使用vmstat每1秒统计一次各进程的CPU使用情况，连续统计4次。</p><pre id=\"a0f98231a02yt\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vmstat -n 1 4</code></pre><p id=\"a109fcffa00hp\">返回示例类似如下。</p><pre id=\"a0f98232a0xxg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----\n r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st\n 1  0      0 2684984 310452 2364304    0    0     5    17   19   35  4  2 94  0  0\n 0  0      0 2687504 310452 2362268    0    0     0   252 1942 4326  5  2 93  0  0\n 0  0      0 2687356 310460 2362252    0    0     0    68 1891 4449  3  2 95  0  0\n 0  0      0 2687252 310460 2362256    0    0     0     0 1906 4616  4  1 95  0  0</code></pre><p data-tag=\"h4\" id=\"c22ae817b0mda\" class=\"h4\"><b>显示结果主要字段说明</b></p><ul id=\"0e5379f0bcb8l\"><li id=\"0e5379f1bc42g\"><p id=\"0e5379f2bccln\">r：表示系统中CPU等待处理的线程。一个CPU每次只能处理一个线程，所以该数值越大，通常表示系统运行越慢。</p></li><li id=\"0e5379f3bct9f\"><p id=\"0e5379f4bckew\">us：用户模式消耗的CPU时间百分比。该值较高时，说明用户进程消耗的CPU时间比较多。如果该值长期超过50%，则需要对程序算法或代码等进行优化。</p></li><li id=\"0e5379f5bcerq\"><p id=\"0e5379f6bco34\">sy：内核模式消耗的CPU时间百分比。</p></li><li id=\"0e5379f7bcrt0\"><p id=\"0e5379f8bcrd0\">wa：I/O等待消耗的CPU时间百分比。该值较高时，说明IO等待比较严重，这可能是磁盘大量作随机访问造成的，也可能是磁盘性能出现了瓶颈。</p></li><li id=\"0e5379f9bc5xv\"><p id=\"0e5379fabcn0u\">id：处于空闲状态的CPU时间百分比。如果该值持续为0，同时sy是us的两倍，则通常说明系统面临CPU资源短缺。</p></li></ul></section><section id=\"c11773a0a0j8l\" class=\"section\"><h3 data-tag=\"h4\" id=\"a10a4b16a0v4x\" class=\"h4\"><b>top</b>命令的使用</h3><p id=\"09448870bclce\">top命令是Linux系统中常用的性能分析工具，可以实时显示系统中各进程的资源占用情况。</p><h4 id=\"3e89ec50bc7mt\">top命令</h4><pre id=\"a0f98233a0e8g\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>top [-n] [-d] </code></pre><ul id=\"d676e5e0bcit9\"><div id=\"ac3167f0bcawn\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"d676e5e2bcpm8\">[-n]：刷新次数。如果不指定刷新次数，但指定了刷新时间间隔，这时刷新次数为无穷。</p><p id=\"d676e5e4bca30\">[-d] ：刷新时间间隔。</p></div></div></ul><h4 id=\"ba0c76d1bc9ii\">使用示例</h4><ol id=\"c22b3634b08i1\"><li id=\"c22b5d40b0hm3\"><p id=\"a52e90b1b3w3h\">远程连接Linux系统的ECS实例。</p><p class=\"itemgroup info\" id=\"info-d6f-lre-3tc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"44a3b381bdmdl\"><p id=\"ba0c76d2bcp9x\">执行如下命令，查看系统中各进程的资源占用情况。</p><p id=\"60d542d0bd0ih\">如下命令表示：每2秒统计一次各进程相关信息，统计5次后停止。</p><pre id=\"c273cd00bcr2j\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>top -n 5 -d 2</code></pre><p id=\"7dcc1df0bd4hi\">系统显示类似如下。 </p><pre id=\"a0f98234a0tkz\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>top - 17:27:13 up 27 days,  3:13,  1 user,  load average: 0.02, 0.03, 0.05\nTasks:  94 total,   1 running,  93 sleeping,   0 stopped,   0 zombie\n%Cpu(s):  0.3 us,  0.1 sy,  0.0 ni, 99.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.1 st\nKiB Mem:   1016656 total,   946628 used,    70028 free,   169536 buffers\nKiB Swap:        0 total,        0 used,        0 free.   448644 cached Mem\nPID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND\n1 root        20   0   41412   3824   2308 S  0.0  0.4   0:19.01 systemd\n2 root        20   0       0      0      0 S  0.0  0.0   0:00.04 kthreadd</code></pre><p data-tag=\"h4\" id=\"1991bde0bcov3\" class=\"h4\"><b>显示结果主要字段说明</b></p><p id=\"a10a7226a02hp\">针对CPU使用率和CPU负载问题，您只需关注回显的第一行和第三行信息，详细说明如下。 \n</p><ul id=\"a10a7227a0t0o\"><li id=\"a10a7228a08lm\"><p id=\"a10a7229a0gln\">第一行：显示的内容<code data-tag=\"code\" class=\"code\">17:27:13 up 27 days, 3:13, 1 user, load average: 0.02, 0.03, 0.05</code>，依次为系统当前时间、系统到目前为止已运行的时间、当前登录系统的用户数量、系统负载。</p></li><li id=\"a10a722aa09la\"><p id=\"a10a722ba0ge0\">第三行：显示当前CPU资源的总体使用情况，下方会显示各个进程的资源占用情况。</p></li></ul></li><li id=\"d111b6a1bd59e\"><p id=\"d111b6a0bdgg1\">在top命令执行过程中，可以使用一些交互命令。</p><ul id=\"c93286c1bdxb0\"><li id=\"c8a3db51bd2ol\"><p id=\"c8a3db50bdedz\">通过<b data-tag=\"uicontrol\" id=\"1ff93ff8b9x8f\" class=\"uicontrol\">P</b>键，可以对CPU使用率进行倒序排列，方便定位系统中占用CPU较高的进程。</p></li><li id=\"d64feaf0bduum\"><p id=\"d6821e80bd2ke\">通过<b data-tag=\"uicontrol\" id=\"1ff93ffcb94cl\" class=\"uicontrol\">M</b>键，您可以对系统内存使用情况进行排序。如果有多核CPU，数字键1可以显示每核CPU的负载状况。</p></li></ul></li><li id=\"dc185351bds2j\"><p id=\"dc185350bdsps\">执行<code data-tag=\"code\" class=\"code\">ll /proc/PID/exe</code>命令，可以查看每个进程ID对应的程序文件。 </p></li><li id=\"eb0b3ad1bd76y\"><p id=\"eb0b3ad0bdaoo\">终止CPU消耗较大的进程。</p><ol id=\"f7f1b081bdoea\"><li id=\"f742abd1bdyy6\"><p id=\"07dfe7f0bdizc\">先写入小写字母<b data-tag=\"uicontrol\" id=\"1ff9670cb9e2a\" class=\"uicontrol\">k</b>。</p></li><li id=\"08678e81bdwzz\"><p id=\"08678e80bdm56\">输入想要终止的进程PID，按Enter键。</p><p id=\"25c5b6f0bdhr7\">默认为输出结果的第一个PID，如下图所示，假如想要终止PID为23的进程，输入23后按Enter键。 </p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0057605761/p519169.png\" class=\"image break\"></li><li id=\"425ac300bd2kc\"><p id=\"431141c0bdhpr\">操作成功后，界面会出现类似<code data-tag=\"code\" class=\"code\">Send pid 23 signal [15/sigterm]</code>的提示信息，按Enter键确认即可。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0057605761/p519170.png\" class=\"image break\"></li></ol></li></ol></section></section></section><section id=\"b43d9300a0r4f\" class=\"section\"><h2 data-tag=\"h3\" id=\"a10a9938a0zrl\" class=\"h3\"><b>常见CPU资源过高案例分析</b></h2><section id=\"a3d1c720a0645\" class=\"section\"><h3 data-tag=\"h4\" id=\"a10ae756a0md4\" class=\"h4\"><b>案例一：CPU使用率较低但负载较高</b></h3><section id=\"fadf8c30bd15l\" class=\"section\"><h4 id=\"h4-u95EEu9898u63CFu8FF0\"><b>问题现象</b></h4><p id=\"a10ae757a0b6d\">当前Linux系统没有业务程序运行。通过top命令观察，发现CPU使用率不高，但是CPU负载（load average）却非常高，如下图所示。</p><img src=\"//img.alicdn.com/tfscom/TB1Axu8KFXXXXacXpXXXXXXXXXX.png#alt=&amp;height=88&amp;width=585\" width=\"585\" height=\"NaN\" class=\"image break\"></section><section id=\"fcc4c6f0bdtbb\" class=\"section\"><h4 id=\"138a9770bcaf9\"><b>问题原因</b></h4><p id=\"16adf780bcutv\">该问题可能是因为僵尸（zombie）进程过多导致。</p><p id=\"a4d03a50bcobz\">load average是对CPU负载进行评估的，其值越高说明其任务队列越长，处于等待执行的任务越多。</p></section><section id=\"ff28a790bduo5\" class=\"section\"><h4 id=\"h4-u5904u7406u529Eu6CD5\"><b>解决方案</b></h4><p id=\"8cd83600bcxqb\">您可以通过<code data-tag=\"code\" class=\"code\">ps -axjf</code>命令查看是否存在<b data-tag=\"uicontrol\" id=\"1ff9b521b99of\" class=\"uicontrol\">D+</b>状态进程，该状态是指不可中断的睡眠状态。</p><p id=\"af8243d0bclkf\">处于该状态的进程无法终止，也无法自行退出，只能通过恢复其依赖的资源或者重启系统来解决。</p><img src=\"//img.alicdn.com/tfscom/TB1klOOKFXXXXbmaXXXXXXXXXXX.png#alt=&amp;height=122&amp;width=659\" width=\"659\" height=\"NaN\" class=\"image break\"></section></section><section id=\"f54d43a0a0w5u\" class=\"section\"><h3 data-tag=\"h4\" id=\"a10b0e63a0cvj\" class=\"h4\"><b>案例二：kswapd0进程占用CPU较高</b></h3><section id=\"d020d0b0a02c6\" class=\"section\"><h4 id=\"a0f98236a0kef\"><b>问题现象</b></h4><p id=\"a10b0e66a0t3x\">ECS实例运行卡顿，使用<code data-tag=\"code\" class=\"code\">top</code>命令查看，kswapd0进程占用了99% CPU。<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0057605761/p519171.png\" class=\"image break\"></p></section><section id=\"b6408fc0bdtql\" class=\"section\"><h4 id=\"c774a2d0bc52k\">问题原因</h4><p id=\"c8458761bc2jt\">出现该问题可能是系统此时在持续进行换页操作，导致占用大量CPU资源。</p><p id=\"aa017650bcbx8\">kswapd0是虚拟内存管理中负责换页的进程，当ECS实例物理内存不足时，kswapd0会执行换页操作，换页操作会消耗大量的CPU资源。</p></section><section id=\"b2cdcbd0a0dsj\" class=\"section\"><h4 id=\"a0f98237a08th\"><b>解决方案</b></h4><p id=\"65d75121bdlxw\">您可以通过修改vm.swappiness内核参数来控制交换空间的大小，来解决kswapd0进程占用CPU较高的问题。</p><ol id=\"afba43b0bd8c9\"><li data-spm-anchor-id=\"a2c9r.12641768.0.i0.47d05e3b5ENw6f\" id=\"29a12c24bd0t0\"><p id=\"29a12c25bd1gk\">登录Linux实例。</p><p id=\"3f210f10bdrml\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"b12370a1bdt3v\"><p id=\"b12370a0bdnn3\">查看swappiness参数。</p><pre id=\"1scnrd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /proc/sys/vm/swappiness</code></pre><p id=\"3e492b00bdf0n\">系统显示类似如下，表示当物理内存低于60%（100-40）时使用swap空间。</p><div type=\"note\" id=\"000b5f11bd8wg\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"058bc1f0bd2d3\">swappiness参数越低，表示Linux系统尽量少用swap分区，多用物理内存；swappiness参数值越高，表示使内核更多的去使用swap空间。</p></div></div><img id=\"848312c0bdvah\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8159238761/p580340.png\" alt=\"查看swap\" placement=\"break\" class=\"image break\"></li><li id=\"c01e9581bd5ax\"><p id=\"c01e9580bdthg\">根据业务需要，修改swappiness参数。</p><ol id=\"51506cd1bdlct\"><li id=\"50c1c160bdivq\"><p id=\"50c19a50bdv5t\">打开内核参数配置文件sysctl.conf。</p><pre id=\"6ad3wv\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vi /etc/sysctl.conf</code></pre></li><li id=\"8b635e51bd07c\"><p id=\"b021f440bdzlx\">根据业务需要，修改swappiness参数值。</p><p id=\"18af8c70bdvg5\">如在sysctl.conf文件中，修改<code data-tag=\"code\" class=\"code\">vm.swappiness = 10</code>。</p></li><li id=\"3b8f2920bevp0\"><p id=\"48da5410bexbp\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\"><b>:wq</b></code>保存修改。</p></li><li id=\"b6ae48e0bdldz\"><p id=\"b6ae21d0bdfsd\">重新加载sysctl配置文件，使配置生效。</p><pre id=\"rygzsn\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sysctl -p</code></pre><p id=\"7042ad50bdg2n\">若该问题还未解决，建议您升配实例规格。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/upgrade-the-instance-types-of-subscription-instances\">包年包月实例升配规格</a>或<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-the-instance-type-of-a-pay-as-you-go-instance\">按量付费实例变配规格</a>。</p></li></ol></li></ol></section></section><section id=\"a11351f0bd5qa\" class=\"section\"><h3 id=\"99e34340bdfbh\"><b>案例三：CPU使用率过高100%问题排查</b></h3><section id=\"1f7e5820bep18\" class=\"section\"><h4 id=\"19a9fc91bd8gq\"><b>问题现象</b></h4><p id=\"bd717a12bd5l0\">使用ECS实例的过程中，如果遇到CPU使用率高达100%等异常情况，且无法通过top、htop等命令查询到消耗CPU资源的具体进程。</p></section><section id=\"2143fcf0behkk\" class=\"section\"><h4 id=\"1ce30780bdroz\"><b>问题原因</b></h4><p id=\"ef508170bdc4i\">该问题可能是病毒导致。</p></section><section id=\"25799050behy0\" class=\"section\"><h4 id=\"1ea88540bdczf\"><b>解决方案</b></h4><ol id=\"13438a02bd27n\"><li id=\"13438a00bd162\"><p id=\"1111b5e1bdc7a\">查看云监控监控数据。</p><ol id=\"9928ec91bdd9z\"><li id=\"98f72e30bd6y2\"><p id=\"98f70720bd73i\">登录<a class=\"\" target=\"_blank\" href=\"https://cloudmonitornext.console.aliyun.com/newOverview\">云监控管理控制台</a>。</p></li><li id=\"9ca67a91bd6ww\"><p id=\"9ca67a90bdnov\">在左侧导航栏，单击<b data-tag=\"uicontrol\" id=\"ba9ac880bd88q\" class=\"uicontrol\">主机监控</b><b>。</b></p></li><li id=\"afd55e11bddpt\"><p id=\"afd55e10bdngu\">找到异常主机，单击操作列的<b data-tag=\"uicontrol\" id=\"ccb26fa0bd8j3\" class=\"uicontrol\">监控图表</b>。</p></li><li id=\"d634d2c1bdr18\"><p id=\"d634d2c0bdtr7\">在<b data-tag=\"uicontrol\" id=\"dbf15440bdg7j\" class=\"uicontrol\">操作系统监控</b>页签下，查看该主机的<b data-tag=\"uicontrol\" id=\"e5441be0bdzp5\" class=\"uicontrol\">CPU使用率</b>并记录具体时间点。</p></li></ol></li><li id=\"f7dd4f11bd1c2\"><p id=\"265998e0bdxls\">查看Linux实例的命令修改记录。</p><ol id=\"0890f961bdkfy\"><li id=\"07ea3210bdq5j\"><p id=\"07ea0b00bddhw\">登录Linux实例。</p><p id=\"15b65ec0bdvbo\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"0ba3deb1bdnd8\"><p id=\"0edb14e0bdrk9\">执行如下命令，查看当前Linux系统命令最近是否被修改过。</p><pre id=\"ladytx\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>stat /usr/bin/top</code></pre><p id=\"23e7e020bdiqo\">系统显示类似如下，系统命令有被修改。查看更改时间是否和云监控中CPU使用率出现100%的时间点吻合。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8159238761/p519468.png\" alt=\"CommandChanges\" width=\"500\" class=\"image break\"></li></ol></li><li id=\"164ea720bdm96\"><p id=\"164e8010bdaz7\">分别执行如下命令，查看<code data-tag=\"code\" class=\"code\">ps</code>或<code data-tag=\"code\" class=\"code\">top</code>命令是否被修改过。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"9f4d7d40be79c\" class=\"pre codeblock language-plaintext\"><code>rpm -Vf /bin/ps\nrpm -Vf /usr/bin/top</code></pre><ul id=\"23c2ca81benkq\"><li id=\"ff2be0d0beu3q\"><p id=\"27350de0be5li\">正常情况下，系统无返回修改信息。</p></li><li id=\"2be57690beffn\"><p id=\"2e1d8c40be7wp\">系统异常情况下，显示类似如下，表示<code data-tag=\"code\" class=\"code\">ps</code>和<code data-tag=\"code\" class=\"code\">top</code>命令被修改过。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8159238761/p519469.png\" alt=\"CommandQuery\" width=\"500\" class=\"image break\"></li></ul></li><li id=\"21c23f90belvl\"><p id=\"21c21880bejs1\">执行如下命令，查看当前实例是否连接到异常域名。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"8a26cbf0bex68\" class=\"pre codeblock language-plaintext\"><code>iftop -i [$Device] -n -P</code></pre><div type=\"note\" id=\"a4e4a701be2g7\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"a7a65f10bedlw\">[$Device]请替换为当前系统使用的网卡，如eth0。</p></div></div><p id=\"a35af9c0bew6i\">系统显示类似如下，若您没有连接过crypto-pool.fr，则crypto-pool.fr是异常域名。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8159238761/p519470.png\" width=\"500\" class=\"image break\"></li><li id=\"275c3141bde6m\"><p id=\"275c3140bdsvz\">综合以上表现，top、ps命令被修改，并且连接到异常域名，判断您的ECS实例已被病毒入侵，可以参考以下方案。</p><ol id=\"fb601651be45a\"><li id=\"fac1da80bexmk\"><p id=\"fac1b370bejja\">备份ECS实例数据，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></li><li id=\"0e8ed2c0bew80\"><p id=\"0e8eabb0be8xp\">重新初始化系统盘，然后使用云安全中心对ECS实例进行安全加固。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/re-initialize-a-system-disk\">重新初始化系统盘</a>和<a title=\"\" class=\"xref\" href=\"/zh/security-center/product-overview/what-is-security-center\">什么是云安全中心</a>。</p></li></ol></li></ol></section></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/troubleshooting-guidelines-when-you-cannot-remotely-log-on-to-a-linux-instance-through-ssh", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span>无法连接Linux实例的排查方法</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>无法连接Linux实例的排查方法</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-11 10:07:33</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"33d5185087od9\"><p id=\"33e2fb00875g5\" data-tag=\"shortdesc\" class=\"shortdesc\">本文主要介绍无法远程登录Linux实例的排查方法。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"e545bf40878u6\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"33e2fb02873dn\">下图为SSH远程登录的关联因素示意图，由此可见，SSH远程登录失败的可能原因较多。如PAM安全框架、安全组、SSH配置等。请您根据实际情况，通过相应的排查方法，排查并解决无法远程连接Linux实例的问题。</p><ul id=\"0ce97f40a0og6\"><li id=\"0ce97f41a042k\"><p id=\"0ce97f42a0gbt\"><a title=\"\" class=\"xref\" href=\"#1c7d23708br9f\">快速登录Linux实例</a></p></li><li id=\"0ce97f43a0a5j\"><p id=\"0ce97f44a080q\"><a title=\"\" class=\"xref\" href=\"#e454ebd474yaj\">没有明确的报错信息</a></p></li><li id=\"0ce97f45a0go2\"><p id=\"0ce97f46a0ohb\"><a title=\"\" class=\"xref\" href=\"#0b2ba7509557s\">存在明确的报错信息</a></p></li></ul><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3443032761/p519293.png\" width=\"556\" height=\"341\" class=\"image break\"></section><section id=\"1c7d23708br9f\" class=\"section\"><h2 id=\"1c7d23718bbq8\"><b>快速登录Linux实例</b></h2><p id=\"5df5e06095nbt\">如果您遇到紧急情况，需要尽快登录<b>Linux</b>实例，请参见以下操作步骤，先检查ECS实例的状态，然后通过云助手向<b>Linux</b>实例发送命令或通过VNC登录实例，具体步骤如下：</p><section id=\"b4b9f5408bnrb\" class=\"section\"><h3 id=\"3512a0418bgdi\"><b>步骤一：检查ECS实例状态</b></h3><p id=\"5df5e06195wmi\">无论何种原因导致无法远程登录ECS实例，请先检查实例的状态。只有当ECS实例为<b>运行中</b>状态时，才能对外提供业务访问。检查步骤如下：</p><ol id=\"a580d2708beuj\"><li id=\"a580d2718bzof\"><p id=\"5df5e062953pb\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"a580d2738b5jj\"><p id=\"5df5e063950pm\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"c919dca9fasiz\" class=\"uicontrol\">实例与镜像 &gt; 实例</b>。</p></li><li class=\"li step stepexpand\" id=\"a580d2758bvyl\"><p id=\"5df5e0649599h\">在顶部菜单栏左上角处，选择地域。</p></li><li class=\"li step stepexpand\" id=\"a580d2778b2e7\"><p id=\"5df5e06595gtd\">在<b data-tag=\"uicontrol\" id=\"c91a03b3fajbo\" class=\"uicontrol\">实例列表</b>页面，单击目标实例ID，查看目标实例的<b data-tag=\"uicontrol\" id=\"c91a03b5famg7\" class=\"uicontrol\">状态</b>与<b data-tag=\"uicontrol\" id=\"c91a03b7fatkq\" class=\"uicontrol\">健康状况</b>，并选择合适的登录方式。</p><ul id=\"ee0f46a18bsmu\"><li id=\"ed71f5318bv9o\"><p id=\"5df5e0669554v\">如果ECS实例生命周期状态和实例健康状况为下表所示，您可以继续<a title=\"\" class=\"xref\" href=\"#8aefb950a0943\">步骤二：通过VNC登录ECS实例</a>操作。</p><table id=\"25bd6d208bz2h\" tablewidth=\"708\" tablecolswidth=\"202 304 202\" class=\"table\"><colgroup colwidth=\"0.86*\" style=\"width:28.53%\"></colgroup><colgroup colwidth=\"1.29*\" style=\"width:42.94%\"></colgroup><colgroup colwidth=\"0.86*\" style=\"width:28.53%\"></colgroup><tbody class=\"tbody\"><tr id=\"25bd6d218bzll\"><td id=\"25bd6d228bzly\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"5df5e067953rh\"><b>实例生命周期状态</b></p></td><td id=\"25bd6d248bja6\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"5df5e06895m31\"><b>实例健康状况</b></p></td><td id=\"25bd6d268b46f\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"5df5e06995fud\"><b>登录方式</b></p></td></tr><tr id=\"25bd6d288b7hm\"><td id=\"25bd6d298b2in\" rowspan=\"1\" colspan=\"1\"><p id=\"5df5e06a95k6w\">启动中（Starting）</p></td><td id=\"25bd6d2b8bn4p\" rowspan=\"1\" colspan=\"1\"><p id=\"5df5e06b95dt8\">初始化中（Initializing）</p></td><td id=\"25bd6d2d8blzb\" rowspan=\"1\" colspan=\"1\"><p id=\"5df5e06c9583a\">VNC</p></td></tr><tr id=\"25bd6d2f8bpaa\"><td id=\"25bd6d308bt9k\" rowspan=\"2\" colspan=\"1\"><p id=\"5df5e06d95wl4\">运行中（Running）</p></td><td id=\"25bd6d328bq9u\" rowspan=\"1\" colspan=\"1\"><p id=\"5df5e06e95u54\">初始化中（Initializing）</p></td><td id=\"25bd6d348b6bh\" rowspan=\"1\" colspan=\"1\"><p id=\"5df6077095dm4\">VNC</p></td></tr><tr id=\"25bd6d368bnip\"><td id=\"25bd6d398bkg5\" rowspan=\"1\" colspan=\"1\"><p id=\"5df607739514m\">无异常（OK）/操作系统运行存在异常（Impaired）</p></td><td id=\"25bd6d3b8bj8c\" rowspan=\"1\" colspan=\"1\"><p id=\"5df6077495dxf\">VNC和Workbench</p></td></tr><tr id=\"25bd6d3d8b7y8\"><td id=\"25bd6d3e8bfkq\" rowspan=\"1\" colspan=\"1\"><p id=\"5df6077595y8v\">关机中（Stopping）</p></td><td id=\"25bd6d408bcnc\" rowspan=\"1\" colspan=\"1\"><p id=\"5df6077695zbx\">数据不足（InsufficientData）</p></td><td id=\"25bd6d428bvb7\" rowspan=\"1\" colspan=\"1\"><p id=\"5df607779513x\">VNC</p></td></tr><tr id=\"25bd6d448blgn\"><td id=\"25bd6d458b1ts\" rowspan=\"1\" colspan=\"1\"><p id=\"5df6077895ysb\">已关机（Stopped）</p></td><td id=\"25bd6d478bnie\" rowspan=\"1\" colspan=\"1\"><p id=\"5df6077995wr8\">InsufficientData</p></td><td id=\"25bd6d498b2lv\" rowspan=\"1\" colspan=\"1\"><p id=\"5df6077a95o8y\">无法登录</p></td></tr></tbody></table></li><li id=\"176bceb18bq44\"><p id=\"5df6077b95nlj\">ECS实例生命周期状态为除上表所示的其他状态时，您可以根据实例的状态，选择对应的解决方案。</p><p id=\"5df6077c95xmz\">更多ECS实例生命周期状态，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/instance-lifecycle\">实例的生命周期</a>。</p></li></ul></li></ol></section><section id=\"8aefb950a0943\" class=\"section\"><h3 id=\"8059c350a055f\"><b>步骤二：通过VNC登录ECS实例</b></h3><p id=\"8059c351a051n\">如果云助手无法使用或者无法满足您的使用需求，您还可以通过阿里云VNC工具进行远程登录，使用方法如下：</p><ol id=\"8059c352a0hne\"><li id=\"8059c353a08gb\"><p id=\"8059c354a0eji\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"8059c355a0npm\"><p id=\"8059c356a04ub\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"c91b8a55faiw1\" class=\"uicontrol\">实例与镜像 &gt; 实例</b>。</p></li><li class=\"li step stepexpand\" id=\"8059c357a0yml\"><p id=\"8059c358a0ypa\">在顶部菜单栏左上角处，选择地域。</p></li><li class=\"li step stepexpand\" id=\"8059c359a09cm\"><p id=\"8059c35aa07q4\">在<b data-tag=\"uicontrol\" id=\"c91b8a5bfan2s\" class=\"uicontrol\">实例列表</b>页面，找到需要连接的实例，单击该实例对应<b data-tag=\"uicontrol\" id=\"c91b8a5dfabm0\" class=\"uicontrol\">操作</b>列下的<b data-tag=\"uicontrol\" id=\"c91b8a5ffaf85\" class=\"uicontrol\">远程连接</b>。</p></li><li id=\"8059c35ba0q5v\"><p id=\"8059c35ca09cq\">在弹出的<b id=\"0cf794b01412v\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">远程连接</b>对话框中，单击<b id=\"ecs.rc.remote.connection-collapse-expend\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">展开其他登录方式</b>，然后单击<b id=\"ecs.rc.remote.connection-vnc-title\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">通过VNC远程连接</b>对应的<b id=\"ecs.rc.remote.connection-action-login\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">立即登录</b>。</p></li><li id=\"8059c35fa0vzu\"><p id=\"8059c360a06l4\">登录实例操作系统。</p><ol id=\"36c165711b5k4\"><li id=\"d2f7dd1014jf5\"><p id=\"35aa29101bge8\">输入登录用户（例如root、ecs-user），然后按<code data-tag=\"code\" class=\"code\">Enter</code>键。</p></li><li id=\"d4f8680114uzj\"><p id=\"35aa29111bq2w\">输入实例登录密码，然后按<code data-tag=\"code\" class=\"code\">Enter</code>键。</p><div type=\"note\" id=\"3c35ba601bv36\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3c81b7801bhce\">登录Linux实例时界面不会显示密码的输入过程。</p></div></div></li></ol></li></ol></section><section id=\"d09e6ea08b8s2\" class=\"section\"><h3 id=\"4a010e118bmsa\"><b>步骤三：通过云助手向Linux实例发送命令</b></h3><p id=\"5df6077d95wbr\">您可以尝试通过阿里云云助手向Linux实例发送命令，云助手的使用步骤如下：</p><ol id=\"87054bc08bay7\"><li id=\"87054bc18bgu6\"><p id=\"5df6077e95f1s\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"87054bc38b6zd\"><p id=\"5df6077f9511f\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"c91bd873fawkh\" class=\"uicontrol\">实例与镜像 &gt; 实例</b>。</p></li><li class=\"li step stepexpand\" id=\"a4e96d138b0a4\"><p id=\"5df62e8095nbk\">在顶部菜单栏左上角处，选择地域。</p></li><li class=\"li step stepexpand\" id=\"bb0e5f118b2fl\" props=\"china\" data-cond-props=\"china\"><p id=\"5df62e8195dif\">在<b data-tag=\"uicontrol\" id=\"c91bd879fa1dq\" class=\"uicontrol\">实例列表</b>页面，找到待操作的实例，在<b data-tag=\"uicontrol\" id=\"c91bd87bfa0nf\" class=\"uicontrol\">操作</b>中，选择<img placement=\"inline\" alt=\"image\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0881493761/p551505.png\" id=\"079ad2d096kev\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"c91bd87efa2b3\" class=\"uicontrol\"> &gt; 远程连接 &gt; 发送命令</b>。</p></li><li id=\"d32d45801bmfs\"><p id=\"d32d1e701btxd\">输入您需要执行的命令，单击<b data-tag=\"uicontrol\" id=\"d664a2c01bk96\" class=\"uicontrol\">执行</b>，即可在未登录Linux实例的情况下执行命令。</p><p id=\"5df655909540u\">更多有关云助手的信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-10\">云助手概述</a>。</p><img placement=\"break\" alt=\"发送命令\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0881493761/p551513.png\" id=\"a68dbdd0960j9\" class=\"image break\"></li></ol></section></section><section id=\"e454ebd474yaj\" class=\"section website-filter\" data-website=\"cn\"><h2 id=\"e455d638741lc\" data-tag=\"h3\" class=\"h3\"><b>没有明确的报错信息</b></h2><p id=\"d3b11721959dr\">在远程连接失败时，如果您没有收到系统返回的报错信息，并且ECS实例是<b data-tag=\"uicontrol\" id=\"4f50e7701bma2\" class=\"uicontrol\">运行中</b>状态，然后再根据以下步骤进行排查：</p><section id=\"c5e469b095uvb\" class=\"section\"><h3 id=\"c5e469b195jm1\" data-tag=\"h5\" class=\"h5\"><b>步骤一：使用阿里云Workbench工具测试远程登录</b></h3><p id=\"c5e469b295g0u\">通过阿里云提供的Workbench工具进行远程登录，Workbench工具在远程登录出现异常时会返回具体的错误信息及解决方案。测试步骤如下：</p><ol id=\"c5e469b395mc0\"><li id=\"c5e469b495njr\"><p id=\"c5e469b595ffm\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"c5e469b695gj4\"><p id=\"c5e469b795hb0\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"c91c2693fags6\" class=\"uicontrol\">实例与镜像 &gt; 实例</b>。</p></li><li class=\"li step stepexpand\" id=\"c5e469b895vtc\"><p id=\"c5e469b995zyf\">在顶部菜单栏左上角处，选择地域。</p></li><li class=\"li step stepexpand\" id=\"c5e469ba95jeg\"><p id=\"c5e469bb95rf1\">在<b data-tag=\"uicontrol\" id=\"c91c2699fas1j\" class=\"uicontrol\">实例列表</b>页面，找到需要连接的实例，单击该实例对应<b data-tag=\"uicontrol\" id=\"c91c269bfa23v\" class=\"uicontrol\">操作</b>列下的<b data-tag=\"uicontrol\" id=\"c91c269dfaz1c\" class=\"uicontrol\">远程连接</b>。</p></li><li id=\"c5e469bc95ald\"><p id=\"c5e469bd95soi\">在弹出的<b data-tag=\"uicontrol\" id=\"c91c26a1fajo0\" class=\"uicontrol\">连接与命令</b>对话框中，单击<b data-tag=\"uicontrol\" id=\"c91c4da0faklm\" class=\"uicontrol\">通过Workbench远程连接</b>对应的<b data-tag=\"uicontrol\" id=\"c91c4da2fa9pe\" class=\"uicontrol\">立即登录</b>。 </p></li><li id=\"c5e469cc95n05\"><p id=\"c5e469cd95sq7\">测试是否可以远程登录。</p><p id=\"f34c2cd01c4px\">Workbench工具将自动填充登录目标实例所需的基本信息，请确认基本信息的正确性并输入登录的用户名和认证信息。并根据以下结果进行处理：通过Workbench远程登录Linux实例的具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过Workbench远程登录Linux实例</a>。</p><ul id=\"c5e469ce95s24\"><li id=\"c5e469cf954mk\"><p id=\"c5e469d095orr\">如仍然无法登录，Workbench工具会返回错误提示和解决方案，请根据系统提示进行处理。处理完毕后重新使用Workbench工具进行远程登录测试。为了便于您解决问题，列举Workbench工具使用时常见的异常问题： <a title=\"\" class=\"xref\" href=\"/zh/ecs/support/through-vnc-or-workbench-instance-remote-connection-problems#f4e62a90966uh\">Workbench远程连接问题（Linux）</a></p></li><li id=\"c5e469d695j6w\"><p id=\"c5e469d795mh9\">如可以通过Workbench工具正常登录，说明目标实例上的SSH服务正常运行，即排除SSH服务端异常的可能性，继续执行<a title=\"\" class=\"xref\" href=\"#6f9ed9a095f25\">步骤二：检查网络</a>进行排查。</p></li></ul></li></ol></section><section id=\"6f9ed9a095f25\" class=\"section\"><h3 id=\"5edcd77095ni7\"><b>步骤二：检查网络</b></h3><p id=\"9a0ea67395d2t\">无法正常远程连接Linux实例时，需要先检查网络是否正常。</p><ol id=\"232233f0950jf\" data-spm-anchor-id=\"a2c4g.11186623.0.i55.3e8d69b0QFmYp6\"><li id=\"2322821195qu6\" data-spm-anchor-id=\"a2c4g.11186623.0.i50.3e8d69b0QFmYp6\"><p id=\"2322821095mkh\">用其他网络环境中，不同网段或不同运营商的电脑连接对比测试，判断是本地网络问题还是服务器端的问题。</p><ul id=\"26a69fc195ijo\"><li id=\"268f202095ifv\"><p id=\"268ef91095x1e\">如果是本地网络问题或运营商问题，请联系本地IT人员或运营商解决。</p></li><li id=\"297cca3195epc\"><p id=\"297cca3095pqm\">如果是网卡驱动存在异常，请重新安装。</p></li></ul></li><li id=\"2322a92995t5w\" data-spm-anchor-id=\"\"><p id=\"23228212959x0\">在本地客户端使用ping命令测试与实例的网络连通性。</p><ul id=\"2322a92895io1\" data-spm-anchor-id=\"a2c4g.11186623.0.i53.3e8d69b0QFmYp6\"><li id=\"2322a92195pev\" data-spm-anchor-id=\"\"><p id=\"2322a92095te7\">网络异常时，请进行抓取数据包进行分析，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-capture-data-packets-when-a-network-exception-occurs\">网络异常时如何抓取数据包</a>。</p></li><li id=\"2322a92395dei\" data-spm-anchor-id=\"\"><p id=\"2322a922951kq\">当出现ping丢包或ping不通时，可以通过<code data-tag=\"code\" class=\"code\">tracert</code>或<code data-tag=\"code\" class=\"code\">mtr</code>等工具进行链路测试来判断问题根源。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-the-ping-command-packet-loss-or-not-the-link-test-method\">使用ping命令丢包或不通时的链路测试方法</a>。</p></li><li id=\"2322a92595knb\" data-spm-anchor-id=\"\"><p id=\"2322a92495dex\">如果出现间歇性丢包，ECS实例的网络一直处于不稳定状态时，可能是病毒导致。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-the-ping-command-to-test-intermittent-packet-loss-of-the-ip-address-of-an-ecs-instance\">使用ping命令测试ECS实例的IP地址间歇性丢包</a></p></li><li id=\"2322a92795bkk\" data-spm-anchor-id=\"a2c4g.11186623.0.i52.3e8d69b0QFmYp6\"><p id=\"2322a92695vhv\">系统内核没有禁ping的情况下，使用ping命令测试ECS服务器，发现网络不通，可能是服务器系统内部防火墙对客户端进行了drop策略。</p><p id=\"b3cc8bc095o6s\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/solution-to-linux-ecs-instances-that-do-not-allow-ping-but-cannot-ping\">Linux系统的ECS中没有禁ping却ping不通的解决方法</a>。</p></li></ul></li></ol></section><section id=\"edeb253086lj3\" class=\"section\"><h3 id=\"e456245374wyu\" data-tag=\"h4\" class=\"h4\"><b>步骤三：检查端口和安全组</b></h3><p id=\"a43572c096non\">检查安全组配置是否允许远程连接的端口。</p><ol id=\"ada6b70186kz9\"><li id=\"abf0c9a086xva\"><p id=\"d06be3e096yc7\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"dae1f5d196620\"><p id=\"dae1f5d096nfy\">在顶部菜单栏左上角处，选择地域。</p></li><li id=\"e456245a746eb\" data-spm-anchor-id=\"a2c9r.14518950.0.i1.310f5e3bFdBaav\"><p id=\"0792129495c85\">在<b data-tag=\"uicontrol\" id=\"c91cc2d5fanl3\" class=\"uicontrol\">实例列表</b>页面，单击对应的实例ID。</p></li><li id=\"e456245c741ul\" data-spm-anchor-id=\"a2c9r.14518950.0.i1.310f5e3bFdBaav\"><p id=\"0792129595t6s\">单击<b data-tag=\"uicontrol\" id=\"c91cc2d9facqo\" class=\"uicontrol\">安全组</b>页签，在<b data-tag=\"uicontrol\" id=\"c91cc2dbfaib9\" class=\"uicontrol\">安全组列表</b>区域，单击<b data-tag=\"uicontrol\" id=\"c91ce9e1fahhz\" class=\"uicontrol\">操作</b>列的<b data-tag=\"uicontrol\" id=\"3fec20c01bj97\" class=\"uicontrol\"><span data-tag=\"ph\" id=\"51a665a01b03c\" props=\"china\" data-cond-props=\"china\" class=\"ph\">管理规则</span></b><span data-tag=\"ph\" id=\"4810efb01bc5w\" class=\"ph\"></span>。 </p></li><li id=\"e456245e74lek\"><p id=\"0792129795rn8\">选择安全组规则方向。</p></li><li id=\"e456246074tue\"><p id=\"0792129895a1h\">在<b data-tag=\"uicontrol\" id=\"c91d10f7fayyv\" class=\"uicontrol\">安全组规则</b>页面，您可以选择以下任意一种方式添加安全组规则，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。 \n</p><ul id=\"e4562462742xj\"><li id=\"e456246374cnh\"><p id=\"0792129995xhp\">方式一：快速添加安全组规则 \n</p><ul id=\"e4564b6174xv8\"><li id=\"e4564b6274rw4\"><p id=\"0792129a95ni5\"><b data-tag=\"uicontrol\" id=\"c91d1100fanui\" class=\"uicontrol\">授权策略</b><b>：</b>允许</p></li><li id=\"e4564b647412i\"><p id=\"0792129b958im\"><b data-tag=\"uicontrol\" id=\"c91d1105fa3z6\" class=\"uicontrol\">端口范围</b><b>：</b>SSH（22）</p></li><li id=\"e4564b6674uj3\"><p id=\"0792129c9504t\"><b data-tag=\"uicontrol\" id=\"c91d3803fa3dd\" class=\"uicontrol\">授权对象</b><b>：</b>0.0.0.0/0（代表所有IP访问）</p></li></ul></li><li id=\"e4564b69749ol\"><p id=\"0792129d95c3g\">方式二：手动添加安全组规则 \n</p><ul id=\"e4564b6b749io\"><li id=\"e4564b6c74zy0\"><p id=\"0792129e95wvx\"><b data-tag=\"uicontrol\" id=\"c91d380bfavy6\" class=\"uicontrol\">授权策略</b><b>：</b>允许</p></li><li id=\"e4564b6e749b6\"><p id=\"0792129f95fl4\"><b data-tag=\"uicontrol\" id=\"c91d3810fahnx\" class=\"uicontrol\">优先级</b><b>：</b>1（代表安全规则中优先级最高，数字越小优先级越高）</p></li><li id=\"e4564b7074hcv\"><p id=\"079212a095u53\"><b data-tag=\"uicontrol\" id=\"c91d3815fa0hm\" class=\"uicontrol\">协议类型</b><b>：</b>自定义（TCP）</p></li><li id=\"e4564b7274fr6\"><p id=\"079212a195dmw\"><b data-tag=\"uicontrol\" id=\"c91d5f10fa5kl\" class=\"uicontrol\">端口范围</b><b>：</b>SSH（22）</p></li><li id=\"e4564b7474mcr\" data-spm-anchor-id=\"a2c9r.14518950.0.i5.673aiQGniQGnTN\"><p id=\"079239a095kxn\"><b data-tag=\"uicontrol\" id=\"c91d5f15faswu\" class=\"uicontrol\">授权对象</b><b>：</b>0.0.0.0/0（代表所有IP访问，也可根据需要，自定义设置授权对象）</p></li></ul></li></ul></li><li id=\"e456727574qt7\"><p id=\"079239a395g5x\">使用以下命令，进行端口测试，判断端口是否正常。</p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"e43b224174cxd\" class=\"pre codeblock language-javascript\"><code>telnet [$IP] [$Port]</code></pre><div id=\"e4567277748k2\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><section id=\"e4567278742od\" class=\"section\"><ul id=\"e456727a74sk9\"><li id=\"e456727b74o6z\"><p id=\"079239a495x97\">[$IP]指Linux实例的IP地址。</p></li><li id=\"e456727d74ihf\"><p id=\"079239a5957du\">[$Port]指Linux实例的RDP端口号。</p></li></ul></section></div></div><p id=\"079239a695kyy\">系统显示类似如下，比如执行<code data-tag=\"code\" class=\"code\">telnet 192.168.0.1 22</code>命令，正常情况下返回结果类似如下。 </p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"e43b224274brz\" class=\"pre codeblock language-javascript\"><code>Trying 192.168.0.1 ...\nConnected to 192.168.0.1.\nEscape character is '^]'</code></pre><p id=\"079239a795ewp\">如果端口测试失败，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/troubleshooting-for-ping-attempts-to-pass-the-server-and-port-disconnection\">使用ping命令正常但端口不通时的端口可用性探测说明</a>进行排查。 </p></li></ol></section><section id=\"c5e780f0862e5\" class=\"section\"><h3 id=\"0afba9c095ti7\" data-tag=\"h4\" class=\"h4\"><b>步骤四：检查CPU负载、带宽及内存使用情况</b></h3><p id=\"0c33185095uol\">无法正常远程连接Linux实例时，可能是因为CPU负载、带宽不足或内存不足导致。</p><ol id=\"e456e7a4740vv\"><li id=\"e456e7a574j7f\"><p id=\"08e6374195d53\">根据是否存在CPU负载过高情况，选择相应操作。</p><ul id=\"c507e3a186j4p\"><li id=\"c3f932c086wmp\"><p id=\"23d2154095kpp\">存在CPU负载过高情况。</p><p id=\"3c562cf0959bf\">若应用程序有大量的磁盘访问、网络访问行为、高计算需求，CPU负载过高是正常结果。建议您升配实例规格来解决资源瓶颈问题，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-of-instance-configuration-changes\">升降配方式概述</a>。</p><div id=\"668e0bc095mn1\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"5e6a755095zge\">CPU负载过高的解决方法，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/query-and-case-analysis-linux-cpu-load\">Linux系统CPU负载的查询和案例分析</a>。</p></div></div></li><li id=\"61051d6095bmq\"><p id=\"4653504095gqk\">不存在CPU负载过高情况，请继续下一步排查。</p></li></ul></li><li id=\"e456e7b174waj\" data-spm-anchor-id=\"a2c9r.12641779.0.i1.40d8kG22kG22UK\"><p id=\"08e6374795w9z\">排查是否存在公网带宽不足问题。 </p><p id=\"08e6374895e36\">无法远程连接可能是公网带宽不足导致的，具体排查方法如下。</p><ol id=\"e4570eb0749p5\" start=\"1\"><li id=\"e4575cd0740cd\"><p id=\"08e6374995mj2\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"abed14c386o4t\"><p id=\"08e6374a955g7\">在顶部菜单栏左上角处，选择地域。</p></li><li id=\"abed14c586j2g\" data-spm-anchor-id=\"a2c9r.14518950.0.i1.310f5e3bFdBaav\"><p id=\"08e6374b9578f\">在<b data-tag=\"uicontrol\" id=\"c91dad3efacjq\" class=\"uicontrol\">实例列表</b>页面，单击对应的实例ID，在<b data-tag=\"uicontrol\" id=\"c91dad40faj7b\" class=\"uicontrol\">基本信息</b>区域，查看<b data-tag=\"uicontrol\" id=\"c91dad42fadw0\" class=\"uicontrol\">当前使用带宽</b>。</p><p id=\"08e6374c95qda\">如果服务器带宽为0 Mbps，说明购买实例时没有购买公网带宽，您可以通过升级带宽解决，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-of-instance-configuration-changes#ChangeBandwidth\">修改公网带宽</a>。</p></li></ol></li><li id=\"e4575cd874doz\" data-spm-anchor-id=\"a2c9r.12641779.0.i1.40d8kG22kG22UK\"><p id=\"08e65e5095btw\">排查是否存在内存不足问题。</p><p id=\"08e65e5195a96\">远程连接Linux实例后，不能正常显示桌面并直接退出，也没有错误信息提示。这种情况可能是服务器内存不足导致，需要检查服务器的内存使用情况。具体操作如下。 </p><ol id=\"4759711186bsn\"><li id=\"3d34173086bdf\"><p id=\"08e65e5295r1n\">使用VNC方式登录Linux实例。</p><p id=\"08e65e5395zdz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"e45783e574lju\"><p id=\"08e65e549535a\">查看内存使用情况，如果存在内存不足情况，建议您升配实例规格来解决资源瓶颈问题，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-of-instance-configuration-changes\">升降配方式概述</a>。</p><p id=\"83d0ab009579b\">查看内存的操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-view-physical-cpu-and-memory-information-for-ecs-instances-in-linux\">Linux系统的ECS实例中如何查看物理CPU和内存信息</a>。</p></li></ol></li></ol></section></section><section id=\"0b2ba7509557s\" class=\"section\"><h2 id=\"08b995e095htu\" data-tag=\"h3\" class=\"h3\"><b>存在明确的报错信息</b></h2><p id=\"18f0e44095dn9\">远程登录失败时，系统通常会返回报错信息。您可以根据报错信息，快速定位问题原因及解决方案。</p><section id=\"df7beb00958w9\" class=\"section\"><h3 data-tag=\"h4\" id=\"4ca60b3095png\" class=\"h4\"><b>PAM安全框架</b></h3><p id=\"4ca60b31955q8\">Linux系统的PAM安全框架可以加载相关安全模块，对云服务器的账户策略、登录策略等进行访问控制。如果相关配置存在异常，或触发了相关策略，就可能会导致SSH登录失败。根据不同报错信息，可参见如下常见案例进行解决：</p><ul id=\"7e510a42958q7\"><li id=\"7e510a40952wl\"><p id=\"7d913cb095u8i\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/you-cannot-log-on-to-the-ecs-instance-of-the-linux-by-using-the-correct-password\">使用正确的密码无法登录Linux系统的ECS实例</a></p></li><li id=\"9d1922f195ioc\"><p id=\"9d1922f095qsm\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-when-i-cannot-log-on-to-a-linux-instance-after-the-pam-authentication-module-is-enabled\">使用SSH登录Linux系统的ECS实例时提示“requirement \"uid &gt;= 1000\" not met by user \"root\"”错误</a></p></li><li id=\"b153f831959uo\"><p id=\"b153f83095sx0\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/multiple-consecutive-incorrect-password-accesses-to-linux-instances-through-ssh\">SSH登录Linux实例时多次连续错误输入密码导致用户锁定</a></p></li><li id=\"c6de09c195457\"><p id=\"c6de09c09589x\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/what-do-i-do-if-i-cannot-log-on-to-a-linux-instance-and-the-login-module-is-unknown-error-is-reported\">登录Linux实例失败并报“login: Module is unknown”错误如何处理</a></p></li></ul></section><section id=\"7245bce09544k\" class=\"section\"><h3 data-tag=\"h4\" id=\"4ca60b3b95zu3\" class=\"h4\"><b>Linux实例系统环境配置</b></h3><p id=\"4ca60b3c95wk7\">Linux内的系统环境，例如中毒、账户配置、环境变量配置等，如果出现异常，也可能会导致SSH登录失败。根据不同报错信息，可参见如下常见案例进行解决：</p><ul id=\"00e49f319581y\"><li id=\"f2efc6c095gdx\"><p id=\"f2ef9fb09529d\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-ssh-exchange-identification-read-connection-reset-by-peer-error-is-displayed-when-you-log-on-to-an-ecs-instance-through-ssh\">SSH登录ECS实例提示“ssh_exchange_identification: read: Connection reset by peer”错误</a></p></li><li id=\"026ee8b1951nr\"><p id=\"026ee8b095bm7\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-system-prompts-fatal-mm-request-send-write-broken-pipe-error-when-the-ssh-service-runs-abnormally-caused-by-viruses\">病毒引发SSH服务运行异常系统提示“fatal: mm_request_send: write: Broken pipe”错误</a></p></li><li id=\"14d96ac095avs\"><p id=\"14d943b095jy6\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/main-process-exited-code-exited-error-when-ssh-service-is-started\">SSH服务启动时报“main process exited, code=exited”错误</a></p></li><li id=\"28b6ddc0956aa\"><p id=\"28b6b6b095m5n\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/a-system-exception-occurs-on-linux-instances-after-ssh-logon-due-to-ulimit\">Linux实例由于Ulimit限制原因导致SSH登录后系统异常</a></p></li><li id=\"40942e2195ymt\"><p id=\"40942e20957eb\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/an-error-is-reported-when-you-log-on-to-an-ecs-instance-of-the-linux-system-by-using-ssh-commands\">使用SSH命令登录Linux系统的ECS实例时出现报错</a></p></li><li id=\"5b92bbb195at4\"><p id=\"5b92bbb095ufk\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/an-ssh-remote-connection-exception-occurs-in-a-linux-instance-because-the-selinux-service-is-enabled\">Linux实例中由于SELinux服务开启导致SSH远程连接异常</a></p></li></ul></section><section id=\"7858c2d095me8\" class=\"section\"><h3 data-tag=\"h4\" id=\"4ca60b4a958yw\" class=\"h4\"><b>SSH服务及参数配置</b></h3><p id=\"4ca60b4b95cxe\">SSH服务的默认配置文件为<code data-tag=\"code\" class=\"code\">/etc/ssh/sshd_config</code>。配置文件中的相关参数配置异常，或启用了相关特性或策略，也可能会导致SSH登录失败。根据不同报错信息，可参见如下常见案例进行解决：</p><ul id=\"c32bbab295h9n\"><li id=\"c32bbab0953no\"><p id=\"c0c3463095s38\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-disconnected-no-supported-authentication-methods-available-error-occurs-when-you-log-on-to-a-linux-instance-by-ssh\">SSH登录Linux实例时出现\"Disconnected:No supported authentication methods available\"错误</a></p></li><li id=\"d41764f195gvf\"><p id=\"d41764f095020\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-user-root-not-allowed-because-not-listed-in-error-occurs-when-you-log-on-to-a-linux-instance-by-using-ssh-commands\">使用SSH命令登录Linux实例时出现“User root not allowed because not listed in”错误</a></p></li><li id=\"e3b95120955n3\"><p id=\"e3b92a10953rb\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-if-the-permission-denied-please-try-again-error-message-appears-when-i-log-on-to-a-linux-instance-as-the-root-user-by-using-ssh\">使用root用户通过SSH登录Linux实例时报“Permission denied, please try again”的错误</a></p></li><li id=\"f2bbf01195wix\"><p id=\"f2bbf01095u7i\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-too-many-authentication-failures-for-root-error-occurs-when-you-log-on-to-an-instance-through-ssh\">使用SSH登录实例时出现“Too many authentication failures for root”错误</a></p></li><li id=\"0977cae095eva\"><p id=\"0977a3d095akq\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-error-while-loading-shared-libraries-error-occurs-when-you-start-the-ssh-service\">启动SSH服务时出现“error while loading shared libraries”错误</a></p></li><li id=\"1cb5064195776\"><p id=\"1cb506409568r\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/in-linux-ecs-instances-the-following-error-fatal-cannot-bind-any-address-occurs-when-the-ssh-service-is-started\">在Linux系统的ECS实例中SSH服务启动时出现如下错误“fatal: Cannot bind any address”</a></p></li><li id=\"2e4b215195drp\"><p id=\"2e4b215095ri9\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-bad-configuration-options-error-occurs-when-the-ssh-service-is-started\">启动SSH服务时出现“Bad configuration options”错误</a></p></li><li id=\"4889e15195sip\"><p id=\"4889e15095qga\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/using-usedns-to-enable-ssh-slows-down-ssh-logon-or-data-transfer\">SSH启用UseDNS导致SSH登录或数据传输速度变慢</a></p></li></ul></section><section id=\"78f92c1095bab\" class=\"section\"><h3 data-tag=\"h4\" id=\"4ca60b5f950ls\" class=\"h4\"><b>SSH服务关联目录或文件配置</b></h3><p id=\"4ca60b60950ep\">SSH服务基于安全性考虑，在运行时，会对相关目录或文件的权限配置、属组等进行检查。过高或过低的权限配置，都可能会引发服务运行异常，进而导致客户端登录失败。根据不同报错信息，可参见如下常见案例进行解决：</p><ul id=\"859133a295foi\"><li id=\"859133a095fp8\"><p id=\"84afd45095t27\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-no-supported-key-exchange-algorithms-error-occurs-when-you-log-on-to-a-linux-instance-by-using-ssh-commands\">使用SSH命令登录Linux实例时出现“No supported key exchange algorithms”错误</a></p></li><li id=\"90b07de095h7y\"><p id=\"90b056d095cwv\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-system-prompts-must-be-owned-by-root-and-not-group-or-word-writable-error-when-the-ssh-service-starts\">SSH服务启动时系统提示“must be owned by root and not group or word-writable”错误</a></p></li></ul></section><section id=\"1495e73095zan\" class=\"section\"><h3 data-tag=\"h4\" id=\"4ca60b6695ojj\" class=\"h4\"><b>SSH服务密钥配置</b></h3><p id=\"4ca60b6795p5c\">SSH服务采用非对称加密技术，对所传输的数据进行加密。客户端及服务端会交换和校验相关密钥信息的有效性。根据不同报错信息，可参见如下常见案例进行解决：</p><p id=\"fe52bed095db8\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-system-prompts-host-key-verification-failed-when-logging-on-to-the-ecs-instance-over-ssh\">使用SSH登录ECS实例时提示“Host key verification failed”错误</a></p></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-cpu-utilization-is-high-on-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></span>\n <span>Windows系统ECS实例中CPU使用率较高问题的排查及解决方案</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows系统ECS实例中CPU使用率较高问题的排查及解决方案</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-20 09:55:27</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"4be3d0a086t6n\"><p id=\"4bf13e20867av\" data-tag=\"shortdesc\" class=\"shortdesc\">本文主要介绍Windows系统ECS实例中CPU使用率较高问题的排查及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"dde62120bedht\" class=\"section\"><h2 id=\"e40dcb708dkpv\"><b>问题现象</b></h2><p id=\"eb9cc3008dalb\">Windows系统ECS实例中CPU使用率较高，即CPU使用率≥80%。</p></section><section id=\"e0d8ad30ben85\" class=\"section\"><h2 id=\"e9bdfc408f4da\" data-spm-anchor-id=\"a2c4g.11186623.0.i1.497757dbIWdlja\" jc=\"start\" style=\"text-align:start\"><b>问题原因</b></h2><p id=\"d59fa4588dagw\">CPU使用率较高可能有以下原因。</p><ul id=\"dc36ce628d39l\"><li id=\"dc36ce608d1ko\"><p id=\"dbb1bfe08d9wu\">ECS实例遭到病毒木马入侵。</p></li><li id=\"dd690cd18deva\"><p id=\"dd690cd08ddzp\">ECS实例中第三方杀毒软件运行。</p></li><li id=\"de313ed18dem5\"><p id=\"de313ed08d2v3\">ECS实例中应用程序异常、驱动异常、高I/O使用率或高中断处理的应用程序。</p></li></ul></section><section id=\"e601c850bervt\" class=\"section\"><h2 id=\"n49mj\">解决方案</h2><section id=\"3638c170be7to\" class=\"section\"><h3 id=\"4bf1b35686z30\" data-tag=\"h3\" class=\"h3\"><b>步骤一：定位问题</b></h3><p id=\"4bf1b35786ejg\">通过微软工具（任务管理器、资源监视器等）抓取系统Full Memory Dump，来定位CPU使用率过高的问题。在流量大的情况下，您还可以使用Wireshark抓取一段时间的网络包，分析流量使用情况。</p><p id=\"665ea720bemvc\">本文以资源监视器为例，介绍如何定位CPU使用率较高的问题。其他常见工具，请参见<a title=\"\" class=\"xref\" href=\"#218e9320beuwv\">常见工具</a>。</p><div id=\"799fac118da4f\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"79cb28e08ddiq\">Windows Server 2008以上系统，通常使用系统自带的资源监视器监控CPU。</p></div></div><ol id=\"4bf1b35b86d6p\"><li id=\"4bf1b35c86hdr\"><p id=\"4bf1b35d86jvz\">通过VNC方式连接ECS实例。</p><p id=\"577da8108df6f\">具体信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">ECS实例连接方式概述</a>。</p></li><li id=\"8a3a02008d37c\"><p id=\"8a39daf08dv89\">在桌面底部单击<b data-tag=\"uicontrol\" id=\"45183d77beqk8\" class=\"uicontrol\">开始</b>菜单，选择<b data-tag=\"uicontrol\" id=\"45183d79be286\" class=\"uicontrol\">运行</b>。</p></li><li id=\"4bf1b35e8606t\"><p id=\"4bf1b35f86519\">在<b data-tag=\"uicontrol\" id=\"fcf8fe70bejxr\" class=\"uicontrol\">运行</b>框中输入<code data-tag=\"code\" class=\"code\">perfmon -res</code>，单击<b data-tag=\"uicontrol\" id=\"45183d7ebesg9\" class=\"uicontrol\">确定</b>。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7253992761/p519006.png\" alt=\"1\" class=\"image break\"></li><li id=\"4bf1b36086rm4\"><p id=\"4bf1b3618661y\">在<b data-tag=\"uicontrol\" id=\"08978ad0bezbu\" class=\"uicontrol\">资源监视器</b>页面中，查看各进程是否有CPU使用率过高的现象。</p><img width=\"500\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7253992761/p519007.png\" alt=\"2\" class=\"image break\"></li><li id=\"4bf1da60865j7\"><p id=\"4bf1da61861pu\">针对占用CPU资源较高的进程，查看对应的进程ID和进程的程序名。</p></li><li id=\"4bf1da62862xh\"><p id=\"4bf1da6386nxi\">定位进程ID后，结合任务管理器判断程序是否异常并定位程序的具体位置。 \n</p><ol id=\"4bf1da6486l4k\"><li id=\"4bf1da65864bc\"><p id=\"4bf1da6686z1x\">定位异常进程前，需要在任务管理器中依次单击<b data-tag=\"uicontrol\" id=\"4518648cbexwd\" class=\"uicontrol\">查看(V) &gt; 选择列(S)...</b>。 </p><img width=\"500\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7253992761/p519008.png\" alt=\"3\" class=\"image break\"></li><li id=\"4bf1da6786lmb\"><p id=\"4bf1da6886s9w\">在弹出的框中选择<b data-tag=\"uicontrol\" id=\"45188b91beh07\" class=\"uicontrol\">PID（进程标识符）</b>，单击<b data-tag=\"uicontrol\" id=\"45188b93beenk\" class=\"uicontrol\">确定</b>。 </p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7253992761/p519009.png\" alt=\"4\" class=\"image break\"></li><li id=\"4bf1da6986jtl\"><p id=\"4bf1da6a86n4p\">在任务管理器的进程页面中，单击<b data-tag=\"uicontrol\" id=\"45188b98beu1e\" class=\"uicontrol\">PID</b>，通过排序，找到之前资源监视器查看到的异常进程。右键单击进程名称，选择<b data-tag=\"uicontrol\" id=\"45188b9aberyb\" class=\"uicontrol\">打开文件位置</b>，查看进程是否为恶意程序。</p></li></ol></li></ol></section><section id=\"806a2220beg4v\" class=\"section\"><h3 id=\"4bf1da6d86a96\" data-tag=\"h3\" class=\"h3\"><b>步骤二：分析处理</b></h3><p id=\"4bf2017186kgx\">判断影响CPU使用率过高的进程属于正常进程或是异常进程，并按照下述相应步骤处理。</p><table id=\"6e5563c08d8kz\" class=\"table\"><colgroup colwidth=\"0.29*\" style=\"width:14.50%\"></colgroup><colgroup colwidth=\"1.71*\" style=\"width:85.50%\"></colgroup><tbody class=\"tbody\"><tr id=\"6e5563c58dm52\"><td id=\"6e5563c28dekk\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"6e5563c18dojv\"><b>可能原因</b></p></td><td id=\"6e5563c48dntd\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"6e5563c38dhbk\"><b>具体操作</b></p></td></tr><tr id=\"6e5563ca8dr7c\" style=\"height:366px\"><td id=\"6e5563c78dbqa\" rowspan=\"1\" colspan=\"1\"><p id=\"7c2130608dm2h\">正常进程</p></td><td id=\"6e5563c98dos7\" rowspan=\"1\" colspan=\"1\"><p id=\"a7f4abe18dtmh\">一般情况下，当频繁访问业务，或由于Windows自身服务（更新服务等）都可能会占用较高网络流量和CPU 。</p><div id=\"a7f4abe28dyu3\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"e4a5eef28dslf\"><li id=\"e4a5eef08dhqc\"><p id=\"a7f4abe38d0ze\">Windows Server 2008或Windows Server 2012实例建议内存配置在2 GiB或者2 GiB以上。</p></li><li id=\"e577e4f18dtke\"><p id=\"e0cf44708dpxc\">在使用Windows Server 2012的1 vCPU 1 GiB规格的实例时，Windows Update服务会自动更新，实例的CPU使用率也会突然升高，这是正常现象。</p></li></ul></div></div><ul id=\"8ad8bc908d9e7\"><li id=\"8ad8bc918d6de\"><p id=\"8ad8bc928d1s5\">检查后台是否有执行Windows Update的行为。</p></li><li id=\"8ad8bc938dkd0\"><p id=\"8ad8bc948dz11\">建议在服务器上安装杀毒软件进行杀毒。如有安装杀毒软件，请检查CPU使用率较高时，杀毒软件是否在后台执行扫描操作。如果可能，请升级杀毒软件到最新版本，或者删除杀毒软件。</p></li><li id=\"8ad8bc958dfcv\"><p id=\"8ad8bc968dxdi\">检查该ECS内应用程序是否有大量的磁盘访问、网络访问行为或高计算需求。通过尝试增配实例规格的方式，使用更多核数或内存的规格来解决资源瓶颈问题。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-of-instance-configuration-changes\">升降配方式概述</a>。</p></li><li id=\"8ad8bc978dxdl\"><p id=\"8ad8bc988dnth\">若自身服务器配置较高，再去升级配置已无太大意义。架构方面也并非是服务器配置越高就越好。此时，您需要尝试进行应用分离，通过不同的服务器去承载不同的应用，同时对相关程序进行优化。</p><p id=\"8ad8bc998db0q\">比如数据库完全通过RDS来承载，减轻服务器本身的资源消耗和服务器内部大量的调用。而程序优化方面，您可以根据自身的配置状况进行调整，具体的操作有调整连接数、缓存配置、Web和数据库调用时的各项参数等。</p></li></ul></td></tr><tr id=\"71acf3308dzbz\"><td id=\"71acf3328d7zz\" rowspan=\"1\" colspan=\"1\"><p id=\"7d894be08d5rn\">异常进程</p></td><td id=\"71acf3348dbhi\" rowspan=\"1\" colspan=\"1\"><p id=\"a35840618d2yc\">对于CPU异常使用率过高的情况，可能是被恶意病毒、木马入侵导致的。有时三方恶意程序可能会利用操作系统的svchost.exe或者Tcpsvcs.exe来伪装，引起高CPU的占用。您需要手动对异常进程进行查杀。</p><div id=\"a35840628da3e\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"a35840638d8qk\">若您无法判断进程是否为病毒或木马，建议将进程名称在网上进行搜索后确认。另外，建议您进行进程删除操作前，创建快照完成备份。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ul id=\"964674f08df89\"><li id=\"964674f18d0i4\"><p id=\"964674f28dvqc\">使用商业版杀毒软件，或使用微软免费安全工具<a class=\"\" target=\"_blank\" href=\"https://www.microsoft.com/security/scanner/zh-cn/default.aspx\">Microsoft Safety Scanner</a>，在安全模式下进行扫描杀毒。</p></li><li id=\"964674f38dg9g\"><p id=\"964674f48d8hp\">运行Windows Update来安装最新的微软安全补丁。</p></li><li id=\"964674f58dvek\"><p id=\"964674f68di9z\">使用MSconfig禁用所有非微软自带服务驱动，检查问题是否再次发生，具体操作请参考<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://support.microsoft.com/zh-cn/help/929135/how-to-perform-a-clean-boot-in-windows\">如何在Windows系统中执行干净启动</a>。</p></li><li id=\"964674f78d9ry\"><p id=\"964674f88dwei\">若服务器或站点遭受DDoS攻击或CC攻击等，短期内产生大量的访问需求。您可以登录<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://yundun.console.aliyun.com/\">云安全中心</a>，查看云安全中心中的防护DDoS攻击是否调整好阈值，并核实是否开启CC防护。如果攻击没有触发到阈值，云安全中心没有清洗，可以联系售后协助开起清理。</p></li></ul></td></tr></tbody></table></section></section><section id=\"218e9320beuwv\" class=\"section\"><h2 id=\"4bf312e686njc\" data-tag=\"h3\" class=\"h3\"><b>常见工具</b></h2><p id=\"h2-windows-\">以下是关于Windows系统中定位CPU使用率过高问题工具的简要说明。</p><section id=\"70b024a0be7bg\" class=\"section\"><h3 id=\"4bf312e88603b\" data-tag=\"h4\" class=\"h4\"><b>任务管理器</b></h3><p id=\"4bf312eb86sbf\">任务管理器可以直观查看应用程序列表，定位占用CPU较高的应用程序，如下是任务管理器页面。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7253992761/p519010.png\" width=\"512\" height=\"364\" class=\"image break\"></p><p id=\"4bf312ed86n71\">在性能页面检查CPU使用率时，右键单击CPU使用率图示，单击<b data-tag=\"uicontrol\" id=\"4519c41cbezct\" class=\"uicontrol\">将图形更改为 &gt; 逻辑处理器</b>。</p><p id=\"eff9e5208d7un\">如下图显示了4个逻辑CPU的使用率。 </p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7253992761/p519011.png\" width=\"514\" height=\"423\" class=\"image break\"><p id=\"4bf312ef86bym\">当单个进程的CPU使用率飙升至接近100%时，而其它进程的CPU使用率变化不大，则可能是网络I/O处理造成的。</p></section><section id=\"65f8c3f0be44c\" class=\"section\"><h3 id=\"4bf312f086qmq\" data-tag=\"h4\" class=\"h4\"><b>资源监视器</b></h3><p id=\"4bf312f186hxr\">资源监视器可以直观查看CPU使用率，还可以通过句柄和模块搜索对应的进程。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7253992761/p519012.png\" width=\"501\" height=\"354\" class=\"image break\"></section><section id=\"68aac490bebhq\" class=\"section\"><h3 id=\"4bf312f486w96\" data-tag=\"h4\" class=\"h4\"><b>Process Explorer</b></h3><p id=\"4bf339f286iqr\">Process Explorer是一款Microsoft Sysinternals工具，通过配置正确的Symbols，检查对应应用程序的线程调用的Call Stack，用以定位可能的问题驱动。下载Process Explorer工具，请参见<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://docs.microsoft.com/zh-cn/sysinternals/downloads/process-explorer\">Process Explorer</a>。</p><p id=\"4bf339f886sxw\">如下图是Process Explorer工具使用页面。 </p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7253992761/p519013.png\" width=\"567\" height=\"169\" class=\"image break\"></section><section id=\"6b4852d0beaps\" class=\"section\"><h3 id=\"4bf339fa865sv\" data-tag=\"h4\" class=\"h4\"><b>性能监视器</b></h3><p id=\"4bf339fd86e3o\">性能监视器（Performance Monitor）是Microsoft专业收集各个组件性能计数器的工具。对于系统CPU资源消耗，有多个Counter来检查。</p><p id=\"4bf339ff86906\">Performance有如下三个核心参数。</p><ul id=\"4bf33a00863fn\"><li id=\"4bf33a01866o7\"><p id=\"4bf33a0286c3e\"><code data-tag=\"code\" class=\"code\">\\Processor(_Total)\\% Processor Time</code>：CPU执行行非空闲线程的时间百分比。<code data-tag=\"code\" class=\"code\">\\Processor(_Total)\\% Processor Time</code>=<code data-tag=\"code\" class=\"code\">\\Processor(*)\\% User Time</code>+<code data-tag=\"code\" class=\"code\">\\Processor(*)\\% Privileged Time</code></p></li><li id=\"4bf33a0386oa7\"><p id=\"4bf33a0486s17\"><code data-tag=\"code\" class=\"code\">\\Processor(*)\\% User Time</code>：表示处理器用于执行程序代码的时间消耗，可以确定哪个应用程序或函数调用消耗了较多的时间。</p><p id=\"0fbc3091bemkx\">高<code data-tag=\"code\" class=\"code\">User Time</code>情况如下图所示。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7253992761/p519015.png\" class=\"image break\"></li><li id=\"4bf33a0586xai\"><p id=\"4bf33a0686c7f\"><code data-tag=\"code\" class=\"code\">\\Processor(*)\\% Privileged Time</code>：应用程序在内核中执行系统调用（例如驱动、IRP，上下文切换等）操作的时间。如果操作系统花费多余30%的时间在<code data-tag=\"code\" class=\"code\">Privileged Time</code>，如下图所示，则说明实例正在进行高I/O吞吐相关的操作。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7253992761/p519014.png\" width=\"304\" height=\"374\" class=\"image break\"><p id=\"4bf3610386ngz\">当<code data-tag=\"code\" class=\"code\">% Privileged Time</code>很高时，需要进一步检查<code data-tag=\"code\" class=\"code\">% DPC Time</code>、<code data-tag=\"code\" class=\"code\">% Interrupt Time</code>以及<code data-tag=\"code\" class=\"code\">Context Switches/sec</code>的情况。 </p><ul id=\"2e99cd11befgr\"><li id=\"4bf3610586bgq\"><p id=\"4bf3610686xz3\">高<code data-tag=\"code\" class=\"code\">% DPC Time</code>、<code data-tag=\"code\" class=\"code\">% Interrupt Time</code>表示未知设备出现大量的操作或者很差的性能问题。更多详情，请参见<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://blogs.technet.microsoft.com/perfguide/2010/09/28/choose-your-own-adventure-high-deferred-procedure-calls-dpcs-or-high-interrupts/\">Choose Your Own Adventure: High Deferred Procedure Calls (DPCs) or High Interrupts</a>和<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://docs.microsoft.com/zh-cn/windows-hardware/test/wpt/xperf-command-line-reference\">Windows IT Pro Magazine: Examining xPerf</a>。</p></li><li id=\"4bf38813862jp\"><p id=\"4bf3881486lks\"><code data-tag=\"code\" class=\"code\">Context Switch</code>值很高时，说明内核在CPU上对进程或线程进行切换。更多详情，请参见<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://blogs.technet.microsoft.com/clinth/2009/10/28/the-case-of-the-2-million-context-switches/\">The Case of the 2 Million Context Switches</a>和<a class=\"\" target=\"_blank\" href=\"https://blogs.technet.com/markrussinovich/archive/2008/04/07/3031251.aspx\">Mark Russinovich’s The Case of the System Process CPU Spikes</a>。</p><p id=\"a660a490beq5x\"><code data-tag=\"code\" class=\"code\">Context Switches/sec</code>值很高表示有大量的线程处于Ready状态，需要减少线程的数量解决问题。</p></li></ul></li></ul></section></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/alibaba-cloud-linux-issues/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span>Alibaba Cloud Linux问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-14 17:52:37</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"help-kb-list\">\n<ul class=\"kb-list-clearfix\">\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/what-do-i-do-if-the-integrity-unable-to-open-file-error-messages-appear-in-the-kernel-logs-of-an-alibaba-cloud-linux-2-instance\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统的ECS实例内核日志存在“integrity: Unable to open file”信息，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/what-do-i-do-if-the-buffer-i-or-o-write-performance-of-an-ext4-file-system-on-an-alibaba-cloud-linux-2-instance-is-not-as-expected\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统的ECS实例中ext4文件系统的Buffer I/O写性能不符合预期，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/what-do-i-do-if-the-tcp-congestion-control-algorithm-bbr-affects-network-performance-in-alibaba-cloud-linux\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统中TCP拥塞控制算法BBR对网络性能有影响，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/alibaba-cloud-linux-instances-of-ecs-to-remove-pod-2-system-how-to-deal-with\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统的ECS实例无法正常删除Pod，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/what-do-i-do-if-a-memory-leak-occurs-on-the-intel-sgx-driver-of-an-alibaba-cloud-linux-2-ecs-instance-in-specific-cases\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统的ECS实例中SGX驱动在特定情况下存在内存泄露问题，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/what-do-i-do-if-i-cannot-upgrade-the-kernel-of-an-alibaba-cloud-linux-2-ecs-instance\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统的ECS实例升级内核失败，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/what-do-i-do-if-the-return-value-of-the-send-q-parameter-is-0-after-the-ss-command-is-run-on-an-alibaba-cloud-linux-2-ecs-instance\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统的ECS实例执行ss命令时返回的Send-Q字段值为0，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/what-do-i-do-if-the-yum-commands-cannot-be-run-on-an-alibaba-cloud-linux-2-ecs-instance-that-resides-in-the-classic-network\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统的经典网络ECS实例无法执行yum命令，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/fix-the-cve-2021-22555-vulnerability-in-an-alibaba-cloud-linux-2-instance\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统的CVE-2021-22555安全漏洞内核热补丁修复方案</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/what-do-i-do-if-the-local-time-of-an-alibaba-cloud-linux-2-instance-falls-behind-the-time-of-the-ntp-server-after-i-start-or-restart-the-instance\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2镜像的ECS实例启动或重启后系统时间同步存在延迟，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/what-do-i-do-if-a-large-number-of-processes-cannot-be-created-on-an-alibaba-cloud-linux-2-ecs-instance\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统的ECS实例创建大量进程失败，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/what-do-i-do-if-i-cannot-query-or-configure-the-routing-information-of-an-alibaba-cloud-linux-2-instance\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统的ECS实例无法查询和配置路由信息，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/fix-the-cve-2021-33909-vulnerability-in-an-alibaba-cloud-linux-instance\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux系统的CVE-2021-33909安全漏洞内核热补丁修复方案</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-cannot-access-a-website-hosted-on-an-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>无法访问ECS实例中运行网站的快速排查方法</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>无法访问ECS实例中运行网站的快速排查方法</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-25 10:38:17</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"721238a065esc\"><p data-tag=\"shortdesc\" id=\"721cbff065y7a\" class=\"shortdesc\">本文介绍无法访问ECS实例中运行网站相关问题的快速排查方法。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"ec99ac90a2rb1\"><b>问题描述</b></h2><p id=\"ec99ac91a2xtl\">您在访问ECS实例中运行的网站时，可能会遇到如下问题：</p><ul id=\"c58b7fd0a8hua\"><li id=\"653a5d41a8von\"><p id=\"653a5d40a89qk\">提示“未备案或未接入”、“网站内容与备案信息不符”。</p></li><li id=\"ec99ac95a2bme\" props=\"china\" data-cond-props=\"china\"><p id=\"ec99ac96a295y\">无法登录宝塔面板。 </p></li><li id=\"ec99ac97a2mrx\"><p id=\"ec99ac98a28xr\">浏览器提示“403”、“404”、“502”、“503”等数字类错误。 </p></li><li id=\"ec99ac99a26kg\"><p id=\"ec99ac9aa2rla\">首次搭建网站且无法访问网站。</p></li><li id=\"ec99ac9ba213s\"><p id=\"ec99ac9ca204r\">网站持续运作时突然无法访问。</p></li><li id=\"ec99ac9da2gdw\"><p id=\"ec99ac9ea29z3\">无法通过负载均衡SLB访问ECS实例中的网站。</p></li><li id=\"ec99ac9fa2tam\"><p id=\"ec99aca0a21jh\">无法访问CDN加速后的网站。</p></li><li id=\"ec99aca1a2l1m\"><p id=\"ec99aca2a2q29\">无法访问通过Web应用防火墙（WAF）防护的网站。</p></li><li id=\"62ba5c50aemy1\" props=\"china\" data-cond-props=\"china\"><p id=\"6a81a1f0ae5vb\" props=\"china\" data-cond-props=\"china\">云虚拟主机上的网站无法访问。</p></li></ul><h2 id=\"ec99aca5a2hue\"><b>问题原因</b></h2><p id=\"ec99aca6a2wib\">无法访问ECS实例中运行的网站的原因较多，此处列举较为常见的问题原因，具体原因以现场的排查结果为准。</p><ul id=\"ec99aca7a2yg7\"><li id=\"ec99aca8a2501\"><p id=\"ec99aca9a28xz\">TCP 80端口不可用。</p></li><li id=\"ec99acaaa2r7o\"><p id=\"ec99acaba2qxa\">Web服务不可用。</p></li><li id=\"ec99acaca20fb\"><p id=\"ec99acada2fr2\">网站未备案。</p></li><li id=\"ec99acaea2m7v\"><p id=\"ec99acafa24kc\">网站资源或后端服务存在异常。</p></li><li id=\"ec99acb0a25de\"><p id=\"ec99acb1a2tvr\">建站流程不标准。</p></li><li id=\"ec99acb2a2256\"><p id=\"ec99acb3a2w75\">源站本身的问题。</p></li></ul><div type=\"note\" id=\"ec99acb4a2iu9\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"ec99acb5a208c\">引发网站访问异常的相关因素及症状很多，如果您需要了解更多ECS实例中网站无法访问的原因，请参<a title=\"\" class=\"xref\" href=\"/zh/ecs/troubleshooting-and-guidelines-for-access-to-ecs-instance-exceptions\">访问ECS实例异常时的问题排查和指引</a>。</p></div></div><h2 id=\"9d54d100a3ojz\"><b>排查方法</b></h2><p id=\"ad19fca0a3ol0\">无法访问ECS实例中运行网站的现象和原因较多，您可以选择下列任意一种方法快速排查问题。</p><div outputclass=\"collapse expanded\" id=\"b596fdb0a3do3\" class=\"collapse expanded\"><h3 data-tag=\"expandable-title\" id=\"b596fdb1a394h\" class=\"expandable-title\"><b>通过流程图排查</b></h3><div data-tag=\"expandable-content\" id=\"b596fdb2a3b9e\" class=\"expandable-content\"><p id=\"b596fdb3a3b7s\">您可以根据如图所示的流程图，逐步排查问题。</p><img translate=\"yes\" placement=\"break\" alt=\"20230119184601\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3997578761/p552109.jpg\" id=\"b596fdb5a3bmz\" width=\"900\" class=\"image break\"></div></div><div outputclass=\"collapse expanded\" id=\"b596fdb6a3j6p\" class=\"collapse expanded\"><h3 data-tag=\"expandable-title\" id=\"b596fdb7a3xdf\" class=\"expandable-title\"><b>通过问题现象选择解决方案</b></h3><div data-tag=\"expandable-content\" id=\"b596fdb8a3ciy\" class=\"expandable-content\"><p id=\"b596fdb9a334r\">针对如下列举的常见问题现象，您可以快速选择对应的问题解决方案。</p><ul id=\"b596fdbaa3ox6\"><li id=\"b596fdbba3dmy\"><p id=\"b596fdbca3tb3\"><b>提示“未备案或未接入”、“网站内容与备案信息不符”</b>。</p><p id=\"b596fdbda39l4\">无论网站是通过IP地址还是通过域名对外提供服务，未备案成功前，均不允许开通网站访问服务。请备案您的网站IP或域名，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/icp-filing/product-overview/icp-filing-requirements-for-a-regular-website\">通用网站备案</a>。</p></li><li id=\"b596fdbea39b0\" props=\"china\" data-cond-props=\"china\"><p id=\"b596fdbfa3rjt\"><b>无法登录宝塔面板。</b> </p><p id=\"b596fdc0a3dht\">可能是宝塔服务未运行或未添加宝塔服务对应端口的安全组规则，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/ecs-instance-through-browser-console-login-pagoda-service-panel\">ECS实例无法登录宝塔面板控制台</a>。</p></li><li id=\"b596fdc1a3vdk\"><p id=\"b596fdc2a3moi\"><b>浏览器提示“403”、“404”、“502”、“503”等数字类错误。</b> </p><p id=\"b596fdc3a3zgl\">浏览器提示数字类错误时，通常表明客户端与服务端的网络是正常的，但网站资源或后端服务存在异常，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/analysis-of-common-status-code-to-websites-running-on-an-ecs-instance\">访问ECS实例中运行网站常见状态码的报错分析</a>。</p></li><li id=\"b596fdc4a35ku\"><p id=\"b596fdc5a3ij4\"><b>首次搭建网站且无法访问网站。</b></p><p id=\"b596fdc6a3uux\">请确保您按照标准的建站流程进行操作。更多建站流程信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/quick-start\">建站零基础入门</a>。<b> </b></p></li><li id=\"b596fdd0a3ct7\" props=\"china\" data-cond-props=\"china\"><p id=\"b596fdd1a33n1\"><b>网站持续运作时突然无法访问。</b></p><p id=\"b596fdd2a3tli\">您需要对ECS实例状态、Web服务或后端数据库分别进行检查。 \n</p><ul id=\"b596fdd3a3cgd\"><li id=\"b596fdd4a3kqv\"><p id=\"b596fdd5a3og2\">ECS实例状态的检查</p><p id=\"b596fdd6a31zt\">您可以通过ECS自助诊断工具进行检查，然后根据诊断结果中的提示进行操作。 具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/examples-of-health-diagnosis-1\">诊断ECS实例的健康状态</a>。\n</p></li><li id=\"b596fdd7a3k7c\"><p id=\"b596fdd8a32p4\">Web服务或后端数据库的检查</p><p id=\"b596fdd9a37pn\">请确保Web服务和后端数据库处于运行状态。如果未运行，请检查日志并根据日志中的错误信息进行修复。 \n</p><div id=\"b596fddaa3xzp\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"b596fddba3uen\"><li id=\"b596fddca38xr\"><p id=\"b596fddda3d79\">网站服务的日志文件名一般为access.log或error.log，更多信息，请参见网站服务对应的官网网站。</p></li><li id=\"b596fddea3b5h\"><p id=\"b596fddfa3s6c\">网站服务后端的PHP、Java、Tomcat、数据库等服务异常时，也会导致无法访问网站。此时，请联系您的网站管理员获取帮助。</p></li></ul></div></div></li></ul></li><li id=\"b596fde0a303u\"><p id=\"b596fde1a370d\"><b>无法通过负载均衡SLB访问ECS实例中的网站</b>。</p><p id=\"b596fde2a3cj2\">ECS实例前端有负载均衡SLB时，可能是SLB实例的监听策略设置异常，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/document_detail/55206.html\">无法通过负载均衡SLB访问ECS实例中的网站</a>。</p></li><li id=\"b596fde3a3bn1\"><p id=\"b596fde4a3bvj\"><b>无法访问CDN加速后的网站</b>。</p><p id=\"b596fde5a3k4y\">您需要先判断是否为源站本身的问题，具体操作，请参见<a class=\"\" href=\"/zh/cdn/troubleshoot-unreachable-websites-after-using-alibaba-cloud-content-delivery-network-acceleration\">使用CDN加速后网站无法访问的排查步骤</a>。</p></li><li id=\"b596fde6a39jn\"><p id=\"b596fde7a3yck\"><b>无法访问通过Web应用防火墙（WAF）防护的网站</b>。</p><p id=\"b596fde8a3q03\">您需要先判断是否为源站本身的问题，再判断是否为WAF误拦截问题，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/document_detail/43463.html\">无法访问通过Web应用防火墙（WAF）防护的网站</a>。</p></li><li id=\"b596fde9a3enk\" props=\"china\" data-cond-props=\"china\"><p id=\"b596fdeaa3w26\"><b>云虚拟主机上的网站无法访问</b>。</p><p id=\"b596fdeba3o19\">如果您使用的并非ECS实例，而是云虚拟主机，则需要对云虚拟主机进行排查。 具体操作，请参见<a class=\"\" href=\"/zh/cloud-web-hosting/when-accessing-a-cloud-hosting-sites-to-visit\">虚拟主机上的网站无法访问</a>。</p></li></ul></div></div><h2 id=\"ec99acb6a2s6z\"><b>解决方案</b></h2><p id=\"cd428fb1a3w5b\">本文介绍常见的TCP 80端口和Web服务不可用导致该问题的解决方案，操作步骤如下：</p><div id=\"a4cb1b04a31yc\" outputclass=\"collapse expanded\" class=\"collapse expanded\"><h3 id=\"a744f4a0a34ej\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>TCP 80端口和Web服务不可用导致无法访问Linux实例上运行的网站</b></h3><div id=\"a4cb1b02a39mb\" data-tag=\"expandable-content\" class=\"expandable-content\"><div id=\"ad143ad0a3m0d\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"ad143ad1a32fy\">以下操作步骤以CentOS 7操作系统为例，具体操作请以您的实际操作系统为准。</p></div></div><h4 id=\"ad143ad2a30ib\"><b>TCP 80端口不可用</b></h4><ol id=\"ad143ad3a3gao\"><li id=\"ad143ad4a3qsj\"><p id=\"ad143ad5a3f5i\">远程连接Linux实例。</p><p id=\"ad143ad6a324b\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"ad143ad7a3l3q\"><p id=\"ad143ad8a3qbw\">执行以下命令，查看TCP 80端口是否被监听。 </p><pre id=\"ad143ad9a3mgd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -an | grep 80</code></pre><p id=\"ad143adaa3trf\"> 回显示例如下，如果返回以下任意一种结果，说明已启动TCP 80端口的Web服务，即检查正常。如果有异常，请参见<a title=\"\" class=\"xref\" href=\"#ad143aeca35an\">Web服务不可用</a>进行处理。 </p><pre id=\"ad143adba38te\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN # 全网监听</code></pre><pre id=\"ad143adca3mhn\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>tcp        0      0 127.0.0.1:80            0.0.0.0:*               LISTEN # 本机监听</code></pre><div type=\"note\" id=\"ad143adda3o9o\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"ad143adea378n\">本机127.0.0.1监听会导致外网无法访问Web服务，只有本机能访问，修改为全网监听。\n</p></div></div></li><li id=\"ad143adfa3wc2\"><p id=\"ad143ae0a33q1\">查看TCP 80端口是否被放行以及连通情况是否正常。\n</p><ol id=\"ad143ae1a3kfz\"><li id=\"ad143ae2a3n2r\"><p id=\"ad143ae3a35ko\">查看实例安全组是否放行TCP 80端口，如果没有放行则需要添加安全组规则，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。</p></li><li id=\"4019fdd1a9ytc\"><p id=\"4019fdd0a96r1\">查看实例操作系统的防火墙是否开启，如果开启则建议关闭防火墙改为使用安全组，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/enable-or-disable-the-system-firewall-function-for-linux-instances\">开启或关闭Linux实例中的系统防火墙</a>。</p></li><li id=\"ad143ae6a3w02\"><p id=\"ad143ae7a3gbo\">使用telnet和traceroute命令跟踪TCP 80端口的连通情况，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/troubleshooting-for-ping-attempts-to-pass-the-server-and-port-disconnection\">能够ping通服务器的同时端口不通的排查方法</a>。</p></li></ol></li><li id=\"ad143ae8a3zb8\"><p id=\"ad143ae9a3psz\">查看云服务器带宽是否充足。</p><p id=\"ad143aeaa3lf7\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/query-and-analysis-of-system-loads-on-linux-instances\">Linux实例系统负载的查询及分析</a>。</p><p id=\"ad143aeba3p5b\">如果不足，可尝试升级实例带宽。具体操作，请参见<span props=\"china\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/108423.html\">修改带宽配置</a></span>。</p></li></ol><h4 id=\"ad143aeca35an\"><b>Web服务不可用</b></h4><ol id=\"ad143aeda3sou\"><li id=\"ad143aeea3bj2\"><p id=\"ad143aefa381h\">远程连接Linux实例。</p><p id=\"ad143af0a318n\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"ad143af1a3agv\"><p id=\"ad143af2a3fvh\">查看Web服务日志。</p><ul id=\"2867d4c1a9wvy\"><li id=\"27ff4ef0a9q0n\"><p id=\"36e82450a9kke\">执行如下命令，查看Apache的错误日志。</p><p id=\"48b8d760a9yhg\">您可以根据错误日志分析排查问题。</p><ul id=\"5b028b01a9bcl\"><li id=\"37a66b40a953w\"><p id=\"5eec2140a9i4t\">CentOS或Alinux：</p><pre id=\"wgw4gl\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>less /var/log/httpd/error_log</code></pre></li><li id=\"64f31940a9ezt\"><p id=\"68a1a250a96u4\">Ubuntu：</p><pre id=\"w97fxc\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>less /var/log/apache2/error.log</code></pre></li></ul></li><li id=\"59cb6a91a9l69\"><p id=\"59cb6a90a95tw\">执行如下命令，查看Nginx的错误日志。</p><p id=\"87cb14e0a95py\">您可以根据错误日志分析排查问题。</p><pre id=\"2kp6ic\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>less /var/log/nginx/error_log</code></pre></li></ul></li><li id=\"ad143af3a3s4o\"><p id=\"ad143af4a3fuv\">执行<code data-tag=\"code\" class=\"code\">top</code>命令，查看实例运行状态。</p><p id=\"ad143af5a3llz\">您需要查看进程是否异常，回显示例如下。</p><img id=\"c572cc10abwie\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7313826761/p560586.png\" alt=\"image\" placement=\"break\" width=\"750\" class=\"image break\"><p id=\"d956a7b0abd5p\"><code data-tag=\"code\" class=\"code\">load average</code>参数中<code data-tag=\"code\" class=\"code\">0.01</code>、<code data-tag=\"code\" class=\"code\">0.02</code>和<code data-tag=\"code\" class=\"code\">0.03</code>分别表示1分钟前、5分钟前和15分钟前到现在的系统负载平均值。一般情况下，如果这个数值除以逻辑CPU的数量大于5（具体数值需要根据实际服务器CPU处理能力以及系统使用情况而定），则表示系统在超负荷运转。此时，您可以根据进程列表中查看<code data-tag=\"code\" class=\"code\">%CPU</code> 较高的PID，定位异常进程即<code data-tag=\"code\" class=\"code\">COMMAND</code>参数值，然后根据您的系统实际情况处理该异常。</p></li><li id=\"ad143af6a3bcz\"><p id=\"ad143af7a3xts\">在控制台查看实例监控信息。</p><p id=\"ad143af8a3ni6\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/view-the-monitoring-information-of-an-ecs-instance\">查看实例监控信息</a>。</p><ul id=\"ad1461e0a3zm2\"><li id=\"ad1461e1a3dy4\"><p id=\"ad1461e2a3zon\">查看实例CPU、内存是否充足，如果不足，请参见<a class=\"\" href=\"/zh/ecs/support/query-and-case-analysis-linux-cpu-load\">云服务器ECS Linux系统CPU占用率较高问题排查思路</a>进行处理。</p></li><li id=\"ad1461e3a329q\"><p id=\"ad1461e4a3tb1\">查看实例带宽是否充足，如果不足，可尝试升级实例带宽。具体操作，请参见<span props=\"china\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/108423.html\">修改带宽配置</a></span>。</p></li></ul></li><li id=\"ad1461e5a3tbr\"><p id=\"ad1461e6a3g3o\">执行如下命令，查看实例的80端口是否有过多的TCP连接。</p><pre id=\"inigwz\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -anp |grep 80 |grep tcp</code></pre><p id=\"787f8f70ab1me\">回显示例如下。</p><img id=\"79831cc1ablzw\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0939726761/p559525.jpg\" alt=\"20230210180929\" placement=\"break\" class=\"image break\"></li><li id=\"ad1461e7a3d3j\"><p id=\"ad1461e8a31c8\">执行以下命令，统计TCP的所有连接数。 </p><pre id=\"ad1461e9a3dle\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -anp |grep tcp |wc -l</code></pre></li><li id=\"ad1461eaa35y0\"><p id=\"ad1461eba3thj\">将TCP的所有连接数与<code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>配置文件中<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数的最大值进行对比，如果TCP的所有连接数超出该最大值，则执行如下操作：\n</p><ol id=\"ad1461eca3maw\"><li id=\"ad1461eda3f5u\"><p id=\"ad1461eea33qr\">执行<code data-tag=\"code\" class=\"code\">vi /etc/sysctl.conf</code>命令，编辑<code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>配置文件，查询<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数。<img id=\"5cdeda30a9bu6\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6010826761/p559526.jpg\" alt=\"linux连接数超出最大值1\" placement=\"break\" class=\"image break\"></p><p id=\"ad1461efa3l6t\">如果确认TCP的连接数使用很高，容易超出限制，则根据实际情况，增加<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数值的大小。</p></li><li id=\"ad1461f0a35o7\"><p id=\"ad1461f1a3n3y\">执行<code data-tag=\"code\" class=\"code\">sysctl -p</code>命令，使配置生效。</p></li></ol></li></ol></div></div><div id=\"bbbf6af4a3odk\" outputclass=\"collapse expanded\" class=\"collapse expanded\"><h3 id=\"bdc28df0a3eml\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>TCP 80端口和Web服务不可用导致无法访问Windows实例上运行的网站</b></h3><div id=\"bbbf6af2a3wlx\" data-tag=\"expandable-content\" class=\"expandable-content\"><div id=\"c5873b80a30i5\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"c5873b81a3lni\">以下操作步骤以Windows Server 2012 R2操作系统为例，具体操作请以您的实际操作系统为准。</p></div></div><h4 id=\"c5873b82a312b\"><b>TCP 80端口不可用</b></h4><ol id=\"c5873b83a3fkp\"><li id=\"c5873b84a3clc\"><p id=\"c5873b85a3xno\">远程连接Windows实例。</p><p id=\"c5873b86a33ui\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"5fd8d260adont\"><p id=\"5eebb340adull\">打开CMD命令提示符。</p><ol id=\"621bbd81adpnn\"><li id=\"617b5ed1ad1gc\"><p id=\"63b8a4a0adg3t\">单击桌面左下角<img id=\"63b8a4a1ad4rx\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556011.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，然后单击<img id=\"63b8a4a2adn7u\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556012.jpg\" alt=\"搜索图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标。</p></li><li id=\"65346f31adar7\"><p id=\"66eaaab0adnyk\">在搜索框输入<code data-tag=\"code\" class=\"code\">cmd</code>。<img id=\"66eaaab1ad9be\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556018.jpg\" alt=\"单击命令提示符\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"6b97df10adnew\"><p id=\"6b97df11adl30\">单击<b data-tag=\"uicontrol\" id=\"f0f5deb0a5pla\" class=\"uicontrol\">命令提示符</b>。</p><p id=\"6b97df12adqh9\">进入命令提示符。<img id=\"6b97df13ade6k\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556021.jpg\" alt=\"进入命令提示符\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"0e27fdf0aby33\"><p id=\"0e27d6e0ab7r4\">执行以下命令，查看TCP 80端口是否被监听。 </p><pre id=\"c5873b8ca3wqz\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -ano | findstr :80</code></pre><p id=\"c5873b8da32kp\">回显示例如下，如果返回以下任意一种结果，说明已启动TCP 80端口的Web服务，即检查正常。如果有异常，请参见<a title=\"\" class=\"xref\" href=\"#c5873b9ea3v3k\">Web服务不可用</a>进行处理。 </p><pre id=\"c5873b8ea3f35\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>TCP    0.0.0.0:80           0.0.0.0:0              LISTENING       1172 # 表示全网监听\nTCP    127.0.0.1:80         0.0.0.0:0              LISTENING       1172 # 表示本地监听</code></pre><div type=\"note\" id=\"c5873b8fa3dnw\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"c5873b90a36i6\">本机127.0.0.1监听会导致外网无法访问Web服务，只有本机能访问，可执行<code data-tag=\"code\" class=\"code\">netsh http delete iplisten ipaddress= 127.0.0.1:80</code>命令，修改为全网监听。 \n</p></div></div></li><li id=\"c5873b91a3j4l\"><p id=\"c5873b92a35ku\">查看TCP 80端口是否被放行以及连通情况是否正常。\n</p><ol id=\"c5873b93a3a7f\"><li id=\"c5873b94a3ma6\"><p id=\"c5873b95a35iu\">查看实例安全组是否放行80端口，如果没有放行则需要添加安全组规则，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。</p></li><li id=\"c5873b96a30p6\"><p id=\"c5873b97a3p1j\">查看实例操作系统的防火墙是否开启，如果开启则建议关闭防火墙改为使用安全组，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/configure-windows-firewall-rules-for-windows-server-instances\">Windows Server系统的ECS实例防火墙策略的配置方法</a>。</p></li><li id=\"c5873b98a32qr\"><p id=\"c5873b99a367t\">使用telnet和tracert命令跟踪80端口的连通情况，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/troubleshooting-for-ping-attempts-to-pass-the-server-and-port-disconnection\">能够ping通服务器的同时端口不通的排查方法</a>。</p></li></ol></li><li id=\"c5873b9aa3nwj\"><p id=\"c5873b9ba38an\">查看云服务器带宽是否充足。</p><p id=\"c5873b9ca37dm\">具体操作，请参见<a class=\"\" href=\"/zh/ecs/query-and-analysis-of-the-system-load-of-a-windows-instance\">Windows实例带宽和CPU跑满或跑高排查</a>。</p><p id=\"c5873b9da385q\">如果不足，可尝试升级实例带宽。具体操作，请参见<span props=\"china\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/108423.html\">修改带宽配置</a></span>。</p></li></ol><h4 id=\"c5873b9ea3v3k\"><b>Web服务不可用</b></h4><ol id=\"c5873b9fa3oti\"><li id=\"c5873ba0a32y7\"><p id=\"c5873ba1a3b8a\">远程连接Windows实例。</p><p id=\"c5873ba2a3vl2\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"c5873ba3a3at5\"><p id=\"c5873ba4a3q62\">查看Web服务日志。</p><ul id=\"b3374c71abact\"><li id=\"c5873ba6a3mco\"><p id=\"c5873ba7a3mb9\">方法一：浏览日志文件夹。</p><p id=\"d79cecf0ab7q9\">Windows Server 2008 R2及以上版本操作系统的日志路径为：<code data-tag=\"code\" class=\"code\">C:\\inetpub\\logs\\LogFiles </code>。</p></li><li id=\"b9f9f351abe7e\"><p id=\"b9f9f350abukw\">方法二：查看IIS管理器。</p><ol id=\"f0191561abhqb\"><li id=\"efd92631ab82x\"><p id=\"efd92630absbi\">选择<img id=\"0bda0461abogi\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556011.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"73e83c00a3e9g\" class=\"uicontrol\"> &gt; Windows管理工具</b><b data-tag=\"uicontrol\" id=\"25b21780abi9y\" class=\"uicontrol\"> &gt; Internet Information Services（(IIS）管理器</b>。</p></li><li id=\"3bb85df1abb3z\"><p id=\"3bb85df0ab26o\">在待查看的Web服务主页IIS区域，单击<b data-tag=\"uicontrol\" id=\"4f0be070abik7\" class=\"uicontrol\">日志</b>，然后在<b data-tag=\"uicontrol\" id=\"79e08990abozr\" class=\"uicontrol\">操作</b>列单击<b data-tag=\"uicontrol\" id=\"7be29b20ab4d3\" class=\"uicontrol\">浏览</b>。<img id=\"e7eadb20abfvj\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7313826761/p561063.jpg\" alt=\"查看web日志（Windows）新图\" placement=\"break\" class=\"image break\"></p></li><li id=\"eb0cb491abr9w\"><p id=\"eb0cb490ablla\">在<b data-tag=\"uicontrol\" id=\"3f2d9210abq1r\" class=\"uicontrol\">日志</b>页面，按照您的实际情况修改日志存放路径并复制对应地址粘贴到<b data-tag=\"uicontrol\" id=\"18b11f80ab7vs\" class=\"uicontrol\">文件资源管理器</b>，然后按<code data-tag=\"code\" class=\"code\">Enter</code>键。</p><p id=\"1e117740abcmt\">您可以在<b data-tag=\"uicontrol\" id=\"3ad1b200abwdz\" class=\"uicontrol\">文件资源管理器</b>中查看对应日志文件夹。<img id=\"aa42e690ablyp\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7313826761/p561072.jpg\" alt=\"查看日志路径新\" placement=\"break\" class=\"image break\"></p></li></ol></li></ul></li><li id=\"b25243a0ab2ml\"><p id=\"b2521c90abtg5\">通过任务管理器查看实例运行状态，查看是否有异样进程。</p><ol id=\"bab87671abu1e\"><li id=\"ba29f210abeyh\"><p id=\"ba29cb00abcbg\">在桌面单击鼠标右键，然后选择<b data-tag=\"uicontrol\" id=\"cef6a710ab8dq\" class=\"uicontrol\">任务管理器</b>。</p></li><li id=\"cc47b3b0ab7ad\"><p id=\"cc478ca0ab7h6\">单击<b data-tag=\"uicontrol\" id=\"d729a6d0abokz\" class=\"uicontrol\">进程</b>页签。</p><p id=\"d97f2f90abhpb\">您可以在任务管理器中查看进程的CPU、内存信息，定位异常进程。<img id=\"4cb29c40ab6sk\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7313826761/p561076.jpg\" alt=\"在任务管理器中查看异常进程新\" placement=\"break\" class=\"image break\"></p></li></ol></li><li id=\"c5873ba8a3omy\"><p id=\"c5873ba9a3eqx\">在控制台查看实例监控信息。</p><p id=\"c5873baaa38x0\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/view-the-monitoring-information-of-an-ecs-instance\">查看实例监控信息</a>。</p><ul id=\"c5873baba35cj\"><li id=\"c5873baca3jns\"><p id=\"c5873bada3iys\">查看实例CPU、内存是否充足，如果不足，请参见<a class=\"\" href=\"/zh/ecs/query-and-analysis-of-the-system-load-of-a-windows-instance\">Windows实例带宽和CPU跑满或跑高排查</a>进行处理。</p></li><li id=\"c5873baea3iln\"><p id=\"c5873bafa3y0x\">查看实例带宽是否充足，如果不足，可尝试升级实例带宽。具体操作，请参见<span props=\"china\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/108423.html\">修改带宽配置</a></span>。</p></li></ul></li><li id=\"c5873bb0a3i9q\"><p id=\"c5873bb1a3acs\">查看实例80端口是否有过多的TCP连接。 \n</p><ol id=\"482b3801abstr\"><li id=\"35ad2df0abek0\"><p id=\"35ad2df1abmue\">打开CMD命令提示符。</p><ol id=\"35ad2df2abmem\"><li id=\"35ad2df3ab20h\"><p id=\"35ad2df4abmq7\">单击桌面左下角<img id=\"35ad2df5abi4w\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556011.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，然后单击<img id=\"35ad2df6ab4sw\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556012.jpg\" alt=\"搜索图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标。</p></li><li id=\"35ad2df7ab5qf\"><p id=\"35ad2df8abp6e\">在搜索框输入<code data-tag=\"code\" class=\"code\">cmd</code>。<img id=\"35ad2df9ab9i3\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556018.jpg\" alt=\"单击命令提示符\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"35ad2dfaabim0\"><p id=\"35ad2dfbab6hi\">单击<b data-tag=\"uicontrol\" id=\"46ff95d0ady22\" class=\"uicontrol\">命令提示符</b>。</p><p id=\"35ad2dfcabynf\">进入命令提示符。<img id=\"35ad2dfdabyjl\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556021.jpg\" alt=\"进入命令提示符\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li></ol></li><li id=\"30985e21ab9nm\"><p id=\"30985e20abzfp\">依次执行以下命令，统计TCP连接数。 </p><pre id=\"c5876293a3zt2\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -n |find /i \"time_wait\" /c\nnetstat -n |find /i \"close_wait\" /c\nnetstat -n |find /i \"established\" /c</code></pre><p id=\"6789cbb0abcjf\">默认动态端口的数量为16384个（从49152起始，到65535结束），如果<code data-tag=\"code\" class=\"code\">close_wait</code>数量接近动态端口的数量，则表示存在大量的<code data-tag=\"code\" class=\"code\">close_wait</code>连接未释放，您需要执行下一步，修改注册表来降低Time Wait时间。<img id=\"d4407420abr5l\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8313826761/p561079.jpg\" alt=\"统计TCP连接数\" placement=\"break\" class=\"image break\"></p></li><li id=\"955e7390ad7uq\"><p id=\"99e1d8d1ad9z4\">打开注册表编辑器。</p><ol id=\"99e1d8d2adp2j\"><li id=\"99e1d8d3adymn\"><p id=\"99e1d8d4ad90t\">单击桌面左下角<img id=\"99e1d8d5admxo\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556011.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，然后单击<img id=\"99e1d8d6ad7l1\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556012.jpg\" alt=\"搜索图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标。</p></li><li id=\"99e1d8d7adoby\"><p id=\"99e1d8d8ad2nb\">在搜索框输入<code data-tag=\"code\" class=\"code\">regedit</code>。<img id=\"99e1d8d9adiq4\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p556886.jpg\" alt=\"打开注册表编辑器\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"99e1d8daada0a\"><p id=\"99e1d8dbadyd7\">单击<b data-tag=\"uicontrol\" id=\"b1762560a6yia\" class=\"uicontrol\">regedit</b>。</p><p id=\"99e1d8dcadarg\">进入注册表编辑器。<img id=\"99e1d8ddadwrf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p556888.jpg\" alt=\"2012注册表编辑器\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"c69fced1abwoo\"><p id=\"a6818181adeu8\">在注册表编辑器的<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services&gt;Tcpip&gt;Parameters</code>路径下，将注册表项<code data-tag=\"code\" class=\"code\">TcpTimedWaitDelay</code>的数值数据设置为十进制数值<code data-tag=\"code\" class=\"code\">30</code><b>。</b></p><p id=\"a6818182advgz\">如果<code data-tag=\"code\" class=\"code\">TcpTimedWaitDelay</code>项不存在，请新建对应注册表项，然后再修改数值数据。以<code data-tag=\"code\" class=\"code\">TcpTimedWaitDelay</code>不存在为例，操作如下：</p><ol id=\"a6818183ad6pn\"><li id=\"a6818184adgkx\"><p id=\"a6818185ad0rc\">在注册表编辑器的<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services&gt;Tcpip&gt;Parameters</code>路径下，右键单击注册表项空白区域，然后选择<b data-tag=\"uicontrol\" id=\"3aa406c0a68n2\" class=\"uicontrol\">新建（N） &gt; DWORD （32 位）值</b>。<img id=\"a6818186adcee\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p556899.jpg\" alt=\"新建注册表项\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"a6818187adpvq\"><p id=\"a6818188adndn\">输入<code data-tag=\"code\" class=\"code\">TcpTimedWaitDelay</code>，按<code data-tag=\"code\" class=\"code\">Enter</code>键。</p></li><li id=\"a6818189adr2i\"><p id=\"a681818aadfsi\">右键单击注册表项<code data-tag=\"code\" class=\"code\">TcpTimedWaitDelay</code>，然后单击<b data-tag=\"uicontrol\" id=\"99705e10a64cs\" class=\"uicontrol\">修改</b>。<img id=\"a681818badl15\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p556905.jpg\" alt=\"单击修改注册表项\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"a681818cade9r\"><p id=\"a681818dadssu\">在对话框中，勾选<b data-tag=\"uicontrol\" id=\"f5ddddd0a6ccz\" class=\"uicontrol\">十进制</b>，然后将<b data-tag=\"uicontrol\" id=\"f8e9be40a6bgg\" class=\"uicontrol\">数值数据</b>设置为<code data-tag=\"code\" class=\"code\">30</code><b>。</b><img id=\"a681818eads59\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p556909.jpg\" alt=\"需改数值数据为30\" placement=\"break\" class=\"image break\"></p></li><li id=\"a681818fadglp\"><p id=\"a6818190adazf\">单击<b data-tag=\"uicontrol\" id=\"2f3e9650a6b2t\" class=\"uicontrol\">确定</b>。</p></li></ol></li></ol></div></div></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/linux-operating-system/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span>Linux操作系统问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux操作系统问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-06 13:39:11</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/common-kernel-network-parameters-of-ecs-linux-instances-and-faq\">Linux系统常用内核网络参数介绍与常见问题处理</a></li>\n <li><a href=\"/zh/ecs/support/the-yum-command-fails-with-the-http-error-404-not-found-trying-other-mirror-prompt\">在Linux实例中执行yum命令失败，提示“HTTP Error 404 -Not Found Trying other mirror”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/error-unpacking-of-archive-failed-on-file-or-usr-or-bin-or-xxxx-cpio-open-failed-error-is-reported-during-yum-installation\">在Linux实例中执行yum命令失败，提示“error: unpacking of archive failed on file /usr/bin/xxxx: cpio: open Failed”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/how-do-i-fix-the-su-faild-to-execute-or-bin-or-bash-permission-denied-error-when-i-switch-users-by-running-the-su-command\">Linux实例使用su命令切换用户时，提示“su: failed to execute /bin/bash: Permission denied”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/linux-instance-that-executes-the-crontab-e-command-prompt-errors-in-crontab-file-can-t-install-error\">Linux实例中执行“crontab -e”命令时提示“errors in crontab file, can't install”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/when-you-run-the-ethtool-command-the-system-prompts-cannot-get-device-ring-settings-operation-not-supported\">在CentOS 6.5系统的ECS实例中，执行ethtool -g eth0命令，提示“Cannot get device ring settings: Operation not supported”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/in-linux-instance-apache-ab-pressure-test-the-prompt-apr-pollset-poll-the-timeout-specified-has-expired-error\">在Linux实例的Apache中进行ab压力测试时，提示“apr_pollset_poll: The timeout specified has expired”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/in-linux-when-accessing-the-or-tmp-directory-the-system-prompts-bash-cd-or-tmp-insufficient-permission\">Linux实例中访问/tmp目录提示“bash: cd: /tmp: 权限不够“错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/linux-system-of-ecs-instance-how-to-configure-the-crontab-timing-tasks-and-common-problems\">Linux系统的ECS实例中，如何配置crontab定时任务及常见问题</a></li>\n <li><a href=\"/zh/ecs/support/debian-8-system-of-ecs-example-execute-apt-get-the-update-command-prompt-404-not-found-error\">Debian 8系统的ECS实例中，执行“apt-get update”命令提示“404 Not Found”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/ubuntu-instances-of-ecs-perform-an-apt-get-the-update-command-prompt-no-pubkey-error\">Ubuntu系统的ECS实例中，执行apt-get update命令时提示“NO_PUBKEY”错误怎么办</a></li>\n <li><a href=\"/zh/ecs/support/linux-the-kernel-prompts-tcp-time-wait-bucket-table-overflow-error\">为什么Linux系统的ECS实例中出现大量“TCP: time wait bucket table overflow”错误？</a></li>\n <li><a href=\"/zh/ecs/support/linux-instances-of-ecs-the-average-user-to-use-the-su-command-switch-root-tip-su-authentication-failure-error\">Linux系统的ECS实例中，普通用户使用su命令切换root用户时提示“su: Authentication failure”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/initialize-the-cloud-disk-in-the-mount-centos-7-system-when-the-site-command-jam-phenomenon-how-to-deal-with\">初始化云盘时，在CentOS 7系统mount本地盘时出现命令卡住现象，如何处理？</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-operating-system-issues/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span>Windows操作系统问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows操作系统问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 16:45:05</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/windows-system-prompt-can-not-find-how-to-deal-with-server-manager-lnk\">Windows系统提示找不到“Server Manager.lnk”如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/how-do-i-view-and-change-the-default-port-for-remote-desktop-on-a-windows-instance\">如何查看和修改Windows实例远程桌面的默认端口？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-windows-updates-cannot-be-installed-on-an-instance\">Windows Update补丁更新失败如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-instances-cannot-access-the-ad-domains-of-each-other-or-instances-cannot-be-added-to-the-same-ad-domain-at-the-same-time\">实例之间无法互相访问AD域或同时加入AD域怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-i-am-prompted-with-the-812-error-code-when-i-connect-to-a-vpn-from-a-windows-server-2008-instance\">Windows Server 2008连接VPN出现812错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-system-error-58-occurs-while-i-access-the-shared-directory-of-a-nas-file-system-on-a-windows-operating-system\">Windows系统挂载NAS共享目录时报错“发生系统错误 58”如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-interface-that-appears-on-your-logon-to-a-windows-instance-is-abnormal\">远程登录Windows系统后界面显示异常如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/windows-server-2008-r2-termdd-blue-hold-problems-how-to-deal-with\">Windows Server 2008 R2出现termdd蓝屏问题，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-a-large-number-of-small-files-in-a-windows-ntfs-file-system-cause-space-statistic-exceptions\">Windows NTFS文件系统中大量小文件导致空间统计异常如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-ip-address-of-a-windows-instance-is-unexpectedly-modified\">Windows系统的IP地址被异常修改如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-network-interfaces-are-missing-from-a-window-instance\">登录Windows实例内部发现网卡丢失如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/windows-instance-of-terminal-server-configuration-defect-in-can-t-remote-login\">Windows实例的终端服务器配置异常导致无法远程登录如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-windows-operating-system-of-an-instance-cannot-be-activated-because-the-file-type-of-slmgr-vbs-is-changed\">slmgr.vbs文件类型变化导致无法激活Windows系统如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-8000ffff-windows-update-encountered-an-unknown-error-error-message-appears-when-i-install-windows-updates-on-a-windows-server-2008-instance\">Windows 2008实例更新补丁出现“8000FFFFwindows update 遇到未知的错误”报错如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/there-was-a-0-update-or-install-windows-instance-role-x80073712-error-how-to-deal-with\">Windows实例更新或安装角色时出现“0x80073712（组件存储已损坏）”错误，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-environment-variables-that-are-configured-for-a-windows-server-instance-do-not-take-effect\">Windows Server配置环境变量不生效如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/server-manager-is-collecting-inventory-data-the-wizard-will-be-available-after-data-collection-finishes\">Windows实例在添加角色和功能时提示“服务器管理器正在收集清单数据。在数据收集完成后，将可以使用向导”，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-errors-are-reported-when-i-update-a-windows-operating-system\">更新Windows系统时提示错误，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-dotnet-framework-3-5-1-or-a-language-pack-cannot-be-installed-on-a-windows-instance\">Windows实例无法安装.NET Framework 3.5.1或语言包如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-a-service-cannot-be-manually-started-on-a-windows-instance\">Windows实例服务列表中无法手动启动服务，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-windows-operating-system-of-an-instance-cannot-be-activated-due-to-corrupted-instance-components\">Windows系统组件损坏导致系统激活失败如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/group-policy-opening-errors-caused-by-group-policy-file-configuration-exceptions\">Windows系统组策略文件配置异常导致组策略打开报错，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-a-message-similar-to-windows-explorer-is-stopped-is-displayed-when-i-use-a-self-managed-account-to-log-on-to-a-windows-instance\">使用自建账号登录Windows实例后提示“Windows资源管理器已停止工作”，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-when-the-system-update-process-of-a-windows-instance-is-stuck-at-0\">Windows系统的ECS实例更新系统时，一直卡在0%该如何处理？</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/solution-to-failure-in-remote-connection-to-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span>无法远程连接Windows实例的排查方法</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>无法远程连接Windows实例的排查方法</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-11 10:07:05</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"e43b224074txn\"><p id=\"e454ebd074chl\" data-tag=\"shortdesc\" class=\"shortdesc\">本文主要介绍无法远程连接Windows实例的处理方法。</p><div data-tag=\"conbody\" class=\"conbody\"><p id=\"230a3da085d24\">无法远程连接Windows实例的原因较多，请您根据实际情况，通过相应的排查方法，排查并解决无法远程连接Windows实例的问题。</p><ul id=\"79cc9ec28blr1\"><li id=\"79cc9ec08b4p8\"><p id=\"775843608bew1\"><a title=\"\" class=\"xref\" href=\"#1c7d23708br9f\">快速登录Windows实例</a></p></li><li id=\"812d5a608b3qv\"><p id=\"812d33508bs3n\"><a title=\"\" class=\"xref\" href=\"#e454ebd474yaj\">没有明确的报错信息</a></p></li><li id=\"8ac5b6818bszq\"><p id=\"8ac5b6808b6fv\"><a title=\"\" class=\"xref\" href=\"#96a5bf2085j84\">存在明确的报错信息</a></p></li></ul><section id=\"1c7d23708br9f\" class=\"section\"><h2 id=\"1c7d23718bbq8\"><b>快速登录Windows实例</b></h2><p id=\"3512c7508bvfd\">如果您遇到紧急情况，需要尽快登录Windows实例，请参见以下操作步骤，先检查ECS实例的状态，然后通过云助手向Windows实例发送命令或通过VNC登录实例，具体步骤如下：</p><section id=\"b4b9f5408bnrb\" class=\"section\"><h3 id=\"3512a0418bgdi\"><b>步骤一：检查ECS实例状态</b></h3><p id=\"99bedf938bs5j\">无论何种原因导致无法远程登录ECS实例，请先检查实例的状态。只有当ECS实例为<b>运行中</b>状态时，才能对外提供业务访问。检查步骤如下：</p><ol id=\"a580d2708beuj\"><li id=\"a580d2718bzof\"><p id=\"a580d2728bsyr\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"a580d2738b5jj\"><p id=\"a580d2748buxk\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"8adf5fc00axt0\" class=\"uicontrol\">实例与镜像 &gt; 实例</b>。</p></li><li class=\"li step stepexpand\" id=\"a580d2758bvyl\"><p id=\"a580d2768bb31\">在顶部菜单栏左上角处，选择地域。</p></li><li class=\"li step stepexpand\" id=\"a580d2778b2e7\"><p id=\"a580d2788b8rs\">在<b data-tag=\"uicontrol\" id=\"8adf86d40aelj\" class=\"uicontrol\">实例列表</b>页面，单击目标实例ID，查看目标实例的<b data-tag=\"uicontrol\" id=\"8adf86d60a3y3\" class=\"uicontrol\">状态</b>与<b data-tag=\"uicontrol\" id=\"8adf86d80ac1v\" class=\"uicontrol\">健康状况</b>，并选择合适的登录方式。</p><ul id=\"ee0f46a18bsmu\"><li id=\"ed71f5318bv9o\"><p id=\"ed71f5308bte8\">ECS实例生命周期状态和实例健康状况为下表所示，您可以继续<a title=\"\" class=\"xref\" href=\"#a36325501b4cb\">步骤二：通过VNC登录ECS实例</a>操作。</p><table id=\"25bd6d208bz2h\" tablewidth=\"708\" tablecolswidth=\"202 304 202\" class=\"table\"><colgroup colwidth=\"0.86*\" style=\"width:28.53%\"></colgroup><colgroup colwidth=\"1.29*\" style=\"width:42.94%\"></colgroup><colgroup colwidth=\"0.86*\" style=\"width:28.53%\"></colgroup><tbody class=\"tbody\"><tr id=\"25bd6d218bzll\"><td id=\"25bd6d228bzly\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"25bd6d238bs44\"><b>实例生命周期状态</b></p></td><td id=\"25bd6d248bja6\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"25bd6d258b65d\"><b>实例健康状况</b></p></td><td id=\"25bd6d268b46f\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"25bd6d278bxw4\"><b>登录方式</b></p></td></tr><tr id=\"25bd6d288b7hm\"><td id=\"25bd6d298b2in\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d2a8brqt\">启动中（Starting）</p></td><td id=\"25bd6d2b8bn4p\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d2c8bdhq\">初始化中（Initializing）</p></td><td id=\"25bd6d2d8blzb\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d2e8bfy6\">VNC</p></td></tr><tr id=\"25bd6d2f8bpaa\"><td id=\"25bd6d308bt9k\" rowspan=\"2\" colspan=\"1\"><p id=\"25bd6d318bkew\">运行中（Running）</p></td><td id=\"25bd6d328bq9u\" rowspan=\"1\" colspan=\"1\"><p id=\"7ff573a08bcuy\">初始化中（Initializing）</p></td><td id=\"25bd6d348b6bh\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d358b1t3\">VNC</p></td></tr><tr id=\"25bd6d368bnip\"><td id=\"25bd6d398bkg5\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d3a8b8p7\">无异常（OK）/操作系统运行存在异常（Impaired）</p></td><td id=\"25bd6d3b8bj8c\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d3c8brki\">VNC和WorkBench</p></td></tr><tr id=\"25bd6d3d8b7y8\"><td id=\"25bd6d3e8bfkq\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d3f8bsl3\">关机中（Stopping）</p></td><td id=\"25bd6d408bcnc\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d418bzu6\">数据不足（InsufficientData）</p></td><td id=\"25bd6d428bvb7\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d438byl4\">VNC</p></td></tr><tr id=\"25bd6d448blgn\"><td id=\"25bd6d458b1ts\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d468bqr0\">已关机（Stopped）</p></td><td id=\"25bd6d478bnie\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d488bxd0\">InsufficientData</p></td><td id=\"25bd6d498b2lv\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d4a8bcav\">无法登录</p></td></tr></tbody></table></li><li id=\"176bceb18bq44\"><p id=\"176bceb08bd2l\">ECS实例生命周期状态为除上表所示的其他状态时，您可以根据实例的状态，选择对应的解决方案。</p><p id=\"3e4bbe008b8bf\">更多ECS实例生命周期状态，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/instance-lifecycle\">实例的生命周期</a>。</p></li></ul></li></ol></section><section id=\"a36325501b4cb\" class=\"section\"><h3 id=\"60b855018bxlz\"><b>步骤二：通过VNC登录ECS实例</b></h3><p id=\"33d408801bsmk\">如果云助手无法使用或者无法满足您的使用需求，您还可以通过阿里云VNC工具进行远程登录，使用方法如下：</p><ol id=\"25fd2ab28bdfm\"><li id=\"25fd2ab08botx\"><p id=\"33d42f901b5pc\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"2a974c438be96\"><p id=\"33d42f911bm3u\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"8ae15b930a098\" class=\"uicontrol\">实例与镜像 &gt; 实例</b>。</p></li><li class=\"li step stepexpand\" id=\"2a974c458byn2\"><p id=\"33d42f921bqmt\">在顶部菜单栏左上角处，选择地域。</p></li><li class=\"li step stepexpand\" id=\"32dd37c18bm79\"><p id=\"33d42f931bn4s\">在<b data-tag=\"uicontrol\" id=\"8ae15b990ajmg\" class=\"uicontrol\">实例列表</b>页面，找到需要连接的实例，单击该实例对应<b data-tag=\"uicontrol\" id=\"8ae15b9b0a079\" class=\"uicontrol\">操作</b>列下的<b data-tag=\"uicontrol\" id=\"8ae15b9d0agwn\" class=\"uicontrol\">远程连接</b>。</p></li><li id=\"32dd37c38b7c8\"><p id=\"33d42f941bb3n\">在弹出的<b id=\"0cf794b01412v\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">远程连接</b>对话框中，单击<b id=\"ecs.rc.remote.connection-collapse-expend\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">展开其他登录方式</b>，然后单击<b id=\"ecs.rc.remote.connection-vnc-title\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">通过VNC远程连接</b>对应的<b id=\"ecs.rc.remote.connection-action-login\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">立即登录</b>。</p></li><li id=\"709144d08bmwt\"><p id=\"cc8def001bior\">登录实例操作系统。</p><ol id=\"cda049611bk3b\"><li id=\"d838a97014djp\"><p id=\"d144e7601b9hr\">在页面左上角，单击<span data-tag=\"menucascade\" id=\"4f58cec014rwb\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-9x6-994-6jp\" class=\"uicontrol\">发送远程命令</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-a2e-94e-hu8\" class=\"uicontrol\">CTRL+ALT+DELETE</b></span>。</p><div data-tag=\"info\" id=\"info-04w-hhf-9ur\" class=\"info\"><img data-tag=\"image\" id=\"image-3iz-tiu-n6u\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5248132161/p171354.png\" alt=\"window按键\" placement=\"break\" class=\"image break\"></div></li><li id=\"e3053fd014291\"><p id=\"d1450e711bv1j\">选择用户账户，输入实例登录密码，然后按Enter键。</p><div id=\"294e42c0140ly\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"d1450e721b698\">Windows实例默认账户为Administrator。</p></div></div></li></ol></li></ol></section><section id=\"d09e6ea08b8s2\" class=\"section\"><h3 id=\"4a010e118bmsa\"><b>步骤三：通过云助手向Windows实例发送命令</b></h3><p id=\"7e8febd38bcl0\">您可以尝试通过阿里云云助手向Windows实例发送命令，云助手的使用步骤如下：</p><ol id=\"87054bc08bay7\"><li id=\"87054bc18bgu6\"><p id=\"87054bc28byl1\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"87054bc38b6zd\"><p id=\"a4e96d128bx6e\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"8ae10d760ai8g\" class=\"uicontrol\">实例与镜像 &gt; 实例</b>。</p></li><li class=\"li step stepexpand\" id=\"a4e96d138b0a4\"><p id=\"a4e96d148bt8y\">在顶部菜单栏左上角处，选择地域。</p></li><li class=\"li step stepexpand\" id=\"bb0e5f118b2fl\" props=\"china\" data-cond-props=\"china\"><p id=\"06ff06101b8fd\">在<b data-tag=\"uicontrol\" id=\"c91bd879fa1dq\" class=\"uicontrol\">实例列表</b>页面，找到待操作的实例，在<b data-tag=\"uicontrol\" id=\"c91bd87bfa0nf\" class=\"uicontrol\">操作</b>中，选择<img placement=\"inline\" alt=\"image\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0881493761/p551505.png\" id=\"079ad2d096kev\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"c91bd87efa2b3\" class=\"uicontrol\"> &gt; 远程连接 &gt; 发送命令</b>。</p></li><li class=\"li step stepexpand\" id=\"a4e96d158bsa0\"><p id=\"f7e5aad11bnt3\">输入您需要执行的命令，单击<b data-tag=\"uicontrol\" id=\"8ae1348f0a542\" class=\"uicontrol\">执行</b>，即可在未登录Windows实例的情况下执行命令。</p><p id=\"f7e5aad21buq9\">更多有关云助手的信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-10\">云助手概述</a>。</p><img id=\"b3b8f8a08b85m\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4604178861/p542569.png\" alt=\"重启ECS实例\" placement=\"break\" class=\"image break\"></li></ol></section></section><section id=\"e454ebd474yaj\" class=\"section website-filter\" data-website=\"cn\"><h2 id=\"e455d638741lc\" data-tag=\"h3\" class=\"h3\"><b>没有明确的报错信息</b></h2><p id=\"e455d639748xb\">在远程连接失败时，如果您没有收到系统返回的报错信息，并且ECS实例是<b>运行中</b>的状态，然后再根据以下步骤进行排查：</p><ol id=\"3c4a8a128b5p3\"><li id=\"3c4a8a108bit9\"><p id=\"749889208bxsn\"><a title=\"\" class=\"xref\" href=\"#980b280086rwz\">步骤一：使用阿里云Workbench工具测试远程登录</a></p></li><li id=\"3d6aa0118b92r\"><p id=\"3d6aa0108bhse\"><a title=\"\" class=\"xref\" href=\"#c91c89b086xa7\">步骤二：检查是否有收到黑洞通知</a></p></li><li id=\"43fb61808b3x6\"><p id=\"43fb3a708by8i\"><a title=\"\" class=\"xref\" href=\"#edeb253086lj3\">步骤三：检查端口及安全组</a></p></li><li id=\"496b22908b6fz\"><p id=\"496afb808bmxk\"><a title=\"\" class=\"xref\" href=\"#acf0f860867xn\">步骤四：本地公网IP被云安全中心拦截</a></p></li><li id=\"4f0576118bti2\"><p id=\"4f0576108bn25\"><a title=\"\" class=\"xref\" href=\"#3d7eb9c18b7ul\">步骤五：检查防火墙配置</a></p></li><li id=\"5453f3808b8tq\"><p id=\"5453cc708bhj1\"><a title=\"\" class=\"xref\" href=\"#b7d2eb8086mwz\">步骤六：检查远程桌面服务</a></p></li><li id=\"5a8afc308b92w\"><p id=\"5a8ad5208b6ep\"><a title=\"\" class=\"xref\" href=\"#5e896f708bhyn\">步骤七：检查远程终端服务配置</a></p></li><li id=\"624dd5008b387\"><p id=\"624dadf08bfhm\"><a title=\"\" class=\"xref\" href=\"#c061edf086pl1\">步骤八：检查网络</a></p></li><li id=\"678dd3808b7ex\"><p id=\"678dac708bj07\"><a title=\"\" class=\"xref\" href=\"#c5e780f0862e5\">步骤九：检查CPU负载、带宽及内存使用情况</a></p></li><li id=\"6d66b6a08biyy\"><p id=\"6d668f908b0uz\"><a title=\"\" class=\"xref\" href=\"#d055f1c086tfr\">步骤十：检查系统的安全策略设置</a></p></li><li id=\"7539e3218b6f0\"><p id=\"7539e3208bvov\"><a title=\"\" class=\"xref\" href=\"#40a2bcb08576z\">步骤十一：检查杀毒软件</a></p></li><li id=\"7b0ea7908bg2q\"><p id=\"7b0e80808bhdg\"><a title=\"\" class=\"xref\" href=\"#64691ac080alr\">步骤十二：Windows注册表配置异常</a></p></li><li id=\"82ccc5718b6ou\"><p id=\"82ccc5708boew\"><a title=\"\" class=\"xref\" href=\"#af553c8085vg7\">步骤十三：Windows RDP自签证书到期</a></p></li></ol><section id=\"980b280086rwz\" class=\"section\"><h3 id=\"e455d63a74sip\" data-tag=\"h4\" class=\"h4\"><b>步骤一：使用阿里云Workbench工具测试远程登录</b></h3><p id=\"e455d63b74wdm\" data-spm-anchor-id=\"a2c9r.14518950.0.i2.68815e3bhqWD6h\">通过阿里云提供的Workbench工具进行远程登录，Workbench工具在远程登录出现异常时会返回具体的错误信息及解决方案。测试步骤如下：</p><ol id=\"e455fd40743cp\"><li id=\"e455fd4174jc8\"><p id=\"e455fd4274wsi\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"1db6d26186nbs\"><p id=\"1dd8b240865l7\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"8ae1d0ce0abok\" class=\"uicontrol\">实例与镜像 &gt; 实例</b>。</p></li><li class=\"li step stepexpand\" id=\"step-eh8-qtw-qsv\"><p id=\"1dd8b24186y1d\">在顶部菜单栏左上角处，选择地域。</p></li><li class=\"li step stepexpand\" id=\"step-vvh-f9x-djt\"><p id=\"1dd8b24286ou2\">在<b data-tag=\"uicontrol\" id=\"8ae1d0d40a0oc\" class=\"uicontrol\">实例列表</b>页面，找到需要连接的实例，单击该实例对应<b data-tag=\"uicontrol\" id=\"8ae1d0d60aahk\" class=\"uicontrol\">操作</b>列下的<b data-tag=\"uicontrol\" id=\"8ae1d0d80avbl\" class=\"uicontrol\">远程连接</b>。</p></li><li id=\"e455fd43740u9\"><p id=\"e455fd4474lgq\">在弹出的<b data-tag=\"uicontrol\" id=\"8ae1f7d40a6b6\" class=\"uicontrol\">远程</b><b data-tag=\"uicontrol\" id=\"8ae1f7d60a5jf\" class=\"uicontrol\">与命令</b>对话框中，单击<b data-tag=\"uicontrol\" id=\"8ae1f7d80a5ka\" class=\"uicontrol\">Workbench远程连接</b>对应的<b data-tag=\"uicontrol\" id=\"8ae1f7da0agfb\" class=\"uicontrol\">立即登录</b>。 </p></li><li id=\"e455fd4574uwo\"><p id=\"e455fd46746h1\">Workbench工具将自动填充登录目标实例所需的基本信息，请确认基本信息的正确性并输入登录的用户名和认证信息。并根据以下结果进行处理： </p><ul id=\"e455fd4774beo\"><li id=\"e455fd4874a4x\"><p id=\"e455fd49742ds\">如仍然无法登录，Workbench工具会返回错误提示和解决方案，请根据系统提示进行处理。处理完毕后重新使用Workbench工具进行远程登录测试。为了便于您解决问题，以下列举Workbench工具使用时常见的异常问题： \n<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/through-vnc-or-workbench-instance-remote-connection-problems#f799836096lr6\">Workbench远程连接问题（Windows）</a>。</p></li><li id=\"e455fd5074c4z\" data-spm-anchor-id=\"a2c9r.14518950.0.i3.68815e3bntbSoW\"><p id=\"e455fd5174f5b\">如可以通过Workbench工具正常登录，但无法通过本地服务器远程登录，说明远程连接的端口及服务正常，您可以自行排查。</p></li></ul></li></ol></section><section id=\"c91c89b086xa7\" class=\"section\"><h3 id=\"e456245174u5b\" data-tag=\"h4\" class=\"h4\"><b>步骤二：检查是否有收到黑洞通知</b></h3><p id=\"e456245274d3j\">请检查是否有收到黑洞通知，黑洞期间无法支持公网访问服务器。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/document_detail/40032.html\">阿里云黑洞策略</a>。</p></section><section id=\"edeb253086lj3\" class=\"section\"><h3 id=\"e456245374wyu\" data-tag=\"h4\" class=\"h4\"><b>步骤三：检查端口及安全组</b></h3><p id=\"e456245474r01\">检查安全组规则是否有限制，具体操作如下：</p><ol id=\"ada6b70186kz9\"><li id=\"abf0c9a086xva\"><p id=\"aac6054086kqf\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"e4562458747go\"><p id=\"e456245974ywk\">在顶部菜单栏左上角处，选择地域。</p></li><li id=\"e456245a746eb\" data-spm-anchor-id=\"a2c9r.14518950.0.i1.310f5e3bFdBaav\"><p id=\"e456245b74xe6\">在<b data-tag=\"uicontrol\" id=\"8ae245fd0ar76\" class=\"uicontrol\">实例列表</b>页面，单击对应的实例ID。</p></li><li id=\"e456245c741ul\" data-spm-anchor-id=\"a2c9r.14518950.0.i1.310f5e3bFdBaav\"><p id=\"e456245d74cxi\">在<b data-tag=\"uicontrol\" id=\"8ae246030akns\" class=\"uicontrol\">实例详情</b>页面，单击<b data-tag=\"uicontrol\" id=\"8ae26d010a1t7\" class=\"uicontrol\">安全组</b>页签，在<b data-tag=\"uicontrol\" id=\"8ae26d030a84s\" class=\"uicontrol\">安全组列表</b>区域，单击<b data-tag=\"uicontrol\" id=\"c91ce9e1fahhz\" class=\"uicontrol\">操作</b>列的<b data-tag=\"uicontrol\" id=\"3fec20c01bj97\" class=\"uicontrol\"><span data-tag=\"ph\" id=\"51a665a01b03c\" props=\"china\" data-cond-props=\"china\" class=\"ph\">管理规则</span></b><span data-tag=\"ph\" id=\"4810efb01bc5w\" class=\"ph\"></span>。</p></li><li id=\"e456245e74lek\"><p id=\"e456245f74s1z\">选择安全组规则方向。</p></li><li id=\"e456246074tue\"><p id=\"e456246174fnl\">在<b data-tag=\"uicontrol\" id=\"adc2ac901b3by\" class=\"uicontrol\">安全组规则</b>页面，您可以选择以下任意一种方式添加安全组规则，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。\n</p><ul id=\"e4562462742xj\"><li id=\"e456246374cnh\"><p id=\"e4564b60748kz\">方式一：快速添加安全组规则 \n</p><ul id=\"e4564b6174xv8\"><li id=\"e4564b6274rw4\"><p id=\"e4564b6374v8g\"><b data-tag=\"uicontrol\" id=\"af6b7a901b018\" class=\"uicontrol\">授权策略</b><b>：</b>允许</p></li><li id=\"e4564b647412i\"><p id=\"e4564b65741qk\"><b data-tag=\"uicontrol\" id=\"b15ebf101bgi6\" class=\"uicontrol\">端口范围</b><b>：</b>RDP（3389）</p></li><li id=\"e4564b6674uj3\"><p id=\"e4564b67743g5\"><b data-tag=\"uicontrol\" id=\"b3f632d01bisq\" class=\"uicontrol\">授权对象</b><b>：</b>0.0.0.0/0（代表所有IP访问）</p></li></ul></li><li id=\"e4564b69749ol\"><p id=\"e4564b6a74ul2\">方式二：手动添加安全组规则 \n</p><ul id=\"e4564b6b749io\"><li id=\"e4564b6c74zy0\"><p id=\"e4564b6d74ix0\"><b data-tag=\"uicontrol\" id=\"b6bdde501bl2g\" class=\"uicontrol\">授权策略</b><b>：</b>允许</p></li><li id=\"e4564b6e749b6\"><p id=\"e4564b6f74x83\"><b data-tag=\"uicontrol\" id=\"b88b4b501bx1r\" class=\"uicontrol\">优先级</b><b>：</b>1（代表安全规则中优先级最高，数字越小优先级越高）</p></li><li id=\"e4564b7074hcv\"><p id=\"e4564b7174d1x\"><b data-tag=\"uicontrol\" id=\"baa551b01bsqj\" class=\"uicontrol\">协议类型</b><b>：</b>自定义（TCP）</p></li><li id=\"e4564b7274fr6\"><p id=\"e4564b737445h\"><b data-tag=\"uicontrol\" id=\"bcd243d01b5mb\" class=\"uicontrol\">端口范围</b><b>：</b>如果自定义远程端口为33899，则设置为33899</p></li><li id=\"e4564b7474mcr\" data-spm-anchor-id=\"a2c9r.14518950.0.i5.673aiQGniQGnTN\"><p id=\"e456727074wz0\"><b data-tag=\"uicontrol\" id=\"be7f09701bzf6\" class=\"uicontrol\">授权对象</b><b>：</b>0.0.0.0/0（代表所有IP访问）</p></li></ul></li></ul></li><li id=\"e456727374yj5\" data-spm-anchor-id=\"a2c9r.12641779.0.i4.40d85e3bwEi3CJ\"><p id=\"e456727474hdq\">通过<code data-tag=\"code\" class=\"code\">IP:端口</code>的方式进行远程桌面连接。连接方式类似如下。</p><img placement=\"break\" alt=\"远程桌面\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8482822761/p540464.png\" id=\"6aba9aa087b5g\" class=\"image break\"></li><li id=\"e456727574qt7\"><p id=\"894c757086szy\">使用以下命令，进行端口测试，判断端口是否正常。</p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"e43b224174cxd\" class=\"pre codeblock language-javascript\"><code>telnet [$IP] [$Port]</code></pre><div id=\"e4567277748k2\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><section id=\"e4567278742od\" class=\"section\"><ul id=\"e456727a74sk9\"><li id=\"e456727b74o6z\"><p id=\"e456727c742dn\">[$IP]指Windows实例的IP地址。</p></li><li id=\"e456727d74ihf\"><p id=\"e456727e74auz\">[$Port]指Windows实例的RDP端口号。</p></li></ul></section></div></div><p id=\"e456727f7415l\">系统显示类似如下，比如执行<code data-tag=\"code\" class=\"code\">telnet 192.168.0.1 4389</code>命令，正常情况下返回结果类似如下。 </p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"e43b224274brz\" class=\"pre codeblock language-javascript\"><code>Trying 192.168.0.1 ...\nConnected to 192.168.0.1  4389.\nEscape character is '^]'</code></pre><p id=\"8ad2522086on7\">如果端口测试失败，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/troubleshooting-for-ping-attempts-to-pass-the-server-and-port-disconnection\">使用ping命令正常但端口不通时的端口可用性探测说明</a>进行排查。 </p></li></ol></section><section id=\"acf0f860867xn\" class=\"section\"><h3 id=\"e456728174f3k\" data-tag=\"h4\" class=\"h4\"><b>步骤四：本地公网IP被云安全中心拦截</b></h3><p id=\"e456728274gvj\" data-spm-anchor-id=\"a2c9r.14518950.0.i32.35095e3bOGbcgv\">如果在一个本地客户端网络连接ECS服务器时多次输入错误的登录信息，会导致此IP远程登录ECS的请求被拦截。您可以在云安全中心的<b>设置</b>中，添加本地IP至白名单，这样就不会对本地IP远程登录此服务器进行拦截，具体操作如下：</p><ol id=\"ol-hya-c50-38s\" class=\"ol\" data-spm-anchor-id=\"a2c4g.11186623.2.i10.62ea39faS9jcE2\"><li id=\"li-tax-4o7-s2z\" class=\"li\" data-spm-anchor-id=\"a2c4g.11186623.2.i9.62ea39faS9jcE2\"><p id=\"e456728374cwc\">登录<a class=\"\" target=\"_blank\" href=\"https://yundun.console.aliyun.com/?p=sas\">云安全中心控制台</a>。</p></li><li id=\"li-58w-xyc-srr\" class=\"li\" data-spm-anchor-id=\"a2c4g.11186623.2.i11.62ea39faS9jcE2\"><p id=\"aae86c4086xv3\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"8ae330510aekp\" class=\"uicontrol\">系统配置 &gt; 功能设置</b>。</p></li><li id=\"li-r77-nk3-r3l\" class=\"li\"><p id=\"b4dc55e086bba\">在<b data-tag=\"uicontrol\" id=\"8ae330550alm3\" class=\"uicontrol\">设置</b>页签的<b data-tag=\"uicontrol\" id=\"8ae330570ak12\" class=\"uicontrol\">其它配置</b>子页签，单击<b data-tag=\"uicontrol\" id=\"8ae330590aa3g\" class=\"uicontrol\">安全管控</b>区域的<b data-tag=\"uicontrol\" id=\"8ae3305b0admt\" class=\"uicontrol\">配置</b>，跳转至<b data-tag=\"uicontrol\" id=\"8ae3305d0aqb4\" class=\"uicontrol\">安全管控</b>控制台。</p></li><li id=\"fd74838186ftx\"><p id=\"fd74838086s62\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"9d9ac7801b77z\" class=\"uicontrol\">白名单管理 &gt; IP白名单</b>。</p></li><li id=\"0a9ac151863g6\"><p id=\"0a9ac15086yl9\">在<b data-tag=\"uicontrol\" id=\"a051f8401bhsj\" class=\"uicontrol\">IP白名单</b>页面，单击<b data-tag=\"uicontrol\" id=\"a2b822d01bmfx\" class=\"uicontrol\">添加</b>。</p><p id=\"0ea5260086teo\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/security-center/user-guide/enable-features-on-the-other-settings-tab#section-hma-ab3-i7i\">安全管控</a>。</p></li></ol></section><h3 id=\"3d7eb9c18b7ul\" data-tag=\"h4\" class=\"h4\"><b>步骤五：检查防火墙配置</b></h3><div type=\"note\" id=\"3d7eb9c28brmx\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3d7eb9c38ba2i\">只有在已授权可关闭防火墙的情况下，才能进行该项排查。请确认防火墙是否已关闭，如果没有关闭，则通过调整防火墙配置策略修复，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-configure-a-firewall-for-remote-connection-to-a-windows-instance\">如何配置Windows实例远程连接的防火墙</a>。</p></div></div><ol id=\"3d7eb9c48bdpd\"><li id=\"3d7eb9c58bbzp\"><p id=\"3d7eb9c68b4d3\">使用VNC方式登录Windows实例。</p><p id=\"3d7eb9c78by3v\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"3d7eb9c88bpo7\"><p id=\"3d7eb9c98bbn3\">在菜单栏选择<b data-tag=\"uicontrol\" id=\"c3e5c9d01bjcc\" class=\"uicontrol\">开始&gt;控制面板</b>。</p></li><li id=\"3d7eb9ca8b9af\"><p id=\"3d7eb9cb8bbvw\"><b data-tag=\"uicontrol\" id=\"c73b36601b951\" class=\"uicontrol\">查看方式</b>选择<b data-tag=\"uicontrol\" id=\"c5285bf01bbpi\" class=\"uicontrol\">小图标</b>，单击<b data-tag=\"uicontrol\" id=\"c8ce0b601bqd5\" class=\"uicontrol\">Windows 防火墙</b>。</p><img id=\"3d7eb9cd8bz8m\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9643212761/p519622.png\" class=\"image break\"></li><li id=\"3d7eb9ce8bdcn\"><p id=\"3d7eb9cf8bmll\">在<b data-tag=\"uicontrol\" id=\"8ae37e750aft0\" class=\"uicontrol\">Windows防火墙</b>界面，单击<b data-tag=\"uicontrol\" id=\"8ae37e770aw9w\" class=\"uicontrol\">高级设置</b>。</p></li><li id=\"3d7eb9d08bzyr\"><p id=\"3d7eb9d18btk2\">启用防火墙配置。</p><ol id=\"3d7eb9d28bwgp\"><li id=\"3d7eb9d38bymq\"><p id=\"3d7eb9d48bpim\">在<b data-tag=\"uicontrol\" id=\"8ae37e7e0a6m3\" class=\"uicontrol\">高级安全 Windows 防火墙</b><b>，</b>单击<b data-tag=\"uicontrol\" id=\"8ae37e810anar\" class=\"uicontrol\">Windows防火墙属性</b>。</p><img id=\"3d7eb9d68bl2b\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8643212761/p519624.png\" class=\"image break\"></li><li id=\"3d7eb9d78blc6\"><p id=\"3d7eb9d88bqcf\">选择<b data-tag=\"uicontrol\" id=\"8ae37e870awql\" class=\"uicontrol\">启用（推荐）</b>，单击<b data-tag=\"uicontrol\" id=\"8ae37e8a0apsc\" class=\"uicontrol\">应</b><b data-tag=\"uicontrol\" id=\"8ae37e8d0aqh6\" class=\"uicontrol\">用(</b><b data-tag=\"uicontrol\" id=\"8ae3a5800a841\" class=\"uicontrol\">A)</b>。 </p><p id=\"3d7eb9d98bnxd\">建议将<b data-tag=\"uicontrol\" id=\"2e329e301brax\" class=\"uicontrol\">域配置文件</b>、<b data-tag=\"uicontrol\" id=\"30396ab01bjlu\" class=\"uicontrol\">专用配置文件</b>、<b data-tag=\"uicontrol\" id=\"31c848101bwi9\" class=\"uicontrol\">公用配置文件</b>选项卡下的防火墙全部启用。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8643212761/p519625.png\" id=\"3d7eb9db8bcsm\" class=\"image break\"></li></ol></li><li id=\"3d7eb9dc8b038\"><p id=\"3d7eb9dd8bbms\">在<b data-tag=\"uicontrol\" id=\"8ae3a58a0aiof\" class=\"uicontrol\">高级安全 Windows 防火墙</b>，单击<b data-tag=\"uicontrol\" id=\"8ae3a58c0astr\" class=\"uicontrol\">入站规则</b>，在右侧拉至最下方，右键单击<b data-tag=\"uicontrol\" id=\"8ae3a58e0aylt\" class=\"uicontrol\">远程桌面-用户模</b><b data-tag=\"uicontrol\" id=\"8ae3a5900apor\" class=\"uicontrol\">式(</b><b data-tag=\"uicontrol\" id=\"8ae3a5920ab35\" class=\"uicontrol\">TCP-In)</b>，选择<b>启动规则(E)</b>。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8643212761/p519623.png\" id=\"3d7eb9de8bdw4\" class=\"image break\"></p></li></ol><p id=\"3d7eb9df8bo3w\" data-spm-anchor-id=\"a2c9r.12641779.0.i12.6d5dxMTKxMTKdB\">更多关于防火墙的设置信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-configure-a-firewall-for-remote-connection-to-a-windows-instance\">设置Windows实例远程连接防火墙</a>。</p><section id=\"b7d2eb8086mwz\" class=\"section\"><h3 id=\"e456998374qif\" data-tag=\"h4\" class=\"h4\"><b>步骤六：检查远程桌面服务</b></h3><p id=\"e456998474k39\">您可以查看Windows服务器的系统是否开启了远程桌面服务。具体操作如下：</p><ol id=\"e456998574kr5\"><li id=\"e456998674ez1\"><p id=\"e456998774j9j\">使用VNC方式登录Windows实例。</p><p id=\"8b018b3086jql\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"e45699887480q\"><p id=\"e456998974zbm\">右键单击开始菜单，单击<b data-tag=\"uicontrol\" id=\"8ae3f3a40ar3w\" class=\"uicontrol\">系统</b>。</p></li><li id=\"dba74de186lk0\"><p id=\"dba74de086v21\">在<b data-tag=\"uicontrol\" id=\"8ae3f3a80awp9\" class=\"uicontrol\">系统</b>界面，单击<b data-tag=\"uicontrol\" id=\"8ae3f3aa0aq1f\" class=\"uicontrol\">远程设置</b>。</p><img placement=\"break\" alt=\"远程设置\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p540024.png\" id=\"baf6829086r7r\" class=\"image break\"></li><li id=\"e456998a74ozr\"><p id=\"e456998b74gip\">在<b data-tag=\"uicontrol\" id=\"8ae41ab10ach0\" class=\"uicontrol\">远程桌面</b>区域，选中<b data-tag=\"uicontrol\" id=\"8ae41ab30am2p\" class=\"uicontrol\">允许远程连接到此</b><b data-tag=\"uicontrol\" id=\"8ae41ab60amw5\" class=\"uicontrol\">计算</b><b data-tag=\"uicontrol\" id=\"8ae41ab90a1bl\" class=\"uicontrol\">机(</b><b data-tag=\"uicontrol\" id=\"8ae41abc0a46o\" class=\"uicontrol\">L)</b>，单击<b data-tag=\"uicontrol\" id=\"8ae41abe0a5k3\" class=\"uicontrol\">确定</b>。 </p><img placement=\"break\" alt=\"设置远程\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p540023.png\" id=\"b58a43f186r1d\" class=\"image break\"></li><li id=\"e456998c74rtb\"><p id=\"6e4893b0863cf\">启动<b data-tag=\"uicontrol\" id=\"8ae441c40a4mx\" class=\"uicontrol\">Remote Desktop Services</b>服务。</p><p id=\"6bd71e8086ngt\">在<b data-tag=\"uicontrol\" id=\"8ae441c70atze\" class=\"uicontrol\">开始</b>菜单中，选择<b data-tag=\"uicontrol\" id=\"8ae441ca0azf7\" class=\"uicontrol\">管理工具&gt;组件服务&gt;服务（本地）</b>，在右侧的菜单窗口中找到<b data-tag=\"uicontrol\" id=\"270fd5f01bgtx\" class=\"uicontrol\">Remote Desktop Services</b>服务，检查是否启动，如果没有启动，则需启动。</p><img placement=\"break\" alt=\"启动\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p540028.png\" id=\"677f0f008644c\" class=\"image break\"></li><li id=\"e456998e74nc3\"><p id=\"e456998f74cls\">加载远程桌面服务所依赖的驱动和服务。</p><p id=\"860f4ed086thc\">为了提高系统安全性，有时错误地将远程桌面服务所依赖的某些关键服务禁用，导致远程桌面服务异常。可通过以下操作进行检查。 \n</p><ol id=\"ff94782186yjk\"><li id=\"e456c09274qlo\" data-spm-anchor-id=\"a2c9r.12641779.0.i1.6d5dxMTKxMTKdB\"><p id=\"e456c0937432k\">右键单击开始菜单，单击<b data-tag=\"uicontrol\" id=\"8ae468d30ar7p\" class=\"uicontrol\">运行</b>，输入<code data-tag=\"code\" class=\"code\">msconfig</code>，单击<b data-tag=\"uicontrol\" id=\"245b64501bxu3\" class=\"uicontrol\">确定</b>。</p><img placement=\"break\" alt=\"msconfig\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p540030.png\" id=\"297e9a3086e6d\" class=\"image break\"></li><li id=\"e456c09474jkf\" data-spm-anchor-id=\"a2c9r.12641779.0.i5.6d5dxMTKxMTKdB\"><p id=\"e456c09574i4z\">在<b data-tag=\"uicontrol\" id=\"8ae468db0ay1h\" class=\"uicontrol\">系统配置</b>对话框中，单击<b data-tag=\"uicontrol\" id=\"8ae468dd0aur4\" class=\"uicontrol\">常规</b>页签，选中<b data-tag=\"uicontrol\" id=\"8ae468df0ab1u\" class=\"uicontrol\">正常</b><b data-tag=\"uicontrol\" id=\"8ae468e20af5z\" class=\"uicontrol\">启</b><b data-tag=\"uicontrol\" id=\"8ae468e50arz5\" class=\"uicontrol\">动(</b><b data-tag=\"uicontrol\" id=\"8ae468e80abqv\" class=\"uicontrol\">N)</b>，单击<b data-tag=\"uicontrol\" id=\"8ae468ea0a5c9\" class=\"uicontrol\">确定</b>。 <img src=\"data:image/png;base64,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\" alt=\"正常启动\" placement=\"break\" id=\"74c4c640861zh\" class=\"image break\"></p></li><li id=\"a96bee50869ip\"><p id=\"a96bc74086omg\">重启ECS实例。</p><p id=\"b50571a086oly\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li></ol></li></ol></section><section id=\"5e896f708bhyn\" class=\"section\"><h3 id=\"4efabd218bg2f\" data-tag=\"h4\" class=\"h4\"><b>步骤七：检查远程终端服务配置</b></h3><p id=\"4efabd228b2zs\">无法连接Windows实例的远程桌面可能是由于以下远程终端服务的配置异常。</p><div type=\"note\" id=\"4efabd238b4y7\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"4efabd248bq1x\">本示例以Windows Server 2008为例，其他Windows Server版本操作类似。</p></div></div><section id=\"4efabd258bzpc\" class=\"section\"><h4 id=\"4efabd268bqy5\" data-tag=\"h5\" class=\"h5\"><b>异常一：服务器侧自签名证书损坏</b></h4><p id=\"4efabd278b02i\">本地客户端如果是Windows 7以上版本的系统，会尝试与云服务器ECS建立TLS连接。若云服务器ECS侧用于TLS连接的自签名证书损坏，则会导致远程连接失败。</p><ol id=\"4efabd288bjrd\"><li id=\"4efabd298buog\"><p id=\"4efabd2a8b0up\">使用VNC方式登录Windows实例。</p><p id=\"4efabd2b8bvan\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"4efabd2c8bjg2\"><p id=\"4efabd2d8bzt4\">选择<b data-tag=\"uicontrol\" id=\"8ae616800arta\" class=\"uicontrol\">开始&gt;管理工具&gt;远程桌面服务&gt;远程桌面会话主机配置</b>。 </p><img id=\"4efabd2f8b36t\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p540228.png\" alt=\"远程桌面会话主机配置\" placement=\"break\" class=\"image break\"></li><li id=\"4efabd308br4m\"><p id=\"4efabd318b30c\">在连接区域，右键单击<b data-tag=\"uicontrol\" id=\"17e2cba01bm74\" class=\"uicontrol\">RDP-Tcp</b>，然后单击<b data-tag=\"uicontrol\" id=\"8ae616870as6u\" class=\"uicontrol\">属性</b>。</p></li><li id=\"4efabd328bgge\"><p id=\"4efabd338b9qk\">在<b data-tag=\"uicontrol\" id=\"1e1010501bqs1\" class=\"uicontrol\">RDP-Tcp属性</b>窗口，将<b data-tag=\"uicontrol\" id=\"19d28db01bu2d\" class=\"uicontrol\">安全层</b>修改成<b data-tag=\"uicontrol\" id=\"1b77b2301btrk\" class=\"uicontrol\">RDP安全层</b>，单击<b data-tag=\"uicontrol\" id=\"8ae63d910aqmc\" class=\"uicontrol\">确定</b>。</p><img id=\"4efabd358b3wx\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p540231.png\" alt=\"RDP 安全层\" placement=\"break\" class=\"image break\"></li><li id=\"4efabd368bpcq\"><p id=\"4efabd378busy\">在操作区域，单击<b data-tag=\"uicontrol\" id=\"8ae664a10al9w\" class=\"uicontrol\">禁用连接</b>，再单击<b data-tag=\"uicontrol\" id=\"8ae664a30abiv\" class=\"uicontrol\">启用连接</b>。 </p><img id=\"4efabd398b711\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p540264.png\" alt=\"禁用连接\" placement=\"break\" class=\"image break\"><img id=\"4efabd3b8b7lz\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p540271.png\" alt=\"启用连接\" placement=\"break\" class=\"image break\"></li></ol></section><section id=\"4efabd3c8bzki\" class=\"section\"><h4 id=\"4efabd3d8b9tg\" data-tag=\"h5\" class=\"h5\"><b>异常二：远程桌面会话主机配置连接被禁用</b></h4><p id=\"4efabd3e8bqs9\">使用<code data-tag=\"code\" class=\"code\">netstat</code>命令查询，发现端口未正常监听。</p><p id=\"4efabd3f8b0tt\">使用VNC方式登录Windows实例后，发现远程桌面RDP连接属性配置文件被禁用，重新启用<b data-tag=\"uicontrol\" id=\"8ae664af0asg3\" class=\"uicontrol\">RDP-Tcp连接</b>即可<b>，</b>具体操作，请参见<a title=\"\" class=\"xref\" href=\"#4efabd268bqy5\">异常一：服务器侧自签名证书损坏</a>。</p><img id=\"4efabd418bbq9\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p540271.png\" alt=\"启用连接\" placement=\"break\" class=\"image break\"></section><section id=\"4efabd428bsjo\" class=\"section\"><p id=\"4efabd438bele\" data-tag=\"h5\" class=\"h5\"><b>异常三：终端服务器角色配置</b></p><p id=\"4efabd448bek4\">在使用远程桌面访问Windows实例时，可能会出现如下提示。 <img id=\"4efabd458b522\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8643212761/p519631.png\" class=\"image break\"></p><p id=\"4efabd468b0cl\">这种情况一般是由于在服务器上安装配置了<b data-tag=\"uicontrol\" id=\"8ae664bb0ak8q\" class=\"uicontrol\">终端服务器</b>，但是没有配置有效的访问授权导致的，可参考以下三种解决方案处理：</p><ul id=\"4efabd478bpfm\"><li id=\"4efabd488b3wu\"><p id=\"4efabd498bu0q\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-error-message-no-remote-desktop-authorization-server-can-provide-a-license-is-prompted-for-remote-login-to-a-windows-instance\">Windows服务器远程桌面提示“没有远程桌面授权服务器可以提供许可证”错误</a></p></li><li id=\"4efabd4a8bupf\"><p id=\"4efabd4b8bytw\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-that-indicates-lack-of-terminal-server-user-access-permissions-appears-when-i-connect-to-a-windows-instance-by-using-remote-desktop\">远程登录Windows实例报“远程桌面用户组没有该权限”错误</a></p></li><li id=\"4efabd4c8bb1w\"><p id=\"4efabd4d8b7kv\">如果是安装了终端服务器角色导致的，需要登录服务器鼠标右键单击<b data-tag=\"uicontrol\" id=\"8ae68bba0az1c\" class=\"uicontrol\">计算机</b>，选择<b data-tag=\"uicontrol\" id=\"8ae68bbc0ata7\" class=\"uicontrol\">角色&gt;删除角色服务</b>。</p></li></ul></section></section><section id=\"c061edf086pl1\" class=\"section\"><h3 id=\"e456c09774eii\" data-tag=\"h4\" class=\"h4\"><b>步骤八：检查网络</b></h3><p id=\"e456c09874ykm\">无法正常远程连接Windows实例时，需要先检查网络是否正常。</p><ol id=\"e456c09974axv\"><li id=\"e456c09a743ad\"><p id=\"7bd5436086l64\">使用其他网络环境中（不同网段或不同运营商）的电脑连接对比测试，判断是本地网络问题还是服务器端的问题。</p><ul id=\"cf7d6a1186x08\"><li id=\"ced9d71186vsj\"><p id=\"ced9d710868cc\">如果是本地网络问题或运营商问题，请联系本地IT人员或运营商解决。</p></li><li id=\"d1c66fb086tik\"><p id=\"d1c648a086jsx\">如果是网卡驱动存在异常，则重新安装。排除本地网络故障后进行下一步检查。</p></li></ul></li><li id=\"e456c09c74r03\"><p id=\"e456c09d74bzn\">在本地客户端使用<code data-tag=\"code\" class=\"code\">ping</code>命令测试与实例的网络连通性。 \n</p><ul id=\"e456c09e74rp5\"><li id=\"e456c09f74r5w\"><p id=\"e456c0a074q97\">网络异常时，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-capture-data-packets-when-a-network-exception-occurs\">网络异常时如何抓取数据包</a>进行排查。</p></li><li id=\"e456c0a174s1i\"><p id=\"e456c0a274smh\">当出现ping丢包或ping不通时，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-the-ping-command-packet-loss-or-not-the-link-test-method\">使用ping命令丢包或不通时的链路测试方法</a>进行排查。</p></li><li id=\"e456c0a374t97\"><p id=\"e456c0a474rb6\">如果出现间歇性丢包，ECS实例的网络一直处于不稳定状态时，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-the-ping-command-to-test-intermittent-packet-loss-of-the-ip-address-of-an-ecs-instance\">使用ping命令测试ECS实例的IP地址间歇性丢包</a>进行解决。</p></li></ul></li><li id=\"e456e7a174kay\"><p id=\"e456e7a274dki\">在实例中使用ping命令测试与客户端的连通性，提示<b data-tag=\"uicontrol\" id=\"8ae6b2c70ayae\" class=\"uicontrol\">一般故障</b>错误时，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/when-you-ping-the-internet-address-of-a-windows-instance-the-system-prompts-general-fault\">Windows实例ping外网地址提示“一般故障”</a>进行解决。</p></li></ol></section><section id=\"c5e780f0862e5\" class=\"section\"><h3 id=\"e456e7a374u57\" data-tag=\"h4\" class=\"h4\"><b>步骤九：检查CPU负载、带宽及内存使用情况</b></h3><p id=\"6052f1c0866vc\">无法正常远程连接Windows实例时，可能是因为CPU负载、带宽不足或内存不足导致。</p><ol id=\"e456e7a4740vv\"><li id=\"e456e7a574j7f\"><p id=\"8f2befa086i3m\">根据是否存在CPU负载过高情况，选择相应操作。</p><ul id=\"c507e3a186j4p\"><li id=\"c3f932c086wmp\"><p id=\"c3f90bb086c7r\">不存在CPU负载过高情况，请继续执行步骤2继续排查。</p></li><li id=\"c90f893086tp1\"><p id=\"c90f622086xm8\">如果CPU负载过高情况，请参考本步骤解决问题。\n</p><ul id=\"e456e7a774eo2\"><li id=\"e456e7a874fcz\"><p id=\"e456e7a974ro8\">检查CPU负载过高时，通过实例详情页面的终端登录实例，检查后台是否正在执行Windows Update操作。若存在Windows Update操作，则CPU负载过高是正常结果，请继续等待执行完成。</p></li><li id=\"e456e7ac743os\"><p id=\"e456e7ad7448o\">若应用程序有大量的磁盘访问、网络访问行为、高计算需求，CPU负载过高是正常结果。建议您升配实例规格来解决资源瓶颈问题，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-of-instance-configuration-changes\">升降配方式概述</a>。</p><div type=\"note\" id=\"5888f79086m2f\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"5ad5a6b0867tz\">CPU负载过高的解决方法，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-if-cpu-utilization-is-high-on-a-windows-instance\">Windows系统ECS实例的CPU使用率较高的解决方法</a>。</p></div></div></li></ul></li></ul></li><li id=\"e456e7b174waj\" data-spm-anchor-id=\"a2c9r.12641779.0.i1.40d8kG22kG22UK\"><p id=\"e456e7b274wkc\">排查是否存在公网带宽不足问题。 </p><p id=\"082ef3d086dwu\">无法远程连接可能是公网带宽不足导致的，具体排查方法如下。</p><ol id=\"e4570eb0749p5\" start=\"1\"><li id=\"e4575cd0740cd\"><p id=\"abed14c286vbz\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"abed14c386o4t\"><p id=\"abed14c486yba\">在顶部菜单栏左上角处，选择地域。</p></li><li id=\"abed14c586j2g\" data-spm-anchor-id=\"a2c9r.14518950.0.i1.310f5e3bFdBaav\"><p id=\"abed14c686tnf\">在<b data-tag=\"uicontrol\" id=\"8ae6d9dc0a4sj\" class=\"uicontrol\">实例列表</b>页面，单击对应的实例ID，在<b data-tag=\"uicontrol\" id=\"8ae6d9de0aw3y\" class=\"uicontrol\">基本信息</b>区域，查看<b data-tag=\"uicontrol\" id=\"8ae6d9e00a1it\" class=\"uicontrol\">当前使用带宽</b>。</p><p id=\"1bd0fe808770c\">如果服务器带宽为0 Mbps，说明购买实例时没有购买公网带宽，您可以通过升级带宽解决，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-of-instance-configuration-changes#ChangeBandwidth\">修改公网带宽</a>。</p></li></ol></li><li id=\"e4575cd874doz\" data-spm-anchor-id=\"a2c9r.12641779.0.i1.40d8kG22kG22UK\"><p id=\"e4575cd974tnu\">排查是否存在内存不足问题。</p><p id=\"146ace7086ksv\">远程连接Windows实例后，不能正常显示桌面并直接退出，也没有错误信息提示。这种情况可能是服务器内存不足导致，需要检查服务器的内存使用情况。具体操作如下。 </p><ol id=\"4759711186bsn\"><li id=\"3d34173086bdf\"><p id=\"3d34173186shp\">使用VNC方式登录Windows实例。</p><p id=\"3d34173286mpx\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"e45783e574lju\"><p id=\"e45783e874gi5\">选择<b data-tag=\"uicontrol\" id=\"0e79e3f01b43e\" class=\"uicontrol\">开始&gt;管理工具&gt;事件查看器</b>，查看是否存在内存资源不足的警告日志信息。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/troubleshooting-windows-low-virtual-memory-problem\">Windows 虚拟内存不足问题的处理</a>。</p></li></ol></li></ol></section><section id=\"d055f1c086tfr\" class=\"section\"><h3 id=\"e457aafe74jvm\" data-tag=\"h4\" class=\"h4\"><b>步骤十：检查系统的安全策略设置</b></h3><p id=\"e457aaff74ydx\" data-spm-anchor-id=\"a2c9r.12641779.0.i10.6d5dhZW1hZW17b\">您可以查看Windows服务器上是否有阻止远程桌面连接的相关安全策略。具体操作如下。</p><ol id=\"9eae55a1865fq\"><li id=\"9cc65bc086nf2\"><p id=\"98168f5186x5u\">使用VNC方式登录Windows实例。</p><p id=\"98168f5286idz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"e457ab0374ji7\"><p id=\"e457ab0474v2q\">选择<b data-tag=\"uicontrol\" id=\"8ae700f20arta\" class=\"uicontrol\">开始&gt;控制面板&gt;管理工具</b>，双击<b data-tag=\"uicontrol\" id=\"8ae727f00aags\" class=\"uicontrol\">本地安全策略</b>。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9643212761/p519626.png\" class=\"image break\"></p></li><li id=\"e457ab05747y2\"><p id=\"e457ab0674cgu\">在<b data-tag=\"uicontrol\" id=\"8ae727f50asxc\" class=\"uicontrol\">本地安全策略</b>界面中，单击<b data-tag=\"uicontrol\" id=\"8ae727f70an3h\" class=\"uicontrol\">IP安全策略，在本地计算机</b>，根据是否存在相关的安全策略，选择相应操作。</p><ol id=\"10f7143186un1\"><li id=\"1070cd3086t4u\"><p id=\"22cfb68086dfa\">存在相关安全策略，删除或重新编辑该安全策略</p><ul id=\"773a2021868w0\"><li id=\"76859d3186qjr\"><p id=\"76859d3086oo0\">删除安全策略：右键单击相关策略，选择<b data-tag=\"uicontrol\" id=\"8ae728000a5ol\" class=\"uicontrol\">删</b><b data-tag=\"uicontrol\" id=\"8ae728030aw1s\" class=\"uicontrol\">除(</b><b data-tag=\"uicontrol\" id=\"8ae728060a49l\" class=\"uicontrol\">D)</b>，在弹出的对话框，单击<b data-tag=\"uicontrol\" id=\"8ae728090ahdu\" class=\"uicontrol\">是</b>。</p><img id=\"9cf2585086c9b\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p540173.png\" alt=\"删除安全策略\" placement=\"break\" class=\"image break\"></li><li id=\"7a4ae2918661n\"><p id=\"7a4ae290863ak\">双击打开该IP的安全策略，重新配置以允许远程桌面连接，然后再使用远程桌面连接。</p></li></ul></li><li id=\"24676d8086g9l\"><p id=\"2467467086hif\">不存在相关安全策略，执行<a title=\"\" class=\"xref\" href=\"#d055f1c086tfr\">步骤十：检查系统的安全策略设置</a>继续排查。</p></li></ol></li></ol></section><section id=\"40a2bcb08576z\" class=\"section\"><h3 id=\"e457f918746y6\" data-tag=\"h4\" class=\"h4\"><b>步骤十一：检查杀毒软件</b></h3><p id=\"e457f91974h66\">使用远程桌面无法连接ECS实例可能是由于第三方杀毒软件设置导致，可通过以下方法进行解决。此处列举两个安全狗配置导致远程访问失败的解决案例。</p><ul id=\"e457f91a7448a\"><li id=\"e457f91b7463g\"><p id=\"e457f91c74i2d\">如果杀毒软件在后台执行，可通过VNC方式登录实例，将杀毒软件升级至最新版本或者直接删除。关于如何使用VNC登录实例，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"e457f91d74es5\" data-spm-anchor-id=\"a2c9r.12641779.0.i21.ebf85e3bceUODA\"><p id=\"e457f91e74iih\">请使用商业版杀毒软件，或者使用Microsoft Safety Scanner微软免费安全工具，在安全模式下扫描杀毒。关于更多安全扫描程序信息，请参见<a class=\"\" target=\"_blank\" href=\"https://www.microsoft.com/security/scanner/zh-cn/default.aspx\">安全扫描程序</a>。</p></li></ul><section id=\"6eb23e20856b0\" class=\"section\"><h4 id=\"e457f91f748gu\" data-tag=\"h5\" class=\"h5\"><b>案例一：安全狗黑名单拦截</b></h4><p id=\"e457f92074598\">如果安装了安全狗后，出现以下情况，请确认防护软件中是否做了安全设置或对应的拦截。</p><ul id=\"e457f921741jr\"><li id=\"e457f92274npq\"><p id=\"e457f92374qvx\">客户端本地无法远程桌面连接Windows实例，但其他区域可以远程连接。</p></li><li id=\"e457f92474t2b\"><p id=\"e4582020749uj\">无法ping通服务器IP地址，并且通过<code data-tag=\"code\" class=\"code\">tracert</code>命令跟踪路由，发现无法到达服务器。</p></li><li id=\"e4582021747hf\"><p id=\"e458202274vz5\">云安全中心未拦截本地公网IP地址。</p></li></ul><p id=\"e458202374ti9\">打开<b data-tag=\"uicontrol\" id=\"8ae776190a68t\" class=\"uicontrol\">服务器安全狗</b>，选择<b data-tag=\"uicontrol\" id=\"8ae7761b0asgn\" class=\"uicontrol\">网络防火墙</b>，单击<b data-tag=\"uicontrol\" id=\"8ae7761d0ad5s\" class=\"uicontrol\">超级</b><b data-tag=\"uicontrol\" id=\"8ae776200acxq\" class=\"uicontrol\">黑白名</b><b data-tag=\"uicontrol\" id=\"8ae776220ap4q\" class=\"uicontrol\">单</b><b>右侧</b>的<img id=\"2652de508592d\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p539775.png\" alt=\"设置图标\" placement=\"inline\" class=\"image inline\">图标，如果<b data-tag=\"uicontrol\" id=\"8ae776260azi7\" class=\"uicontrol\">超级黑名单</b>中存在ECS实例公网IP，需将此黑名单规则删除，然后将公网IP添加到<b data-tag=\"uicontrol\" id=\"8ae776280avvd\" class=\"uicontrol\">超级白名单</b>。</p><img id=\"22cc76b085rxx\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p539774.png\" alt=\"服务器安全狗\" placement=\"break\" class=\"image break\"><div type=\"note\" id=\"55f674a1858gi\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"589cb570856if\">如果云安全中心的阈值设置过低，则可能拦截实例公网IP。建议把清洗阈值调高，避免出现拦截实例公网IP的情况发生，更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/anti-ddos-origin-basic\">DDoS基础防护</a>。</p></div></div></section><section id=\"72f00ee085yd8\" class=\"section\"><p id=\"e458202874n2k\" data-tag=\"h5\" class=\"h5\"><b>案例二：安全狗程序异常</b></p><p id=\"e4582029747aj\">使用VNC登录到Windows实例后，在系统桌面右下角，安全狗弹出错误提示，系统显示类似如下。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9643212761/p519633.png\" id=\"f07304a1857id\" class=\"image break\"><p id=\"eb51639085o37\">该问题可能是由于安全狗软件出现异常导致，您可以通过Windows系统卸载安全狗软件后，重启ECS实例，即可恢复网络。</p></section></section><section id=\"64691ac080alr\" class=\"section\"><h3 id=\"884b2c8086pv3\"><b>步骤十二：</b>Windows注册表配置异常</h3><p id=\"180e36c18b2cu\">Windows注册表相关配置异常，可能导致RDP连接被阻断，您可以参考以下步骤来修复。</p><ol id=\"bf25d9d285iz4\"><li id=\"bf25d9d085kx7\"><p id=\"8d03b261809at\">使用VNC连接ECS实例。</p><p id=\"c2f77b4085ozd\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"c4ebd130856ue\"><p id=\"c4ebaa2085oiv\">在<b data-tag=\"uicontrol\" id=\"8ae7c4330abcv\" class=\"uicontrol\">运行</b>框中输入<b data-tag=\"uicontrol\" id=\"8ae7c4350aqtf\" class=\"uicontrol\">regedit</b>，单击<b data-tag=\"uicontrol\" id=\"8ae7c4380ab9k\" class=\"uicontrol\">确定</b>，打开注册表编辑器。</p><img id=\"b6961ea0850wv\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p539737.png\" alt=\"输入regedit\" placement=\"break\" class=\"image break\"></li><li id=\"c8dae5b185hwp\"><p id=\"c8dae5b085rqm\">在注册表编辑器中，分别修改以下参数配置。</p><ul id=\"ae51010185na6\"><li id=\"ae146d31854au\"><p id=\"ae146d3085de3\">将<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\WinStations\\RDP-Tcp</code>中的<code data-tag=\"code\" class=\"code\"><i>fEnableWinStation</i></code> 参数值修改为1。</p><img id=\"e8e5578085033\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p539744.png\" alt=\"fEnableWinStation\" placement=\"break\" class=\"image break\"></li><li id=\"e489c59185l28\"><p id=\"e489c590852qi\">将<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server</code>中的<code data-tag=\"code\" class=\"code\"><i>fDenyTSConnections</i></code>参数值修改为0。</p><img id=\"ecb460e0851we\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p539745.png\" alt=\"fDenyTSConnections\" placement=\"break\" class=\"image break\"></li></ul></li></ol></section><section id=\"af553c8085vg7\" class=\"section\"><h3 id=\"8d038b5d8026k\"><b>步骤十三：</b>Windows RDP自签证书到期</h3><p id=\"4494d5a28b79z\">RDP自签证书过期，可能会导致无法远程登录，您可以参考以下步骤来修复。</p><ol id=\"11469702859ol\"><li id=\"11469700853eb\"><p id=\"abcb396180hnt\">使用VNC方式登录Windows实例。</p><p id=\"17bc084085hjb\">具体操作，请参见通过密码认证登录Windows实例。</p></li><li id=\"2343d85185p3w\"><p id=\"20ea09d285mkg\">以管理员身份运行Windows PowerShell。</p></li><li id=\"18de1a1185w3j\"><p id=\"18de1a10859rq\">在Windows PowerShell对话框，执行如下命令。</p><pre height=\"64.98958587646484\" id=\"9pp3hh\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Remove-Item -Path 'Cert:\\LocalMachine\\Remote Desktop\\*' -Force -ErrorAction SilentlyContinue\nRestart-Service TermService -Force</code></pre></li></ol></section></section><section id=\"96a5bf2085j84\" class=\"section\"><h2 id=\"9b7a2a91852kl\" data-tag=\"h3\" class=\"h3\"><b>存在明确的报错信息</b></h2><ul id=\"9b7a2a9285ypg\"><li id=\"9b7a2a9385w1m\"><p id=\"9b7a2a9485co1\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/because-of-a-protocol-error-this-session-will-be-disconnected-please-try-connecting-to-the-remote-computer-again\">远程连接Windows系统的ECS实例时提示协议错误</a></p></li><li id=\"9b7a2a9785dnj\"><p id=\"9b7a2a9885v63\">授权相关：\n</p><ul id=\"9b7a2a9985enf\"><li id=\"9b7a2a9a85c2w\"><p id=\"9b7a2a9b855ob\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-your-credentials-don-t-work-appears-when-i-remotely-log-on-to-a-windows-instance\">启用密码保护共享导致Windows系统远程访问出现“凭据无法工作”错误</a></p></li><li id=\"9b7a2a9c85lab\"><p id=\"9b7a2a9d85u1q\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-connection-was-denied-because-the-user-account-is-not-authorized-for-remote-login\">远程桌面连接ECS实例时报“连接被拒绝，因为没有授权此用户账户进行远程登录”错误</a></p></li><li id=\"9b7a2a9e85le0\"><p id=\"9b7a2a9f85q74\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-no-remote-desktop-license-server-is-specified-appears-when-i-connect-to-a-windows-server-2008-r2-instance-by-using-remote-desktop\">Windows系统实例中未指定远程桌面授权服务器解决方法</a></p></li><li id=\"9b7a2aa0854ri\"><p id=\"9b7a2aa185lsr\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/to-log-on-to-this-remote-computer-you-must-be-granted-the-permission-to-log-on-through-terminal-services\">Windows 2008系统的ECS实例远程登录时提示“要登录到此远程计算机，您必须被授予允许通过终端服务登录的权限”</a> </p></li></ul></li><li id=\"9b7a2aa3850g0\"><p id=\"9b7a2aa485u71\">桌面无法显示： \n</p><p id=\"9b7a2aa785zag\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/desktop-failure-or-exception-displayed-after-remote-logon-of-an-ecs-instance-running-windows\">Windows系统的ECS实例远程登录后无法显示桌面或显示异常</a></p></li><li id=\"9b7a2aa88529a\"><p id=\"9b7a2aa9857ur\">连接数相关： \n</p><ul id=\"9b7a51a0850bl\"><li id=\"9b7a51a185iem\"><p id=\"9b7a51a285d6v\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-the-terminal-server-has-exceeded-the-maximum-number-of-allowed-connections-appears-when-i-connect-to-a-windows-instance-by-using-remote-desktop\">Windows系统实例远程连接提示“终端服务器超出了最大允许连接”</a></p></li><li id=\"9b7a51a385lie\"><p id=\"9b7a51a485ayj\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/remote-connections-to-windows-server-instances-and-license-authorized-servers\">Windows Server实例远程连接数以及License授权服务器的相关说明</a></p></li></ul></li><li id=\"9b7a51a585ukh\"><p id=\"9b7a51a685pha\">用户名和密码相关：\n</p><p id=\"9b7a51a985m7l\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/when-you-remotely-log-on-to-the-windows-server-2008-r2-system-the-system-prompts-an-unknown-username-or-password-error\">远程登录Windows Server 2008 R2系统时提示未知的用户名或密码错</a></p></li></ul></section><section id=\"9ef3e80085lxk\" class=\"section\"><h2 id=\"9ef3e801851t8\" data-spm-anchor-id=\"a2c9r.14518950.0.i12.178a5e3bukc1VU\">相关文档</h2><ul id=\"9ef3e80285g92\"><li id=\"9ef3e80385svh\"><p id=\"9ef3e80485j2k\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/what-do-i-do-if-i-cannot-connect-to-an-ecs-instance\">无法远程连接ECS实例的排查流程</a></p></li><li id=\"9ef3e80585w4f\"><p id=\"9ef3e80685ko4\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/troubleshooting-guidelines-when-you-cannot-remotely-log-on-to-a-linux-instance-through-ssh\">无法通过SSH远程登录Linux实例时的排查指引</a></p></li></ul></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/has-access-to-the-cdn-website-after-migrating-to-windows-instance-access-to-the-site-prompt-connection-is-rejected-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>已接入CDN的网站迁移至Windows实例后，访问该站点提示连接被拒绝，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>已接入CDN的网站迁移至Windows实例后，访问该站点提示连接被拒绝，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-17 16:42:29</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"ba4ae64096vh1\"><p data-tag=\"shortdesc\" id=\"ba51eb2896oij\" class=\"shortdesc\">本文介绍已接入CDN的网站迁移至Windows实例后，访问该站点提示连接被拒绝问题的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"WdhpW\">问题描述</h2><p id=\"ba51eb29966xe\">已接入CDN的网站迁移至Windows实例之后，该Windows实例上的所有站点均无法正常访问，访问时提示连接被拒绝。</p><p id=\"041e3e30d7nfp\">经过排查，发现该场景存在如下特征：</p><ul id=\"ba51eb2a96mlc\"><li id=\"ba51eb2b96ogf\"><p id=\"ba51eb2c96yf3\">该Windows实例的443端口正常开启，并且该Windows实例的负载和带宽无明显变化。</p></li><li id=\"ba51eb2d962tx\"><p id=\"ba5212309684v\">该Windows实例使用宝塔（BT）面板搭建网站。 \n</p><div type=\"note\" id=\"c5094ff1adaf2\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"ca9a2d90adozc\">宝塔（BT）面板默认采用Apache提供Web服务。</p></div></div></li><li id=\"ba521234963vr\"><p id=\"ba52123596rbc\">Apache的<code data-tag=\"code\" class=\"code\">error_log</code>中存在如下错误信息。 </p><pre id=\"ba4ae641965w4\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Server ran out of threads to serve requests. Consider raising the ThreadsPerChild setting</code></pre><img id=\"f0cd0f30d257t\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4002211861/p618975.png\" alt=\"问题描述 xin\" placement=\"break\" width=\"750\" class=\"image break\"></li></ul><h2 id=\"nSbej\">问题原因</h2><p id=\"ba52123796jpz\">通过Apache的<code data-tag=\"code\" class=\"code\">error_log</code>信息可以判断，该Windows实例上没有线程来处理访问请求，导致该问题。</p><div type=\"note\" id=\"1fbaa0c0adypz\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"1c2dd080ad0j1\">Windows操作系统中Apache程序使用<code data-tag=\"code\" class=\"code\">mpm_winnt</code>模块，该模块默认的线程数为64。当Web请求数超过该线程数时，Apache将无法正常提供服务。更多信息，请参见<a class=\"\" target=\"_blank\" href=\"https://httpd.apache.org/docs/2.4/mod/mpm_winnt.html\">Apache MPM模块</a>。</p></div></div><h2 id=\"WffKj\">解决方案</h2><div type=\"note\" id=\"291a5f10d24vp\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"299868b0d2ic2\">本文操作步骤以Windows Server 2012 R2数据中心版64位中文版为例，实际操作以您实际的操作系统为准。</p></div></div><ol id=\"3315bf91d236e\"><li id=\"259023b1d2vi0\"><p id=\"259023b0d2cdo\">远程连接Windows实例。</p><p id=\"18252140d26y0\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"3b1468e1d2okk\"><p id=\"f21d39e0admu8\">启用MPM模块配置文件。</p><div type=\"important\" id=\"9ad24c21d2r74\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"9f5451d0d2mn5\">在默认情况下，MPM模块配置文件并没有启用，您需要执行如下操作进行启用。</p></div></div><ol id=\"8f7c1361d2pqu\"><li id=\"837687d1d252z\"><p id=\"837687d0d2iz7\">打开资源管理器，找到<code data-tag=\"code\" class=\"code\">httpd-mpm.conf</code>配置文件并记录存放位置。</p><p id=\"d03cc430d2tib\">在您的<code data-tag=\"code\" class=\"code\">Apace安装目录\\conf\\extra</code>目录中，可以找到主要用于MPM模块的<code data-tag=\"code\" class=\"code\">httpd-mpm.conf</code>配置文件。以该文件存放于<code data-tag=\"code\" class=\"code\">C:\\Program Files\\BtSoft\\apache\\conf\\extra</code>路径为例，示例如下。<img id=\"ac5cb1f0d235c\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4002211861/p619000.png\" alt=\"extra目录 xin\" placement=\"break\" class=\"image break\"></p></li><li id=\"baef5101d208a\"><p id=\"baef5100d2opd\">在<code data-tag=\"code\" class=\"code\">httpd.conf</code>主配置文件中，执行如下操作，启用<code data-tag=\"code\" class=\"code\">Include conf/extra/httpd-mpm.conf</code>配置。</p><div type=\"note\" id=\"bb0a4a40dcqdr\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"bb0a2330dcszt\"><code data-tag=\"code\" class=\"code\">httpd.conf</code>主配置文件存放于<code data-tag=\"code\" class=\"code\">Apace安装目录\\conf</code>目录中，本操作以<code data-tag=\"code\" class=\"code\">httpd.conf</code>主配置文件存放于<code data-tag=\"code\" class=\"code\">C:\\Program Files\\BtSoft\\apache\\conf</code>路径为例。</p></div></div><ol id=\"a1554001d22zj\"><li id=\"a0882c01d2qvs\"><p id=\"a0882c00d2tib\">找到待修改的代码，内容如下。</p><pre id=\"c4titd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code># Server-pool management (MPM specific)\n# Include conf/extra/httpd-mpm.conf</code></pre></li><li id=\"ac7d15c0d2xbh\"><p id=\"13cd1a50d2c7u\">删除<code data-tag=\"code\" class=\"code\"># Include conf/extra/httpd-mpm.conf</code>代码中的<code data-tag=\"code\" class=\"code\">#</code>来启用<code data-tag=\"code\" class=\"code\">Include conf/extra/httpd-mpm.conf</code>配置，修改后的代码如下。</p><pre id=\"onudll\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code># Server-pool management (MPM specific)\nInclude conf/extra/httpd-mpm.conf</code></pre><img id=\"be2dbdb0d28ao\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4002211861/p619022.png\" alt=\"修改MPM配置文件 xin\" placement=\"break\" class=\"image break\"></li></ol></li><li id=\"ba52394596xbj\"><p id=\"ba523946963dg\">在<code data-tag=\"code\" class=\"code\">conf/extra/httpd-mpm.conf</code>配置文件中，查看<code data-tag=\"code\" class=\"code\">ThreadsPerChild</code>参数值是否为<code data-tag=\"code\" class=\"code\">64</code>。 \n</p><div type=\"note\" id=\"565645d1ad864\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"59332700ad458\">Windows操作系统中Apache的<code data-tag=\"code\" class=\"code\">ThreadsPerChild</code>参数默认值为<code data-tag=\"code\" class=\"code\">64</code>。</p></div></div><p id=\"ba52394b96yc4\">如果<code data-tag=\"code\" class=\"code\">ThreadsPerChild</code>参数值为<code data-tag=\"code\" class=\"code\">64</code>，则您需要修改如下代码，将<code data-tag=\"code\" class=\"code\">ThreadsPerChild</code>参数值修改为<code data-tag=\"code\" class=\"code\">512</code>，然后保存配置。</p><div type=\"important\" id=\"80944810d2f16\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"837ebdd0d2n9w\"><code data-tag=\"code\" class=\"code\">512</code>仅为示例值，并非推荐值。您需要根据Windows实例的负载和访问情况进行调整。更多该参数的信息，请参见<a class=\"\" target=\"_blank\" href=\"https://httpd.apache.org/docs/2.4/mod/mpm_common.html#threadsperchild\">Apache MPM通用指令</a>。</p></div></div><pre id=\"ba4eb6d09675u\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>&lt;IfModule mpm_winnt_module&gt;\nThreadsPerChild 512 \nMaxRequestsPerChild 0\n&lt;/IfModule&gt;</code></pre><img id=\"cb21ab70d2128\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4002211861/p619066.png\" alt=\"修改ThreadsPerChild参数 xin\" placement=\"break\" class=\"image break\"></li></ol></li><li id=\"ba52605096s8q\"><p id=\"ba52605196wvx\">重新启动Apache服务。</p><ol id=\"2d54fb81d2gk5\"><li id=\"873e14f1d2nag\"><p id=\"487f05e0d2jt0\">在桌面左下角，选择<img id=\"c7a48820d1d1j\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615324.png\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"dbd6d1e0d11kc\" class=\"uicontrol\"> &gt; 服务器管理器</b>。</p></li><li id=\"4991fc80d24x4\"><p id=\"4cdba940d2dzy\">在<b data-tag=\"uicontrol\" id=\"98f2b480d2h7v\" class=\"uicontrol\">服务器管理器</b>页面的左侧导航栏中，单击<b data-tag=\"uicontrol\" id=\"9b31cf10d21ee\" class=\"uicontrol\">本地服务器</b>。</p></li><li id=\"474a7d80d2kqt\"><p id=\"474a5670d2p27\">在<b data-tag=\"uicontrol\" id=\"9d818b70d2scq\" class=\"uicontrol\">服务</b>区域中找到Apache，单击鼠标右键，然后单击<b data-tag=\"uicontrol\" id=\"bd144720d2o56\" class=\"uicontrol\">重新启动服务</b>。<img id=\"b1375790d2rp0\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4002211861/p619078.png\" alt=\"Apache 重启服务\" placement=\"break\" class=\"image break\"></p></li></ol></li><li id=\"ba52605296w7j\"><p id=\"ba526053961qc\">重新访问该网站。</p><p id=\"3519c590d2d6x\">如果成功访问该网站，则问题解决。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/query-and-analysis-of-system-loads-on-linux-instances", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></span>\n <span>Linux实例负载高问题排查和异常处理</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux实例负载高问题排查和异常处理</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-14 09:53:54</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2306106\"><p id=\"4924db82bb2zb\" data-tag=\"shortdesc\" class=\"shortdesc\"><span style=\"color:rgb(51, 51, 51)\">本文档介绍Linux云服务器负载高导致ECS实例运行变慢、自动关机或重启、无法登录等异常问题的排查方法和解决方案。</span></p><div data-tag=\"body\" class=\"body\"><section id=\"7cbb4b50be45l\" class=\"section\"><h2 id=\"7cbb4b51beosc\"><b>问题描述</b></h2><p id=\"a51e02a0bc5yv\">在您使用ECS实例过程中，可能会遇到实例系统负载较高的情况，负载过高，可能会引发一系列异常问题，简单说您如下：</p><ul id=\"5f374d52bfx57\"><li id=\"5f374d50bfsyw\"><p id=\"4f066790bf19f\">CPU使用率或负载过高：一般来说，当CPU使用率≥80%时，定义为CPU使用率过高。CPU使用率持续过高，可能会导致实例运行速度变慢，自动关机或重启、无法登录等问题。</p></li><li id=\"8df1e331bfk9i\"><p id=\"8df1e330bfj3l\">带宽使用率过高：一般来说，带宽使用率≥当前带宽80%时，定义为带宽使用率过高。带宽使用率持续过高，将影响实例的网络连通性或网络吞吐，例如实例无法远程连接、网速过慢等。</p></li><li id=\"77a32ca0bfzel\"><p id=\"77a30590bf105\">内存使用率过高：一般来说，当内存使用率≥80%时，定义为内存使用率过高。内存使用率过高，可能会出现系统卡顿、内部服务响应速度变慢等问题。</p></li><li id=\"afdcf150bfe0e\"><p id=\"b777cfc0bf19e\">I/O使用率过高：一般来说，当前I/O读写≥该云盘I/O的80%时，定义为I/O使用率过高。I/O使用率过高，可能会出现文件读写变慢、应用性能下降或报错等问题。</p></li></ul></section><section id=\"6d5dbb20beoom\" class=\"section\"><h2 id=\"6d5dbb21be79y\"><b>问题排查</b></h2><p id=\"ba2e3bd0be12e\">您可以使用SAR工具或htop工具定位该实例的负载过高及各资源的使用情况。</p><section id=\"bf10d810bex9d\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"bf10ff21bes9f\" class=\"section\"><h3 id=\"c25861f0bebbj\">使用sar工具查看实例各资源使用情况</h3><p id=\"bf10ff22befw1\">sar是System Activity Reporter（系统活动情况报告）的缩写，sar工具对系统状态进行取样后，通过计算数据和比例来表达系统当前的运行状态。其特点是可以连续对系统取样，获得大量的取样数据。其取样数据和分析结果可以存入文件，所需的负载很小。</p><p id=\"078c335dbet54\">sar是Linux系统中较为全面的性能分析工具，可以从多个方面对系统的活动进行监控和报告，包括文件读写情况、系统调用使用情况、串口、CPU效率、内存使用情况、进程活动及IPC（Inter-Process Communication，进程间通信）等。</p><section id=\"de7d8380be4rn\" class=\"section\"><h3 id=\"ae5565d0be89p\"><b>安装sar工具</b></h3><p id=\"183d4161be4b9\">如果您的ECS实例中默认未安装sar工具，可参考如下步骤进行安装。</p><ol id=\"c22b3634b08i1\" data-spm-anchor-id=\"a2c4g.11186623.0.i2.4b96e34eqbBLke\"><li id=\"c22b5d40b0hm3\" data-spm-anchor-id=\"a2c4g.11186623.0.i1.4b96e34eqbBLke\"><p id=\"a52e90b1b3w3h\">使用VNC连接Linux系统的ECS实例。</p><p class=\"itemgroup info\" id=\"info-d6f-lre-3tc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"c22b5d42b0lol\"><p id=\"c22b5d43b0qlx\">执行如下命令，安装sar工具。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"72d4c8a0benr1\" class=\"pre codeblock language-plaintext\"><code>yum install sysstat</code></pre></li><li id=\"737a7e80beuaq\"><p id=\"76d82870beio4\">执行如下命令，启动sysstat服务。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"78c0be90bely4\" class=\"pre codeblock language-plaintext\"><code>systemctl start sysstat</code></pre></li><li id=\"77fac7901fuxd\"><p id=\"b93f00401fp1d\">执行如下命令，查看sysstat服务状态。</p><pre id=\"xgbggz\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>systemctl status sysstat</code></pre><p id=\"454b70801fzkx\">当返回系统中出现<code data-tag=\"code\" class=\"code\">Active: active (exited)</code>表示sysstat服务已启动。</p></li></ol></section><section id=\"368de140bfck7\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"dbe859b0be4yr\" class=\"section\"><h3 id=\"6b1eabf1ber2x\"><b>查看CPU使用率</b></h3><p id=\"9141daf0be05e\">执行如下命令，查看CPU负载。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"88e39a90beg2h\" class=\"pre codeblock language-plaintext\"><code>sar -u 1 5   #每隔一秒刷新，刷新5次</code></pre><p id=\"8c15a0a0be6uj\">系统显示类似如下。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"926ab8a0beczp\" class=\"pre codeblock language-plaintext\"><code>Linux 3.10.0-123.9.3.el7.x8664 (iZ23pddtofdZ)     07/04/2016     _x86_64    (1 CPU)\n10:16:35 AM     CPU     %user     %nice   %system   %iowait    %steal     %idle\n10:16:36 AM     all     14.14      0.00      1.01      0.00      0.00     84.85\n10:16:37 AM     all     14.14      0.00      0.00      1.01      0.00     84.85\n10:16:38 AM     all      0.00      0.00      1.01      0.00      0.00     98.99\n10:16:39 AM     all      0.00      0.00      0.00      0.00      0.00    100.00\n10:16:40 AM     all      1.00      0.00      0.00      0.00      0.00     99.00\nAverage:        all      5.86      0.00      0.40      0.20      0.00     93.54</code></pre><p data-tag=\"h4\" id=\"c22ae817b0mda\" class=\"h4\"><b>显示结果主要字段说明</b></p><ul id=\"a570b761beubj\"><li id=\"a4b49351be2l0\"><p id=\"a4b49350be0kf\">%user：用户模式下消耗的CPU时间比例。</p></li><li id=\"a39b5b23beksf\"><p id=\"a39b5b22beo87\">%nice：通过nice改变了进程调度优先级的进程，在用户模式下消耗的CPU时间比例。</p></li><li id=\"a39b5b25bekvt\"><p id=\"a39b5b24becpo\">%system：系统模式下消耗的CPU时间比例。</p></li><li id=\"a39b5b27be3s0\"><p id=\"a39b5b26bealy\">%iowait：CPU等待磁盘I/O导致空闲状态消耗的时间比例。</p></li><li id=\"a39b5b29beh4v\"><p id=\"a39b5b28be8gi\">%steal：利用Xen等操作系统虚拟化技术，等待其它虚拟CPU计算占用的时间比例。</p></li><li data-spm-anchor-id=\"a2c4g.11186623.0.i29.b67a7744gZfyB9\" id=\"a39b5b2bbebgv\"><p id=\"a39b5b2abeusi\">%idle：CPU空闲时间百分比。</p></li></ul></section><section id=\"6feea330behz5\" class=\"section\"><h3 id=\"7135d090beljf\"><b>查看队列长度和CPU平均负载</b></h3><p id=\"e7911f40beijo\">执行如下命令，查看队列长度和CPU平均负载。</p><pre data-tag=\"codeblock\" id=\"077bdfa5beos8\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sar -q 1 10    #每隔一秒刷新，刷新10次</code></pre><p id=\"078ca884be13v\">系统显示类似如下。</p><pre data-tag=\"codeblock\" id=\"077bdfa6bevff\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Linux 3.10.0-123.9.3.el7.x8664 (iZ23pddtofdZ)     07/04/2016     _x86_64    (1 CPU)\n10:23:13 AM   runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15   blocked\n10:23:14 AM         0       142      0.00      0.01      0.05         0\n10:23:15 AM         0       142      0.00      0.01      0.05         0\n10:23:16 AM         0       142      0.00      0.01      0.05         0\n10:23:17 AM         0       142      0.00      0.01      0.05         0\n10:23:18 AM         0       142      0.00      0.01      0.05         0\n10:23:19 AM         0       142      0.00      0.01      0.05         0\nAverage:            0       142      0.00      0.01      0.05         0</code></pre><p data-tag=\"h4\" id=\"38023b30beqro\" class=\"h4\"><b>显示结果主要字段说明</b></p><ul id=\"548238a0bee73\"><li id=\"548238a1benv6\"><p id=\"548238a2be15p\">runq-sz：运行队列的长度，即等待运行的进程数。</p></li><li id=\"548238a3be1yd\"><p id=\"548238a4be40e\">plist-sz：进程列表中进程（processes）和线程（threads）的数量。</p></li><li id=\"548238a5beshd\"><p id=\"548238a6bel8m\">ldavg-1：最后1分钟的系统平均负载。</p></li><li id=\"548238a7be6s2\"><p id=\"548238a8beseo\">ldavg-5：最后5分钟的系统平均负载。</p></li><li id=\"548238a9bemxl\"><p id=\"548238aabe6by\">ldavg-15：最后15分钟的系统平均负载。</p></li></ul></section><section id=\"07ba3ca0be8na\" class=\"section\"><h3 id=\"05aba7f1belgg\"><b>查看磁盘使用情况</b></h3><p id=\"05aba7f2be7ua\">执行如下命令，查看磁盘读写负载情况。</p><pre data-tag=\"codeblock\" id=\"05aba7f3behl1\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sar -d 1 3    #每隔一秒刷新，刷新3次</code></pre><p id=\"05aba7f4beana\">系统显示类似如下。</p><pre data-tag=\"codeblock\" id=\"077bdfa8beggg\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Linux 5.10.134-13.al8.x86_64 (iZ2zegjvrdtgifd77gadyqZ)  03/09/2023      _x86_64_        (8 CPU)\n\n02:41:04 PM       DEV       tps     rkB/s     wkB/s   areq-sz    aqu-sz     await     svctm     %util\n02:41:05 PM  dev253-0      1.00      0.00      4.00      4.00      0.00      0.00      1.00      0.10\n02:41:06 PM  dev253-0      1.00      0.00      4.00      4.00      0.00      1.00      1.00      0.10\n02:41:07 PM  dev253-0      1.00      0.00      4.00      4.00      0.00      0.00      2.00      0.20\n02:41:08 PM  dev253-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00\n02:41:09 PM  dev253-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00\nAverage:     dev253-0      0.60      0.00      2.40      4.00      0.00      0.33      1.33      0.08</code></pre><p data-tag=\"h4\" id=\"05aba7f6bejgv\" class=\"h4\"><b>显示结果主要字段说明</b></p><ul id=\"289867101fcjw\"><li id=\"289867111fj40\"><p id=\"289867121f46f\">tps：每秒I/O的传输总数。</p></li><li id=\"62a1b8a0beyo5\"><p id=\"62a19190bel3w\">rd_sec/s：每秒读取的扇区的次数。</p></li><li id=\"63838d20begv4\"><p id=\"63836610befr5\">wr_sec/s：每秒写入的扇区的次数。</p></li><li id=\"64555c11bezzb\"><p id=\"64555c10begmj\">avgrq-sz：平均每次磁盘I/O操作的扇区大小。</p></li><li id=\"6513f120becj8\"><p id=\"6513ca10bee11\">avgqu-sz：磁盘请求队列的平均长度。</p></li><li id=\"65fbe021be6b9\"><p id=\"65fbe020betst\">await：从请求磁盘操作到系统完成处理，每次请求的平均消耗时间，包括请求队列等待时间。</p></li><li id=\"66f18ac0be58q\"><p id=\"66f163b0bechk\">svctm：系统处理每次请求的平均时间。</p></li><li id=\"67e07ea1bezcd\"><p id=\"67e07ea0bean1\">%util：I/O请求占用的CPU百分比，值越高，说明I/O越慢。</p></li></ul></section><section id=\"8ec14330be54v\" class=\"section\"><h3 id=\"76a03a70bedwo\"><b>查看内存负载</b></h3><p id=\"71078d41becrc\">执行如下命令，查看内存负载。</p><pre data-tag=\"codeblock\" id=\"077bdfa7be1xp\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sar -r 1 3    #每隔一秒刷新，刷新3次</code></pre><p id=\"078ccf97bek98\">系统显示类似如下。</p><pre data-tag=\"codeblock\" id=\"05aba7f5beqxu\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Linux 3.10.0-123.9.3.el7.x8664 (iZ23pddtofdZ)     07/04/2016     _x86_64    (1 CPU)\n\n10:27:34 AM kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive  kbinact  kbdirty\n10:27:35 AM    275992    740664     72.85    181552    315340    362052     35.61    471216   115828       60\n10:27:36 AM    276024    740632     72.85    181552    315340    362052     35.61    471220   115828       64\n10:27:37 AM    276024    740632     72.85    181552    315340    362052     35.61    471220   115828       64\nAverage:       276013    740643     72.85    181552    315340    362052     35.61    471219   115828       63</code></pre><p data-tag=\"h4\" id=\"8875a110bef6x\" class=\"h4\"><b>显示结果主要字段说明</b></p><ul id=\"8ab5f420be2ys\"><li id=\"2be018011fqd4\"><p id=\"2be018021foz5\">kbmemfree：该值和free命令中的free值基本一致，不包括buffer和cache空间。</p></li><li id=\"05aba7fabeaa6\"><p id=\"05aba7fbbezxc\">kbmemused：该值和free命令中的used值基本一致，包括buffer和cache空间。</p></li><li id=\"05aba7fcbelxo\"><p id=\"05aba7fdbe2wf\">%memused：物理内存使用率，该值是kbmemused和内存总量（不包括swap内存）的百分比。</p></li><li id=\"05aba7febertd\"><p id=\"05aba7ffbezfe\">kbbuffers和kbcached：这两个值和free命令中的buffer和cache一致。</p></li><li id=\"05aba800bepr6\"><p id=\"05aba801beeee\">kbcommit：保证当前系统所需要的内存，即为了确保不溢出而需要的内存，即RAM加上swap的内存。</p></li><li data-spm-anchor-id=\"a2c4g.11186623.2.i35.2abe7e63Tx5ykH\" id=\"05aba802belrd\"><p id=\"05abcf00be5w8\">%commit：该值是kbcommit与内存总量（包括swap内存）的百分比。</p></li></ul></section><section id=\"afa2a980berau\" class=\"section\"><h3 id=\"aa1543c0beqv0\"><b>查看I/O负载</b></h3><p id=\"d8cd4190beu0y\">执行如下命令，查看I/O负载。</p><pre id=\"rtxrce\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sar -b 1 10 #每隔一秒刷新，刷新10次</code></pre><p id=\"5efac623bec69\">系统显示类似如下。</p><pre id=\"tbabqw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Linux 5.10.134-13.al8.x86_64 (iZ2zegjvrdtgifd77gadyqZ) 03/09/2023 _x86_64_ (8 CPU)\n\n02:34:00 PM tps rtps wtps bread/s bwrtn/s\n02:34:01 PM 6.00 0.00 6.00 0.00 80.00\n02:34:02 PM 55.00 0.00 55.00 0.00 632.00\n02:34:03 PM 1.00 0.00 1.00 0.00 8.00\n02:34:04 PM 0.00 0.00 0.00 0.00 0.00\n02:34:05 PM 0.00 0.00 0.00 0.00 0.00\n02:34:06 PM 2.00 0.00 2.00 0.00 136.00\n02:34:07 PM 82.00 0.00 82.00 0.00 888.00\n02:34:08 PM 0.00 0.00 0.00 0.00 0.00\n02:34:09 PM 0.00 0.00 0.00 0.00 0.00\n02:34:10 PM 0.00 0.00 0.00 0.00 0.00\nAverage: 14.60 0.00 14.60 0.00 174.40</code></pre><p data-tag=\"h4\" id=\"6529b880beeyt\" class=\"h4\"><b>显示结果主要字段说明</b></p><ul id=\"770a7122bew8u\"><li id=\"770a7120be0ln\"><p id=\"65b50890behqh\">tps：每秒钟向物理设备请求数据次数。</p></li><li id=\"782b2360beurb\"><p id=\"6dd347d0besqm\">rtps：每秒钟向物理设备读请求次数。</p></li><li id=\"848c8a91benlw\"><p id=\"848c8a90bevlz\">wtps：每秒钟向物理设备写请求次数。</p></li><li id=\"8c795990be2jz\"><p id=\"6dd347d8beyer\">bread/s：每秒钟从物理设备读入的数据量。</p></li><li id=\"8d9acf20berts\"><p id=\"8d9aa810be99i\">bwrtn/s：每秒钟向物理设备写入的数据量。</p></li></ul></section><section id=\"fe4b3a70beav4\" class=\"section\"><h3 id=\"7ad27270beb9c\"><b>查看swap分区页面交换情况</b></h3><p id=\"ac819361betp5\">执行如下命令，查看swap分区页面交换情况。</p><pre data-tag=\"codeblock\" id=\"077bdfa9bel2x\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sar -W 1 3</code></pre><p id=\"078d1db3beqx9\">系统显示类似如下。</p><pre data-tag=\"codeblock\" id=\"077c06b0beeun\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Linux 3.10.0-123.9.3.el7.x8664 (iZ23pddtofdZ) 07/04/2016 _x86_64 (1 CPU)\n10:28:59 AM pswpin/s pswpout/s\n10:29:00 AM 0.00 0.00\n10:29:01 AM 0.00 0.00\n10:29:02 AM 0.00 0.00\nAverage: 0.00 0.00</code></pre><p data-tag=\"h4\" id=\"f4a82ff0bewj3\" class=\"h4\"><b>显示结果主要字段说明</b></p><ul id=\"f7550070be814\"><li id=\"f7550071be294\"><p id=\"f7550072beiux\">pswpin/s：每秒从交换分区到系统的交换页面（swap page）数量。</p></li><li data-spm-anchor-id=\"a2c4g.11186623.2.i39.2abe7e63Tx5ykH\" id=\"f7550073beh3h\"><p id=\"f7550074bee0f\">pswpout/s：每秒从系统交换到swap的交换页面（swap page）的数量。</p></li></ul></section></section><section id=\"2b6d6910bfq0j\" class=\"section\"><h3 id=\"28e2eda1bfvjw\"><b>常见sar命令参数</b></h3><p id=\"078d44c1bej00\">sar命令的参数说明如下，区分大小写。</p><ul id=\"078d44c2be53u\"><li id=\"078d44c3bewlt\"><p id=\"078d44c4bejqg\">-A：汇总所有的报告。</p></li><li id=\"078d44c5be4fy\"><p id=\"078d44c6bexvz\">-a：报告文件读写使用情况。</p></li><li id=\"078d44c7bejie\"><p id=\"078d6bd0bezej\">-B：报告附加缓存的使用情况。</p></li><li id=\"078d6bd1beps6\"><p id=\"078d6bd2beuea\">-b：报告缓存的使用情况。</p></li><li id=\"078d6bd3beoo7\"><p id=\"078d6bd4begbw\">-c：报告系统调用的使用情况。</p></li><li id=\"078d6bd5betxu\"><p id=\"078d6bd6becge\">-d：报告磁盘的使用情况。</p></li><li id=\"078d92e0berxj\"><p id=\"078d92e1bek7v\">-g：报告串口的使用情况。</p></li><li id=\"078d92e2be6aj\"><p id=\"078d92e3be6sq\">-h：报告关于buffer使用的统计数据。</p></li><li id=\"078d92e4begsk\"><p id=\"078d92e5bet85\">-m：报告IPC消息队列和信号量的使用情况。</p></li><li id=\"078d92e6beu4m\"><p id=\"078d92e7bec78\">-n：报告命名cache的使用情况。</p></li><li id=\"078d92e8bexag\"><p id=\"078d92e9besj3\">-p：报告调页活动的使用情况。</p></li><li id=\"078d92eabe2z0\"><p id=\"078d92ebbeqni\">-q：报告运行队列和交换队列的平均长度。</p></li><li id=\"078d92ecbe0jp\"><p id=\"078d92edbeb3g\">-R：报告进程的活动情况。</p></li><li id=\"078d92eebegef\"><p id=\"078d92efbe37c\">-r：报告没有使用的内存页面和硬盘块。</p></li><li id=\"078d92f0bewae\"><p id=\"078d92f1be8r1\">-u：报告CPU的利用率。</p></li><li id=\"078db9f0bevg8\"><p id=\"078db9f1beagj\">-v：报告进程、i节点、文件和锁表状态。</p></li><li id=\"078db9f2beu3p\"><p id=\"078db9f3behrc\">-w：报告系统交换活动状况。</p></li><li id=\"078db9f4beiig\"><p id=\"078db9f5be1ce\">-y：报告TTY设备活动状况。</p></li></ul></section></section><section id=\"bf10ff24bejkh\" class=\"section\"><h3 id=\"c4598920besg5\">使用htop查看系统内各进程负载情况</h3><p id=\"078db9f8be8k1\">htop是Linux系统中的一个互动进程查看器，可以很直观地查看CPU、内存、swap的使用情况及平均负载。</p><ol id=\"66d75691belyd\"><li id=\"5fee8a11beg5r\"><p id=\"5fee8a10be4kz\">远程连接Linux系统的ECS实例。</p><p class=\"itemgroup info\" id=\"5f54bb12be1cl\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"4c2dc6d4be1h8\"><p id=\"4c2dc6d5be4bk\">执行如下命令，安装htop工具。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"4c2dc6d6beg6b\" class=\"pre codeblock language-plaintext\"><code>yum install htop</code></pre></li><li id=\"078de102be26q\"><p id=\"078de103bep3f\">执行如下命令，启动htop监控工具。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"7248df80bem37\" class=\"pre codeblock language-plaintext\"><code>htop</code></pre></li><li id=\"078de104be6ts\"><p id=\"078de105be4vr\">使用htop工具查看系统负载。</p><p id=\"a42bb770be4fy\">htop启动后的界面如下图所示，不同区域说明如下：</p><ul id=\"9bf36b11beloi\"><li id=\"9b1d2f50besxq\"><p id=\"9b1d0840be3kk\">①：左侧显示CPU、内存、swap交换区的使用情况，右侧显示进程总数、平均负载及系统运行时间。</p></li><li id=\"a1b73f91bednz\"><p id=\"a1b73f90bemjo\">②：当前系统中所有进程的使用情况，可通过单击CPU%或MEM%对CPU使用率及内存使用率排序，查看使用率较高的进程。</p></li><li id=\"74be1140bfnst\"><p id=\"74bdea30bf73u\">③F1到F10功能键。</p></li></ul><img id=\"89de8310bewf3\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4000538761/p580699.png\" alt=\"htop\" placement=\"break\" class=\"image break\"></li></ol></section></section></section><section id=\"470e1390befqc\" class=\"section\"><h2 id=\"48b81a10be042\">故障处理</h2><ul id=\"72e9b7b2bfc4q\"><li id=\"72e9b7b0bfeot\"><p id=\"2e0f37c0be87x\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/query-and-case-analysis-linux-cpu-load\">Linux系统ECS实例CPU使用率或CPU负载较高问题的排查及解决方案</a></p></li><li id=\"758215d0bfc51\"><p id=\"7581eec0bf4n1\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/query-and-case-analysis-of-linux-network-traffic-load\">如何查看Linux系统网络流量负载情况？</a></p></li><li id=\"7813e440bfqad\"><p id=\"7813bd30bfi3t\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/query-and-case-analysis-linux-io-load\">如何查看Linux系统I/O负载情况？</a></p></li><li id=\"7a5a2ac0bfv2y\" props=\"china\" data-cond-props=\"china\"><p id=\"7a5a03b0bfxic\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/how-to-deal-with-the-system-high-memory-usage-problems\">如何处理系统内存使用率过高问题？</a></p></li></ul></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-err-connetcion-timed-out-error-appears-when-i-enter-https-or-or-domain-name-of-a-website-that-is-hosted-on-an-ecs-instance-in-a-browser-to-access-the-website", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>使用浏览器通过https://网站域名方式访问在ECS实例上部署的网站时，提示“ERR_CONNETCION_TIMED_OUT”错误，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用浏览器通过https://网站域名方式访问在ECS实例上部署的网站时，提示“ERR_CONNETCION_TIMED_OUT”错误，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-16 10:38:10</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"79d5e47096eyd\"><p data-tag=\"shortdesc\" id=\"cbcd19b0bd1zd\" class=\"shortdesc\">您在本地设备或ECS实例上使用浏览器访问部署在ECS实例上的网站时，可能会出现通过<code data-tag=\"code\" class=\"code\">http://网站域名</code>访问网站正常，但通过<code data-tag=\"code\" class=\"code\">https://网站域名</code> 访问却提示“ERR_CONNETCION_TIMED_OUT”的情况，本文介绍该场景下的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"95593af0ad1bg\">在本地设备或ECS实例上使用浏览器访问部署在ECS实例上的网站时，您可以使用浏览器正常访问非加密网站地址（<code data-tag=\"code\" class=\"code\">http://网站域名</code>），但无法访问HTTPS加密网站地址（<code data-tag=\"code\" class=\"code\">https://网站域名</code>）并提示“ERR_CONNETCION_TIMED_OUT”。</p><div type=\"note\" id=\"ac80ad01addpc\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"ac80ad00ad208\">该问题所在场景下，网站配置文件中没有设置<code data-tag=\"code\" class=\"code\">http</code>跳转<code data-tag=\"code\" class=\"code\">https</code>功能。</p></div></div><p id=\"d9cb2140bd14r\">具体现象如下：</p><ol id=\"e3506a92bdl78\"><li id=\"e3506a90bd9od\"><p id=\"e1943ba0bdylp\">使用浏览器通过<code data-tag=\"code\" class=\"code\">http://网站域名</code>访问网站正常，如图所示。<img id=\"4eb9dd10bd8gv\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5929628761/p580288.jpg\" alt=\"访问正常\" placement=\"break\" class=\"image break\"></p></li><li id=\"0b247de1bdmhr\"><p id=\"0b247de0bdu96\">使用浏览器通过<code data-tag=\"code\" class=\"code\">https://网站域名</code>访问网站失败，提示<code data-tag=\"code\" class=\"code\">ERR_CONNETCION_TIMED_OUT</code>，如图所示。<img id=\"cca674a0bdf35\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5929628761/p580277.jpg\" alt=\"访问异常\" placement=\"break\" class=\"image break\"></p></li></ol><h2 id=\"4rM4I\">问题原因</h2><p id=\"dbb5b441a9pev\">使用浏览器通过<code data-tag=\"code\" class=\"code\">http://网站域名</code>访问网站时，默认访问服务端的80端口，而通过<code data-tag=\"code\" class=\"code\">https://网站域名</code>访问网站时，默认访问服务端的443端口。因此，当网站配置文件中没有设置<code data-tag=\"code\" class=\"code\">http</code>跳转<code data-tag=\"code\" class=\"code\">https</code>功能而服务端的HTTPS服务已经正常启动时，如果ECS实例的安全组中缺少允许入方向的443端口访问规则，则可能会导致该问题。</p><h2 id=\"AywdZ\">解决方案</h2><p id=\"6fd7ca30ad78e\">您需要在ECS控制台上为ECS实例所在安全组添加入方向的443端口，然后再重新使用网站域名访问该网站。</p><ol id=\"355051f2bdmyo\"><li id=\"355051f0bd5q4\"><p id=\"2c0b9410bdi3d\">添加安全组则。</p><p id=\"5a7571e0bdbnj\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。<img id=\"6fd7ca32adqwz\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6230546761/p562251.jpg\" alt=\"添加出方向的443规则\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"3ac9d701bdhls\"><p id=\"3ac9d700bdezn\">重新通过<code data-tag=\"code\" class=\"code\">https://网站域名</code>访问网站。</p><p id=\"49ba7490bdp5g\">成功访问该网站，问题解决。<img id=\"93d985c0bdm3y\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5929628761/p580301.jpg\" alt=\"https成功访问\" placement=\"break\" class=\"image break\"></p></li></ol></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-no-input-file-specified-error-is-returned-when-i-access-websites-deployed-on-an-ecs-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>访问部署在ECS实例上的Web站点，提示“No input file specified”错误，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>访问部署在ECS实例上的Web站点，提示“No input file specified”错误，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-05-05 09:53:02</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"ac1e0de09679e\"><p data-tag=\"shortdesc\" id=\"ac264b4896cv3\" class=\"shortdesc\">本文介绍访问部署在ECS实例上的Web站点，提示“No input file specified”错误的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"AREhk\">问题描述</h2><p id=\"ac264b4d96q9z\">访问部署在ECS实例上的Web站点时，提示“No input file specified”错误，如图所示。<img id=\"eaed19b0d2q1n\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3174422861/p618443.png\" alt=\"问题现象 xin\" placement=\"break\" class=\"image break\"></p><h2 id=\"ac264b4e96d3u\"><b>问题原因</b></h2><p id=\"fd4217f0d22su\">该问题通常是Web服务器无法找到指定的PHP文件或脚本导致。无法找到PHP文件或脚本的可能原因如下：</p><ul id=\"07a85a62ddjrp\"><li id=\"07a85a60ddh1g\"><p id=\"2d9fa860e125y\">Web站点目录下存在<code data-tag=\"code\" class=\"code\">.user.ini</code>隐藏配置文件，且该文件中的<code data-tag=\"code\" class=\"code\">open_basedir</code>配置所指定的目录列表未包含该Web站点目录，导致Web服务器无法找到该文件。您需要添加正确的Web站点目录，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#859eaa70e1fx5\">在.user.ini隐藏配置文件中手动添加Web站点目录</a>。</p></li><li id=\"112a00a1e11d0\"><p id=\"112a00a0e1v7r\">Web站点配置文件中伪静态规则书写错误，导致Web服务器读取该文件失败。您需要修改Web站点配置文件中错误的规则，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#08ac34e0e1y0z\">在Web站点的配置文件修改伪静态规则配置（Apache）</a>。</p></li><li id=\"9e1e2471e2r1l\"><p id=\"9e1e2470e2zm0\">Web站点配置文件中运行模式相关配置错误，导致Web服务器读取该文件失败。您需要修改Web站点配置文件指定PHP程序的运行模式，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#d15d9110e2eul\">在Web站点配置文件指定PHP程序运行模式（IIS和Nginx）</a>。</p></li></ul><h2 id=\"ac1e0de296vkx\">解决方案</h2><h3 id=\"859eaa70e1fx5\">在<code data-tag=\"code\" class=\"code\">.user.ini</code>隐藏配置文件中手动添加Web站点目录</h3><p id=\"0760e5a0e1dth\">您需要检查Web站点目录下是否存在<code data-tag=\"code\" class=\"code\">.user.ini</code>隐藏配置文件，如果存在，再检查该文件中的<code data-tag=\"code\" class=\"code\">open_basedir</code>配置所指定的目录列表是否包含了该Web站点目录。如果未包含，您需要手动添加该Web站点目录。</p><p id=\"107b1110e1swn\">以Web站点目录是<code data-tag=\"code\" class=\"code\">/www/wwwroot/www.abc.com</code>为例，您需要确保<code data-tag=\"code\" class=\"code\">.user.ini</code>文件中的<code data-tag=\"code\" class=\"code\">open_basedir</code>指令包含该Web站点目录，即您需要将<code data-tag=\"code\" class=\"code\">.user.ini</code>隐藏配置文件中的<code data-tag=\"code\" class=\"code\">open_basedir</code>配置修改为<code data-tag=\"code\" class=\"code\">open_basedir=/www/wwwroot/www.abc.com/:/tmp/ </code>，配置示例如图所示。<img id=\"107a26b1e1pvl\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3174422861/p636333.png\" alt=\"image\" placement=\"break\" class=\"image break\"></p><h3 id=\"08ac34e0e1y0z\"><b>在Web站点配置文件修改伪静态规则配置（Apache）</b></h3><p id=\"f3d98a00e2jqn\">您需要检查Web站点目录下是否存在<code data-tag=\"code\" class=\"code\">.htaccess</code>隐藏配置文件，如果存在，再检查该文件中的<code data-tag=\"code\" class=\"code\">RewriteRule</code>规则是否书写正确。如果错误，您需要手动修改该规则。</p><p id=\"2c59b530e3wo8\">以伪静态规则<code data-tag=\"code\" class=\"code\">RewriteRule ^(.*)$ /index.php?/$1 [L]</code>中的<code data-tag=\"code\" class=\"code\">index.php</code>缺少半角问号（?）为例，您需要修改该规则，操作步骤如下。</p><ol id=\"fce647f0e20x8\"><li id=\"fce66f00e2m12\"><p id=\"fce78070e2urq\">远程连接ECS实例。</p><p id=\"fce78071e23qz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"fce66f03e2vn8\"><p id=\"fce78072e2pto\">打开<code data-tag=\"code\" class=\"code\">.htaccess</code>文件，在配置文件中找到<code data-tag=\"code\" class=\"code\">RewriteRule</code>所在行，然后在<code data-tag=\"code\" class=\"code\">index.php</code>参数后添加半角问号（?），修改后的配置如图所示。</p><div type=\"note\" id=\"fce66f05e2yx1\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"fce78073e266f\"><code data-tag=\"code\" class=\"code\">.htaccess</code>文件为Apache用户配置文件（伪静态），一般在当前网站的根目录下，具体路径以您的实际环境为准。</p></div></div><pre id=\"fce66f07e2pya\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>RewriteRule ^(.*)$ /index.php?/$1 [L]</code></pre><img id=\"fce66f09e2jgt\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6523211861/p618907.png\" alt=\"Apache 修改\" placement=\"break\" class=\"image break\"></li><li id=\"fce66f0ae247i\"><p id=\"fce78075e28sl\">重新访问该网站。</p><p id=\"fce78076e2s0h\">如果成功访问该网站，则问题解决。</p></li></ol><h3 id=\"d15d9110e2eul\"><b>在Web站点配置文件指定PHP程序运行模式（IIS和</b>Nginx<b>）</b></h3><p id=\"17c43240e3yg6\">您需要修改Web站点配置文件中运行模式相关的配置，来指定PHP程序的运行模式。本文介绍为IIS和Nginx指定PHP程序运行模式为CGI的操作步骤。</p><h4 data-tag=\"h3\" id=\"ac26725496i5i\" class=\"h3\"><b>IIS配置</b></h4><ol id=\"7d28b282adpfx\"><li id=\"7d28b280advb4\"><p id=\"7ba742a1adxhh\">远程连接Windows实例。</p><p id=\"a2a95ff0adwx3\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"81155600aduo8\"><p id=\"cc432a20aes51\">修改<code data-tag=\"code\" class=\"code\">php.ini</code>文件。</p><ol id=\"4f6949a1e1urm\"><li id=\"4e832f60e1p6z\"><p id=\"4e830850e18y5\">打开<code data-tag=\"code\" class=\"code\">php.ini</code>文件。</p><div type=\"note\" id=\"6ecabc20e1r13\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"6eca9510e1l6k\">后续操作以<code data-tag=\"code\" class=\"code\">php.ini</code>文件所在路径为<code data-tag=\"code\" class=\"code\">C:\\php\\54</code>为例，<code data-tag=\"code\" class=\"code\">php.ini</code>文件所在路径以您部署时选择的实际路径为准。</p></div></div></li><li id=\"59cb5e60e1hus\"><p id=\"59cb3750e11xd\">注释代码。</p><p id=\"883e3ce0e1jmo\">找到<code data-tag=\"code\" class=\"code\">php.ini</code>文件的<code data-tag=\"code\" class=\"code\">doc_root</code>字段所在行，然后在开头位置添加半角分号（;）来注释整行内容，注释后的代码示例如图所示。<img id=\"0089d4c0e1fvx\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3174422861/p636270.png\" alt=\"注释doc_root所在行\" placement=\"break\" class=\"image break\"></p></li><li id=\"606d5de0e1qa7\"><p id=\"606d36d0e1d84\">修改代码。</p><p id=\"25d4f340e1ytg\">找到<code data-tag=\"code\" class=\"code\">php.ini</code>文件中的<code data-tag=\"code\" class=\"code\">;cgi.force_redirect = 1</code>代码，然后删除该代码中的半角分号（;），再将参数值从<code data-tag=\"code\" class=\"code\">1</code>修改为<code data-tag=\"code\" class=\"code\">0</code>，即该代码被修改为<code data-tag=\"code\" class=\"code\">cgi.force_redirect = 0</code>，修改后的代码示例如图所示。<img id=\"5fff3d50e1uth\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3174422861/p636274.png\" alt=\"修改cgi\" placement=\"break\" class=\"image break\"></p></li></ol></li><li id=\"ce3e0081d2wlo\"><p id=\"ce3e0080d2e9l\">重启IIS。</p><div type=\"note\" id=\"855d8230d7sin\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"8ce99390d7bf7\">本文操作步骤以Windows Server 2012 R2数据中心版64位中文版为例，实际操作以您实际的操作系统为准。</p></div></div><ol id=\"adb8c3b1d7m1b\"><li id=\"ad382200d7fvh\"><p id=\"b2976850d7nsa\">在桌面左下角，单击<img id=\"ee528430d773t\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6523211861/p627553.png\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，然后右上角的搜索框中输入<code data-tag=\"code\" class=\"code\">iisreset</code><b>。</b><img id=\"fb696340d7cyl\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6523211861/p627557.png\" alt=\"重启IIS\" placement=\"break\" class=\"image break\"></p></li><li id=\"b3405280d7gfe\"><p id=\"b3402b70d7zfi\">单击<b data-tag=\"uicontrol\" id=\"ec24ed10ad17i\" class=\"uicontrol\">iisreset</b><b>。</b></p><p id=\"bc78b452d79eo\">IIS重启程序运行完毕，则表示IIS重启成功。</p></li></ol></li><li id=\"9b5fa6c1d7xs4\"><p id=\"9b5fa6c0d78ci\">重新访问该网站。</p><p id=\"11886970d2yau\">如果成功访问该网站，则问题解决。</p></li></ol><h4 data-tag=\"h3\" id=\"ac267268962qf\" class=\"h3\"><b>Nginx配置</b></h4><ol id=\"ac26726996i4j\"><li id=\"ac26726a96b30\"><p id=\"ac26726b964wu\">远程连接ECS实例。</p><p id=\"18252140d26y0\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"0d2741b0d2wdm\"><p id=\"0d271aa0d2d4b\">打开<code data-tag=\"code\" class=\"code\">/etc/php5/cgi/php.ini</code>文件，检查配置并确保<code data-tag=\"code\" class=\"code\">cgi.fix_pathinfo = 1</code>。</p><div type=\"note\" id=\"945615e0e2vir\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"94fd2b50e222y\">php.ini文件所在路径以您部署时选择的实际路径为准。</p></div></div><img id=\"51b7faf0e1bdf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3174422861/p636315.png\" alt=\"Nginx cgi\" placement=\"break\" class=\"image break\"></li><li id=\"1f40e431e1bhg\"><p id=\"b1067a90e1aiu\">打开<code data-tag=\"code\" class=\"code\">fastcgi.conf</code>配置文件，检查并确保文件中已保存如下配置。</p><pre id=\"gp9gis\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\nfastcgi_param DOCUMENT_ROOT $document_root;</code></pre><p id=\"e9ff2270e1gv9\">如果<code data-tag=\"code\" class=\"code\">fastcgi.conf</code>配置文件中代码配置错误，则您需要修改代码后保存配置，修改后的代码示例如图所示。<img id=\"73dfc3f0e1bcm\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3174422861/p636319.png\" alt=\"Nginx fastcgi\" placement=\"break\" class=\"image break\"></p></li><li id=\"ac26727096vfw\"><p id=\"ac267271963qq\">执行如下命令，重启Nginx服务。 </p><pre id=\"ac1e0dea96pve\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>service nginx restart</code></pre></li><li id=\"2daaa980d2jn3\"><p id=\"2daa8270d2qyr\">重新访问该网站。</p><p id=\"7a0b7bf0d8pt1\">如果成功访问该网站，则问题解决。</p></li></ol><p id=\"ab2906c0e1y64\"></p><p id=\"be784ae3e1oiy\">如果以上方法都没有解决问题，可以尝试查看Web服务器的错误日志，了解具体的错误信息并进行排查。</p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/why-can-t-i-log-on-to-a-windows-instance-using", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>为什么使用默认的端口（3389）无法登录Windows实例？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>为什么使用默认的端口（3389）无法登录Windows实例？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-08-03 13:08:32</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2459368\"><p id=\"9e200bf530s9d\" data-tag=\"shortdesc\" class=\"shortdesc\"><span style=\"color:rgb(24, 24, 24)\">本文介绍</span>使用默认的端口（3389）无法登录Windows实例<span style=\"color:rgb(24, 24, 24)\">的可能原因和解决方案</span><span style=\"color:rgb(24, 24, 24)\">。</span></p><div data-tag=\"body\" class=\"body\"><section id=\"6502cfa030kl9\" class=\"section\"><h2 data-tag=\"p\" id=\"9e200bf430qat\" class=\"p\"><b>问题现象</b></h2><p id=\"a3cf8cc030txh\">通过远程桌面或Workbench等工具使用默认的端口（3389）无法登录Windows操作系统的ECS实例。</p></section><section id=\"a1b86c90305oz\" class=\"section\"><h2 id=\"5bacfac030aod\"><b>问题原因</b></h2><p id=\"0250f86130iam\">该问题可能是由于Windows实例默认的远程桌面服务端口（3389）被修改导致。</p><div type=\"note\" id=\"7fa0c8d130kfb\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"7fe6846030yst\">Windows实例远程桌面的默认端口为3389，基于安全性考虑，部分用户有修改默认端口的需求以减少通过远程桌面恶意攻击和扫描ECS实例的次数。</p></div></div></section><section id=\"a303ff6030ujz\" class=\"section\"><h2 id=\"5d127e3030gs9\"><b>解决方案</b></h2><ol id=\"40cce9523019l\"><li id=\"40cce9503041g\"><p id=\"3cb209e130lli\">以VNC方式登录Windows实例。</p><p id=\"4a04aee030kg2\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"4912fbe130wtl\"><p id=\"62ffa44030ycq\">选择<span data-tag=\"menucascade\" id=\"6c1effd030p20\" class=\"menucascade\"></span>，输入<b data-tag=\"uicontrol\" id=\"677fae2030k0l\" class=\"uicontrol\">regedit</b>，打开注册表编辑器。</p></li><li id=\"6f5f5dc030c0h\"><p id=\"ee9a2ac0305be\">在注册表路径中输入<b data-tag=\"uicontrol\" id=\"54d28850309gz\" class=\"uicontrol\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\WinStations\\RDP-Tcp</b>，按<code data-tag=\"code\" class=\"code\">Enter</code>键，然后查找<b data-tag=\"uicontrol\" id=\"2ac5c310303gg\" class=\"uicontrol\">PortNumber</b>的值。</p><p id=\"4dafc01030siu\">如下图所示，<b data-tag=\"uicontrol\" id=\"48541a7030s29\" class=\"uicontrol\">PortNumber</b>的值为3388，表示该ECS实例远程桌面服务端口为3388。</p><ul id=\"99571ef130t7j\"><li id=\"98bd9e1030hob\"><p id=\"98bd7700309uc\">如果该端口为您所需要的端口，登录实例时，端口请设置为<b data-tag=\"uicontrol\" id=\"48541a7130ml6\" class=\"uicontrol\">PortNumber</b>值。</p></li><li id=\"d20661c030n56\"><p id=\"d2063ab0307c1\">如果该端口不是您所需要的端口，请继续执行步骤<a title=\"\" class=\"xref\" href=\"#8cffc9e130p5x\">4</a>。</p><img id=\"49d0630030y9x\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4992880961/p700829.png\" alt=\"image.png\" placement=\"break\" width=\"800\" class=\"image break\"></li></ul></li><li id=\"8cffc9e130p5x\"><p id=\"8cffc9e030ewk\">修改远程桌面服务端口。</p><ol id=\"0fcfa48130xmk\"><li id=\"0f53e4d030fxr\"><p id=\"0f53bdc030ky1\">右键单击<b data-tag=\"uicontrol\" id=\"48541a7230heq\" class=\"uicontrol\">PortNumber</b>，然后单击<b data-tag=\"uicontrol\" id=\"1b1d2ab030kig\" class=\"uicontrol\">修改(M)...</b>。</p><img id=\"2af8284030vve\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4992880961/p700838.png\" alt=\"image.png\" placement=\"break\" class=\"image break\"></li><li id=\"1f26a50130mrp\"><p id=\"1f26a50030zd3\">在弹出的对话框中，<b data-tag=\"uicontrol\" id=\"6aefe3c030oh0\" class=\"uicontrol\">基数</b>选择<b data-tag=\"uicontrol\" id=\"6ccb0c6030xsc\" class=\"uicontrol\">十进制(D)</b>，<b data-tag=\"uicontrol\" id=\"6f93a24030gz4\" class=\"uicontrol\">数值数据(V)</b>设置为您需要的端口号（如3389）。</p><img id=\"910445b030h1q\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4992880961/p700846.png\" alt=\"image.png\" placement=\"break\" class=\"image break\"></li><li id=\"7a0101a130rty\"><p id=\"7a0101a0309ru\">单击<b data-tag=\"uicontrol\" id=\"7ff55c0030jji\" class=\"uicontrol\">确定</b>。</p></li></ol></li><li id=\"92fe680030kc9\"><p id=\"47bcbab030y8v\">重启该实例，使修改生效。</p><p id=\"9a66288030dvh\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li><li id=\"a84ef30130o3a\"><p id=\"a84ef300304pj\">重新登录该实例。</p><p id=\"0e0b1bb030kte\">登录端口设置为步骤<a title=\"\" class=\"xref\" href=\"#8cffc9e130p5x\">4</a>中设置的端口，如果可以正常登录，表示该问题已解决。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-domain-name-of-a-website-is-resolved-to-different-ip-addresses-on-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>Windows实例内部自定义域名解析与本地网络域名解析不一致导致无法访问网站如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例内部自定义域名解析与本地网络域名解析不一致导致无法访问网站如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-23 16:22:02</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"eebdd46096ocg\"><p data-tag=\"shortdesc\" id=\"eec3c7d896hii\" class=\"shortdesc\">本文介绍Windows实例内部自定义域名解析与本地网络域名解析不一致导致无法访问网站的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"EmYTN\">问题描述</h2><p id=\"87408e40a7t0q\">在Windows实例内部通过浏览器无法访问某网站，但在其他设备上可以正常访问，排查发现Windows实例内部自定义域名解析与本地网络域名解析不一致，具体说明如下：</p><ol id=\"87408e41a7nmb\"><li id=\"87408e42a7pda\"><p id=\"87408e43a7v9y\">在Windows实例内访问失败，如图所示，但是使用本地电脑可以正常访问该网站。</p><img id=\"87408e45a7dej\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3148285761/p557226.jpg\" alt=\"20230207182245\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"87408e46a7quy\"><p id=\"87408e47a7101\">登录Windows实例，然后在Windows实例内部的命令提示符中执行<code data-tag=\"code\" class=\"code\">ping 网站域名</code>和<code data-tag=\"code\" class=\"code\">nslookup 网站域名</code>命令，发现在Windows实例内部自定义域名解析与本地网络域名解析不一致，如图所示：</p><img id=\"87408e49a72tw\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3148285761/p557232.jpg\" alt=\"20230207182813\" placement=\"break\" width=\"750\" class=\"image break\"></li></ol><h2 id=\"MJZYP\">问题原因</h2><p id=\"8d4ed940a7fyl\">Windows实例内部和本地域名解析的IP地址不一致的可能原因如下：</p><ul id=\"c9205560ac8ny\"><li id=\"c9205561ac7qh\"><p id=\"c9205562acllg\">Windows操作系统中存在DNS（Domain Name Server，简称DNS）解析缓存。此时，您需要刷新DNS解析缓存后重新访问网站，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#db8d4870ac962\">刷新DNS解析缓存</a>。</p></li><li id=\"c9205563achnc\"><p id=\"c9205564acglw\">Windows操作系统的hosts文件中已存在该网站绑定的配置。此时，您需要删除hosts文件中绑定的配置后重新访问网站，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#db8d4885aceic\">删除hosts文件配置</a>。</p></li><li id=\"c9205565acnms\"><p id=\"c9205566ac3l7\">专有网络VPC类型的Windows实例内针对该域名配置了PrivateZone记录。此时，您需要修改Windows实例的相关记录后重新访问网站，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#db8d4894acxvv\">修改PrivateZone记录</a>。</p></li></ul><h2 id=\"ZnfSy\">解决方案</h2><div type=\"note\" id=\"99755a50a7ogq\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"99755a51a7aj5\">本文操作以Windows Server 2019 数据中心版 64位中文版操作系统为例，其他版本的Windows操作系统可参考本文操作步骤进行修改。</p></div></div><h3 id=\"db8d4870ac962\"><b>刷新DNS解析缓存</b></h3><ol id=\"db8d4871acm4d\"><li id=\"db8d4872aci1f\"><p id=\"db8d4873acixe\">远程连接Windows实例。</p><p id=\"db8d4874acs6d\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"db8d4875ac2bc\"><p id=\"db8d4876acz0w\">清空Windows操作系统中的DNS解析缓存。</p><ol id=\"db8d4877acqxg\"><li id=\"db8d4878aca2q\"><p id=\"db8d4879ac5vv\">在搜索栏输入<code data-tag=\"code\" class=\"code\">cmd</code>，然后单击<b data-tag=\"uicontrol\" id=\"3a644526a21pv\" class=\"uicontrol\">命令提示符</b>。</p><img placement=\"break\" alt=\"20230120131443\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2148285761/p552165.jpg\" id=\"db8d487bach1l\" class=\"image break\"></li><li id=\"db8d487cacgtc\"><p id=\"db8d487dac7ud\">在命令提示符中，执行<code data-tag=\"code\" class=\"code\">ipconfig /flushdns</code>命令，清空DNS解析缓存。<img id=\"db8d487eaczvu\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7588285761/p557393.jpg\" alt=\"刷新DNS的命令\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"db8d487facgip\"><p id=\"db8d4880acqsn\">在命令提示符中，执行<code data-tag=\"code\" class=\"code\">ping 网站域名</code>命令，查看域名解析是否正常。 </p><p id=\"db8d4881acb5d\">如图所示，域名解析恢复正常。<img id=\"db8d4882acbja\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9309485761/p557397.jpg\" alt=\"验证域名解析恢复正常\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"db8d4883ac0d4\"><p id=\"db8d4884ac2u5\">重新使用浏览器访问网站。</p></li></ol><h3 id=\"db8d4885aceic\"><b>删除hosts文件配置</b></h3><ol id=\"db8d4886acam9\"><li id=\"db8d4887acn8k\"><p id=\"db8d4888acinj\">远程连接Windows实例。</p><p id=\"db8d4889acyuz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"db8d488aacpv7\"><p id=\"db8d488bacncw\">清除Windows操作系统的hosts文件中该网站绑定的配置。</p><p id=\"db8d488cac8ch\">打开<code data-tag=\"code\" class=\"code\">C:\\Windows\\System32\\drivers\\etc\\hosts</code>文件，查看是否存在该网站的配置，如果存在，如图所示，则您需要删除该配置后保存文件。 <img id=\"db8d488dac6sc\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6588285761/p557396.jpg\" alt=\"hosts文件新\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"db8d488eacuyo\"><p id=\"db8d488fac9s4\">在命令提示符中，执行<code data-tag=\"code\" class=\"code\">ping 网站域名</code>命令，查看域名解析是否正常。 </p><p id=\"db8d4890ac7h3\">如图所示，域名解析恢复正常。<img id=\"db8d4891acn9t\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9309485761/p557397.jpg\" alt=\"验证域名解析恢复正常\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"db8d4892acf38\"><p id=\"db8d4893ac85h\">重新使用浏览器访问网站。</p></li></ol><h3 id=\"db8d4894acxvv\"><b>修改</b><b>PrivateZone记录</b></h3><ol id=\"db8d4895acssn\"><li id=\"db8d4896acahr\"><p id=\"db8d4897accno\">登录<a class=\"\" target=\"_blank\" href=\"https://dns.console.aliyun.com/\">云解析控制台</a>。</p></li><li id=\"db8d4898ac65y\"><p id=\"db8d4899acf5u\">在左侧导航栏，单击<b data-tag=\"uicontrol\" id=\"0d446b90acsb6\" class=\"uicontrol\"><b>PrivateZone</b></b>。</p></li><li id=\"db8d489aaczwt\"><p id=\"db8d489bac37v\">在<b data-tag=\"uicontrol\" id=\"0d446b90acsb6\" class=\"uicontrol\"><b>PrivateZone</b></b>页面，单击<b data-tag=\"uicontrol\" id=\"1f335500ac5i1\" class=\"uicontrol\">权威Zone</b>页签。</p></li><li id=\"db8d489cacq6d\"><p id=\"db8d489dacuor\">在PrivateZone列表中，单击目标PrivateZone的ID。</p><p id=\"db8d489eac61e\">在<b data-tag=\"uicontrol\" id=\"1811f6e0acjud\" class=\"uicontrol\">详情信息</b>页面，查看<b data-tag=\"uicontrol\" id=\"1c3e8990ac5q3\" class=\"uicontrol\">已关联VPC</b>信息，然后检查该信息是否与Windows实例所在的VPC信息一致。查看Windows实例的VPC信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/view-instance-information\">查看实例信息</a>。<img id=\"db8d489facp9l\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2342536761/p561254.jpg\" alt=\"查看VPC关联信息\" placement=\"break\" width=\"750\" class=\"image break\"></p><p id=\"db8d48a4acpmd\">如果关联的VPC信息与Windows实例所在的VPC信息不一致，则您需要在云解析控制台上将VPC信息修改为Windows实例所在的VPC信息，操作如下：</p><ol id=\"4537fd81ac1pg\"><li id=\"db8d48a6acvjy\"><p id=\"db8d48a7ac0b9\">在PrivateZone列表中，单击目标PrivateZone<b data-tag=\"uicontrol\" id=\"28ae7a40acwfn\" class=\"uicontrol\">操作</b>列中的<b data-tag=\"uicontrol\" id=\"2aebe720acj17\" class=\"uicontrol\">关联VPC</b>。<img id=\"db8d48a8ac1d9\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2342536761/p561278.jpg\" alt=\"单击关联VPC\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"db8d48a9acuig\"><p id=\"db8d48aaacf7i\">在<b data-tag=\"uicontrol\" id=\"bab1eee0ac23c\" class=\"uicontrol\">关联VPC</b>面板中，添加Windows实例所在的VPC信息，然后单击<b data-tag=\"uicontrol\" id=\"cf0443c0acnjf\" class=\"uicontrol\">确认</b>。<img id=\"db8d48abacaow\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2342536761/p561286.jpg\" alt=\"关联VPC面板\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"6163e781acj95\"><p id=\"6163e780acsnr\">在PrivateZone列表中，单击目标PrivateZone的名称。</p><p id=\"db8d48aeacdvw\">在<b data-tag=\"uicontrol\" id=\"81026830aclx0\" class=\"uicontrol\">解析设置</b>页面，查看主机解析记录信息，然后检查已设置的解析记录信息与业务使用情况是否一致。<img id=\"db8d48afacwo2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2342536761/p561296.jpg\" alt=\"查看解析记录\" placement=\"break\" width=\"750\" class=\"image break\"></p><p id=\"db8d48b2acdih\">如果已设置的解析记录信息与业务使用情况不一致，则您需要修改解析记录，操作如下：</p><ol id=\"8939cf91aca8u\"><li id=\"8886fa51acud7\"><p id=\"8bb752b0ac43p\">在<b data-tag=\"uicontrol\" id=\"81026830aclx0\" class=\"uicontrol\">解析设置</b>页面，单击目标记录的操作列中的<b data-tag=\"uicontrol\" id=\"98b0e060acs6a\" class=\"uicontrol\">修改</b>。</p></li><li id=\"8cfec6d1ac97m\"><p id=\"8fabe570ac5g9\">在<b data-tag=\"uicontrol\" id=\"eb6d9a00ac78d\" class=\"uicontrol\">修改记录</b>页面，根据实际情况修改解析记录，然后单击<b data-tag=\"uicontrol\" id=\"f2789480acztg\" class=\"uicontrol\">确定</b>。<img id=\"8fabe571acnqo\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2342536761/p561302.jpg\" alt=\"修改记录\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"db8d48bbacdcf\"><p id=\"db8d48bcacj0y\">重新使用浏览器访问网站。</p><div type=\"important\" id=\"db8d48bdacdzy\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"db8d48beac0qp\">Windows实例操作系统内每隔1分钟自动读取并更新PrivateZone记录，您无需再执行其他操作。</p></div></div></li></ol><p id=\"b6422190ac45j\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/how-do-i-view-and-change-the-default-port-for-remote-desktop-on-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>如何查看和修改Windows实例远程桌面的默认端口？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>如何查看和修改Windows实例远程桌面的默认端口？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-23 16:22:22</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"1fe880e0b1h64\"><p data-tag=\"shortdesc\" id=\"1fee4d46b1krh\" class=\"shortdesc\">本文主要介绍如何查看和修改Windows实例远程桌面的默认端口。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"MeHDA\">注意事项</h2><p id=\"1fee4d57b1ucu\">ECS实例中Windows实例远程桌面的默认端口为3389。基于安全性考虑，部分用户有修改默认端口的需求以减少通过远程桌面恶意攻击和扫描ECS实例的次数。因此本文主要介绍如何查看和修改Windows实例远程桌面的默认端口。在修改注册表前，请您注意：</p><ul id=\"1fee4d58b19mi\"><li id=\"1fee4d59b1f37\"><p id=\"1fee4d5ab1tvx\">您需要充分了解Windows系统运行机制，避免误操作。</p></li><li id=\"1fee4d5bb17eb\"><p id=\"1fee4d5cb17jm\">为了避免数据丢失，建议您对实例的系统盘和数据盘创建快照。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建快照</a>。</p></li></ul><section id=\"75b88a50b3wl1\" class=\"section\"><h2 data-tag=\"h3\" id=\"1fee7454b1e9v\" class=\"h3\"><b>查看ECS Windows远程桌面端口</b></h2><p id=\"1fee7455b18s2\">请参考如下三种方法查看ECS Windows远程桌面端口。</p><section id=\"b3398420b1bol\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"b5f3c220b137t\" class=\"section\"><h3 data-tag=\"h4\" id=\"b842e240b1rql\" class=\"h4\"><b>方法一</b></h3><ol start=\"1\" id=\"b842e241b1jk0\"><li id=\"b842e242b1c1k\"><p id=\"b842e243b1zjb\">远程连接Windows实例。 \n</p><p id=\"b842e244b14dd\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"b842e245b1hvf\"><p id=\"b842e246b13kr\">选择<b>开始</b> &gt; <b>运行</b>，输入<b>cmd</b>，打开命令行窗口。</p></li><li id=\"b842e247b1ojm\"><p id=\"b842e248b1ued\">执行如下命令，查看进程信息。 </p><pre data-tag=\"codeblock\" id=\"b842e249b1978\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>tasklist /svc | find \"Ter\"</code></pre><p id=\"b842e24ab1mkq\"> 系统显示类似如下，表示本示例中查看到<b>TermService</b>的PID是1592。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6191796761/p518739.png\" width=\"590\" height=\"57\" id=\"b842e24bb1c1a\" class=\"image break\"></p></li><li id=\"b842e24cb1vnv\"><p id=\"b842e24db1lq7\">执行如下命令，查看<b>TermService</b>使用的端口。 </p><pre data-tag=\"codeblock\" id=\"b842e24eb1brv\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -ano | find \"1592\"</code></pre><p id=\"b842e24fb1d5s\"> 系统显示类似如下，表示本示例中的端口号为3389。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5191796761/p518740.png\" width=\"587\" height=\"72\" id=\"b842e250b1ahj\" class=\"image break\"></p></li></ol></section><section id=\"bc871ba0b1t5w\" class=\"section\"><h3 data-tag=\"h4\" id=\"c0a94e10b146r\" class=\"h4\"><b>方法二</b></h3><ol start=\"1\" id=\"c0a94e11b1rq6\"><li id=\"c0a94e12b1u9l\"><p id=\"c0a94e13b18dl\">远程连接Windows实例。 \n</p><p id=\"f2dddd90b1wk0\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"c0a94e18b1qrz\"><p id=\"c0a94e19b100f\">选择<b>开始</b> &gt; <b>运行</b>，输入<b>regedit</b>，打开注册表编辑器。</p></li><li id=\"c0a94e1ab1q5j\"><p id=\"c0a94e1bb1tkj\">查找<b>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\Wds\\rdpwd\\Tds\\tcp</b>，然后查找<b>PortNumber</b>的子键值，如下图所示。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5191796761/p518741.png\" id=\"c0a94e1cb1y4g\" class=\"image break\"></p></li><li id=\"c0a94e1db1474\"><p id=\"c0a94e1eb14jz\">查找<b>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\WinStations\\RDP-Tcp</b>，然后查找<b>portnumber</b>的值，一般情况下与<b>PortNumber</b>子键值两个值是相同的，即为远程服务的端口。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6191796761/p518742.png\" id=\"c0a94e1fb1xwk\" class=\"image break\"></p></li></ol></section><section id=\"a1fe4fa0b3ml7\" class=\"section\"><h3 id=\"98ac9970b3ouk\"><b>方法三</b></h3><ol start=\"1\" id=\"b29dfcc0b3zcu\"><li id=\"b29dfcc1b3m0o\"><p id=\"b29dfcc2b3hrn\">远程连接Windows实例。\n</p><p id=\"b29dfcc3b3hu6\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"b29dfcc4b3ig0\"><p id=\"b29dfcc5b3fhd\">选择<b>开始</b> &gt; <b>运行</b>，输入<b>cmd，</b>打开命令行窗口。</p></li><li id=\"b29dfcc6b3p2j\"><p id=\"b29dfcc7b3198\">执行如下命令，返回注册表的子项下的项和下一层子项的列表。 </p><pre data-tag=\"codeblock\" id=\"b29dfcc8b32nj\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>reg query \"hklm\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\Wds\\rdpwd\\Tds\" /s</code></pre><p id=\"b29dfcc9b32xc\">系统显示类似如下，本示例中查看到<b>PortNumber</b>的16进制值为0xd3d，相当于10进制的3389。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5191796761/p518743.png\" id=\"b29dfccab3kfd\" class=\"image break\"></p></li><li id=\"b29dfccbb38l5\"><p id=\"b29dfcccb3939\">执行如下命令，查看RDP-Tcp的<b>PortNumber</b>值。 </p><pre data-tag=\"codeblock\" id=\"b29dfccdb35fy\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>reg query \"HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\WinStations\\RDP-Tcp\" /v portnumber</code></pre><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5191796761/p518744.png\" id=\"b29dfccfb31dx\" class=\"image break\"></li></ol></section></section></section><h2 data-tag=\"h3\" id=\"1feee988b11gg\" class=\"h3\"><b>修改ECS Windows远程桌面端口</b></h2><p id=\"1feee989b1elf\">修改Windows实例远程桌面默认端口的方法如下。</p><ol start=\"1\" id=\"1feee98ab14r3\"><li id=\"1feee98bb1may\"><p id=\"1feee98cb1zf8\">远程连接Windows实例。 \n</p><p id=\"01c5a180b1v0f\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"1feee991b1mu6\"><p id=\"1feee992b1jts\">选择<b>开始</b> &gt; <b>运行</b>，输入<b>regedit</b>，打开注册表编辑器。</p></li><li id=\"1fef1091b1dqe\"><p id=\"1fef1092b1w7k\">查找<b>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\TerminalServer\\Wds\\rdpwd\\Tds\\tcp</b>，然后查找<b>PortNumber</b>的子键值，并修改该值为您需要的端口。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5191796761/p518745.png\" class=\"image break\"></p></li><li id=\"1fef1093b10rd\"><p id=\"1fef1094b1xpc\">查找<b>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\TerminalServer\\WinStations\\RDP-Tcp</b>，然后查找<b>PortNumber</b>的子键值，并修改该值为您需要的端口。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5191796761/p518746.png\" class=\"image break\"></p></li></ol><h3 id=\"1fef1095b1mva\"><b>后续操作</b></h3><p id=\"bb259a60b1vlj\">以下是修改ECS Windows实例远程桌面默认端口的后续操作。</p><ul id=\"1fef1096b1kmh\"><li id=\"1fef1097b1q8l\"><p id=\"1fef1098b126b\">修改ECS Windows实例远程桌面端口后，需要检查防火墙和TCP/IP，确认是否有安全规则限制。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/configure-windows-firewall-rules-for-windows-server-instances\">Windows防火墙限制端口/IP/应用访问的方法以及例外的配置</a>。 </p></li><li id=\"1fef37a2b19d7\"><p id=\"1fef37a3b1afe\">确认您的安全组配置已经放行新添加的端口。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。 </p></li><li id=\"1fef37a9b15t1\"><p id=\"1fef37aab1zvs\">重启ECS实例使配置生效。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。 </p></li></ul></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/a-system-exception-occurs-on-linux-instances-after-ssh-logon-due-to-ulimit", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>使用SSH远程连接Linux系统的ECS实例时，提示“could not set limit for ‘nofile’: Operation not permitted”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用SSH远程连接Linux系统的ECS实例时，提示“could not set limit for ‘nofile’: Operation not permitted”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:41:25</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"a7065030cbkuo\"><p data-tag=\"shortdesc\" id=\"a70e6687cbx99\" class=\"shortdesc\">本文使用SSH远程连接Linux系统的ECS实例时，提示“could not set limit for ‘nofile’: Operation not permitted”错误的原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"73165c70cbp0j\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p class=\"p1\" id=\"2eb35796cbs31\">使用SSH远程连接Linux系统的ECS实例时，提示以下错误信息。</p><pre data-tag=\"codeblock\" id=\"a7065031cbf63\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>-bash: fork: retry: Resource temporarily unavailable.\npam_limits(sshd:session)：could not sent limit for 'nofile':operaton not permitted.\nPermission denied.</code></pre></section><section id=\"d75bd160cb7fq\" class=\"section\"><h2 id=\"CEErG\">问题原因</h2><p id=\"c2d95e11cb6tb\">该问题可能是Linux内核中资源限制配置文件<code data-tag=\"code\" class=\"code\">/etc/security/limits.conf</code>中<code data-tag=\"codeph\" class=\"codeph\">nofile</code>值过大，超过内核可打开的文件数，导致无法使用SSH连接ECS实例。</p></section><section id=\"e3d2ead0cbo1l\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"e61fe811cb0nd\">您可以根据业务需要，修改<code data-tag=\"codeph\" class=\"codeph\">/etc/sysctl.conf</code>和<code data-tag=\"codeph\" class=\"codeph\">/etc/security/limits.conf</code>配置文件以解决此问题。</p><ol id=\"2eb3a5b3cb195\"><li id=\"2eb3a5b4cbm96\"><p id=\"44851b21cbri6\">以VNC方式远程连接ECS实例。</p><p id=\"92efe950cbsuv\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"0d1caf20ce4lh\"><p id=\"0d1c8810cej0n\">分别执行如下命令，查看<code data-tag=\"codeph\" class=\"codeph\">fs.file-max</code>和<code data-tag=\"codeph\" class=\"codeph\">fs.nr_open</code>参数值。 </p><ul id=\"5a3180b1cedn0\"><li id=\"599ba951cey5l\"><p id=\"599ba950cebxp\">当<code data-tag=\"codeph\" class=\"codeph\">fs.file-max</code>和<code data-tag=\"codeph\" class=\"codeph\">fs.nr_open</code>参数值小于65536，建议您继续步骤<a title=\"\" class=\"xref\" href=\"#0ea69470cbk20\">3</a>。</p></li><li id=\"9bb162d1cemlp\"><p id=\"9da320b0ceugq\">若<code data-tag=\"codeph\" class=\"codeph\">fs.file-max</code>和<code data-tag=\"codeph\" class=\"codeph\">fs.nr_open</code>参数值大于65536，建议您执行步骤<a title=\"\" class=\"xref\" href=\"#4e8ef131cbisu\">4</a>。</p><pre id=\"1rscgf\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /proc/sys/fs/file-max \ncat /proc/sys/fs/nr_open </code></pre></li></ul></li><li id=\"0ea69470cbk20\"><p id=\"0ea66d60cbltf\">修改<code data-tag=\"codeph\" class=\"codeph\">/etc/sysctl.conf</code>配置文件。</p><ol id=\"44ec5151cb3d7\"><li id=\"441a8261cb146\"><p id=\"441a8260cb0fm\">打开<code data-tag=\"codeph\" class=\"codeph\">/etc/sysctl.conf</code>配置文件。</p><pre id=\"bnfxqg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/sysctl.conf</code></pre></li><li id=\"4a3eed71cbc51\"><p id=\"4a3eed70cbw3o\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"4eef2f11cbyos\"><p id=\"4eef2f10cbdr9\">修改<code data-tag=\"codeph\" class=\"codeph\">fs.file-max</code>和<code data-tag=\"codeph\" class=\"codeph\">fs.nr_open</code>参数值。 </p><p id=\"1ecdc0c0cbjq3\">建议将<code data-tag=\"codeph\" class=\"codeph\">fs.file-max</code>和<code data-tag=\"codeph\" class=\"codeph\">fs.nr_open</code>参数值都修改为大于65536。</p><ul id=\"2eb3a5b9cb24j\"><div id=\"9a127460cb7tn\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"a92ce111cbog5\"><li id=\"a92cba00cbhv7\"><p id=\"2eb3ccc0cbt4l\"><code data-tag=\"code\" class=\"code\">fs.file-max</code>：系统内核级别所有进程可打开的文件数。</p></li><li id=\"aa8bd4d0cbzji\"><p id=\"2eb3ccc2cbotc\"><code data-tag=\"code\" class=\"code\">fs.nr_open</code>：系统内核级别单个进程可打开的文件数。</p></li></ul></div></div></ul><pre id=\"3b21ku\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>fs.file-max = 655360\nfs.nr_open = 655360</code></pre></li></ol></li><li id=\"4e8ef131cbisu\"><p id=\"4e8ef130cbgv0\">修改<code data-tag=\"codeph\" class=\"codeph\">/etc/security/limits.conf</code>配置文件。</p><ol id=\"4f818e92cbv2h\"><li id=\"4f818e93cbyxg\"><p id=\"4f818e94cbcbi\">打开<code data-tag=\"codeph\" class=\"codeph\">/etc/security/limits.conf</code>配置文件。</p><pre id=\"4f818e95cb70n\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/security/limits.conf</code></pre></li><li id=\"4f818e96cbono\"><p id=\"4f818e97cbhwa\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"4f818e98cbud0\"><p id=\"4f818e99cbwcb\">修改<code data-tag=\"codeph\" class=\"codeph\">* soft nofile</code>和<code data-tag=\"codeph\" class=\"codeph\">* hard nofile</code>参数值。 </p><p id=\"4f818e9acbbat\">例如，将<code data-tag=\"code\" class=\"code\">* soft nofile</code>和<code data-tag=\"code\" class=\"code\">* hard nofile</code>参数值都修改为大于65535。</p><pre id=\"4f818e9bcb8nh\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>* soft nofile 655350\n* hard nofile 655350</code></pre></li></ol></li><li id=\"2eb3ccc7cbuk3\"><p id=\"2eb3ccc8cbtsv\">重启ECS实例。</p><p id=\"c3607d80cbynz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/start-an-instance\">启动实例</a>。</p></li><li id=\"b4864e21cbcuz\"><p id=\"b4864e20cbh7m\">依次执行以下命令，确认<code data-tag=\"code\" class=\"code\">fs.file-max</code>和<code data-tag=\"code\" class=\"code\">fs.nr_open</code>值修改成功。 </p><pre data-tag=\"codeblock\" id=\"2eadb243cb0yk\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /proc/sys/fs/file-max\ncat /proc/sys/fs/nr_open</code></pre></li></ol></section><section id=\"1963f650cbtfz\" class=\"section\"><h2 id=\"BkRbm\">相关文档</h2><p id=\"a7101439cbebw\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/troubleshooting-guidelines-when-you-cannot-remotely-log-on-to-a-linux-instance-through-ssh\">无法连接Linux实例的排查方法</a></p></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/using-usedns-to-enable-ssh-slows-down-ssh-logon-or-data-transfer", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>Linux实例中，SSH登录或数据传输速度都很慢怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux实例中，SSH登录或数据传输速度都很慢怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:28:20</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"299a2740bd9x8\"><p data-tag=\"shortdesc\" id=\"29a0de03bdf9w\" class=\"shortdesc\">本文介绍Linux系统的ECS实例中，SSH登录或数据传输速度都很慢的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"fc820150bdo5u\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"29a0de08bdvzu\">在Linux系统的ECS实例中，通过外网或内网使用SSH服务登录或数据传输时，速度很慢。</p></section><section id=\"fdf2a850bd5dt\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"29a10511bdu7a\">该问题可能是ECS实例中，SSH服务配置文件<code data-tag=\"codeph\" class=\"codeph\">/etc/ssh/sshd_config</code>中启用了UseDNS特性导致。</p><ul id=\"0fd1da50bd9qs\"><div id=\"25e259f0bd5mi\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"0fd1da52bdbqm\">UseDNS特性是SSH服务的安全增强特性，默认未开启。开启后，服务端会先根据客户端IP进行DNS PTR反向查询，得到客户端主机名。再根据得到的客户端主机名进行DNS正向A记录查询，最后比对得到的IP与原始IP是否一致，用于防止客户端欺骗。</p><p id=\"0fd1da54bdw6p\">通常情况下，客户端使用的是动态IP，没有相应的PTR记录。所以，该特性开启后，不仅无法用于信息比对，反而由于相关查询操作增加了操作延迟，最终导致客户端连接速度变慢。</p></div></div></ul></section><section id=\"0a4b35e0bdjdf\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><ol id=\"29a12c23bd0tr\"><li data-spm-anchor-id=\"a2c9r.12641768.0.i0.47d05e3b5ENw6f\" id=\"29a12c24bd0t0\"><p id=\"29a12c25bd1gk\">登录Linux实例。</p><p id=\"3f210f10bdrml\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"83b17ca1bd2w3\"><p id=\"83b17ca2bdsji\">执行如下命令，查看sshd_config文件。 </p><pre data-tag=\"codeblock\" id=\"83a8ca11bdy9n\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/ssh/sshd_config</code></pre><p id=\"83b17ca3bd45i\"> 系统显示类似如下，表示开启了UseDNS特性。 </p><pre data-tag=\"codeblock\" id=\"83a8ca12bds9s\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>UseDNS yes</code></pre></li><li id=\"6144000485t3e\"><p id=\"cf46f99097n4k\">修改SSH服务配置文件。</p><ol id=\"d496fda1972v6\"><li id=\"d42eed0197e1n\"><p id=\"d735282097dh0\">打开SSH配置文件。</p><pre id=\"zdrxtw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vi /etc/ssh/sshd_config</code></pre></li><li id=\"d967717097zr0\"><p id=\"dfcd043097xj8\">根据业务需要，在该行配置前加<code data-tag=\"code\" class=\"code\">#</code>注释掉该配置或将<code data-tag=\"code\" class=\"code\">yes</code>修改为<code data-tag=\"code\" class=\"code\">no</code>禁用UseDNS特性。</p><pre data-tag=\"codeblock\" id=\"83a8ca13bdj92\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code># UseDNS no</code></pre></li><li id=\"6144271185czd\"><p id=\"9518115dbdg01\">按Esc键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存修改。</p></li><li id=\"e9d97ee197kai\"><p id=\"4a875291bdx7f\">执行如下命令，重启SSH服务。 </p><pre id=\"6138b563850ez\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart sshd.service</code></pre></li></ol></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-system-prompts-must-be-owned-by-root-and-not-group-or-word-writable-error-when-the-ssh-service-starts", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>Linux系统的ECS实例中，启动SSH服务时提示“must be owned by root and not group or world-writable”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例中，启动SSH服务时提示“must be owned by root and not group or world-writable”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:27:45</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"a2104b10c6o4i\"><p data-tag=\"shortdesc\" id=\"a216dac1c6uuj\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中，启动SSH服务时提示“must be owned by root and not group or world-writable”错误的错误原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"cf41a8e0c6gux\" class=\"section\"><h2 id=\"KSazG\">问题现象</h2><p id=\"a216dac6c6kat\">Linux系统的ECS实例中，启动SSH服务时提示“must be owned by root and not group or world-writable”错误。</p><img id=\"4d2941f0c6fhk\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8624929761/p606076.png\" alt=\"启动ssh失败\" placement=\"break\" class=\"image break\"></section><section id=\"7b98ec20c6jnv\" class=\"section\"><h2 id=\"dPGQQ\">问题原因</h2><p id=\"a216dac7c66jn\">SSH服务基于安全性考虑，对服务相关的目录或文件的权限配置、属组等都有要求。如<code data-tag=\"code\" class=\"code\">/var/empty/sshd</code>Owner属性与Group属性为root用户和root用户组，当<code data-tag=\"code\" class=\"code\">/var/empty/sshd</code>Owner属性与Group属性为其他时，则会出现异常。</p></section><section id=\"b4976060c6mi8\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p data-tag=\"h3\" id=\"a21728e0c651k\" class=\"h3\">您可以修改<code data-tag=\"code\" class=\"code\">/var/empty/sshd</code>目录的Owner属性与Group属性，以解决此问题。</p><ol id=\"a21728e1c6wsc\"><li id=\"a21728e2c6x9t\"><p id=\"c5463011c6xzd\">使用VNC远程连接ECS实例。 </p><p id=\"c7dd0790c60od\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"f0ffb390c6mvt\"><p id=\"f0ff8c80c6eg1\">执行如下命令，查看<code data-tag=\"codeph\" class=\"codeph\">/var/empty/sshd</code>目录权限配置。 </p><pre data-tag=\"codeblock\" id=\"a2104b11c6ued\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ll -d /var/empty/</code></pre><p id=\"a21728e4c6xwx\">系统显示类似如下，表示<code data-tag=\"codeph\" class=\"codeph\">/var/empty/sshd</code>目录Owner属性与Group属性为Linux和Linux，需要修改为root用户和root用户组。 </p><img id=\"663ce810c6uwu\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8624929761/p606079.png\" alt=\"下载\" placement=\"break\" class=\"image break\"></li><li id=\"a21728e6c6lvz\"><p id=\"a21728e7c6lzr\">依次执行如下命令，恢复默认配置。 \n</p><div type=\"important\" id=\"ad97a050c9iwq\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"ad977940c9xkl\">以下chmod命令适用于CentOS 7，并非所有Linux发行版本中/var/empty/sshd目录都是711权限，您可以参考相同发行版本的实例目录权限进行配置。</p></div></div><pre data-tag=\"codeblock\" id=\"a2104b13c6zbh\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chown -R root:root /var/empty/sshd\nchmod -R 711 /var/empty/sshd</code></pre></li><li id=\"a2174ff4c69oq\"><p id=\"a2174ff5c6lz0\">执行如下命令，重启SSH服务。 \n</p><pre data-tag=\"codeblock\" id=\"a2104b14c6pxj\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart sshd.service</code></pre></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/an-error-is-reported-when-you-log-on-to-an-ecs-instance-of-the-linux-system-by-using-ssh-commands", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>使用SSH远程连接Linux系统的ECS实例时，提示“This account is currently not available.”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用SSH远程连接Linux系统的ECS实例时，提示“This account is currently not available.”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-14 10:12:09</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"b8914da0bd4hz\"><p data-tag=\"shortdesc\" id=\"b898a0a3bdxym\" class=\"shortdesc\">本文介绍使用SSH远程连接Linux实例时，提示“This account is currently not available.”错误的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"62324a80bd56y\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"b898a0a8bdlvm\">当使用SSH命令登录Linux系统的ECS实例，输入正确的用户名和密码也会连接失败，提示“This account is currently not available.”错误。</p><p data-spm-anchor-id=\"a2c4g.11186623.2.i3.72c58909qwjNAC\" id=\"83b0e062bdvro\">执行<code data-tag=\"code\" class=\"code\">cat /var/log/secure</code>查看登录日志，发现会出现类似如下信息。</p><pre id=\"1g33mw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Connection to 127.0.0.1 closed.\nReceived disconnect from 127.0.0.1: 11: disconnected by user.\npam_unix(sshd:session): session closed for user test.</code></pre></section><section id=\"6413b4b0bdquo\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"b89915d0bdzij\">该问题通常是由于ECS实例中用户配置文件（/etc/passwd）中，相应用户（如test）的默认Shell被修改，导致无法登录。</p></section><section id=\"66acfd30bdxyw\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"ff767410bd5ul\">您可以修改相应用户（如test）的Shell，以解决无法远程连接的问题。</p><ol id=\"dc489041bdk5c\"><li id=\"83b1559bbd698\"><p id=\"614363c585v20\">以VNC方式登录ECS实例。</p><p id=\"95451f1097rpc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"b8993ce0bd3lw\"><p id=\"b8993ce1bdnij\">执行如下命令，查看相应用户（如test）的默认Shell。 </p><pre data-tag=\"codeblock\" id=\"b89174b0bd6sa\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/passwd | grep username</code></pre><p id=\"b8993ce2bda7x\"> 系统显示类似如下，表示test用户的Shell被修改成<code data-tag=\"code\" class=\"code\">/sbin/nologin</code>（禁止登录）。 </p><pre data-tag=\"codeblock\" id=\"b89174b1bd3sd\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>test:x:1000:1000::/home/test:/sbin/nologin</code></pre></li><li id=\"63c222e0beapr\"><p id=\"63c222e1bezdo\">修改用户的Shell。</p><ol id=\"63c222e2ben8g\"><li id=\"63c222e3beuy1\"><p id=\"63c222e4be1je\">打开用户配置文件（/etc/passwd）。</p><pre id=\"63c222e5be38u\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vi /etc/passwd</code></pre></li><li id=\"63c222e6bebnl\"><p id=\"63c222e7bel9p\">将相应用户（如test）的默认Shell修改为bash，即将<code data-tag=\"codeph\" class=\"codeph\">/sbin/nologin</code>修改为<code data-tag=\"codeph\" class=\"codeph\">/bin/bash</code>，如下所示。</p><pre data-tag=\"codeblock\" id=\"63c222e8bexzy\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>test:x:1000:1000::/home/test:/sbin/nologin</code></pre></li><li id=\"63c222e9be42i\"><p id=\"63c222eaber7a\">按Esc键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存修改。</p></li></ol></li><li id=\"63c222ebbeiqc\"><p id=\"63c222ecbefcy\">重新使用该用户连接Linux实例，确保可以正常连接。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-ssh-service-cannot-be-started-due-to-port-occupation", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>Linux系统的ECS实例中，启动SSH服务提示“Failed to start OpenSSh server daemon”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例中，启动SSH服务提示“Failed to start OpenSSh server daemon”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:51:57</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"4c5f2160cal4n\"><p data-tag=\"shortdesc\" id=\"4c647895cab8g\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中，启动SSH服务提示“Failed to start OpenSSh server daemon”错误的原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"6dba9dc0cbuwk\" class=\"section\"><h2 id=\"4c649fa0cag11\">问题现象</h2><p id=\"fbc700e0cbl49\">在Linux系统的ECS实例中，SSH服务（sshd.service）无法启动，运行<code data-tag=\"code\" class=\"code\">systemctl status sshd.service</code>查看SSH服务提示“Failed to start OpenSSh server daemon”错误。</p><img id=\"200c8ee0cbcvc\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6672600861/p610185.png\" alt=\"sshd状态\" placement=\"break\" class=\"image break\"></section><section id=\"70083740cbubu\" class=\"section\"><h2 id=\"4c649fa2ca3ax\">问题原因</h2><p id=\"26546070cbio9\">该问题可能是因为SSH服务端口（22）被占用导致。</p></section><section id=\"8cc3b710cb8qe\" class=\"section\"><h2 id=\"4c649fa4caqq9\">解决方案</h2><p id=\"a6783871cb9ie\">您可以通过根据业务需要，修改占用22端口服务的端口号或修改SSH服务端口来解决此问题。</p><ol id=\"46d99272cbgqp\"><li id=\"46d99270cbs5w\"><p id=\"44851b21cbri6\">以VNC方式远程连接ECS实例。</p><p id=\"55238fc0cbvg2\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"53254ec1cbf35\"><p id=\"53254ec0cbr7p\">执行如下命令，以测试模式运行SSH服务。</p><pre id=\"ey1niy\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>/sbin/sshd -d</code></pre><p id=\"db472940cbsno\">显示信息如下，表示22端口被占用，导致SSH服务无法启动。</p><img id=\"d9d48670cbayz\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6672600861/p610186.png\" alt=\"端口被占用\" placement=\"break\" class=\"image break\"></li><li id=\"f4bc7ec1cbihs\"><p id=\"f4bc7ec0cbq5v\">执行如下命令，查看22端口被占用情况。</p><pre id=\"r8tgll\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>ss -tunlp | grep 22</code></pre><p id=\"2dd4e3a0cbj4p\">显示信息如下，表示22端口被Nginx服务占用。</p><div type=\"important\" id=\"8fadf6f0ce35k\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"8fadcfe0cexi2\">本文中22端口被Nginx服务占用仅为示例说明，请以实际为准。</p></div></div><img id=\"61252e40cbe28\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4910610861/p610187.png\" alt=\"Ngnix占用22\" placement=\"break\" class=\"image break\"></li><li id=\"63485c61cbemk\"><p id=\"63485c60cbrqs\">您可以根据需要，选择合适的方案来解决此问题。</p><ul id=\"3e8479d1cbr92\"><li id=\"3e356f70cbqyv\"><p id=\"3e354860cb2fi\">修改Nginx服务端口号。</p><ol id=\"8dae21a1cbagj\"><li id=\"8d19f7f0cbopo\"><p id=\"8d19d0e0cb3uc\">执行如下命令，打开nginx.conf配置文件。</p><pre id=\"lxpzpr\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>vim /etc/nginx/nginx.conf</code></pre></li><li id=\"ca151541cbml8\"><p id=\"ca151540cb0cz\">将Nginx占用的端口号修改为80。</p><img id=\"821a1530cbw08\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5580320861/p610189.png\" alt=\"修改Ngnix占用端口\" placement=\"break\" class=\"image break\"></li><li id=\"7df12c01cbevq\"><p id=\"92d93130cbtyg\">按下<code data-tag=\"code\" class=\"code\">Esc</code>键后，输入<code data-tag=\"code\" class=\"code\">:wq</code>并按<code data-tag=\"code\" class=\"code\">Enter</code>键以保存关闭配置文件。</p></li><li id=\"bd0f2950cb45n\"><p id=\"cd4bf5f0cb9iw\">执行以下命令，重启Nginx服务。</p><pre id=\"4bldcw\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>systemctl restart nginx </code></pre></li><li id=\"bf58aeb0cbgbm\"><p id=\"c2ee7fa0cbzfy\">执行以下命令，重启SSH服务。</p><pre id=\"rufxax\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>systemctl restart sshd.service </code></pre></li></ol></li><li id=\"871c00a1cb82p\"><p id=\"871c00a0cbs47\">修改SSH服务端口号。</p><ol id=\"018376d1cb47k\"><li id=\"7885ece1cbeix\"><p id=\"7885ece2cbah2\">执行如下命令，打开ssh_config配置文件。</p><pre id=\"7885ece3cbq8t\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>vim /etc/ssh/sshd_config</code></pre></li><li id=\"02de9a08cb8le\"><p id=\"9e64e6f0cb1es\">修改SSH服务的端口号，例如修改为2222。</p><img id=\"c8ffbb60cboqm\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5580320861/p610190.png\" alt=\"修改SSH占用端口\" placement=\"break\" class=\"image break\"></li><li id=\"9c44ed20cbsqn\"><p id=\"9c449f00cb53t\">按下<code data-tag=\"code\" class=\"code\">Esc</code>键后，输入<code data-tag=\"code\" class=\"code\">:wq</code>并按<code data-tag=\"code\" class=\"code\">Enter</code>键以保存关闭配置文件。</p></li><li id=\"ea283241cbu21\"><p id=\"ed7b7bf0cb0fw\">执行以下命令，重启SSH服务。</p><pre id=\"e7fd14e0cbl1w\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>systemctl restart sshd.service </code></pre></li></ol></li></ul></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/unable-to-log-on-to-taobao-how-to-deal-with-on-ecs-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>在ECS实例上无法登录淘宝如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在ECS实例上无法登录淘宝如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-20 18:00:34</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main role=\"main\"><article role=\"article\" aria-labelledby=\"title_2qv_wl0_lf3\"><div class=\"body taskbody\" data-tag=\"taskbody\" id=\"taskbody-6ym-2aa-ea2\"><p id=\"shortdesc-dg2-o7u-4ei\" class=\"shortdesc\" data-tag=\"shortdesc\">本文介绍在ECS实例上无法登录淘宝的解决方案。</p><section class=\"section\" data-tag=\"section\" id=\"section-o62-2aa-033\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-ayy-4u2-l62\">问题一：无法登录淘宝网账号</h2><h3 class=\"p h3\" data-tag=\"p\" id=\"p-jw3-52j-8di\">问题描述</h3><p class=\"p\" data-tag=\"p\" id=\"p-y9a-h6e-zu2\">在ECS实例上通过浏览器登录淘宝网时出现提示如下信息，导致一直无法登录淘宝网账号：</p><ul class=\"ul\" data-tag=\"ul\" id=\"ul-jpm-3ju-e8w\"><li class=\"li\" data-tag=\"li\" id=\"li-oyf-7mo-wdp\">提示系统繁忙，输入多次验证码后依旧无法登录。</li><li class=\"li\" data-tag=\"li\" id=\"li-w2z-z2x-5nz\">提示需要检查是否使用了代理软件或VPN。</li></ul><h3 class=\"p h3\" data-tag=\"p\" id=\"p-vll-77n-wvm\">问题原因</h3><p class=\"p\" data-tag=\"p\" id=\"p-us2-v2c-v6h\">淘宝网对外部访问的一些API存在限制导致该问题。</p><h3 class=\"p h3\" data-tag=\"p\" id=\"p-eah-20i-93w\">解决方案</h3><p class=\"p\" data-tag=\"p\" id=\"p-r76-ahw-9q3\">建议您使用本地的电脑访问淘宝网。如果您需要使用服务端访问淘宝或淘宝开放平台API，建议您使用<a class=\"xref\" target=\"_blank\" href=\"https://cloud.tmall.com/productDetail.html?code=ecs\">聚石塔服务器</a>访问。</p></section><section class=\"section\" data-tag=\"section\" id=\"section-75h-48g-3sz\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-3ix-xu7-r07\">问题二：无法访问手机淘宝</h2><h3 class=\"p h3\" data-tag=\"p\" id=\"p-oav-dg9-ur5\">问题描述</h3><p class=\"p\" data-tag=\"p\" id=\"p-4ys-y0w-yui\">在ECS实例上，无法通过浏览器访问<a class=\"xref\" target=\"_blank\" href=\"https://m.taobao.com\">手机淘宝</a>。</p><h3 class=\"p h3\" data-tag=\"p\" id=\"p-9r7-5k8-vtv\">问题原因</h3><p class=\"p\" data-tag=\"p\" id=\"p-1l8-ka9-1er\"><a class=\"xref\" target=\"_blank\" href=\"https://m.taobao.com\">手机淘宝</a>主要提供给移动设备（例如手机）访问，移动设备上会有相应的安全策略，属于淘宝网对IP端的限制，因此，阿里云无法保证ECS实例（属于PC端）一定可以访问成功。</p><h3 class=\"p h3\" data-tag=\"p\" id=\"p-18h-h4y-d2k\">解决方案</h3><p class=\"p\" data-tag=\"p\" id=\"p-s8a-72y-bbt\">在ECS实例上尝试重新访问或使用移动设备（例如手机）访问<a class=\"xref\" target=\"_blank\" href=\"https://m.taobao.com\">手机淘宝</a>。</p></section></div></article></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/access-windows-instance-using-iis-deployment-sites-appear-500-19-don-t-allow-absolute-physical-path-in-xxx-xxx-error-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>访问Windows实例上使用IIS部署的网站时，出现“500.19-xxx中不允许绝对物理路径xxx”报错，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>访问Windows实例上使用IIS部署的网站时，出现“500.19-xxx中不允许绝对物理路径xxx”报错，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-08 16:08:58</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"831fd27096pim\"><p data-tag=\"shortdesc\" id=\"8324b47896pq1\" class=\"shortdesc\">本文介绍访问Windows实例上使用IIS（Internet Information Services）部署的网站时，出现“500.19-xxx中不允许绝对物理路径xxx”报错的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"se-knowledge\" class=\"section\"><h2 id=\"tztrA\">问题描述</h2><p id=\"8324b47c96vcz\">访问Windows实例上使用IIS部署的网站时，出现“500.19-xxx中不允许绝对物理路径xxx”报错，报错示例如下。</p><pre id=\"831fd27196zol\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>HTTP 错误 500.19 - Internal Server Error web.config 文件的 system.webServer/httpErrors 节中不允许绝对物理路径“C:\\inetpub\\custerr”，请改用相对路径。</code></pre><p id=\"0010e6e0b6ewo\">报错示例如下图所示。<img id=\"1e2dcb70b601m\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4307747761/p573653.png\" alt=\"问题描述\" placement=\"break\" width=\"750\" class=\"image break\"></p><h2 id=\"mNrWn\">问题原因</h2><p id=\"66ff2010adp48\">该问题可能是ApplicationHost.config或Web.config文件中存在格式不正确或无法识别的XML元素导致。</p><h2 id=\"beYmk\">解决方案</h2><p>您需要将IIS无法识别的XML元素，从ApplicationHost.config或Web.config文件中删除，操作步骤如下：</p><div type=\"note\" id=\"fca55df1adf79\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3ef401c0adl6x\">本文操作以Windows Server 2019 数据中心版 64位中文版操作系统为例，具体操作以您的实际的操作系统为准。</p></div></div><ol id=\"50d7c7a2adfjn\"><li id=\"50d7c7a0adbn9\"><p id=\"8324db86962oc\">远程连接Windows实例。</p><p id=\"597c26d0adc3w\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"3fd5e701adkg7\"><p id=\"4f7a84c0adpbb\">在桌面左下角，选择<b data-tag=\"uicontrol\" id=\"24916940adk3f\" class=\"uicontrol\"><img id=\"1cb6c2b0adhxe\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2126027661/p510213.png\" alt=\"开始 \" placement=\"inline\" width=\"25\" class=\"image inline\"><b> &gt; 服务器管理器</b></b>。</p><p id=\"22997ef0adiiw\">进入<b data-tag=\"uicontrol\" id=\"2e2609f0adrqc\" class=\"uicontrol\"><b>服务器管理器</b></b>页面。</p><img id=\"31317531ad01m\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4605256761/p562603.jpg\" alt=\"打开服务器管理器\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"11466351advt2\"><p id=\"109f5cd2ad6on\">打开网站的物理目录。</p><ol id=\"812fe051b7drb\"><li id=\"80a098a0b7yd5\"><p id=\"80a07190b769a\">在<b data-tag=\"uicontrol\" id=\"05fe8d32ady4a\" class=\"uicontrol\"><b>服务器管理器</b></b>页面，选择<b data-tag=\"uicontrol\" id=\"05fe8d33adufn\" class=\"uicontrol\"><b>工具 &gt; Internet Information Services（IIS）管理器</b></b>。</p><p id=\"f3efbcf2b7jxw\">进入<b data-tag=\"uicontrol\" id=\"34c2c430adv10\" class=\"uicontrol\"><b>Internet Information Services（IIS）管理器</b></b>页面。<img id=\"f3efbcf3b7pe8\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6745456761/p562754.jpg\" alt=\"进入IIS\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"881aa8a1b7sbs\"><p id=\"881aa8a0b7iw5\">在<b data-tag=\"uicontrol\" id=\"05fe8d34adzap\" class=\"uicontrol\"><b>Internet Information Services（IIS）管理器</b></b>页面的左侧导航栏找到目标网站，然后在<b data-tag=\"uicontrol\" id=\"7ba4c480b7b94\" class=\"uicontrol\">操作</b>区域单击<b data-tag=\"uicontrol\" id=\"7df28510b7k1x\" class=\"uicontrol\">浏览</b>。<img id=\"50977f30b78to\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3845557761/p574154.png\" alt=\"选择目标网站\" placement=\"break\" class=\"image break\"></p><p id=\"91efdc20b7t96\">进入该网站的物理目录。<img id=\"cd2a0f90b7vha\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3845557761/p574159.png\" alt=\"网站物理目录\" placement=\"break\" class=\"image break\"></p></li></ol></li><li id=\"9e4e5d20b7io0\"><p id=\"9e4e3610b7rpx\">打开站点目录下的web.config配置文件后，删除配置文件中的<code data-tag=\"code\" class=\"code\">httpErrors</code>内容，然后保存并关闭web.config配置文件。</p><p id=\"2b369950b7jj5\">待删除的<code data-tag=\"code\" class=\"code\">httpErrors</code>内容示例如下：</p><pre id=\"1sbebw\" data-tag=\"codeblock\" outputclass=\"language-java\" class=\"pre codeblock language-java\"><code>&lt;httpErrors&gt;            &lt;remove statusCode=\"500\" subStatusCode=\"-1\" /&gt;         </code></pre></li><li id=\"3504e401adjfl\"><p id=\"3504e400adh10\">重启IIS。</p><ol id=\"48d844e1adi1r\"><li id=\"484e2d51adevs\"><p id=\"484e2d50adw5i\">在桌面左下角，单击<img id=\"c43366b0ado8o\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553311.jpg\" alt=\"搜索图标 \" placement=\"inline\" width=\"25\" class=\"image inline\">图标，然后在搜索框输入<code data-tag=\"code\" class=\"code\">iisreset</code>。<img id=\"f667e110ad80t\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6745456761/p562815.jpg\" alt=\"重启IIS\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"d7ed7330adwuc\"><p id=\"d7ed4c20ad1li\">在<b data-tag=\"uicontrol\" id=\"ea143580adfi8\" class=\"uicontrol\"><b>最佳匹配</b></b>区域，单击<b data-tag=\"uicontrol\" id=\"ec24ed10ad17i\" class=\"uicontrol\"><b>iisreset</b></b><b>。</b></p><p id=\"f833a060adhhh\">IIS重启程序运行完毕，则表示IIS重启成功。<img id=\"43b24190adq7g\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6745456761/p562818.jpg\" alt=\"IIS重启程序运行框\" placement=\"break\" class=\"image break\"></p></li></ol></li><li id=\"3a2636f0ad89q\"><p id=\"3a260fe0adzgv\">重新访问网站。</p><p id=\"411ac340adr4x\">正常访问，该问题解决。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-system-prompts-fatal-mm-request-send-write-broken-pipe-error-when-the-ssh-service-runs-abnormally-caused-by-viruses", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>在Linux系统的ECS实例执行SSH命令时，提示“fatal: mm_request_send: write: Broken pipe”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在Linux系统的ECS实例执行SSH命令时，提示“fatal: mm_request_send: write: Broken pipe”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-01 17:54:03</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"ec482060a30iv\"><p data-tag=\"shortdesc\" id=\"ec4f7367a3wvl\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中执行SSH命令时，提示“<b data-tag=\"uicontrol\" id=\"c9ac26e0a3cnp\" class=\"uicontrol\">fatal: mm_request_send: write: Broken pipe</b>”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"2092d090a3aeg\" class=\"section\"><h2 id=\"pjdAF\">问题现象</h2><p id=\"ec4f9a73a3hpw\">在Linux系统的ECS实例中执行SSH命令时，提示“<b data-tag=\"uicontrol\" id=\"c7854f40a3sdx\" class=\"uicontrol\">fatal: mm_request_send: write: Broken pipe</b>”错误。</p></section><section id=\"1cefe040a3i7r\" class=\"section\"><h2 id=\"hBMtB\">问题原因</h2><p id=\"ec4f9a75a3dbj\">该问题可能是udev-fall等病毒导致SSH服务运行异常。</p></section><section id=\"e4e04360a3tr5\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"125253b1a31ji\">您可以通过临时处理方法（终止病毒进程）或彻底解决方法（使用快照回滚云盘方式）解决该问题。</p><section id=\"f6b84970a38v9\" class=\"section\"><h3 id=\"16f0c219\"><b>方法一：临时处理方法</b></h3><p id=\"ec4fc185a3k7g\">本文以udev-fall病毒为例，临时恢复SSH服务的正常运行。</p><ol id=\"ec4fc186a3ibb\"><li id=\"ec4fc187a3vyt\"><p id=\"ec4fc188a3nfi\">通过VNC连接Linux实例。</p><p id=\"3eeaf3f2a3j9l\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"41462201a3upw\"><p id=\"41462200a37dp\">执行如下命令，查看udev-fall病毒进程信息，并记录该进程ID。 </p><pre data-tag=\"codeblock\" id=\"ec482061a3p1f\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ps aux | grep udev-fall</code></pre></li><li id=\"ec4fc18aa32wu\"><p id=\"ec4fc18ba3ty6\">执行如下命令，结束udev-fall病毒进程。 </p><pre data-tag=\"codeblock\" id=\"ec482062a38w6\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>kill -9 [$PID]    # [$PID]表示上一步获取的udev-fall病毒进程ID。</code></pre></li><li id=\"ec4fe892a3hub\"><p id=\"ec4fe893a3ekp\">执行如下命令，取消udev-fall病毒程序的自动运行设置。 </p><pre data-tag=\"codeblock\" id=\"ec482063a3d76\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chkconfig udev-fall off</code></pre></li><li id=\"ec4fe895a3znx\"><p id=\"ec4fe896a3118\">执行如下命令，删除所有udev-fall病毒程序相关指令和启动配置。 </p><pre data-tag=\"codeblock\" id=\"ec482064a3sq4\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>for i in ` find / -name \"udev-fall\"`;\ndo echo '' &gt; $i &amp;&amp; rm -rf $i;\ndone</code></pre></li><li id=\"ec4fe898a3ocj\"><p id=\"ec4fe899a33am\">执行如下命令，重启SSH服务。 \n</p><pre data-tag=\"codeblock\" id=\"ec482065a3vwl\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart sshd.service</code></pre></li></ol></section><section id=\"04d6c9f0a3v01\" class=\"section\"><h3 data-tag=\"h3\" id=\"ec4fe89ea3jcw\" class=\"h3\"><b>方法二：</b><b>彻底解决方法</b></h3><p id=\"ec4fe89fa3tg9\">由于无法明确病毒或者恶意入侵者是否对系统做过其他篡改，是否隐藏了其他病毒文件，因此为了服务器的长期稳定运行，建议您通过回滚云盘快照的方式，将服务器恢复到正常状态。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/roll-back-a-disk-by-using-a-snapshot-1\">使用快照回滚云盘</a>。</p><div id=\"4d2f7d90a3yey\" type=\"important\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"46dfe3d0a3e7b\">回滚云盘是不可逆操作，从快照的创建日期到回滚云盘时这段时间内的数据会丢失。为避免误操作，建议您在回滚前为云盘创建一份快照备份数据。</p></div></div></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/group-policy-opening-errors-caused-by-group-policy-file-configuration-exceptions", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows系统组策略文件配置异常导致组策略打开报错，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows系统组策略文件配置异常导致组策略打开报错，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-06 09:47:30</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"f55cd8e0c1u73\"><p data-tag=\"shortdesc\" id=\"f55f9808c1vxv\" class=\"shortdesc\"><span style=\"color:rgb(24, 24, 24)\">本文介绍</span>Windows系统组策略文件配置异常导致组策略打开报错<span style=\"color:rgb(24, 24, 24)\">的问题原因及解决方案。</span></p><div data-tag=\"conbody\" class=\"conbody\"><h2 data-spm-anchor-id=\"a2c9r.12641768.0.i1.5ef05e3bTf3TPf\" id=\"f55f9809c10su\">问题描述</h2><p id=\"f55f980ac1576\">在打开组策略时提示“组策略错误”。</p><pre data-tag=\"codeblock\" id=\"f55cd8e1c1nw6\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>组策略错误：未能打开这台计算机上的组策略对象。您可能没有合适的权限。</code></pre><h2 data-spm-anchor-id=\"a2c9r.12641768.0.i0.5ef05e3bTf3TPf\" id=\"f55f980bc1juf\">问题原因</h2><p data-spm-anchor-id=\"a2c9r.12641768.0.i0.2ac35e3bDcm1Ta\" id=\"f55f980cc1ivc\">由于组策略文件配置异常，导致未能正常打开组策略对象。</p><h2 id=\"f55f980dc1iqu\">解决方案</h2><ol id=\"67fc09f2c1sm6\"><li id=\"67fc09f0c1gch\"><p id=\"f55f980ec15ba\">远程连接Windows实例。</p><p id=\"6e0090f0c1c2s\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"68bb3b40c1ugw\"><p id=\"68bb1430c1tmk\">打开显示隐藏文件的选项。</p><div id=\"c2f12420d1k9j\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"c007bfd0d1p5p\">本操作以Windows Server 2019为例，不同操作系统的操作入口可能不同，请您根据实际环境进行操作。</p></div></div><ol id=\"62299913d1lcg\"><li id=\"62299910d1j97\"><p id=\"23b60c90d1s72\">使用快捷键<code data-tag=\"code\" class=\"code\">win</code>+<code data-tag=\"code\" class=\"code\">E</code>打开文件资源管理器。</p></li><li id=\"62299911d1nv4\"><p id=\"5fd5be00d12a7\">在文件资源管理器界面上方单击<b data-tag=\"uicontrol\" id=\"7fb82050d1wg4\" class=\"uicontrol\">查看</b>页签，然后单击最右侧的<b data-tag=\"uicontrol\" id=\"87a0a990d1h3c\" class=\"uicontrol\">选项</b>。</p></li><li id=\"90299181d1o8n\"><p id=\"927a8660d157k\">在文件夹选项界面上方单击<b data-tag=\"uicontrol\" id=\"f1d70700d4qb5\" class=\"uicontrol\">查看</b>页签。</p></li><li id=\"a5e7f980d1vma\"><p id=\"afc21990d1lsi\">在下方的高级设置中，下拉找到并选中<b data-tag=\"uicontrol\" id=\"ecb63200d1hv7\" class=\"uicontrol\">显示隐藏的文件、文件夹和驱动器</b>这一选项，然后单击<b data-tag=\"uicontrol\" id=\"fd61c600d145e\" class=\"uicontrol\">应用</b>。</p><img id=\"5d3dfc21d1yfl\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2038578761/p582572.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li></ol></li><li id=\"8432f071c16y8\"><p id=\"8432f070c1vz0\">在<code data-tag=\"codeph\" class=\"codeph\">C:\\Windows\\System32\\GroupPolicy\\Machine</code>文件夹中找到<code data-tag=\"codeph\" class=\"codeph\">registry.pol</code>文件，并将其重命名。</p></li><li id=\"8f7e53c1c1281\"><p id=\"8f7e53c0c1lio\">新建一个记事本文件，改名为<code data-tag=\"codeph\" class=\"codeph\">registry.pol</code>。</p></li><li id=\"98466791c1pp9\"><p id=\"98466790c1vby\">重新尝试打开组策略。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-when-the-system-update-process-of-a-windows-instance-is-stuck-at-0", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows系统的ECS实例更新系统时，一直卡在0%该如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows系统的ECS实例更新系统时，一直卡在0%该如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-08-10 10:49:27</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2459639\"><p id=\"b5c7608430rip\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍Windows系统的ECS实例更新系统时，一直卡在0%的问题原因和解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"1402263030pbk\" class=\"section\"><h2 data-tag=\"p\" id=\"b5c76083300oo\" class=\"p\"><b>问题现象</b></h2><p id=\"18c63df130gl1\">Windows系统的ECS实例更新系统时，一直卡在0%。通过实例健康诊断时提示“该实例的防火墙服务（对应的进程名称为mpssvc）目前不处于运行中，会导致Windows系统更新失败”。</p></section><section id=\"1573dea0303ew\" class=\"section\"><h2 id=\"07123aa030475\"><b>问题原因</b></h2><p id=\"16d7f2c031svz\">该问题可能是由于Windows防火墙服务（mpssvc）未运行，导致Windows更新失败。</p></section><section id=\"169ca7303053k\" class=\"section\"><h2 id=\"08a50fa0300oy\"><b>解决方案</b></h2><p id=\"1c57a98032h3c\">您可以通过修改注册表并启动防火墙服务，来解决上述问题。</p><ol id=\"3953286231xxg\"><li id=\"3953286031d1n\"><p id=\"7666e68130p5c\">远程连接Windows实例。</p><p id=\"44419ea031ykt\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"2c49cbf031ugy\"><p id=\"2c49a4e031d65\">查看Windows防火墙状态。</p><ol id=\"6249a63131uv8\"><li id=\"621e2961319ek\"><p id=\"621e2960315sk\">单击右下角的<img id=\"6ed85ef0318sg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3723690961/p701353.png\" alt=\"image.png\" placement=\"inline\" class=\"image inline\">图标，然后选择<span data-tag=\"menucascade\" id=\"a580d54031jla\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"a580fc5031ojh\" class=\"uicontrol\">Windows 系统</b> &gt; <b data-tag=\"uicontrol\" id=\"aca4d600315vz\" class=\"uicontrol\">控制面板</b></span>。</p></li><li id=\"951b720031tzj\"><p id=\"951b4af0317dp\">在控制面板页面，选择<span data-tag=\"menucascade\" id=\"10f5e08031eay\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"10f62ea031226\" class=\"uicontrol\">系统和安全</b> &gt; <b data-tag=\"uicontrol\" id=\"1e2cc02031d5j\" class=\"uicontrol\">允许应用通过 Windows 防火墙</b></span>。</p><p id=\"3a4e22d031sfn\">如果弹出提示<b data-tag=\"uicontrol\" id=\"4179769031de2\" class=\"uicontrol\">Windows 防火墙无法更改某些设置。错误代码 0x80070422</b>，说明该问题是由于防火墙服务未运行导致。</p><img id=\"c96a246031zh8\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3723690961/p701373.png\" alt=\"image.png\" placement=\"break\" width=\"800\" class=\"image break\"></li></ol></li><li id=\"14e0c13031o0y\"><p id=\"14e09a2031v8o\">修改防火墙服务注册表。</p><ol id=\"74a2d84131lq5\"><li id=\"61075041319hh\"><p id=\"61075040317dk\">选择<span data-tag=\"menucascade\" id=\"a0a4077032wtr\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"a0a42e80325w4\" class=\"uicontrol\">开始</b> &gt; <b data-tag=\"uicontrol\" id=\"a3b761f032kan\" class=\"uicontrol\">运行</b></span>，输入<b data-tag=\"uicontrol\" id=\"677fae2030k0l\" class=\"uicontrol\">regedit</b>，打开注册表编辑器。</p></li><li id=\"6f5f5dc030c0h\"><p id=\"b2e793f131itu\">在注册表路径中输入<b data-tag=\"uicontrol\" id=\"54d28850309gz\" class=\"uicontrol\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\mpssvc</b>，按<code data-tag=\"code\" class=\"code\">Enter</code>键，然后查找<b data-tag=\"uicontrol\" id=\"1d876a5031212\" class=\"uicontrol\">Start</b>。</p></li><li id=\"76ecef5131i76\"><p id=\"76ecef50319tu\">右键单击<b data-tag=\"uicontrol\" id=\"e43425b031fcc\" class=\"uicontrol\">Start</b>，然后单击<b data-tag=\"uicontrol\" id=\"1b1d2ab030kig\" class=\"uicontrol\">修改(M)...</b>。</p><img id=\"a15e1bb03173g\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3723690961/p701378.png\" alt=\"image.png\" placement=\"break\" class=\"image break\"></li><li id=\"a4c75e61318cm\"><p id=\"abfb8bc031bh2\">在弹出的对话框中，<b data-tag=\"uicontrol\" id=\"6aefe3c030oh0\" class=\"uicontrol\">基数</b>选择<b data-tag=\"uicontrol\" id=\"6ccb0c6030xsc\" class=\"uicontrol\">十进制(D)</b>，<b data-tag=\"uicontrol\" id=\"6f93a24030gz4\" class=\"uicontrol\">数值数据(V)</b>设置2，单击<b data-tag=\"uicontrol\" id=\"bb4df86031buc\" class=\"uicontrol\">确定</b>。</p><img id=\"c1f6aea031pay\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1730831961/p701380.png\" alt=\"image.png\" placement=\"break\" class=\"image break\"></li></ol></li><li id=\"a39b3a7031jlt\"><p id=\"a39b1360317t8\">启动防火墙服务。</p><ol id=\"d050154131k1a\"><li id=\"cf91592131j4f\"><p id=\"d5ef23b031yt8\">选择<span data-tag=\"menucascade\" id=\"3dde9ea032xny\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"3ddec5b0325x9\" class=\"uicontrol\">开始</b> &gt; <b data-tag=\"uicontrol\" id=\"3ddec5b1322eb\" class=\"uicontrol\">运行</b></span>，输入<b data-tag=\"uicontrol\" id=\"e43425b231gie\" class=\"uicontrol\">services.msc</b>，单击<b data-tag=\"uicontrol\" id=\"f5401b7031qq6\" class=\"uicontrol\">确定</b>。</p></li><li id=\"f62a2d51316n4\"><p id=\"f62a2d5031pv0\">在<b data-tag=\"uicontrol\" id=\"fd193b6031cuc\" class=\"uicontrol\">服务</b>页面，找到<b data-tag=\"uicontrol\" id=\"13315c20313hw\" class=\"uicontrol\">Windows Defender Firewall</b>服务，启动该服务。</p></li></ol></li><li id=\"1931765131f44\"><p id=\"193176503101c\">重启实例，使以上修改生效。</p><p id=\"42ade27031oyd\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p><div data-tag=\"note\" id=\"f8fcc24332qd7\" type=\"warning\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong>重启实例会造成您的实例停止工作，可能导致业务中断，建议您在非业务高峰期时执行该操作。</div></div></li><li id=\"250d59d131icv\"><p id=\"250d59d031ecy\">重新更新Windows系统，如果可以正常更新，说明该问题已解决。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-a-message-similar-to-windows-explorer-is-stopped-is-displayed-when-i-use-a-self-managed-account-to-log-on-to-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>使用自建账号登录Windows实例后提示“Windows资源管理器已停止工作”，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用自建账号登录Windows实例后提示“Windows资源管理器已停止工作”，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-06 10:05:25</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"acceb900a6nkk\"><p data-tag=\"shortdesc\" id=\"acd3e924a6fia\" class=\"shortdesc\"><span style=\"color:rgb(24, 24, 24)\">本文介绍</span>使用自建账号登录Windows实例后提示“Windows资源管理器已停止工作”<span style=\"color:rgb(24, 24, 24)\">的问题原因及解决方案。</span></p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\" data-spm-anchor-id=\"a2c9r.14518950.0.i2.aa555e3bhohsU5\">问题描述</h2><p id=\"acd3e928a64et\">使用自建账号登录Windows实例后，提示“Windows资源管理器已停止工作”，如下图所示。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7048578761/p519874.png\" alt=\"{54BF175F-4894-4B96-82B7-360D661527D0}_20200527154847.jpg\" height=\"182\" width=\"400\" class=\"image break\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"acd3e92aa6g4j\">Windows资源管理器中存在第三方组件，导致explorer.exe进程异常。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7048578761/p519875.png\" alt=\"{5A3CAFAE-1375-4B2F-81FA-21F5BBFB3F21}_20200527170226.jpg\" height=\"353\" width=\"500\" class=\"image break\"><h2 id=\"AywdZ\">解决方案</h2><ol id=\"acd3e936a6z92\"><li id=\"acd3e937a6vk7\"><p id=\"acd3e938a6g6n\">下载<a class=\"\" target=\"_blank\" href=\"https://docs.microsoft.com/en-us/sysinternals/downloads/autoruns\">Autoruns工具</a>，并根据提示安装Autoruns工具。 \n </p><div type=\"note\" id=\"acd3e939a6f88\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"acd41030a6m5n\" class=\"p\">Autoruns工具还可以用于分析explorer.exe进程占用CPU或者内存高的情况。\n</p></div></div></li><li id=\"acd41032a6h9v\"><p id=\"acd41033a62zn\">打开Autoruns工具，单击<b>Explorer</b>，将加载在Windows资源管理器中的第三方组件取消勾选。 </p><img id=\"3ba69e30d1hbj\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2829050861/p615315.png\" alt=\"image\" placement=\"break\" width=\"700\" class=\"image break\"></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-windows-operating-system-of-an-instance-cannot-be-activated-due-to-corrupted-instance-components", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows系统组件损坏导致系统激活失败如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows系统组件损坏导致系统激活失败如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-06 10:05:45</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"394c6dc0b8mo1\"><p data-tag=\"shortdesc\" id=\"394f53f7b8ccj\" class=\"shortdesc\">本文介绍Windows系统组件损坏导致系统激活失败的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"394f53f8b8ojm\">Windows系统启动后，桌面背景为黑色，右下角出现“【此Windows副本不是正版】激活失败”提示。参考<a class=\"\" href=\"/zh/ecs/how-to-use-the-kms-domain-name-to-activate-a-windows-instance-in-a-vpc\">如何使用KMS域名激活VPC网络中的Windows实例</a>步骤进行手工激活时，出现如下报错。</p><pre data-tag=\"codeblock\" id=\"394c6dc1b8okq\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>在运行Microsoft Windows 非核心版本的计算机上，运行\"lui.exe 0x2a 0x80070003\"以显示错误文本。\n错误： 0x80070003</code></pre><p id=\"394f53f9b8ynf\">具体报错如下图所示。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0030050861/p518401.png\" alt=\"6.png\" width=\"600\" class=\"image break\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"394f53fbb82m7\">Windows系统的ECS实例组件损坏，导致系统激活失败。</p><h2 id=\"AywdZ\">解决方案</h2><ol id=\"394f53fcb88lf\"><li id=\"394f7b00b88lr\"><p id=\"394f7b01b8wh6\">远程连接ECS实例。</p><p id=\"9a48eb80b8bwi\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"962188f1b8dyj\"><p id=\"962188f0b829s\">进入CMD命令窗口，执行如下命令，尝试修复Windows组件。 </p><pre data-tag=\"codeblock\" id=\"394c6dc2b8k66\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sfc /scannow</code></pre><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9480667761/p518402.png\" alt=\"11.png\" width=\"500\" class=\"image break\"></li><li id=\"394f7b03b8k4i\"><p id=\"394f7b04b8raq\">如果修复失败，且创建了快照，可尝试通过<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/roll-back-a-disk-by-using-a-snapshot\">使用快照回滚云盘</a>方式将系统回滚到正常激活状态。 </p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-a-service-cannot-be-manually-started-on-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows实例服务列表中无法手动启动服务，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例服务列表中无法手动启动服务，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-06 10:04:02</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"b5090590c1y2s\"><p data-tag=\"shortdesc\" id=\"b50f2013c1d96\" class=\"shortdesc\"><span style=\"color:rgb(24, 24, 24)\">本文介绍</span>Windows实例服务列表中无法手动启动服务<span style=\"color:rgb(24, 24, 24)\">的问题原因及解决方案。</span></p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"FzkRT\">问题描述</h2><p id=\"b50f2014c159d\">在Windows系统实例中，在服务器服务列表页面中无法手动启动指定服务，同时在命令行页面中，执行<code data-tag=\"codeph\" class=\"codeph\">net start</code>命令启动指定服务后，系统提示“服务正在启动或者停止中，请稍后片刻再试一次”。</p><h2 id=\"CeCnY\">解决方案</h2><ol id=\"b50f2015c1mis\"><li id=\"b50f2016c1to5\"><p id=\"b50f2017c1xas\">远程连接Windows实例。</p><p id=\"4e46cca0c1z7j\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"45056a21c1h82\"><p id=\"45056a20c1w61\">单击<b>开始</b>&gt;<b>运行</b>，输入<b>services.msc</b>，然后单击<b>确定</b>，进入服务列表页面。</p></li><li id=\"b50f4720c13q8\"><p id=\"b50f4721c1b74\">定位到指定服务，获取并记录服务名称。</p></li><li id=\"b50f4722c14e3\"><p id=\"b50f4723c1f8q\">进入CMD命令行页面，执行以下命令，获取服务的PID。 </p><pre data-tag=\"codeblock\" id=\"b5090591c1vuu\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sc queryex &lt;$Service_Name&gt;</code></pre><div type=\"note\" id=\"b50f4724c1szc\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"b50f4725c1kve\" class=\"p\">&lt;$Service_Name&gt;为上一步获取的服务名称。\n</p></div></div></li><li id=\"b50f4727c1ley\"><p id=\"b50f4728c1w87\">执行以下命令，终止该服务的进程。 </p><pre data-tag=\"codeblock\" id=\"b5090592c1n0y\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>taskkill /f /pid &lt;$PID&gt;</code></pre><div type=\"note\" id=\"b50f4729c1b6u\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"b50f472ac175p\" class=\"p\">&lt;$PID&gt;为上一步获取的PID。\n</p></div></div></li><li id=\"d7107200d44eb\"><p id=\"db0cf400d49bf\">重新启动指定服务。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-dotnet-framework-3-5-1-or-a-language-pack-cannot-be-installed-on-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows实例无法安装.NET Framework 3.5.1或语言包如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例无法安装.NET Framework 3.5.1或语言包如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-03 13:16:57</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main role=\"main\"><article role=\"article\" aria-labelledby=\"title_0q7_495_dr7\"><div class=\"body conbody\" data-tag=\"conbody\" id=\"conbody-02x-6e4-g1h\"><p id=\"shortdesc-s57-yh1-igq\" class=\"shortdesc\" data-tag=\"shortdesc\">本文介绍如何通过将更新源从WSUS（Windows Server Update Services）切换为Windows Update，解决无法安装.NET Framework 3.5.1或语言包的问题。</p><section class=\"section\" data-tag=\"section\" id=\"section-lx0-oqu-q9s\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-csu-pum-j1m\">问题描述</h2><ul class=\"ul\" data-tag=\"ul\" id=\"ul-5sj-8rf-snr\"><li class=\"li\" data-tag=\"li\" id=\"li-cxr-wxp-y02\">问题一：.NET Framework报错找不到源文件 <p class=\"p\" data-tag=\"p\" id=\"p-nwl-y2e-vjj\">在Windows Server 2012 R2、Windows Server 2016或Windows Server 2019系统中安装.NET Framework 3.5.1时，报如下图所示的错误。</p><img class=\"image break\" data-tag=\"image\" id=\"image-5g2-8ga-5k8\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4615886761/p45359.png\" width=\"600\" alt=\"找不到源文件\"></li><li class=\"li\" data-tag=\"li\" id=\"li-mx4-oa2-yxi\">问题二：无法安装语言包 <p class=\"p\" data-tag=\"p\" id=\"p-1yb-jhn-8xt\">在控制面板切换语言或者Windows Update中查询语言选项时，无法选择或者安装语言包。</p><img class=\"image break\" data-tag=\"image\" id=\"image-tx2-rgd-kzc\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4615886761/p45360.png\" width=\"600\" alt=\"无法安装语言包\"></li></ul></section><section class=\"section\" data-tag=\"section\" id=\"section-9nj-lea-umj\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-0n5-cuw-5g9\">问题原因</h2><p class=\"p\" data-tag=\"p\" id=\"p-aq8-w8i-rxr\">由于Windows实例默认采用WSUS获取更新源，导致.NET Framework和语言包安装文件缺失，所以上报找不到源文件或者无法安装语言包的相关错误。</p></section><section class=\"section\" data-tag=\"section\" id=\"section-qak-omw-4gg\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-c5e-w1w-3nt\">解决方案</h2><ol class=\"ol\" data-tag=\"ol\" id=\"ol-7b8-ddv-mej\"><li class=\"li\" data-tag=\"li\" id=\"li-aoa-kn4-fus\">远程连接Windows实例。<p class=\"p\" data-tag=\"p\" id=\"p-p3b-7iz-i7l\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key#task-2370976\">通过密码或密钥认证登录Windows实例</a>。</p></li><li class=\"li\" data-tag=\"li\" id=\"li-2mz-k2n-p3z\">打开CMD命令行窗口。</li><li class=\"li\" data-tag=\"li\" id=\"li-mz5-oiy-3r8\">输入<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-cpy-o5o-nho\">powershell</code>进入PowerShell交互界面。</li><li class=\"li\" data-tag=\"li\" id=\"li-z4t-97c-min\">运行以下命令，修改注册表将更新源设置为Windows Update。 <pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-okj-psd-3xs\"><code>Set-ItemProperty -Path 'HKLM:\\SOFTWARE\\Policies\\Microsoft\\Windows\\WindowsUpdate\\AU' -Name UseWUServer -Value 0\nRestart-Service -Name wuauserv</code></pre></li><li class=\"li\" data-tag=\"li\" id=\"li-ld2-xp7-wm2\">运行以下命令，通过PowerShell安装.NET Framework。 <pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-5rm-lz1-h0w\"><code>Install-WindowsFeature Net-Framework-Core</code></pre><div class=\"note note note-note\" data-tag=\"note\" id=\"note-qc3-uif-ejd\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note\"></i></div><div class=\"note-content\"><strong>说明</strong> 您也可以继续在Server Manager中安装.NET Framework，或者在控制面板中安装语言包。</div></div></li><li class=\"li\" data-tag=\"li\" id=\"li-v98-lrj-51j\"><strong>可选：</strong>运行以下命令，将更新源重新设置为WSUS。 <pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-f4g-ra6-ge2\"><code>Set-ItemProperty -Path 'HKLM:\\SOFTWARE\\Policies\\Microsoft\\Windows\\WindowsUpdate\\AU' -Name UseWUServer -Value 1\nRestart-Service -Name wuauserv</code></pre></li></ol><div class=\"note note note-note\" data-tag=\"note\" id=\"note-3fc-nnm-a4h\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note\"></i></div><div class=\"note-content\"><strong>说明</strong> <ul class=\"ul\" data-tag=\"ul\" id=\"ul-t7j-2zv-jci\"><li class=\"li\" data-tag=\"li\" id=\"li-pi9-muv-iks\">Windows Server 2012与Windows Server 2016内存占用较高，安装其他应用程序使内存消耗更高，可能会导致内存不足引起安装.NET Framework失败，因此建议增加物理内存，如果是I/O优化实例，可以考虑<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-configure-the-virtual-memory-of-a-windows-instance#topic-2268778\">开启系统虚拟内存</a>。</li><li class=\"li\" data-tag=\"li\" id=\"li-u9p-rqf-zaa\">如果安装.NET Framework报错<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-xmp-pww-urt\">0x800f081f</code>，请检查公网网络是否正常。如果正常，可能是连接Windows Update服务器链路不稳定导致更新失败，建议更换时间段重试。</li></ul></div></div></section></div></article></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-errors-are-reported-when-i-update-a-windows-operating-system", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>更新Windows系统时提示错误，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>更新Windows系统时提示错误，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-20 16:38:31</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"116c0c80b1pgm\"><p data-tag=\"shortdesc\" id=\"116e7d87b1glu\" class=\"shortdesc\">本文介绍更新Windows系统时提示错误的原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h1 id=\"a4fe2450dfhwi\">提示“8024400A\"和\"80072EE2”错误</h1><h3 id=\"a2410020dfqg6\"><b>问题描述</b></h3><p id=\"116e7d88b17gp\">更新Windows系统时提示以下信息。</p><pre data-tag=\"codeblock\" id=\"116c0c81b13d0\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>8024400A\n80072EE2</code></pre><h3 id=\"tayMx\"><b>问题原因</b></h3><p id=\"116e7d89b1978\">在更新时遇到错误代码1：<code data-tag=\"code\" class=\"code\">8024400A</code> ，错误代码2：<code data-tag=\"code\" class=\"code\">80072EE2</code> ，这两个报错导致不能更新。可能原因如下：</p><ul id=\"116e7d8ab1vlr\"><li id=\"116e7d8bb1nri\"><p id=\"116e7d8cb1q8a\">第一个报错是由于更新服务器请求数过多，服务器访问繁忙导致。</p></li><li id=\"116e7d8db1bno\"><p id=\"116e7d8eb171r\">第二个报错是Windows更新服务器可能遇到异常多的更新请求。</p></li></ul><h3 id=\"EFTFF\"><b>解决方案</b></h3><p id=\"116ea49ab1pb8\">请您参考以下场景进行解决。</p><h4 data-tag=\"h3\" id=\"116ea49bb1zkz\" class=\"h3\"><b>针对</b>“8024400A\"<b>错误的</b>解决方案</h4><p id=\"116ea49cb1o77\">您可以尝试稍后再进行更新。</p><h4 data-tag=\"h3\" id=\"116ea49db1tax\" class=\"h3\"><b>针对</b>\"80072EE2”<b>错误的</b>解决方案</h4><p id=\"116ea49eb1zft\">您可以参考以下步骤操作。</p><ol id=\"116ea49fb1uy6\"><li id=\"116ea4a0b1bpi\"><p id=\"116ea4a1b1wdh\">关闭Windows更新服务。</p></li><li id=\"116ea4a2b196f\"><p id=\"116ecba0b13j2\">删除临时更新文件。</p></li><li id=\"116ecba1b1iia\"><p id=\"116ecba2b1zax\">打开更新服务，再次尝试更新。</p></li></ol><p id=\"d1527bb0b1mha\">更多信息，请参见<a class=\"\" target=\"_blank\" href=\"http://windows.microsoft.com/zh-cn/windows/windows-update-error-80070002#1TC=windows-7\">Windows 更新常见问题</a>。</p><h1 data-spm-anchor-id=\"a2c4g.41037.0.i1.1b2a5fcbDiPdbH\" jc=\"start\" id=\"bda50640dfkk1\" style=\"text-align:start\">提示“80070008或8007000e”错误</h1><h3 id=\"ba20e890dfjzz\"><b>问题描述</b></h3><p id=\"f47551b0b8fp5\">更新Windows系统时提示“80070008或8007000e”错误。以下几种为该问题常见的错误代码：</p><ul id=\"1f6c3361b882a\"><li id=\"1f6c3362b8k3i\"><p id=\"1f6c3363b8h01\">WindowsUpdate_80070008</p></li><li id=\"1f6c3364b8cmz\"><p id=\"1f6c3365b8w9g\">0x80070008</p></li><li id=\"1f6c3366b85c4\"><p id=\"1f6c3367b8g2b\">WindowsUpdate_8007000e</p></li><li id=\"1f6c3368b82ub\"><p id=\"1f6c3369b8gwl\">0x8007000e</p></li></ul><h3 id=\"f47551b1b87ap\"><b>问题原因</b></h3><p id=\"53f393e0b8xf2\">如果计算机在安装更新时内存耗尽，则可能会发生这些错误。</p><h3 id=\"AywdZ\"><b>解决方案</b></h3><p id=\"f47551b2b8aql\">更新Windows系统时提示“80070008或8007000e”错误，通常可以通过运行<a class=\"\" target=\"_blank\" href=\"http://go.microsoft.com/?linkid=9830262\">Windows 更新疑难解答</a>来修复，该工具可以自动查找并解决一些常见的Windows更新问题。</p><p id=\"f47551b3b8hmk\">如果Windows更新疑难解答无法修复该问题，请尝试以下操作。</p><ol id=\"f47551b4b8r0h\"><li id=\"f47551b5b8yqm\"><p id=\"f47551b6b8nq7\">关闭所有程序（包括后台中运行的程序），例如防火墙、反间谍软件、Web加速器、Internet安全或防病毒程序或者代理服务器，然后再次更新Windows系统。</p></li><li id=\"f47551b7b8xsz\"><p id=\"f47551b8b80zx\">关闭了防火墙、防病毒程序或其他安全程序，更新安装完成后请立刻打开这些程序。也可以重新启动关闭的其他任何程序。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/server-manager-is-collecting-inventory-data-the-wizard-will-be-available-after-data-collection-finishes", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows实例在添加角色和功能时提示“服务器管理器正在收集清单数据。在数据收集完成后，将可以使用向导”，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例在添加角色和功能时提示“服务器管理器正在收集清单数据。在数据收集完成后，将可以使用向导”，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-29 10:27:57</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"f62fd680b1cjc\"><p data-tag=\"shortdesc\" id=\"f63506a0b13tw\" class=\"shortdesc\">本文介绍Windows实例在添加角色和功能时有提示信息的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"f63506a1b1yzv\">问题描述</h2><p id=\"f63506a2b1zfn\">Windows Server 2012实例在服务器管理器里面添加角色和功能时一直提示以下信息。</p><pre data-tag=\"codeblock\" id=\"f62fd681b18pv\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>服务器管理器正在收集清单数据。在数据收集完成后，将可以使用向导</code></pre><h2 id=\"f6352db0b1r76\">问题原因</h2><p id=\"f6352db1b1yzk\">系统插件WMI（Windows Management Instrumentation）有问题，需要重置。</p><h2 id=\"f6352db2b1wlx\">解决方案</h2><ol id=\"64c4c9f2b1qh5\"><li id=\"64c4c9f0b1023\"><p id=\"631ebb11b17hp\">远程连接Windows实例。</p><p id=\"6e5f7000b1lf4\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"893036d1b1qi4\"><p id=\"8db74590b1bhq\">打开CMD命令行窗口。</p></li><li id=\"f9507011b1700\"><p id=\"f6357bd2b1w34\">在CMD命令行中输入以下命令行，重置WMI。</p><div type=\"important\" id=\"0d5a4a40b125e\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"0ecaa320b1fac\">以下操作有数据丢失风险，请务必先<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建快照</a>备份数据后再操作。</p></div></div><pre id=\"5kfxvc\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sc config winmgmt start= disabled\nnet stop winmgmt /y\n%systemdrive%\ncd %windir%\\system32\\wbem\nren repository repository-backup\nfor /f %s in ('dir /b *.dll') do regsvr32 /s %s\nsc config winmgmt start= Auto\nnet start winmgmt\ndir /b *.mof *.mfl | findstr /v /i uninstall &gt; moflist.txt &amp; for /F %s in (moflist.txt) do mofcomp %s</code></pre></li></ol><p id=\"1e658a70b10bi\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/there-was-a-0-update-or-install-windows-instance-role-x80073712-error-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows实例更新或安装角色时出现“0x80073712（组件存储已损坏）”错误，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例更新或安装角色时出现“0x80073712（组件存储已损坏）”错误，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-27 16:53:05</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"c1dcaff0b1rm2\"><p data-tag=\"shortdesc\" id=\"c1e05978b1qmt\" class=\"shortdesc\">本文介绍Windows实例更新或安装角色时出现“0x80073712（组件存储已损坏）”错误的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"39125539\">问题描述</h2><p id=\"c1e05979b15vx\">在Windows Server 2012系统的实例中安装更新的时候，出现“0x80073712”错误。使用服务管理器安装新角色的时候，如下图所示，出现“0x80073712（组件存储已损坏）”错误。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2818886761/p518993.png\" width=\"500\" class=\"image break\"><h2 id=\"hYhtD\">问题原因</h2><p id=\"c1e0597cb16bg\">该错误一般是由于Windows组件存储不一致问题导致的。</p><h2 id=\"raDDd\">解决方案</h2><p id=\"c1e0597eb1c12\">可以尝试通过如下方式排查分析。</p><ol id=\"892237a0b1qb6\"><li id=\"892237a1b16ge\"><p id=\"892237a2b1bj6\">远程连接Windows实例。</p><p id=\"892237a3b1qku\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"892237a4b1ocv\"><p id=\"892237a5b1sz1\">打开CMD命令行窗口。</p></li><li id=\"c1e08081b1mgt\"><p id=\"c1e08082b1tas\">在CMD命令行中输入以下命令，且在每项命令后按<b>Enter</b>键。 </p><pre data-tag=\"codeblock\" id=\"c1dcaff1b1gyq\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>DISM.exe /Online /Cleanup-image /Scanhealth\nDISM.exe /Online /Cleanup-image /Restorehealth</code></pre><p id=\"c1e08083b1u29\"> <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2818886761/p518994.png\" width=\"500\" class=\"image break\"></p><div type=\"note\" id=\"c1e08084b1sdp\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"c1e08085b1bry\" class=\"p\"> 根据系统环境不同，该操作可能会比较耗时（10分钟之内）。\n</p></div></div></li><li id=\"c1e08087b1m2k\"><p id=\"c1e08088b1kji\">再次运行Windows更新或安装所需的相关角色服务。</p></li><li id=\"c1e0808bb1lpu\"><p id=\"c1e0808cb19mw\">如果仍然失败，请参考<a class=\"\" href=\"/zh/ecs/support/what-do-i-do-if-windows-updates-cannot-be-installed-on-an-instance\">Windows Update补丁更新失败的处理</a>进行处理。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-environment-variables-that-are-configured-for-a-windows-server-instance-do-not-take-effect", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows Server配置环境变量不生效如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows Server配置环境变量不生效如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-29 10:23:14</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"1cb35c50b88w6\"><p data-tag=\"shortdesc\" id=\"1cb8b387b85ps\" class=\"shortdesc\">本文介绍Windows Server配置环境变量不生效的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"1cb8da90b8seg\">问题描述</h2><p id=\"1cb8da91b80ry\">Windows Server实例配置在PATH中的环境变量不生效，具体有以下特征：</p><ul id=\"1cb8da92b8sh2\"><li id=\"1cb8da93b84l2\"><p id=\"1cb8da94b878z\">在cmd中执行命令<code data-tag=\"code\" class=\"code\">ping</code><span style=\"color:rgb(24, 24, 24)\">、</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">ipconfig</span></code>提示“不是内部或外部命令，也不是可运行的程序或批处理文件”。</p></li><li id=\"1cb8da97b8d39\"><p id=\"1cb8da98b84av\">检查PATH环境变量和正常主机无差异。</p></li><li id=\"1cb901a0b8sxl\"><p id=\"1cb901a1b8vto\">在<span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">C:\\Windows\\System32</span>目录中查看PING.EXE等文件都存在。</p></li><li id=\"1cb901a4b87oz\"><p id=\"1cb901a5b8ue6\">实际测试中发现在cmd中命令写成PING.EXE可以执行，去掉扩展名就报错。</p></li></ul><h2 id=\"1cb901a7b8p2k\">问题原因</h2><p id=\"1cb901a8b88qv\">从问题现象看是和扩展名有关系，正常情况不输入扩展名可以执行是因为系统中有PATHEXT环境变量，这里面列出的扩展名在cmd中执行的时候就不用再写扩展名。检查PATHEXT变量，缺少了.EXE扩展名。</p><h2 id=\"1cb901a9b8udb\">解决方案</h2><p id=\"1cb928b9b81vw\">请您参照以下步骤进行操作。</p><ol id=\"1cb928bab8wvy\"><li id=\"1cb94fc0b80ec\"><p id=\"1cb94fc1b86w6\">远程连接Windows实例。</p><p id=\"2ffde8b0b878z\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"2aa5ce51b8wlr\"><p id=\"2aa5ce50b8osu\">右键单击<b>计算机</b>，选择<b>属性</b>，然后再单击<b>高级系统设置。</b></p></li><li id=\"1cb94fc2b8ikx\"><p id=\"1cb94fc3b8upi\">单击打开<b>环境变量</b>，在<b>系统变量</b>下的<b>PATHEXT</b>变量值中添加<span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">.EXE</span>。</p><div type=\"note\" id=\"53914510b8jav\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"5569ae90b8uba\">修改环境变量后，需要重新打开cmd才生效。</p></div></div><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1451277761/p519797.png\" width=\"600\" class=\"image break\"></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-8000ffff-windows-update-encountered-an-unknown-error-error-message-appears-when-i-install-windows-updates-on-a-windows-server-2008-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows 2008实例更新补丁出现“8000FFFFwindows update 遇到未知的错误”报错如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows 2008实例更新补丁出现“8000FFFFwindows update 遇到未知的错误”报错如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-28 09:42:58</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"a5bf9b1075743\"><p data-tag=\"shortdesc\" id=\"a5c7634175z2e\" class=\"shortdesc\">本文介绍Windows 2008实例更新补丁出现“8000FFFFwindows update 遇到未知的错误”的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"sQcmN\">问题描述</h2><p id=\"a5c78a51751i3\">Windows 2008实例更新补丁时出现“8000FFFFwindows update 遇到未知的错误”报错，如下图所示。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5370487761/p518197.png\" class=\"image break\"><h2 id=\"rAsFx\">问题原因</h2><p id=\"a5c78a5375f0a\">由于系统的C盘没有设置Users权限，导致系统无法正常安装更新的补丁。</p><h2 id=\"SwiET\">解决方案</h2><h3 data-tag=\"h3\" id=\"a5c78a5575ygb\" class=\"h3\"><b>方案一</b></h3><ol id=\"a5c78a5675x3m\"><li id=\"a5c78a57755sm\"><p id=\"a5c78a58750z1\">远程连接Windows实例。</p><p id=\"a33806d0b9b9g\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"a5c78a5975exs\"><p id=\"a5c78a5a751hi\">进入<b>我的电脑</b>，右键单击C盘，单击<b data-tag=\"uicontrol\" id=\"dd965930b93q1\" class=\"uicontrol\">属性</b><b> </b>&gt; <b data-tag=\"uicontrol\" id=\"df9f96b0b962g\" class=\"uicontrol\">安全</b><b> </b>&gt; <b data-tag=\"uicontrol\" id=\"e14382b0b9a74\" class=\"uicontrol\">编辑</b><b> </b>&gt; <b data-tag=\"uicontrol\" id=\"e29cf830b9upf\" class=\"uicontrol\">添加</b><b> </b>&gt; <b data-tag=\"uicontrol\" id=\"e3f2c430b9btn\" class=\"uicontrol\">高级</b><b> </b>&gt; <b data-tag=\"uicontrol\" id=\"e54b0130b91d5\" class=\"uicontrol\">立即查找</b>，选择<b data-tag=\"uicontrol\" id=\"e6c56c30b91ay\" class=\"uicontrol\">Users</b>，赋予<b data-tag=\"uicontrol\" id=\"edea0930b95jp\" class=\"uicontrol\">读取和执行</b>、<b data-tag=\"uicontrol\" id=\"f12202b0b9vks\" class=\"uicontrol\">列出文件夹目录</b>和<b data-tag=\"uicontrol\" id=\"f40aa3b0b9x3m\" class=\"uicontrol\">读取</b>的Users权限，然后单击<b data-tag=\"uicontrol\" id=\"0370e670b9ner\" class=\"uicontrol\">确定</b>。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5370487761/p518198.png\" class=\"image break\"></p></li><li id=\"a5c78a5b75dwk\"><p id=\"a5c7b16075z2o\">重新更新补丁。</p></li><li id=\"a5c7b161755i6\"><p id=\"a5c7b16275zwi\">删除已添加的Users权限。</p><p id=\"eca14aa0b9clo\">更新补丁完成后，考虑系统的安全性，请删除本方案添加的Users权限。</p></li></ol><h3 data-tag=\"h3\" id=\"a5c7b16375b5p\" class=\"h3\"><b>方案二</b></h3><p id=\"a5c7b164759h5\">如果方案一无法解决问题，请参考以下操作步骤。</p><ol id=\"a5c7b16575zq1\"><li id=\"a5c7b16675t4q\"><p id=\"a5c7b16775vf8\">远程连接Windows实例。</p><p id=\"20061992b9ogq\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"a5c7b16875auf\"><p id=\"a5c7b16975e8s\">右键单击<b data-tag=\"uicontrol\" id=\"2378d220b93bj\" class=\"uicontrol\">开始</b><b> </b>&gt; <b data-tag=\"uicontrol\" id=\"24d247a0b9w9i\" class=\"uicontrol\">运行</b>，输入<code data-tag=\"code\" class=\"code\">cmd</code>，进入命令行窗口。</p></li><li id=\"a5c7b16a75ur7\"><p id=\"a5c7b16b75ge0\">依次执行以下命令，停止系统的自动更新和BITS服务。 </p><pre id=\"a5c2f670756dn\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>net stop wuauserv\nnet stop bits</code></pre><p id=\"a5c7b16c75man\"> 系统显示类似如下。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5370487761/p518199.png\" class=\"image break\"></li><li id=\"a5c7b16d75428\"><p id=\"a5c7d87075hhl\">删除系统中的<code data-tag=\"code\" class=\"code\">C:\\Windows\\SoftwareDistribution</code>文件夹。</p></li><li id=\"a5c7d871756ac\"><p id=\"a5c7d87275k88\">再次进入命令行窗口，依次执行以下命令，启动自动更新和BITS服务。 \n</p><div type=\"note\" id=\"a5c7d87375nuf\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"a5c7d87475wbd\">自动更新和BITS服务运行后，系统会自动创建<code data-tag=\"code\" class=\"code\">C:\\Windows\\SoftwareDistribution</code>文件夹。 </p></div></div><pre id=\"a5c2f67175m5q\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>net start wuauserv\nnet start bits</code></pre></li><li id=\"a5c7d87775qgu\"><p id=\"a5c7d87875zld\">执行以下命令，停止Cryptographic服务。 </p><pre id=\"a5c2f672753a6\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>net stop cryptsvc</code></pre></li><li id=\"a5c7d87a75u88\"><p id=\"a5c7d87b758x7\">将<code data-tag=\"code\" class=\"code\">C:\\windows\\System32\\catroot2</code>文件夹重命名为<code data-tag=\"code\" class=\"code\">C:\\windows\\System32\\catroot2.bak</code>。</p></li><li id=\"a5c7d87c752en\"><p id=\"a5c7d87d758nj\">当<code data-tag=\"code\" class=\"code\">C:\\Windows\\SoftwareDistribution</code>文件夹生成后，做自动更新检测。</p></li><li id=\"a5c7d87e7514u\"><p id=\"a5c7d87f75akd\">再次进入命令行窗口，执行以下命令。 </p><pre id=\"a5c2f67375ngr\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>wuauclt.exe /resetauthorization /detectnow</code></pre></li><li id=\"a5c7ff8075cx7\"><p id=\"a5c7ff8175hwx\">约等待15分钟后，确认系统已检测到更新。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-windows-operating-system-of-an-instance-cannot-be-activated-because-the-file-type-of-slmgr-vbs-is-changed", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>slmgr.vbs文件类型变化导致无法激活Windows系统如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>slmgr.vbs文件类型变化导致无法激活Windows系统如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-28 09:42:04</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"c1a219a0b9tr7\"><p data-tag=\"shortdesc\" id=\"c1a65f60b9hhs\" class=\"shortdesc\">本文介绍slmgr.vbs文件类型变化导致无法激活Windows系统问题的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"xxMYM\" data-spm-anchor-id=\"a2c9r.12641768.0.i0.69e80KZy0KZyws\">问题描述</h2><p id=\"c1a65f61b9a7s\">Windows系统中无法运行slmgr.vbs文件，且slmgr.vbs文件类型发生改变，由VBScript改变为VBS，导致无法激活系统。如下图所示，右侧的文件类型为正常情况。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9968608761/p519716.png\" width=\"600\" class=\"image break\"><h2 id=\"xSmsZ\">问题原因</h2><p id=\"c1a65f64b9w4h\"> 一般是由于使用TXT文本编辑器编辑过<code data-tag=\"codeph\" class=\"codeph\">.vbs</code>后缀文件导致出现该问题。</p><h2 id=\"DKdxG\">解决方案</h2><ol id=\"c1a65f66b9e47\"><li id=\"c1a65f67b9x6h\"><p id=\"c1a65f68b9km9\">远程连接Windows实例。</p><p id=\"a33806d0b9b9g\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"ac560601b9z12\"><p id=\"ac560600b9f6l\">单击键盘的<b>Win</b> + <b>R</b>键，输入<b>regedit</b>，然后单击<b>确定</b>，打开注册表编辑器。</p></li><li id=\"c1a65f69b98kh\"><p id=\"c1a65f6ab90pt\">查找并单击 <b>.vbs</b>，右键单击<b>默认</b>，再单击<b>修改</b>，将txtfile文件类型修改为VBSFile文件类型。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9968608761/p519717.png\" width=\"600\" class=\"image break\"></p></li></ol><p id=\"c1a65f6bb9v54\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-instance-of-terminal-server-configuration-defect-in-can-t-remote-login", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows实例的终端服务器配置异常导致无法远程登录如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例的终端服务器配置异常导致无法远程登录如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-27 14:02:33</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"ae1cb3b0b9drt\"><p data-tag=\"shortdesc\" id=\"ae228012b988u\" class=\"shortdesc\">本文介绍Windows实例的终端服务器配置异常导致无法远程登录的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"ae228013b9ffy\">在使用远程桌面登录Windows实例时，出现如下图所示的错误，无法远程登录实例。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6270487761/p518737.png\" alt=\"11.png\" class=\"image break\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"ae228016b9xpq\">该问题一般是由于在服务器上安装配置了终端服务器，但是没有配置有效的访问授权。</p><h2 id=\"AywdZ\">解决方案</h2><h3 data-tag=\"h3\" id=\"ae22a720b9yz6\" class=\"h3\"><b>方案一</b></h3><p id=\"ae22a721b9kd1\">注册有效的终端服务器访问授权，并进行相应的访问授权配置。相关配置方法请参见<a class=\"\" target=\"_blank\" href=\"https://activate.microsoft.com/Faq.aspx?locale=zh-CN&amp;showNav=true\">终端服务器授权</a>。</p><h3 data-tag=\"h3\" id=\"ae22a723b9sm9\" class=\"h3\"><b>方案二</b></h3><p id=\"ae22a724b9852\">删除终端服务器角色配置，恢复默认的两个远程访问授权。本文以Windows Server 2008系统为例进行示例操作。</p><div type=\"note\" id=\"31d3a810b9pgo\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"335761e0b9671\">微软默认为Windows系统提供了2个免费的远程桌面访问授权，即同时允许最多两个用户同时远程访问服务器。</p></div></div><ol id=\"ae22ce32b9es9\"><li id=\"ae22ce33b9czt\"><p id=\"ae22ce34b910c\">依次选择<b>开始</b> &gt; <b>管理工具</b> &gt; <b>服务器管理器</b>，打开服务管理器。</p></li><li id=\"ae22ce35b9kp8\"><p id=\"ae22ce36b9sny\">右键单击<b>服务器管理</b>，单击<b>删除角色</b>。</p></li><li id=\"19ddedb1b91xx\"><p id=\"19ddedb0b9woi\">选择<b>服务器角色</b>后，取消选中<b>远程桌面服务</b>，然后单击<b>下一步</b>，删除即可。 </p><img id=\"043206d0b9koq\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7270487761/p576816.png\" alt=\"image\" placement=\"break\" width=\"600\" class=\"image break\"></li><li id=\"27e6ea60b9suq\"><p id=\"2a6f1be0b9g4k\">重启实例使配置生效。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-network-interfaces-are-missing-from-a-window-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>登录Windows实例内部发现网卡丢失如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>登录Windows实例内部发现网卡丢失如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-28 09:41:34</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"5772cd70b9duk\"><p data-tag=\"shortdesc\" id=\"5776ec25b9c1c\" class=\"shortdesc\">本文介绍登录Windows实例内部发现网卡丢失的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"5776ec26b99g9\">问题描述</h2><p id=\"5776ec27b9yl1\">Windows实例网络不通，使用VNC连接Windows实例，在更改适配器设置中没有发现对应的网卡。查看设备管理，发现驱动已正常安装，但是在终端中使用<code data-tag=\"codeph\" class=\"codeph\">ipconfig</code>命令查看网卡信息时，存在对应的网卡信息。</p><h2 id=\"5776ec28b9ho5\">解决方案</h2><ol id=\"ef9e0882b912p\"><li id=\"ef9e0880b9ck8\"><p id=\"5776ec29b9av7\">远程连接Windows实例。</p><p id=\"a33806d0b9b9g\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"f0c9b741b9wtk\"><p id=\"f0c9b740b99nh\">执行以下命令，获取对应的网卡名称、网卡对应的IPv4地址及子网掩码。</p><pre id=\"d3blhu\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ipconfig</code></pre></li><li id=\"fd540331b9nbf\"><p id=\"edadf850b9puk\">执行以下命令，手动添加网卡。</p><pre height=\"43.20138931274414\" id=\"ku7cqd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netsh interface ip set address name=\"&lt;$Name&gt;\" source=static addr=&lt;$IP&gt; mask=&lt;$Mask&gt;</code></pre><div type=\"note\" id=\"3abe0ef1b9wa4\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"3d012120b97b7\"><li id=\"3d012121b95np\"><p id=\"3d012122b98ig\">&lt;$Name&gt;为<code data-tag=\"codeph\" class=\"codeph\">ipconfig</code>命令显示的网卡名称。</p></li><li id=\"3d012123b9wje\"><p id=\"3d012124b928t\">&lt;$IP&gt;为<code data-tag=\"codeph\" class=\"codeph\">ipconfig</code>命令显示的IPv4地址。</p></li><li id=\"3d012125b90td\"><p id=\"3d012126b9u5v\">&lt;$Mask&gt;为<code data-tag=\"codeph\" class=\"codeph\">ipconfig</code>命令显示的子网掩码。</p></li></ul></div></div></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-ip-address-of-a-windows-instance-is-unexpectedly-modified", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows系统的IP地址被异常修改如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows系统的IP地址被异常修改如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-08 09:50:25</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"2dcafcc0b7op4\"><p data-tag=\"shortdesc\" id=\"2dd07b03b7mjp\" class=\"shortdesc\">本文<span style=\"color:rgb(24, 24, 24)\">介绍Windows系统</span>的IP地址被异常修改的原因及解决方案<span style=\"color:rgb(24, 24, 24)\">。</span></p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"2dd07b04b70ez\">用户发现Windows系统的IP地址被异常修改，例如静态地址变为动态获取地址，或者静态地址被设置为别的IP地址。</p><h2 id=\"4rM4I\">问题原因</h2><p id=\"2dd07b06b77z3\">在某些情况下，可能导致IP地址丢失的原因如下所示。</p><ul id=\"2dd07b07b7y8v\"><li id=\"2dd07b08b7dju\"><p id=\"2dd07b09b7pbd\">杀毒软件或者安全防护软件的影响。</p></li><li id=\"2dd0a210b7rf2\"><p id=\"2dd0a211b7tjo\">人为的误修改操作。</p></li><li id=\"2dd0a212b7ui6\"><p id=\"2dd0a213b7cke\">第三方软件异常修改IP地址配置。</p></li><li id=\"2dd0a214b7uho\"><p id=\"2dd0a215b7j3b\">病毒的影响。</p></li><li id=\"2dd0a216b7f9e\"><p id=\"2dd0a217b7ong\">操作系统注册表损坏。 </p></li></ul><h2 id=\"AywdZ\">解决方案</h2><ol id=\"2dd0a219b7c4r\"><li id=\"2dd0a21ab79u6\"><p id=\"2dd0a21bb7uo7\">Windows系统的IP地址的配置存储在<span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Tcpip\\Parameters\\Interfaces</span>注册表中对应网卡的GUID对应值，因此可以在配置中确认是哪种现象。</p><p id=\"46ae1270b7qi5\"><span data-tag=\"ph\" id=\"ebce2140bcl23\" props=\"china\" data-cond-props=\"china\" class=\"ph\">如下图所示，Interface中的<code data-tag=\"code\" class=\"code\">{7f9fdbaf-2b18-4662-8f7f-0c319faa0192}</code>对应本地的一块虚拟网卡，该网卡配置了静态IP地址为192.X.X.1 , 该网卡没有配置DNS地址，所以NameServer对应值为空。 </span><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4174567761/p518397.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></p></li><li id=\"2dd0c920b7gzm\"><p id=\"2dd0c921b79wu\">为了定位问题原因，可以通过启用组策略的注册表进行访问审核，以及在<span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Tcpip\\Parameters\\Interfaces</span>中添加审核Everyone的SetValue以及Delete行为来定位是哪个应用程序的原因。</p></li><li id=\"2dd0c923b7mfh\"><p id=\"2dd0c924b7na9\">在<span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Tcpip\\Parameters\\Interfaces</span>上右键选择<b>权限</b>，开启审核该键值和其下所有子键值（This key and subkeys）， 添加审核Everyone的SetValue以及Delete行为。<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4174567761/p518398.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></p></li><li id=\"2dd0c926b7rx0\"><p id=\"2dd0c927b7inj\">开启组策略的注册表审核。</p><p id=\"da081660b7dj9\">以管理员身份登录系统，在运行框中输入<b>gpedit.msc</b>，然后单击<b>确定</b>。</p></li><li id=\"2dd0c928b7eu1\"><p id=\"2dd0c929b7ooa\">依次选择<b>计算机配置</b> &gt; <b>Windows设置</b> &gt; <b>安全设置</b> &gt; <b>高级审核策略配置</b> &gt; <b>系统审核策略 - 本地组策略对象</b> &gt; <b>对象访问</b>。然后右键选择<b>审核注册表</b>，并选中<b>成功</b>和<b>失败</b>。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4174567761/p518399.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></p></li><li id=\"2dd0c92ab705n\"><p id=\"2dd0c92bb71qh\">查看改动注册表的问题。</p><p id=\"dc717540b74ao\">在问题再次发生后，在运行框中输入<b>eventvwr</b>，然后单击<b>确定</b>，打开事件查看器，依次选择<b>Windows 日志</b> &gt; <b>安全</b>，可以发现<b>Microsoft Windows 安全审核</b>存在的修改了注册表值相关日志，根据日志确认问题并解决。<span data-tag=\"ph\" id=\"afea8e70bcgk0\" props=\"china\" data-cond-props=\"china\" class=\"ph\">如下图所示。</span></p><p id=\"df57a540b72po\"> <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4174567761/p518400.png\" width=\"500\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></p></li></ol></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-server-2008-r2-termdd-blue-hold-problems-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows Server 2008 R2出现termdd蓝屏问题，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows Server 2008 R2出现termdd蓝屏问题，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-28 14:03:42</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2328743\"><p id=\"985a63e8e4mlr\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍Windows Server 2008 R2出现<code data-tag=\"code\" class=\"code\">termdd</code>蓝屏问题的原因及解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"a208b900e45nw\" class=\"section\"><h2 id=\"hFixB\" data-spm-anchor-id=\"a2c9r.14518950.0.i2.50a9punrpunrt7\" jc=\"start\" style=\"text-align:start\">问题描述</h2><p id=\"b1b3ccf0e4qrl\">Windows Server 2008 R2在运行过程中出现<code data-tag=\"code\" class=\"code\">termdd</code>（错误代码是<code data-tag=\"code\" class=\"code\">0x000000D1</code>或者其他）蓝屏问题，如下图所示。</p><img id=\"c89059b0e4j41\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0001852861/p641763.png\" alt=\"image..png\" placement=\"break\" width=\"500\" class=\"image break\"><p id=\"4736d5f0e45or\">且Dump信息中显示<code data-tag=\"code\" class=\"code\">termdd.sys（C:\\Windows\\System32\\drivers\\termdd.sys）</code>文件的版本在<code data-tag=\"code\" class=\"code\">6.1.7601.24441</code>以下。</p><img id=\"99db3020e46v5\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0001852861/p645624.png\" alt=\"image..png\" placement=\"break\" class=\"image break\"></section><section id=\"bae2dff0e4s5b\" class=\"section\"><h2 id=\"bae2dff1e4w97\"><b>问题原因</b></h2><p id=\"bc8915e0e46lh\">是系统漏洞导致。微软于2019年05月14日修复了该漏洞，CVE详细信息请参考<a class=\"\" target=\"_blank\" href=\"https://msrc.microsoft.com/update-guide/en-US/vulnerability/CVE-2019-0708?spm=a2c9r.14518950.0.0.50a9punrpunrt7\">CVE-2019-0708</a>。 </p></section><section id=\"c1ba9570e4nbi\" class=\"section\"><h2 id=\"c1ba9571e404v\"><b>解决方案</b></h2><ol id=\"44a99102e4z89\"><li id=\"44a99100e4t4z\"><p id=\"43b0d921e4fth\">更新系统。</p><section id=\"4f6adcc0e4q0j\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"4f6adcc2e4oja\" class=\"section\"><h4 id=\"531b1380e4xv0\" data-spm-anchor-id=\"a2c9r.14518950.0.i5.50a9punrpunrt7\" jc=\"start\" style=\"text-align:start\"><b>Windows自动更新系统</b></h4><p id=\"4f6adcc3e455g\">使用Windows更新，将系统更新至最新。</p><ol id=\"55938d92e4bzf\"><li id=\"55938d93e4abg\"><p jc=\"left\" id=\"55949f00e4js1\" style=\"text-align:left\">远程连接ECS实例。</p><p id=\"55949f01e4vxw\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"f461c230e562k\"><p id=\"f4a50cc0e5y7y\">修改注册表中的WSUS地址。</p><ol id=\"03d54b64e5cql\"><li id=\"03d54b60e5m79\"><p id=\"fb0d85b0e5p4b\">依次选择<b data-tag=\"uicontrol\" id=\"a97bd940e4hw7\" class=\"uicontrol\">开始</b> &gt; <b data-tag=\"uicontrol\" id=\"ab2e4430e4wxd\" class=\"uicontrol\">运行</b> &gt; <b data-tag=\"uicontrol\" id=\"ace6f0b0e4ima\" class=\"uicontrol\">regedit</b>。</p></li><li id=\"03d54b61e5v32\"><p id=\"004dd250e5rh1\">进入<code data-tag=\"code\" class=\"code\">计算机\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Policies\\Microsoft\\Windows\\WindowsUpdate</code>路径，将<code data-tag=\"code\" class=\"code\">WUServer</code>和<code data-tag=\"code\" class=\"code\">WUStatusServer</code>的值修改为</p><p id=\"4418b5e0e5a8b\"><code data-tag=\"code\" class=\"code\">http://update.cloud.aliyuncs.com</code>。</p><img id=\"4bd61070e5x69\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6290662861/p646237.png\" alt=\"image..png\" placement=\"break\" class=\"image break\"></li></ol></li><li id=\"55938d96e47u5\"><p id=\"5594c610e46pj\">依次选择<b data-tag=\"uicontrol\" id=\"f96e5070e5q21\" class=\"uicontrol\">开始</b> &gt; <b data-tag=\"uicontrol\" id=\"f96e5071e5w0v\" class=\"uicontrol\">控制面板</b> &gt; <b data-tag=\"uicontrol\" id=\"f96e5072e5gt7\" class=\"uicontrol\">系统和安全</b> &gt; <b data-tag=\"uicontrol\" id=\"af62c620e46ye\" class=\"uicontrol\">Windows Update</b><b>。</b></p></li><li id=\"55938d98e49vq\"><p jc=\"left\" id=\"5594c611e4ent\" style=\"text-align:left\">扫描更新后，单击<b data-tag=\"uicontrol\" id=\"b4d23910e4igx\" class=\"uicontrol\">安装更新</b>。</p><img id=\"55938d9be451l\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0001852861/p645824.png\" alt=\"image..png\" placement=\"break\" width=\"500\" class=\"image break\"></li><li id=\"55938d9ce4pst\"><p id=\"5594c613e42hi\">更新完成后，重启Windows系统。</p></li></ol></section><section id=\"4f6adcc5e43nf\" class=\"section\"><h4 id=\"591e6200e4xpb\" data-spm-anchor-id=\"a2c9r.14518950.0.i8.50a9punrpunrt7\" jc=\"start\" style=\"text-align:start\"><b>手动更新系统</b></h4><ol id=\"5e1633f2e45py\"><li id=\"5e1633f0e4vo8\"><p jc=\"left\" id=\"5c29cd40e4b6o\" style=\"text-align:left\">远程连接ECS实例。</p><p id=\"5c29cd41e4kf8\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"638fb900e4jm0\"><p id=\"5c29f450e462c\">下载累计安全补丁<a class=\"\" target=\"_blank\" href=\"https://www.catalog.update.microsoft.com/Search.aspx?q=KB4499164\">KB4499164</a>或者仅安全更新补丁<a class=\"\" target=\"_blank\" href=\"https://www.catalog.update.microsoft.com/Search.aspx?q=KB4499175\">KB4499175</a>。</p></li><li id=\"64b489f0e43uj\"><p id=\"5c29f451e4xgw\">双击安装补丁。</p></li><li id=\"fecea740e4tev\"><p id=\"026896e0e4ird\">重启Windows系统。</p></li></ol></section></section></li><li id=\"6cece0e0e486l\"><p id=\"e1885e50e46vb\" data-spm-anchor-id=\"a2c9r.14518950.0.i9.50a9punrpunrt7\" jc=\"start\" style=\"text-align:start\">验证问题是否修复。</p><ul id=\"9ee22f62e4iwy\"><li id=\"9ee22f60e4sjg\"><p id=\"9d018880e46it\">查看已安装的补丁。</p><p id=\"a75b38d0e4diz\">自动更新系统或者手动更新系统后，打开CMD命令行，使用<code data-tag=\"code\" class=\"code\">systeminfo</code>命令查看已安装的补丁，确认系统安装了KB4499164或者KB4499175补丁。</p><img id=\"a79b00f3e4qz6\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6081852861/p645829.png\" alt=\"image..png\" placement=\"break\" width=\"400\" class=\"image break\"></li><li id=\"84bd11e0e4z9u\"><p id=\"81deaa10e4cs7\">查看<code data-tag=\"code\" class=\"code\">termdd.sys</code>文件版本。</p><p id=\"c89514d0e4w29\">确认<code data-tag=\"code\" class=\"code\">termdd.sys（C:\\Windows\\System32\\drivers\\termdd.sys）</code>文件版本是否在<code data-tag=\"code\" class=\"code\">6.1.7601.24441</code>及以上。</p><img id=\"caaea603e4i5s\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0001852861/p645625.png\" alt=\"image..png\" placement=\"break\" width=\"400\" class=\"image break\"></li></ul><p id=\"851882e0e4ajk\">如果确认系统安装了KB4499164或者KB4499175补丁以及<code data-tag=\"code\" class=\"code\">termdd.sys</code>文件版本在<code data-tag=\"code\" class=\"code\">6.1.7601.24441</code>及以上，蓝屏问题解决。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-interface-that-appears-on-your-logon-to-a-windows-instance-is-abnormal", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>远程登录Windows系统后界面显示异常如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>远程登录Windows系统后界面显示异常如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-06 10:04:45</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"1884f190b9duf\"><p data-tag=\"shortdesc\" id=\"188ae500b9k0b\" class=\"shortdesc\">本文介绍远程登录Windows系统后界面显示异常问题的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"ac5cff20bbixr\">Windows界面是开始菜单非系统桌面</h2><h3 id=\"292b1400bcngv\"><b>问题描述</b></h3><p id=\"3166c650bcgm5\">远程登录Windows系统的ECS实例时，默认登录的界面为开始菜单，而不是系统桌面。</p><div type=\"note\" id=\"30b28f61d1v28\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"31014ba0d1li0\">以Windows Server 2012操作系统为例。</p></div></div><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5351908761/p519735.png\" alt=\"20201231115049.jpg\" width=\"600\" class=\"image break\"><h3 id=\"38fd10e0bcqi5\"><b>问题原因</b></h3><p id=\"3e9d0130d1no7\">系统登录或者关闭屏幕上的应用时，转到开始菜单而不是系统桌面。</p><h3 id=\"33665e60d19la\"><b>解决方案</b></h3><ol id=\"41c01ba0bcego\"><li id=\"41c01ba1bc86e\"><p id=\"41c01ba2bcej3\">远程连接Windows系统的ECS实例。</p><p id=\"41c01ba3bc524\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"41c01ba4bc78e\"><p id=\"41c01ba5bckup\">单击键盘的<b>Win</b> + <b>R</b>键，输入<b>regedit</b>，然后单击<b>确定</b>，打开注册表编辑器。</p></li><li id=\"41c01ba6bc4mp\"><p id=\"41c01ba7bcpdj\">在注册表表中找到<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Winlogon\\AlternateShells</code>。</p></li><li id=\"323ff2d1bcfmc\"><p id=\"323ff2d0bcbpv\">双击<b>DefaultShell</b>，然后将默认的数值数据修改为<b>explorer.exe</b>即可。</p></li></ol><h2 id=\"5aed2d50bb0pi\"><b>界面显示黑色只能看到cmd命令行</b></h2><h3 id=\"b3d48900d1c05\">问题描述</h3><p id=\"5aed5465bbvbm\">远程登录Windows系统后显示黑色，只能看到cmd命令行，无法正常进入Windows系统。</p><div type=\"note\" id=\"77dd54e1d133h\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"78222613d1kf9\">以Windows Server 2012操作系统为例。</p></div></div><img id=\"e9fc4bb0d13j0\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2588050861/p615719.png\" alt=\"image\" placement=\"break\" width=\"600\" class=\"image break\"><h3 id=\"b3d48902d14oh\"><b>问题原因</b></h3><p id=\"5aed5467bbejk\">在安装Windows Server 2012系统时选择的核心模式，图形界面没有加载完全。</p><h3 id=\"b3d48904d1rev\"><b>解决方案</b></h3><p id=\"25f63ac0d15c8\">请您参照以下两种方案进行操作。其中方案一更换操作系统有数据丢失的风险，推荐您使用方案二。</p><h4 id=\"27278ed0d145s\"><b>方案一</b></h4><p id=\"59081cd0d1bvc\">更换操作系统，选择含有UI的镜像。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/replace-the-operating-system-of-an-instance\">更换操作系统（系统盘）</a>。</p><div type=\"note\" id=\"105062c1bcxnm\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"ddb60532bcual\"><li id=\"ddb60530bcgxd\"><p id=\"c0c01323bbimp\">更换操作系统后，原来旧的系统盘会被释放，会清除系统盘上的所有数据，请在更换操作系统前为系统盘创建快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></li><li id=\"ded94f81bcmud\"><p id=\"e16b4500bcj2p\">含有UI的镜像详情，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/replace-the-operating-system-of-an-instance-1#section-64x-u1z-3vh\">哪些操作系统支持可视化？</a>。</p></li></ul></div></div><h4 id=\"4d5e6ce0d1mvc\"><b>方案二</b></h4><ol id=\"905e7ac2bchx7\"><li id=\"905e7ac0bcnup\"><p id=\"a07b3ea1b80k5\">远程登录Windows实例。</p><p id=\"96fa5fc0bcjx5\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"abd2ad81bcl9m\"><p id=\"abd2ad80bc7w3\">执行以下命令，将核心模式<code data-tag=\"codeph\" class=\"codeph\">core</code>切换回完整模式<code data-tag=\"codeph\" class=\"codeph\">Full</code>，将cmd.exe窗口切换成图形界面。</p><pre id=\"fv8mzh\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>dism /online /enable-feature /all /featurename:servercore-fullserver /featurename:server-gui-shell /featurename:server-gui-mgmt</code></pre></li></ol><p id=\"90df2f70d1agf\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/fix-the-cve-2021-33909-vulnerability-in-an-alibaba-cloud-linux-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux系统的CVE-2021-33909安全漏洞内核热补丁修复方案</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-12 11:10:08</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"7d95ec6091rxu\"><p data-tag=\"shortdesc\" id=\"7d9e50d1914in\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2和Alibaba Cloud Linux 3系统的CVE-2021-33909安全漏洞内核热补丁修复方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"7d9e50d291uaq\">在符合如下条件的Alibaba Cloud Linux实例中，存在CVE-2021-33909安全漏洞，特定场景下会造成系统宕机，且出现如下调用栈信息。</p><ul id=\"15e01d22cevx2\"><li id=\"15e01d20cehhl\"><p id=\"1f019b90cenw3\">Alibaba Cloud Linux 2系统</p><ul id=\"2a78f0e1ceozh\"><li id=\"29ea6c80cenlz\"><p id=\"26f40fe0ce4ll\">镜像：Alibaba Cloud Linux 2.1903 LTS 64位。</p></li><li id=\"2d52ebe1cek73\"><p id=\"2d52ebe0ceitn\">内核：kernel-4.19.91-24.al7及之前的内核版本。</p></li></ul></li><li id=\"291e69f0cefdy\"><p id=\"291e69f1cez94\">Alibaba Cloud Linux 3系统</p><ul id=\"43a667f1cebuh\"><li id=\"4343ae80cera1\"><p id=\"291e69f3celv1\">镜像：Alibaba Cloud Linux 3.2104 64位。</p></li><li id=\"4645a3e1ce2ko\"><p id=\"4645a3e0ce2cl\">内核：kernel-5.10.60-7.al8（含）之前的内核版本。</p></li></ul></li></ul><pre id=\"7d961370910im\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>[  415.961724] BUG: unable to handle kernel paging request at ffffb807c2f1aff6\n[  415.963259] PGD 42f53b067 P4D 42f53b067 PUD 0\n[  415.964201] Oops: 0002 [#1] SMP PTI\n[  415.965026] CPU: 5 PID: 1537 Comm: seq_poc Kdump: loaded Tainted: G        W         4.19.91-23.al7.x86_64 #1\n[  415.967154] Hardware name: Red Hat KVM, BIOS 0.5.1 01/01/2011\n[  415.968353] RIP: 0010:__memcpy+0x12/0x20\n[  415.969187] Code: 48 c1 e2 20 48 09 c2 48 31 d3 e9 68 ff ff ff 90 90 90 90 90 90 90 90 90 66 66 90 66 90 48 89 f8 48 89 d1 48 c1 e9 03 83 e2 07 &lt;f3&gt; 48 a5 89 d1 f3 a4 c3 66 0f 1f 44 00 00 48 89 f8 48 89 d1 f3 a4\n[  415.973070] RSP: 0018:ffffb80802097dd8 EFLAGS: 00010202\n[  415.974159] RAX: ffffb807c2f1aff6 RBX: ffff8a85f9593450 RCX: 0000000000000001\n[  415.975638] RDX: 0000000000000002 RSI: ffffffff9b0c231c RDI: ffffb807c2f1aff6\n[  415.977097] RBP: ffffb80842f1b000 R08: ffffffff9b0c231c R09: 0000000000000001\n[  415.978563] R10: ffffe41e47d4fa80 R11: ffffe41e47d4fac0 R12: ffffffff9b0a9cc2\n[  415.980168] R13: ffff8a87a83eaa00 R14: ffffb80802097f10 R15: ffff8a87ad6de700\n[  415.981664] FS:  00007f9ef5d86740(0000) GS:ffff8a87afb40000(0000) knlGS:0000000000000000\n[  415.983464] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033\n[  415.984722] CR2: ffffb807c2f1aff6 CR3: 0000000279c40005 CR4: 00000000000606e0\n[  415.986253] Call Trace:\n[  415.986802]  prepend+0x23/0x30\n[  415.987517]  dentry_path+0x7e/0xa0\n[  415.988249]  seq_dentry+0x36/0xa0\n[  415.988954]  show_mountinfo+0x203/0x280\n[  415.989764]  seq_read+0x14a/0x3d0\n[  415.990514]  vfs_read+0x89/0x130\n[  415.991209]  ksys_read+0x4a/0xc0\n[  415.991898]  do_syscall_64+0x5b/0x1b0\n[  415.992661]  entry_SYSCALL_64_after_hwframe+0x44/0xa9\n[  415.993713] RIP: 0033:0x7f9ef5891a30\n[  415.994450] Code: 0b 31 c0 48 83 c4 08 e9 be fe ff ff 48 8d 3d c7 c3 09 00 e8 42 8c 02 00 66 90 83 3d 8d d5 2d 00 00 75 10 b8 00 00 00 00 0f 05 &lt;48&gt; 3d 01 f0 ff ff 73 31 c3 48 83 ec 08 e8 de cc 01 00 48 89 04 24\n[  415.998217] RSP: 002b:00007f9ef5d84f78 EFLAGS: 00000246 ORIG_RAX: 0000000000000000\n[  415.999792] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f9ef5891a30\n[  416.001249] RDX: 0000000000000400 RSI: 0000000000603240 RDI: 0000000000000003\n[  416.002794] RBP: 00007f9ef5d84ff0 R08: 0000000000603240 R09: 00007f9ef58fcc30\n[  416.004310] R10: 00007f9ef5d849e0 R11: 0000000000000246 R12: 0000000000400c00\n[  416.005786] R13: 00007ffcf5fdd070 R14: 0000000000000000 R15: 0000000000000000\n[  416.007255] Modules linked in: sunrpc intel_rapl_msr intel_rapl_common iosf_mbi sb_edac crct10dif_pclmul crc32_pclmul mousedev ghash_clmulni_intel pcbc aesni_intel psmouse i2c_piix4 crypto_simd cryptd pcspkr glue_helper ip_tables ata_generic pata_acpi cirrus drm_kms_helper syscopyarea sysfillrect sysimgblt fb_sys_fops ttm ata_piix uhci_hcd drm crc32c_intel libata serio_raw i2c_core floppy\n[  416.014226] CR2: ffffb807c2f1aff6\n[  416.014952] ---[ end trace 558647d5169dc4e0 ]---\n[  416.015915] RIP: 0010:__memcpy+0x12/0x20\n[  416.016733] Code: 48 c1 e2 20 48 09 c2 48 31 d3 e9 68 ff ff ff 90 90 90 90 90 90 90 90 90 66 66 90 66 90 48 89 f8 48 89 d1 48 c1 e9 03 83 e2 07 &lt;f3&gt; 48 a5 89 d1 f3 a4 c3 66 0f 1f 44 00 00 48 89 f8 48 89 d1 f3 a4\n[  416.024072] RSP: 0018:ffffb80802097dd8 EFLAGS: 00010202\n[  416.026964] RAX: ffffb807c2f1aff6 RBX: ffff8a85f9593450 RCX: 0000000000000001\n[  416.030291] RDX: 0000000000000002 RSI: ffffffff9b0c231c RDI: ffffb807c2f1aff6\n[  416.033583] RBP: ffffb80842f1b000 R08: ffffffff9b0c231c R09: 0000000000000001\n[  416.036819] R10: ffffe41e47d4fa80 R11: ffffe41e47d4fac0 R12: ffffffff9b0a9cc2\n[  416.040063] R13: ffff8a87a83eaa00 R14: ffffb80802097f10 R15: ffff8a87ad6de700\n[  416.043332] FS:  00007f9ef5d86740(0000) GS:ffff8a87afb40000(0000) knlGS:0000000000000000\n[  416.046754] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033\n[  416.049766] CR2: ffffb807c2f1aff6 CR3: 0000000279c40005 CR4: 00000000000606e0\n[  416.052964] Kernel panic - not syncing: Fatal exception</code></pre><h2 id=\"4rM4I\">问题原因</h2><p id=\"7d9e77e191bsp\">seq_buf_alloc函数的参数是size_t（unsigned long）类型为64位，其他内核函数在使用size_t（unsigned long）参数时，将该参数的类型修改为int类型，导致64位的数字被截断为32位，通过精心构造，该漏洞可实现代码任意执行。在主机内可以用于提权，容器内能够崩溃宿主机或者逃逸。更多说明，请参见<a class=\"\" target=\"_blank\" href=\"https://blog.qualys.com/vulnerabilities-threat-research/2021/07/20/sequoia-a-local-privilege-escalation-vulnerability-in-linuxs-filesystem-layer-cve-2021-33909\">官方文档说明</a>。</p><h2 id=\"AywdZ\">解决方案</h2><p data-spm-anchor-id=\"a2c9r.14518950.0.i4.45975e3brJkwrd\" id=\"7d9e9ef191jkx\">当遇到该问题时，您可以参考以下方案处理：</p><ol id=\"7d9e9ef291wq0\"><li id=\"7d9e9ef391hv2\"><p id=\"7d9e9ef4911k6\">登录ECS实例，详情请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"7d9e9ef591e5g\"><p id=\"7d9e9ef691gpp\">执行以下命令，确认系统内核版本适用此方案。 </p><pre id=\"7d96137191sig\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>uname -r</code></pre><p id=\"7d9ec60091dgv\"> 系统显示类似如下。 </p><ul id=\"7196a8f1cexm0\"><li id=\"6df454e1cenyu\"><p id=\"7886a160ceziy\">Alibaba Cloud Linux 2系统</p><pre id=\"dplgkp\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>4.19.91-21.al7.x86_64</code></pre></li><li id=\"791d8a30ceg8t\"><p id=\"79c82210ceety\">Alibaba Cloud Linux 3系统</p><pre id=\"7d96137291792\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>5.10.60-7.al8.x86_64</code></pre></li></ul></li><li id=\"7d9ec60291sga\"><p id=\"7d9ec603910nb\">请根据系统内核版本，选择以下对应的解决方法： \n</p><section id=\"da0cdac0cf7c7\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"da0d01d0cfw1u\" class=\"section\"><h2 id=\"da0cdac1cflku\">Alibaba Cloud Linux 2系统</h2><ul id=\"01ca7fe2cfj2y\"><li id=\"01ca7fe0cfwyt\"><p id=\"0557ec60cfxu1\">对于4.19.91-19.1.al7.x86_64（不含）版本</p><ol id=\"23b3d5c1cfnsn\"><li id=\"211a8d47cfa7v\"><p id=\"3ce1c200cffye\">更新操作系统版本至最新的内核版本。</p><pre id=\"4076cfa0cfkbw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum update kernel</code></pre></li><li id=\"211a8d44cfyxz\"><p id=\"211a8d45cfoz8\">重启服务器生效。 </p><pre id=\"211a8d46cfe7t\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>reboot</code></pre></li><li id=\"211a8d41cf3pm\"><p id=\"3a2931b0cfiir\">更新内核热补丁。</p><p id=\"211a8d42cfyh6\">若最新内核版本的操作系统同样存在该问题，请参见4.19.91-19.1.al7.x86_64（包含）到4.19.91-24.al7.x86_64（包含）之间版本的解决方案更新内核热补丁。 </p></li></ol></li><li id=\"0b3feab1cfg34\"><p id=\"104fff90cf5kr\">对于4.19.91-19.1.al7.x86_64（包含）到4.19.91-24.al7.x86_64（包含）之间的版本，可通过安装内核热补丁解决，安装命令如下。 </p><pre id=\"197b1af0cfp3r\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install -y kernel-hotfix-5956925-`uname -r | awk -F\"-\" '{print $NF}'`</code></pre></li></ul></section><section id=\"da0d01d3cfqeb\" class=\"section\"><h2 id=\"da0d01d2cflvi\">Alibaba Cloud Linux 3系统</h2><ul id=\"6f38b880cfuzn\"><li id=\"6f38b881cfhfo\"><p id=\"6f38b882cfk6n\">对于kernel-5.10.60-8.al8（不含）之前的版本</p><ol id=\"6f38b883cfl2z\"><li id=\"6f38b884cfndq\"><p id=\"6f38b885cfv76\">更新操作系统版本至最新的内核版本。</p><pre id=\"6f38b886cfz5n\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum update kernel</code></pre></li><li id=\"6f38b887cfkaf\"><p id=\"6f38b888cfann\">重启服务器生效。 </p><pre id=\"6f38b889cflr8\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>reboot</code></pre></li><li id=\"6f38b88acfrmz\"><p id=\"6f38b88bcf2my\">更新内核热补丁。</p><p id=\"6f38b88ccf7wl\">若最新内核版本的操作系统同样存在该问题，请参见kernel-5.10.60-7.al8（含）之前版本的解决方案更新内核热补丁。 </p></li></ol></li><li id=\"6f38b88dcfjep\"><p id=\"6f38b88ecfmky\">对于kernel-5.10.60-7.al8（含）之前的版本，可通过安装内核热补丁解决，安装命令如下。 </p><pre id=\"927a9980cf6iz\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install -y kernel-hotfix-5956925-`uname -r | awk -F\"-\" '{print $NF}'`</code></pre></li></ul></section></section></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-instances-cannot-access-the-ad-domains-of-each-other-or-instances-cannot-be-added-to-the-same-ad-domain-at-the-same-time", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>实例之间无法互相访问AD域或同时加入AD域怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>实例之间无法互相访问AD域或同时加入AD域怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-08-01 09:40:26</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"e46b9060b1a9a\"><p data-tag=\"shortdesc\" id=\"e472e360b1iyb\" class=\"shortdesc\">本文介绍如何解决实例之间无法互相访问AD域，或者无法同时加入AD域的问题。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"e472e364b1agj\">使用同一个Windows Server镜像创建几台ECS实例后，实例之间无法互相访问AD域，或者无法同时加入AD域。</p><h2 id=\"4rM4I\">问题原因</h2><p id=\"e472e365b1gn6\">使用同一个Windows Server镜像的几台实例中，其计算机安全标识符SID（Security Identifier）相同，因此无法相互访问AD域。此时您需要修改实例的SID，再搭建域环境。</p><h2 id=\"AywdZ\">解决方案</h2><h3 data-tag=\"h3\" id=\"e4730a73b1qvs\" class=\"h3\"><b>批量创建不同SID的Windows实例</b></h3><p id=\"e4730a74b1unf\">使用最新的公共镜像创建实例即可，因为最新的公共镜像已经修复此问题。</p><h3 data-tag=\"h3\" id=\"e4730a75b1kmh\" class=\"h3\"><b>修改一台Windows实例的SID</b></h3><p id=\"e4730a76b10sm\">Windows系统内置的<code data-tag=\"code\" class=\"code\">sysprep</code>命令可以将已安装的Windows镜像中删除特定的系统信息，其中包括SID。本文使用<code data-tag=\"code\" class=\"code\">PowerShell</code>的<code data-tag=\"code\" class=\"code\">AutoSysprep.ps1</code>脚本文件，通过系统内置的<code data-tag=\"code\" class=\"code\">sysprep</code>命令修改Windows实例的SID。需要注意的是，<code data-tag=\"code\" class=\"code\">sysprep</code>命令会将User Profile恢复为默认值，执行<code data-tag=\"code\" class=\"code\">sysprep</code>命令后会删除桌面上创建的文件。如果您希望修复故障后自动删除脚本，可以将文件放置在桌面上执行。</p><h4 id=\"5fc99860b13fu\"><b>操作步骤</b></h4><ol id=\"e4730a77b1khz\"><li id=\"e4730a78b1vdg\"><p id=\"e4730a79b1u7l\">为实例的系统盘创建快照，避免数据丢失。</p><p id=\"7b0221b0b1ls9\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建快照</a>。</p></li><li id=\"e4730a7ab1ukw\"><p id=\"e4730a7bb16ng\">远程连接ECS实例。</p><p id=\"b413f6e2b1o6t\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"e4733180b1k0e\"><p id=\"e4733181b1ooe\">登录系统终端，执行<code data-tag=\"code\" class=\"code\">powershell</code>命令进入PowerShell交互模式。 \n</p><div type=\"note\" id=\"e4733182b1xp1\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"e4733183b1p79\" class=\"p\">必须以管理员用户执行<code data-tag=\"code\" class=\"code\">powershell</code>命令。\n</p></div></div></li><li id=\"e4733185b1z5u\"><p id=\"e4733186b16c0\">执行以下命令，切换至C盘根目录。</p><pre id=\"39mrib\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cd\\</code></pre></li><li id=\"e4733187b1aib\"><p id=\"e4733188b1doq\">执行以下命令，查看系统的SID。 </p><pre data-tag=\"codeblock\" id=\"e46bb770b18bb\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>whoami /user</code></pre><p id=\"e4733189b1zh4\"> 系统显示类似如下。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7484796761/p518704.png\" class=\"image break\"></p></li><li id=\"e473318ab1mou\"><p id=\"e473318bb1b3b\">下载<a class=\"\" target=\"_blank\" href=\"https://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/attach/40846/cn_zh/1542198598487/AutoSysprep.ps1\">AutoSysprep脚本工具</a>，并上传至实例的C盘。</p></li><li id=\"e473318cb1iqy\"><p id=\"e473318db1ocd\">进入<code data-tag=\"code\" class=\"code\">AutoSysprep.ps1</code>脚本工具所在目录，执行以下命令，查看脚本工具说明。 </p><pre data-tag=\"codeblock\" id=\"e46bb771b1h4c\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>.\\AutoSysprep.ps1 -help</code></pre><p id=\"e4735890b1w0o\"> 系统显示类似如下，具体的参数说明请参见<a title=\"\" class=\"from-extensions-error\" href=\"#8Yczx\">更多信息</a>。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7484796761/p518705.png\" class=\"image break\"></p></li><li id=\"e4735891b1aie\"><p id=\"e4735892b1r0a\">执行以下命令，运行脚本。 </p><pre data-tag=\"codeblock\" id=\"e46bb772b1u1y\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code> .\\AutoSysprep.ps1 -SkipRearm -Password \"&lt;$Password&gt;\" -PostAction \"reboot\"</code></pre><div type=\"note\" id=\"e4735893b1vjo\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"e4735894b176f\" class=\"p\"><code data-tag=\"code\" class=\"code\">&lt;$Password&gt;</code>为需要设置的密码。\n</p></div></div></li><li id=\"e4735896b1mxg\"><p id=\"e4735897b1ace\">等待一段时间，再次登录实例。 \n</p><div type=\"note\" id=\"e4735898b15c0\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"e4735899b18ku\" class=\"p\">如果您的ECS实例使用的是经典网络，需要<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">使用管理终端连接Windows实例</a>进行配置，在完成配置后，网络才可以连通。\n</p></div></div></li><li id=\"e473589bb1kfe\"><p id=\"e473589cb198s\">执行以下命令，确认系统的SID发生改变，然后可以使用ECS实例搭建AD域环境。 </p><pre data-tag=\"codeblock\" id=\"e46bb773b11go\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>whoami /user</code></pre></li></ol><h3 id=\"8Yczx\"><b>更多信息</b></h3><h4 id=\"8c5b9700b1c0m\"><b>参数说明</b></h4><p id=\"e4737fa0b1q9f\"><code data-tag=\"code\" class=\"code\">AutoSysprep.ps1</code>脚本工具参数介绍如下所示：</p><ul id=\"e4737fa1b126r\"><li id=\"e4737fa2b1b1l\"><p id=\"e4737fa3b1456\"><b>-SkipRearm</b>：保留Windows操作系统到当前授权许可状态。没有添加该参数时，AutoSysprep会恢复Windows实例到原始授权许可状态。</p></li><li id=\"e4737fa4b1lzp\"><p id=\"e4737fa5b1zan\"><b>-Password</b>：为实例重置密码。密码规则如下： \n</p><ul id=\"87df5322b1b05\"><li id=\"87df5320b1z3j\"><p id=\"715361f0b1wo4\">长度为8至30个字符，不能以斜线（/）为密码首字符。</p></li><li id=\"8accd621b19nl\"><p id=\"8accd620b16vl\">必须同时包含大写英文字母、小写英文字母、数字和特殊符号中的三种字符，可以包含的特殊符号有：</p><pre id=\"xq4rkl\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>( ) ` ~ ! @ # $ % ^ &amp; - _ + = | { } [ ] : ; ’ &lt; &gt; , . ? /</code></pre></li><li id=\"96336291b1vcx\"><p id=\"96336290b18fp\"><code data-tag=\"code\" class=\"code\">-Password</code>参数默认值由AutoSysprep随机生成。 </p></li></ul><div type=\"note\" id=\"83611e01b1y0z\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"83611e02b1kfe\" class=\"p\">如果您忘记设置密码，修改系统SID后可以在ECS管理控制台重置密码。\n</p></div></div></li><li id=\"e4737faab1frd\"><p id=\"e4737fabb13s9\"><b>-Hostname</b>：为实例重置主机名。主机名限制如下： </p><ul id=\"e8fe4d02b1yxb\"><li id=\"e8fe4d00b1867\"><p id=\"e78827c0b1hlv\">主机名字符长度为2到15，不支持点号（.），不能全是数字。</p></li><li id=\"eae69500b1moz\"><p id=\"eae66df0b1c7j\">允许大小写英文字母、数字和短横线（-）。</p></li><li id=\"eb59d3c1b1s3a\"><p id=\"eb59d3c0b1dvr\">点号（.）和短横线（-）不能作为首尾字符，更不能连续使用。</p></li><li id=\"ed3dcb71b124k\"><p id=\"ed3dcb70b16lp\"><code data-tag=\"code\" class=\"code\">-Hostname</code>参数默认值由AutoSysprep随机生成。</p></li></ul></li><li id=\"e3e3b0d1b1uo1\"><p id=\"e3e3b0d2b1ni8\"><b>-PostAction</b>：运行脚本后的后续操作。选项介绍如下： \n</p><ul id=\"e3e3b0d3b11sm\"><li id=\"e3e3b0d4b16q3\"><p id=\"e3e3b0d5b1pyv\">shutdown：默认选项，修改实例SID后停止实例。</p></li><li id=\"e3e3b0d6b1or0\"><p id=\"e3e3b0d7b101q\">reboot：修改实例SID后重启实例。</p></li><li id=\"e3e3b0d8b1ox7\"><p id=\"e3e3b0d9b1m43\">quit：修改实例SID后停留在实例内部。 </p></li></ul></li><li id=\"e3e3b0dbb1ft9\"><p id=\"e3e3b0dcb1m0y\"><b>-help</b>：查看脚本工具的介绍，自定义的使用AutoSysprep.ps1的参数。</p></li></ul><h4 data-tag=\"h3\" id=\"e473a6b5b1lev\" class=\"h3\"><b>Windows Server 2008系统查看脚本说明时报错</b></h4><p data-tag=\"h4\" id=\"e473a6b6b112f\" class=\"h4\"><b>问题现象</b></p><p id=\"e473a6b7b1733\">执行以下命令，查看脚本说明。</p><pre data-tag=\"codeblock\" id=\"e46bb775b1woz\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>.\\AutoSysprep.ps1 -help</code></pre><p id=\"e473a6b8b1rz7\">系统显示类似如下。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7484796761/p518706.png\" class=\"image break\"><p data-tag=\"h4\" id=\"e473a6bab1mxi\" class=\"h4\"><b>解决方法</b></p><p id=\"e473a6bbb1qes\">执行以下命令，增加权限。</p><pre data-tag=\"codeblock\" id=\"e46bb776b19s2\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Set-ExecutionPolicy -ExecutionPolicy RemoteSigned</code></pre><h4 data-tag=\"h3\" id=\"e473a6bcb1wb9\" class=\"h3\"><b>Windows Server 2008系统运行脚本时提示未进行数字签名</b></h4><p data-tag=\"h4\" id=\"e473a6bdb1kxu\" class=\"h4\"><b>问题现象</b></p><p id=\"e473a6beb1cgk\">执行以下命令，运行脚本。</p><pre data-tag=\"codeblock\" id=\"e46bb777b1wi6\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code> .\\AutoSysprep.ps1 -skiprearm -postaction \"reboot\"</code></pre><p id=\"e473a6bfb1i6t\">系统显示类似如下。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7484796761/p518707.png\" alt=\"Symptom\" class=\"image break\"><p data-tag=\"h4\" id=\"e473a6c1b17zf\" class=\"h4\"><b>解决方法</b></p><p id=\"e473cdc0b1uoo\">执行以下命令，运行脚本。</p><pre data-tag=\"codeblock\" id=\"e46bb778b1cfw\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>powershell -executionpolicy bypass -file c:\\AutoSysprep.ps1 -skiprearm -postaction \"reboot\"</code></pre><div type=\"note\" id=\"bff818a0b3hf8\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"c1c69710b3oqb\">如果没有特定要求，AutoSysprep会随机生成密码和主机名。</p></div></div></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-windows-updates-cannot-be-installed-on-an-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows Update补丁更新失败如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows Update补丁更新失败如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-23 16:21:49</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"395f2e90b1pvw\"><p data-tag=\"shortdesc\" id=\"396289f7b13qz\" class=\"shortdesc\">本文介绍Windows Update补丁更新失败的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"39125539\">问题描述</h2><p id=\"396289fcb1j9a\">Windows实例默认配置了组策略，使用Intranet WSUS更新服务器安装补丁。如何配置系统补丁自动更新的组策略请参考<a class=\"\" href=\"/zh/ecs/parameters-for-automatic-update-for-windows-instances\">ECS Windows 2008 Windows Update 自动更新相关配置说明</a>。</p><p id=\"396289feb1x53\">在需要安装Windows Update情况下，经常会遇到Windows Update失败的情况，有各种类型的错误码出现，下图是常见的Windows Update失败的报错，提示的Error Code为“80244022”。该错误代码80244022是微软内部错误标签，错误原因是“HTTP status 503 - the service is temporarily”。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8338796761/p519053.png\" class=\"image break\"><h2 id=\"484a262f\">问题原因</h2><p id=\"39628a01b1397\">Windows Update失败一般有如下几种原因：</p><ul id=\"39628a02b1q56\"><li id=\"39628a03b11uf\"><p id=\"39628a04b1dg7\">第三方杀毒软件的影响。</p></li><li id=\"39628a05b1tyb\"><p id=\"39628a06b1hqq\">木马病毒的影响。</p></li><li id=\"39628a07b1snd\"><p id=\"39628a08b1y7f\">服务器物理内存或者虚拟内存不足。</p></li><li id=\"39628a09b1dmr\"><p id=\"39628a0ab1fwr\">磁盘文件系统访问权限问题。</p></li><li id=\"39628a0bb1tpx\"><p id=\"3962b100b12e9\">磁盘空间不足。</p></li><li id=\"3962b101b1kbo\"><p id=\"3962b102b1394\">Windows系统的ECS实例的自身系统组件或者依赖服务损坏。</p></li><li id=\"3962b103b10n7\"><p id=\"3962b104b141z\">Windows系统的ECS实例默认配置了阿里云内部WSUS服务器，如果该服务器繁忙或者停止响应，可能会导致Update失败。</p></li><li id=\"3962b105b1jzb\"><p id=\"3962b106b1ntq\">网络链路或者DNS解析问题。</p></li></ul><h2 id=\"b070c424\">解决方案</h2><div type=\"important\" id=\"b59bfdd1b1525\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"b74b0d60b1mg5\">本文仅供您使用Windows实例时参考，文中引用的微软官方链接，版权归属微软。请注意文章适用的操作系统范围，以及微软Windows产品迭代或者文档未及时更新可能带来的问题，阿里云官方不对引用的微软官方链接内容负责。</p></div></div><p id=\"3962b117b1eq4\">您可以参考以下操作步骤排查问题。</p><ol id=\"3962b118b173t\"><li id=\"3962b119b18ss\"><p id=\"3962b11ab1hrm\">检查是否配置虚拟内存。如果没有，请进行配置，配置完成后重启服务器，然后进行重试。</p><p id=\"53c55740b1av0\">Windows虚拟内存的设置请参考<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-configure-the-virtual-memory-of-a-windows-instance\">配置 Windows 系统虚拟内存</a>。</p></li><li id=\"3962d810b12nh\"><p id=\"3962d811b12x3\">执行如下命令，尝试检查是否可以访问内部WSUS服务器的80端口。 \n</p><ul id=\"3962d812b14wr\"><li id=\"3962d813b1e4q\"><p id=\"3962d814b1lb7\">经典网络ECS实例 </p><pre data-tag=\"codeblock\" id=\"395f55a0b1edm\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>telnet windowsupdate.aliyun-inc.com 80</code></pre></li><li id=\"3962d816b1ef5\"><p id=\"3962d817b1e2i\">VPC网络ECS实例 </p><pre data-tag=\"codeblock\" id=\"395f55a1b1nd7\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>telnet update.cloud.aliyuncs.com 80</code></pre></li></ul></li><li id=\"3962d81ab14ec\"><p id=\"3962d81bb17xb\">如果访问WSUS服务器的80端口不通，请取消使用阿里云内部的WSUS服务器，使用微软官方Internet更新服务器进行测试。</p><p id=\"8e648330b10yi\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/parameters-for-automatic-update-for-windows-instances\">Windows实例中Windows Update自动更新相关配置说明</a>。</p></li><li id=\"3962d81cb1rxv\"><p id=\"3962d81db1o11\">根据提示的错误码，在微软官方网站搜索对应的解决方案，尝试解决。微软也提供了“<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://support.microsoft.com/en-us/help/4027322\">Windows update troubleshooter</a>”，该工具会自动修复部分Windows update对应问题，可以尝试使用该工具。</p><p id=\"a11f6f30b11rw\">具体操作，请参考微软官网的<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://support.microsoft.com/zh-cn/help/12373/windows-update-faq#1TC=windows-7\">Windows 更新：常见问题解答</a>。</p></li><li id=\"3962d81eb1n0v\"><p id=\"3962d81fb1cqz\">参考微软官方提供<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://docs.microsoft.com/zh-cn/windows/deployment/update/windows-update-resources\">Windows 更新-其他资源</a>文档，尝试重置Windows Update组件。</p></li><li id=\"3962d820b16vi\"><p id=\"3962ff20b1g9c\">如果重置Windows Update组件后仍然无法更新，请参考<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://docs.microsoft.com/zh-cn/windows/deployment/update/windows-update-resources\">Windows 更新-其他资源</a>文档中的手动重置 Windows更新组件，逐步执行所提到的命令，然后重新测试Windows Update。 \n</p><div type=\"important\" id=\"c3525130b14o6\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"c544d260b1xdu\">该步骤风险较高，请务必对系统盘、数据盘创建快照，备份数据后再进行操作。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建快照</a>。</p></div></div></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-a-large-number-of-small-files-in-a-windows-ntfs-file-system-cause-space-statistic-exceptions", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows NTFS文件系统中大量小文件导致空间统计异常如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows NTFS文件系统中大量小文件导致空间统计异常如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-08 09:52:36</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"d0759130b89ug\"><p data-tag=\"shortdesc\" id=\"d07b5d97b8ijw\" class=\"shortdesc\">本文介绍Windows NTFS文件系统中存在大量小文件导致空间统计异常的问题原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"ff120570bcybr\" class=\"section\"><h2 id=\"98f5e270bcukk\"><b>大量小于1 KB文件占用空间问题</b></h2><h3 id=\"b5f967c0bcr9h\"><b>问题描述</b></h3><p id=\"c4cf0341bcypa\">如下图所示，Windows系统中从文件统计看占用磁盘空间1.56 MB，共计409,600个小文件，每个文件包含几个字符，容量大约为几个字节，但磁盘显示使用空间已经占用594 MB，两处空间大小统计相差较大。</p><img title=\"image.png\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8406567761/p519584.png\" alt=\"image.png\" width=\"600\" class=\"image break\"><h3 id=\"ca45f040bcjkk\"><b>问题原因</b></h3><p id=\"dac89f81bcaf9\">该情况为NTFS文件系统中NFT占用导致，与NTFS文件系统中的文件存储方式有关。NTFS文件系统格式化后简单的结构如下图所示。</p><p id=\"dac89f82bc30i\"><img title=\"image.png\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8406567761/p519586.png\" alt=\"image.png\" width=\"200\" class=\"image break\"> </p><p id=\"dac89f84bc8n4\">其中BOOT中存放文件系统基础信息，如簇大小等。NTFS的文件信息都存放在Master File Table（MFT）中，每个MFT的记录是1 KB大小且固定不变。每个记录对应一个文件，或者对应其他文件系统对象。记录格式为：记录头+属性1+属性2+...+属性n，属性里包括文件名、长度、修改时间等等。如果文件信息足够小，那么1 KB的记录是用不满的，剩下的部分就可以放文件内容。其中，当文件足够小的时候，DATA里放的就是文件内容，当文件足够大的时候DATA放的是指针，指向另外一个区域保存更大的数据。针对此问题，409,600个文件要消耗409,600个MFT记录，共计消耗容量400 MB。此外，NTFS文件系统日志和位图等也需要消耗空间，共计消耗594 MB容量。此情况也可以通过执行<code data-tag=\"code\" class=\"code\">chkdsk d:</code>命令获取相关系统占用信息，此问题执行<code data-tag=\"code\" class=\"code\">chkdsk d:</code>命令后详细信息如下图所示。</p><p id=\"dac89f85bc8wu\"><img title=\"image.png\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8406567761/p519587.png\" alt=\"image.png\" class=\"image break\"> </p><p id=\"dac89f87bcrua\">或者使用WinHex程序获取更详细的系统占用，下载WinHex后运行，后续使用<code data-tag=\"code\" class=\"code\">Tools-Open Disk</code>命令打开需要分析的磁盘，获取详细信息。如图所示，MFT占用了400 MB空间，LogFile占用了64 MB空间，BitMap占用了3.1 MB空间。 <img title=\"image.png\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8406567761/p519588.png\" alt=\"image.png\" width=\"800\" class=\"image break\"></p><h3 id=\"e1080ca0bcgim\"><b>解决方案</b></h3><p id=\"f811b950bcdye\">针对MFT中已经分配的空间，默认删除文件会被标记为空，但不会自动回收，提升再次创建文件时的效率。如果确实需要释放，一般需要第三方磁盘清理或整理工具进行，分区容量不大时，也可以创建大文件占用空间，此时系统会自动释放已经删除的MFT空间。针对此类情况，也建议针对小文件进行定期压缩备份，降低MFT占用的空间，或从业务逻辑上减少大量小文件使用。</p></section><section id=\"016b5ec0bcidi\" class=\"section\"><h2 id=\"06343170bcrt7\"><b>大量小文件但大于1 KB文件占用空间问题</b></h2><h3 id=\"093ae1c0bcr92\"><b>问题描述</b></h3><p id=\"10d06901bcoe4\">如下图所示，共计409,600个小文件，文件本身大小为1 KB，实际文件容量为400 MB，但占用空间为1.56 GB。</p><img title=\"image.png\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9406567761/p519585.png\" alt=\"image.png\" width=\"500\" class=\"image break\"><h3 id=\"1637c5a0bcutl\"><b>问题原因</b></h3><p id=\"24dcdb40bcywi\">针对NTFS文件系统中默认文件的分配单元以簇的方式进行分配管理，默认最小的簇大小为4 KB，当文件小于4 KB或剩余分配不足4 KB时，实际分配仍旧为一个簇，即4 KB大小，则会导致占用磁盘空间较大。 </p><h3 id=\"191b5d90bck8g\"><b>解决方案</b></h3><p id=\"2cd14b61bc61d\">如果业务中确实有大量小于4 KB文件或大量小文件存储，也可以定期压缩备份减少磁盘占用，或者当小文件有固定大小时，可以在磁盘格式化时手工指定更小的簇大小，用以避免空间浪费的情况。指定簇大小可以在格式化过程中选择合适的分配单元大小，其中默认配置大小为 4,096字节，如下图所示。</p><p id=\"2cd14b62bc9sk\"><img title=\"image.png\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8406567761/p519589.png\" alt=\"image.png\" class=\"image break\"> </p><div type=\"important\" id=\"2cd14b64bc54q\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"2cd14b65bcoeg\">格式化磁盘为危险操作，请提前对磁盘进行快照备份，避免数据丢失。快照备份方法请参考<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建快照</a>。</p></div></div></section><h2 id=\"62oAe\">相关文档</h2><p id=\"d07bf9d4b8r9d\">如何定位并更正NTFS文件系统中的磁盘问题请参见<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://support.microsoft.com/en-hk/help/814594/how-to-locate-and-correct-disk-space-problems-on-ntfs-volumes?spm=a2c9r.12641768.0.0.25ea3xwt3xwth1\">参考文档</a>。 </p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-system-prompt-can-not-find-how-to-deal-with-server-manager-lnk", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows系统提示找不到“Server Manager.lnk”如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows系统提示找不到“Server Manager.lnk”如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-23 15:25:15</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"4aac95f0b1i57\"><p data-tag=\"shortdesc\" id=\"4aaedfe8b1vnx\" class=\"shortdesc\">本文介绍Windows系统提示找不到“Server Manager.lnk”的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"aAjhF\">问题描述</h2><p id=\"4aaedfe9b1yc2\">Windows系统出现“ Windows找不到文件<code data-tag=\"code\" class=\"code\">C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs\\Administrative Tools\\Server Manager.lnk</code>”错误。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1942507761/p518651.png\" class=\"image break\"><h2 id=\"bAsJt\">问题原因</h2><p id=\"4aaedfebb1wjv\">出现此错误是因为系统中缺少Server Manager.lnk快捷方式。</p><h2 id=\"BsRPr\">解决方案</h2><ol id=\"4aaf06f0b19e0\"><li id=\"4aaf06f1b1o7t\"><p id=\"4aaf06f2b10qq\">远程连接ECS实例。</p><p id=\"9cba0750b1las\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"979495b1b1ua8\"><p id=\"979495b0b1ede\">在<code data-tag=\"code\" class=\"code\">C:\\Windows\\System32\\</code>目录下，找到ServerManager文件，鼠标右键单击选择<b>桌面快捷方式</b>。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0942507761/p518652.png\" class=\"image break\"></p></li><li id=\"4aaf06f3b1m06\"><p id=\"4aaf06f4b1j4h\">将快捷方式复制到<code data-tag=\"code\" class=\"code\">C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs\\Administrative Tools\\</code>目录下。</p></li><li id=\"9cc79151b1iru\"><p id=\"9cc79150b14cl\">将文件名改为Server Manager（中间的空格不能少），系统会自动将名称改为<b>服务器管理器，</b>这样问题便可解决。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1942507761/p518653.png\" class=\"image break\"></p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/initialize-the-cloud-disk-in-the-mount-centos-7-system-when-the-site-command-jam-phenomenon-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>初始化云盘时，在CentOS 7系统mount本地盘时出现命令卡住现象，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>初始化云盘时，在CentOS 7系统mount本地盘时出现命令卡住现象，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-01 11:16:00</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2350257\"><p id=\"6d376da7fb3xv\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍初始化云盘时，在CentOS 7系统<code data-tag=\"code\" class=\"code\">mount</code>本地盘时出现命令卡住现象的问题描述、问题原因和解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"8117c6d0fby5g\" class=\"section\"><h2 id=\"8117c6d1fbyhq\"><b>问题描述</b></h2><p id=\"87d4a150fbula\">在CentOS 7系统使用ext4文件系统批量初始化本地盘时，使用<code data-tag=\"code\" class=\"code\">mount</code>命令挂载本地盘时出现命令卡住的现象，然后使用<code data-tag=\"code\" class=\"code\">ps</code>命令查看mount进程为D状态（睡眠状态）。</p></section><section id=\"89a14b00fb2ox\" class=\"section\"><h2 id=\"89a14b01fbynh\"><b>问题原因</b></h2><p id=\"268a59f0ffi9f\">该问题是由于Linux的<code data-tag=\"code\" class=\"code\">2.6.37</code>及更高的内核版本（通过<code data-tag=\"code\" class=\"code\">uname -r</code>查询）默认启用了lazy init功能导致。CentOS 7系统的内核版本是<code data-tag=\"code\" class=\"code\">3.10</code>，因此默认启用了lazy init功能。</p><p id=\"9078b260fbk2v\">使用ext4文件系统首次执行<code data-tag=\"code\" class=\"code\">mount</code>操作时需要初始化inode table。但是CentOS 7默认启用了lazy init功能，导致在初始化ext4文件系统时不会立刻去初始化文件系统的inode table，而是在<code data-tag=\"code\" class=\"code\">mount</code>挂载云盘时才进行。同时在3.10内核中<code data-tag=\"code\" class=\"code\">mount</code>时会有获取IO锁的操作，本地盘规格族由于容量较大，系统需要随机在云盘中写入数据，初始化需要的时间长，会出现<code data-tag=\"code\" class=\"code\">mount</code>需要的IO锁被lazy init长时间占用的情况，因此导致<code data-tag=\"code\" class=\"code\">mount</code>命令卡住。 </p><div type=\"note\" id=\"1e44b951fdyd7\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"ec218ad1ffa7v\"><li id=\"9c4b2841ffwfn\"><p id=\"9c4b2840ff45n\">在4.x版本内核中，对锁机制进行了优化，因此没有这个问题。</p></li><li id=\"76631eb1fd4kh\"><p id=\"76839f00fdv04\">关于本地盘的更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/local-disks\">本地盘</a>。</p></li></ul></div></div></section><section id=\"926c4500fbgkd\" class=\"section\"><h2 id=\"926c4501fbvcb\"><b>解决方案</b></h2><h4 id=\"21577560fdwru\"><b>方案一：</b>关闭lazy init功能</h4><p id=\"7b304080fdsbx\">在云盘初始化时执行以下命令，关闭lazy init功能。</p><pre id=\"gmp8hs\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>mkfs.ext4 -E lazy_itable_init=0,lazy_journal_init=0</code></pre><p id=\"c01127f0fd6r9\">此方案在数据盘容量较大时，初始化也比较耗费。例如32块ecs.d3s.16xlarge规格的本地盘全部初始化挂载完成约耗时4.5~5小时。</p><p id=\"466a55b0fe3xu\">云盘初始化的更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-27\">初始化概述</a>。</p><h4 id=\"iyi3B\" data-lake-index-type=\"0\"><b>方案二：使用xfs初始化</b></h4><p id=\"99be0c82fb087\">CentOS 7系统默认使用ext4文件系统，建议您使用xfs文件系统对云盘初始化。云盘初始化的更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-27\">初始化概述</a>。</p><p id=\"5cde03f0fex8n\">xfs文件系统的初始化策略是按需分配，因此没有ext4文件系统全盘初始化的操作， 此方案对数据盘进行初始化时挂载速度较快。例如32块ecs.d3s.16xlarge规格的本地盘全部初始化挂载完成仅需几分钟。</p><div type=\"important\" id=\"0bac7e51fflhi\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"0c1f6460ff3jq\">CentOS 7系统默认使用ext4文件系统，建议您在环境上使用xfs文件系统时进行测试验证后再进行业务操作，避免出现兼容性问题。</p></div></div></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/linux-the-kernel-prompts-tcp-time-wait-bucket-table-overflow-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>为什么Linux系统的ECS实例中出现大量“TCP: time wait bucket table overflow”错误？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>为什么Linux系统的ECS实例中出现大量“TCP: time wait bucket table overflow”错误？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:31:46</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"dd262610c6wsr\"><p data-tag=\"shortdesc\" id=\"dd2b0816c695e\" class=\"shortdesc\">本文介绍Linux系统的ECS实例的/var/log/messages中，出现大量“TCP: time wait bucket table overflow”错误的原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"175726e0c66dt\" class=\"section\"><h2 id=\"yzSMw\">问题现象</h2><p id=\"04d8f5c0c6jvp\">Linux系统的ECS实例的/var/log/messages中，出现大量“TCP: time wait bucket table overflow”错误。</p></section><section id=\"194e6300c6cjc\" class=\"section\"><h2 id=\"CHQkn\" class=\"p1\">问题原因</h2><p id=\"0db5a301c61ac\">出现该问题的原因是ECS实例中tcp的连接数太多，超出了net.ipv4.tcp_max_tw_buckets内核参数定义的值。</p><ul id=\"aed683c2c6x1a\"><li id=\"aed683c0c61pk\"><p id=\"4885f110c6ltb\">tcp_max_tw_buckets：表示系统同时保持TIME_WAIT状态的Sockets最大数量，如果超过这个数字，TIME_WAIT状态的Socket会被结束并且提示告警信息。</p></li><li id=\"b32a9ba1c6sd6\"><p id=\"b32a9ba0c65xa\">net.ipv4.tcp_max_tw_buckets：设置该参数，是为了抵御简单的DDoS攻击。若非业务需要，请不要降低此限制，如果网络条件需要比默认值高，将net.ipv4.tcp_max_tw_buckets参数的值调高或者增加内存。</p></li></ul></section><section id=\"1246a760c6ow0\" class=\"section\"><h2 id=\"EFTFF\">解决方案</h2><p id=\"dd2b5632c6pgj\">您可以调高net.ipv4.tcp_max_tw_buckets的值以解决此问题。</p><ol id=\"dd2b5633c61hh\"><li id=\"dd2b5634c6iss\"><p id=\"519623b0c6ag9\">远程连接ECS实例。 </p><p id=\"60c5beb0c6pfk\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"7db5aa10c6jvj\"><p id=\"7db58300c646y\">调整<code data-tag=\"codeph\" class=\"codeph\">net.ipv4.tcp_max_tw_buckets</code>参数值。</p><ol id=\"db4cb5b1c6w8a\"><li id=\"cf1bfb71c6kjr\"><p id=\"cf1bfb70c6p65\">执行以下命令，编辑<code data-tag=\"code\" class=\"code\">sysctl.conf</code>文件。 </p><pre data-tag=\"codeblock\" id=\"dd262612c618j\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/sysctl.conf</code></pre></li><li id=\"aae72ef1c6x81\"><p id=\"aae72ef0c60li\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"e0a45ae0c6w8v\"><p id=\"e0a433d0c6ti6\">根据业务需要，将<code data-tag=\"codeph\" class=\"codeph\">net.ipv4.tcp_max_tw_buckets</code>参数的值调高。</p><p id=\"b6d1df80c6r4g\">如下所示，将<code data-tag=\"codeph\" class=\"codeph\">net.ipv4.tcp_max_tw_buckets</code>值设置为20000。</p><pre data-tag=\"codeblock\" id=\"dd262613c6uku\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>net.ipv4.tcp_max_tw_buckets = 20000</code></pre></li><li id=\"dd2b5638c635c\"><p id=\"dd2b5639c6dmx\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存退出。</p></li><li id=\"f0553b31c6ndv\"><p id=\"f0553b30c65m3\">执行以下命令，使配置生效。 </p><pre data-tag=\"codeblock\" id=\"dd262614c6rya\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sysctl -p</code></pre></li></ol></li><li id=\"dd2b7d41c6uuh\"><p id=\"dd2b7d42c6slb\">执行以下命令，可查看不同连接数的状态。 </p><pre data-tag=\"codeblock\" id=\"dd262615c6qs4\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -an | grep 80 | awk '{print $6}' | sort | uniq -c | sort -rn</code></pre></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-am-prompted-with-the-812-error-code-when-i-connect-to-a-vpn-from-a-windows-server-2008-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows Server 2008连接VPN出现812错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows Server 2008连接VPN出现812错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-02 09:57:04</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"a20f1d1065fcx\"><p id=\"a2170c50653nh\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍Windows Server 2008连接VPN出现812错误的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"saPbd\">问题描述</h2><p id=\"a2170c5165jy9\">连接到VPN连接出错，错误提示代码为812。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1645765761/p518588.png\" class=\"image break\"><h2 id=\"xFXiW\">问题原因</h2><p id=\"a2170c5465znu\">VPN账号里<b>网络访问权限</b>设置了<b>通过NPS 网络策略控制访问 </b>。</p><h2 id=\"xeeXf\">解决方案</h2><p id=\"a2170c5665vrp\">先登录服务器，在本地用户管理中查看用户属性，或者运行中输入<b>lusrmgr.msc</b>。将<b>拨入</b>选项中<b>网络访问权限</b>调整权限为<b>允许访问</b>后，即可正常登录。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1645765761/p518589.png\" class=\"image break\"><p id=\"a2170c5865hte\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/linux-instances-of-ecs-the-average-user-to-use-the-su-command-switch-root-tip-su-authentication-failure-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>Linux系统的ECS实例中，普通用户使用su命令切换root用户时提示“su: Authentication failure”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例中，普通用户使用su命令切换root用户时提示“su: Authentication failure”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:31:04</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"a9efa4d0c6pai\"><p data-tag=\"shortdesc\" id=\"a9f57132c6j47\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中，普通用户使用su命令切换root用户时提示“su: Authentication failure”错误的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"c1cab5d0c62x8\" class=\"section\"><h2 id=\"XbeWY\">问题现象</h2><p id=\"3dedd800c6yor\">在Linux系统的ECS实例中，普通用户使用su命令切换root用户时提示“su: Authentication failure”错误，执行<code data-tag=\"code\" class=\"code\">cat /var/log/secure</code>查看<code data-tag=\"code\" class=\"code\">secure</code>日志，显示如下错误信息。</p><pre data-tag=\"codeblock\" id=\"a9efa4d1c6hgb\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>pam_unix(sshd:auth): check pass; user unknown</code></pre></section><section id=\"c38202c0c6qwe\" class=\"section\"><h2 id=\"tayMx\">问题原因</h2><p id=\"6569e040c62ep\">该问题可能是<code data-tag=\"codeph\" class=\"codeph\">/bin/su</code>文件缺少<code data-tag=\"code\" class=\"code\">s</code>权限，导致普通用户无法使用<code data-tag=\"code\" class=\"code\">su</code>命令切换root用户。</p></section><section id=\"8ff2e4f0c6lh6\" class=\"section\"><h2 id=\"EFTFF\">解决方案</h2><ol id=\"d9070b42c6nap\"><li id=\"d9070b40c6k3f\"><p id=\"a9f5bf54c6kyl\">使用root用户登录ECS实例。</p><p id=\"dce81600c6yhz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"db427c51c6jrn\"><p id=\"db427c50c6bq9\">执行如下命令，查看<code data-tag=\"codeph\" class=\"codeph\">/bin/su</code>文件权限。</p><pre id=\"3olunh\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls -l /bin/su</code></pre><p id=\"5448ffc0c6c6f\">返回结果如下所示，说明<code data-tag=\"codeph\" class=\"codeph\">/bin/su</code>文件缺少<code data-tag=\"code\" class=\"code\">s</code>权限。</p><img id=\"51564ca0c6pko\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8796929761/p606060.png\" alt=\"查看权限\" placement=\"break\" class=\"image break\"></li><li id=\"f61e1891c6y46\"><p id=\"f61e1890c6dbe\">执行如下命令，为<code data-tag=\"codeph\" class=\"codeph\">/bin/su</code>文件添加<code data-tag=\"code\" class=\"code\">s</code>权限。</p><pre data-tag=\"codeblock\" id=\"a9efa4d2c6jki\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chmod u+s /bin/su</code></pre></li><li id=\"7b0c3f51c69n5\"><p id=\"7b0c3f50c68t4\">重新使用<code data-tag=\"code\" class=\"code\">su</code>命令切换root用户，确保可以正常切换。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/ubuntu-instances-of-ecs-perform-an-apt-get-the-update-command-prompt-no-pubkey-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>Ubuntu系统的ECS实例中，执行apt-get update命令时提示“NO_PUBKEY”错误怎么办</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Ubuntu系统的ECS实例中，执行apt-get update命令时提示“NO_PUBKEY”错误怎么办</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:32:09</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"42d4cf7065a5o\"><p data-tag=\"shortdesc\" id=\"42db381165huc\" class=\"shortdesc\">本文介绍在Ubuntu系统的ECS实例中，执行apt-get update命令时提示“NO_PUBKEY”错误时的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"671fb8b0c65jf\" class=\"section\"><h2 id=\"tzCCX\">问题现象</h2><p id=\"42db3812655hk\">在Ubuntu系统的ECS实例中，执行<code data-tag=\"code\" class=\"code\">apt-get update</code>命令提示以下错误。</p><pre id=\"42d4cf7165tq1\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>The following signatures cloudn't be verified because the public key is not available: NO_PUBKEY [$PUBKEY]</code></pre><div type=\"note\" id=\"42db381365qv6\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"ctxze\">[$PUBKEY]指的是您的密钥。</p></div></div></section><section id=\"d0e02b90c6iuo\" class=\"section\"><h2 id=\"682ff030c6gle\"><b>问题原因</b></h2><p id=\"79cb8980c6mj7\">该问题是由apt包系统的安全机制引起的，有时系统无法包含所有的Key（公钥），导致执行<code data-tag=\"code\" class=\"code\">apt-get update</code>命令时，签名无法验证而出现该错误。</p></section><section id=\"cd9e4700c60sb\" class=\"section\"><h2 id=\"CpYJG\">解决方案</h2><ol id=\"5b28fa32c631h\"><li id=\"5b28fa30c6yed\"><p id=\"519623b0c6ag9\">远程连接ECS实例。 </p><p id=\"60c5beb0c6pfk\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"626dc961c6s72\"><p id=\"42db5f2065xr8\">执行如下命令，注册密钥。</p><pre id=\"42d4cf7265n7d\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-key adv --recv-keys --keyserver keyserver.ubuntu.com [$PUBKEY]</code></pre></li><li id=\"b30754e1c65e1\"><p id=\"b30754e0c6mpi\">重新执行<code data-tag=\"code\" class=\"code\">apt-get update</code>命令，确保不会再出现该错误。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-system-error-58-occurs-while-i-access-the-shared-directory-of-a-nas-file-system-on-a-windows-operating-system", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows系统挂载NAS共享目录时报错“发生系统错误 58”如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows系统挂载NAS共享目录时报错“发生系统错误 58”如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-06 11:01:56</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"8dd466d0a1bde\"><p data-tag=\"shortdesc\" id=\"8ddaa867a1ftb\" class=\"shortdesc\">本文介绍Windows系统挂载NAS共享目录时报错“发生系统错误 58”的问题原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"5a9gzx\">问题描述</h2><p id=\"8ddacf71a176k\">在Windows Server 2008 32位标准版系统中，访问NAS共享目录时，无法访问“\\\\xx\\myshare”，错误信息提示如下。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0303577761/p519525.png\" width=\"600\" class=\"image break\"><h2 id=\"rqarfn\">问题原因</h2><p id=\"8ddacf74a1t21\">Windows Server 2008 32位标准版系统对SMB（Server Message Block）协议版本出现兼容性问题。</p><h2 id=\"as4lap\">解决方案</h2><ol id=\"1acf4d02bb5ag\"><li id=\"1acf4d00bbmpw\"><p id=\"c0c01323bbimp\">为系统盘创建快照，做好数据备份。</p><p id=\"598f7d70bbtpt\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></li><li id=\"457a0a81bbn5z\"><p id=\"457a0a80bb0k4\">更换操作系统（系统盘）。</p><p id=\"58485770bblx4\">ECS实例需更换成Windows Server 2008企业版或以上的操作系统。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/replace-the-operating-system-of-an-instance\">更换操作系统（系统盘）</a>。</p></li><li id=\"5b273471bbo83\"><p id=\"5b273470bben1\">使用快照创建新的按量付费的云盘。</p><p id=\"99a80760bb02t\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-disk-from-a-snapshot\">使用快照创建云盘</a>。</p></li><li id=\"b88be570bb0nv\"><p id=\"beb1fe30bbc32\">将云盘挂载到ECS实例上做数据恢复。</p><p id=\"c0a20e60bbcf8\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/attach-a-data-disk\">挂载数据盘</a>。</p></li><li id=\"c5ef7a61bbb0p\"><p id=\"c8e93260bb2ts\">数据恢复后，建议及时释放云盘。</p><p id=\"ca8d1e60bb7r1\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/release-a-disk\">释放云盘</a>。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/debian-8-system-of-ecs-example-execute-apt-get-the-update-command-prompt-404-not-found-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>Debian 8系统的ECS实例中，执行“apt-get update”命令提示“404 Not Found”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Debian 8系统的ECS实例中，执行“apt-get update”命令提示“404 Not Found”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:53:20</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"25d838c0c6k5r\"><p data-tag=\"shortdesc\" id=\"25dcf3b6c6eas\" class=\"shortdesc\">本文介绍Debian 8系统的ECS实例中，执行“apt-get update”命令提示“404 Not Found”错误的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><div type=\"important\" id=\"e4032a20c96b3\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"e66228c0c9z4r\">Debian 8操作系统版本结束了生命周期（EOL），建议您升级到最新的Debian操作系统。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/end-of-support-for-operating-systems\">操作系统停止支持计划</a>。</p></div></div><section id=\"bcaebe60c6tj1\" class=\"section\"><h2 id=\"PxAGY\">问题现象</h2><p id=\"5b151120c6qbr\">在Debian 8系统的ECS实例中，执行“apt-get update”命令提示如下错误信息。</p><pre data-tag=\"codeblock\" id=\"25d838c1c6bel\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Err http：//mirrors.could.aliyuncs.com jessie/updates/main Sources\n404 Not Found\nErr http：//mirrors.could.aliyuncs.com jessie/updates/contrib Sources\n404 Not Found\nErr http：//mirrors.could.aliyuncs.com jessie/updates/non-free Sources\n404 Not Found</code></pre></section><section id=\"65899c70c6d7u\" class=\"section\"><h2 id=\"XKSbH\">问题原因</h2><p id=\"25dd1ac0c6ulr\">ECS实例中<code data-tag=\"codeph\" class=\"codeph\">/etc/apt/sources.list</code>文件中的软件源地址错误或者无效。</p></section><section id=\"b8360cf0c6v3h\" class=\"section\"><h2 id=\"25dd1ac1c64at\">解决方案</h2><ol id=\"a5f92002c6796\"><li id=\"a5f92000c6orb\"><p id=\"519623b0c6ag9\">远程连接ECS实例。 </p><p id=\"a7895cf0c6j3q\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"aaa235b1c6v6l\"><p id=\"aaa235b0c63n2\">执行如下命令，进入/etc/apt目录。</p><pre id=\"c2uago\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cd /etc/apt</code></pre></li><li id=\"3313dde1c6x5t\"><p id=\"3313dde0c6loy\">分别执行如下命令，备份<code data-tag=\"codeph\" class=\"codeph\">sources.list</code>和<code data-tag=\"codeph\" class=\"codeph\">sources.list.d</code>文件。 </p><pre id=\"piauua\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>mv sources.list sources.list.bak\nmv sources.list.d sources.list.d.bak</code></pre></li><li id=\"14a49393c6us2\"><p id=\"a9290330c6jji\">新建一个<code data-tag=\"codeph\" class=\"codeph\">sources.list</code>文件，在文件中添加以下内容。</p><ol id=\"2dab6fd1c6ohw\"><li id=\"2c3634f1c6r1c\"><p id=\"2c3634f0c6mch\">执行如下命令，新建并打开<code data-tag=\"codeph\" class=\"codeph\">sources.list</code>文件。</p><pre id=\"uzozyg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim sources.list</code></pre></li><li id=\"81813a90c67h3\"><p id=\"81811380c6z0k\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式，添加以下内容。</p><pre data-tag=\"codeblock\" id=\"25d838c2c6ofq\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>deb http://mirrors.aliyun.com/debian/ jessie-proposed-updates main non-free contrib\ndeb-src http://mirrors.aliyun.com/debian/ jessie main non-free contrib\ndeb-src http://mirrors.aliyun.com/debian/ jessie-proposed-updates main non-free contrib</code></pre></li><li id=\"9bac2470c6qne\"><p id=\"dd2b5639c6dmx\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存退出。</p></li></ol></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/linux-system-of-ecs-instance-how-to-configure-the-crontab-timing-tasks-and-common-problems", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>Linux系统的ECS实例中，如何配置crontab定时任务及常见问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例中，如何配置crontab定时任务及常见问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:25:22</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"27ba5520c64mn\"><p data-tag=\"shortdesc\" id=\"27c2b991c6zhv\" class=\"shortdesc\">本文介绍如何在Linux系统的ECS实例中配置crontab定时任务，以及配置定时任务中的常见问题和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"b002b880c684j\" class=\"section\"><h1 id=\"b2c6cc70c6br9\">crontab定时任务</h1><section id=\"b8c4fff0c6rol\" class=\"section\"><h3 data-tag=\"h3\" id=\"27c2e0a1c6nqv\" class=\"h3\"><b>新建定时任务</b></h3><ol id=\"27c2e0a2c655u\"><li id=\"27c2e0a3c6cxx\"><p id=\"27c2e0a4c6sxy\">远程连接ECS实例。</p><p id=\"510bff52c9dm3\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"50a1a4c0c9tom\"><p id=\"50a17db0c9ktp\">执行如下命令，打开crontab定时任务编辑界面。 </p><pre data-tag=\"codeblock\" id=\"27ba5522c6r5c\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>crontab -e</code></pre></li><li id=\"cad2f501c6n8g\"><p id=\"cad2f500c6zb3\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。 </p></li><li id=\"27c2e0a6c69s4\"><p id=\"27c2e0a7c6czl\">添加定时任务，定时任务如下所示。 </p><pre data-tag=\"codeblock\" id=\"27ba5523c6af0\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>5 * * * * /etc/cpu_monitor.sh  #开机后，每5分钟执行一次CPU监控脚本。\n30 21 * * * /usr/local/etc/rc.d/lighttpd restart  #每天的21:30重启Apache。\n45 4 1,10,22 * * /usr/local/etc/rc.d/lighttpd restart  #每月1、10、22日的4:45重启Apache。</code></pre></li><li id=\"f900b431c6gzk\"><p id=\"f900b430c6voz\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存退出。</p></li></ol></section><section id=\"b68aee70c6k3q\" class=\"section\"><h3 data-tag=\"h3\" id=\"27c307b2c6z5y\" class=\"h3\"><b>查看定时任务</b></h3><p id=\"27c307b3c6v6v\">执行<code data-tag=\"codeph\" class=\"codeph\">crontab -l</code>命令，查看已经配置的定时任务。</p><img id=\"c07e0a30c6zx9\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1907929761/p606061.png\" alt=\"CPU监控脚本\" placement=\"break\" class=\"image break\"><p id=\"bf3cd7a0c6xn2\">如果返回<code data-tag=\"code\" class=\"code\">no crontab for username</code>信息，表示没有配置定时任务，</p><div type=\"note\" id=\"e4802df1c6zkl\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"e4802df0c6d16\">username为您当前登录的用户。</p></div></div><img id=\"e1bacc60c6prj\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1907929761/p606062.png\" alt=\"no crontab\" placement=\"break\" class=\"image break\"></section><section id=\"b3b22bf0c6n4k\" class=\"section\"><h2 data-tag=\"h3\" id=\"27c307b5c6lem\" class=\"h3\"><b>删除定时任务</b></h2><ul id=\"27c32ec1c6kn0\"><li id=\"27c32ec2c60oz\"><p id=\"27c32ec3c6w9g\">删除所有定时任务。</p><p id=\"127502d0c6wc8\">执行如下命令，删除所有的定时任务。 </p><pre data-tag=\"codeblock\" id=\"27ba5524c6zyq\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>crontab -r</code></pre></li><li id=\"27c32ec5c6vwc\"><p id=\"27c32ec6c6dtt\">删除具体的定时任务。</p><ol id=\"27804770c6hoj\"><li id=\"27804771c6ojc\"><p id=\"27804772c6oto\">执行如下命令，打开crontab定时任务编辑界面。 </p><pre data-tag=\"codeblock\" id=\"27804773c635u\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>crontab -e</code></pre></li><li id=\"27804774c6c5m\"><p id=\"27804775c6bpc\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。 </p></li><li id=\"2c8b0521c6ydn\"><p id=\"2c8b0520c6uvj\">根据需要，在定时任务前加#号即可注释该定时任务。 </p><pre data-tag=\"codeblock\" id=\"27ba5525c6ok2\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>5 * * * * /etc/cpu_monitor.sh  #开机后，每5分钟执行一次CPU监控脚本。\n#30 21 * * * /usr/local/etc/rc.d/lighttpd restart  #每天的21:30重启Apache。\n#45 4 1,10,22 * * /usr/local/etc/rc.d/lighttpd restart   #每月的1、10、22日的4:45重启Apache。</code></pre></li><li id=\"ab005f40c6g86\"><p id=\"ab94fe20c676y\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存退出。</p></li></ol></li></ul></section></section><section id=\"27116390c6vj5\" class=\"section\"><h2 data-tag=\"h3\" id=\"27c355d0c6z2f\" class=\"h3\"><b>常见问题</b></h2><section id=\"2ad5e5a0c6w6k\" class=\"section\"><h3 data-tag=\"h4\" id=\"27c355d1c6xim\" class=\"h4\"><b>非root用户，执行</b><code data-tag=\"codeph\" class=\"codeph\">crontab</code><b>命令时提示“You (*) are not allowed to use this program (crontab)”错误。</b></h3><section id=\"4b523e00c6cpo\" class=\"section\"><h4 data-tag=\"h5\" id=\"27c355d2c6vi2\" class=\"h5\"><b>问题现象</b></h4><p id=\"27c355d3c617x\">使用非root用户执行<code data-tag=\"codeph\" class=\"codeph\">crontab -l</code>或<code data-tag=\"codeph\" class=\"codeph\">crontab -e</code>等命令时，出现如下错误信息。</p><pre data-tag=\"codeblock\" id=\"27ba5526c650x\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>You (****) are not allowed to use this program (crontab)</code></pre></section><section id=\"47986a50c6f2w\" class=\"section\"><h4 data-tag=\"h5\" id=\"27c355d5c6w47\" class=\"h5\"><b>问题原因</b></h4><p id=\"27c355d6c6cmz\">该问题可能是因为crontab任务有权限控制，非root用户默认没有操作crontab的权限。</p><p id=\"15ecb080c603y\"><code data-tag=\"codeph\" class=\"codeph\">cron.allow</code>或<code data-tag=\"codeph\" class=\"codeph\">cron.deny</code>文件用于控制用户对crontab命令的访问。</p><ul id=\"27c37ce0c6imf\"><li id=\"27c37ce1c6kv6\"><p id=\"27c37ce2c62sd\"><code data-tag=\"codeph\" class=\"codeph\">cron.allow</code>文件中的用户可以使用crontab命令。</p></li><li id=\"27c37ce3c6cq1\"><p id=\"27c37ce4c6qyj\"><code data-tag=\"codeph\" class=\"codeph\">cron.deny</code>文件中的用户不能使用crontab命令。</p></li></ul></section><section id=\"4485ac10c6tnm\" class=\"section\"><h4 data-tag=\"h5\" id=\"27c37ce6c62x9\" class=\"h5\"><b>解决方案</b></h4><ol id=\"27c3a3f1c68vm\"><li id=\"27c3a3f2c6mk4\"><p id=\"27c3a3f3c6j3y\">使用root用户远程连接ECS实例。</p><p id=\"c20da180c6gn5\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"d16b58c1c6lh4\"><p id=\"d16b58c0c602p\">分别执行如下命令，查看是否存在<code data-tag=\"codeph\" class=\"codeph\">cron.allow</code>或<code data-tag=\"codeph\" class=\"codeph\">cron.deny</code>文件。</p><pre id=\"wnituc\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>find /etc/cron.allow\nfind /etc/cron.deny</code></pre><p id=\"be743c30c68wr\"><code data-tag=\"codeph\" class=\"codeph\">cron.allow</code>或<code data-tag=\"codeph\" class=\"codeph\">cron.deny</code>文件是否存在与是否可以使用crontab命令的用户关系说明如下。</p><table id=\"b3dbf1b0c6xmf\" tablewidth=\"709\" tablecolswidth=\"149 139 421\" class=\"table\"><colgroup colwidth=\"0.63*\" style=\"width:21.02%\"></colgroup><colgroup colwidth=\"0.59*\" style=\"width:19.61%\"></colgroup><colgroup colwidth=\"1.78*\" style=\"width:59.38%\"></colgroup><tbody class=\"tbody\"><tr id=\"b3dbf1b7c6zc7\"><td id=\"b3dbf1b2c66g0\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"b3dbf1b1c6syp\"><b>cron.allow文件是否存在</b></p></td><td id=\"b3dbf1b4c62s6\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p data-track=\"19\" id=\"cbef1f20c631w\"><b>cron.deny文件是否存在</b></p></td><td id=\"b3dbf1b6c60no\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p data-track=\"20\" id=\"e369b612c6o5m\"><b>有权限使用crontab的用户范围</b></p></td></tr><tr id=\"b3dc18c5c6ao1\"><td id=\"b3dc18c0c6gbv\" rowspan=\"1\" colspan=\"1\"><p id=\"b3dbf1b8c66ho\">不存在</p></td><td id=\"b3dc18c2c6ynh\" rowspan=\"1\" colspan=\"1\"><p data-track=\"23\" id=\"01214920c63w6\">不存在</p></td><td id=\"b3dc18c4c6n71\" rowspan=\"1\" colspan=\"1\"><p data-track=\"24\" id=\"f0fdd0e0c64g9\">仅root用户可使用crontab命令。</p></td></tr><tr id=\"b3dc3fd3c6dbc\"><td id=\"b3dc18c7c6cld\" rowspan=\"1\" colspan=\"1\"><p id=\"fa792f20c6anm\">存在</p></td><td id=\"b3dc3fd0c6uam\" rowspan=\"1\" colspan=\"1\"><p data-track=\"23\" id=\"0038e4f0c6dtg\">不存在</p></td><td id=\"b3dc3fd2c64ec\" rowspan=\"1\" colspan=\"1\"><p data-track=\"28\" id=\"067f08d0c6vup\">仅cron.allow文件中的用户可使用crontab命令。</p></td></tr><tr id=\"b3dc3fdac6cbc\"><td id=\"b3dc3fd5c6u4p\" rowspan=\"1\" colspan=\"1\"><p data-track=\"30\" id=\"0a3cd420c6jfo\">不存在</p></td><td id=\"b3dc3fd7c6psx\" rowspan=\"1\" colspan=\"1\"><p data-track=\"31\" id=\"0c81bb10c6vn7\">存在</p></td><td id=\"b3dc3fd9c62li\" rowspan=\"1\" colspan=\"1\"><p id=\"0f069130c6qdu\">不在cron.deny文件中的用户都可以使用crontab命令。</p><div type=\"note\" id=\"6dffc4e1c63i7\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"7050b9c0c6cvh\">若cron.deny文件内容为空，则所有用户都可以使用crontab令。</p></div></div></td></tr><tr id=\"b3dc66e1c6uoe\"><td id=\"b3dc3fdcc6vut\" rowspan=\"1\" colspan=\"1\"><p id=\"b3dc3fdbc62wb\">存在</p></td><td id=\"b3dc3fdec6at4\" rowspan=\"1\" colspan=\"1\"><p id=\"b3dc3fddc68xk\">存在</p></td><td id=\"b3dc66e0c6f9z\" rowspan=\"1\" colspan=\"1\"><p data-track=\"36\" id=\"1affc0b0c63fy\">仅cron.allow文件中的用户可以使用crontab命令。</p><div type=\"note\" id=\"9a45d850c6j14\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"9cdcd6e0c6kvt\">cron.allow优先级高于cron.deny，此时cron.deny不起作用。</p></div></div></td></tr></tbody></table></li><li id=\"a7bc0050c6i5c\"><p id=\"a7bbd940c6jso\">根据需要，编辑<code data-tag=\"codeph\" class=\"codeph\">cron.allow</code>或<code data-tag=\"codeph\" class=\"codeph\">cron.deny</code>文件。</p><ul id=\"fe0f0aa1c67nc\"><li id=\"fde03271c65n0\"><p id=\"e4a3ee50c6g5x\">如果不存在<code data-tag=\"codeph\" class=\"codeph\">cron.allow</code>文件，若<code data-tag=\"codeph\" class=\"codeph\">cron.deny</code>文件中存在非root用户的用户名，请删除该用户的用户名后，保存<code data-tag=\"codeph\" class=\"codeph\">cron.deny</code>。</p></li><li id=\"274b3970c60pq\"><p id=\"2cfc2230c62o5\">如果存在<code data-tag=\"codeph\" class=\"codeph\">cron.allow</code>文件，将该非root用户添加到<code data-tag=\"codeph\" class=\"codeph\">cron.allow</code>文件中，保存<code data-tag=\"codeph\" class=\"codeph\">cron.allow</code>。</p></li></ul></li><li id=\"27c3a3f4c6yjm\"><p id=\"27c3a3f5c67l4\">执行如下命令，重启cron服务 。</p><pre data-tag=\"codeblock\" id=\"27ba5527c6mwu\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart crond.service</code></pre></li><li id=\"27c3cb00c6fe1\"><p id=\"27c3cb01c65gi\">切换到该非root用户，重新执行<code data-tag=\"codeph\" class=\"codeph\">crontab</code>命令，确保可以正常执行。</p></li></ol></section></section><section id=\"2db49b90c623w\" class=\"section\"><h3 data-tag=\"h4\" id=\"27c3cb05c6p3m\" class=\"h4\"><b>使用</b>crontab -e<b>创建定时任务失败，提示“command not found”错误。</b></h3><section id=\"35041920c6lea\" class=\"section\"><h4 data-tag=\"h5\" id=\"27c3cb06c6o5g\" class=\"h5\"><b>问题现象</b></h4><p id=\"27c3cb07c6wwo\">使用Linux系统的ECS实例中，执行<code data-tag=\"code\" class=\"code\">crontab -e</code>创建定时任务时执行失败，提示“command not found”错误。</p><p id=\"ff393d50c6fay\">执行cd /etc/crontab进入主目录，提示“No such file or directory”错误。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1907929761/p519260.png\" class=\"image break\"></section><section id=\"394da9b0c6y4n\" class=\"section\"><h4 data-tag=\"h5\" id=\"27c3f210c6t28\" class=\"h5\"><b>问题原因</b></h4><p id=\"27c3f211c60aw\">该问题是因为crontab应用包未安装，或安装后程序文件损坏导致。</p></section><section id=\"3bae7d10c62fg\" class=\"section\"><h4 data-tag=\"h5\" id=\"27c3f213c68lx\" class=\"h5\"><b>解决方案</b></h4><ol id=\"27c3f214c6h18\"><li id=\"27c3f215c6vfh\"><p id=\"519623b0c6ag9\">远程连接ECS实例。</p><p id=\"407b0502c6bl9\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"3b83a841c60z7\"><p id=\"3b83a840c60o1\">执行如下命令，安装crontabs依赖包和crontabs包。 </p><pre data-tag=\"codeblock\" id=\"27ba5528c6dep\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install vixie-cron\nyum install crontabs</code></pre></li><li id=\"27c41924c6ml1\"><p id=\"27c41925c68qr\">再次执行<code data-tag=\"codeph\" class=\"codeph\">crontab -e</code>命令，确认可以正常编辑新的计划任务。</p></li></ol></section></section></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/in-linux-instance-apache-ab-pressure-test-the-prompt-apr-pollset-poll-the-timeout-specified-has-expired-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>在Linux实例的Apache中进行ab压力测试时，提示“apr_pollset_poll: The timeout specified has expired”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在Linux实例的Apache中进行ab压力测试时，提示“apr_pollset_poll: The timeout specified has expired”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:30:50</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"6bded910b5s00\"><p data-tag=\"shortdesc\" id=\"6beb3521b5jxp\" class=\"shortdesc\">在Linux实例的Apache中进行ab压力测试时，提示“apr_pollset_poll: The timeout specified has expired”错误时的问题原因、解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"01e426e0b56gl\" class=\"section\"><h2 id=\"h1--strong-strong-1\" data-spm-anchor-id=\"a2c9r.12641779.0.i0.51bbufbKufbKdH\">问题描述</h2><p id=\"6beb3522b5sy4\">在Linux实例的Apache中进行ab压力测试时（如：<code data-tag=\"code\" class=\"code\">ab -c 10 -n 5000 http://192.168.XXX.XXX/</code>）提示以下报错。</p><pre data-tag=\"codeblock\" id=\"6bdf0020b5fy1\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apr_pollset_poll: The timeout specified has expired</code></pre></section><section id=\"03824680b5kp8\" class=\"section\"><h2 id=\"h1-u539Fu56E0u5206u67902\" data-spm-anchor-id=\"a2c9r.12641779.0.i2.51bbufbKufbKdH\">问题原因</h2><p id=\"6beb5c30b50er\">由于压测的并发请求超出ECS实例的最大连接条目，在没有执行完就报错。</p></section><section id=\"2d3a6da0a6yp3\" class=\"section\"><h2 id=\"93e578a0b5akp\" data-spm-anchor-id=\"a2c9r.12641779.0.i3.51bbufbKufbKdH\">解决方案</h2><p id=\"91a63b31b5byw\">您可以登录实例，修改<code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">/etc/sysctl.conf</span></code>文件内容并<span style=\"color:rgb(24, 24, 24)\">在ab测试命令中加</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">-k</span></code><span style=\"color:rgb(24, 24, 24)\">参数</span>以解决此问题。</p><ol id=\"1230cb40a63pg\"><li id=\"918827b1b5tz9\"><p id=\"918827b0b576l\"><span style=\"color:rgb(24, 24, 24)\">远程连接ECS实例。</span></p><p id=\"ec3c24b0b3t1x\"><span style=\"color:rgb(24, 24, 24)\">具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a><span style=\"color:rgb(24, 24, 24)\">。</span></p></li><li id=\"9b686240b59ld\"><p id=\"9b683b30b5uw1\"><span style=\"color:rgb(24, 24, 24)\">修改内核参数文件。</span></p><ol id=\"cd925551b592w\"><li id=\"cd5ec231b5vb5\"><p id=\"cd5ec230b5vmf\"><span style=\"color:rgb(24, 24, 24)\">执行如下命令，打开内核参数文件（</span><code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code><span style=\"color:rgb(24, 24, 24)\">）。</span></p><pre id=\"ns9vfd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim etc/sysctl.conf</code></pre></li><li id=\"d8750bc1b5yem\"><p id=\"d8750bc0b5bkh\"><span style=\"color:rgb(24, 24, 24)\">在内核参数文件中，添加如下内容。</span></p><pre data-tag=\"codeblock\" id=\"6bdf0021b5yy2\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>net.ipv4.netfilter.ip_conntrack_max = 3276800\nnet.ipv4.tcp_tw_recycle = 0\nnet.ipv4.tcp_tw_reuse = 0\nnet.ipv4.tcp_orphan_retries = 1\nnet.ipv4.tcp_fin_timeout = 25\nnet.ipv4.tcp_max_orphans = 8192\nnet.ipv4.ip_local_port_range = 32768    61000</code></pre></li><li id=\"e7eab7d0b5g0h\"><p id=\"e7ea90c0b5680\"><span style=\"color:rgb(24, 24, 24)\">按</span><span style=\"color:rgb(24, 24, 24)\"><b>Esc</b></span><span style=\"color:rgb(24, 24, 24)\">键、输入</span><span style=\"color:rgb(24, 24, 24)\"><b>:wq!</b></span><span style=\"color:rgb(24, 24, 24)\">并按</span><span style=\"color:rgb(24, 24, 24)\"><b>Enter</b></span><span style=\"color:rgb(24, 24, 24)\">键。</span></p></li></ol></li><li id=\"c8782e51b5pwr\"><p id=\"252ca220b5ttu\"><span style=\"color:rgb(24, 24, 24)\">执行如下命令，使配置生效。</span></p><pre data-tag=\"codeblock\" id=\"6bdf0022b59wj\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sysctl -p /etc/sysctl.conf</code></pre></li><li id=\"36201490b5m6s\"><p id=\"361fed80b5idv\"><span style=\"color:rgb(24, 24, 24)\">在ab测试命令中加</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">-k</span></code><span style=\"color:rgb(24, 24, 24)\">参数，并重新执行该命令，确认不会再出现该问题。</span></p><p id=\"485fbb00b6psj\"><span style=\"color:rgb(0, 0, 0);background-color:rgb(254, 254, 242)\">如以下示例，在</span><code data-tag=\"code\" class=\"code\">ab -c 10 -n 5000 http://192.168.XXX.XXX/</code>命令中添加<code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">-k</span></code><span style=\"color:rgb(24, 24, 24)\">参数。</span></p><pre id=\"yhh7ue\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ab -c 10 -n 5000 -k http://192.168.XXX.XXX/</code></pre></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/when-you-run-the-ethtool-command-the-system-prompts-cannot-get-device-ring-settings-operation-not-supported", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>在CentOS 6.5系统的ECS实例中，执行ethtool -g eth0命令，提示“Cannot get device ring settings: Operation not supported”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在CentOS 6.5系统的ECS实例中，执行ethtool -g eth0命令，提示“Cannot get device ring settings: Operation not supported”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-28 10:51:56</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"df705d90b575n\"><p data-tag=\"shortdesc\" id=\"df79d374b53vk\" class=\"shortdesc\">本文介绍在CentOS 6.5系统的ECS实例中，执行<code data-tag=\"codeph\" class=\"codeph\">ethtool -g eth0</code>命令，提示“Cannot get device ring settings: Operation not supported”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"99cb4650b5lvf\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"df79fa80b5rkw\">在CentOS 6.5系统的ECS实例中，执行<code data-tag=\"codeph\" class=\"codeph\">ethtool -g eth0</code>命令，查看网卡的Buffer容量，出现以下信息。</p><pre data-tag=\"codeblock\" id=\"df705d91b5h92\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Ring parameters for eth0:\nCannot get device ring settings: Operation not supported</code></pre><img id=\"680df7c0b5yzg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2403647761/p573468.png\" alt=\"2023-02-26_17-00-57\" placement=\"break\" class=\"image break\"></section><section id=\"a40efda0b5pq4\" class=\"section\"><h2 id=\"df79fa81b56f8\">问题原因</h2><p id=\"df79fa82b5tlc\">该系统的ECS实例不支持使用<code data-tag=\"codeph\" class=\"codeph\">-g</code>参数的查询<span style=\"color:rgb(51, 51, 51)\">环形参数（ringbuffer）</span>。</p></section><section id=\"f59cad20b5alo\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"df7a6fb2b5jxd\">如果您需要查看网卡Buffer容量，可以通过<code data-tag=\"codeph\" class=\"codeph\">ifconfig</code>命令中的txqueuelen参数进行查看。</p><div type=\"note\" id=\"9294b281b5tcj\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"933cb250b5sph\"><span style=\"color:rgb(24, 24, 24);background-color:rgb(220, 238, 255)\">Ce</span><span style=\"color:rgb(24, 24, 24);background-color:rgb(220, 238, 255)\">ntOS 6操作系统</span><span style=\"color:rgb(24, 24, 24);background-color:rgb(220, 238, 255)\">版本结束了生命周期（EOL），按照社区规则，CentOS 6的源地址内容已移除。当您在CentOS 6系统内继续使用默认配置的源地址时会发生报错。建议您先切换CentOS 6的源地址，然后再进行操作。具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-the-centos-6-source-address\">CentOS 6 EOL如何切换源？</a><span style=\"color:rgb(24, 24, 24);background-color:rgb(220, 238, 255)\">。</span></p></div></div><img id=\"4dd77fb0b585p\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2403647761/p573469.png\" alt=\"2023-02-26_17-09-05\" placement=\"break\" class=\"image break\"></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/how-do-i-fix-the-su-faild-to-execute-or-bin-or-bash-permission-denied-error-when-i-switch-users-by-running-the-su-command", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>Linux实例使用su命令切换用户时，提示“su: failed to execute /bin/bash: Permission denied”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux实例使用su命令切换用户时，提示“su: failed to execute /bin/bash: Permission denied”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:30:39</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"e60257e0aeuoy\"><p data-tag=\"shortdesc\" id=\"e608c084ae467\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中，使用su命令切换用户失败，提示“su: failed to execute /bin/bash: Permission denied”错误时的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"43225ec0aeuog\" class=\"section\"><h2 id=\"e608c085ae2ht\">问题现象</h2><p id=\"e608c086aeyjc\">在Linux系统的ECS实例中，使用<code data-tag=\"code\" class=\"code\">su</code>命令切换用户时，提示以下错误。</p><pre data-tag=\"codeblock\" id=\"e60257e1ae7xg\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>su: faild to execute /bin/bash: Permission denied</code></pre></section><section id=\"4d2a93b0aeugx\" class=\"section\"><h2 id=\"48150090ae0wr\">问题原因</h2><p id=\"48eb6360aeozz\">该问题可能是因为ECS实例操作系统内部根目录<code data-tag=\"code\" class=\"code\">/</code>或<code data-tag=\"code\" class=\"code\">/bin/bash</code>文件权限错误，导致使用<code data-tag=\"code\" class=\"code\">su</code>命令切换用户报错。</p></section><section id=\"ce31c010b3bo9\" class=\"section\"><h2 id=\"f591bf90b3op1\">解决方案</h2><p id=\"f53e2150b31to\"><span style=\"color:rgb(24, 24, 24)\">您可以参考以下步骤，根据实际需要修改根目录</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">/</span></code><span style=\"color:rgb(24, 24, 24)\">或</span><code data-tag=\"code\" class=\"code ph codeph\" id=\"codeph-zir-yrk-zh1\"><span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">/bin/bash</span></code><span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">文件</span>的<span style=\"color:rgb(24, 24, 24)\">权限，来解决使用</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">su</span></code><span style=\"color:rgb(24, 24, 24)\">命令切换用户报错问题。</span></p><ol class=\"ol steps\" id=\"steps-3w7-af7-yk1\"><li class=\"li step stepexpand\" id=\"step-q54-86m-dy4\"><p id=\"a52e90b1b3w3h\"><span style=\"color:rgb(24, 24, 24)\">使用root用户远程连接ECS实例。</span></p><p class=\"itemgroup info\" id=\"info-d6f-lre-3tc\"><span style=\"color:rgb(24, 24, 24)\">具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a><span style=\"color:rgb(24, 24, 24)\">。</span></p></li><li class=\"li step stepexpand\" id=\"step-2qr-5f1-cb8\"><p id=\"db411ea0b8x9c\">执行如下命令，查看<code data-tag=\"code\" class=\"code ph codeph\" id=\"c9516030b3dp2\">/bin/bash</code>文件的隐藏属性。</p><pre id=\"3ef4e572b8kg6\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>lsattr /bin/bash</code></pre><ul id=\"3ef4e573b8t3d\"><li id=\"3ef4e574b8afe\"><p id=\"47148440b8qim\">若<code data-tag=\"code\" class=\"code ph codeph\" id=\"f7346800b9g2d\">/bin/bash</code>文件被配置了<code data-tag=\"code\" class=\"code\">i</code>属性（不能删除数据）或<code data-tag=\"code\" class=\"code\">a</code>属性（不能修改数据），如下图所示，存在<code data-tag=\"code\" class=\"code\">i</code>属性，请执行<code data-tag=\"code\" class=\"code\">chattr -i /bin/bash</code>移除<code data-tag=\"code\" class=\"code\">i</code>属性。</p><img id=\"c6db4820b8w8r\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4835287761/p575866.png\" alt=\"lsattr\" placement=\"break\" class=\"image break\"></li><li id=\"3ef4e576b84h2\"><p id=\"6997a920b8wqk\">若<code data-tag=\"code\" class=\"code ph codeph\" id=\"f7346801b9377\">/bin/bash</code>文件没有<code data-tag=\"code\" class=\"code\">i</code>、<code data-tag=\"code\" class=\"code\">a</code>属性，请继续执行下一步。</p></li></ul></li><li id=\"3e8b4e31b8p7k\"><p id=\"3e8b4e30b8p6m\">执行如下命令，查看<code data-tag=\"code\" class=\"code ph codeph\" id=\"f7346802b9a9m\">/bin/bash</code>文件权限是否正确。</p><pre data-tag=\"codeblock\" id=\"2f617112b36ia\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls -l /bin/bash</code></pre><ul id=\"11510f60b8i5h\"><li id=\"11510f61b8h1z\"><p id=\"11510f62b8360\">若<code data-tag=\"code\" class=\"code ph codeph\" id=\"7605b0e0b9vo3\">/bin/bash</code>文件没有读取和执行权限（555），如下图所示，<code data-tag=\"code\" class=\"code ph codeph\" id=\"7605b0e1b9deh\">/bin/bash</code>文件只有读权限（444），请执行<code data-tag=\"code\" class=\"code\">chmod a+rx /bin/bash</code>为<code data-tag=\"code\" class=\"code ph codeph\" id=\"f7346803b9mgp\">/bin/bash</code>文件添加读取和执行权限。</p><img id=\"3d0aa490b93ki\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4835287761/p576745.png\" alt=\"查看bash权限\" placement=\"break\" class=\"image break\"></li><li id=\"fefc5f43b8s4y\"><p id=\"f298c440b8er9\">若<code data-tag=\"code\" class=\"code ph codeph\" id=\"7605b0e2b9e8b\">/bin/bash</code>文件存在读取和执行权限（555），请继续执行下一步。</p></li></ul></li><li id=\"0bb29d30b8tjo\"><p id=\"b3ca4ca0b9wob\">执行如下命令，查看根目录<code data-tag=\"code\" class=\"code ph codeph\" id=\"7605b0e3b9n75\">/</code>权限是否正确。</p><pre id=\"9g9fvx\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>stat /</code></pre><ul id=\"e54fe961b9syq\"><li id=\"e6637c41b9s0f\"><p id=\"e6637c42b9cil\">若根目录<code data-tag=\"code\" class=\"code ph codeph\" id=\"7605b0e4b9hw8\">/</code>没有读取和执行权限（555），如下图所示，根目录<code data-tag=\"code\" class=\"code ph codeph\" id=\"7605b0e5b9ri7\">/</code>只有读权限（444），请执行<code data-tag=\"code\" class=\"code\">chmod 555 /</code>为根目录<code data-tag=\"code\" class=\"code ph codeph\" id=\"7605b0e6b9tql\">/</code>添加读取和执行权限。</p><img id=\"a24f6870b9np3\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4835287761/p576750.png\" alt=\"查看根目录权限\" placement=\"break\" class=\"image break\"></li><li id=\"fb42f5f1b9f36\"><p id=\"fb743f20b9nf4\">若根目录<code data-tag=\"code\" class=\"code ph codeph\" id=\"7605b0e7b98ix\">/</code>存在读取和执行权限（555），请继续执行下一步。</p></li></ul></li><li id=\"1b58f631b8rp4\"><p id=\"1b58f630b8a28\">重新执行<code data-tag=\"code\" class=\"code\">su</code>命令切换用户，确保可以正常执行。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/error-unpacking-of-archive-failed-on-file-or-usr-or-bin-or-xxxx-cpio-open-failed-error-is-reported-during-yum-installation", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>在Linux实例中执行yum命令失败，提示“error: unpacking of archive failed on file /usr/bin/xxxx: cpio: open Failed”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在Linux实例中执行yum命令失败，提示“error: unpacking of archive failed on file /usr/bin/xxxx: cpio: open Failed”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:32:45</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"48589d10b3l7a\"><p data-tag=\"shortdesc\" id=\"485f53d3b3aur\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中执行yum命令（如<code data-tag=\"code\" class=\"code\">yum -y install XXX</code>、<code data-tag=\"code\" class=\"code\">yum list</code>、<code data-tag=\"code\" class=\"code\">yum search XXX</code>等）失败，提示“error: unpacking of archive failed on file /usr/bin/xxxx: cpio: open Failed”错误时的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"c4ce2f90b3fhx\" class=\"section\"><h2 id=\"485f53d4b3f0w\">问题现象</h2><p class=\"artical-title\" id=\"485f53d5b3q06\">在Linux系统的ECS实例中执行<code data-tag=\"code\" class=\"code\">yum</code>命令（如<code data-tag=\"code\" class=\"code\">yum -y install XXX</code>、<code data-tag=\"code\" class=\"code\">yum list</code>、<code data-tag=\"code\" class=\"code\">yum search XXX</code>等）失败，提示<code data-tag=\"codeph\" class=\"codeph\">error: unpacking of archive failed on file /usr/bin/xxxx: cpio: open Failed</code>错误。</p></section><section id=\"c670bc00b3cle\" class=\"section\"><h2 id=\"485f53d6b3zq9\">问题原因</h2><p id=\"485f7ae0b36uy\">该问题可能是因为ECS实例中<code data-tag=\"codeph\" class=\"codeph\">/usr/bin</code>文件属性配置错误，例如配置了i、a属性（表示不能删除、修改数据），导致在使用yum install命令时报错。</p><p id=\"61611510b3o27\">文件常见属性说明如下：</p><table id=\"table-pta-t5j-fv0\" tablewidth=\"709\" tablecolswidth=\"88 621\" class=\"table\"><colgroup colwidth=\"0.25*\" style=\"width:12.41%\"></colgroup><colgroup colwidth=\"1.75*\" style=\"width:87.59%\"></colgroup><tbody class=\"tbody\"><tr id=\"row-b2c-fkb-ign\"><td id=\"trouble-2267580-entry-1zv-eo2-j3z\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"6618a9b0b3jfc\"><span style=\"color:rgb(51, 51, 51);background-color:rgb(242, 242, 242)\"><b>属性</b></span></p></td><td id=\"trouble-2267580-entry-9o6-mor-12z\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"6618a9b1b3g6h\"><span style=\"color:rgb(51, 51, 51);background-color:rgb(242, 242, 242)\"><b>说明</b></span></p></td></tr><tr id=\"row-jtj-oho-35w\"><td id=\"entry-mgu-v6y-3ee\" rowspan=\"1\" colspan=\"1\"><p id=\"6618a9b2b3qi7\"><span style=\"color:rgb(24, 24, 24)\">i</span></p></td><td id=\"entry-5aa-t3v-hfu\" rowspan=\"1\" colspan=\"1\"><ul class=\"ul\" id=\"ul-oh3-b12-cqt\"><li class=\"li\" id=\"li-671-zzl-imb\"><p id=\"6618a9b3b35rx\"><span style=\"color:rgb(24, 24, 24)\">对文件设置</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">i</span></code><span style=\"color:rgb(24, 24, 24)\">属性，不允许对文件进行删除、重命名，也不能添加和修改数据。</span></p></li><li class=\"li\" id=\"li-mss-bai-zzr\"><p id=\"6618a9b5b3jx2\"><span style=\"color:rgb(24, 24, 24)\">对目录设置</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">i</span></code><span style=\"color:rgb(24, 24, 24)\">属性，只能修改目录下文件中的数据，但不允许新建和删除文件。</span></p></li></ul></td></tr><tr id=\"row-obh-4mo-rbk\"><td id=\"entry-rcp-2z5-6qn\" rowspan=\"1\" colspan=\"1\"><p id=\"6618d0c0b3eze\"><span style=\"color:rgb(24, 24, 24)\">a</span></p></td><td id=\"entry-pjx-bqy-gsy\" rowspan=\"1\" colspan=\"1\"><ul class=\"ul\" id=\"ul-1xs-nbc-byy\"><li class=\"li\" id=\"li-w8t-la7-bk4\"><p id=\"6618d0c1b38ea\"><span style=\"color:rgb(24, 24, 24)\">对文件设置</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">a</span></code><span style=\"color:rgb(24, 24, 24)\">属性，只能在文件中新增数据，但是不能删除和修改数据。</span></p></li><li class=\"li\" id=\"li-vul-dug-tzr\"><p id=\"6618d0c3b38zv\"><span style=\"color:rgb(24, 24, 24)\">对目录设置</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">a</span></code><span style=\"color:rgb(24, 24, 24)\">属性，只能在目录中新增和修改文件，但是不允许删除文件。</span></p></li></ul></td></tr><tr id=\"row-s99-nys-z3q\"><td id=\"entry-rkj-c2t-ltw\" rowspan=\"1\" colspan=\"1\"><p id=\"6618d0c5b33vs\"><span style=\"color:rgb(24, 24, 24)\">u</span></p></td><td id=\"entry-wua-29e-bil\" rowspan=\"1\" colspan=\"1\"><p id=\"6618d0c6b3n3x\"><span style=\"color:rgb(24, 24, 24)\">对文件或目录设置</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">u</span></code><span style=\"color:rgb(24, 24, 24)\">属性，在删除时，其内容会被保存，以保证后期能够恢复，一般用来防止意外删除文件或目录。</span></p></td></tr><tr id=\"row-p6r-x62-2mr\"><td id=\"entry-sm1-msf-622\" rowspan=\"1\" colspan=\"1\"><p id=\"6618d0c8b3w36\"><span style=\"color:rgb(24, 24, 24)\">s</span></p></td><td id=\"entry-le8-amj-pdo\" rowspan=\"1\" colspan=\"1\"><p id=\"6618d0c9b3c4x\"><span style=\"color:rgb(24, 24, 24)\">对文件或目录设置</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">s</span></code><span style=\"color:rgb(24, 24, 24)\">属性，在删除文件或目录时，会被彻底删除，不可恢复。</span></p></td></tr><tr id=\"row-j8w-kpw-kmh\"><td id=\"entry-fte-4kh-0ln\" rowspan=\"1\" colspan=\"1\"><p id=\"6618f7d1b3ir6\"><span style=\"color:rgb(24, 24, 24)\">e</span></p></td><td id=\"entry-17k-4w7-ehz\" rowspan=\"1\" colspan=\"1\"><p id=\"6618f7d2b3fi1\"><span style=\"color:rgb(24, 24, 24)\">Linux中绝大多数的文件都默认拥有</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">e</span></code><span style=\"color:rgb(24, 24, 24)\">属性，表示该文件是使用ext文件系统进行存储的。</span></p></td></tr></tbody></table><p id=\"66183480b38hn\"></p></section><section id=\"ce31c010b3bo9\" class=\"section\"><h2 id=\"485f7ae1b3gpe\">解决方案</h2><p id=\"aa4905d0b3vsh\"><span style=\"color:rgb(24, 24, 24)\">您可以参考以下步骤，根据实际需要修改</span><code data-tag=\"code\" class=\"code ph codeph\" id=\"codeph-zir-yrk-zh1\"><span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">/usr/bin</span></code>的<span style=\"color:rgb(24, 24, 24)\">文件属性，来解决执行</span><code data-tag=\"code\" class=\"code\">yum</code>命令失败<span style=\"color:rgb(24, 24, 24)\">问题。</span></p><ol class=\"ol steps\" id=\"steps-3w7-af7-yk1\"><li class=\"li step stepexpand\" id=\"step-q54-86m-dy4\"><p id=\"a52e90b1b3w3h\"><span style=\"color:rgb(24, 24, 24)\">使用root用户远程连接ECS实例。</span></p><p class=\"itemgroup info\" id=\"info-d6f-lre-3tc\"><span style=\"color:rgb(24, 24, 24)\">具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a><span style=\"color:rgb(24, 24, 24)\">。</span></p></li><li class=\"li step stepexpand\" id=\"step-2qr-5f1-cb8\"><p id=\"a52e90b2b3v28\"><span style=\"color:rgb(24, 24, 24)\">运行如下命令，查看并确认</span><code data-tag=\"code\" class=\"code ph codeph\" id=\"c9516030b3dp2\"><span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">/usr/bin</span></code><span style=\"color:rgb(24, 24, 24)\">目录属性是否有误。</span></p><pre id=\"b41auv\" data-tag=\"codeblock\" outputclass=\"language-bash\" class=\"pre codeblock language-bash\"><code>lsattr /usr</code></pre><p class=\"p\" id=\"p-4g8-52n-8vx\">返回类似如下图所示，表示<code data-tag=\"code\" class=\"code ph codeph\" id=\"c9516031b3sv3\"><span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">/usr/bin</span></code><span style=\"color:rgb(24, 24, 24)\">目录属性为</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">i</span></code><span style=\"color:rgb(24, 24, 24)\">（不允许在该目录下新建和删除文件），请继续执行步骤</span><a title=\"\" class=\"xref\" href=\"#a52eb7c1b3hg6\">3</a><span style=\"color:rgb(24, 24, 24)\">移除目录</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">i</span></code><span style=\"color:rgb(24, 24, 24)\">属性。</span></p><img id=\"016731e0b3x4m\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4027417761/p572540.png\" alt=\"lsattr\" placement=\"break\" class=\"image break\"></li><li class=\"li step stepexpand\" id=\"step-4ut-0a5-1nu\"><p id=\"a52eb7c1b3hg6\"><span style=\"color:rgb(24, 24, 24)\">执行如下命令，移除</span><code data-tag=\"code\" class=\"code ph codeph\" id=\"c9516032b3kpj\"><span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">/usr/bin</span></code><span style=\"color:rgb(24, 24, 24)\">目录</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">i</span></code><span style=\"color:rgb(24, 24, 24)\">属性。</span></p><pre id=\"a52eb7c7b3aw0\" data-tag=\"codeblock\" outputclass=\"language-undefined\" class=\"pre codeblock language-undefined\"><code>chattr -i /usr/bin</code></pre><div id=\"2e1a1b70b3rua\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"3350cb22b3iaa\"><li id=\"3350cb20b3cnb\"><p class=\"p\" id=\"p-4xr-z6v-odn\"><span style=\"color:rgb(24, 24, 24)\">+：为文件或目录添加属性。</span></p></li><li id=\"3424e401b3js0\"><p id=\"3424e400b33sk\"><span style=\"color:rgb(24, 24, 24)\">-：移除文件或目录已有的某些属性。</span></p></li><li id=\"352e64c0b3nm4\"><p id=\"352e3db0b3re7\"><span style=\"color:rgb(24, 24, 24)\">=：为文件或目录设定一些</span><span style=\"color:rgb(24, 24, 24)\">属性。</span></p></li></ul></div></div></li><li id=\"4251bc61b328v\"><p id=\"4251bc60b3shc\">再次执行<code data-tag=\"code\" class=\"code\">yum</code>命令，确保可以正常运行。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-yum-command-fails-with-the-http-error-404-not-found-trying-other-mirror-prompt", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>在Linux实例中执行yum命令失败，提示“HTTP Error 404 -Not Found Trying other mirror”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在Linux实例中执行yum命令失败，提示“HTTP Error 404 -Not Found Trying other mirror”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:32:31</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"12272e50a61d5\"><p data-tag=\"shortdesc\" id=\"12305615a6tb1\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中执行yum命令失败，提示“HTTP Error 404 -Not Found Trying other mirror”错误时的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"40128e10aew40\" class=\"section\"><h2 id=\"XbeWY\">问题描述</h2><p id=\"12305619a6uja\">在Linux系统的ECS实例中执行yum命令（如<code data-tag=\"code\" class=\"code\">yum -y install XXX</code>、<code data-tag=\"code\" class=\"code\">yum list</code>、<code data-tag=\"code\" class=\"code\">yum search XXX</code>等）失败，出现类似如下错误信息。</p><pre data-tag=\"codeblock\" id=\"12272e51a6elt\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>http://mirrors.cloud.aliyuncs.com/centos/7/os/x86_64/repodata/repomd.xml: [Errno 14] HTTP Error 404 - Not Found\nTrying other mirror.</code></pre><pre data-tag=\"codeblock\" id=\"12272e52a6ljc\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>http://mirrors.cloud.aliyuncs.com/centos/$releasever/os/x86_64/repodata/repomd.xml: [Errno 14] HTTP Error 404 - Not Found\nTrying other mirror.</code></pre></section><section id=\"42d22340aeart\" class=\"section\"><h2 id=\"tayMx\">问题原因</h2><p id=\"5d9c0eb1a66tz\">出现该问题可能有以下原因：</p><ul id=\"12307d21a6s24\"><li id=\"12307d22a6jy7\"><p id=\"4ef6c010a60mh\">CentOS 6/8的源地址内容已移除：CentOS 6与CentOS 8操作系统结束了生命周期（EOL），源地址内容已移除。您可以参考<a title=\"\" class=\"xref\" href=\"#2a181f00a6ff8\">切换CentOS 6/8的源地址</a>修复该问题。</p></li><li id=\"12307d24a6gqg\"><p id=\"12307d25a6qh7\">YUM仓库（<span style=\"color:rgb(77, 77, 77)\">reposito</span><span style=\"color:rgb(77, 77, 77)\">ry</span>）配置问题，导致无法正常解析，您可以参考<a title=\"\" class=\"xref\" href=\"#2d3a6da0a6yp3\">将CentOS默认Base源更换为阿里Base源</a>修复该问题。</p></li><li id=\"12307d26a68ne\"><p id=\"12307d27a69cj\">环境变量<code data-tag=\"code\" class=\"code\">/etc/profile</code>文件中配置了HTTP代理，导致无法正常解析，您可以参考<a title=\"\" class=\"xref\" href=\"#305987f0a692o\">修改环境变量配置文件/etc/profile</a>修复该问题。</p></li><li id=\"12307d28a6ayf\"><p id=\"12307d29a6nb8\">缺少centos-release软件包，导致<span style=\"color:rgb(24, 24, 24)\">URL中</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">$releasever</span></code><span style=\"color:rgb(24, 24, 24)\">变量</span>无法正常解析，您可以参考<a title=\"\" class=\"xref\" href=\"#32cad610a6pz0\">安装centos-release软件包</a>修复该问题。</p></li></ul></section><section id=\"160f8940b3t2l\" class=\"section\"><h2 id=\"EFTFF\">解决方案</h2><section id=\"2a181f00a6ff8\" class=\"section\"><h3 data-tag=\"h3\" id=\"1230a430a6rg8\" class=\"h3\">切换CentOS 6/8的源地址</h3><p id=\"1230a431a6p24\">CentOS 6与CentOS 8操作系统版本结束了生命周期（EOL），Linux社区已不再维护该操作系统版本。按照社区规则，CentOS 6/8的源地址内容已移除。当您在CentOS 6/8系统内继续使用默认配置的源地址时会发生报错。建议您先切换CentOS 6/8的源地址，然后再进行操作。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-the-centos-6-source-address\">CentOS 6 EOL如何切换源？</a>和<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-centos-8-repository-addresses\">CentOS 8 EOL如何切换源？</a>。</p></section><section id=\"2d3a6da0a6yp3\" class=\"section\"><h3 data-tag=\"h3\" id=\"1230a432a6aqp\" class=\"h3\"><b>将CentOS默认</b>Base源更换<b>为阿里Base源</b></h3><p id=\"1230a433a6imt\">本节以CentOS 7.4系统版本的Base源为例进行介绍，其他系统及版本请参见<a class=\"\" target=\"_blank\" href=\"https://developer.aliyun.com/mirror\">阿里云官方镜像站</a>。</p><ol id=\"1230cb40a63pg\"><li id=\"1230cb41a6iny\"><p id=\"a52e90b1b3w3h\"><span style=\"color:rgb(24, 24, 24)\">远程连接ECS实例。</span></p><p id=\"ec3c24b0b3t1x\"><span style=\"color:rgb(24, 24, 24)\">具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a><span style=\"color:rgb(24, 24, 24)\">。</span></p></li><li id=\"e3f91f60b3toz\"><p id=\"e3f8f850b3dmo\">执行以下命令，备份异常的Base源文件。 </p><pre data-tag=\"codeblock\" id=\"12272e53a6oxo\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</code></pre></li><li id=\"1230cb44a6awl\"><p id=\"1230cb45a68o5\">执行以下命令，下载并安装Base源。 \n</p><pre data-tag=\"codeblock\" id=\"12272e54a6bra\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo</code></pre></li><li id=\"1230cb4aa621q\"><p id=\"1230cb4ba65n9\">重新执行<code data-tag=\"code\" class=\"code\">yum</code>相关命令，确保可以正常使用。</p></li></ol></section><section id=\"305987f0a692o\" class=\"section\"><h3 id=\"f1311e30b3g4u\"><b>修改环境变量配置文件</b><code data-tag=\"code\" class=\"code\"><b>/etc/profile</b></code></h3><ol id=\"1230f251a6ezc\"><li id=\"1230f252a6se2\"><p id=\"0154d6d1b3cf1\"><span style=\"color:rgb(24, 24, 24)\">远程连接ECS实例。</span></p><p id=\"1230f253a65wn\"><span style=\"color:rgb(24, 24, 24)\">具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a><span style=\"color:rgb(24, 24, 24)\">。</span></p></li><li id=\"0269a230b3nnl\"><p id=\"02697b20b3wy5\">依次执行如下命令，确认能ping通，且80端口也能通。 </p><ul id=\"6f36b8d1b3cye\"><li id=\"6f23f420b3a86\"><p id=\"6f23cd10b3801\">若不能连通，说明可能是网络问题，请排查网络后重试。</p></li><li id=\"8ba2e020b3v21\"><p id=\"8ba2b910b3xoi\">若可以正常ping通，请继续执行步骤。</p><pre data-tag=\"codeblock\" id=\"12272e55a6ycx\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ping mirrors.cloud.aliyuncs.com\ntelnet mirrors.cloud.aliyuncs.com 80</code></pre></li></ul></li><li id=\"1230f255a6stn\"><p id=\"1230f256a6tdp\">执行以下命令，查看YUM仓库能否正常访问。 </p><pre data-tag=\"codeblock\" id=\"12272e56a6b2a\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>curl http://mirrors.cloud.aliyuncs.com/centos/7/os/x86_64/repodata/repomd.xml -v</code></pre><p id=\"1230f257a6qj1\">系统显示类似如下，返回404状态码，且配置了HTTP代理。 </p><img id=\"106a2880b30ct\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7286027761/p572649.png\" alt=\"404\" placement=\"break\" class=\"image break\"></li><li id=\"1230f25ba6xm4\"><p id=\"12311960a6rhu\">修改环境变量文件<code data-tag=\"code\" class=\"code\">/etc/profile</code>。</p><ol id=\"e2274d91a6opr\"><li id=\"e20f0aa0a61ej\"><p id=\"e20ee390a60rz\">执行如下命令，打开环境变文件<code data-tag=\"code\" class=\"code\">/etc/profile</code>。</p><pre id=\"p1h4re\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/profile</code></pre></li><li id=\"ecac53a1a6z3d\"><p id=\"4f9346d0a6i7w\">按<code data-tag=\"code\" class=\"code\">i</code>进入编辑模式，在HTTP代理前加<code data-tag=\"code\" class=\"code\"># </code>注释该配置或根据需要修改代理。</p><img id=\"a362c0a0b3ho1\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7286027761/p572672.png\" alt=\"delete proxy\" placement=\"break\" class=\"image break\"></li><li id=\"545c67a0a6vfd\"><p id=\"5c2d7140a61qd\">编辑完成后，按<code data-tag=\"code\" class=\"code\">Esc</code>键，并输入<code data-tag=\"code\" class=\"code\">:wq</code>保存退出文件。</p></li><li id=\"5de51971b3qq3\"><p id=\"5de51970b3l7k\">执行如下命令，使环境变量配置生效。</p><pre id=\"r83cgf\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>source /etc/profile</code></pre></li></ol></li><li id=\"d6228551a6n8g\"><p id=\"d6228550a61q6\">重新执行<code data-tag=\"code\" class=\"code\">yum</code>相关命令，确保可以正常使用。</p></li></ol></section><section id=\"32cad610a6pz0\" class=\"section\"><h3 data-tag=\"h3\" id=\"12311961a6l5u\" class=\"h3\"><b>安装centos-release软件包</b></h3><p id=\"43cc3b80b3j18\">本节以安装CentOS 7.4系统版本的centos-release软件包为例进行介绍，其他系统及版本请参见<a class=\"\" target=\"_blank\" href=\"https://developer.aliyun.com/mirror\">阿里云官方镜像站</a>。</p><ol id=\"9e926952b3lwk\"><li id=\"9e926950b3rh1\"><p id=\"9c39d351b3aab\"><span style=\"color:rgb(24, 24, 24)\">远程连接ECS实例。</span></p><p id=\"a06f66b0b3xuv\"><span style=\"color:rgb(24, 24, 24)\">具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a><span style=\"color:rgb(24, 24, 24)\">。</span></p></li><li id=\"a4184a71b3mj7\"><p id=\"a4184a70b3vm6\"><span style=\"color:rgb(24, 24, 24)\">下载并安装</span>centos-release软件包。</p><pre data-tag=\"codeblock\" id=\"12272e58a66g8\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/centos-release-7-7.1908.0.el7.centos.x86_64.rpm\nrpm -ivh centos-release-7-7.1908.0.el7.centos.x86_64.rpm</code></pre></li><li id=\"799c2c21b3abx\"><p id=\"762fb520b3xml\">重新执行<code data-tag=\"code\" class=\"code\">yum</code>相关命令，确保可以正常使用。</p></li></ol></section></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/common-kernel-network-parameters-of-ecs-linux-instances-and-faq", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>Linux系统常用内核网络参数介绍与常见问题处理</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统常用内核网络参数介绍与常见问题处理</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-08-02 17:49:18</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"11d3fed07bhl8\"><p data-tag=\"shortdesc\" id=\"11e95b907bsis\" class=\"shortdesc\">本文介绍常见的Linux系统内核网络参数及常见问题的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"ba84ed30b8uig\" class=\"section\"><h2 data-tag=\"h3\" id=\"11e9a9bd7b4ni\" class=\"h3\"><b>注意事项</b></h2><p id=\"11e9a9be7b7l3\">在修改内核参数前，您需要注意以下几点：</p><ul id=\"11e9a9bf7bbbe\"><li id=\"11e9a9c07b1ch\"><p id=\"11e9a9c17byfq\">从实际需求出发，尽量有相关数据的支撑，不建议您随意调整内核参数。</p></li><li id=\"11e9d0c07btk0\"><p id=\"11e9d0c17blkf\">了解参数的具体作用，需注意不同类型或版本的环境中，内核参数可能有所不同。</p></li><li id=\"11e9d0c27b3k2\"><p id=\"11e9d0c37bsx4\">备份ECS实例中的重要数据，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></li></ul></section><section id=\"323e73b0b8nvy\" class=\"section\"><h2 id=\"n49mj\">查看和修改内核参数</h2><p id=\"009857c0cfda6\"><code data-tag=\"code\" class=\"code\">/proc/sys/</code>和<code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>都支持在实例运行时修改内核参数，不同之处如下：</p><ul id=\"726074a2cfpeh\"><li id=\"726074a0cf511\"><p id=\"01afe9a0cfmhc\"><code data-tag=\"code\" class=\"code\">/proc/sys/</code>是一个虚拟文件系统，提供了访问内核参数的方法，该目录下的<code data-tag=\"code\" class=\"code\">net</code>中存放了当前系统中已开启的所有网络内核参数，可以在系统运行时进行修改，但<b>重启实例后就会失效</b>，一般用于临时性验证修改的效果。</p></li><li id=\"8cd55fd0cfm7j\"><p id=\"97b46cc0cfmf7\"><code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>是一个配置文件，您可以通过修改<code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>文件来修改内核参数的默认值，<b>实例重启后不会失效</b>。</p></li></ul><p id=\"4b6007e0d1c0z\"><code data-tag=\"code\" class=\"code\">/proc/sys/</code>目录下文件与<code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>配置文件中参数的完整名称相关，如<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>参数，对应的文件是<code data-tag=\"code\" class=\"code\">/proc/sys/net/ipv4/tcp_tw_recycle</code>文件，文件的内容就是参数值。</p><div type=\"note\" id=\"11e9a9b37bdw1\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"11e9a9b57beoq\">Linux从4.12内核版本开始移除了tcp_tw_recycle配置，即移除sysctl.conf中关于net.ipv4.tcp_tw_recycle的配置内容，当您的系统内核低于4.12版本才可以使用<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>参数。</p></div></div><section id=\"1d5bf210cfngz\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"1d5bf212cflxt\" class=\"section\"><h3 id=\"8f8ff020cfgxs\">通过/proc/sys/目录查看和修改内核参数</h3><ol id=\"097fe502cf0r9\"><li id=\"097fe500cf06p\"><p id=\"0679a9e1cfp6t\">登录Linux系统的ECS实例。</p><p id=\"0c0b23c0cfy0s\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"0e703ce0cfult\"><p id=\"25f952c0cfmh3\">使用<code data-tag=\"code\" class=\"code\">cat</code>命令，可以查看对应文件的内容。</p><p id=\"31206530cfi9h\">例如，执行以下命令，查看<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>的值。</p><pre id=\"11d3fed17bx6f\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>cat /proc/sys/net/ipv4/tcp_tw_recycle </code></pre></li><li id=\"3ecc4dc1cfdjo\"><p id=\"3ecc4dc0cffka\">使用<code data-tag=\"code\" class=\"code\">echo</code>命令，可以修改内核参数对应的文件。</p><p id=\"57b7b2c0cfg63\">例如，执行以下命令，将<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>的值修改为0。 </p><pre id=\"4e3a58b2cfw3c\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>echo \"0\" &gt; /proc/sys/net/ipv4/tcp_tw_recycle </code></pre></li></ol></section><section id=\"1d5bf215cfgqx\" class=\"section\"><h3 data-tag=\"h4\" id=\"9acb9c00cfgdw\" class=\"h4\">通过/etc/sysctl.conf文件查看和修改内核参数</h3><ol id=\"7f60e582cfu05\"><li id=\"7f60e580cftqk\"><p id=\"7c9f5481cfg8m\">登录Linux系统的ECS实例。</p><p id=\"80dab440cfj9i\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"81f35031cftsz\"><p id=\"879ac310cfysr\">执行如下命令，查看当前系统中生效的所有参数。</p><pre id=\"6axpzz\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>sysctl -a</code></pre><p id=\"e2918be0cfuiy\">部分内核参数显示如下所示。</p><pre id=\"11d3fed37bjq1\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>net.ipv4.tcp_app_win = 31\nnet.ipv4.tcp_adv_win_scale = 2\nnet.ipv4.tcp_tw_reuse = 0\nnet.ipv4.tcp_frto = 2\nnet.ipv4.tcp_frto_response = 0\nnet.ipv4.tcp_low_latency = 0\nnet.ipv4.tcp_no_metrics_save = 0\nnet.ipv4.tcp_moderate_rcvbuf = 1\nnet.ipv4.tcp_tso_win_divisor = 3\nnet.ipv4.tcp_congestion_control = cubic\nnet.ipv4.tcp_abc = 0\nnet.ipv4.tcp_mtu_probing = 0\nnet.ipv4.tcp_base_mss = 512\nnet.ipv4.tcp_workaround_signed_windows = 0\nnet.ipv4.tcp_challenge_ack_limit = 1000\nnet.ipv4.tcp_limit_output_bytes = 262144\nnet.ipv4.tcp_dma_copybreak = 4096\nnet.ipv4.tcp_slow_start_after_idle = 1\nnet.ipv4.cipso_cache_enable = 1\nnet.ipv4.cipso_cache_bucket_size = 10\nnet.ipv4.cipso_rbm_optfmt = 0\nnet.ipv4.cipso_rbm_strictvalid = 1</code></pre></li><li id=\"965842b0cfn9b\"><p id=\"96581ba0cf1s6\">修改内核参数。</p><ul id=\"ae936a81cfnso\"><li id=\"ad519bb0cf9tx\"><p id=\"c1837040cfxbo\">临时修改。 </p><pre id=\"nqf5gt\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>/sbin/sysctl -w kernel.parameter=\"[$Example]\"</code></pre><div id=\"d3ff7e80cf8e6\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"cbca82f0cf9jc\">kernel.parameter请替换成内核名，[$Example]请替换成参数值，如执行<code data-tag=\"code\" class=\"code\">sysctl -w net.ipv4.tcp_tw_recycle=\"0\"</code>命令，将<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>内核参数值改为0。\n</p></div></div></li><li id=\"b7230931cfusr\"><p id=\"b7230930cf7wq\">永久修改。</p><ol id=\"2393b281cfevs\"><li id=\"210e1913cfvw8\"><p id=\"210e4020cfgvp\">执行如下命令，打开<code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>配置文件。</p><pre id=\"2kbagz\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>vim /etc/sysctl.conf</code></pre></li><li id=\"37407890cfyq2\"><p id=\"37405180cfbkg\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"3d55ef80cfree\"><p id=\"3d55c870cfjfc\">根据需要，修改内核参数。</p><p id=\"9ddc2bd0cfhbw\">具体格式如下所示。</p><pre id=\"gkpfmm\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>net.ipv6.conf.all.disable_ipv6 = 1\nnet.ipv6.conf.default.disable_ipv6 = 1\nnet.ipv6.conf.lo.disable_ipv6 = 1</code></pre></li><li id=\"358a8b30cf4fc\"><p id=\"358a3d10cfytb\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>，保存并退出编辑。</p></li><li id=\"2b8727b0d7z5j\"><p id=\"2b8700a0d72hn\">执行如下命令，使配置生效。</p><pre id=\"9osmas\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>/sbin/sysctl -p</code></pre></li></ol></li></ul></li></ol></section></section></section><section id=\"e0031880d1v80\" class=\"section\"><h2 data-tag=\"h3\" id=\"11ea45f17b09r\" class=\"h3\"><b>网络相关内核参数常见问题及解决方案</b></h2><ul id=\"459c76f2d10w3\"><li id=\"459c76f0d1rmj\"><p id=\"e5c677d0d1k6c\"><a title=\"\" class=\"xref\" href=\"#h3-linux-nat-ecs-\">无法远程连接Linux系统的ECS实例，在/var/log/message日志看到“nf_conntrack: table full, dropping packet”错误信息怎么办？</a></p></li><li id=\"fcde0730d179m\"><p id=\"fcdde020d1rei\"><a title=\"\" class=\"xref\" href=\"#RmFfc\">为什么/var/log/messages日志中会出现“Time wait bucket table overflow”错误信息？</a></p></li><li id=\"1c05f320d10kk\"><p id=\"1c05cc10d1168\"><a title=\"\" class=\"xref\" href=\"#ccbcd560cfs7z\">为什么Linux系统的ECS实例中，出现大量的处于FIN_WAIT2状态的TCP连接？</a></p></li><li id=\"6f7226a1d18v8\"><p id=\"6f7226a0d1ees\"><a title=\"\" class=\"xref\" href=\"#c216d9d0cfi4i\">为什么Linux系统的ECS实例中，出现大量的处于CLOSE_WAIT状态的TCP连接？</a></p></li><li id=\"8d19b420d1eva\"><p id=\"8d198d10d1ij3\"><a title=\"\" class=\"xref\" href=\"#b4d2b3c0cfdp6\">为什么客户端配置NAT后，无法访问服务端的ECS或RDS？</a></p></li></ul><section id=\"h3-linux-nat-ecs-\" class=\"section\"><h3 data-tag=\"h4\" id=\"11ea6d0a7brpk\" class=\"h4\"><b>无法远程连接Linux系统的ECS实例，在</b><code data-tag=\"code\" class=\"code\">/var/log/message</code>日志看到“nf_conntrack: table full, dropping packet”错误信息怎么办？</h3><section id=\"f7092b70d0xqq\" class=\"section\"><h4 data-tag=\"h5\" id=\"11ea94127bbhw\" class=\"h5\"><b>问题现象</b></h4><p id=\"9759ee30d008f\">无法远程连接ECS实例，ping目标实例时出现ping丢包或ping不通情况，在<code data-tag=\"code\" class=\"code\">/var/log/message</code>系统日志中频繁出现以下错误信息。</p><pre id=\"11d425e07bd13\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>Feb  6 16:05:07 i-*** kernel: nf_conntrack: table full, dropping packet.\nFeb  6 16:05:07 i-*** kernel: nf_conntrack: table full, dropping packet.\nFeb  6 16:05:07 i-*** kernel: nf_conntrack: table full, dropping packet.\nFeb  6 16:05:07 i-*** kernel: nf_conntrack: table full, dropping packet.</code></pre></section><section id=\"fe8adc90d0h5b\" class=\"section\"><h4 data-tag=\"h5\" id=\"fc206c40d0kkd\" class=\"h5\">问题原因</h4><p id=\"fb600270d0lo6\">ip_conntrack是Linux系统内NAT的一个跟踪连接条目的模块，ip_conntrack模块会使用一个哈希表记录TCP协议<code data-tag=\"code\" class=\"code\">established connection</code>记录。当这个哈希表满之后，新连接的数据包会被丢弃掉，就会出现<code data-tag=\"code\" class=\"code\">nf_conntrack: table full, dropping packet</code>错误。</p><p id=\"ba6e1300d0is5\">Linux系统会开辟一个空间，用于维护每一个TCP链接，这个空间的大小与<code data-tag=\"code\" class=\"code\">nf_conntrack_buckets</code>、<code data-tag=\"code\" class=\"code\">nf_conntrack_max</code>参数相关，后者的默认值是前者的4倍，所以一般建议调大<code data-tag=\"code\" class=\"code\">nf_conntrack_max</code>参数值。</p><div type=\"note\" id=\"11ea94167b09p\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"11ea94187blsd\">维护系统连接比较消耗内存，建议您在系统空闲和内存充足的情况下，将<code data-tag=\"code\" class=\"code\">nf_conntrack_max</code>参数值调大。</p></div></div></section><section id=\"d7b0d0f0d1zbr\" class=\"section\"><h4 data-tag=\"h5\" id=\"11ea94197bo8e\" class=\"h5\"><b>解决方案</b></h4><ol id=\"11ea941a7b2jv\"><li id=\"11ea941b7b1zx\"><p id=\"11ea941c7bvd5\">使用VNC远程连接实例。</p><p id=\"ff531440cfi1a\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"11ea941d7b2aj\"><p id=\"11ea941e7bsg7\">修改<code data-tag=\"code\" class=\"code\">nf_conntrack_max</code>参数值。</p><ol id=\"150bdbd1d06lr\"><li id=\"6b620551d0gix\"><p id=\"6b620550d0ywi\">执行以下命令，打开<code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>文件。 </p><pre id=\"11d425e17bvm3\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>vi /etc/sysctl.conf</code></pre></li><li id=\"11ea94207bbm7\"><p id=\"11ea94217bivf\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"2c2b0c50d01gn\"><p id=\"2c2ae540d0l8m\">修改<code data-tag=\"code\" class=\"code\">nf_conntrack_max</code>参数值。</p><p id=\"3d1c34d0d0gty\">例如，将哈希表项最大值参数修改为<code data-tag=\"code\" class=\"code\">655350</code>。</p><pre id=\"wleibb\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>net.netfilter.nf_conntrack_max = 655350</code></pre></li><li id=\"11ea94227botd\"><p id=\"4679f570d7fr9\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>，保存并退出编辑。</p></li></ol></li><li id=\"44a27650d76i4\"><p id=\"44a24f40d765y\">修改超时参数<code data-tag=\"code\" class=\"code\">nf_conntrack_tcp_timeout_established</code>值。</p><p id=\"7311d5e0d0x11\">例如，修改超时参数值为1200，默认超时时间是432000秒。</p><pre id=\"2gvpge\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>net.netfilter.nf_conntrack_tcp_timeout_established = 1200</code></pre></li><li id=\"11ea94247bi08\"><p id=\"11eabb207bsg7\">执行如下命令，使配置生效。</p><pre id=\"2gn4lb\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>sysctl -p</code></pre></li></ol></section></section><section id=\"RmFfc\" class=\"section\"><h3 data-tag=\"h4\" id=\"11eabb217bv0z\" class=\"h4\"><b>为什么</b><code data-tag=\"code\" class=\"code\">/var/log/messages</code>日志中会出现<b>“Time wait bucket table overflow”错误信息？</b></h3><section id=\"bc98a940d1sfw\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eabb257bl03\" class=\"h5\"><b>问题现象</b></h4><p id=\"11eabb287bbzn\">Linux系统的ECS实例中，<code data-tag=\"code\" class=\"code\">/var/log/messages</code>日志中频繁出现“kernel: TCP: time wait bucket table overflow”错误信息。</p><pre id=\"11d425e27bnxl\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>Feb 18 12:28:38 i-*** kernel: TCP: time wait bucket table overflow\nFeb 18 12:28:44 i-*** kernel: printk: 227 messages suppressed.\nFeb 18 12:28:44 i-*** kernel: TCP: time wait bucket table overflow\nFeb 18 12:28:52 i-*** kernel: printk: 121 messages suppressed.\nFeb 18 12:28:52 i-*** kernel: TCP: time wait bucket table overflow\nFeb 18 12:28:53 i-*** kernel: printk: 351 messages suppressed.\nFeb 18 12:28:53 i-*** kernel: TCP: time wait bucket table overflow\nFeb 18 12:28:59 i-*** kernel: printk: 319 messages suppressed.</code></pre></section><section id=\"d38b9140d1ve0\" class=\"section\"><h4 data-tag=\"h5\" id=\"c0c22eb0d1ox4\" class=\"h5\">问题原因</h4><p id=\"bfdcfed0d1dq5\"><code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数用于调整内核中管理TIME_WAIT状态的数量，当ECS实例中处于TIME_WAIT状态的连接数，加上需要转换为TIME_WAIT状态的连接数之和超过<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数值时，<code data-tag=\"code\" class=\"code\">/var/log/messages</code>日志中就会出现“kernel: TCP: time wait bucket table overflow”错误信息，此时，系统内核将会关闭超出参数值的部分TCP连接。</p></section><section id=\"d1b15300d1yge\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eabb2f7bdew\" class=\"h5\"><b>解决方案</b></h4><p id=\"9549fd20d1kry\">您可以根据实际情况适当调高<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数值，同时，建议您从业务层面去改进TCP连接。本文介绍如何修改<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数值。</p><ol id=\"11eabb307bzhg\"><li id=\"11eae2307bhvl\"><p id=\"11eae2317br1l\">使用VNC远程连接实例。</p><p id=\"294155b2d17nm\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"27d25c60d1qa1\"><p id=\"27d23550d1pxt\">执行以下命令，查看TCP连接数。 </p><pre id=\"11d425e47bsdk\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>netstat -anp |grep tcp |wc -l</code></pre><p id=\"11eae2327bipt\"> 显示如下，表示处于TIME_WAIT状态的连接数为6300。</p><pre data-tag=\"codeblock\" outputclass=\"language-shell\" id=\"d947fea0d1gly\" class=\"pre codeblock language-shell\"><code>6300 TIME_WAIT\n 40 LISTEN\n 20 ESTABLISHED\n 20 CONNECTED</code></pre></li><li id=\"11eae2337buz5\"><p id=\"4905f3a0d12qf\">执行如下命令，查看<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数值。</p><pre id=\"8estbl\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>cat /etc/sysctl.conf | grep net.ipv4.tcp_max_tw_buckets</code></pre><p id=\"11d2ad00d1vwx\">显示如下所示，表示<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数值为20000。</p><img id=\"04641b90d1crb\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8979040861/p614405.png\" alt=\"2023-04-02_11-03-24\" placement=\"break\" class=\"image break\"></li><li id=\"38a1ac61d1whr\"><p id=\"38a1ac62d1w45\">修改<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数值。</p><ol id=\"38a1ac63d1okg\"><li id=\"38a1ac64d17us\"><p id=\"38a1ac65d1vvg\">执行以下命令，打开<code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>文件。 </p><pre id=\"38a1ac66d1em8\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>vi /etc/sysctl.conf</code></pre></li><li id=\"38a1ac67d1n1b\"><p id=\"38a1ac68d1f77\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"38a1ac69d1e1v\"><p id=\"38a1ac6ad1u2p\">修改<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数值。</p><p id=\"38a1ac6bd1w6u\">例如，将<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数值修改为<code data-tag=\"code\" class=\"code\">65535</code>。</p><pre id=\"38a1ac6cd1mii\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>net.ipv4.tcp_max_tw_buckets = 65535</code></pre></li><li id=\"11eb09407bjvj\"><p id=\"4b6d5a90d7x1l\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>，保存并退出编辑。</p></li></ol></li><li id=\"4a05b441d7oor\"><p id=\"4a05b440d79op\">执行如下命令，使配置生效。</p><pre id=\"832524b0d1qhb\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>sysctl -p</code></pre></li></ol></section></section><section id=\"ccbcd560cfs7z\" class=\"section\"><h3 data-tag=\"h4\" id=\"11eb09427bgt2\" class=\"h4\"><b>为什么Linux系统的ECS实例中，出现大量的处于FIN_WAIT2状态的TCP连接？</b></h3><section id=\"c9289220d1umz\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eb09467b1zl\" class=\"h5\"><b>问题现象</b></h4><p id=\"11eb09477bcaw\">Linux系统的ECS实例中，出现大量的处于FIN_WAIT2状态的TCP连接。</p></section><section id=\"cb9db0d0d1gap\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eb09487bo12\" class=\"h5\"><b>问题原因</b></h4><p id=\"39359d10d16d1\">出现该问题可能有以下原因：</p><ul id=\"11eb09497bzwe\"><li id=\"11eb094a7b5zu\"><p id=\"11eb094b7bx95\">在HTTP服务中，Server由于某种原因会主动关闭连接，例如在KEEPALIVE超时的情况下，主动关闭连接的Server就会进入FIN_WAIT2状态。</p></li><li id=\"11eb094c7bnxe\"><p id=\"11eb094d7by1p\">在TCP/IP协议栈中，存在半连接的概念，FIN_WAIT2状态不算超时（与TIME_WAIT状态不同）。如果Client不关闭，FIN_WAIT2状态将保持到系统重启，越来越多的FIN_WAIT2状态会致使内核Crash。</p></li></ul></section><section id=\"c52dbdd0d1h0r\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eb09507b0tr\" class=\"h5\"><b>解决方案</b></h4><p id=\"a3732f30d1krc\">您可以将<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_fin_timeout</code>参数值调小，以便加快系统关闭处于<code data-tag=\"code\" class=\"code\">FIN_WAIT2</code>状态的TCP连接。</p><ol start=\"1\" id=\"11eb09517bmjh\"><li id=\"11eb09527b89t\"><p id=\"2be59ab1d1yhg\">使用VNC远程连接实例。</p><p id=\"18f4d1a0d1ggh\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"1b04c5e1d17j4\"><p id=\"1b04c5e2d1ppa\">修改<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_fin_timeout</code>参数值。</p><ol id=\"1b04c5e3d1ek8\"><li id=\"1b04c5e4d1vf6\"><p id=\"1b04c5e5d16ed\">执行以下命令，打开<code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>文件。 </p><pre id=\"1b04c5e6d1i48\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>vi /etc/sysctl.conf</code></pre></li><li id=\"1b04c5e7d1mln\"><p id=\"1b04c5e8d1xvy\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"1b04c5e9d1jus\"><p id=\"1b04c5ead1rqb\">修改<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_fin_timeout</code>参数值。</p><p id=\"1b04c5ebd119t\">例如，将<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_fin_timeout</code>参数值修改为10。</p><pre id=\"1b04c5ecd1gp5\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>net.ipv4.tcp_fin_timeout = 10</code></pre></li><li id=\"11eb09557btkb\"><p id=\"4eb44830d7vfq\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>，保存并退出编辑。</p></li></ol></li><li id=\"4d53a6c1d700w\"><p id=\"4d53a6c0d7lzz\">执行如下命令，使配置生效。</p><pre id=\"783dd300d138c\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>sysctl -p</code></pre></li></ol></section></section><section id=\"c216d9d0cfi4i\" class=\"section\"><h3 data-tag=\"h4\" id=\"11eb30527bd8t\" class=\"h4\">为什么Linux系统的ECS实例中，出现大量的处于CLOSE_WAIT状态的TCP连接？</h3><section id=\"a599c9a0d13s7\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eb30537b16v\" class=\"h5\"><b>问题现象</b></h4><p id=\"11eb30547b1b3\">Linux系统的ECS实例中，出现大量的处于CLOSE_WAIT状态的TCP连接。</p></section><section id=\"a723c500d1zm2\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eb30557b3gx\" class=\"h5\"><b>问题原因</b></h4><p id=\"11eb30567bbqm\">出现该问题的可能原因是CLOSE_WAIT数量是否超出了正常的范围。</p><p id=\"d63f1220d14b9\">TCP连接断开时需要进行四次挥手，TCP连接的两端都可以发起关闭连接的请求，若对端发起了关闭连接，但本地没有关闭连接，那么该连接就会处于CLOSE_WAIT状态。虽然该连接已经处于半连接状态，但是已经无法和对端通信，需要及时地释放该连接。</p></section><section id=\"a992f040d1ng9\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eb30577bmff\" class=\"h5\"><b>解决方案</b></h4><p id=\"b4ebc540d14i9\">建议您从业务层面及时判断某个连接是否已经被对端关闭，即在程序逻辑中对连接及时关闭，并进行检查。</p><ol id=\"adf404a2d1qko\"><li id=\"adf404a0d17kj\"><p id=\"ac190311d1ub5\">远程连接ECS实例。</p><p id=\"afca9960d1nj3\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"0f243c90d1jj2\"><p id=\"0f23ee70d1dvx\">在程序中检查并关闭CLOSE_WAIT状态的TCP连接。</p><p id=\"8d460960d1v1k\">编程语言中对应的读、写函数一般包含了检测CLOSE_WAIT状态的TCP连接功能。Java语言和C语言中关闭连接的方法如下：</p><ul id=\"214f44a1d17w4\"><li id=\"20a23bc0d1ywr\"><p id=\"20a214b0d1oxs\"><b>Java语言</b></p><ol id=\"193942c1d1jhv\"><li id=\"18131240d1i4h\"><p id=\"1812c420d11gg\">通过<code data-tag=\"code\" class=\"code\">read</code>方法来判断I/O 。当read方法返回<code data-tag=\"code\" class=\"code\">-1</code>时，则表示已经到达末尾。</p></li><li id=\"1b384710d1vp4\"><p id=\"1b382000d1wsb\">通过<code data-tag=\"code\" class=\"code\">close</code>方法关闭该连接。</p></li></ol></li><li id=\"2317a890d10db\"><p id=\"23178180d1gv1\"><b>C语言</b></p><p id=\"330320e0d1lk9\">检查<code data-tag=\"code\" class=\"code\">read</code>的返回值。</p><ul id=\"36b55371d1snd\"><li id=\"3636d4a0d1jd8\"><p id=\"3636ad90d1486\">若等于0，则可以关闭该连接。</p></li><li id=\"38d61090d1bjz\"><p id=\"38d5e980d1t5o\">若小于0，则查看error，若不是AGAIN，则同样可以关闭连接。</p></li></ul></li></ul></li></ol></section></section><section id=\"b4d2b3c0cfdp6\" class=\"section\"><h3 data-tag=\"h4\" id=\"11eb30677byb4\" class=\"h4\"><b>为什么客户端配置NAT后，无法访问服务端的ECS或RDS？</b></h3><section id=\"acc56b80d1yhl\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eb57637bixy\" class=\"h5\"><b>问题现象</b></h4><p id=\"11eb57647bric\">客户端配置NAT后无法访问服务端的ECS、RDS，包括配置了SNAT的VPC中的ECS实例。</p></section><section id=\"bdea2720d15qe\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eb57657bxe4\" class=\"h5\"><b>问题原因</b></h4><p id=\"8a1f98e1d1g7r\">出现该问题可能是服务端的<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>和<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_timestamps</code>参数值配置为1导致。</p><p id=\"11eb57667b4bx\">当服务端的内核参数<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>和<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_timestamps</code>的值都为1，表示服务端会检查每一个TCP连接报文中的时间戳（Timestamp），若Timestamp不是递增的关系，则不会响应这个报文。</p></section><section id=\"c09fd140d1hbc\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eb57677b6ts\" class=\"h5\"><b>解决方案</b></h4><p id=\"3dd30710d10td\">您可以根据服务端云产品不通，选择合适的方案进行处理。</p><ul data-spm-anchor-id=\"a2c4g.11186623.0.i3.6045578aY39DsC\" id=\"e9f37850d1usf\"><li id=\"e9f37852d11pp\"><p id=\"e9f37851d1fif\">远端服务器为ECS时，修改<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>参数和<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_timestamps</code>参数为0。</p></li><li data-spm-anchor-id=\"a2c4g.11186623.0.i2.6045578aY39DsC\" id=\"e9f37854d1mio\"><p id=\"e9f37853d1ir2\">远端服务器为RDS时，RDS无法直接修改内核参数，需要在客户端上修改<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>参数和<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_timestamps</code>参数为0。</p></li></ul><ol id=\"7bf56321d1hik\"><li id=\"7d0b8e1fd1y9e\"><p id=\"7d0b8e20d1vvm\">使用VNC远程连接实例。</p><p id=\"30a54f32d19k5\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"7d0b8e14d1mt9\"><p id=\"7d0b8e15d10zc\">修改<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>和<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_timestamps</code>参数值为0。</p><ol id=\"7d0b8e16d1kg0\"><li id=\"7d0b8e17d1rav\"><p id=\"7d0b8e18d1it6\">执行以下命令，打开<code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>文件。 </p><pre id=\"7d0b8e19d12zt\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>vi /etc/sysctl.conf</code></pre></li><li id=\"7d0b8e1ad1i8f\"><p id=\"7d0b8e1bd1hw2\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"7d0b8e1cd1puf\"><p id=\"7d0b8e1dd1x65\">将<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>和<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_timestamps</code>参数值修改为0。</p><pre id=\"7d0b8e1ed1nb5\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>net.ipv4.tcp_tw_recycle=0\nnet.ipv4.tcp_timestamps=0</code></pre></li><li id=\"843d7180d1eyn\"><p id=\"54f8be60d7q5t\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>，保存并退出编辑。</p></li></ol></li><li id=\"5375a0d0d732z\"><p id=\"537579c0d7qq2\">执行以下命令，使配置生效。 </p><pre id=\"7d0b8e21d1wyj\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>sysctl -p </code></pre></li></ol></section></section></section><section id=\"TxtER\" class=\"section\"><h2 data-tag=\"h3\" id=\"11ec1ac47b385\" class=\"h3\"><b>常见Linux内核参数说明</b></h2><table id=\"11ec1ac67bb5a\" tablewidth=\"708\" tablecolswidth=\"177 531\" class=\"table\"><colgroup colwidth=\"0.5*\" style=\"width:25.00%\"></colgroup><colgroup colwidth=\"1.5*\" style=\"width:75.00%\"></colgroup><tbody class=\"tbody\"><tr id=\"11ec1ac77bbvy\"><td id=\"11ec1ac87bx3x\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"11ec1ac97bet6\">参数</p></td><td id=\"11ec1aca7bbug\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"11ec1acb7brs0\">说明</p></td></tr><tr id=\"11ec1acc7bku0\"><td id=\"11ec41c07bxku\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41c17bafz\">net.core.rmem_default</p></td><td id=\"11ec41c27bsdi\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41c37b2le\">默认的socket数据接收窗口大小（字节）。</p></td></tr><tr id=\"11ec41c47b18t\"><td id=\"11ec41c57bgax\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41c67b8di\">net.core.rmem_max</p></td><td id=\"11ec41c77bw9h\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41c87bbyt\">最大的socket数据接收窗口（字节）。</p></td></tr><tr id=\"11ec41c97bfol\"><td id=\"11ec41ca7bgg0\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41cb7b4oe\">net.core.wmem_default</p></td><td id=\"11ec41cc7bfq7\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41cd7b46z\">默认的socket数据发送窗口大小（字节）。</p></td></tr><tr id=\"11ec41ce7bw14\"><td id=\"11ec41cf7b0g4\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41d07byuc\">net.core.wmem_max</p></td><td id=\"11ec41d17bvq5\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41d27b5ec\">最大的socket数据发送窗口（字节）。</p></td></tr><tr id=\"11ec41d37blvn\"><td id=\"11ec41d47bmjz\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41d57bgpm\">net.core.netdev_max_backlog</p></td><td id=\"11ec41d67b5kk\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41d77bqc6\">当内核处理速度比网卡接收速度慢时，这部分多出来的包就会被保存在网卡的接收队列上。</p><p id=\"6a924220d18k1\">该参数说明了这个队列的数量上限，在每个网络接口接收数据包的速率比内核处理这些包的速率快时，允许送到队列的数据包的最大数目。</p></td></tr><tr id=\"11ec41d87be9y\"><td id=\"11ec41d97b4ux\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41da7bhii\">net.core.somaxconn</p></td><td id=\"11ec41db7b3a7\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41dc7bjtf\">该参数定义了系统中每一个端口最大的监听队列的长度，是个全局参数。</p><p id=\"725234c0d1wx3\">该参数和<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_syn_backlog</code>有关联，后者指的是还在三次握手的半连接的上限，该参数指的是处于ESTABLISHED的数量上限。若您的ECS实例业务负载很高，则有必要调高该参数。<code data-tag=\"code\" class=\"code\">listen(2)</code>函数中的参数<code data-tag=\"code\" class=\"code\">backlog</code> 同样是指明监听的端口处于ESTABLISHED的数量上限，当<code data-tag=\"code\" class=\"code\">backlog</code>大于<code data-tag=\"code\" class=\"code\">net.core.somaxconn</code>时，以<code data-tag=\"code\" class=\"code\">net.core.somaxconn</code>参数为准。</p></td></tr><tr id=\"11ec41dd7be6g\"><td id=\"11ec41de7bplz\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41df7bpir\">net.core.optmem_max</p></td><td id=\"11ec68d07bam4\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68d17b2cx\">表示每个套接字所允许的最大缓冲区的大小。</p></td></tr><tr id=\"11ec68d27bze6\"><td id=\"11ec68d37blzt\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68d47bb08\">net.ipv4.tcp_mem</p></td><td id=\"11ec68d57bv1v\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68d67bvp8\">确定TCP栈应该如何反映内存使用，每个值的单位都是内存页（通常是4 KB）。 </p><ul id=\"8670f682d1acj\"><li id=\"8670f680d1l1r\"><p id=\"84e685f0d1dd4\">第一个值是内存使用的下限。 </p></li><li id=\"87ae5880d1npf\"><p id=\"87ae3170d1uaq\">第二个值是内存压力模式开始对缓冲区使用应用压力的上限。 </p></li><li id=\"88c6a650d1tu2\"><p id=\"88c67f40d1ecu\">第三个值是内存使用的上限。在这个层次上可以将报文丢弃，从而减少对内存的使用。对于较大的BDP可以增大这些值（其单位是内存页而不是字节）。</p></li></ul></td></tr><tr id=\"11ec68d77b0zv\"><td id=\"11ec68d87b9r0\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68d97bys6\">net.ipv4.tcp_rmem</p></td><td id=\"11ec68da7by2m\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68db7b9po\">为自动调优定义Socket使用的内存。 </p><ul id=\"8e7a0012d1h4p\"><li id=\"8e7a0010d114a\"><p id=\"8dd53490d1k9a\">第一个值是为Socket接收缓冲区分配的最少字节数。 </p></li><li id=\"8f955b20d1ibq\"><p id=\"8f953410d1ebr\">第二个值是默认值（该值会覆盖rmem_default），缓冲区在系统负载不重的情况下可以增长到这个值。</p></li><li id=\"905e9e91d1c6e\"><p id=\"905e9e90d10pn\"> 第三个值是接收缓冲区空间的最大字节数（该值会覆盖rmem_max）。</p></li></ul></td></tr><tr id=\"11ec68dc7bkim\"><td id=\"11ec68dd7br6k\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68de7b5jn\">net.ipv4.tcp_wmem</p></td><td id=\"11ec68df7b18l\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68e07bxfr\">为自动调优定义Socket使用的内存。 </p><ul id=\"92741112d1glb\"><li id=\"92741110d1zhy\"><p id=\"91597950d196i\">第一个值是为Socket发送缓冲区分配的最少字节数。 </p></li><li id=\"93c59750d1i87\"><p id=\"93c57040d1mai\">第二个值是默认值（该值会覆盖wmem_default），缓冲区在系统负载不重的情况下可以增长到这个值。 </p></li><li id=\"94c18380d1v33\"><p id=\"94c15c70d1nvo\">第三个值是发送缓冲区空间的最大字节数（该值不会覆盖wmem_max）。</p></li></ul></td></tr><tr id=\"11ec68e17bn6d\"><td id=\"11ec68e27brbg\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68e37b62s\">net.ipv4.tcp_keepalive_time</p></td><td id=\"11ec68e47bnw4\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68e57b697\">TCP发送keepalive探测消息的间隔时间（秒），用于确认TCP连接是否有效。</p></td></tr><tr id=\"11ec68e67bfj6\"><td id=\"11ec68e77b3y3\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68e87b2uf\">net.ipv4.tcp_keepalive_intvl</p></td><td id=\"11ec68e97bnsd\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68ea7bbpq\">探测消息未获得响应时，重发该消息的间隔时间（秒）。</p></td></tr><tr id=\"11ec68eb7bb61\"><td id=\"11ec68ec7bian\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68ed7b97g\">net.ipv4.tcp_keepalive_probes</p></td><td id=\"11ec68ee7bg9f\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68ef7byra\">在认定TCP连接失效之前，最多发送多少个keepalive探测消息。</p></td></tr><tr id=\"11ec68f07bxad\"><td id=\"11ec68f17bbmm\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68f27bh9w\">net.ipv4.tcp_sack</p></td><td id=\"11ec68f37b2wt\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec8fe07bqy9\">启用有选择的应答（1表示启用），通过有选择地应答乱序接收到的报文来提高性能，让发送者只发送丢失的报文段，（对于广域网通信来说）这个选项应该启用，但是会增加对CPU的占用。</p></td></tr><tr id=\"11ec8fe67btbe\"><td id=\"11ec8fe77bb2s\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec8fe87beuk\">net.ipv4.tcp_timestamps</p></td><td id=\"11ec8fe97bamy\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec8fea7bsxa\">TCP时间戳（会在TCP包头增加12B），以一种比重发超时更精确的方法（参考<a class=\"\" target=\"_blank\" href=\"https://tools.ietf.org/html/rfc1323?spm=a2c9r.12641821.0.0.3cfd5e3bRGsNMw#page-28\">RFC 1323</a>）来启用对RTT的计算，为实现更好的性能应该启用这个选项。</p></td></tr><tr id=\"11ec8feb7bgjt\"><td id=\"11ec8fec7bxv6\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec8fed7b5w5\">net.ipv4.tcp_window_scaling</p></td><td id=\"11ec8fee7bluo\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec8fef7blv4\">启用RFC 1323（参考<a class=\"\" target=\"_blank\" href=\"https://tools.ietf.org/html/rfc1323?spm=a2c9r.12641821.0.0.3cfd5e3bRGsNMw#page-28\">RFC 1323</a>）定义的window scaling，若要支持超过64 KB的TCP窗口，必须启用该值（1表示启用），TCP窗口最大至1 GB，TCP连接双方都启用时才生效。</p></td></tr><tr id=\"11ec8ff07b4xu\"><td id=\"11ec8ff17bcya\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec8ff27bd3h\">net.ipv4.tcp_syncookies</p></td><td id=\"11ec8ff37bmf0\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec8ff47bfwy\"> 该参数表示是否打开TCP同步标签（<code data-tag=\"code\" class=\"code\">SYN_COOKIES</code>），内核必须开启并编译CONFIG_SYN_COOKIES，<code data-tag=\"code\" class=\"code\">SYN_COOKIES</code>可以防止一个套接字在有过多试图连接到达时，引起过载。</p><ul id=\"bac45942d1c7l\"><li id=\"bac45940d1c79\"><p id=\"b992de20d1mo6\">默认值0表示关闭。 </p></li><li id=\"bbcf1280d1whz\"><p id=\"bbce4f30d133m\">当该参数被设置为1，且<code data-tag=\"code\" class=\"code\">SYN_RECV</code>队列满了之后，内核会对SYN包的回复做一定的修改，即在响应的SYN+ACK包中，初始的序列号是由源IP+Port、目的IP+Port及时间这五个参数共同计算出一个值组成精心组装的TCP包。由于ACK包中确认的序列号并不是之前计算出的值，恶意攻击者无法响应或误判，而请求者会根据收到的SYN+ACK包做正确的响应。启用<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_syncookies</code>后，会忽略<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_syn_backlog</code>。</p></li></ul></td></tr><tr id=\"11ec8ff77bzn8\"><td id=\"11ec8ff87bav4\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec8ff97bprx\">net.ipv4.tcp_tw_reuse</p></td><td id=\"11ec8ffa7b916\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec8ffb7b8t1\">表示是否允许将处于TIME-WAIT状态的Socket（TIME-WAIT的端口）用于新的TCP连接。</p></td></tr><tr id=\"11ec8ffc7bo8h\"><td id=\"11ec8ffd7bwlq\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec8ffe7brxk\">net.ipv4.tcp_tw_recycle</p></td><td id=\"11ec8fff7bn1e\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec90007bq2p\">能够更快地回收TIME-WAIT套接字。</p></td></tr><tr id=\"11ec90017b9d0\"><td id=\"11ec90027bofi\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec90037bq3i\">net.ipv4.tcp_fin_timeout</p></td><td id=\"11ecb6f07b3lk\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb6f17bvae\">对于本端断开的Socket连接，TCP保持在FIN-WAIT-2状态的时间（秒）。对端可能会断开连接或一直不结束连接或不可预料的进程死亡。</p></td></tr><tr id=\"11ecb6f27biy9\"><td id=\"11ecb6f37bt9z\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb6f47bm8u\">net.ipv4.ip_local_port_range</p></td><td id=\"11ecb6f57bop4\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb6f67bjhz\">表示TCP/UDP协议允许使用的本地端口号。</p></td></tr><tr id=\"11ecb6f77b4a8\"><td id=\"11ecb6f87bkxl\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb6f97bkp3\">net.ipv4.tcp_max_syn_backlog</p></td><td id=\"11ecb6fa7bvfm\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb6fb7b9za\">该参数决定了系统中处于<code data-tag=\"code\" class=\"code\">SYN_RECV</code>状态的TCP连接数量。</p><p id=\"ce9e70e0d13dp\"><code data-tag=\"code\" class=\"code\">SYN_RECV</code>状态指的是当系统收到SYN后，作为SYN+ACK响应后等待对方回复三次握手阶段中的最后一个ACK的阶段。对于还未获得对方确认的连接请求，可保存在队列中的最大数目。如果服务器经常出现过载，可以尝试增加这个数字。默认值大小会受实例内存的影响，默认值最大为2048。</p></td></tr><tr id=\"11ecb7017bbw5\"><td id=\"11ecb7027b5ia\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb7037bcej\">net.ipv4.tcp_westwood</p></td><td id=\"11ecb7047b6ok\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb7057bw5d\">启用发送者端的拥塞控制算法，它可以维护对吞吐量的评估，并试图对带宽的整体利用情况进行优化，对于WAN通信来说应该启用这个选项。</p></td></tr><tr id=\"11ecb7067bes1\"><td id=\"11ecb7077bmmp\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb7087bx8m\">net.ipv4.tcp_bic</p></td><td id=\"11ecb7097b462\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb70a7bhgm\">为快速长距离网络启用Binary Increase Congestion，这样可以更好地利用以GB速度进行操作的链接，对于WAN通信应该启用这个选项。</p></td></tr><tr id=\"11ecb70b7bltc\"><td id=\"11ecb70c7bhxu\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb70d7bw1q\">net.ipv4.tcp_max_tw_buckets</p></td><td id=\"11ecb70e7bscc\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb70f7bprd\">该参数设置系统的TIME_WAIT的数量，如果超过默认值则会被立即清除。tcp_max_tw_buckets默认值大小会受实例内存的影响，最大值为262144。</p></td></tr><tr id=\"11ecb7107bnt7\"><td id=\"11ecb7117bqlm\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb7127bskv\">net.ipv4.tcp_synack_retries</p></td><td id=\"11ecb7137b0bn\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb7147blxb\">指明了处于SYN_RECV状态时重传SYN+ACK包的次数。</p></td></tr><tr id=\"11ecb7157b0tv\"><td id=\"11ecb7167bllk\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde007b77k\">net.ipv4.tcp_abort_on_overflow</p></td><td id=\"11ecde017btml\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde027bwp2\">设置该参数为1时，当系统在短时间内收到了大量的请求，而相关的应用程序未能处理时，就会发送Reset包直接终止这些链接。建议通过优化应用程序的效率来提高处理能力，而不是简单地Reset。默认值为0。</p></td></tr><tr id=\"11ecde037bt90\"><td id=\"11ecde047bzou\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde057bhed\">net.ipv4.route.max_size</p></td><td id=\"11ecde067bxh1\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde077b7xb\">内核所允许的最大路由数目。</p></td></tr><tr id=\"11ecde087b31a\"><td id=\"11ecde097b64o\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde0a7byoi\">net.ipv4.ip_forward</p></td><td id=\"11ecde0b7b1av\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde0c7bw5c\">接口间转发报文。</p></td></tr><tr id=\"11ecde0d7b1zm\"><td id=\"11ecde0e7bafw\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde0f7bag8\">net.ipv4.ip_default_ttl</p></td><td id=\"11ecde107bl01\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde117b71v\">报文可以经过的最大跳数。</p></td></tr><tr id=\"11ecde127bmkk\"><td id=\"11ecde137b187\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde147bspr\">net.netfilter.nf_conntrack_tcp_timeout_established</p></td><td id=\"11ecde157b49y\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde167b570\">在指定之间内，已经建立的连接如果没有活动，则通过iptables进行清除。</p></td></tr><tr id=\"11ecde177bl70\"><td id=\"11ecde187b0yw\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde197b4s7\">net.netfilter.nf_conntrack_max</p></td><td id=\"11ecde1a7bs1g\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde1b7bogm\">哈希表项最大值。</p></td></tr></tbody></table></section><section id=\"bfd03890b332f\" class=\"section\"><h2 data-spm-anchor-id=\"a2c9r.14518950.0.i0.71carExhrExhTb\" id=\"FPCEw\">相关文档</h2><ul id=\"11ecde1c7b57k\"><li id=\"11ecde1d7baik\"><p id=\"11ecde1e7bw5l\"><a class=\"from-extensions-error\" target=\"_blank\" href=\"http://man7.org/linux/man-pages/man2/listen.2.html\">Linux man-pages</a></p></li><li id=\"11ecde1f7bah7\"><p id=\"11ed05107bdgt\"><a class=\"from-extensions-error\" target=\"_blank\" href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/filesystems/proc.rst\">kernel/git/torvalds/linux.git_proc</a></p></li><li id=\"11ed05117b0fw\"><p id=\"11ed05127bpzd\"><a class=\"from-extensions-error\" target=\"_blank\" href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/networking/proc_net_tcp.rst\">kernel/git/torvalds/linux.git_proc_net_tcp</a></p></li><li id=\"11ed05137boxy\"><p id=\"11ed05147bjze\"><a class=\"from-extensions-error\" target=\"_blank\" href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/networking/ip-sysctl.rst\">kernel/git/torvalds/linux.git_ip-sysctl</a></p></li><li id=\"11ed05157bimv\"><p id=\"11ed05167btrd\"><a class=\"from-extensions-error\" target=\"_blank\" href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/networking/netfilter-sysctl.rst\">kernel/git/torvalds/linux.git_netfilter-sysctl</a></p></li><li id=\"11ed05177br21\"><p id=\"11ed05187buhn\"><a class=\"from-extensions-error\" target=\"_blank\" href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/networking/nf_conntrack-sysctl.rst\">kernel/git/torvalds/linux.git_nf_conntrack-sysctl</a></p></li></ul></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/in-linux-when-accessing-the-or-tmp-directory-the-system-prompts-bash-cd-or-tmp-insufficient-permission", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>Linux实例中访问/tmp目录提示“bash: cd: /tmp: 权限不够“错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux实例中访问/tmp目录提示“bash: cd: /tmp: 权限不够“错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:56:24</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"ba84b520b90oj\"><p data-tag=\"shortdesc\" id=\"ba8b6be5b9nt3\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中，访问<code data-tag=\"code\" class=\"code\">/tmp</code>目录时，提示“bash: cd: /tmp: 权限不够”错误时的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"31144520b9qeb\" class=\"section\"><h2 id=\"XbeWY\" data-spm-anchor-id=\"0.0.0.i4.71caWpVKWpVKhJ\">问题现象</h2><p id=\"ba8b92f0b977h\">在Linux系统的ECS实例中，访问<code data-tag=\"codeph\" class=\"codeph\">/tmp</code>目录时提示以下信息。</p><pre data-tag=\"codeblock\" id=\"ba84b521b9h2s\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>bash: cd: /tmp: Permission denied</code></pre></section><section id=\"32ca0b70b9b35\" class=\"section\"><h2 id=\"tayMx\" data-spm-anchor-id=\"0.0.0.i2.71caWpVKWpVKhJ\">问题原因</h2><p id=\"ba8b92f1b98e3\">ECS实例中<code data-tag=\"codeph\" class=\"codeph\">/tmp</code>目录权限不足，导致无法访问。</p></section><section id=\"ce31c010b3bo9\" class=\"section\"><h2 id=\"50e98810b9uyj\">解决方案</h2><ol id=\"50ab1f81b934w\"><li id=\"500dce10b9u10\"><p id=\"500da700b9icy\">使用root用户远程连接ECS实例。</p><p class=\"itemgroup info\" id=\"info-d6f-lre-3tc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"5978b190b9wnz\"><p id=\"59788a80b934s\">执行如下命令，查看<code data-tag=\"code\" class=\"code\">/tmp</code>目录权限是否正确。</p><div type=\"note\" id=\"344ee141b98bf\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"344ee140b9709\">默认情况下，<code data-tag=\"code\" class=\"code\">/tmp</code>目录权限为<code data-tag=\"code\" class=\"code\">drwxrwxrwt</code>。</p></div></div><pre id=\"o35lkh\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls -l /</code></pre><p id=\"82819b60b92c8\">如下图所示，<code data-tag=\"code\" class=\"code\">/tmp</code>目录权限为<code data-tag=\"code\" class=\"code\">dr--r--r--</code>（读取权限），需要进行修改。</p><img id=\"5a9e0240b9lja\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0690387761/p576813.png\" alt=\"tmp权限\" placement=\"break\" class=\"image break\"></li><li id=\"70fc4930b944o\"><p id=\"97413100b925m\">执行如下命令，为<code data-tag=\"code\" class=\"code\">/tmp</code>目录授权。</p><pre data-tag=\"codeblock\" id=\"ba84b522b9icc\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chmod 1777 /tmp</code></pre></li><li id=\"8abbaa90b9jqj\"><p id=\"8abb8380b995j\">重新访问<code data-tag=\"code\" class=\"code\">/tmp</code>目录，确保可以正常访问。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-cannot-query-or-configure-the-routing-information-of-an-alibaba-cloud-linux-2-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统的ECS实例无法查询和配置路由信息，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-07 17:12:46</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"e71a4870c67mw\"><p data-tag=\"shortdesc\" id=\"e720b115c69ns\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2系统的ECS实例无法查询和配置路由信息的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"e720b116c6o39\">符合如下条件的ECS实例无法查询和配置路由信息：</p><ul data-spm-anchor-id=\"a2c4e.11153940.0.i6.69842881mAb5k0\" id=\"e720b117c6o5o\"><li data-spm-anchor-id=\"a2c4e.11153940.0.i9.69842881mAb5k0\" id=\"e720d820c61i0\"><p id=\"e720d821c6evy\">镜像：<code data-tag=\"codeph\" class=\"codeph\">aliyun-2.1903-x64-20G-alibase-20190507.vhd</code>及之前所有的版本。</p></li><li data-spm-anchor-id=\"a2c4e.11153940.0.i4.69842881mAb5k0\" id=\"e720d822c61fj\"><p id=\"e720d823c6iu0\">内核：<code data-tag=\"codeph\" class=\"codeph\">kernel-4.19.34-11.al7</code>及之前所有的内核版本。</p></li></ul><p id=\"e720d824c6uq9\">具体的问题现象如下：</p><ul id=\"e720d825c6kgr\"><li id=\"e720d826c6bn9\"><p id=\"e720ff30c62wx\">无法查询创建的路由表信息。操作示例如下： \n</p><div type=\"note\" id=\"e720ff31c6ic1\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"e720ff32c61gp\" class=\"p\">此处的示例信息仅供参考，现场以实际情况为准。\n</p></div></div><ol id=\"e720ff33c67u3\"><li id=\"e720ff34c6vc4\"><p id=\"e720ff35c6k53\">执行以下命令，创建路由表。 </p><pre data-tag=\"codeblock\" id=\"e71a4871c60si\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ip -4 route add default via 192.168.0.253 dev eth1 table 1001</code></pre></li><li id=\"e7212641c6f4a\"><p id=\"e7212642c67nq\">执行以下命令，查看创建的路由表信息。系统未返回创建的路由表信息。 </p><pre data-tag=\"codeblock\" id=\"e71a4872c6mg2\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ip route list table 1001</code></pre></li><li id=\"e7212644c6cvk\"><p id=\"e7212645c6q8d\">再次执行以下命令，尝试创建路由表。 </p><pre data-tag=\"codeblock\" id=\"e71a4873c6976\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ip -4 route add default via 192.168.0.253 dev eth1 table 1001</code></pre><p id=\"e7212646c6js0\"> 系统返回<code data-tag=\"codeph\" class=\"codeph\">File exists</code>的错误信息。 </p><pre data-tag=\"codeblock\" id=\"e71a4874c66k3\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>RTNETLINK answers: File exists</code></pre></li></ol></li><li id=\"e7214d52c6sqk\"><p id=\"e7214d53c6cey\">无法配置策略路由。执行以下命令，配置策略路由，系统返回<code data-tag=\"codeph\" class=\"codeph\">Operation not supported</code>的错误信息。 </p><pre data-tag=\"codeblock\" id=\"e71a4875c6jyw\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ip -4 rule add from 192.168.0.68 loopup 1001</code></pre></li></ul><h2 id=\"4rM4I\">问题原因</h2><p data-spm-anchor-id=\"a2c4e.11153940.0.i23.69842881mAb5k0\" id=\"e7214d55c6112\">策略路由依赖<code data-tag=\"codeph\" class=\"codeph\">CONFIG_IP_MULTIPLE_TABLES</code>模块，在<code data-tag=\"codeph\" class=\"codeph\">kernel-4.19.34-11.al7</code>及之前所有的内核版本中，未开启<code data-tag=\"codeph\" class=\"codeph\">CONFIG_IP_MULTIPLE_TABLES</code>模块。</p><h2 id=\"AywdZ\">解决方案</h2><p data-spm-anchor-id=\"a2c4e.11153940.0.i23.69842881mAb5k0\" id=\"e7217469c69my\">在<code data-tag=\"codeph\" class=\"codeph\">kernel-4.19.36-12.al7.x86_64</code>及之后的内核版本中，配置已启用策略路由所依赖的相关选项，可以解决上述问题。</p><pre data-tag=\"codeblock\" id=\"e71a4876c6n08\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>CONFIG_IP_MULTIPLE_TABLES=y\nCONFIG_IPV6_MULTIPLE_TABLES=y\nCONFIG_IPV6_SUBTREES=y\nCONFIG_FIB_RULES=y\n# CONFIG_NET_VRF is not set</code></pre><p data-spm-anchor-id=\"a2c4e.11153940.0.i23.69842881mAb5k0\" id=\"19257990ceu6k\">因此，请您升级ECS实例的内核至<code data-tag=\"codeph\" class=\"codeph\">kernel-4.19.36-12.al7.x86_64</code>或之后的版本。</p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-a-large-number-of-processes-cannot-be-created-on-an-alibaba-cloud-linux-2-ecs-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统的ECS实例创建大量进程失败，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-12 11:10:22</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"cbf212d0c6s91\"><p data-tag=\"shortdesc\" id=\"cbf8c993c6h2f\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2系统的ECS实例创建大量进程失败的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p class=\"from-extensions-error\" id=\"cbf8c997c6rh8\">Alibaba Cloud Linux 2系统的ECS实例中执行系统调用（fork/clone）时，进程创建失败，返回“<code data-tag=\"codeph\" class=\"codeph\">-1 EAGAIN (Resource temporarily unavailable)</code>”错误。一般有如下两种场景：</p><ul id=\"cbf8c998c603o\"><li id=\"cbf8f0a0c6449\"><p id=\"cbf8f0a1c6yi6\">场景一：通过Shell命令交互时，系统返回“<code data-tag=\"codeph\" class=\"codeph\">bash: fork: retry: No child processes</code>”错误。</p></li><li id=\"cbf8f0a2c6n4w\"><p id=\"cbf8f0a3c624l\">场景二：部分应用内创建进程或者线程失败，同时在系统的其他应用中却可以创建成功。</p></li></ul><h2 id=\"4rM4I\">问题原因</h2><p id=\"cbf8f0a4c6ega\">不同的场景，问题原因不同，请根据现场实际情况匹配对应的场景：</p><ul id=\"cbf8f0a5c6cao\"><li id=\"cbf8f0a6c62j2\"><p id=\"cbf8f0a7c6eo3\">场景一：系统用户创建的线程数达到最大值。通过<code data-tag=\"codeph\" class=\"codeph\">ulimit -u</code>命令可查看线程最大值。</p></li><li id=\"cbf8f0a8c6rf9\"><p id=\"cbf8f0a9c6a9g\">场景二：部分应用的运行用户所创建的进程数（nr_user_process）大于应用的进程数限制（app_limit），引发报错。</p></li></ul><h2 id=\"AywdZ\">解决方案</h2><h3 id=\"94fda440d4lxl\"><b>调整系统用户可创建的最大线程数</b></h3><ol id=\"cbf93ec7c6ek6\"><li id=\"cbf93ec8c66q2\"><p id=\"cbf93ec9c6j7v\">切换到root用户，查看进程创建失败用户的所有应用。</p></li><li id=\"cbf93ecac6n9o\"><p id=\"cbf93ecbc68tk\">通过<code data-tag=\"codeph\" class=\"codeph\">kill</code>命令强制关闭占用线程数较多的应用。</p><div type=\"warning\" id=\"2727b090celyi\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p data-tag=\"p\" id=\"cbf965d1c6a8y\" class=\"p\"> <code data-tag=\"codeph\" class=\"codeph\">kill</code>命令属于风险操作，确保操作前为ECS实例创建快照或者备份重要文件，确保数据安全。</p></div></div></li><li id=\"cbf93eccc6cuj\"><p id=\"cbf93ecdc623s\">调整系统用户可创建的最大线程数。 \n</p><pre data-tag=\"codeblock\" id=\"cbf239e0c6bf1\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ulimit -u &lt;$Num_Of_Process&gt;</code></pre><div type=\"note\" id=\"cbf965d3c6cuz\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"cbf965d4c6rwb\" class=\"p\">&lt;$Num_Of_Process&gt;指调整后的最大线程值，建议您合理规划ulimit资源。\n</p></div></div></li></ol><h3 id=\"cbf965d8c6bc6\"><b>调整某个进程的limit资源 \n</b></h3><ol id=\"cbf965d9c6vt4\"><li id=\"cbf965dac6wwx\"><p id=\"cbf98ce0c6dk3\">安装util-linux工具。 </p><pre data-tag=\"codeblock\" id=\"cbf239e1c6lj6\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install -y util-linux</code></pre><div type=\"note\" id=\"cbf98ce1c69w4\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"cbf98ce2c6uva\" class=\"p\">如果已安装该工具，可跳过本步骤。\n</p></div></div></li><li id=\"cbf98ce4c693o\"><p id=\"cbf98ce5c6r3h\">调整进程的limit资源。 </p><pre data-tag=\"codeblock\" id=\"cbf239e2c6hpg\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>prlimit --pid &lt;$PID&gt; --nproc=unlimited</code></pre><div type=\"note\" id=\"cbf98ce6c6s5a\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"cbf98ce7c6sdb\" class=\"p\">&lt;$PID&gt;指进程或线程创建失败的进程PID。\n</p></div></div></li></ol><p id=\"cbf98cebc6u5g\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-local-time-of-an-alibaba-cloud-linux-2-instance-falls-behind-the-time-of-the-ntp-server-after-i-start-or-restart-the-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2镜像的ECS实例启动或重启后系统时间同步存在延迟，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-07 17:14:14</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"b04b5e60c6vo8\"><p data-tag=\"shortdesc\" id=\"b0512ac3c6zex\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2镜像的ECS实例启动或重启后系统时间同步存在延迟的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"b0512ac7c6g7w\">符合如下条件的ECS实例启动或重启后，系统时间与NTP服务器时间一直相差8小时，执行<code data-tag=\"codeph\" data-spm-anchor-id=\"a2c4e.11153940.0.i9.6b82191f4pBjTA\" class=\"codeph\">hwclock -w</code>命令无法更改内核时间。</p><ul id=\"b05151d0c66y5\"><li id=\"b05151d1c6nmo\"><p id=\"b05151d2c6olm\">Alibaba Cloud Linux 2.1903的镜像版本。</p></li><li id=\"b05151d3c6q7z\"><p id=\"b05151d4c61vd\"><code data-tag=\"codeph\" data-spm-anchor-id=\"a2c4e.11153940.0.i7.6b82191f4pBjTA\" class=\"codeph\">kernel-4.19.24-10.al7.x86_64</code>及之前的内核版本。</p></li></ul><h2 id=\"4rM4I\">问题原因</h2><p data-spm-anchor-id=\"a2c4e.11153940.0.i13.6b82191f4pBjTA\" id=\"b05151d5c64v8\">硬件时钟RTC是正确的，同时也设置了<code data-tag=\"codeph\" class=\"codeph\">_set-local-rtc_</code>，但在启动低版本内核系统中没有将时间同步到Local Time（System Time）。</p><h2 id=\"AywdZ\">解决方案</h2><ol id=\"87ce0282d4j9p\"><li id=\"87ce0280d44pg\"><p id=\"866d12f1d44zl\">在内核中开启如下配置。</p><pre data-tag=\"codeblock\" id=\"b04b8570c6c7z\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code># Set system time from RTC on startup and resume\nCONFIG_RTC_HCTOSYS=y\n#  RTC used to set the system time\nCONFIG_RTC_HCTOSYS_DEVICE=\"rtc0\"</code></pre></li><li id=\"9c0a8570d4a6f\"><p id=\"b05178ebc6itc\">在<code data-tag=\"codeph\" class=\"codeph\">/etc/rc.d/rc.local</code>文件中增加<code data-tag=\"codeph\" class=\"codeph\">hwclock --hctosys</code>参数，使得系统在启动过程中同步时间。</p><pre data-tag=\"codeblock\" id=\"b04b8571c6jzb\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>echo \"hwclock --hctosys\" &gt;&gt;/etc/rc.d/rc.local\nchmod +x /etc/rc.d/rc.local</code></pre></li><li id=\"a6c6a110d49h5\"><p data-tag=\"h3\" id=\"b0519ff0c6ct2\" class=\"h3\">（可选）建议您升级内核至<code data-tag=\"codeph\" class=\"codeph\">kernel-4.19.34-11.al7.x86_64</code>及以上版本，彻底解决该问题。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/linux-instance-that-executes-the-crontab-e-command-prompt-errors-in-crontab-file-can-t-install-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>Linux实例中执行“crontab -e”命令时提示“errors in crontab file, can't install”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux实例中执行“crontab -e”命令时提示“errors in crontab file, can't install”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:31:57</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"77796440b51mb\"><p data-tag=\"shortdesc\" id=\"7786aab1b52yc\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中执行<code data-tag=\"code\" class=\"code\">crontab -e</code>命令时，提示“errors in crontab file, can't install”错误时的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"5111ca80b5283\" class=\"section\"><h2 id=\"XbeWY\" data-spm-anchor-id=\"a2c9r.14518950.0.i10.6fc414376iZYwJ\">问题描述</h2><p id=\"7786aab2b52xj\">在Linux系统的ECS实例中执行<code data-tag=\"codeph\" class=\"codeph\">crontab -e</code>命令创建周期性任务时提示以下报错信息。</p><pre data-tag=\"codeblock\" id=\"77796441b5idg\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>errors in crontab file, can't install</code></pre><img id=\"4e724070b5wqu\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6932647761/p573467.png\" alt=\"2023-02-26_16-47-41\" placement=\"break\" class=\"image break\"></section><section id=\"5305f960b5sf3\" class=\"section\"><h2 id=\"tayMx\">问题原因</h2><p id=\"f8a4ddb1b5taw\">该问题可能有以下原因：</p><ul id=\"7786d1c0b5yvc\"><li id=\"7786d1c1b5bb0\"><p id=\"c54b7910b59oo\"><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">crontab</span></code>文件格式错误导致执行周期性任务报错。</p></li><li id=\"c46278a1b5ytx\"><p id=\"c46278a0b507l\">磁盘空间满，导致<code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">crontab</span></code>文件无法写入而报错。</p></li></ul></section><section id=\"ce31c010b3bo9\" class=\"section\"><h2 id=\"5a8c8c80b5rno\">解决方案</h2><p id=\"91a63b31b5byw\">您可以登录实例，修改<code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">crontab</span></code>文件格式或扩容云盘以解决此问题。</p><ol class=\"ol steps\" id=\"steps-3w7-af7-yk1\"><li id=\"58b9a141b5i4k\"><p id=\"58b9a140b58lj\"><span style=\"color:rgb(24, 24, 24)\">远程连接ECS实例。</span></p><p class=\"itemgroup info\" id=\"info-d6f-lre-3tc\"><span style=\"color:rgb(24, 24, 24)\">具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a><span style=\"color:rgb(24, 24, 24)\">。</span></p></li><li class=\"li step stepexpand\" id=\"step-2qr-5f1-cb8\"><p id=\"cf971fa0b57fc\">检查<code data-tag=\"codeph\" class=\"codeph\">crontab</code>文件中定时任务格式是否正确。</p><ul id=\"da47a281b5eek\"><li id=\"d9f89821b5xst\"><p id=\"d9f89820b54x0\">若格式正确，请继续执行步骤<a title=\"\" class=\"xref\" href=\"#cb3ec201b5app\">3</a>。</p></li><li id=\"f74841a1b5zjr\"><p id=\"f74841a0b5avi\">若格式不正确，请及时更正，具体格式如下。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6932647761/p519687.png\" width=\"412\" height=\"253\" class=\"image break\"><p id=\"02fa07e0b5b0n\"></p></li></ul></li><li id=\"cb3ec201b5app\"><p id=\"cb3ec200b54xc\"><span style=\"color:rgb(24, 24, 24)\">执行以下命令，查看磁盘使用率。</span></p><pre id=\"67yqgu\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>df -h</code></pre><p id=\"799075b0b50au\"><span style=\"color:rgb(24, 24, 24)\">系统显示类似如下信息。例如，Use%为分区/dev/xvda1的</span><span style=\"color:rgb(24, 24, 24)\">使用率。</span></p><p id=\"843dc440b5dyk\"><span style=\"color:rgb(24, 24, 24)\">若磁盘使用率接近100%，说明磁盘空间不足，建议您扩容云盘后再进行操作。具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-19\">云盘扩容指引</a><span style=\"color:rgb(24, 24, 24)\">。</span></p><img id=\"f36cd900b5fiq\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6932647761/p573466.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/fix-the-cve-2021-22555-vulnerability-in-an-alibaba-cloud-linux-2-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统的CVE-2021-22555安全漏洞内核热补丁修复方案</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-04 14:35:24</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"87438600c6edp\"><p data-tag=\"shortdesc\" id=\"8749eea1c6eks\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2系统的CVE-2021-22555安全漏洞内核热补丁修复方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"8749eea2c6yon\">在符合如下条件的Alibaba Cloud Linux 2实例中，存在CVE-2021-22555安全漏洞，系统运行时出现系统宕机问题，且出现如下调用栈信息。</p><ul id=\"8749eea3c65g1\"><li id=\"8749eea4c6pg9\"><p id=\"8749eea5c640z\">镜像：Alibaba Cloud Linux 2.1903 LTS 64位。</p></li><li id=\"8749eea6c6j92\"><p id=\"874a15b0c6940\">内核：kernel-4.19.91-24.al7及之前的内核版本。</p></li></ul><pre data-tag=\"codeblock\" id=\"87438601c6601\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>[  104.019092] x_tables: ip6_tables: icmp6.0 match: invalid size 8 (kernel) != (user) 212\n[  104.020124] BUG: unable to handle kernel paging request at ffff9879000004b8\n[  104.020783] PGD 19a01067 P4D 19a01067 PUD 0 \n[  104.021177] Oops: 0000 [#1] SMP PTI\n[  104.021526] CPU: 0 PID: 94 Comm: kworker/u4:1 Kdump: loaded Tainted: G           O  K   4.19.91-23.al7.x86_64 #1\n[  104.022389] Hardware name: Alibaba Cloud Alibaba Cloud ECS, BIOS 8c24b4c 04/01/2014\n[  104.023081] Workqueue: netns cleanup_net\n[  104.023450] RIP: 0010:netdev_queue_release+0x55/0xa0\n[  104.023892] Code: 48 ab 74 0a c7 07 00 00 00 00 48 83 c7 04 40 f6 c6 02 74 0a 31 c0 48 83 c7 02 66 89 47 fe 83 e6 01 74 03 c6 07 00 49 8b 40 e8 &lt;48&gt; 8b 80 b8 04 00 00 65 ff 08 c3 49 8d 78 01 41 c6 00 00 40 b6 3f\n[  104.025531] RSP: 0018:ffffa538804d3cc8 EFLAGS: 00010246\n[  104.025982] RAX: ffff987900000000 RBX: ffff9879bb277a18 RCX: 0000000000000000\n[  104.026638] RDX: ffff9879bb8b30c0 RSI: 0000000000000000 RDI: ffff9879bb277a58\n[  104.027374] RBP: ffffffffb615b0e0 R08: ffff9879bb277a18 R09: ffffffffb5323ef3\n[  104.028052] R10: ffff9879bda273a0 R11: fffff43400d73100 R12: ffff9879bbf73a20\n[  104.029397] R13: ffff9879bb277a18 R14: 0000000000000000 R15: ffffa538804d3e38\n[  104.030741] FS:  0000000000000000(0000) GS:ffff9879bda00000(0000) knlGS:0000000000000000\n[  104.032082] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033\n[  104.033189] CR2: ffff9879000004b8 CR3: 000000001720a001 CR4: 00000000003606f0\n[  104.034463] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000\n[  104.035894] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400\n[  104.037090] Call Trace:\n[  104.038012]  kobject_put+0x81/0x1b0\n[  104.039167]  netdev_queue_update_kobjects+0xbd/0x140\n[  104.040359]  netdev_unregister_kobject+0x58/0x80\n[  104.041462]  rollback_registered_many+0x2d5/0x550\n[  104.042593]  ? netdev_run_todo+0x4d/0x2c0\n[  104.043678]  unregister_netdevice_many+0x17/0x70\n[  104.044853]  default_device_exit_batch+0x131/0x150\n[  104.045998]  ? do_wait_intr_irq+0xb0/0xb0\n[  104.047282]  cleanup_net+0x1a9/0x2a0\n[  104.048323]  process_one_work+0x15b/0x370\n[  104.049384]  worker_thread+0x49/0x3e0\n[  104.050406]  kthread+0xf8/0x130\n[  104.051396]  ? process_one_work+0x370/0x370\n[  104.052646]  ? kthread_park+0xb0/0xb0\n[  104.053970]  ret_from_fork+0x35/0x40\n[  104.055143] Modules linked in: tcp_diag inet_diag xt_NFQUEUE ip6_tables intel_rapl_msr intel_rapl_common iosf_mbi isst_if_common nfit crct10dif_pclmul crc32_pclmul ghash_clmulni_intel pcbc aesni_intel crypto_simd cryptd glue_helper kpatch_5902278(OK) psmouse mousedev pcspkr kpatch(O) pvpanic i2c_piix4 sunrpc ip_tables ata_generic pata_acpi cirrus drm_kms_helper syscopyarea sysfillrect sysimgblt fb_sys_fops ttm drm ata_piix crc32c_intel serio_raw uhci_hcd i2c_core libata floppy [last unloaded: kpatch_xfkpQ0nwgmO]\n[  104.064254] CR2: ffff9879000004b8\n[  104.065832] ---[ end trace 7a2c6cfbc71f5ecf ]---\n[  104.067687] RIP: 0010:netdev_queue_release+0x55/0xa0\n[  104.069192] Code: 48 ab 74 0a c7 07 00 00 00 00 48 83 c7 04 40 f6 c6 02 74 0a 31 c0 48 83 c7 02 66 89 47 fe 83 e6 01 74 03 c6 07 00 49 8b 40 e8 &lt;48&gt; 8b 80 b8 04 00 00 65 ff 08 c3 49 8d 78 01 41 c6 00 00 40 b6 3f\n[  104.073459] RSP: 0018:ffffa538804d3cc8 EFLAGS: 00010246\n[  104.075654] RAX: ffff987900000000 RBX: ffff9879bb277a18 RCX: 0000000000000000\n[  104.077569] RDX: ffff9879bb8b30c0 RSI: 0000000000000000 RDI: ffff9879bb277a58\n[  104.079289] RBP: ffffffffb615b0e0 R08: ffff9879bb277a18 R09: ffffffffb5323ef3\n[  104.081150] R10: ffff9879bda273a0 R11: fffff43400d73100 R12: ffff9879bbf73a20\n[  104.083570] R13: ffff9879bb277a18 R14: 0000000000000000 R15: ffffa538804d3e38\n[  104.085397] FS:  0000000000000000(0000) GS:ffff9879bda00000(0000) knlGS:0000000000000000\n[  104.087283] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033\n[  104.088899] CR2: ffff9879000004b8 CR3: 000000001720a001 CR4: 00000000003606f0\n[  104.090584] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000\n[  104.092251] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400\n[  104.093895] Kernel panic - not syncing: Fatal exception\n[  104.099305] Kernel Offset: 0x34000000 from 0xffffffff81000000 (relocation range: 0xffffffff80000000-0xffffffffbfffffff)</code></pre><h2 id=\"4rM4I\">问题原因</h2><p id=\"874a15b2c6c2r\">Linux内核的Netfilter模块在实现IPT_SO_SET_REPLACE或IP6T_SO_SET_REPLACE setsockopt时存在堆越界写入漏洞，该漏洞将允许本地用户通过用户名空间获取权限提升，该漏洞在KCTF中被用于攻击Kubernetes集群中的Pod容器，从而导致实现虚拟化逃逸。该漏洞已在Linux内核中存在15年。更多说明请参见<a class=\"\" target=\"_blank\" href=\"https://github.com/google/security-research/security/advisories/GHSA-xxx5-8mvq-3528\">Linux: Heap Out-Of-Bounds Write in xt_compat_target_from_user</a>。</p><h2 id=\"AywdZ\">解决方案</h2><p data-spm-anchor-id=\"a2c9r.14518950.0.i4.45975e3brJkwrd\" id=\"874a3cc5c609y\">当遇到该问题时，您可以参考以下方案处理。</p><ol id=\"874a3cc6c6h04\"><li id=\"874a3cc7c6pgi\"><p id=\"874a3cc8c6dyd\">登录ECS实例，详情请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"874a63d0c6p8u\"><p id=\"874a63d1c65pg\">执行以下命令，确认系统内核版本。 </p><pre data-tag=\"codeblock\" id=\"87438602c67hg\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>uname -r</code></pre><p id=\"874a63d2c64f6\"> 系统显示类似如下。 </p><pre data-tag=\"codeblock\" id=\"87438603c6t3m\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code> 4.19.91-21.al7.x86_64</code></pre></li><li id=\"874a63d4c6cz7\"><p id=\"874a63d5c67qj\">请根据系统内核版本，选择以下对应的解决方法： \n </p><ul id=\"874a63d6c60fg\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i11.24dc5e3bm0FMyr\" id=\"874a63d7c6lmc\"><p id=\"874a63d8c6rnh\">4.19.91-19.1.al7.x86_64（不含）之前的版本 \n </p><ol id=\"874a63d9c64jl\"><li id=\"874a63dac69it\"><p id=\"874a63dbc6x88\">更新操作系统版本至最新的内核版本。 </p><pre data-tag=\"codeblock\" id=\"87438604c6yei\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum update kernel</code></pre></li><li id=\"874a8ae1c6qps\"><p id=\"874a8ae2c6h28\">重启服务器生效。 </p><pre data-tag=\"codeblock\" id=\"87438605c6c3k\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>reboot</code></pre></li><li id=\"874a8ae4c6ir2\"><p id=\"874a8ae5c6zzh\">若最新内核版本的操作系统同样存在该问题，请参见4.19.91-19.1.al7.x86_64（包含）到4.19.91-24.al7.x86_64（包含）之间版本的解决方案更新内核热补丁。</p></li></ol></li><li id=\"874a8ae7c6pj8\"><p id=\"874a8ae8c6jt4\">对于4.19.91-19.1.al7.x86_64（包含）到4.19.91-24.al7.x86_64（包含）之间的版本，可通过安装内核热补丁解决，安装命令如下。 </p><pre data-tag=\"codeblock\" id=\"87438606c6v2e\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install -y kernel-hotfix-5928799-`uname -r | awk -F\"-\" '{print $NF}'`</code></pre></li></ul></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-yum-commands-cannot-be-run-on-an-alibaba-cloud-linux-2-ecs-instance-that-resides-in-the-classic-network", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统的经典网络ECS实例无法执行yum命令，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-07 11:41:11</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"2d2f784065ue9\"><p data-tag=\"shortdesc\" id=\"2d325e7165klr\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2系统的经典网络ECS实例无法执行yum命令的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"2d325e72658as\">符合如下条件的ECS实例执行<code data-tag=\"code\" class=\"code\">yum update</code>命令失败，返回仓库（repo）地址无效的提示。</p><ul id=\"2d325e73654ns\"><li id=\"2d325e7465tvv\"><p id=\"2d325e7565bt7\">镜像：<code data-tag=\"code\" class=\"code\">aliyun-2.1903-x64-20G-alibase-20190327.vhd</code>及之后所有版本。</p></li><li id=\"2d325e7665ihu\"><p id=\"2d325e7765rvk\">内核：<code data-tag=\"code\" class=\"code\">kernel-4.19.24-9.al7</code>及之后所有内核版本。</p></li><li id=\"2d325e7865hf7\"><p id=\"2d325e79659wo\">网络：经典网络。</p></li></ul><h2 id=\"4rM4I\">问题原因</h2><p id=\"2d325e7a65ogd\">Alibaba Cloud Linux 2系统的经典网络ECS实例非阿里云官方支持的场景，可能无法连接默认YUM仓库文件中的地址。</p><h2 id=\"AywdZ\">解决方案</h2><ol id=\"2d32858765uih\"><li data-spm-anchor-id=\"a2c4e.11153940.0.i10.2ac35231ZbeSmJ\" id=\"2d32858865ucn\"><p id=\"2d32858965e8c\">登录目标ECS实例。</p></li><li data-spm-anchor-id=\"a2c4e.11153940.0.i10.2ac35231ZbeSmJ\" id=\"2d32858a650nn\"><p id=\"2d32858b65ja2\">修改<code data-tag=\"code\" class=\"code\">/etc/yum.repos.d/aliyun-base.repo</code>配置文件，修改后的内容如下。 \n</p><div type=\"note\" id=\"2d32858c65x2t\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"2d32858d650b7\">如果该配置文件不存在，需先创建该文件。\n</p></div></div><pre id=\"2d2f784165ai2\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>[base]\nname=AliYun-$releasever - Base - mirrors.aliyun.com\nbaseurl=http://mirrors.aliyun.com/alinux/$releasever/os/$basearch/\ngpgcheck=1\ngpgkey=http://mirrors.aliyun.com/alinux/RPM-GPG-KEY-ALIYUN\n\n#released updates\n[updates]\nname=AliYun-$releasever - Updates - mirrors.aliyun.com\nbaseurl=http://mirrors.aliyun.com/alinux/$releasever/updates/$basearch/\ngpgcheck=1\ngpgkey=http://mirrors.aliyun.com/alinux/RPM-GPG-KEY-ALIYUN\n\n#additional packages that may be useful\n[extras]\nname=AliYun-$releasever - Extras - mirrors.aliyun.com\nbaseurl=http://mirrors.aliyun.com/alinux/$releasever/extras/$basearch/\ngpgcheck=1\ngpgkey=http://mirrors.aliyun.com/alinux/RPM-GPG-KEY-ALIYUN\n\n# plus packages provided by Aliyun Linux dev team\n[plus]\nname=AliYun-$releasever - Plus - mirrors.aliyun.com\nbaseurl=http://mirrors.aliyun.com/alinux/$releasever/plus/$basearch/\ngpgcheck=1\ngpgkey=http://mirrors.aliyun.com/alinux/RPM-GPG-KEY-ALIYUN</code></pre></li><li data-spm-anchor-id=\"a2c4e.11153940.0.i10.2ac35231ZbeSmJ\" id=\"2d32859065pnn\"><p id=\"2d328591651o7\">删除<code data-tag=\"code\" class=\"code\">/etc/yum.repos.d/</code>目录下的其他<code data-tag=\"code\" class=\"code\">.repo</code>的配置文件。例如：<code data-tag=\"code\" class=\"code\">/etc/yum.repos.d/epel.repo</code>。</p></li><li id=\"459daa30d4ohw\"><p data-spm-anchor-id=\"0.0.0.i24.af05cHEocHEo3e\" id=\"2d3285936534b\">（可选）经典网络的ECS实例非阿里云官方支持的场景，建议您更换ECS实例的网络类型为VPC网络，彻底解决该问题。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/vpc/use-cases/overview-3\">经典网络迁移至VPC网络</a>。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-return-value-of-the-send-q-parameter-is-0-after-the-ss-command-is-run-on-an-alibaba-cloud-linux-2-ecs-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统的ECS实例执行ss命令时返回的Send-Q字段值为0，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-07 17:14:29</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"2cf27da0c6s4s\"><p data-tag=\"shortdesc\" id=\"2cf89825c6tcs\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2系统的ECS实例执行ss命令时返回的Send-Q字段值为0的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p data-spm-anchor-id=\"a2c4e.11153940.0.i10.6aced114CAb5dY\" id=\"2cf89826c6p2s\">在符合如下条件的ECS实例中执行<code data-tag=\"codeph\" class=\"codeph\">ss -lnt</code>命令时，返回的Send-Q字段值为0。</p><ul id=\"2cf8bf30c6004\"><li data-spm-anchor-id=\"a2c4e.11153940.0.i10.6aced114CAb5dY\" id=\"2cf8bf31c6cr3\"><p id=\"2cf8bf32c6mxm\">镜像：<code data-tag=\"codeph\" class=\"codeph\">aliyun-2.1903-x64-20G-alibase-20190507.vhd</code>及之前的版本。</p></li><li data-spm-anchor-id=\"a2c4e.11153940.0.i10.6aced114CAb5dY\" id=\"2cf8bf33c6zdl\"><p id=\"2cf8bf34c6ota\">内核：<code data-tag=\"codeph\" class=\"codeph\">kernel-4.19.43-13.al7.x86_64</code>及之前的内核版本。</p></li></ul><p data-spm-anchor-id=\"a2c4e.11153940.0.i10.6aced114CAb5dY\" id=\"2cf8bf35c6767\">系统显示类似如下。</p><pre data-tag=\"codeblock\" id=\"2cf27da1c6r70\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code># ss -lnt\nState       Recv-Q Send-Q                            Local Address:Port                                           Peer Address:Port\nLISTEN      0      0                                             *:35107                                                     *:*\nLISTEN      0      0                                             *:38727                                                     *:*\nLISTEN      0      0                                             *:5355                                                      *:*\nLISTEN      0      0                                             *:111                                                       *:*</code></pre><p id=\"2cf8bf36c6x6e\">而查看ss命令的说明会发现，对于监听中（listening）的TCP socket，Send-Q字段表示该Socket的syn backlog最大值。在Linux系统中，该字段实际输出该listening socket全连接队列的最大容量，所以其值不应该为0。</p><pre data-tag=\"codeblock\" id=\"2cf27da2c6fx3\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Send-Q\n       Established:  The  count  of bytes not acknowledged by the remote host.  \n       Listening: Since Kernel 2.6.18 this column contains the maximum\n       size of the syn backlog.</code></pre><h2 id=\"4rM4I\">问题原因</h2><p id=\"73698790cdj8h\"><code data-tag=\"codeph\" class=\"codeph\">kernel-4.19.43-13.al7.x86_64</code>及之前的内核版本未集成tcp_diag模块，因此ss命令会回退到<code data-tag=\"codeph\" class=\"codeph\">/proc/net/tcp</code>模式，而<code data-tag=\"codeph\" class=\"codeph\">/proc/net/tcp</code>接口（不推荐使用）输出结果中listening TCP socket的tx_queue字段值均为0，从而导致<code data-tag=\"codeph\" class=\"codeph\">ss -lnt</code>命令输出的Send-Q字段值也为0。详情可参见<a class=\"\" target=\"_blank\" href=\"https://www.kernel.org/doc/Documentation/networking/proc_net_tcp.txt\">/proc/net/tcp接口介绍文档</a>。</p><p id=\"72fa7210cdbeq\"><code data-tag=\"codeph\" data-spm-anchor-id=\"a2c4e.11153940.0.i15.6aced114CAb5dY\" class=\"codeph\">ss -lnt</code>命令输出的Send-Q字段表示listening TCP socket全连接队列的最大容量。用户态network相关的工具套件有net-tools与iproute2两种，其中net-tools自2001年已经停止维护，取而代之的是iproute2套件。而ss命令正是iproute2套件的一部分，net-tools中与ss实现类似功能的则是netstat命令。ss命令与netstat命令获取网络信息的区别如下：</p><ul id=\"2cf8e641c6d37\"><li id=\"2cf8e642c6vqy\"><p id=\"2cf8e643c67xk\">netstat通过<code data-tag=\"codeph\" class=\"codeph\">/proc/net/tcp</code>接口获取TCP socket的相关统计信息。</p></li><li id=\"2cf8e644c6zp0\"><p id=\"2cf8e645c62wu\">ss默认使用socket接口与tcp_diag内核模块通讯，获取TCP socket的相关统计信息。当内核不支持tcp_diag内核模块时，会回退到<code data-tag=\"codeph\" class=\"codeph\">/proc/net/tcp</code>模式。</p></li></ul><h2 id=\"AywdZ\">解决方案</h2><p id=\"2cf93465c6tkk\">升级ECS实例的内核到<code data-tag=\"codeph\" class=\"codeph\">kernel-4.19.43-13.1.al7.x86_64</code>及之后的版本。</p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-cannot-upgrade-the-kernel-of-an-alibaba-cloud-linux-2-ecs-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统的ECS实例升级内核失败，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-07 17:12:39</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"ead6a9a0c6oju\"><p data-tag=\"shortdesc\" id=\"eadceb36c6p3g\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2系统的ECS实例升级内核失败的原因及解决办法。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"XbeWY\">问题描述</h2><p id=\"eadd1240c67jh\">在符合如下条件的Alibaba Cloud Linux 2实例升级内核时，提示grubby报错，具体报错信息如下所示。且内核升级后，grub启动项不能自动更新，新内核功能不生效。</p><ul data-spm-anchor-id=\"a2c4g.11186623.2.i0.3fde4c07YHGjZd\" id=\"eadd1241c6ziw\"><li data-spm-anchor-id=\"a2c4e.11153940.0.i5.655046d0UoNo9y\" id=\"eadd1242c67ab\"><p id=\"eadd1243c6bu7\">镜像：aliyun_2_1903_x64_20G_alibase_20200114.qboot.vhd镜像（以下简称qboot镜像）。</p></li><li data-spm-anchor-id=\"a2c4e.11153940.0.i5.655046d0UoNo9y\" id=\"eadd1244c6480\"><p id=\"eadd1245c6avm\">内核：4.19.81-17.al7.x86_64内核版本。</p></li></ul><pre data-tag=\"codeblock\" id=\"ead6a9a1c65fc\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>kernel-4.19.91-19.2.al7.x86_64.rpm                                                                                         |  14 MB  00:00:00\nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\nWarning: RPMDB altered outside of yum.\n  Installing : kernel-4.19.91-19.2.al7.x86_64                                                                              1/1\ngrubby fatal error: unable to find a suitable template\n\nBroadcast message from systemd-journald@iZbp1XXXXtbay7jZ (Fri 2020-07-31 15:38:45 CST):\n\ndracut[2183]: Failed to install module xen_blkfront</code></pre><h2 id=\"tayMx\">问题原因</h2><p data-lake-id=\"1ed9700011efe3b9b510fe714f83133e\" id=\"eadd3950c6gxv\">因为qboot镜像启动优化去除了initramfs过程，导致实例启动后出现以下情况：</p><ul data-lake-id=\"9931b6e247dd3f155aba63b675a94508\" id=\"eadd3951c65fu\"><li data-lake-id=\"b30d8a6b5e8bd17c3a9573dd083d7647\" id=\"eadd3952c683i\"><p id=\"eadd3953c6pze\"><code data-tag=\"codeph\" class=\"codeph\">/proc/mounts</code>中<code data-tag=\"codeph\" class=\"codeph\">/</code>根目录的挂载设备为<code data-tag=\"codeph\" class=\"codeph\">/dev/root</code>。</p></li><li data-lake-id=\"43da14a2b1b80ea7be754c6ac9865d99\" id=\"eadd3954c6m4l\"><p id=\"eadd3955c6sin\">系统没有正确创建软链接<code data-tag=\"codeph\" class=\"codeph\">/dev/root</code>。</p></li></ul><p id=\"eadd6060c6snh\">因此在内核升级过程中，grubby脚本无法正确识别根分区挂载的设备，即升级过程中无法正确更新grub配置信息。</p><h2 id=\"EFTFF\">解决方案</h2><h3 id=\"7db46300d5xko\"><b>方案一：临时修复</b></h3><ul data-lake-id=\"dcbd1484a926347cbe1db7d114a8483e\" id=\"eadd8772c6k7g\"><li id=\"5cfa1741d5it5\"><p data-tag=\"h4\" id=\"eadd8778c67tp\" class=\"h4\"><b>修复“grubby fatal error”问题</b></p></li><ul id=\"e5cedc72cegtc\"><li id=\"e5cedc70ceexm\"><p id=\"d90ae2e0ceimr\"><b>临时修复</b></p><p id=\"ef762cb0cetg3\">执行以下命令，创建<code data-tag=\"codeph\" class=\"codeph\">/dev/root</code>软链接。</p><pre id=\"x3dedg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ln -sf /dev/vda1 /dev/root</code></pre></li><li id=\"e8df50c1ceq9y\"><p id=\"e8df50c0ce0zk\"><b>持久修复</b></p><p id=\"030f91d0cev2t\">执行以下命令，新建udev rule自动创建<code data-tag=\"codeph\" class=\"codeph\">/dev/root</code>软链接。</p></li></ul></ul><pre data-tag=\"codeblock\" id=\"ead6d0b1c68lf\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sed -i '/ACTION==\"remove\"/a\\\\n# create symbol link for /dev/root\\nACTION!=\"remove\", SUBSYSTEM==\"block\", ENV{MAJOR}==\"254\", ENV{MINOR}==\"1\", SYMLINK+=\"root\"' /usr/lib/udev/rules.d/60-persistent-storage.rules</code></pre><li id=\"c7d6e950cdavm\"><p data-tag=\"h4\" id=\"eaddae81c6q5x\" class=\"h4\"><b>修复“dracut failure”问题</b></p><p data-lake-id=\"848cfd5b2309a9a5110156f36eab39ee\" id=\"eaddae82c66ca\">执行以下命令，删除不必要的dracut配置文件。</p><pre data-tag=\"codeblock\" id=\"ead6d0b2c6dzf\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>rm -rf /etc/dracut.conf.d/*</code></pre></li><h3 id=\"3d103ae0d52tv\"><b>方案二：升级镜像</b></h3><p id=\"eaddae84c6ubs\">该问题在aliyun_2_1903_x64_20G_qboot_alibase_20200904.vhd版本的qboot镜像中已修复，您使用新镜像即可。</p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-a-memory-leak-occurs-on-the-intel-sgx-driver-of-an-alibaba-cloud-linux-2-ecs-instance-in-specific-cases", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统的ECS实例中SGX驱动在特定情况下存在内存泄露问题，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-07 17:12:54</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"4f4e4460c6ao8\"><p data-tag=\"shortdesc\" id=\"4f5485f5c6s1m\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2系统的ECS实例中SGX驱动在特定情况下存在内存泄露问题的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"4f5485f6c6t69\">在符合如下条件的Alibaba Cloud Linux 2实例中，SGX驱动在特定情况下存在内存泄露问题，最终导致系统内存耗尽，绝大部分内存被SGX的测试进程APP给占用，出现类似如下提示。</p><ul id=\"4f5485f7c6er5\"><li id=\"4f5485f8c6s0r\"><p id=\"4f54ad00c6eha\">镜像：Alibaba Cloud Linux 2.1903 LTS 64位。</p></li><li id=\"4f54ad01c682d\"><p id=\"4f54ad02c6yfp\">内核：kernel-4.19.91-23.al7及之前的内核版本。</p></li><li id=\"4f54ad03c6pjc\"><p id=\"4f54ad04c6a1v\">ECS实例类型：c7t、r7t、g7t。</p></li></ul><pre data-tag=\"codeblock\" id=\"4f4e4461c650i\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>[   71.938733] systemd-journal invoked oom-killer: gfp_mask=0x6200ca(GFP_HIGHUSER_MOVABLE), nodemask=(null), order=0, oom_score_adj=0\n[   71.938735] systemd-journal cpuset=/ mems_allowed=0\n[   71.938738] CPU: 0 PID: 415 Comm: systemd-journal Not tainted 4.19.91-23.al7.x86_64 #1\n[   71.938738] Hardware name: Alibaba Cloud Alibaba Cloud ECS, BIOS 0.0.0 02/06/2015\n[   71.938739] Call Trace:\n[   71.938746]  dump_stack+0x66/0x8b\n[   71.938749]  dump_global_header+0x12/0x10f\n[   71.938750]  oom_kill_process+0x2cf/0x310\n[   71.938752]  out_of_memory+0xf7/0x4c0\n[   71.938754]  __alloc_pages_nodemask+0xf07/0xfd0\n[   71.938757]  ? blk_flush_plug_list+0xd7/0x220\n[   71.938759]  pagecache_get_page+0x8c/0x350\n[   71.938761]  filemap_fault+0x37e/0x6e0\n[   71.938764]  ext4_filemap_fault+0x2c/0x3b\n[   71.938766]  __do_fault+0x38/0x170\n[   71.938768]  do_fault+0x2eb/0x640\n[   71.938769]  __handle_mm_fault+0x621/0xa20\n[   71.938772]  ? apic_timer_interrupt+0xa/0x20\n[   71.938774]  handle_mm_fault+0x106/0x1c0\n[   71.938776]  __do_page_fault+0x1ba/0x480\n[   71.938778]  do_page_fault+0x32/0x140\n[   71.938780]  ? async_page_fault+0x8/0x30\n[   71.938781]  async_page_fault+0x1e/0x30\n[   71.938782] RIP: 0033:0x55a1ca49516f\n[   71.938786] Code: Bad RIP value.\n[   71.938787] RSP: 002b:00007ffcd58b22b0 EFLAGS: 00010246\n[   71.938788] RAX: 0000000000000000 RBX: 000055a1cbcc4400 RCX: a1fcdcf819d7e1e5\n[   71.938788] RDX: 00007f3d4d72a000 RSI: 000055a1cbcc2060 RDI: 000055a1cbcc4400\n[   71.938789] RBP: a1fcdcf819d7e1e5 R08: 00007ffcd58b23b0 R09: 00007ffcd58b23a8\n[   71.938790] R10: 000055a1ca49a935 R11: 00000000d1ba4319 R12: 000055a1cbcc4400\n[   71.938790] R13: 0000000000000011 R14: 000055a1cbcc2060 R15: a1fcdcf819d7e1e5\n[   71.938791] Task in / killed as a result of limit of host\n[   71.938792] Mem-Info:\n[   71.938795] active_anon:85 inactive_anon:410619 isolated_anon:0\n active_file:150 inactive_file:353 isolated_file:0\n unevictable:0 dirty:0 writeback:0 unstable:0\n slab_reclaimable:6038 slab_unreclaimable:17336\n mapped:98 shmem:403568 pagetables:1793 bounce:0\n free:12881 free_pcp:440 free_cma:0\n[   71.938797] Node 0 active_anon:340kB inactive_anon:1642476kB active_file:600kB inactive_file:1412kB unevictable:0kB isolated(anon):0kB isolated(file):0kB mapped:392kB dirty:0kB writeback:0kB shmem:1614272kB shmem_thp: 0kB shmem_pmdmapped: 0kB anon_thp: 2048kB writeback_tmp:0kB unstable:0kB all_unreclaimable? no\n[   71.938798] Node 0 DMA free:7408kB min:392kB low:488kB high:584kB active_anon:0kB inactive_anon:8312kB active_file:0kB inactive_file:0kB unevictable:0kB writepending:0kB present:15996kB managed:15908kB mlocked:0kB kernel_stack:0kB pagetables:16kB bounce:0kB free_pcp:0kB local_pcp:0kB free_cma:0kB\n[   71.938800] lowmem_reserve[]: 0 1761 1761 1761 1761\n[   71.938801] Node 0 DMA32 free:44116kB min:44660kB low:55824kB high:66988kB active_anon:340kB inactive_anon:1633492kB active_file:688kB inactive_file:1812kB unevictable:0kB writepending:0kB present:1914960kB managed:1826408kB  mlocked:0kB kernel_stack:2208kB pagetables:7156kB bounce:0kB free_pcp:1760kB local_pcp:1396kB free_cma:0kB\n[   71.938804] lowmem_reserve[]: 0 0 0 0 0\n[   71.938805] Node 0 DMA: 0*4kB 2*8kB (UM) 2*16kB (UE) 0*32kB 1*64kB (E) 3*128kB (UME) 3*256kB (UME) 2*512kB (ME) 3*1024kB (UME) 1*2048kB (E) 0*4096kB = 7408kB\n[   71.938810] Node 0 DMA32: 233*4kB (UMEH) 158*8kB (UMEH) 177*16kB (UMEH) 79*32kB (UEH) 34*64kB (UMEH) 16*128kB (UMEH) 6*256kB (E) 3*512kB (UE) 3*1024kB (ME) 3*2048kB (UME) 5*4096kB (M) = 44548kB\n[   71.938815] Node 0 hugepages_total=0 hugepages_free=0 hugepages_surp=0 hugepages_size=1048576kB\n[   71.938816] Node 0 hugepages_total=0 hugepages_free=0 hugepages_surp=0 hugepages_size=2048kB\n[   71.938816] 404127 total pagecache pages\n[   71.938817] 0 pages in swap cache\n[   71.938818] Swap cache stats: add 0, delete 0, find 0/0\n[   71.938818] Free swap  = 0kB\n[   71.938819] Total swap = 0kB\n[   71.938819] 482739 pages RAM\n[   71.938820] 0 pages HighMem/MovableOnly\n[   71.938820] 22160 pages reserved\n[   71.938820] 0 pages cma reserved\n[   71.938821] 0 pages hwpoisoned\n[   71.938821] Tasks state (memory values in pages):\n[   71.938822] [  pid  ]   uid  tgid total_vm      rss pgtables_bytes swapents oom_score_adj name\n[   71.938824] [    415]     0   415    11814       85   147456        0             0 systemd-journal\n[   71.938826] [    439]     0   439    11430      228   118784        0         -1000 systemd-udevd\n[   71.938827] [    550]     0   550    22654      218   212992        0             0 rngd\n[   71.938828] [    554]    81   554    15051      155   167936        0          -900 dbus-daemon\n[   71.938829] [    573]     0   573    48803      120   180224        0             0 gssproxy\n[   71.938830] [    585]     0   585     6598       91    98304        0             0 systemd-logind\n[   71.938831] [    587]     0   587     4456      115    61440        0             0 assist_daemon\n[   71.938832] [    597]    32   597    17316      135   188416        0             0 rpcbind\n[   71.938833] [    601]     0   601    31598      153   106496        0             0 crond\n[   71.938834] [    606]   997   606    29454      129   143360        0             0 chronyd\n[   71.938835] [    616]     0   616    27553       33    57344        0             0 agetty\n[   71.938836] [    819]     0   819    25740      516   221184        0             0 dhclient\n[   71.938837] [    887]     0   887   121900      708   430080        0             0 rsyslogd\n[   71.938838] [    953]     0   953    10512      391   102400        0             0 AliYunDunUpdate\n[   71.938839] [   1078]     0  1078    32317      732   274432        0             0 AliYunDun\n[   71.938840] [   1235]     0  1235    28237      261   266240        0         -1000 sshd\n[   71.938841] [   1283]     0  1283    39209      337   348160        0             0 sshd\n[   71.938842] [   1292]     0  1292    29086      317    90112        0             0 bash\n[   71.938843] [   1310]     0  1310    87597      530   311296        0          -900 abrt-dbus\n[   71.938844] [   1397]     0  1397    39209      347   348160        0             0 sshd\n[   71.938845] [   1399]     0  1399    29080      279    81920        0             0 bash\n[   71.938846] [   1430]     0  1430    27028       25    77824        0             0 dmesg\n[   71.938847] [   1431]     0  1431  8392985       92  3219456        0             0 app\n[   71.938848] [   1432]     0  1432    39209      339   356352        0             0 sshd\n[   71.938849] [   1434]     0  1434    29053      276    81920        0             0 bash\n[   71.938850] [   1470]     0  1470     2146       23    57344        0             0 systemd-cgroups\n[   71.938851] [   1471]     0  1471     2146       23    57344        0             0 systemd-cgroups\n[   71.938852] [   1472]     0  1472     2146       23    53248        0             0 systemd-cgroups\n[   71.938853] [   1473]     0  1473     2143       15    57344        0             0 systemd-cgroups\n[   71.938854] Out of memory: Kill process 1431 (app) score 1 or sacrifice child\n[   71.939026] Killed process 1431 (app) total-vm:33571940kB, anon-rss:320kB, file-rss:48kB, shmem-rss:0kB\n[   71.942922] oom_reaper: reaped process 1431 (app), now anon-rss:0kB, file-rss:0kB, shmem-rss:0kB</code></pre><h2 id=\"4rM4I\">问题原因</h2><p id=\"4f54ad05c6ar8\">Arch、X86、Kernel、CPU、SGX和encl.c中的sgx_encl_mm_release_deferred函数没有正确的处理Encl结构的引用计数，所以当持有EPC内存的进程fork后，会导致Encl的引用计数不归零，从而泄露加密内存（EPC）。在物理内存消耗殆尽后，会使用共享内存以交换出加密内存，并最终使普通内存也消耗殆尽。</p><h2 id=\"AywdZ\">解决方案</h2><p data-spm-anchor-id=\"a2c9r.14518950.0.i1.45975e3bbmjFRP\" id=\"4f54d415c6ey5\">当遇到该问题时，您可以参考以下方案处理。</p><ol id=\"fdefbaf1ceic6\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i1.45975e3bbmjFRP\" id=\"4f54d419c6t42\"><p id=\"4f54d41ac6ghw\">登录实例，执行以下命令，确认系统内核版本适用此方案。 </p><pre data-tag=\"codeblock\" id=\"4f4e4462c6h8y\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>uname -r</code></pre><p id=\"4f54fb20c668h\"> 系统显示类似如下。 </p><pre data-tag=\"codeblock\" id=\"4f4e4463c63ot\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code> 4.19.91-23.al7.x86_64</code></pre></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i1.45975e3bbmjFRP\" id=\"4f54fb22c6hz7\"><p id=\"4f54fb23c6v4w\">根据系统内核版本选择对应的解决方法。\n</p><ul id=\"4f54fb24c6fb1\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i1.45975e3bbmjFRP\" id=\"4f54fb25c6i45\"><p id=\"4f54fb26c6a1h\">对于4.19.91-23.al7.x86_64（不含）之前的版本： \n</p><ol id=\"4f54fb27c6oeh\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i1.49605e3bVu1eCR\" id=\"4f54fb28c6wsg\"><p id=\"4f54fb29c6ild\">更新操作系统版本至最新的内核版本。 </p><pre data-tag=\"codeblock\" id=\"4f4e4464c6tnw\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum update kernel</code></pre></li><li id=\"4f552231c6r1b\"><p id=\"4f552232c6i1k\">重启服务器生效。 </p><pre data-tag=\"codeblock\" id=\"4f4e4465c61zi\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>reboot</code></pre></li><li id=\"4f552234c6e8s\"><p id=\"4f552235c63hd\">更新内核热补丁。</p><p id=\"dbb56660cd5cf\">若最新内核版本的操作系统同样存在该问题，请参见4.19.91-23.al7.x86_64版本的解决方案更新内核热补丁。</p></li></ol></li><li id=\"139dfdd1cdlao\"><p id=\"139dfdd0cdhg6\">对于4.19.91-23.al7.x86_64版本，可通过安装内核热补丁解决，安装命令如下。 </p><pre data-tag=\"codeblock\" id=\"4f4e4466c6tqc\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install -y kernel-hotfix-5577959-`uname -r | awk -F\"-\" '{print $NF}'`</code></pre></li></ul></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-tcp-congestion-control-algorithm-bbr-affects-network-performance-in-alibaba-cloud-linux", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统中TCP拥塞控制算法BBR对网络性能有影响，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-07 17:14:21</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"333f49e065qol\"><p id=\"3342a54165dih\" data-tag=\"shortdesc\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2系统中TCP拥塞控制算法BBR（Bottleneck Bandwidth and RTT）对网络性能有影响的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"3342a542654we\">符合下列条件的ECS实例中，内核TCP拥塞控制算法默认为BBR算法。该算法会在CPU使用率高、网络数据包（PPS）高的情况下，对网络性能产生一定影响。例如，Redis数据库的性能降低。</p><ul id=\"3342a543651s6\"><li id=\"3342a544658js\"><p id=\"3342cc5065oki\">镜像：<code data-tag=\"code\" class=\"code\">aliyun_2_1903_64_20G_alibase_20190619.vhd</code>及之前所有的镜像版本。</p></li><li id=\"3342cc5165a50\"><p id=\"3342cc52651oa\">内核：<code data-tag=\"code\" class=\"code\">kernel-4.19.48-14.al7</code>及之前所有的内核版本。</p></li></ul><h2 id=\"4rM4I\">问题原因</h2><p id=\"722066c0cdp98\">Alibaba Cloud Linux 2系统的内核TCP拥塞控制目前支持Reno 、BBR、cubic三种算法，在不同网络场景下，控制性能会有差异。BBR算法估算当前连接的BW（吞吐）和RTT（时延）以调整拥塞窗口。BBR算法依赖于TCP连接的封装（pacing）功能，而TCP的封装实现有下列两种方式：</p><ul id=\"3342cc5565gh6\"><li id=\"3342cc5665tbe\"><p id=\"3342cc5765l2i\">若网卡设备使用qdisc的tc-fq（Fair Queue Traffic Policing）调度，则直接复用tc-fq调度中基于流的封装。</p></li><li id=\"3342cc5865ngn\"><p id=\"3342cc5965l57\">若网卡设备没有使用qdisc的tc-fq调度，则TCP改用其内部的封装方式。</p></li></ul><p id=\"26476930cd330\">TCP协议内部的封装方式依赖于Linux系统的高精度计时器（hrtimer），每个连接的高精度计时器会额外增加CPU消耗。在CPU使用率和网络PPS均高的情况下，BBR算法对网络性能的影响更加明显。在CPU空闲并且网络PPS低的情况下，影响不大。</p><h2 id=\"AywdZ\">解决方案</h2><p id=\"3342f36365yd1\">请参考下列TCP拥塞控制算法的建议，选择符合您业务实际情况的解决方式。</p><ul id=\"3342f36465kkw\"><li id=\"3342f365657c1\" data-spm-anchor-id=\"a2c4e.11153940.0.i15.5f221903VS0DY7\"><p id=\"3342f366656kn\">修改TCP拥塞控制算法。</p><p id=\"7bd9ea00cdpul\">如果ECS实例中的应用仅对内网提供服务，建议参考下列命令，修改TCP拥塞控制算法为cubic。因为内网环境带宽高、时延低。 </p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"333f49e165355\" class=\"pre codeblock language-javascript\"><code>sysctl -w net.ipv4.tcp_congestion_control=cubic\nsh -c \"echo 'net.ipv4.tcp_congestion_control=cubic'\" &gt;&gt; /etc/sysctl.d/50-aliyun.conf</code></pre></li><li id=\"3342f368650fe\"><p id=\"3342f36965vz1\">修改相应网卡的调度策略。</p><p id=\"99f4f9d0cdhz3\">如果ECS实例中的应用对外提供服务，建议继续使用BBR算法，但需要将相应网卡的调度策略修改为tc-fq。修改的命令如下。 </p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"333f49e265cul\" class=\"pre codeblock language-javascript\"><code>tc qdisc add dev &lt;$Dev&gt; root fq</code></pre><div id=\"3342f36a65euy\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3342f36b653da\">&lt;$Dev&gt;指需要调整的网卡名称。\n</p></div></div></li><li id=\"33431a7065f1n\" data-spm-anchor-id=\"a2c4e.11153940.0.i14.5f221903VS0DY7\"><p id=\"33431a7165vc9\">使用BBR算法时，不建议使用其他非tc-fq的调度策略。因为这样会占用更多额外的CPU资源。</p></li><li id=\"0c5da3a1d4cha\"><p id=\"33431a73652bj\">建议您升级ECS实例的内核至<code data-tag=\"code\" class=\"code\">kernel-4.19.57-15.al7</code>及之后的版本，彻底解决该问题。</p></li></ul><p id=\"eba8a7e0cd4ju\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/alibaba-cloud-linux-instances-of-ecs-to-remove-pod-2-system-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统的ECS实例无法正常删除Pod，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-31 16:33:14</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"1534fb9065vtl\"><p data-tag=\"shortdesc\" id=\"1539686165luj\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2系统的ECS实例无法正常删除Pod的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 data-spm-anchor-id=\"a2c9r.14518950.0.i8.34ee7962FgekBF\" id=\"XbeWY\">问题描述</h2><p data-spm-anchor-id=\"a2c9r.14518950.0.i13.45975e3beJiObN\" data-wording=\"true\" data-lake-id=\"uef04f1ab\" id=\"1539686265yw0\">在符合如下条件的Alibaba Cloud Linux 2系统的ECS实例中，出现无法正常删除Pod的情况，进程处于D状态（不可中断的睡眠状态）。</p><ul id=\"1539686365bv5\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i14.45975e3beJiObN\" data-wording=\"true\" data-lake-id=\"u2df04b86\" id=\"1539686465c7d\"><p id=\"15396865655xs\">镜像：Alibaba Cloud Linux 2.1903 LTS 64位</p></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i12.45975e3beJiObN\" data-wording=\"true\" data-lake-id=\"ua7c17314\" id=\"1539686665g7r\"><p id=\"15396867656b1\">内核：4.19.91-24.1.al7.x86_64及之前的内核版本</p></li></ul><p data-wording=\"true\" data-lake-id=\"u787a39a2\" id=\"1539686865u5k\">系统进程出现如下调用栈信息：</p><pre id=\"1534fb91656r5\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>[&lt;0&gt;] __refrigerator+0x75/0x160\n[&lt;0&gt;] do_exit+0x224/0xc60\n[&lt;0&gt;] do_group_exit+0x3a/0xa0\n[&lt;0&gt;] get_signal+0x156/0x8c0\n[&lt;0&gt;] do_signal+0x36/0x610\n[&lt;0&gt;] exit_to_usermode_loop+0x95/0x100\n[&lt;0&gt;] do_syscall_64+0x178/0x1a0\n[&lt;0&gt;] entry_SYSCALL_64_after_hwframe+0x44/0xa9</code></pre><h2 id=\"tayMx\">问题原因</h2><p class=\"ne-p\" id=\"1539686a653sy\">在进程coredump发生前任务所在cgroup已经被挂起，进程coredump发生后所有线程进入了exiting状态，cgroup遍历会忽略此任务，错过cgroup的恢复，从而导致进程无法退出，无法正常删除Pod。</p><h2 id=\"EFTFF\">解决方案</h2><p id=\"15398f7a65quz\">当遇到该问题时，您可以参考以下方案解决上述问题。</p><ol id=\"15398f7b655gw\"><li id=\"15398f7c65sax\"><p id=\"15398f7d65zn2\">登录ECS实例。</p><p id=\"f51c99d0cdrq9\">具体操作，请参见<a class=\"\" target=\"_blank\" href=\"https://kb.aliyun-inc.com/kb/71529\">连接方式概述</a>。</p></li><li id=\"15398f7e653pz\"><p id=\"1539b68065y0d\">执行以下命令，确认系统内核版本适用此方案。 </p><pre id=\"1534fb9265g7b\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>uname -r</code></pre><p id=\"1539b68165toy\"> 系统显示类似如下。 </p><pre id=\"1534fb93650k1\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>4.19.91-18.al7.x86_64</code></pre></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i0.69f87962jJ1mcM\" id=\"1539b68365xvb\"><p id=\"1539b68465c16\">更新内核版本。 \n</p><ol id=\"9ce39f5182v9t\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i1.69f87962jJ1mcM\" id=\"1539b68965pe2\"><p id=\"1539b68a65dr3\">更新操作系统版本至最新的内核版本。 </p><pre id=\"1534fb9465t7o\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum update kernel</code></pre></li><li id=\"1539b68c658uc\"><p id=\"1539b68d6596e\">重启服务器生效。 </p><pre id=\"1534fb9565r30\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>reboot</code></pre></li><li id=\"1539dd9165yye\"><p id=\"1539dd9265do4\">更新内核热补丁。</p><p id=\"e875f6d0cddny\">若最新内核版本的操作系统同样存在该问题，请执行以下命令，更新内核热补丁（内核热补丁名称为：cgroup:freeze: fix coredump &amp; unfreeze conflict）。</p><pre id=\"1xk0ym\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install -y kernel-hotfix-3915544-`uname -r | awk -F\"-\" '{print $NF}'`</code></pre></li></ol></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-buffer-i-or-o-write-performance-of-an-ext4-file-system-on-an-alibaba-cloud-linux-2-instance-is-not-as-expected", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统的ECS实例中ext4文件系统的Buffer I/O写性能不符合预期，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-31 16:31:25</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"cf260f506cgcp\"><p data-tag=\"shortdesc\" id=\"cf3440206c56c\" class=\"shortdesc\">本文介绍Alibaba Cloud Linux 2系统的ECS实例中ext4文件系统的Buffer I/O写性能不符合预期问题的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"cf3467326clw1\">在ext4文件系统中执行常规的缓存异步I/O（Buffer I/O）写操作时，可能会观察到性能表现不符合预期的情形。存在该问题的ECS实例有以下特征：</p><ul id=\"cf3467336c2sk\"><li data-spm-anchor-id=\"a2c4e.11153940.0.i5.655046d0UoNo9y\" id=\"cf3467346c7zd\"><p id=\"cf3467356czab\">镜像：<code data-tag=\"code\" class=\"code\">aliyun-2.1903-x64-20G-alibase-20190327.vhd</code>及之后所有的镜像版本。</p></li><li id=\"cf348e406cby5\"><p id=\"cf348e416cdxb\">内核：<code data-tag=\"code\" class=\"code\">kernel-4.19.24-9.al7</code>及之后所有的内核版本。</p></li><li id=\"cf348e426c3ka\"><p id=\"cf348e436c1ri\">通过<code data-tag=\"code\" class=\"code\">dioread_nolock</code>和<code data-tag=\"code\" class=\"code\">nodelalloc</code>两个选项挂载ext4文件系统。 \n</p><div type=\"note\" id=\"cf348e446cang\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"cf348e456crlu\">关于如何查看文件系统类型及挂载选项，请参见<a title=\"\" class=\"xref\" href=\"#eSnCY\">查看文件系统类型及挂载选项</a>。</p></div></div></li></ul><p id=\"cf34b5506cqbu\">验证性能表现不符合预期的典型场景如下：</p><div type=\"note\" id=\"cf34b5516cdkw\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"d8720b406cyhp\">关于ECS块存储的性能，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/block-storage-performance\">块存储性能</a>。</p></div></div><ul id=\"cf34dc606cqnz\"><li id=\"cf34dc616ci1b\"><p id=\"cf34dc626ct6h\">场景一：使用<code data-tag=\"code\" class=\"code\">cp</code>命令拷贝大文件到ext4文件系统中，耗时很久，每秒拷贝速度只能达到30MB/s左右。</p></li><li id=\"cf34dc636c386\"><p id=\"cf34dc646cij5\">场景二：使用类似如下不带同步标志（Sync Flag）的<code data-tag=\"code\" class=\"code\">dd</code>命令写文件到ext4文件系统中，耗时很久。 </p><pre id=\"cf2636606cffz\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>dd if=/dev/zero of=/mnt/badfile bs=10M count=1000</code></pre><p id=\"cf34dc656cttx\">且在终端中通过<code data-tag=\"code\" class=\"code\">iostat -xm 1</code>命令观察对应磁盘的写入速度时，wMB/s列的值只有30MB/s左右。系统显示类似如下。 </p><pre id=\"cf2636616ckov\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>avg-cpu:  %user   %nice %system %iowait  %steal   %idle\n           0.00    0.00   12.77    0.00    0.00   87.23\n\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rMB/s    wMB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nvda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00\nvdb               0.00  7194.00    0.00   57.00     0.00    28.05  1008.00     0.02   17.81    0.00   17.81   0.39   2.20</code></pre></li></ul><h2 id=\"4rM4I\">问题原因</h2><p class=\"from-extensions-error\" id=\"cf3503706c7zx\">从文件系统代码层面分析，该问题的根本原因是当文件系统以<code data-tag=\"code\" class=\"code\">dioread_nolock</code>和<code data-tag=\"code\" class=\"code\">nodelalloc</code>组合选项挂载时，产生了大量内核中被称为“unwritten extents”、大小为4KB的脏页（Dirty Page）；由于ext4文件系统处理逻辑的缺陷，这些4KB的脏页在写回的时候并不会被合并成若干个大页进行写回，而是直接以小页的形式被处理。从Perf工具观察内核写回页面缓存的过程，发现处理过程主要发生在ext4文件系统的<code data-tag=\"code\" class=\"code\">ext4_writepages()</code>函数内部，在查找和映射4KB脏页的逻辑中耗费了大量的时间，从而造成文件写入性能极低。</p><h2 id=\"AywdZ\">解决方案</h2><p id=\"cf35037b6cj1i\">该问题为已知问题，暂无固化解决方案。您可以参考以下步骤临时解决此问题：</p><ol id=\"cf35037c6cyp3\"><li data-spm-anchor-id=\"a2c4e.11153940.0.i11.2c2646d09lYjQD\" id=\"cf352a806cha4\"><p id=\"cf352a816c4yk\">参考以下命令，重新挂载ext4文件系统，取消同时使用<code data-tag=\"code\" class=\"code\">dioread_nolock</code>和<code data-tag=\"code\" class=\"code\">nodelalloc</code>的挂载选项组合。 </p><pre id=\"cf2636626c9rw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sudo mount -o remount,delalloc &lt;$Device&gt; &lt;$Mount_point&gt;</code></pre><div type=\"note\" id=\"cf352a826cfnm\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"0eaf8ac06c0lm\"><li id=\"0eaf8ac16crio\"><p id=\"0eaf8ac26c3si\">&lt;$Device&gt;：指挂载ext4文件系统的设备名。</p></li><li id=\"0eaf8ac36c12q\"><p id=\"0eaf8ac46csu5\">&lt;$Mount_point&gt;：指ext4文件系统的挂载点。</p></li></ul></div></div><p id=\"cf3551916cdlz\"> </p></li><li data-spm-anchor-id=\"a2c4e.11153940.0.i11.2c2646d09lYjQD\" id=\"cf3551926c23x\"><p id=\"cf3551936czan\">修改<code data-tag=\"code\" class=\"code\">/etc/fstab</code>文件，删除ext4文件系统的<code data-tag=\"code\" class=\"code\">nodelalloc</code>选项（默认为<code data-tag=\"code\" class=\"code\">delalloc</code>），以确保系统开机自动挂载。</p></li></ol><h2 id=\"eSnCY\">查看文件系统类型及挂载选项</h2><p id=\"cf3551946cqn9\">查看目录所在磁盘的文件系统类型及挂载选项，参考步骤如下：</p><ol start=\"1\" id=\"cf3551956c2w8\"><li id=\"cf3551966ckyb\"><p id=\"cf3551976ctsr\">登录ECS实例，参考以下命令，确认目录所在的磁盘分区。 </p><pre id=\"cf2636636c3fc\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>df &lt;$DIR&gt; | grep -v Filesystem | awk '{ print $1 }'</code></pre><div type=\"note\" id=\"cf3578a06cm5g\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"cf3578a16c0x1\">&lt;$DIR&gt;指写操作的目标目录。\n</p></div></div></li><li id=\"cf3578a36c188\"><p id=\"cf3578a46ctse\">参考以下命令，查看目标磁盘分区的文件系统类型以及挂载选项。 </p><pre id=\"cf2636646c103\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>mount | grep -w &lt;$Partition&gt; | grep ext4 | grep -w dioread_nolock | grep -w nodelalloc</code></pre><div type=\"note\" id=\"cf359fb06ccim\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"cf359fb16cd1w\">&lt;$Partition&gt;指上一步获取的磁盘分区名。\n</p></div></div></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/multiple-consecutive-incorrect-password-accesses-to-linux-instances-through-ssh", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>使用SSH客户端远程连接Linux系统的ECS实例时，提示“Maximum amount of failed attempts was reached”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用SSH客户端远程连接Linux系统的ECS实例时，提示“Maximum amount of failed attempts was reached”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-14 16:38:55</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"9d9e1990a3fo7\"><p data-tag=\"shortdesc\" id=\"9da76861a3p64\" class=\"shortdesc\">本文介绍使用SSH客户端远程连接Linux系统的ECS实例时，提示“Maximum amount of failed attempts was reached”错误的原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"3332cb40a3nmu\" class=\"section\"><h2 id=\"JrSre\">问题描述</h2><p id=\"72ad0c10cepkn\">使用SSH客户端远程连接Linux系统的ECS实例时，提示“Maximum amount of failed attempts was reached”错误。</p></section><section id=\"3f94ceb0a3gkr\" class=\"section\"><h2 id=\"DwxGX\">问题原因</h2><p id=\"9da76868a34lg\">连续多次输入错误密码，触发系统PAM认证模块策略限制，导致用户被锁定，无法远程连接ECS实例。</p><div type=\"note\" id=\"3e239c61a3fb5\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"402315e1a3wc8\">Linux系统中和SSH相关的PAM配置文件主要有以下三个，如果PAM认证对远程连接做了限制，例如设置<code data-tag=\"code\" class=\"code\">auth required pam_tally2.so deny=3 unlock_time=50</code>，表示普通用户和root用户连续三次输入错误密码，50秒后才能再次远程连接ECS实例。</p><ul id=\"402315e2a32mk\"><li id=\"402315e3a3vsl\"><p id=\"402315e4a3d0t\"><code data-tag=\"code\" class=\"code\">/etc/pam.d/login</code>：VNC对应的PAM配置文件。</p></li><li id=\"402315e5a31n0\"><p id=\"402315e6a3p4d\"><code data-tag=\"code\" class=\"code\">/etc/pam.d/sshd</code>：SSH服务对应的PAM配置文件。</p></li><li id=\"402315e7a3cm7\"><p id=\"402315e8a3xjj\"><code data-tag=\"code\" class=\"code\">/etc/pam.d/system-auth</code>：系统全局PAM配置文件。</p></li></ul></div></div></section><section id=\"accec080a7h40\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"ef35aa00ce65d\">您可以根据root用户是否被锁定，选择具体的方案进行修复。</p><ul id=\"1d8839d2cfbg1\"><li id=\"1d8839d0cfhf4\"><p id=\"1cbe0c00cfm6p\"><a title=\"\" class=\"xref\" href=\"#6f8e4310celht\">root用户未被锁定</a></p></li><li id=\"a5d2aaf1cf3qp\"><p id=\"a5d2aaf0cfmsx\"><a title=\"\" class=\"xref\" href=\"#21bb8340cfkra\">root用户被锁定</a></p></li></ul><section id=\"6f8e4310celht\" class=\"section\"><h3 id=\"97f22d01a7mik\"><b>root用户未被锁定</b></h3><p id=\"f1c79f81ce7b0\">本文以注释系统全局PAM配置文件（<code data-tag=\"code\" class=\"code\">/etc/pam.d/system-auth</code>）中PAM限制配置为例进行说明，修改<code data-tag=\"code\" class=\"code\">/etc/pam.d/sshd</code>或<code data-tag=\"code\" class=\"code\">/etc/pam.d/system-auth</code>方法类似。</p><ol id=\"a0e855b0a7vj3\"><li id=\"a76b95d0a3f40\"><p id=\"a76b6ec0a38iw\">使用root用户通过VNC方式连接实例。</p><p id=\"04f68a60cedp6\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"f8dc8c71ceoot\"><p id=\"f8dc8c70cet63\">执行如下命令，查看PAM配置文件中是否存在PAM认证限制。</p><pre data-tag=\"codeblock\" id=\"9d9e1991a3e95\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/pam.d/system-auth</code></pre><p id=\"dc420cb0ceccf\">例如，系统返回如下时，表示普通用户和root用户连续三次输入错误密码，50秒后才能再次远程连接ECS实例。</p><img id=\"b3adc130cer6e\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7573810861/p613741.png\" alt=\"2023-03-30_21-17-03\" placement=\"break\" class=\"image break\"></li><li id=\"9da7dd93a33z8\"><p id=\"9da7dd94a33b6\">修改system-auth配置文件。</p><ol id=\"ec2f8b61ceuyj\"><li id=\"eb8e4251ce4hm\"><p id=\"eb8e4250cezvo\">执行如下命令，打开system-auth配置文件。</p><pre id=\"dqvfqq\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/pam.d/system-auth</code></pre></li><li id=\"f9cbbc81cez4i\"><p id=\"f9cbbc80ceg71\">按<code data-tag=\"code\" class=\"code\">i</code>进入编辑模式。</p></li><li id=\"154ce790ce402\"><p id=\"154cc080ce8z3\">根据业务需要，注释、修改或删除该配置。</p><p id=\"30891300cfya1\">本文以注释配置为例进行说明。</p><pre data-tag=\"codeblock\" id=\"3926e9e0ceae9\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>auth required pam_tally2.so deny=3 unlock_time=50            #原文代码：普通用户和root用户连续三次输入错误密码会被锁定，50秒后才能解锁。\n#auth required pam_tally2.so deny=3 unlock_time=50           #注释后                          </code></pre><div id=\"a2552ee0ce4cl\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"bc1521f2cejvl\"><li id=\"bc1521f0ced5r\"><p id=\"a2552ee1ce68e\">此处使用的是<code data-tag=\"code\" class=\"code\">pam_tally2</code>模块，如果不支持<code data-tag=\"code\" class=\"code\">pam_tally2</code>模块可以使用<code data-tag=\"code\" class=\"code\">pam_tally</code>模块。另外，不同的PAM版本，设置可能有所不同，具体使用方法，可以参照相关模块的使用规则。更多详情，请参见<a class=\"\" target=\"_blank\" href=\"https://github.com/linux-pam/linux-pam/blob/master/doc/sag/Linux-PAM_SAG.xml\">Linux PAM SAG</a>。</p></li><li id=\"bd48bff0ceul2\"><p id=\"a2552ee2ceqgi\"><code data-tag=\"code\" class=\"code\">pam_tally2</code>与<code data-tag=\"code\" class=\"code\">pam_tally</code>模块都可以用于账户锁定策略控制。两者的区别是前者增加了自动解锁时间的功能。</p></li><li id=\"be951610cevqw\"><p id=\"a2552ee3cef81\"><code data-tag=\"code\" class=\"code\">even_deny_root</code>指限制root用户。</p></li><li id=\"c011f210ceeua\"><p id=\"a2552ee4cej59\"><code data-tag=\"code\" class=\"code\">deny</code>指设置普通用户和root用户连续错误登录的最大次数，超过最大次数，则锁定该用户。</p></li><li id=\"c155e3c0cesrx\"><p id=\"a2552ee5cedng\"><code data-tag=\"code\" class=\"code\">unlock_time</code>指设定普通用户锁定后，多长时间后解锁，单位是秒。</p></li><li id=\"ccc5e610cez3e\"><p id=\"a2552ee6cen7u\"><code data-tag=\"code\" class=\"code\">root_unlock_time</code>指设定root用户锁定后，多长时间后解锁，单位是秒。</p></li></ul></div></div></li></ol></li><li id=\"9098ee31ceyj2\"><p id=\"9da82bb7a3kgg\">远程连接实例，不再出现该错误时，说明该问题已修复。</p></li></ol></section><section id=\"21bb8340cfkra\" class=\"section\"><h3 data-tag=\"h3\" id=\"9da82bb9a3zx1\" class=\"h3\"><b>root用户被锁定</b></h3><ol id=\"9da82bbaa3dkh\"><li id=\"9da82bbba3isj\"><p id=\"9da82bbca3dbg\">使用单用户模式远程连接实例。</p><p id=\"bc12e290cezgi\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/boot-a-linux-ecs-instance-into-single-user-mode\">Linux系统进入单用户模式</a>。</p></li><li id=\"753abf00cebfe\"><p id=\"753a97f0ceppp\">依次执行如下命令，解锁root用户。 </p><pre data-tag=\"codeblock\" id=\"9d9e40a0a3o3x\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>pam_tally2 -u root                          #查看root用户登录密码连续输入错误次数。\npam_tally2 -u root -r                       #清除root用户密码连续输入错误次数。\nauthconfig --disableldap --update           #更新PAM安全认证记录。</code></pre></li><li id=\"9da852c0a3laq\"><p id=\"9da852c1a3r3p\">重启实例。</p><p id=\"f94dc800cemrs\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li><li id=\"e60c9501celh0\"><p id=\"e60c9500cead2\">在对应的PAM配置文件中注释、修改或删除相应配置。</p><p id=\"43ebf440cfq0t\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"#6f8e4310celht\">方案一：root用户未被锁定时</a>。</p></li><li id=\"0fb2d040cfzds\"><p id=\"822759c0cfz2o\">远程连接实例，不再出现该错误时，说明该问题已修复。</p></li></ol></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/main-process-exited-code-exited-error-when-ssh-service-is-started", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>Linux系统的ECS实例中，启动SSH服务时未遇到任何错误信息，但是ssh服务未启动该怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例中，启动SSH服务时未遇到任何错误信息，但是ssh服务未启动该怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:26:03</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"918b3a90c6r2r\"><p data-tag=\"shortdesc\" id=\"9191a333c6pmv\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中，启动SSH服务时未遇到任何错误信息，但是ssh服务未启动的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"2727b370c6dpc\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"9191a338c6i0b\">在Linux系统的ECS实例中，使用service或systemctl命令启动SSH服务时，命令行没有返回任何报错信息，但服务没有正常运行。</p><p id=\"393aedc0c6d8u\">执行<code data-tag=\"code\" class=\"code\">cat /var/log/secure</code>查看secure日志，发现类似如下错误信息。</p><pre data-tag=\"codeblock\" id=\"918b3a91c6lim\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sshd.service: main process exited, code=exited, status=203/EXEC.\ninit: ssh main process (1843) terminated with status 255.</code></pre></section><section id=\"6193e880c63ah\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"9191ca41c6czq\">该问题通常是因为PATH环境变量配置异常，或SSH软件包相关文件被移除。</p></section><section id=\"6fc3ce20c6ybw\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"9191f157c6lyz\">请按照如下操作步骤，进行检查并解决问题。</p><ol id=\"dc3222f1c6mkp\"><li id=\"b28af191c6os4\"><p id=\"519623b0c6ag9\">使用VNC远程连接ECS实例。 </p><p id=\"60c5beb0c6pfk\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"91921862c6awg\"><p id=\"91921863c62m0\">执行如下命令，检查环境变量配置。 </p><pre data-tag=\"codeblock\" id=\"918b3a92c62pm\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>echo $PATH</code></pre><ul id=\"efa98121c68ba\"><li id=\"ec3a4b01c6qjy\"><p id=\"91921864c6ytw\">系统正常返回类似如下，该值为PAHT环境变量的默认值。 </p><pre data-tag=\"codeblock\" id=\"918b3a93c6b0p\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin</code></pre></li><li id=\"0c81d7c0c6lc7\"><p id=\"0c81b0b0c6jw2\">若返回其他信息，表示环境变量的默认值被改变，则需执行如下命令，重置环境变量。</p><pre data-tag=\"codeblock\" id=\"918b3a94c6y96\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>export PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin</code></pre></li></ul></li><li id=\"91923f73c6v10\"><p id=\"91923f74c6ak7\">执行如下命令，查找并确认sshd程序的路径。 </p><pre data-tag=\"codeblock\" id=\"918b3a95c6irc\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>find / -name sshd</code></pre><ul id=\"6344d761c6woa\"><li id=\"5e216191c6hbr\"><p id=\"91923f75c6q6o\">系统正常返回类似如下，包含sshd程序的默认路径。 </p><pre data-tag=\"codeblock\" id=\"918b3a96c6tgw\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>/usr/sbin/sshd</code></pre></li><li id=\"7d1bfbf1c67lm\"><p id=\"91923f76c60nt\">如果相应文件不存在，建议执行如下命令，重新安装SSH软件包。</p><pre id=\"6re9dy\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install -y openssh</code></pre></li></ul></li><li id=\"91926682c6577\"><p id=\"91926683c690m\">执行如下命令，重启SSH服务。 </p><pre data-tag=\"codeblock\" id=\"918b3a97c63zd\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart sshd.service</code></pre></li><li id=\"30fab3e0c9c97\"><p id=\"30fa8cd0c939t\">执行如下命令，查看SSH服务状态。</p><pre id=\"mz2rtq\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl status sshd.service</code></pre><p id=\"3f5ad140c9zj5\">返回如下所示时，表示SSH服务为运行中。</p><img id=\"65e2b580c9403\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5198889761/p608926.png\" alt=\"查看sshd状态\" placement=\"break\" class=\"image break\"></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-too-many-authentication-failures-for-root-error-occurs-when-you-log-on-to-an-instance-through-ssh", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>使用第三方SSH客户端远程连接Linux实例时，提示“Too many authentication failures”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用第三方SSH客户端远程连接Linux实例时，提示“Too many authentication failures”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-14 10:09:32</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"13b46cb0bd32p\"><p data-tag=\"shortdesc\" id=\"13bad552bdm57\" class=\"shortdesc\">本文介绍使用第三方SSH客户端远程连接Linux实例时，提示“Too many authentication failures”错误的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><p id=\"13bad556bdqa2\"> </p><section id=\"36da1320bdc1n\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"9a855d30bdq5y\">使用第三方SSH客户端远程连接Linux实例时，连接失败，提示“Too many authentication failures”。</p><img id=\"1aa88e60bd7uq\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5185148761/p580089.png\" alt=\"2023-03-08_14-18-25\" placement=\"break\" class=\"image break\"></section><section id=\"3a41cf30bdxm8\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"83b10776bdzz7\">ECS实例内SSH远程登录配置文件（/etc/ssh/sshd_config）中配置了密码重试策略，多次连续输入错误密码后，提示该错误。</p><div type=\"note\" id=\"13bafc63bdnty\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"13bb2371bdlnt\">该配置不会导致相关账号被锁定，只会断开相应会话。您可以再次输入密码尝试登录。</p></div></div></section><section id=\"7d9654d0bd21d\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"888d7da0bdvpo\">如果您多次输入密码，还是不能登录，建议您重置密码后，重新登录。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/reset-the-logon-password-of-an-instance\">重置实例登录密码</a>。</p><p id=\"32c4ee20bdg0a\">密码重试策略可以提高ECS实例的安全性，建议您基于安全性和易用性权衡后，确定是否需要修改相关配置。如果您需要修改密码重试策略，请参考以下步骤。</p><ol id=\"c1bdd751bd5l6\"><li id=\"83b1559bbd698\"><p id=\"614363c585v20\">以VNC方式登录ECS实例。</p><p id=\"95451f1097rpc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"83b17ca1bd2w3\"><p id=\"83b17ca2bdsji\">执行如下命令，查看sshd_config文件中是否包含类似如下配置。</p><pre data-tag=\"codeblock\" id=\"83a8ca11bdy9n\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/ssh/sshd_config</code></pre><p id=\"83b17ca3bd45i\"> 系统显示类似如下，表示连续6次输入密码错误后，会断开SSH连接。</p><pre data-tag=\"codeblock\" id=\"13b46cb2bdpwz\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>MaxAuthTries 6</code></pre><div id=\"079db830bduxg\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"03dfece0bdcya\">MaxAuthTries参数默认未启用。该参数用于限制用户在每次SSH登录时，能够连续错误输入密码的次数。超过错误输入次数则会断开SSH连接，并显示相关错误信息。</p></div></div></li><li id=\"6144000485t3e\"><p id=\"cf46f99097n4k\">修改用户登录控制参数。</p><ol id=\"d496fda1972v6\"><li id=\"d42eed0197e1n\"><p id=\"d735282097dh0\">打开SSH配置文件。</p><pre id=\"zdrxtw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vi /etc/ssh/sshd_config</code></pre></li><li id=\"d967717097zr0\"><p id=\"dfcd043097xj8\">根据业务需要，修改密码重试策略。</p><p id=\"cf218cf0bdvq3\">如下所示，在策略配置前添加<code data-tag=\"code\" class=\"code\"><b>#</b></code>，取消密码重试策略。</p><pre data-tag=\"codeblock\" id=\"83a8ca13bdj92\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code># MaxAuthTries 6</code></pre></li><li id=\"6144271185czd\"><p id=\"9518115dbdg01\">按Esc键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存修改。</p></li></ol></li><li id=\"13bb719bbdqbi\"><p id=\"13bb98a0bd2l8\">执行如下命令，重启SSH服务。 </p><pre id=\"5kwtms\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart sshd.service</code></pre></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/in-linux-ecs-instances-the-following-error-fatal-cannot-bind-any-address-occurs-when-the-ssh-service-is-started", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>Linux系统的ECS实例中，启动SSH服务时提示“fatal: Cannot bind any address”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例中，启动SSH服务时提示“fatal: Cannot bind any address”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-30 20:38:40</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"75ca57406520n\"><p data-tag=\"shortdesc\" id=\"75d3a61065yy6\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中，启动SSH服务时提示“fatal: Cannot bind any address”错误的原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"a4d70cc0cbk6u\" class=\"section\"><h2 id=\"mMtcd\">问题现象</h2><p id=\"75ca574165w2q\">在Linux系统的ECS实例中启动SSH服务时，命令行或Secure日志出现类似如下错误信息。</p><pre id=\"75ca574265wok\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>FAILED.\nfatal: Cannot bind any address.\naddress family must be specified before ListenAddress.</code></pre></section><section id=\"bf24f5b0cbc0h\" class=\"section\"><h2 id=\"YnnGn\">问题原因</h2><p id=\"7cff84c0cbusu\">该问题可能是因为ECS实例中SSH服务的配置文件<code data-tag=\"code\" class=\"code\">/etc/ssh/sshd_config</code>中AddressFamily配置为inet6，但ECS实例没有启用IPv6或IPv6协议配置错误，导致出现该问题。</p></section><section id=\"d16f7730cb387\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><ol id=\"d31e4761cbwhi\"><li id=\"cfee1610cbjn6\"><p id=\"44851b21cbri6\">以VNC方式远程连接ECS实例。</p><p id=\"92efe950cbsuv\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"75d3cd2565uzb\"><p id=\"75d3cd2665sos\">执行如下命令，查看<code data-tag=\"code\" class=\"code\">/etc/ssh/sshd_config</code>配置文件。</p><pre id=\"nc1mwz\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/ssh/sshd_config</code></pre><p id=\"e83e5a40cbn5h\">当返回信息包含如下内容时，说明配置了IPv6协议族。</p><pre id=\"75ca574365lr0\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>AddressFamily inet6</code></pre><div type=\"note\" id=\"3037cc50cbphb\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3037f360cbgyg\">AddressFamily参数值说明如下。 \n</p><ul id=\"3037f361cbuyg\"><li id=\"3037f362cbryy\"><p id=\"3037f363cbzpk\"><code data-tag=\"code\" class=\"code\">inet</code>：使用IPv4协议族，为默认值。</p></li><li id=\"3037f364cbymc\"><p id=\"3037f365cbt6i\"><code data-tag=\"code\" class=\"code\">inet6</code>：使用IPv6协议族。</p></li><li id=\"3037f366cbvb4\"><p id=\"3037f367cbn5m\"><code data-tag=\"code\" class=\"code\">any</code>：同时启用IPv4和IPv6协议族。</p></li></ul></div></div></li><li id=\"75d3f433655uc\"><p id=\"75d3f43465thw\">修改AddressFamily参数值。</p><div type=\"important\" id=\"9cc47a20cetyu\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"a48c34f0ce9x8\">修改时，请确保AddressFamily参数在ListenAddress之前配置，方能生效。</p></div></div><ol id=\"49d23601cbia9\"><li id=\"494b2bb1cbra3\"><p id=\"494b2bb0cbttl\">执行如下命令，打开<code data-tag=\"code\" class=\"code\">/etc/ssh/sshd_config</code>配置文件。</p><pre id=\"i0f9yc\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/ssh/sshd_config</code></pre></li><li id=\"5574e111cb8ns\"><p id=\"5574e110cbozq\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"69667851cbp4k\"><p id=\"69667850cb8qp\">将AddressFamily设置为<code data-tag=\"code\" class=\"code\">inet</code>，或在AddressFamily前加#注释该配置，如下所示。</p><pre id=\"75ca574465qtr\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code># AddressFamily inet6  #注释该配置</code></pre><pre id=\"7c9ab4d0cd96q\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>AddressFamily inet4    #使用IPv4协议簇</code></pre></li><li id=\"985f28a1cbhsv\"><p id=\"985f28a0cbr9p\">按下<code data-tag=\"code\" class=\"code\">Esc</code>键后，输入<code data-tag=\"code\" class=\"code\">:wq</code>并按<code data-tag=\"code\" class=\"code\">Enter</code>键以保存关闭配置文件。</p></li></ol></li><li id=\"c2a9e141cbe62\"><p id=\"c2a9e140cby70\">执行以下命令，重启SSH服务。</p><pre id=\"frd9sp\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart sshd.service </code></pre></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-when-i-cannot-log-on-to-a-linux-instance-after-the-pam-authentication-module-is-enabled", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>启用PAM认证模块后，无法登录Linux实例的解决方案</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>启用PAM认证模块后，无法登录Linux实例的解决方案</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-08-10 10:58:48</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"e530cba0a3zj7\"><p data-tag=\"shortdesc\" id=\"e538bae7a3tt9\" class=\"shortdesc\">本文介绍在Linux操作系统内启用PAM认证模块后，出现无法登录Linux实例问题的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"e89657f034snm\" class=\"section\"><h2 id=\"cf15b6e031g2g\"><b>什么是</b>PAM</h2><p id=\"e23c35f03140n\">PAM （Pluggable Authentication Modules）是一个身份认证机制，可用于Linux系统中来实现用户身份验证，加强系统的安全。</p><p id=\"facbf32031lr2\">如果PAM模块配置错误，可能会导致用户无法通过身份认证，即使输入了正确的密码也无法登录Linux实例。这种情况下，建议您联系管理员检查PAM模块的配置，并根据需要进行相应的调整，以确保能够成功登录Linux实例。常见的与远程登录实例的服务有ssh和login，这两个服务在pam对应的配置文件如下：</p><ul id=\"1a1f3e6031jfh\" data-spm-anchor-id=\"a2c4g.41491.0.i1.41ac3baa8w7MXk\"><li id=\"1a1f3e61311gz\"><p id=\"1a1f3e6231af4\"><code data-tag=\"code\" class=\"code\">/etc/pam.d/login</code>：控制台（管理终端）对应的配置文件。例如密码验证、账户锁定和限制登录IP等。</p></li><li id=\"c036447331w2u\"><p id=\"c036447431wfo\"><code data-tag=\"code\" class=\"code\">/etc/pam.d/sshd</code>：SSH远程登录的认证信息。</p></li><li id=\"1a1f3e6531xep\"><p id=\"c036447631kt1\"><code data-tag=\"code\" class=\"code\">/etc/pam.d/system-auth</code>：系统级别的认证信息，例如密码策略、用户信息和访问控制等。</p></li></ul></section><section id=\"ec47ee40347hc\" class=\"section\"><h2 id=\"929b5390313k4\"><b>如何修改PAM配置</b></h2><div id=\"90ede2f0319b6\" type=\"important\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><ul id=\"0e114d9232i5d\"><li id=\"0e114d9032ckj\"><p id=\"90edbbe031un4\">仅root用户（管理员）支持修改PAM配置，若您为非root用户，请联系管理员检查并修改PAM配置。</p></li><li id=\"0efe45a132ttm\"><p id=\"0efe45a0323pk\">PAM配置通常是为了加强系统安全，在修改PAM配置之前，请谨慎评估是否需要修改，以及所做的更改不会破坏系统的正常功能或导致安全漏洞。</p></li></ul></div></div><ol id=\"acbbb62231jr4\"><li id=\"acbbb620317ld\"><p id=\"aba5642031d0j\">（可选）若root用户输入正确密码也无法登录，请先解锁root用户。否则，请跳过该步骤。</p><div id=\"c5347ec332uwm\" outputclass=\"collapse\" class=\"collapse\"><p id=\"c5347ec432twu\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>如何解锁root用户？</b></p><div id=\"c5347ec532su5\" data-tag=\"expandable-content\" class=\"expandable-content\"><ol id=\"c5347ec6324j8\" start=\"1\"><li id=\"c5347ec732kgu\"><p id=\"c5347ec832wjt\">使用单用户模式登录实例。</p><p id=\"c5347ec932izb\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/boot-a-linux-ecs-instance-into-single-user-mode\">Linux系统进入单用户模式</a>。</p></li><li id=\"c5347eca32e8z\"><p id=\"c5347ecb32anx\">依次执行如下命令，解锁root用户。</p><pre data-tag=\"codeblock\" outputclass=\"language-shell\" id=\"c5347ecc32mia\" class=\"pre codeblock language-shell\"><code>pam_tally2 -u root #查看root用户登录密码连续输入错误次数。\npam_tally2 -u root -r #清除root用户密码连续输入错误次数。\nauthconfig --disableldap --update #更新PAM安全认证记录。</code></pre></li><li id=\"c5347ecd328lv\"><p id=\"c5347ece325ta\">重启ECS实例，使修改生效。</p><p id=\"1606dd7034t23\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li></ol></div></div></li><li id=\"01aa3f7032hv7\"><p id=\"01aa186032e1b\">使用root用户登录Linux实例。</p><p id=\"0ecc6e8034kfq\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"ced004e031ra9\"><p id=\"cecfddd031tub\">执行以下命令，打开secure日志，查找包含pam字段的行，并确定与PAM设置相关联的模块名称。</p><pre id=\"q0f1hq\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>cat /var/log/secure</code></pre><p id=\"3108160032mig\">例如以下示例，模块名称为<i>pam_succeed_if</i>。</p><pre id=\"zhrfao\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>pam_succeed_if(sshd:auth): requirement \"uid &gt;= 1000\" not met by user \"root\".</code></pre></li><li id=\"d84c858031ykg\"><p id=\"d84c5e7031xia\">根据获取的模块名称，查找PAM配置文件是否存在相关配置。如存在，参考步骤<a title=\"\" class=\"xref\" href=\"#c51eb04031m2r\">5</a>修改。</p><ol id=\"4b73a7d132wpn\"><li id=\"4ad98ab132tno\"><p id=\"4bf02ad032ivp\">执行以下命令，获取以下3个PAM配置文件的配置信息。</p><pre id=\"9b8c4e5031ioo\" outputclass=\"language-shell\" data-tag=\"codeblock\" class=\"pre codeblock language-shell\"><code>cat /etc/pam.d/login\ncat /etc/pam.d/sshd\ncat /etc/pam.d/system-auth</code></pre></li><li id=\"5bb619c132xde\"><p id=\"c53230a032p1b\">使用grep命令，查找各配置文件中是否存在与secure日志相关的配置行。</p><pre id=\"vekogc\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>grep \"模块名称\" /etc/pam.d/login\ngrep \"模块名称\" /etc/pam.d/sshd\ngrep \"模块名称\" /etc/pam.d/system-auth</code></pre><p id=\"e6a4a8d032s09\">例如，查找包含模块名称<i>pam_succeed_if</i>的行，执行以下命令：</p><pre id=\"hypofl\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>grep \"pam_succeed_if\" /etc/pam.d/login\ngrep \"pam_succeed_if\" /etc/pam.d/sshd\ngrep \"pam_succeed_if\" /etc/pam.d/system-auth</code></pre><p id=\"d1f506d03223r\">若PAM配置文件存在相关配置，您将看到类似输出：</p><pre id=\"m4q3gp\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>/etc/pam.d/login:auth        requisite     pam_succeed_if.so uid &gt;= 1000 quiet_success\n/etc/pam.d/system-auth:auth        requisite     pam_succeed_if.so uid &gt;= 1000 quiet_success</code></pre></li></ol></li><li id=\"c51eb04031m2r\"><p id=\"c84ee19031qb0\">若PAM配置文件存在相关配置，打开对应的配置文件，根据实际需求修改与secure日志中相关的配置，解除限制。</p><div type=\"important\" id=\"0e8c971032j60\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"0e8c7000324pz\">所有包含secure中模块名称的PAM配置文件，均需要修改。</p></div></div><ol id=\"a7bac43132eer\"><li id=\"7178fef032j24\"><p id=\"7178d7e0328rm\">执行以下命令，打开某一个对应配置文件。</p><pre id=\"8ee40f90318s3\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>vim &lt;配置文件名称&gt;</code></pre></li><li id=\"5137dca031i3i\"><p id=\"5137b590313p8\">按<code data-tag=\"code\" class=\"code\">i</code>键，根据实际需求，注释或更改对应配置。PAM配置文件的语法信息，请参见<a class=\"\" target=\"_blank\" href=\"https://docs.oracle.com/cd/E24847_01/html/819-7061/pam-32.html#scrolltoc\">PAM 配置（参考）</a>。</p></li><li id=\"35cf1ec031z7p\"><p id=\"3617e79031141\">完成配置后，按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存。</p></li><li id=\"f74fb5b132dq7\"><p id=\"f74fb5b0324d0\">（可选）重复步骤a~c，修改其他配置文件。</p></li></ol></li><li id=\"3d745d7031qf3\"><p id=\"3de065b03143q\">重新登录ECS实例，如果可以正常登录，说明问题已修复。</p></li></ol></section><section id=\"f69b0ee034c6j\" class=\"section\"><h2 id=\"dc0db39031kww\">因PAM配置不当导致登录失败的常见错误日志和对应解决方案</h2><section id=\"e810b2a231ygn\" class=\"section\"><h3 id=\"6c38227031s2b\">secure<b>日志提示：“requirement \"uid &gt;= 1000\" not met by user \"root\"”</b></h3><ul id=\"7b1f231231jrm\"><li id=\"7b1f231031mw2\"><p id=\"799093d131zbc\"><b>问题原因</b></p><p id=\"c733749031e3a\">PAM配置文件中，设置了禁止UID小于1000的用户登录。</p><div type=\"note\" id=\"b9ab77d032pqm\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"b9ab50c032l7u\">系统用户（包括root）UID为0~999，该限制一般是禁止系统用户登录系统，增强系统的安全性。</p></div></div></li><li id=\"824d35f031v2u\"><p id=\"824d0ee03109q\"><b>解决方法</b></p><ul id=\"935eb7b131ls2\"><li id=\"92e011d131b4s\"><p id=\"92e011d031x6w\">方式一：使用其他用户登录ECS实例。</p></li><li id=\"96e371a131y24\"><p id=\"96e371a0313jm\">方式二：查看PAM配置文件中是否存在相关配置并修改，来解除限制。具体操作，请参见步骤<a title=\"\" class=\"xref\" href=\"#ced004e031ra9\">3</a>~<a title=\"\" class=\"xref\" href=\"#d84c858031ykg\">4</a>。</p><p id=\"5c04e990326er\">配置文件中，存在类似如下配置表示有该限制，您可以根据需要注释或删除该配置以解除该限制。</p><pre id=\"51355ab8311jj\" outputclass=\"language-shell\" data-tag=\"codeblock\" class=\"pre codeblock language-shell\"><code>auth required pam_succeed_if.so uid &gt;= 1000</code></pre></li></ul></li></ul></section><section id=\"e810b2a531mdz\" class=\"section\"><h3 id=\"f15633d031fch\">secure<b>日志提示：</b>Refused user xxx（用户名）for service sshd</h3><ul id=\"725ae792327q1\"><li id=\"725ae79032wrs\"><p id=\"5c8eb4d231xmc\"><b>问题原因</b></p><p id=\"5c8eb4d331ci3\">PAM配置文件中，设置了禁止xxx用户登录ECS实例。</p></li><li id=\"7926410032qxf\"><p id=\"5c8eb4d531vbo\"><b>解决方法</b></p><ul id=\"8df9d3d132mvl\"><li id=\"5c8eb4d731rth\"><p id=\"5c8eb4d831qgb\">方法一：使用其他用户登录ECS实例。</p></li><li id=\"5c8eb4d9316ns\"><p id=\"5c8eb4da313qg\">方法二：查看PAM配置文件中是否存在相关配置并修改，来解除限制。具体操作，请参见步骤<a title=\"\" class=\"xref\" href=\"#ced004e031ra9\">3</a>~<a title=\"\" class=\"xref\" href=\"#d84c858031ykg\">4</a>。</p><ul id=\"15861a81323h6\"><li id=\"14f3295032khj\"><p id=\"14f3024032nff\">配置文件中，存在类似如下配置表示有该限制：</p><pre id=\"3742b08032lay\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code># 设置了访问白名单，仅允许白名单用户允许登录\nauth required pam_listfile.so item=user sense=allow file=/etc/ssh/whitelist onerr=fail\n\n# 设置了访问黑名单，禁止黑名单用户登录\nauth required pam_listfile.so item=user sense=deny  file=/etc/ssh/blacklist onerr=fail</code></pre></li><li id=\"578708f032351\"><p id=\"5786e1e032rz4\">如何修改</p><p id=\"2864bb2032egp\">将允许登录的用户添加到白名单或移除黑名单，或注释该配置。</p><div id=\"d27099b4322w0\" outputclass=\"collapse\" class=\"collapse\"><p id=\"d27099b032xwn\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>如何添加/移除</b></p><div id=\"d27099b2323v3\" data-tag=\"expandable-content\" class=\"expandable-content\"><ol id=\"c470b6ea31322\"><li id=\"c470b6eb31c1b\"><p id=\"c470b6ec31m2y\">执行如下命令，打开<code data-tag=\"code\" class=\"code\">/etc/ssh/whitelist</code>配置文件。</p><pre data-tag=\"codeblock\" outputclass=\"language-shell\" id=\"c470b6ed31orh\" class=\"pre codeblock language-shell\"><code>vim /etc/ssh/whitelist</code></pre></li><li id=\"c470b6ee314az\"><p id=\"c470b6ef31dzy\">按<code data-tag=\"code\" class=\"code\">i</code>进入编辑模式。</p></li><li id=\"c470b6f0315rv\"><p id=\"c470b6f131xi0\">将允许的登录的用户添加到白名单中。</p><p id=\"c470b6f231jgk\">以下示例表示仅允许以下三个用户登录。</p><pre id=\"c470b6f331u97\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>root\necs-user\ntest</code></pre></li><li id=\"c470b6f431ymb\"><p id=\"c470b6f531q38\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>退出并保存配置文件。</p></li></ol></div></div></li></ul></li></ul></li></ul></section><section id=\"3eb8b14030jz7\" class=\"section\"><h3 id=\"f2a0d0b0312v5\"><b>登录Linux系统的ECS实例时，提示“Maximum amount of failed attempts was reached”</b></h3><ul id=\"689292b131tti\"><li id=\"e174c64031t32\"><p id=\"e1e8489131f6m\"><b>问题原因</b></p><p id=\"f385003130sa1\">连续多次输入错误密码，触发系统PAM认证模块策略限制，导致用户被锁定，无法登录Linux实例。</p></li><li id=\"ee10775031jm8\"><p id=\"ea0a0a4031bmj\"><b>解决方法</b></p><ol id=\"a0e855b0a7vj3\"><li id=\"a76b95d0a3f40\"><p id=\"f385756030wo5\">若root用户被锁定，请先解锁root用户。否则跳过该步骤。</p><div id=\"625788d33144a\" outputclass=\"collapse\" class=\"collapse\"><p id=\"625761c031t1h\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>如何解锁root用户？</b></p><div id=\"625788d131wts\" data-tag=\"expandable-content\" class=\"expandable-content\"><ol id=\"f5896b51313wh\" start=\"1\"><li id=\"f589444031xez\"><p id=\"f3164872315uh\">使用单用户模式登录实例。</p><p id=\"f316487331n4u\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/boot-a-linux-ecs-instance-into-single-user-mode\">Linux系统进入单用户模式</a>。</p></li><li id=\"f8aec730317lh\"><p id=\"f316487531369\">依次执行如下命令，解锁root用户。</p><pre data-tag=\"codeblock\" outputclass=\"language-shell\" id=\"f31648763177u\" class=\"pre codeblock language-shell\"><code>pam_tally2 -u root #查看root用户登录密码连续输入错误次数。\npam_tally2 -u root -r #清除root用户密码连续输入错误次数。\nauthconfig --disableldap --update #更新PAM安全认证记录。</code></pre></li><li id=\"fcdb32d031a4z\"><p id=\"f3164878310zv\">重启ECS实例，使修改生效。</p><p id=\"258f0aa3346jy\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li></ol></div></div></li><li id=\"4dfa859031d2g\"><p id=\"4dfa5e8031jea\">使用root用户登录Linux实例。</p><p id=\"1afbd3c034ujz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"f8dc8c71ceoot\"><p id=\"f385756330gsx\">执行如下命令，查看PAM配置文件中是否存在认证限制。</p><pre data-tag=\"codeblock\" outputclass=\"language-shell\" id=\"f385756630nj2\" class=\"pre codeblock language-shell\"><code>cat /etc/pam.d/system-auth</code></pre><p id=\"f3859c7030pou\">例如，系统返回如下时，表示普通用户和root用户连续三次输入错误密码，50秒后才能再次登录Linux实例。</p><img id=\"ce6847a030k5a\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4315590961/p701158.png\" alt=\"image.png\" placement=\"break\" width=\"800\" class=\"image break\"></li><li id=\"9da7dd93a33z8\"><p id=\"f3859c7230as8\">解决问题。</p><ul id=\"426f8bc1311sa\"><li id=\"41d7b8903197a\"><p id=\"41d7918031my3\">方法一：等待PAM设置的冻结时长（例如50秒），待系统解冻账户后，再重新登录实例。</p></li><li id=\"478bae90318a6\"><p id=\"478b878031a91\">方法二：修改配置文件（下文<code data-tag=\"code\" class=\"code\">/etc/pam.d/system-auth</code>为例进行说明，其他配置文件修改方法类似）。</p><ol id=\"ec2f8b61ceuyj\"><li id=\"eb8e4251ce4hm\"><p id=\"f3859c7330w2y\">执行如下命令，打开<code data-tag=\"code\" class=\"code\">/etc/pam.d/system-auth</code>配置文件。</p><pre data-tag=\"codeblock\" outputclass=\"language-shell\" id=\"f3859c76302rk\" class=\"pre codeblock language-shell\"><code>vim /etc/pam.d/system-auth</code></pre></li><li id=\"f9cbbc81cez4i\"><p id=\"f3859c77300jr\">按<code data-tag=\"code\" class=\"code\">i</code>进入编辑模式。</p></li><li id=\"154ce790ce402\"><p id=\"f385c38030fsg\">根据业务需要，注释、修改或删除该配置。</p><p id=\"f385c38130x3z\">本文以注释配置为例进行说明。</p><pre data-tag=\"codeblock\" outputclass=\"language-shell\" id=\"f385c384309j3\" class=\"pre codeblock language-shell\"><code>auth required pam_tally2.so deny=3 unlock_time=50  #原文代码：普通用户和root用户连续三次输入错误密码会被锁定，50秒后才能解锁。\n#auth required pam_tally2.so deny=3 unlock_time=50 #注释后 </code></pre><div type=\"note\" id=\"5ebafc1030nbn\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"5f143fa030dnk\">此处使用的是<code data-tag=\"code\" class=\"code\">pam_tally2</code>模块，不同的PAM版本，设置可能有所不同，详情请参见<a class=\"\" target=\"_blank\" href=\"https://github.com/linux-pam/linux-pam/blob/master/doc/sag/Linux-PAM_SAG.xml\">Linux PAM SAG</a>。</p></div></div></li></ol></li></ul></li></ol></li></ul></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-error-while-loading-shared-libraries-error-occurs-when-you-start-the-ssh-service", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>Linux系统的ECS实例中，启动SSH服务时提示“error while loading shared libraries”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例中，启动SSH服务时提示“error while loading shared libraries”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:27:11</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"501475d0a63sc\"><p data-tag=\"shortdesc\" id=\"501d2864a6b0j\" class=\"shortdesc\">本文介绍Linux系统的ECS实例，启动SSH服务时提示“<b data-tag=\"uicontrol\" id=\"f5849a40a65zn\" class=\"uicontrol\">error while loading shared libraries</b>”错误时的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"23776bf0a6g0l\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"501d2869a6kn4\">Linux系统的ECS实例启动SSH服务时，提示类似如下的错误信息。</p><pre id=\"df81ci\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>error while loading shared libraries： libcrypto.so.10: cannot open shared object file: No such file or directory.</code></pre><p id=\"330b8760a635c\">执行<code data-tag=\"code\" class=\"code\">cat /var/log/secure</code>查看secure日志，出现类似如下的错误信息。</p><pre id=\"yzalfe\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>PAM unable to dlopen(/usr/lib64/security/pam_tally.so): /usr/lib64/security/pam_tally.so: cannot open shared object file: No such file or directory.</code></pre></section><section id=\"259c6ed0a60aw\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"501d4f75a6h0a\">SSH服务的运行依赖相关系统库文件，当相关库文件异常（如相关库文件丢失或权限配置异常）会导致SSH服务启动异常。</p></section><h2 id=\"AywdZ\">解决方案</h2><p id=\"501d7684a69mt\">您可以通过修复libcrypto.so.10库文件或回滚云盘修复该问题。</p><section id=\"f4cedea0c6gwj\" class=\"section\"><h3 data-tag=\"h3\" id=\"501d7686a6lop\" class=\"h3\"><b>方案一：修复</b>libcrypto.so.10库文件</h3><p id=\"951eb061c9k27\">您可以通过查看其他正常实例（A实例）中的库文件信息来对照修复该异常实例（B实例）。</p><ol id=\"501d7687a6v45\"><li id=\"501d9d90a6cme\"><p id=\"501d9d91a6dwu\">登录正常实例（A实例），执行如下命令，查看libcrypto.so.10库文件的信息。 </p><pre data-tag=\"codeblock\" id=\"501475d1a6f3b\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ll /usr/lib64/libcrypto.so.10</code></pre><p id=\"501d9d92a6t7r\">系统显示类似如下，libcrypto.so.10库文件是libcrypto.so.1.0.1e库文件的软连接。 </p><pre data-tag=\"codeblock\" id=\"501475d2a6cgm\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>lrwxrwxrwx. 1 root root 19 Jan 8 12:40 /usr/lib64/libcrypto.so.10 -&gt; libcrypto.so.1.0.1e</code></pre></li><li id=\"501d9d94a6wrw\"><p id=\"501d9d95a6pij\">执行如下命令，查看libcrypto.so.1.0.1e库文件的信息。 </p><pre data-tag=\"codeblock\" id=\"501475d3a66ga\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ll /usr/lib64/libcrypto.so.1.0.1e</code></pre><p id=\"501d9d96a681d\"> 系统显示类似如下。 </p><pre data-tag=\"codeblock\" id=\"501475d4a6jf3\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>-rwxr-xr-x. 1 root root 1965856 Jan 8 03:22 /usr/lib64/libcrypto.so.1.0.1e</code></pre><p id=\"b2204080c6q2d\">记录正常库文件的路径、权限、属组等信息。\n</p></li><li id=\"501debb5a6x9v\"><p id=\"519623b0c6ag9\">以VNC方式远程连接该异常ECS实例（B实例）。 </p><p id=\"a7895cf0c6j3q\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"501debb7a6hr9\"><p id=\"501debb8a647f\">执行如下命令，查找libcrypto.so.1.0.1e库文件。 </p><pre data-tag=\"codeblock\" id=\"501475d5a6v5g\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>find / -name libcrypto.so.1.0.1e</code></pre><p id=\"eeab7a70c6aj7\">根据该ECS实例中是否存在libcrypto.so.1.0.1e库文件，有以下两种解决方案。</p><ul id=\"f06dc3e1c6ry5\"><li id=\"ef802f91c6rqj\"><p id=\"ef802f90c6fp7\">存在libcrypto.so.1.0.1e库文件。</p><p id=\"63c5cf90c6rig\">执行如下命令，将找到的文件拷贝到正常目录。 </p><pre data-tag=\"codeblock\" id=\"501475d6a670q\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cp [$File] /usr/lib64/libcrypto.so.1.0.1e</code></pre><div type=\"note\" id=\"501e12c3a6wuf\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"501e12c4a68gn\" class=\"p\">[$File]为上一步找到的libcrypto.so.1.0.1e库文件绝对路径。\n</p></div></div></li><li id=\"1943b6d1c60ye\"><p id=\"1943b6d0c63jn\">不存在libcrypto.so.1.0.1e库文件。</p><p id=\"803c7e30c63oh\">通过FTP软件将其他正常实例上的libcrypto.so.1.0.1e库文件上传到目标实例的<code data-tag=\"code\" class=\"code\">/usr/lib64</code>目录。 </p></li></ul></li><li id=\"501e12c6a60co\"><p id=\"501e12c7a633n\">依次执行如下命令，修改文件权限、所有者和所属组。 </p><pre data-tag=\"codeblock\" id=\"501475d7a69s0\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chmod 755 /usr/lib64/libcrypto.so.1.0.1e\nchown root:root /usr/lib64/libcrypto.so.1.0.1e</code></pre></li><li id=\"501e12c9a66z7\"><p id=\"501e12caa6kou\">执行如下命令，创建软链接。 </p><pre data-tag=\"codeblock\" id=\"501475d8a6vn5\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ln -s /usr/lib64/libcrypto.so.1.0.1e /usr/lib64/libcrypto.so.10</code></pre></li><li id=\"501e12cca6svl\"><p id=\"501e12cda6em6\">执行如下命令，启动SSH服务。 </p><pre data-tag=\"codeblock\" id=\"501475d9a6odq\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl start sshd.service</code></pre></li></ol></section><section id=\"0024c940c6ugk\" class=\"section\"><h3 data-tag=\"h3\" id=\"501e60e7a6siu\" class=\"h3\"><b>方案二：通过回滚云盘恢复</b></h3><p id=\"501e60e8a6o2f\">如果通过<a title=\"\" class=\"xref\" href=\"#f4cedea0c6gwj\">方案一：修复libcrypto.so.10库文件</a>未修复，如果您为系统盘创建过快照，则您可以通过回滚系统盘历史快照的方式来进行修复。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/roll-back-a-disk-by-using-a-snapshot\">使用快照回滚云盘</a>。</p><div type=\"important\" id=\"501e60e9a64mo\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><ul id=\"72d7cd42c6xvg\"><li id=\"72d7cd40c65xc\"><p id=\"501eaf01a6zqv\">快照回滚会导致回滚之后的数据丢失，请务必确认后再操作。</p></li><li id=\"501eaf02a6qx8\"><p id=\"501eaf03a67c4\">建议按时间从近到远的顺序逐一尝试回滚快照，直至SSH服务能正常运行。如果回滚后还是无法正常运行SSH服务，则说明相应时间点的系统已经出现异常。</p></li></ul></div></div></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/remote-connection-to-a-linux-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>远程连接Linux实例时卡顿怎么办</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>远程连接Linux实例时卡顿怎么办</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:31:16</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"83dd201096d04\"><p id=\"83e3afc79605g\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍使用SSH远程连接Linux实例时出现卡顿的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"6025182096rx3\" class=\"section\"><h2 id=\"XbeWY\" data-spm-anchor-id=\"a2c9r.14518950.0.i10.6fc414376iZYwJ\">问题描述</h2><p id=\"83e3afc896kav\">使用SSH连接Linux实例时耗时较长，在输入用户名密码后，会卡顿一段时间，才进入系统。在卡顿期间使用<code data-tag=\"code\" class=\"code\">Ctrl+C</code>命令可以跳过卡顿，正常进入实例。</p></section><section id=\"763549a096cho\" class=\"section\"><h2 id=\"tayMx\" data-spm-anchor-id=\"a2c9r.14518950.0.i11.6fc414376iZYwJ\">问题原因</h2><p id=\"83e3afc996yyc\" data-spm-anchor-id=\"a2c9r.14518950.0.i13.6fc414376iZYwJ\">可能是由于全局环境变量配置文件（<code data-tag=\"code\" class=\"code\">/etc/profile</code>）或个人环境变量配置文件（如<code data-tag=\"code\" class=\"code\">/root/.bash_profile</code>、<code data-tag=\"code\" class=\"code\">/root/.bashrc</code>、<code data-tag=\"code\" class=\"code\">$HOME/.bash_profile</code>、<code data-tag=\"code\" class=\"code\">$HOME/.bashrc</code>）中存在异常，导致读取环境变量耗时较长。</p></section><section id=\"e079b99096yoz\" class=\"section\"><h2 id=\"EFTFF\">解决方案</h2><p id=\"fc9f501196kcc\">修改新增的环境变量配置文件以解决使用ssh连接Linux实例卡顿的问题。</p><ol id=\"83e3d6db96s61\"><li id=\"83e3d6dc96wax\"><p id=\"9331ad9096eyw\">远程连接ECS实例。</p><p id=\"9331ad9196rcj\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"929daaf196gqh\"><p id=\"929daaf096z9a\">检查是否更新或者编辑过以下文件。 </p><p id=\"296a07609641b\">若更新过，请继续执行下一步。\n</p><ul id=\"83e3d6de96c2a\"><li id=\"4f19f843a2nb6\"><p id=\"4f19f844a2jdu\">$HOME/.bash_profile</p></li><li id=\"924cb411a3n76\"><p id=\"961e5580a3kll\">$HOME/.bashrc</p></li><li id=\"4f19f845a2xtc\"><p id=\"4f19f846a2zo1\">/root/.bash_profile</p></li><li id=\"4f19f847a2k50\"><p id=\"4f19f848a2yoz\">/root/.bashrc</p></li><li id=\"4f19f849a2476\"><p id=\"4f19f84aa265y\">/etc/profile</p><div type=\"note\" id=\"c60a1861a34mh\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"c8907520a3tl1\">$HOME表示当前用户家目录。</p></div></div></li></ul></li><li id=\"4f19f84ba2zk9\"><p id=\"4f19f84ca2wf4\">将更新过的环境变量注释。</p><ol id=\"4f19f84da2ugr\"><li id=\"4f19f84ea29ox\"><p id=\"4f19f84fa2b4o\">执行如下命令，打开环境变量配置文件。</p><pre id=\"4f19f850a2nl3\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>vi /root/.bashrc</code></pre></li><li id=\"4f19f851a2y7m\"><p id=\"4f19f852a2ubh\">在更新的内容前加<b data-tag=\"uicontrol\" id=\"4f19f853a2pdz\" class=\"uicontrol\">#</b>，将更新过的内容注释。</p><img placement=\"break\" alt=\"环境变量\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1926235761/p555160.png\" id=\"4f19f855a20ze\" class=\"image break\"></li><li id=\"4f19f856a2hvc\"><p id=\"4f19f857a2mgi\">编辑完成后，按<code data-tag=\"code\" class=\"code\">Esc</code>键，并输入<code data-tag=\"code\" class=\"code\">:wq</code>后按下<code data-tag=\"code\" class=\"code\">Enter</code>键，保存并退出。</p></li><li id=\"4f19f858a2939\"><p id=\"4f19f859a24ul\">执行如下命令，使环境变量生效。</p><pre id=\"4f19f85aa2tki\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>source /root/.bashrc</code></pre></li></ol></li><li id=\"4f1a1f50a2b64\"><p id=\"4f1a1f51a2ywp\">重新远程连接实例进行测试，确保卡顿问题已经消除。 </p></li><li id=\"4f1a1f52a2zmo\"><p id=\"4f1a1f53a293d\">重新修改ECS实例内的环境变量配置文件，确保修改内容正确性。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-disconnected-no-supported-authentication-methods-available-error-occurs-when-you-log-on-to-a-linux-instance-by-ssh", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>使用第三方SSH客户端远程连接Linux实例时，提示“No supported authentication methods available (server sent: publickey,gssapi-keyex,gssapi-with-mic)”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用第三方SSH客户端远程连接Linux实例时，提示“No supported authentication methods available (server sent: publickey,gssapi-keyex,gssapi-with-mic)”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-30 18:14:15</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"69885ef065c1q\"><p data-tag=\"shortdesc\" id=\"698c2f8065qef\" class=\"shortdesc\">本文介绍使用第三方SSH客户端远程连接Linux实例时，提示“No supported authentication methods available (server sent: publickey,gssapi-keyex,gssapi-with-mic)”错误的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"8fc46190bd26n\" class=\"section\"><h2 id=\"h2-u95EEu9898u73B0u8C611\">问题现象</h2><p id=\"698c2f8465cpy\">当您使用第三方SSH客户端远程连接Linux系统的ECS实例时，输入了正确的账号和密码，但是还是出现类似以下错误信息。</p><pre id=\"zoo3lk\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Permission denied (publickey,gssapi-keyex,gssapi-with-mic)</code></pre><pre id=\"9ggfgg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sshd[10826]: Connection closed by XX.XX.XX.XX</code></pre><pre id=\"5cs8ha\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>No supported authentication methods available (server sent: publickey,gssapi-keyex,gssapi-with-mic)</code></pre><img id=\"17c35cb0bdkgi\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4012528761/p580000.png\" alt=\"putty fatal error\" placement=\"break\" class=\"image break\"></section><section id=\"8ca52030bdbjm\" class=\"section\"><h2 id=\"h2-u539Fu56E0u5206u67902\">问题原因</h2><p id=\"14399d81cbmow\">使用密码或密钥登录都可能出现该问题，具体说明如下：</p><ul id=\"433ef802cbupp\"><li id=\"433ef800cb9n3\"><p id=\"86681980bd311\"><b>使用密码登录出现该问题</b>：可能是ECS实例内禁止用户使用密码方式连接，您可以将<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>参数值修改为<code data-tag=\"code\" class=\"code\">yes</code>以解决此问题。具体操作，请参见<a title=\"\" class=\"xref\" href=\"#144ae4409775t\">方案一：允许使用密码方式登录</a>。</p></li><li id=\"46e01391cbyba\"><p id=\"b399a230cb1gd\"><b>使用密钥登录出现该问题</b>：可能是SSH密钥对的公钥未加入对应用户<code data-tag=\"code\" data-spm-anchor-id=\"a2c4g.11186623.0.i5.2f452adaUZjYoa\" class=\"code\">.ssh/authorized_keys</code>中，您可以重新上传公钥到<code data-tag=\"code\" data-spm-anchor-id=\"a2c4g.11186623.0.i10.2f452adaUZjYoa\" class=\"code\">authorized_keys</code>文件中以解决此问题。具体操作，请参见<a title=\"\" class=\"xref\" href=\"#1487c810cbqjt\">方案二：上传公钥到authorized_keys文件</a>。</p></li></ul></section><section id=\"144ae4409775t\" class=\"section\"><h2 id=\"89234c70bdy7y\">方案一：允许使用密码方式登录</h2><ol id=\"614363c385yye\" start=\"1\"><li id=\"614363c485wd9\"><p id=\"614363c585v20\">以VNC方式登录ECS实例。</p><p id=\"95451f1097rpc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"61438ad1853a1\"><p id=\"bbe434d097yzr\">查看<code data-tag=\"code\" class=\"code\">/etc/ssh/sshd_config</code>的参数<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>配置是否有误。</p><pre id=\"6138b56285iv3\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/ssh/sshd_config</code></pre><p id=\"c59c750097zgi\">如下图所示，<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>参数设置为<code data-tag=\"code\" class=\"code\">no</code>，表示禁止以密码方式登录，需要修改为<code data-tag=\"code\" class=\"code\">yes</code>。</p><img id=\"c91918a097jgv\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5922304761/p551883.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li><li id=\"6144000485t3e\"><p id=\"cf46f99097n4k\">修改<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>的参数<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>为<code data-tag=\"code\" class=\"code\">yes</code>。</p><ol id=\"d496fda1972v6\"><li id=\"d42eed0197e1n\"><p id=\"d735282097dh0\">打开SSH配置文件。</p><pre id=\"zdrxtw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vi /etc/ssh/sshd_config</code></pre></li><li id=\"d967717097zr0\"><p id=\"dfcd043097xj8\">将<code data-tag=\"code\" class=\"code\">PasswordAuthentication no</code>修改为<code data-tag=\"code\" class=\"code\">PasswordAuthentication yes</code>。</p><img id=\"e2a85ec097fks\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6922304761/p551885.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li><li id=\"6144271185czd\"><p id=\"ea70199097pk4\">按Esc键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存修改。</p></li></ol></li><li id=\"e9d97ee197kai\"><p id=\"e9d97ee097ycl\">执行如下命令，重启SSH服务。 </p><pre id=\"6138b563850ez\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart sshd.service</code></pre></li><li id=\"ad1df621bdwjt\"><p id=\"ad1df620bd12h\">重新远程连接Linux实例，确保可以正常连接。</p></li></ol></section><section id=\"1487c810cbqjt\" class=\"section\"><h2 id=\"14ee5211cbith\">方案二：复制公钥到<code data-tag=\"code\" data-spm-anchor-id=\"a2c4g.11186623.0.i10.2f452adaUZjYoa\" class=\"code\">authorized_keys</code>文件</h2><ol id=\"14ee5212cb6rq\" start=\"1\"><li id=\"14ee5213cbe1b\"><p id=\"14ee5214cbnza\">以VNC方式登录ECS实例。</p><p id=\"14ee5215cbfwl\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"2ae61991cbulv\"><p id=\"2ae61990cb11w\">执行如下命令，打开<code data-tag=\"code\" data-spm-anchor-id=\"a2c4g.11186623.0.i10.2f452adaUZjYoa\" class=\"code\">authorized_keys</code>文件。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"80c82f11cbele\" class=\"pre codeblock language-plaintext\"><code>vim /home/user/.ssh/authorized_keys</code></pre><div id=\"046b0960cd8h2\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"00ddeb00cdxma\">/home/user请替换成实际的用户。</p></div></div></li><li id=\"fed6d061cdwoi\"><p id=\"fed6d060cd625\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"d2dd7d61cd6cz\"><p id=\"d2dd7d60cdxtu\">将本地保存的公钥粘贴到<code data-tag=\"code\" data-spm-anchor-id=\"a2c4g.11186623.0.i10.2f452adaUZjYoa\" class=\"code\">authorized_keys</code>文件中</p></li><li id=\"e61adfd1cduco\"><p id=\"e61adfd0cdg6a\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>退出编辑模式。</p></li><li id=\"a08c33f1cbp5m\"><p id=\"a08c33f0cb98h\">重新使用密钥登录ECS实例，确保不会再出现错误。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-bad-configuration-options-error-occurs-when-the-ssh-service-is-started", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>Linux系统的ECS实例中，启动SSH服务时提示“Bad configuration options”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例中，启动SSH服务时提示“Bad configuration options”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:26:37</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"1fe28430c6ajv\"><p data-tag=\"shortdesc\" id=\"1fe93af7c67gw\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中，启动SSH服务时提示“Bad configuration options”错误的错误原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"61334000c6t95\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p data-spm-anchor-id=\"a2c4g.11186623.2.i3.72c58909qwjNAC\" id=\"1fe96203c69mh\">在Linux系统的ECS实例启动SSH服务，命令行或secure日志中可能会出现类似如下信息。</p><pre data-tag=\"codeblock\" id=\"1fe28431c69z4\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>/etc/ssh/sshd_config: line 2: Bad configuration options:\\\\ /etc/ssh/sshd_config: terminating, 1 bad configuration options</code></pre></section><section id=\"bb131000c6rxs\" class=\"section\"><h2 id=\"4rM4I\" data-spm-anchor-id=\"a2c9r.12641768.0.i3.596bcB5rcB5rIn\">问题原因</h2><p id=\"1fe96205c6g6h\">ECS实例内SSH服务对应的配置文件<code data-tag=\"code\" class=\"code\">/etc/ssh/sshd_config</code>存在文件编码、配置错误等异常，导致SSH服务启动失败。</p></section><section id=\"c5a42400c6dga\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"1fe98917c62vm\">您可以根据需要，选择合适的方案进行修复。</p><section id=\"a0b90a60c6ump\" class=\"section\"><h3 data-tag=\"h3\" id=\"1fe9b027c6oni\" class=\"h3\"><b>根据报错信息修改配置文件</b></h3><p id=\"1fe9b028c623z\">如果错误信息中明确指出了具体的错误配置，您可以根据错误信息，修改相应配置。</p><ol id=\"c6ad1312c6gd4\"><li id=\"c6ad1310c6mer\"><p id=\"c5463011c6xzd\">使用VNC远程连接ECS实例。 </p><p id=\"c7dd0790c60od\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"ca48b061c6bgf\"><p id=\"ca48b060c62pw\">执行如下命令，打开<code data-tag=\"codeph\" class=\"codeph\">sshd_config</code>文件。</p><pre id=\"apbmec\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/ssh/sshd_config</code></pre></li><li id=\"d527e460c67lb\"><p id=\"d527bd50c6p8g\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"e715e371c684l\"><p id=\"e715e370c69in\">根据错误提示，修改相应配置。</p><div type=\"note\" id=\"1c4945f0c63oq\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"1e8cf460c6kcu\">您在一台正常的ECS实例，对比<code data-tag=\"codeph\" class=\"codeph\">/etc/ssh/sshd_config</code>文件，进行修改。</p></div></div></li><li id=\"1ccd4191c9wya\"><p id=\"2021c3c0c99id\">以测试模式运行sshd。</p><pre id=\"xmbprh\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>/usr/sbin/sshd -t</code></pre><p id=\"497c28f0c91ye\">无返回信息时，说明sshd配置正确。</p></li><li id=\"092ba081c6svz\"><p id=\"186750d0c6rjd\">执行如下命令，重新启动SSH服务。 </p><pre data-tag=\"codeblock\" id=\"2e9eb960c6pqd\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>service sshd start</code></pre></li></ol></section><section id=\"86df4dc0c6vob\" class=\"section\"><h3 data-tag=\"h3\" id=\"1fe9d733c6rbk\" class=\"h3\"><b>将正常实例中的</b><code data-tag=\"codeph\" class=\"codeph\">sshd_config</code>文件上传到该异常实例进行修复</h3><p id=\"1fe9d734c6g9y\">如果错误较多，或者错误信息中没有明确的错误说明，可以将正常实例的<code data-tag=\"codeph\" class=\"codeph\">/etc/ssh/sshd_config</code>文件上传到目标异常实例进行修复。</p><ol id=\"1fe9d735c6dzo\"><li id=\"1fe9d736c6jz3\"><p id=\"1fe9d737c6gxr\">通过FTP等方式将正常实例上的<code data-tag=\"codeph\" class=\"codeph\">/etc/ssh/sshd_config</code>文件上传到目标实例。</p></li><li id=\"1fe9d738c6m9v\"><p id=\"1fe9d739c6sh8\">假设上传目录为<code data-tag=\"codeph\" class=\"codeph\">/tmp</code>，执行如下命令，将文件拷贝到正常目录。 </p><pre data-tag=\"codeblock\" id=\"1fe28432c6mar\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cp /tmp/sshd_config /etc/ssh/sshd_config</code></pre></li><li id=\"1fe9fe40c6q3t\"><p id=\"1fe9fe41c6cqu\">执行如下命令，修改文件权限、所有者和所属组。 </p><pre data-tag=\"codeblock\" id=\"1fe28433c6nh7\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chmod 600 /etc/ssh/sshd_config\nchown root:root /etc/ssh/sshd_config</code></pre><div id=\"e4606ee0c6wtc\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"1fe9fe44c6u4c\">如果无法上传外部正常配置文件，也可以对照正常配置文件，直接手工编辑、撰写配置文件。</p></div></div></li><li id=\"1fe9fe45c6w29\"><p id=\"1fe9fe46c6xcl\">执行如下命令，重新启动SSH服务。 </p><pre data-tag=\"codeblock\" id=\"1fe28434c6v0t\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>service sshd start</code></pre></li></ol></section><section id=\"22370610c6fik\" class=\"section\"><h3 data-tag=\"h3\" id=\"1fe9fe49c6uux\" class=\"h3\"><b>重新安装SSH服务</b></h3><p id=\"1fe9fe4ac6kv1\">如果上述操作不便实施，也可以参阅如下步骤，通过重装SSH服务来进行问题修复。</p><ol id=\"1fe9fe4bc6ryg\"><li id=\"b28af191c6os4\"><p id=\"519623b0c6ag9\">使用VNC远程连接ECS实例。 </p><p id=\"60c5beb0c6pfk\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"23f57ef0c6s1y\"><p id=\"23f557e0c61cp\">执行如下命令，卸载SSH服务。 </p><pre data-tag=\"codeblock\" id=\"1fe28435c6c5k\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>rpm -e openssh-server</code></pre></li><li id=\"1fea2551c6hii\"><p id=\"1fea2552c6yfh\">执行如下命令，安装SSH服务。 </p><pre data-tag=\"codeblock\" id=\"1fe28436c619p\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install openssh-server</code></pre></li><li id=\"1fea2554c664d\"><p id=\"1fea2555c6ph5\">执行如下命令，启动SSH服务。 </p><pre data-tag=\"codeblock\" id=\"1fe28437c6xip\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl start sshd.service</code></pre></li></ol></section><section id=\"3570a280c6eja\" class=\"section\"><h3 data-tag=\"h3\" id=\"1fea2558c6zkx\" class=\"h3\"><b>通过回滚系统盘恢复</b></h3><p id=\"1fea2559c66vp\">如果以上方案都无法修复，您可以通过回滚系统盘历史快照的方式来进行修复。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/roll-back-a-disk-by-using-a-snapshot\">使用快照回滚云盘</a>。</p><div type=\"important\" id=\"1fea4c60c6k7e\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><ul id=\"cf597e02c68t8\"><li id=\"cf597e00c606h\"><p id=\"1fea4c65c6nez\">快照回滚会导致回滚点之后的数据丢失，请务必确认后再操作。</p></li><li id=\"1fea4c66c6f2t\"><p id=\"1fea4c67c64tn\">建议按时间从近到远的顺序逐一尝试回滚快照，直至SSH服务能正常运行。如果回滚后还是无法正常运行SSH服务，则说明相应时间点的系统已经出现异常。</p></li></ul></div></div></section></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-system-prompts-host-key-verification-failed-when-logging-on-to-the-ecs-instance-over-ssh", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>使用SSH远程连接Linux系统的ECS实例时，提示“Host key verification failed”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用SSH远程连接Linux系统的ECS实例时，提示“Host key verification failed”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-04 09:54:00</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"796b24b0654iw\"><p data-tag=\"shortdesc\" id=\"7973621165qa5\" class=\"shortdesc\">本文介绍使用SSH远程连接Linux系统的ECS实例时，提示“Host key verification failed”的错误原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"40df47c0cc2i0\" class=\"section\"><h2 id=\"h2-u95EEu9898u63CFu8FF01\">问题现象</h2><ul id=\"7973621665rt4\"><li id=\"7973621765fy1\"><p id=\"79736218655vl\">本地客户端为Linux环境或macOS环境，使用SSH方式无法正常连接Linux系统的ECS实例时，提示如下错误信息。 </p><pre id=\"796b24b165ipd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n@ WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED! @\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nIT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!\nSomeone could be eavesdropping on you right now (man-in-the-middle attack)!\nIt is also possible that the RSA host key has just been changed.\nThe fingerprint for the RSA key sent by the remote host is\nae:6e:68:4c:97:a6:91:81:11:38:8d:64:ff:92:13:50.\nPlease contact your system administrator.\nAdd correct host key in /root/.ssh/known_hosts to get rid of this message.\nOffending key in /root/.ssh/known_hosts:70\nRSA host key for x.x.x.x has changed and you have requested strict checking.\nHost key verification failed.</code></pre></li><li id=\"7973621a65g0n\"><p id=\"7973621b65m5n\">本地客户端为Windows环境，使用常见的SSH客户端（如Putty或MobaXterm）连接Linux系统的ECS实例时，提示类似“The host key does not match the one Putty has cached for this server”或“remote server identification has changed”错误信息。 </p><img id=\"9f1c3050ccl67\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1085500861/p610464.png\" alt=\"windows\" placement=\"break\" class=\"image break\"><img id=\"aaaab720ccpqu\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1085500861/p610465.png\" alt=\"moba\" placement=\"break\" class=\"image break\"></li></ul></section><section id=\"d3ce8ce0cc9bx\" class=\"section\"><h2 id=\"h2-u95EEu9898u539Fu56E02\">问题原因</h2><p id=\"7973621e65grs\">该ECS实例可能进行过重装系统、账户信息变更等操作，导致ECS实例SSH公钥变更，造成本地客户端保存的公钥指纹与服务器端不一致，出现该提示信息。</p></section><section id=\"fb769c40ccgkn\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"7973892a65kyl\">您可以根据本地客户端环境不同，选择合适的方案。</p><section id=\"2e63ca30ccxz0\" class=\"section\"><h3 data-tag=\"h3\" id=\"7973fe5065f6c\" class=\"h3\"><b>本地客户端为Windows环境</b></h3><p id=\"c9527590ccvza\">本文以SSH客户端Putty和MobaXterm进行介绍，不同SSH客户端操作有所差异，请根据实际的客户端进行操作。</p><p id=\"498812c0ccu8m\">客户端为Putty时，单击<b data-tag=\"uicontrol\" id=\"c14e24a0cdjmf\" class=\"uicontrol\">Accept</b>，Putty会自动更新密钥指纹信息，即可成功登录实例。</p><img id=\"bf25efc0cc7bb\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1085500861/p610480.png\" alt=\"Putty\" placement=\"break\" class=\"image break\"><p id=\"7974256965j4f\">客户端为MobaXterm时，单击<code data-tag=\"code\" class=\"code\">Accept the new server hostkey and carry on connecting</code>，MobaXterm会自动更新密钥指纹信息，即可成功登录实例。</p><img id=\"ab4bff30cc044\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1085500861/p610479.png\" alt=\"MobaXterm\" placement=\"break\" class=\"image break\"></section><section id=\"31955b10cc5ca\" class=\"section\"><h3 data-tag=\"h3\" id=\"7974256b65pm0\" class=\"h3\"><b>本地客户端为Linux或macOS环境</b></h3><ol id=\"8db13861ccm8s\"><li id=\"3d884901cczgy\"><p id=\"3d884900cchbr\">在本地客户端中，执行如下命令，进入对应账号的<code data-tag=\"code\" class=\"code\">known_hosts</code>文件。 </p><pre id=\"796b24b365oy1\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim ~/.ssh/known_hosts</code></pre></li><li id=\"7974257165udq\"><p id=\"7974257265qer\">按<code data-tag=\"code\" class=\"code\"><b>i</b></code>键进入编辑模式。</p></li><li id=\"79742573653ke\"><p id=\"79742574651sl\">删除ECS实例IP对应的条目，如下图所示。</p><img id=\"d96e6930ccf1u\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1085500861/p610478.png\" alt=\"known_hosts\" placement=\"break\" class=\"image break\"></li><li id=\"7974257565wp8\"><p id=\"7974257665xlq\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存并退出。</p></li><li id=\"7974257765bp7\"><p id=\"7974257865stt\">重新连接Linux实例，确保可以正常连接。</p></li></ol></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/login-using-sftp-linux-instance-prompt-received-unexpected-end-of-file-from-sftp-server-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>使用SFTP登录Linux实例时，提示“Received unexpected end-of-file from SFTP server”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用SFTP登录Linux实例时，提示“Received unexpected end-of-file from SFTP server”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:24:51</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"576d101096niq\"><p id=\"5772403796mab\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍使用SFTP工具Linux实例时，提示<b data-tag=\"uicontrol\" id=\"515b4271a2g64\" class=\"uicontrol\">“Received unexpected end-of-file from SFTP server”</b>错误时的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"66eace40962lt\" class=\"section\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"5772403896a9a\">使用SFTP工具登录Linux实例时，提示<b data-tag=\"uicontrol\" id=\"515b6980a2umu\" class=\"uicontrol\">“</b><b data-tag=\"uicontrol\" id=\"515b6983a29em\" class=\"uicontrol\">Received unexpected end-of-file from SFTP server</b><b data-tag=\"uicontrol\" id=\"515b6985a2mh4\" class=\"uicontrol\">”</b>错误。</p></section><section id=\"65ad453096o02\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"5772674096a9v\">该问题一般是由于ECS实例内的SSH配置文件（/etc/ssh/sshd_config）中没有开启SFTP所致。</p></section><section id=\"63f8de7096uke\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"25528920a0x6k\">您可以在SSH配置文件中（/etc/ssh/sshd_config）开启SFTP功能以解决该问题，具体步骤如下。</p><ol id=\"57726741968w2\"><li id=\"5772674296w8u\"><p id=\"57726743968xv\">远程连接ECS实例。</p><p id=\"2943b98096wz4\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"8df2ad6096wqg\"><p id=\"8df2865096ko5\">执行如下命令，打开SSH配置文件。 </p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"576d101196i06\" class=\"pre codeblock language-javascript\"><code>vi /etc/ssh/sshd_config</code></pre></li><li id=\"57726745963gl\"><p id=\"5772674696vf7\">找到如下配置所在行，删除前面的<b data-tag=\"uicontrol\" id=\"515bb7a3a23ll\" class=\"uicontrol\">#</b>，取消注释该行配置，开启SFTP功能。 </p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"576d1012960mt\" class=\"pre codeblock language-javascript\"><code>#Subsystem  sftp   /usr/libexec/openssh/sftp-server</code></pre></li><li id=\"57728e509613b\"><p id=\"57728e51966hs\">执行如下命令，重启SSH服务。</p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"576d101396tkv\" class=\"pre codeblock language-javascript\"><code>systemctl restart sshd.service</code></pre></li><li id=\"5e16375196rxa\"><p id=\"5f473d4096ywr\">重新登录该ECS实例，确认可以正常登录。 </p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/configure-linux-to-keep-the-process-running-after-the-ssh-client-is-disconnected", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>Linux系统下如何保持进程在SSH客户端断开后仍继续运行？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统下如何保持进程在SSH客户端断开后仍继续运行？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-07 11:51:44</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"868bf6f096n89\"><p data-tag=\"shortdesc\" id=\"8693e63796wtc\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例内，当断开SSH客户端后，如何保持进程继续运行的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"0f25608096rzs\" class=\"section\"><h2 id=\"noPMw\">使用场景</h2><p id=\"86940d40964wj\">在Linux系统中，在执行一些运行时间比较长的任务时，必须等待执行完毕才能断开SSH连接或关闭客户端软件，否则可能会导致执行中断。本文介绍两种保障程序在您退出登录后持续运行的方法。</p></section><section id=\"14cfe0a096ux1\" class=\"section\"><h2 data-tag=\"h3\" id=\"86940d499691a\" class=\"h3\"><b>方法一：使用nohup执行命令</b></h2><p id=\"8694345096j6l\">nohup，可以使运行的命令忽略SIGHUP信号。因此，即使退出登录，程序仍旧会继续执行。通常情况下，在nohup命令尾部加上<b data-tag=\"uicontrol\" id=\"4b60e186a2vnc\" class=\"uicontrol\">&amp;</b>字符，才能将命令放至后台执行。具体示例如下所示。</p><div type=\"note\" id=\"8694345196b5d\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"8694345396gzr\">nohup通常用于执行无干预的自动化程序或脚本，无法完成带有交互的操作。</p></div></div><ol id=\"8694345496y2b\"><li id=\"86943455961ph\"><p id=\"869434569646u\">执行如下命令，每秒输出一行信息。 </p><pre id=\"868c1e0096g73\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>bash hello.sh</code></pre><p id=\"8694345796qzh\"> 系统显示类似如下。</p><p id=\"5407a780965nx\"> <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2868104761/p519373.png\" class=\"image break\"></p></li><li id=\"86943458967oa\"><p id=\"8694345996se5\">使用nohup执行命令。</p><p id=\"c6dc5f20962e1\">在命令头尾分别加上nohup和&amp;，可以看到nohup输出了一行信息，再Enter键就跳回了Shell命令行，此时命令已经在后台执行了，nohup将命令的输出重定向至当前目录的nohup.out文件中。同时，nohup会将对应程序的PID输出，PID可用于需要中断进程时结束进程。 </p><div id=\"1506232196qil\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"1a7bb090962i5\">在命令中也可以使用重定向将程序的输出改为自己想要的文件名，如下所示，则程序的输出就会写到hello.log文件中。 </p><pre id=\"868c1e0396giv\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>nohup bash hello.sh &gt;hello.log &amp;</code></pre></div></div><pre id=\"868c1e0196uv8\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>nohup bash hello.sh &amp;</code></pre><p id=\"8694345a96r8e\"> 系统显示类似如下。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2868104761/p519374.png\" class=\"image break\"></li><li id=\"8694345b96i7g\"><p id=\"8694345c96bhe\">执行如下命令，可以持续的查看nohup.out的输出，达到监控程序的效果。 </p><pre id=\"868c1e0296p44\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>tail -f nohup.out</code></pre></li><li id=\"86945b62960bf\"><p id=\"86945b6396q2w\">执行如下命令，结束进程。 </p><pre id=\"868c1e049606c\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>kill -TRM [$PID]</code></pre><div type=\"note\" id=\"86945b64965kt\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"86945b6596s2f\">[$PID]为之前nohup命令输出的值。\n</p></div></div></li></ol></section><section id=\"a1407bd096eso\" class=\"section\"><h2 data-tag=\"h3\" id=\"86945b6796syi\" class=\"h3\"><b>方法二：使用screen执行命令</b></h2><p id=\"714a82f09636a\">GNU Screen一款由GNU计划开发的用于命令行终端切换的软件，可以当做窗口管理器的命令行界面版本。只要Screen本身没有被终止，在其内部运行的会话都可以恢复，特别适合执行一些运行时间长的任务。</p><ol id=\"cd436bc296ujg\"><li id=\"cd436bc0962qz\"><p id=\"cc087ac096xno\">安装screen工具。</p><p id=\"d79553e096vyo\">Linux系统默认没有screen工具，需要先进行安装。</p><ul id=\"e5608441967n4\"><li id=\"e4a4ae5196a1w\"><p id=\"e4a4ae50965ut\">CentOS系列系统安装命令如下所示。 </p><div id=\"18163c909630a\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"13f5b7d096exf\">CentOS 6与CentOS 8操作系统版本结束了生命周期（EOL），按照社区规则，CentOS 6/8的源地址内容已移除。当您在CentOS 6/8系统内继续使用默认配置的源地址时会发生报错。建议您先切换CentOS 6/8的源地址，然后再进行操作。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-the-centos-6-source-address\">CentOS 6 EOL如何切换源？</a>和<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-centos-8-repository-addresses\">CentOS 8 EOL如何切换源？</a></p></div></div><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"uqnaza\" class=\"pre codeblock language-javascript\"><code>yum install screen</code></pre></li><li id=\"f0c8e57096l8r\"><p id=\"f0c8be6096urv\">Ubuntu系列系统安装</p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"h17mmi\" class=\"pre codeblock language-javascript\"><code>sudo  apt-get  install screen</code></pre></li></ul></li><li id=\"86948270963ft\"><p id=\"8694827996auh\">执行如下命令，创建screen窗口。 </p><pre id=\"868c1e0796ip9\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>screen -S [$Name]</code></pre></li><li id=\"8694a98096wbb\"><p id=\"8694a98196ddu\">执行如下命令，列出screen窗口。 </p><pre id=\"868c1e08963js\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>screen -ls</code></pre><p id=\"8694a98296a4q\"> 系统显示类似如下。</p><p id=\"5cbe4ed0962rk\"> <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2868104761/p519375.png\" class=\"image break\"></p></li><li id=\"8694a983969zz\"><p id=\"8694a9849611f\">当需要运行脚本、执行程序时，在命令前添加screen即可。</p></li><li id=\"8694a98596q5w\"><p id=\"8694a98696t6b\">同时按<b>Ctrl</b>+<b>a</b>+<b>d</b>键，就可以退出SSH登录，但不会影响screen程序的运行。</p></li><li id=\"8694a98796adw\"><p id=\"8694a98896eiv\">需要继续工作时，登录实例，然后执行如下命令，恢复会话即可。 </p><pre id=\"868c1e09962y6\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>screen -r -d</code></pre></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-error-message-the-system-cannot-find-the-file-specified-appears-when-i-connect-to-a-windows-instance-by-using-remote-desktop", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例提示“系统找不到指定的文件”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例提示“系统找不到指定的文件”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:41:59</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"3e564c70a1y2n\"><p id=\"3e59a7d7a1xhw\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例提示“系统找不到指定的文件”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"a1819110a10z1\" class=\"section\"><h2 id=\"hXWse\">问题描述</h2><p id=\"3e59a7dba1cn4\">使用本地电脑远程连接Windows系统的ECS实例时，提示以下错误。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3539225761/p519793.png\" alt=\"{0F9B4756-BE62-4996-B144-5742F8A4D165}_20200731112958.jpg\" width=\"430\" height=\"186\" placement=\"break\" class=\"image break\"></section><section id=\"a34dc590a1ow2\" class=\"section\"><h2 id=\"serHA\">问题原因</h2><p id=\"3e59a7dea1fr5\">通过远程桌面连接Windows系统的ECS实例时系统指定了初始化程序，但是相关程序无法启动。</p></section><section id=\"a971e280a1ko7\" class=\"section\"><h2 id=\"3e59a7dfa1b00\">解决方案</h2><p data-spm-anchor-id=\"a2c9r.12641779.0.i4.120aDgcgDgcg8K\" id=\"c06b8140a1yt2\">下列操作以Windows Server 2008 R2 64位操作系统为例，其它版本的操作系统的配置可能有所差异，具体情况请参考相应操作系统的官方文档。</p><ol id=\"52264a90a1l4x\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i9.61ac5e3bxgDHR6\" id=\"52264a91a160k\"><p id=\"52264a92a1bs8\">通过VNC连接Windows实例。</p><p id=\"52264a93a1pwb\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"3e59cee5a1ryo\"><p id=\"3e59cee6a13wd\">依次选择<b data-tag=\"uicontrol\" id=\"6ae31384a3bzx\" class=\"uicontrol\">开始 &gt; 管理工具 &gt; 远程桌面服务</b>，然后单击<b data-tag=\"uicontrol\" id=\"6ae31386a3g39\" class=\"uicontrol\">远程桌面会话主机配置</b>。<img width=\"600\" placement=\"break\" alt=\"124\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3539225761/p554407.png\" id=\"583b2ed0a1t43\" class=\"image break\"></p></li><li id=\"3e59cee7a10jf\"><p id=\"3e59cee8a1ucn\">进入<b data-tag=\"uicontrol\" id=\"6ae33a84a3i9e\" class=\"uicontrol\">RD 会话主机配置</b>区域，双击<b data-tag=\"uicontrol\" id=\"6ae33a86a3834\" class=\"uicontrol\">RDP-Tcp</b><b>。</b></p></li><li id=\"3e59cee9a1uuj\"><p id=\"3e59ceeaa1z22\">进入<b data-tag=\"uicontrol\" id=\"6ae33a8ba3efy\" class=\"uicontrol\">RDP-Tcp 属性</b>页面，单击<b data-tag=\"uicontrol\" id=\"6ae33a8da3yyf\" class=\"uicontrol\">环境</b>，选中<b data-tag=\"uicontrol\" id=\"6ae33a8fa37jd\" class=\"uicontrol\">不允许启动初始程序；始终显示桌面</b>，单击<b data-tag=\"uicontrol\" id=\"6ae33a91a3htj\" class=\"uicontrol\">确定</b>保存配置。<img width=\"600\" placement=\"break\" alt=\"126\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3539225761/p554408.png\" id=\"12983a70a1d7s\" class=\"image break\"></p></li><li id=\"3e59ceeba1u2x\"><p id=\"3e59ceeca15qv\">确认使用远程桌面连接Windows实例成功并且无报错信息。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-ssh-exchange-identification-read-connection-reset-by-peer-error-is-displayed-when-you-log-on-to-an-ecs-instance-through-ssh", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>使用SSH客户端登录Linux实例提示“ssh_exchange_identification: read: Connection reset by peer”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用SSH客户端登录Linux实例提示“ssh_exchange_identification: read: Connection reset by peer”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-07 13:56:58</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"711e827065u78\"><p data-tag=\"shortdesc\" id=\"71222bf065cym\" class=\"shortdesc\">本文介绍了使用SSH客户端登录Linux实例提示“ssh_exchange_identification: read: Connection reset by peer”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"2b10526097msn\" class=\"section\"><h2 id=\"ffswS\">问题描述</h2><p id=\"71222bf46505j\">通过SSH客户端登录Linux实例时，确认用户名和密码正确的情况下，遇到了如下错误信息。</p><pre id=\"711e8271657av\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ssh_exchange_identification: read: Connection reset by peer.\nsshd[11949]: refused connect from 192.168.0.0 (192.168.0.0).</code></pre></section><section id=\"4ece413097cgj\" class=\"section\"><h2 id=\"711e827265gfa\">问题原因</h2><p id=\"4fb60920973kx\">出现该问题可能有以下原因：</p><ul id=\"a46ab37197lsu\"><li id=\"71222bf6652ju\"><p id=\"71222bf7654tn\">ECS实例内的TCP Wrapper文件配置不正确：TCP Wrapper是Linux系统中的标准安全框架，用于控制应用程序的访问。其守护进程tcpd通过读取<code data-tag=\"code\" class=\"code\">/etc/hosts.allow</code>和<code data-tag=\"code\" class=\"code\">/etc/hosts.deny</code>两个文件中的相关配置，决定是否允许进行TCP连接。如果<code data-tag=\"code\" class=\"code\">/etc/hosts.allow</code>或<code data-tag=\"code\" class=\"code\">/etc/hosts.deny</code>文件配置错误，会导致SSH连接异常。您可以重新配置<code data-tag=\"code\" class=\"code\">/etc/hosts.allow</code>或<code data-tag=\"code\" class=\"code\">/etc/hosts.deny</code>文件解决该问题，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#32d99a3097uhn\">方法一：编辑TCP Wrapper文件</a>。</p></li><li id=\"85087f51a0850\"><p id=\"8354b4d0a097l\">ECS实例内liblz4.so.1文件丢失：liblz4.so.1文件是liblz4.so.1.7.5文件的软链接，该文件丢失会导致SSH连接异常。更多详情，请参见<a title=\"\" class=\"xref\" href=\"#c5fdd4b1a0915\">方法二：创建liblz4.so.1软链接</a>。</p></li><li id=\"71222bf8658sy\"><p id=\"71222bf965ac8\">本地公网IP被云安全中心拦截：请将本地公网IP添加到白名单，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#823e130097gyd\">方法三：在云安全中心添加白名单</a>。</p></li><li id=\"71222bfa658qt\"><p id=\"71222bfb65z1f\">本地网络连接异常：请检查本地网络，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#9b6ce9a0979kx\">方法四：检查本地网络</a>。 </p></li></ul></section><section id=\"5bf87d0097pqj\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><section id=\"32d99a3097uhn\" class=\"section\"><h3 id=\"7122530265a84\"><b>方法一：</b>编辑TCP Wrapper文件</h3><p id=\"4ce1007090op2\">参考以下步骤，通过修改配置文件动态设置访问策略，修改后无需重启服务器使配置生效。 本文以修改<code data-tag=\"code\" class=\"code\">/etc/hosts.deny</code>为例进行说明。</p><ol id=\"7122530365eqj\"><li id=\"71225304655k2\"><p id=\"71225305656k3\">通过VNC方式登录ECS实例。</p><p id=\"e37aa700974f7\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"71225306650df\"><p id=\"7122530765cpo\">执行如下命令，查看<code data-tag=\"code\" class=\"code\">/etc/hosts.allow</code>或<code data-tag=\"code\" class=\"code\">/etc/hosts.deny</code>文件中，是否包含类似<code data-tag=\"code\" class=\"code\">all:all:deny</code>或<code data-tag=\"code\" class=\"code\">sshd:IP地址:deny</code>配置。 </p><pre id=\"2b27514197q59\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/hosts.deny</code></pre><ul id=\"ade4f8e197m3w\"><li id=\"7122530965fxv\"><p id=\"b8b6e67097fn1\">如果不存在<code data-tag=\"code\" class=\"code\">all:all:deny</code>或<code data-tag=\"code\" class=\"code\">sshd:IP地址:deny</code>配置，说明不是TCP Wrapper导致，请执行其他方案进行排查。</p></li><li id=\"b727baf097w5j\"><p id=\"b72793e097mse\">如果存在<code data-tag=\"code\" class=\"code\">all:all:deny</code>或<code data-tag=\"code\" class=\"code\">sshd:IP地址:deny</code>配置，请继续执行下一步。</p></li></ul></li><li id=\"8c4f8f6097ydd\"><p id=\"8c4f6850973n6\">修改<code data-tag=\"code\" class=\"code\">/etc/hosts.deny</code>文件。</p><ol id=\"539cd4b197u7u\"><li id=\"5315f17197k8f\"><p id=\"5315f1709768w\">打开<code data-tag=\"code\" class=\"code\">/etc/hosts.deny</code>文件。</p></li><li id=\"5b1cff3197et6\"><p id=\"5b1cff3097uug\">在<code data-tag=\"code\" class=\"code\">all:all:deny</code>或<code data-tag=\"code\" class=\"code\">sshd:IP地址:deny</code>前加#号，注释掉该配置。</p><pre id=\"711e827465flo\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code># all:all:deny\n# sshd:IP地址:deny</code></pre></li><li class=\"li substep substepexpand\" id=\"substep-fv1-dxe-olh\"><p id=\"92ecde8097lv5\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，退出编辑模式。</p></li><li class=\"li substep substepexpand\" id=\"substep-69v-j45-dcg\" data-spm-anchor-id=\"a2c4g.11186623.0.i3.340456b5dAXbA7\"><p id=\"92ecde8197i30\">输入<code data-tag=\"code\" class=\"code\">:wq</code>，并按<code data-tag=\"code\" class=\"code\">Enter</code>键，保存并退出。</p></li></ol></li></ol></section><section id=\"c5fdd4b1a0915\" class=\"section\"><h2 id=\"eb905c70a0bl3\"><b>方法二：创建liblz4.so.1软链接</b></h2><ol id=\"ecfa73c1a0xqd\"><li id=\"e9c22c21a06mn\"><p id=\"e9c22c20a0ots\">通过VNC方式登录ECS实例。</p><p id=\"c5fdfbc1a0muv\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"c5fdfbc2a0njl\"><p id=\"c5fdfbc3a0uxl\">执行如下命令，查找liblz4.so.1.7.5文件。</p><pre id=\"c5fdfbc4a02tf\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>find / -name \"liblz4*\"</code></pre><p id=\"c5fdfbc5a01sc\">如果不存在liblz4.so.1.7.5文件，将其他正常ECS实例中的liblz4.so.1.7.5文件拷贝到该ECS实例<code data-tag=\"code\" class=\"code\">/usr/lib64/</code>中。</p></li><li id=\"c5fdfbc6a0mj8\"><p id=\"c5fdfbc7a0uv0\">执行以下命令，创建软链接。</p><pre id=\"c5fdfbc8a0f8k\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ln -s liblz4.so.1.7.5 liblz4.so.1</code></pre></li></ol></section><section id=\"823e130097gyd\" class=\"section\"><h3 id=\"7122531165w20\"><b>方法三：在云安全中心添加白名单</b></h3><p id=\"61f1080097qqm\">如果在一个本地客户端网络连接ECS服务器时多次输入错误的登录信息，会导致此IP远程登录ECS的请求被拦截。您可以在云安全中心的设置中，添加本地IP至白名单，这样就不会对本地IP远程登录此服务器进行拦截，具体操作如下： </p><ol data-spm-anchor-id=\"a2c4g.11186623.0.i4.366a7013FVyHX4\" class=\"ol\" id=\"ol-hya-c50-38s\"><li data-spm-anchor-id=\"\" class=\"li\" id=\"li-tax-4o7-s2z\"><p id=\"79ce7f70977so\">登录<a class=\"\" target=\"_blank\" href=\"https://yundun.console.aliyun.com/?p=sas\">云安全中心控制台</a>。</p></li><li data-spm-anchor-id=\"\" class=\"li\" id=\"li-58w-xyc-srr\"><p id=\"79ce7f7197s9q\">在左侧导航栏，选择<b>系统配置 &gt; 功能设置</b>。</p></li><li class=\"li\" id=\"li-r77-nk3-r3l\"><p id=\"79ce7f72976qb\">在<b>设置</b>页签的<b>其它配置</b>子页签，单击<b>安全管控</b>区域的<b>配置</b>，跳转至<b>安全管控</b>控制台。</p></li><li id=\"fd74838186ftx\"><p id=\"79ce7f7397yf5\">在左侧导航栏，选择<b>白名单管理 &gt; IP白名单</b>。</p></li><li id=\"0a9ac151863g6\"><p id=\"79ce7f7497ia9\">在<b>IP白名单</b>页面，单击<b>添加</b>。</p><p id=\"79ce7f7597vp7\">具体操作，请参见<a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/197302.htm#section-hma-ab3-i7i\">安全管控</a>。</p></li></ol></section><section id=\"9b6ce9a0979kx\" class=\"section\"><h3 id=\"71227a18658wu\"><b>方法四：检查本地网络</b></h3><p id=\"72518140901f5\">请使用其他网络环境测试网络是否连接正常，例如手机4G网络，查看是否可以正常登录。</p><p id=\"e962f37097thi\">若可以正常登录，说明是本地网络问题，请自行排查。</p></section></section><p id=\"c3c8cc40a0hx8\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-user-root-not-allowed-because-not-listed-in-error-occurs-when-you-log-on-to-a-linux-instance-by-using-ssh-commands", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>使用第三方SSH客户端登录Linux实例时，提示“Access denied”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用第三方SSH客户端登录Linux实例时，提示“Access denied”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-14 10:19:20</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"83a8ca10bdjs3\"><p data-tag=\"shortdesc\" id=\"e20596b0bdofd\" class=\"shortdesc\">本文介绍使用第三方SSH客户端登录Linux实例时，提示“Access denied”错误的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"f019b6f0bdn8h\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p data-spm-anchor-id=\"a2c4g.11186623.2.i3.72c58909qwjNAC\" id=\"83b0e062bdvro\">第三方SSH客户端登录Linux实例时，提示“Access denied”错误。执行<code data-tag=\"code\" class=\"code\">cat /var/log/secure</code>查看登录日志，发现会出现类似如下信息。</p><pre id=\"upo9ed\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Permission denied, please try again.\nUser test from 192.168.xxx.xxx not allowed because not listed in AllowUsers.\nUser test from 192.168.xxx.xxx not allowed because listed in DenyUsers.\nUser root from 192.168.xxx.xxx not allowed because a group is listed in DenyGroups.\nUser test from 192.168.xxx.xxx not allowed because none of user's groups are listed in AllowGroups.</code></pre></section><section id=\"f22b58e0bdc3n\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"83b10776bdzz7\">该问题通常是由于ECS实例内SSH远程登录配置文件（/etc/ssh/sshd_config）中启用了用户登录控制参数，对可登录用户进行限制所致，用户登录控制参数说明如下。</p><ul id=\"83b10777bdiar\"><li data-spm-anchor-id=\"a2c4g.11186623.2.i7.72c58909qwjNAC\" id=\"83b10778bdiym\"><p id=\"83b10779bdbr9\">AllowUsers：允许登录的用户白名单，只有该参数标注的用户可以登录。</p></li><li id=\"83b1077abd0ql\"><p id=\"83b1077bbdhbr\">DenyUsers：拒绝登录的用户黑名单，该参数标注的用户都拒绝登录。</p></li><li id=\"83b12e80bdile\"><p id=\"83b12e81bdhjl\">AllowGroups：允许登录的用户组白名单，只有该参数标注的用户组可以登录。</p></li><li data-spm-anchor-id=\"a2c4g.11186623.2.i10.72c58909qwjNAC\" id=\"83b12e82bdc75\"><p id=\"83b12e83bdzve\">DenyGroups：拒绝登录的用户组黑名单，该参数标注的用户组都拒绝登录。</p></li></ul><p id=\"83b12e85bdemr\">拒绝策略优先级高于允许策略，具体说明如下。</p><ul id=\"83b12e86bddyx\"><li id=\"83b12e87bd39t\"><p id=\"83b12e88bdgur\">如果AllowUsers和DenyUsers参数包含了同一个用户，因拒绝策略优先，所以该用户无法登录。</p></li><li id=\"83b12e89bdfgu\"><p id=\"83b12e8abdvqg\">如果AllowUsers中的用户在DenyGroups用户组中，因拒绝策略优先，所以该用户无法登录。</p></li></ul></section><section id=\"6f919780bdlxc\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p data-spm-anchor-id=\"a2c9r.12641768.0.i2.5b155e3b2X1BM4\" id=\"83b15599bdbn9\">您可以修改SSH远程登录配置文件（/etc/ssh/sshd_config）中用户登录控制参数，以解决该问题。</p><ol id=\"83b1559abd51a\"><li id=\"83b1559bbd698\"><p id=\"614363c585v20\">以VNC方式登录ECS实例。</p><p id=\"95451f1097rpc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"83b17ca1bd2w3\"><p id=\"83b17ca2bdsji\">执行如下命令，查看sshd_config文件。 </p><pre data-tag=\"codeblock\" id=\"83a8ca11bdy9n\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/ssh/sshd_config</code></pre><p id=\"83b17ca3bd45i\"> 系统显示类似如下，表示拒绝test用户登录。 </p><pre data-tag=\"codeblock\" id=\"83a8ca12bds9s\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>AllowUsers root test\nDenyUsers test\nDenyGroups test\nAllowGroups root</code></pre></li><li id=\"6144000485t3e\"><p id=\"cf46f99097n4k\">修改用户登录控制参数。</p><ol id=\"d496fda1972v6\"><li id=\"d42eed0197e1n\"><p id=\"d735282097dh0\">打开SSH配置文件。</p><pre id=\"zdrxtw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vi /etc/ssh/sshd_config</code></pre></li><li id=\"d967717097zr0\"><p id=\"dfcd043097xj8\">根据业务需要，修改用户登录控制参数。</p><p id=\"cf218cf0bdvq3\">如下所示，在策略配置前添加<b>#</b>，取消用户访问控制，以确保相关用户能够正常登录。</p><pre data-tag=\"codeblock\" id=\"83a8ca13bdj92\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>#AllowUsers root test\n#DenyUsers test\n#DenyGroups test\n#AllowGroups root</code></pre></li><li id=\"6144271185czd\"><p id=\"9518115dbdg01\">按Esc键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存修改。</p></li></ol></li><li id=\"e9d97ee197kai\"><p id=\"4a875291bdx7f\">执行如下命令，重启SSH服务。 </p><pre id=\"6138b563850ez\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart sshd.service</code></pre></li><li id=\"ad1df621bdwjt\"><p id=\"4a875294bdehw\">重新登录Linux实例，确保可以正常登录。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-permission-denied-please-try-again-error-message-appears-when-i-log-on-to-a-linux-instance-as-the-root-user-by-using-ssh", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>通过SSH客户端登录Linux实例时提示“Permission denied, please try again”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过SSH客户端登录Linux实例时提示“Permission denied, please try again”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-21 14:05:18</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"6138b56085cml\"><p data-tag=\"shortdesc\" id=\"6142ee9085nuk\" class=\"shortdesc\">本文介绍通过SSH客户端登录Linux实例时，提示“Permission denied, please try again”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"e5bc677096kr3\" class=\"section\"><h2 id=\"n49mj\">问题描述</h2><p id=\"614315a685zub\">通过本地SSH客户端登录Linux系统的ECS实例时，即便输入了正确的密码，出现了类似如下的错误信息。</p><ul id=\"61433cb08558x\"><li id=\"61433cb185pqf\"><p id=\"61433cb285v7f\">Permission denied, please try again. </p></li><li id=\"61433cb585e2l\"><p id=\"61433cb685xtm\">SSH服务器拒绝了密码，请再试一次。</p></li></ul></section><section id=\"ea3df7f09661f\" class=\"section\"><h2 id=\"de5e1cd096278\"><b>问题原因</b></h2><p id=\"fda4663196d5l\">导致该问题可能有以下原因：</p><ul id=\"17c54882974pg\"><li id=\"17c548809789b\"><p id=\"15ed543097nkb\">ECS实例内禁用root用户登录：SSH服务对应配置文件<code data-tag=\"code\" class=\"code\">/etc/ssh/sshd_config</code>中的参数<code data-tag=\"code\" class=\"code\">PermitRootLogin</code>或<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>被设置为<code data-tag=\"code\" class=\"code\">no</code>。您可以参考<a title=\"\" class=\"xref\" href=\"#144ae4409775t\">禁止root用户登录引起问题的解决方法</a>解决。</p><ul id=\"2eb8e4b1e09m1\"><li id=\"2e342451e07mn\"><p id=\"2e342450e0ay5\"><code data-tag=\"code\" class=\"code\">PermitRootLogin</code>设置为<code data-tag=\"code\" class=\"code\">no</code>，表示禁用使用root用户登录。</p></li><li id=\"3fa79c30e07np\"><p id=\"3fa77520e0cvr\"><code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>设置为<code data-tag=\"code\" class=\"code\">no</code>，表示禁用使用密码方式登录，但是可以使用密钥方式登录。</p></li></ul></li><li id=\"2bf82e80970yf\"><p id=\"2bf8077097buv\">Linux系统启用了SELinux服务，导致root用户和普通用户无法登录。</p><p id=\"b57eb73097jfk\">执行<code data-tag=\"code\" class=\"code\">cat /var/log/secure</code>查看secure日志，若日志中包含<code data-tag=\"code\" class=\"code\">error: Could not get shadow infromation for root.</code>表示是启用了SELinux服务导致，您可以参考<a title=\"\" class=\"xref\" href=\"#17cc42d097g5i\">SELinux服务引起问题的解决方法</a>解决。</p></li></ul></section><section id=\"144ae4409775t\" class=\"section\"><h2 id=\"AywdZ\"><b> 禁止root用户登录引起问题的解决方法</b></h2><ol id=\"614363c385yye\" start=\"1\"><li id=\"614363c485wd9\"><p id=\"614363c585v20\">以VNC方式登录ECS实例。</p><p id=\"95451f1097rpc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"61438ad1853a1\"><p id=\"bbe434d097yzr\">查看<code data-tag=\"code\" class=\"code\">/etc/ssh/sshd_config</code>的参数<code data-tag=\"code\" class=\"code\">PermitRootLogin</code>或<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>配置。</p><pre id=\"6138b56285iv3\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/ssh/sshd_config</code></pre><p id=\"c59c750097zgi\">如下图所示，<code data-tag=\"code\" class=\"code\">PermitRootLogin</code>和<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>参数设置为<code data-tag=\"code\" class=\"code\">no</code>，表示禁止root用户登录，也禁止以密码方式登录。</p><img id=\"c91918a097jgv\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6064502861/p551883.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li><li id=\"6144000485t3e\"><p id=\"cf46f99097n4k\">根据业务需要，修改<code data-tag=\"code\" class=\"code\">PermitRootLogin</code>和<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>参数配置。</p><ol id=\"d496fda1972v6\"><li id=\"d42eed0197e1n\"><p id=\"d735282097dh0\">打开SSH配置文件。</p><pre id=\"zdrxtw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vi /etc/ssh/sshd_config</code></pre></li><li id=\"d967717097zr0\"><p id=\"dfcd043097xj8\">修改<code data-tag=\"code\" class=\"code\">PermitRootLogin</code>和<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>参数值配置。</p><ul id=\"e069f001e0srz\"><li id=\"df4c7211e0ea9\"><p id=\"df4c7210e005w\">如果需要root用户登录，请将<code data-tag=\"code\" class=\"code\">PermitRootLogin</code>参数值设置为<code data-tag=\"code\" class=\"code\">yes</code>。</p></li><li id=\"f38328a1e0g24\"><p id=\"f4543440e0t4q\">如果需要密码方式登录，请将<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>参数值设置为<code data-tag=\"code\" class=\"code\">yes</code>。</p><img id=\"e2a85ec097fks\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6064502861/p551885.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li></ul></li><li id=\"6144271185czd\"><p id=\"ea70199097pk4\">按Esc键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存修改。</p></li></ol></li><li id=\"e9d97ee197kai\"><p id=\"e9d97ee097ycl\">执行如下命令，重启SSH服务。 </p><pre id=\"6138b563850ez\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart sshd.service</code></pre></li></ol></section><section id=\"17cc42d097g5i\" class=\"section\"><h2 id=\"61444e20851bw\"><b>SELinux服务引起问题的解决方法</b></h2><p id=\"61444e2285h7s\">您可以根据实际情况，选择临时或永久关闭SELinux服务解决SSH连接异常问题。</p><section id=\"1dc705d097vz0\" class=\"section\"><h3 data-tag=\"h4\" id=\"61444e238570i\" class=\"h4\"><b>检查SELinux服务状态</b></h3><ol id=\"61444e2485x90\" start=\"1\"><li id=\"61444e2585h3t\"><p id=\"1996699197c9l\">以VNC方式登录ECS实例。</p><p id=\"1996699297h24\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"1b75b0e1971jy\"><p id=\"1b75b0e097wbs\">执行如下命令，查看当前SELinux服务状态。 </p><pre id=\"6138b56485h0x\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>/usr/sbin/sestatus -v </code></pre><p id=\"6144753085rew\"> 系统显示类似如下。 </p><pre id=\"6138b56585wra\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>SELinux status:       enabled</code></pre><div type=\"note\" id=\"1da05e1185asz\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"2019264085vqx\">SELinux status参数值说明如下：</p><ul id=\"3c9ddea185c52\"><li id=\"3c9db790857du\"><p id=\"2e37f4e085zno\"> enabled：SELinux服务处于开启状态。</p></li><li id=\"3c9db79185rk5\"><p id=\"31bcfcf085d69\"> disabled：SELinux服务处于关闭状态。</p></li></ul></div></div></li></ol></section><section id=\"221948f097bnp\" class=\"section\"><h3 data-tag=\"h4\" id=\"614475358535k\" class=\"h4\"><b>临时关闭SELinux服务</b></h3><div id=\"19ac461097n9h\" type=\"important\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"15eec8e097chl\"><b>临时关闭SELinux服务</b>重启后会失效。</p></div></div><ol id=\"4aa0e2e097t1i\" start=\"1\"><li id=\"4aa0e2e197kfe\"><p id=\"4aa0e2e297n4f\">以VNC方式登录ECS实例。</p><p id=\"4aa0e2e397s9y\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"4aa0e2e497o23\"><p id=\"4aa0e2e5974w6\">执行如下命令，临时关闭SELinux。</p><pre id=\"6138b56685adm\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>setenforce 0</code></pre></li></ol></section><section id=\"26a3b310973xp\" class=\"section\"><h3 id=\"fb315d74\"><b> 永久关闭SELinux服务</b></h3><ol id=\"53d5e95097z3n\" start=\"1\"><li id=\"53d5e95197dm8\"><p id=\"53d5e95297tqd\">以VNC方式登录ECS实例。</p><p id=\"53d5e95397rgy\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"53d5e95497lbf\"><p id=\"53d5e955976l7\">执行如下命令，永久关闭SELinux服务。</p><pre id=\"6138b56785yhn\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sed -i 's/SELINUX=enforcing/SELINUX=disabled/' /etc/selinux/config</code></pre><div id=\"2ae0e030979pp\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"1f879a3097vf6\">此命令只适用当前SELinux服务为<code data-tag=\"code\" class=\"code\">enforcing</code>状态时使用。</p></div></div></li><li id=\"82e3331097u2g\"><p id=\"82e30c0097xqf\">重启实例使设置生效，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li></ol></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-instance-via-remote-desktop-connection-failure-but-not-error-message", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例失败但没有错误提示怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例失败但没有错误提示怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-09 14:05:33</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"0e713d20a10bk\"><p data-tag=\"shortdesc\" id=\"0e755bd7a16h2\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例失败，但没有错误提示的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"911e7490a1o92\" class=\"section\"><h2 id=\"exXXW\">问题描述</h2><p id=\"0e755bd8a18nc\">使用本地电脑通过远程桌面连接工具登录Windows系统的ECS实例失败，但没有错误提示。</p></section><section id=\"92b9d510a196f\" class=\"section\"><h2 id=\"zNPHa\">问题原因</h2><p id=\"0e755bd9a13ia\">可能是由于Windows系统的ECS实例未开启远程桌面连接权限，导致通过远程桌面连接Windows ECS实例失败。</p></section><section id=\"95c5b580a19wj\" class=\"section\"><h2 id=\"pRFhT\">解决方案</h2><p data-spm-anchor-id=\"a2c9r.12641779.0.i4.120aDgcgDgcg8K\" id=\"wcDHG\">下列操作以Windows Server 2012 R2 64位操作系统为例，其它版本的操作系统的配置可能有所差异，具体情况请参考相应操作系统的官方文档。</p><ol id=\"0e755be4a14a1\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i9.61ac5e3bxgDHR6\" id=\"0e755be5a1gz7\"><p id=\"8ce939e1a1a0i\">通过VNC连接Windows实例。</p><p id=\"8ce939e2a1ws7\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"dfd540e1a1o4y\"><p id=\"dfd540e2a1fwy\">单击<img id=\"dfd540e3a16bz\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530260.png\" alt=\"win2012开始图标\" placement=\"inline\" width=\"25\" height=\"25\" class=\"image inline\">图标，右键单击<b data-tag=\"uicontrol\" id=\"ab5d13c2a3hvt\" class=\"uicontrol\">这台电脑</b>，然后单击<b data-tag=\"uicontrol\" id=\"ab5d13c4a38jx\" class=\"uicontrol\">属性</b>。 <img placement=\"break\" alt=\"win2012开始\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530290.png\" id=\"dfd540e4a1o3m\" width=\"400\" class=\"image break\"></p></li><li id=\"dfd540e5a1c0x\"><p id=\"dfd540e6a1ves\">在<b data-tag=\"uicontrol\" id=\"ab5d13c9a3j4b\" class=\"uicontrol\">控制面板主页</b>上，单击<b data-tag=\"uicontrol\" id=\"ab5d13cba3bi4\" class=\"uicontrol\">远程设置</b>。</p><img width=\"700\" placement=\"break\" alt=\"win2012远程设置\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530325.png\" id=\"4af03741a77ro\" class=\"image break\"></li><li id=\"dfd540e8a1tdf\"><p id=\"dfd540e9a1boc\">在<b data-tag=\"uicontrol\" id=\"ab5d13d0a3kkr\" class=\"uicontrol\">远程</b>页签下，选中<b data-tag=\"uicontrol\" id=\"ab5d13d2a3cwz\" class=\"uicontrol\">允许远程连接到此计算机 </b>，单击<b data-tag=\"uicontrol\" id=\"ab5d13d4a313j\" class=\"uicontrol\">应用</b>，然后单击<b data-tag=\"uicontrol\" id=\"ab5d13d6a3p4z\" class=\"uicontrol\">确定</b>。<img width=\"400\" placement=\"break\" alt=\"123\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9642225761/p554369.png\" id=\"ee9933b0a1atj\" class=\"image break\"></p></li><li id=\"0e7582e4a153h\"><p id=\"0e7582e5a1mbo\">配置完成后，您可以重新尝试远程连接该服务器。</p></li></ol></section><section id=\"97722d00a17n8\" class=\"section\"><h2 data-spm-anchor-id=\"a2c9r.12641779.0.i4.120aDgcgDgcg8K\" id=\"KZTyN\">相关文档</h2><p data-spm-anchor-id=\"a2c9r.12641779.0.i4.120aDgcgDgcg8K\" id=\"0e7582e6a1yol\">若您遇到其他无法远程连接Windows实例的情况，可参见以下文档进行处理：</p><ul id=\"0e7582e7a1ybi\"><li data-spm-anchor-id=\"a2c9r.12641779.0.i4.120aDgcgDgcg8K\" id=\"0e7582e8a173q\"><p id=\"0e7582e9a1d6w\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/windows-instance-via-remote-desktop-connection-prompt-remote-connection-need-computer-network-level-authentication\">通过远程桌面连接Windows实例提示“远程连接计算机需要网络级别身份验证”怎么办?</a></p></li><li data-spm-anchor-id=\"a2c9r.12641779.0.i4.120aDgcgDgcg8K\" id=\"0e7582eaa1h7d\"><p id=\"0e7582eba1r0x\"><a title=\"\" class=\"xref\" href=\"/zh/simple-application-server/support/the-error-message-an-authentication-error-has-occurred-the-function-requested-is-not-supported-appears\">远程连接Windows服务器提示“身份验证错误，要求的函数不受支持”的错误</a></p></li><li data-spm-anchor-id=\"a2c9r.12641779.0.i4.120aDgcgDgcg8K\" id=\"0e7582eca1l25\"><p id=\"0e7582eda1pbe\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-start-network-interface-controller-in-windows\">远程连接Windows服务器失败且无法Ping该服务器的公网IP地址</a></p></li><li data-spm-anchor-id=\"a2c9r.12641779.0.i4.120aDgcgDgcg8K\" id=\"0e7582eea1hlm\"><p id=\"0e7582efa1bkz\"><a title=\"\" class=\"xref\" href=\"/zh/simple-application-server/support/a-timeout-error-occurs-when-i-connect-to-a-server-deployed-outside-the-chinese-mainland\">远程连接非中国内地的轻量应用服务器提示连接超时</a></p></li></ul></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-no-supported-key-exchange-algorithms-error-occurs-when-you-log-on-to-a-linux-instance-by-using-ssh-commands", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>无法远程连接Linux系统的ECS实例，提示“error: Unable to load host key: /etc/ssh/ssh_host_rsa_key”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>无法远程连接Linux系统的ECS实例，提示“error: Unable to load host key: /etc/ssh/ssh_host_rsa_key”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:41:36</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"d929d740abck1\"><p data-tag=\"shortdesc\" id=\"d9337434abeqc\" class=\"shortdesc\">本文主要介绍远程连接Linux系统的ECS实例，提示“error: Unable to load host key: /etc/ssh/ssh_host_rsa_key”错误的原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"3ca008d0cdng0\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"d9337438abg6h\">使用SSH方式无法连接Linux系统的ECS实例，通过VNC登录实例后，执行<code data-tag=\"code\" class=\"code\">cat var/log/secure</code>或<code data-tag=\"code\" class=\"code\">cat var/log/message</code>查看<code data-tag=\"code\" class=\"code\">secure</code>或<code data-tag=\"code\" class=\"code\">message</code>日志，出现类似如下错误信息。</p><pre id=\"ou78xu\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>error: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nerror: @ WARNING: UNPROTECTED PRIVATE KEY FILE! @\nerror: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nerror: Permissions 0777 for '/etc/ssh/ssh_host_rsa_key' are too open.\nerror: It is required that your private key files are NOT accessible by others.\nerror: This private key will be ignored.\nerror: Unable to load host key \"/etc/ssh/ssh_host_rsa_key\": bad permissions\n error: Unable to load host key: /etc/ssh/ssh_host_rsa_key</code></pre><pre id=\"c5rrdx\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>error: Unable to load host key \"/etc/ssh/ssh_host_rsa_key\": invalid format\nerror: Unable to load host key \"/etc/ssh/ssh_host_rsa_key\": invalid format\nerror: Unable to load host key: /etc/ssh/ssh_host_rsa_key\nerror: Unable to load host key \"/etc/ssh/ssh_host_ecdsa_key\": invalid format\nerror: Unable to load host key \"/etc/ssh/ssh_host_ecdsa_key\": invalid format\nerror: Unable to load host key: /etc/ssh/ssh_host_ecdsa_key</code></pre></section><section id=\"8f06b330cdu7g\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"d9339b4dabhoi\">该问题可能的由于ECS实例中SSH服务相关的密钥文件异常，导致sshd守护进程不能加载到正确的SSH密钥。常见密钥文件异常情况如下：</p><ul id=\"d933c253abemh\"><li id=\"d933c254abis5\"><p id=\"845c4ad0cdkge\">相关密钥文件权限配置异常，导致无法正常读取。</p><p id=\"a7a22370cdhqg\">例如，私钥文件默认权限是600，如果配置成777等其他权限，导致其他用户也有读取或修改权限。此时，SSH服务会认为该配置存在安全风险，导致连接失败。</p></li><li id=\"83ffabe1cdtdi\"><p id=\"83ffabe0cdl28\">相关密钥文件异常，例如文件损坏、被删除或篡改等。</p></li></ul></section><section id=\"c30d3c30cdijh\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"9036f5d0cdtnf\">您可以通过修改SSH服务相关的密钥权限或修复密钥文件来解决此问题。</p><ol id=\"1b0e5362cdugw\"><li id=\"1b0e5360cdt26\"><p id=\"19fc2010cdad2\">以VNC方式远程连接ECS实例。</p><p id=\"558a9780cbi7p\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"1f711140cd86m\"><p id=\"1f70ea30cdgj6\">执行如下命令，查看SSH服务的公钥与密钥文件。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"c55c09f4cbleu\" class=\"pre codeblock language-plaintext\"><code>ls -l /etc/ssh</code></pre><ul id=\"cb6b70f1cb4gy\"><li id=\"c9937ca1cb5rc\"><p id=\"c55c09f5cbk87\">如果系统显示如下信息，说明公钥与密钥文件丢失，请执行步骤<a title=\"\" class=\"xref\" href=\"#dc7fe480cdpv5\">4</a>。</p><img id=\"63a83940cd0qe\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0525500861/p611419.png\" alt=\"密钥文件丢失\" placement=\"break\" class=\"image break\"></li><li id=\"d16633f1cbeb5\"><p id=\"d16633f0cb3lf\">如果系统显示如下信息，公钥与密钥文件权限为777，并且文件大小为0，说明文件存在异常，请执行步骤<a title=\"\" class=\"xref\" href=\"#687e5261cdnzb\">3</a>。</p><div type=\"note\" id=\"5b1890e1ceuqx\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"5b1890e0ce9hv\">权限异常并非是777时才是异常，当权限超过默认权限时，都会出现报错。</p></div></div><img id=\"c8caaf70cdl1u\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0525500861/p611409.png\" alt=\"查看密钥权限\" placement=\"break\" class=\"image break\"></li></ul></li><li id=\"687e5261cdnzb\"><p id=\"687e5260cdkyz\">执行如下命令，恢复相关密钥文件的默认权限。 </p><div id=\"d003bfb0cegns\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"cd3cfe90cepel\">不同Linux发行版本中，密钥权限可能不同，你可以参考相同Linux发行版本中密钥权限进行修改。</p></div></div><pre id=\"af6cvz\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>cd /etc/ssh/\nsudo chmod 600 ssh_host_*\nsudo chmod 644 *.pub</code></pre></li><li id=\"dc7fe480cdpv5\"><p id=\"dc7fbd70cde4m\">执行如下命令，重启SSH服务。</p><p id=\"fbac47d0cdxzc\">重启SSH服务时，将会自动生成相关密钥文件。</p><pre id=\"71u6sd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sudo systemctl restart sshd.service </code></pre></li><li id=\"95feaff1cbshz\"><p id=\"95feaff0cbtc5\">执行如下命令，确认已生成密钥相关文件。</p><pre id=\"849egx\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls -l /etc/ssh</code></pre><img id=\"606e0af0cd7my\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0525500861/p611439.png\" alt=\"查看密钥\" placement=\"break\" class=\"image break\"></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-error-message-remote-desktop-cannot-verify-the-identity-of-the-remote-computer-appears-when-i-connect-to-a-window-instance-from-a-mac-device", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过Mac系统的远程桌面连接Windows实例，提示“远程桌面连接无法验证您希望连接的计算机的身份”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过Mac系统的远程桌面连接Windows实例，提示“远程桌面连接无法验证您希望连接的计算机的身份”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:42:21</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"177d8fb0a1w4y\"><p id=\"17813938a1ykg\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍通过Mac系统的远程桌面连接Windows实例时，提示“远程桌面连接无法验证您希望连接的计算机的身份。”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"68fe46e0a10y9\" class=\"section\"><h2 id=\"h2-u95EEu9898u63CFu8FF0\">问题描述</h2><p id=\"1781393da1i6d\">使用Mac系统的远程桌面连接Windows ECS实例时，系统提示“<b data-tag=\"uicontrol\" id=\"185909ffa3qck\" class=\"uicontrol\">远程桌面连接无法验证您希望连接的计算机的身份。</b>”错误。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9528665761/p518731.png\" class=\"image break\"></section><section id=\"6b0169e0a10e0\" class=\"section\"><h2 id=\"WyxXz\">问题原因</h2><p id=\"17813941a1lu5\">在Windows系统的ECS实例内，计算机安全组策略配置不正确，导致使用Mac系统的远程桌面无法远程连接Windows系统的ECS实例。</p></section><section id=\"6f4ad360a1xcs\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><ol id=\"6022f22296h99\"><li id=\"6022f220962lc\"><p id=\"c2014c2096789\">通过VNC连接Windows实例。</p><p id=\"c57b57b096bk4\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"6158da11969zv\"><p id=\"6158da1096hw2\">右键单击<img id=\"ad6f63e1a3nej\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530260.png\" alt=\"win2012开始图标\" placement=\"inline\" width=\"25\" height=\"25\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"ac257ec2a33sn\" class=\"uicontrol\">运行</b>，输入<code data-tag=\"code\" class=\"code\">gpedit.msc</code>命令，打开<b data-tag=\"uicontrol\" id=\"ac257ec3a3r1c\" class=\"uicontrol\">本地组策略编辑器</b><b>。</b></p></li><li id=\"8d4d722196rka\"><p id=\"8d4d722096zo5\">在<b data-tag=\"uicontrol\" id=\"18595815a399k\" class=\"uicontrol\">本地组策略编辑器</b>窗口，选择<b data-tag=\"uicontrol\" id=\"18595817a33u0\" class=\"uicontrol\">计算机配置 &gt; 管理模板 &gt; Windows 组件 &gt; 远程桌面服务 &gt; 远程桌面会话主机 &gt; 安全</b>。</p></li><li id=\"1e5855f1969xn\"><p id=\"1cb5063096v5y\">在<b data-tag=\"uicontrol\" id=\"1859581ba3ksw\" class=\"uicontrol\">安全</b>目录中，双击<b data-tag=\"uicontrol\" id=\"1859581da3e0o\" class=\"uicontrol\">远程（RDP）连接要求使用指定的安全层</b>。 </p><img width=\"500\" placement=\"break\" alt=\"111\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p551393.png\" id=\"67945a2096vzq\" class=\"image break\"></li><li id=\"8cd4551196ix0\"><p id=\"8d3a1bc096sjk\">在弹出对话框中选择<b data-tag=\"uicontrol\" id=\"18595823a39rl\" class=\"uicontrol\">已启用</b> ，在<b data-tag=\"uicontrol\" id=\"18595825a3dhs\" class=\"uicontrol\">安全层</b>选项中选择<b data-tag=\"uicontrol\" id=\"18595827a3oj1\" class=\"uicontrol\">RDP</b>，单击<b data-tag=\"uicontrol\" id=\"18595829a3606\" class=\"uicontrol\">确定</b>。<img width=\"500\" placement=\"break\" alt=\"222\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p551395.png\" id=\"05273ff1966mu\" class=\"image break\"></p></li><li id=\"06857061968oo\"><p id=\"1667c0f096ncr\">执行以下命令，完成策略更新，使以上的设置生效。</p><ol id=\"1cece9a196uu4\"><li id=\"1ca77c3196lvp\"><p id=\"23fdfea096pt1\">右键单击<img placement=\"inline\" id=\"23fdfea1961dx\" width=\"25\" alt=\"Dingtalk_20210510142550.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"18597f23a3y0d\" class=\"uicontrol\">运行</b>，输入<code data-tag=\"code\" class=\"code\">cmd</code>命令，打开命令行。</p></li><li id=\"5725d9b1965c4\"><p id=\"63611b4096c0f\">执行<code data-tag=\"code\" class=\"code\">gpupdate</code>命令，完成策略更新。</p><p id=\"72b4724096vc7\">系统显示类似如下图。</p><img id=\"88b6c111969c1\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p518787.png\" alt=\"\" width=\"340\" class=\"image break\"></li></ol></li><li id=\"935e434196zr5\"><p id=\"984e741096kvh\">重新进行远程连接，确认问题已经修复。</p></li></ol></section><p id=\"5a258c30a13xt\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-instance-via-remote-desktop-connection-prompt-remote-connection-need-computer-network-level-authentication", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例提示“远程连接计算机需要网络级别身份验证”怎么办?</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例提示“远程连接计算机需要网络级别身份验证”怎么办?</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-09 14:04:21</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"73f14110a1z8q\"><div data-tag=\"conbody\" class=\"conbody\"><section id=\"5d5919a0a1kww\" class=\"section\"><p id=\"73f4ea97a1oli\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows系统的ECS实例提示“远程连接计算机需要网络级别身份验证”错误的解决方案。</p><section id=\"10f7d650a1eqp\" class=\"section\"><h2 id=\"esWHw\" data-spm-anchor-id=\"a2c9r.14518950.0.i0.239b3611z9pfNq\">问题描述</h2><p id=\"73f4ea98a183x\">使用远程桌面连接工具登录Windows系统的ECS实例失败，并提示“<b data-tag=\"uicontrol\" id=\"143cff04a26qo\" class=\"uicontrol\">远程连接计算机需要网络级别身份验证</b>”的报错，如下图所示。</p><img id=\"0f2897a1a2m5e\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1069235761/p554120.png\" alt=\"3\" placement=\"break\" width=\"650\" class=\"image break\"></section><section id=\"0dc4e5e0a1bo0\" class=\"section\"><h2 id=\"awbWT\">问题原因</h2><p id=\"73f4ea99a152k\">本地Windows主机的远程桌面连接工具版本过低，导致远程连接失败。</p></section><section id=\"0bb69f50a1n18\" class=\"section\"><h2 id=\"aRQkT\" data-spm-anchor-id=\"a2c9r.14518950.0.i1.239b3611z9pfNq\">解决方案</h2><p id=\"73f511a6a1o27\">下列操作以Windows Server 2012 R2 64位操作系统为例，其它版本的操作系统的配置可能有所差异，具体情况请参考相应操作系统的官方文档。</p><ol id=\"44a6eef295tg7\"><li id=\"44a6eef39505o\"><p id=\"e2e5581196q2o\">通过VNC连接Windows实例。</p><p id=\"e2e55812964p4\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"44a6eef695wki\"><p id=\"44a6eef795x1b\">单击<img height=\"25\" width=\"25\" placement=\"inline\" alt=\"win2012开始图标\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530260.png\" id=\"44a6eef895p2q\" class=\"image inline\">图标，右键单击<b data-tag=\"uicontrol\" id=\"143d4d24a2tuo\" class=\"uicontrol\">这台电脑</b>，然后单击<b data-tag=\"uicontrol\" id=\"143d4d26a2nxw\" class=\"uicontrol\">属性</b>。</p><img width=\"400\" id=\"1191f681a2asv\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530290.png\" alt=\"win2012开始\" placement=\"break\" class=\"image break\"></li><li id=\"44a6eefa95054\"><p id=\"44a6eefb95f80\">在<b data-tag=\"uicontrol\" id=\"143d4d2ca2eg2\" class=\"uicontrol\">控制面板主页</b>上，单击<b data-tag=\"uicontrol\" id=\"143d4d2ea2vcs\" class=\"uicontrol\">远程设置</b>。</p><img id=\"15e63571a2omt\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530325.png\" alt=\"win2012远程设置\" placement=\"break\" width=\"700\" class=\"image break\"></li><li id=\"44a6eefd9586l\"><p id=\"44a6eefe95231\">在<b data-tag=\"uicontrol\" id=\"143d7433a2bpg\" class=\"uicontrol\">远程</b>页签下，取消选中<b data-tag=\"uicontrol\" id=\"143d7435a2e4f\" class=\"uicontrol\">仅允许运行使用网络级别身份验证的远程桌面的计算机连接（建议） </b>，然后单击<b data-tag=\"uicontrol\" id=\"143d7437a2vnr\" class=\"uicontrol\">确定</b>。</p><img width=\"400\" id=\"191b6fd1a2dsy\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530330.png\" alt=\"win2012取消勾选\" placement=\"break\" class=\"image break\"></li><li id=\"3e0a1691a1m3t\"><p id=\"3f908f80a1ir0\">配置完成后，您可以重新尝试远程连接该服务器。</p></li></ol></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/there-is-a-problem-with-your-license-for-remote-desktop-and-the-session-will-end-in-60-minutes", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows系统的ECS实例提示“你的远程桌面许可证出现问题，您的会话将在60分钟后断开连接。”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows系统的ECS实例提示“你的远程桌面许可证出现问题，您的会话将在60分钟后断开连接。”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:44:21</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"3e1f3c50a1e0e\"><p data-tag=\"shortdesc\" id=\"3e270484a1jam\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows系统的ECS实例时，提示“你的远程桌面许可证出现问题，您的会话将在60分钟后断开连接。”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"7ddb8000a1n40\" class=\"section\"><h2 id=\"3e270489a10m0\">问题描述</h2><p id=\"3e27048aa1zsv\">重启Windows系统的ECS实例之后，通过远程桌面连接实例时提示如下错误。</p><img height=\"176\" width=\"600\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6658415761/p519725.png\" id=\"8f02f571a2xdq\" class=\"image break\"></section><section id=\"7ffe38f0a1h10\" class=\"section\"><h2 id=\"3e272b91a1a0p\">问题原因</h2><p id=\"3e272b92a1hpe\">Windows系统的ECS实例的本地组策略编辑器中“<b data-tag=\"uicontrol\" id=\"7c429d22a2x4y\" class=\"uicontrol\">指定 RD 会话主机服务器的授权模式</b>”的选项设置不为<b data-tag=\"uicontrol\" id=\"7c429d24a2zi2\" class=\"uicontrol\">按设备</b>模式。</p></section><section id=\"843ca5f0a1hgj\" class=\"section\"><h2 id=\"3e272b94a1l9w\">解决方案</h2><ol id=\"3e2752a1a1ec3\"><li data-spm-anchor-id=\"a2c9r.12641768.0.i0.3dac77dx77dx5A\" id=\"3e2752a2a1lik\"><p id=\"90c2fa40a15k8\">通过VNC连接Windows实例。</p><p id=\"9b556dd0a1xfc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li data-spm-anchor-id=\"0.0.0.i11.7c805KY05KY0oL\" id=\"3e2752a4a1b19\"><p id=\"3a22da01a1fpy\">进入<b data-tag=\"uicontrol\" id=\"7c429d2fa2uqa\" class=\"uicontrol\">本地组策略编辑器</b>窗口。</p><ol id=\"3a22da02a185k\"><li id=\"3a22da03a1wzg\"><p id=\"3a22da04a1uk9\">右键单击<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"3a22da05a19ez\" placement=\"inline\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"7c42c432a2wv5\" class=\"uicontrol\">运行</b>。</p></li><li id=\"3a22da06a1u2a\"><p id=\"3a22da07a130i\">在<b data-tag=\"uicontrol\" id=\"7c42c436a2ajy\" class=\"uicontrol\">运行</b>对话框中输入<code data-tag=\"code\" class=\"code\">gpedit.msc</code>，单击<b data-tag=\"uicontrol\" id=\"7c42c439a2ar4\" class=\"uicontrol\">确定</b>。</p></li></ol></li><li id=\"3e2752a6a1qws\"><p id=\"4a3bf200a1t1x\">在<b data-tag=\"uicontrol\" id=\"7c42c43da2ah9\" class=\"uicontrol\">本地组策略编辑器</b>窗口，依次单击<b data-tag=\"uicontrol\" id=\"7c42c43fa2rzd\" class=\"uicontrol\">计算机配置 &gt; 管理模板 &gt; Windows 组件 &gt; 远程桌面服务 &gt; 远程桌面会话主机 &gt; 授权</b>，然后双击<b data-tag=\"uicontrol\" id=\"7c42c441a2ezp\" class=\"uicontrol\">设置远程桌面授权模式</b>。</p><img width=\"600\" placement=\"break\" alt=\"1\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6658415761/p554013.png\" id=\"910d6b71a22xi\" class=\"image break\"></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i0.3dac77dx77dx5A\" id=\"3e2752a8a1olx\"><p id=\"3e2752a9a1o2e\">在<b data-tag=\"uicontrol\" id=\"7c42c446a2e13\" class=\"uicontrol\">设置远程桌面授权模式</b>窗口，选择<b data-tag=\"uicontrol\" id=\"7c42eb41a2570\" class=\"uicontrol\">已启用</b>，在<b data-tag=\"uicontrol\" id=\"7c42eb43a2vz6\" class=\"uicontrol\">指定 RD 会话主机服务器的授权模式</b>区域选择<b data-tag=\"uicontrol\" id=\"7c42eb45a2zo3\" class=\"uicontrol\">按设备</b>，单击<b data-tag=\"uicontrol\" id=\"7c42eb47a27ub\" class=\"uicontrol\">确定</b>。</p><img width=\"600\" placement=\"break\" alt=\"2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6658415761/p554016.png\" id=\"df14f6e1a2qh6\" class=\"image break\"></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-error-message-the-terminal-server-has-exceeded-the-maximum-number-of-allowed-connections-appears-when-i-connect-to-a-windows-instance-by-using-remote-desktop", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows系统的ECS实例时，提示“终端服务器超出了最大允许连接数”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows系统的ECS实例时，提示“终端服务器超出了最大允许连接数”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:44:08</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"45f9e740a1mfp\"><p data-tag=\"shortdesc\" id=\"45fd69b7a1npo\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows系统的ECS实例时，提示“终端服务器超出了最大允许连接数”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"6fd5d880a1lir\" class=\"section\"><h2 id=\"3210cfbd\"><b>问题描述</b></h2><p id=\"45fd69bca14yb\">通过远程桌面连接Windows系统的ECS实例时，提示“<b data-tag=\"uicontrol\" id=\"7e2893dba2usm\" class=\"uicontrol\">终端服务器超出了最大允许连接数</b>”错误。<img id=\"3e57ad00a1l38\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8418125761/p554312.png\" alt=\"121\" placement=\"break\" width=\"300\" class=\"image break\"></p></section><section id=\"6e2d0a80a1fj9\" class=\"section\"><h2 id=\"dbf5e67f\"><b>问题原因</b></h2><p id=\"45fd69bfa1oy7\">出现该问题的原因可能是由于目前默认的Windows系统为标准版，只能支持2个免费的远程桌面终端同时连接。</p></section><section id=\"6c252c90a1o0m\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"536b9860a7f09\">根据实际情况，选择对应方案进行操作。</p><section id=\"e7c379c0a7443\" class=\"section\"><h3 id=\"c7bc2a50a7yjr\"><b>方案一：（推荐）</b>登录Console控制台，注销当前用户后重新登录</h3><ol id=\"45fd69cca1q1k\"><li id=\"45fd69cda1jzm\"><p id=\"45fd69cea1v2h\">在本地电脑中，单击<b data-tag=\"uicontrol\" id=\"7e28baeca2cxx\" class=\"uicontrol\">开始 &gt; 运行</b>，输入<code data-tag=\"code\" class=\"code\">mstsc /admin</code>，直接登录Console控制台。</p><div type=\"note\" id=\"bb668001a61we\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"bb668000a6xhs\"><code data-tag=\"code\" class=\"code\">mstsc /admin</code>命令适用于Windows 7及以上系统版本。</p></div></div></li><li id=\"45fd90c5a1typ\"><p id=\"74a12121a1pmy\">通过VNC连接Windows实例。</p><p id=\"74a12122a1xy2\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"78070871a1iib\"><p id=\"78070870a18nr\">单击<b data-tag=\"uicontrol\" id=\"7e28e1fda2ie5\" class=\"uicontrol\">开始 &gt; 运行</b>，输入<code data-tag=\"code\" class=\"code\">taskmgr</code>命令，进入<b data-tag=\"uicontrol\" id=\"7e290901a23x1\" class=\"uicontrol\">任务管理器</b>窗口。</p></li><li id=\"fe185271a1d77\"><p id=\"fe185270a1sb8\">在<b data-tag=\"uicontrol\" id=\"7e290905a25wz\" class=\"uicontrol\">用户</b>页签下，选中已经连接的用户，单击<b data-tag=\"uicontrol\" id=\"db6f18c0a3q3f\" class=\"uicontrol\">注销</b>，然后重新登录该用户。</p><img id=\"ea25fad1a713k\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8860225761/p554340.png\" alt=\"122\" placement=\"break\" class=\"image break\"></li></ol></section><section id=\"f85a4d40a7q0t\" class=\"section\"><h3 id=\"eeeb7220a79cx\"><b>方案二：重启实例</b></h3><p id=\"fe789dd0a77qw\">您也可以通过重启Windows系统的ECS实例解决“<b data-tag=\"uicontrol\" id=\"ca765460a7pqp\" class=\"uicontrol\">终端服务器超出了最大允许连接数</b>”错误。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p><div type=\"warning\" id=\"1cc767d0a76d6\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"12f9a3d0a7hzl\">重启实例会造成您的实例停止工作，造成业务中断，请谨慎执行。建议您在重启前为云盘创建一份快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/an-authentication-error-has-occurred-the-requested-security-package-does-not-exist", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows系统的ECS实例提示“发生身份验证错误。要求的安全包不存在”错误怎么办?</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows系统的ECS实例提示“发生身份验证错误。要求的安全包不存在”错误怎么办?</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:44:34</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"bc11ae10a0pxm\"><p id=\"bc141f18a0tw7\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例时提示“发生身份验证错误。要求的安全包不存在”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"448e04a0a0yrq\" class=\"section\"><h2 id=\"wpJHw\">问题描述</h2><p id=\"bc141f1da0nrz\">通过远程桌面连接Windows系统的ECS实例提示“<b data-tag=\"uicontrol\" id=\"3ebbd516a2kxy\" class=\"uicontrol\">发生身份验证错误。要求的安全包不存在</b>”错误，具体显示如下图。</p><img id=\"1d504740a20qe\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1222235761/p555061.png\" alt=\"88a222264b6245d6c51933d991773ac4\" placement=\"break\" class=\"image break\"></section><section id=\"79373310a081j\" class=\"section\"><h2 id=\"ZTBKD\">问题原因</h2><p id=\"bc141f20a0p33\">Windows系统的ECS实例内关于远程桌面连接实例时身份验证的安全包缺失。</p></section><section id=\"7b566990a0r6i\" class=\"section\"><h2 id=\"eFzzn\">解决方案</h2><ol id=\"bc141f22a024z\"><li id=\"bc141f23a045w\"><p id=\"82adfd70a01za\">通过VNC连接Windows实例。</p><p id=\"82adfd71a01sr\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"9deec421a0c92\"><p id=\"9deec420a0dmg\">右键单击<img placement=\"inline\" id=\"44a7161295d4p\" width=\"25\" alt=\"Dingtalk_20210510142550.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"3ebc2334a2cgq\" class=\"uicontrol\">运行</b><b>。</b></p><img id=\"e9d35941a26kh\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5355605761/p553502.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li><li id=\"888a3bf1a0fzb\"><p id=\"888a3bf0a01w1\">在<b data-tag=\"uicontrol\" id=\"3ebc233ba2cjh\" class=\"uicontrol\">运行</b>中输入<code data-tag=\"code\" class=\"code\">gpedit.msc</code>，单击<b data-tag=\"uicontrol\" id=\"3ebc4a40a2sga\" class=\"uicontrol\">确定</b>。</p></li><li id=\"bc141f25a011v\"><p id=\"d722ee60a0anu\">在<b data-tag=\"uicontrol\" id=\"3ebc4a44a2hrj\" class=\"uicontrol\">本地组策略编辑器</b>窗口，依次单击<b data-tag=\"uicontrol\" id=\"3ebc4a46a2pq4\" class=\"uicontrol\">计算机配置 &gt; 管理模板 &gt; Windows 组件 &gt; 远程桌面服务 &gt; 远程桌面会话主机 &gt; 安全</b>，然后右键单击<b data-tag=\"uicontrol\" id=\"3ebc4a48a2bqd\" class=\"uicontrol\">要求使用网络级别的身份验证对远程连接用户进行身份验证</b>，选择<b data-tag=\"uicontrol\" id=\"3ebc4a4aa20a3\" class=\"uicontrol\">编辑</b>。</p><img id=\"e830ccd1a2uz9\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5355605761/p553506.png\" alt=\"113\" placement=\"break\" width=\"550\" class=\"image break\"></li><li id=\"bc141f27a00is\"><p id=\"bc141f28a0v1z\">在<b data-tag=\"uicontrol\" id=\"3ebc4a50a2m7k\" class=\"uicontrol\">要求使用网络级别的身份验证对远程连接用户进行身份验证</b>窗口，选中<b data-tag=\"uicontrol\" id=\"3ebc4a52a2hmz\" class=\"uicontrol\">已禁用</b>，单击<b data-tag=\"uicontrol\" id=\"3ebc4a54a21sc\" class=\"uicontrol\">确定</b>。</p><img id=\"e6d13cd1a2y3w\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4355605761/p553512.png\" alt=\"114\" placement=\"break\" width=\"550\" class=\"image break\"></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-instance-of-rpc-component-abnormal-how-to-solve", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>Windows实例的RPC组件异常如何解决？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例的RPC组件异常如何解决？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2022-11-02 10:39:46</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n\n      <main role=\"main\">\n         <article role=\"article\" aria-labelledby=\"title_t9f_aah_5ub\">\n            \n            <div class=\"body taskbody\" id=\"taskbody-ue4-s4r-6vg\">\n               <p class=\"shortdesc\">本文介绍Windows实例的RPC组件异常的解决办法。</p>\n               <section class=\"section context\" id=\"context-yw7-wog-x7x\">\n                  <div class=\"tasklabel\">\n                     <h2 class=\"sectiontitle tasklabel\" id=\"h2-url-1\">背景信息</h2>\n                  </div>Windows远程桌面服务底层依赖Windows操作系统的RPC组件。如果Windows实例的RPC组件异常，将导致远程桌面服务无法正常工作，用户也无法通过远程桌面RDP协议远程登录该Windows实例。\n               </section>\n               <section class=\"section\" id=\"section-tm3-ibu-8ec\">\n                  <h2 class=\"title sectiontitle\" id=\"title-m2y-kwt-ubf\">问题现象</h2>\n                  <p class=\"p\" id=\"p-0kc-e1j-2y1\">您可以在Windows操作系统的任务管理器中查看Windows实例的RPC组件状态，Windows实例的RPC组件正常运行时，对应的状态为<span class=\"ph uicontrol\" id=\"uicontrol-8ir-31p-7rw\">正在运行</span>。\n                  </p>\n                  <div class=\"p\" id=\"p-2yv-j6o-y1b\">如图所示，Windows实例的RPC组件状态为空，表示Windows实例的RPC组件异常。<img class=\"image break\" id=\"image-v7g-r94-3mz\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2126027661/p510186.png\" width=\"750\" alt=\"RPC服务异常\"></div>\n               </section>\n               <section class=\"section\" id=\"section-5kz-og3-tgq\">\n                  <h2 class=\"title sectiontitle\" id=\"title-c4b-aaf-ihu\">解决方案</h2>\n                  <div class=\"note important note-important\" id=\"note-36i-mk7-xdb\">\n                     <div class=\"note-icon-wrapper\"><i class=\"icon-note important\"></i></div>\n                     <div class=\"note-content\"><strong>重要</strong> \n                        <ul class=\"ul\" id=\"ul-d5a-6xz-482\">\n                           <li class=\"li\" id=\"li-8h6-16d-gs1\">如果您对实例或数据有修改、变更等风险操作，务必注意实例的容灾、容错能力，确保数据安全。建议您提前创建快照，快照相关信息，请参见<a href=\"/zh/ecs/user-guide/snapshot-overview#concept-qft-2zw-ydb\" title=\"\">快照概述</a>。\n                           </li>\n                           <li class=\"li\" id=\"li-s5y-26d-d8s\">如果您在阿里云平台授权或者提交过登录账号、密码等安全信息，建议您及时修改安全信息。</li>\n                        </ul>\n                     </div>\n                  </div>\n                  <h3 class=\"p h3\" id=\"p-hom-l3f-ysd\">方法一：使用系统盘快照修复Windows实例的RPC组件</h3>\n                  <p class=\"p\" id=\"p-8in-uog-nwm\">如果您在Windows实例的RPC组件正常运行期间创建了系统盘快照，则可以使用系统盘快照修复Windows实例的RPC组件。具体操作，请参见<a href=\"/zh/ecs/user-guide/roll-back-a-disk-by-using-a-snapshot#concept-smh-y2l-xdb\" title=\"\">使用快照回滚云盘</a>。\n                  </p>\n                  <h3 class=\"p h3\" id=\"p-h34-2nb-od6\">方法二：初始化系统盘修复Windows实例的RPC组件</h3>\n                  <p class=\"p\" id=\"p-qoj-63r-x2i\">您可以在ECS控制台上重新初始化该Windows实例的系统盘。重新初始化后，系统盘会恢复到创建时的状态，Windows实例的RPC组件也会恢复正常。具体操作，请参见<a href=\"/zh/ecs/user-guide/re-initialize-a-system-disk#concept-stg-xd3-ydb\" title=\"\">重新初始化系统盘</a>。\n                  </p>\n                  <div class=\"note important note-important\" id=\"note-vxm-3dh-hlw\">\n                     <div class=\"note-icon-wrapper\"><i class=\"icon-note important\"></i></div>\n                     <div class=\"note-content\"><strong>重要</strong> 初始化系统盘后，Windows实例的系统盘数据会丢失。您可以在操作前为系统盘创建快照，待系统盘初始化后，再使用该快照创建云盘并挂载到Windows实例上，即可获取原系统盘数据。\n                        <ul class=\"ul\" id=\"ul-ovl-3oc-wfx\">\n                           <li class=\"li\" id=\"li-bpj-0wp-4b5\">创建快照的操作，请参见<a href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk#concept-eps-gbl-xdb\" title=\"\">创建一个云盘快照</a>。\n                           </li>\n                           <li class=\"li\" id=\"li-15v-whq-980\">使用快照创建云盘的操作，请参见<a href=\"/zh/ecs/user-guide/create-a-disk-from-a-snapshot#concept-yyn-11b-ydb\" title=\"\">使用快照创建云盘</a>。\n                           </li>\n                           <li class=\"li\" id=\"li-ifd-ejv-qua\">挂载云盘的操作，请参见<a href=\"/zh/ecs/user-guide/attach-a-data-disk#concept-llz-b4c-ydb\" title=\"\">挂载数据盘</a>。\n                           </li>\n                        </ul>\n                     </div>\n                  </div>\n               </section>\n            </div>\n         </article>\n      </main>\n   \n\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-can-log-on-to-a-windows-instance-by-using-vnc-but-cannot-use-remote-desktop-to-connect-to-the-windows-instance-with-the-same-account-and-password", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>使用相同的账号和密码，通过VNC登录Windows实例成功，通过远程桌面连接Windows实例却失败怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用相同的账号和密码，通过VNC登录Windows实例成功，通过远程桌面连接Windows实例却失败怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:45:39</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"9bdf3e30a6uhl\"><p data-tag=\"shortdesc\" id=\"9be4e387a6t68\" class=\"shortdesc\">本文介绍通过VNC可以正常连接Windows系统的ECS实例，但使用相同的账号和密码，通过远程桌面连接Windows系统的ECS实例失败的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"5ec92960a61zh\" class=\"section\"><h2 id=\"9be4e38ba6ip1\">问题描述</h2><p id=\"6bfea210a6xbq\">本地用户在通过VNC成功登录Windows系统的ECS实例的情况下，使用相同的账号和密码，通过远程桌面连接Windows系统的ECS实例失败。登录ECS管理控制台查看Windows的系统日志提示“<b data-tag=\"uicontrol\" id=\"1444e660a6j67\" class=\"uicontrol\"><b>未知用户名或密码错误。</b></b>”错误，具体报错信息如下图所示。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9668375761/p519877.png\" alt=\"{2242F6BB-10AC-4EBD-926E-43F9E02AC704}_20200526142954.jpg\" width=\"612\" height=\"403\" placement=\"break\" class=\"image break\"></section><section id=\"60841fd0a6tzx\" class=\"section\"><h2 id=\"Ckhth\">问题原因</h2><p id=\"9be50a93a6mhe\">Windows系统的ECS实例内本地安全设置为<b data-tag=\"uicontrol\" id=\"349a8ed0a6134\" class=\"uicontrol\"><b>仅来宾 - 对本地用户进行身份验证，其身份为来宾</b></b>模式。</p><div type=\"note\" id=\"a24c8730a6k0c\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"a46d4450a6ow3\">设置为该模式后，意味着任何可以通过网络向Windows ECS实例进行身份验证的本地用户都只拥有<b data-tag=\"uicontrol\" id=\"24bec690a60ax\" class=\"uicontrol\"><b>来宾权限</b></b>，这会导致本地电脑通过远程桌面连接ECS实例失败。</p></div></div></section><section id=\"63299d50a6mma\" class=\"section\"><h2 id=\"Xmehi\">解决方案</h2><ol id=\"9be531a3a643x\"><li id=\"CDJwQ\"><p id=\"6d514450a6eeh\">通过VNC连接Windows实例。</p><p id=\"6d516b60a6mer\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li data-spm-anchor-id=\"a2c9r.12641742.0.i5.20achEdShEdSrg\" id=\"9be531a5a6fr4\"><p id=\"d8b7f050a6w5f\">单击<b data-tag=\"uicontrol\" id=\"dfd0f490a6788\" class=\"uicontrol\"><b>开始 &gt; 运行</b></b>，打开<b data-tag=\"uicontrol\" id=\"140e1030a6eny\" class=\"uicontrol\"><b>运行</b></b>窗口，输入<b data-tag=\"uicontrol\" id=\"ad570990a6oo0\" class=\"uicontrol\"><b>gpedit.msc</b></b>，然后单击<b data-tag=\"uicontrol\" id=\"d59b1560a6y3m\" class=\"uicontrol\"><b>确定</b></b>，进入<b data-tag=\"uicontrol\" id=\"d851a9e0a6hlo\" class=\"uicontrol\"><b>本地组策略编辑器</b></b>窗口。</p></li><li data-spm-anchor-id=\"a2c9r.12641742.0.i5.20achEdShEdSrg\" id=\"9be531a7a6gqj\"><p id=\"9be531a8a6pe2\">依次单击<b data-tag=\"uicontrol\" id=\"e34ecd80a6qtd\" class=\"uicontrol\"><b>计算机配置 &gt; Windows 设置 &gt; 安全设置 &gt; 本地策略 &gt; 安全选项</b></b>，双击<b data-tag=\"uicontrol\" id=\"798c5010a6adx\" class=\"uicontrol\"><b>网络访</b><b>问:</b><b> 本地</b><b>帐户</b><b>的共享和安全模型</b></b>。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9668375761/p519878.png\" alt=\"{2028DD10-A3EE-4384-9AF5-C0CFC8E46309}_20200526150846.jpg\" width=\"636\" height=\"447\" id=\"517572f1a6od3\" placement=\"break\" class=\"image break\"></li><li id=\"9be531a9a6o9w\"><p id=\"9be531aaa625t\">在<b data-tag=\"uicontrol\" id=\"ba6b2fd0a7qx0\" class=\"uicontrol\"><b>本地安全设置</b></b>页签下将<b data-tag=\"uicontrol\" id=\"b7e26650a68nw\" class=\"uicontrol\"><b>仅来宾 - 对本地用户进行身份验证，其身份为来宾</b></b>修改为<b data-tag=\"uicontrol\" id=\"bcf8e3d0a6r9h\" class=\"uicontrol\"><b>经典 - 对本地用户进行身份验证，不改变其本来身份</b></b>，然后单击<b data-tag=\"uicontrol\" id=\"c7ff27d0a6ghu\" class=\"uicontrol\"><b>确定</b></b>保存配置。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9668375761/p519879.png\" alt=\"{1B1BAFBF-A09B-4BAB-80B1-CB1712D30164}_20200526151028.jpg\" width=\"412\" height=\"554\" placement=\"break\" id=\"43e353f1a6qnj\" class=\"image break\"></li><li id=\"9be531aba6vmz\"><p id=\"9be531aca6yux\">单击<b data-tag=\"uicontrol\" id=\"2d022190a6wpm\" class=\"uicontrol\"><b>开始 &gt; 运行</b></b>，打开<b data-tag=\"uicontrol\" id=\"062ce6d0a6hl1\" class=\"uicontrol\"><b>运行</b></b>窗口，输入<b data-tag=\"uicontrol\" id=\"dcb4b5e0a6sq4\" class=\"uicontrol\"><b>cmd</b></b>，然后单击<b data-tag=\"uicontrol\" id=\"df31eae0a6i7v\" class=\"uicontrol\"><b>确定</b></b>，打开命令行工具。</p></li><li id=\"9be531ada6ug0\"><p id=\"9be531aea6qqn\">执行以下命令，使配置生效。</p><pre data-tag=\"codeblock\" id=\"9bdf3e32a6zxf\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>gpupdate /force</code></pre></li><li id=\"9be558b1a62o9\"><p id=\"19a12d30a6m5t\">确认通过远程桌面连接Windows实例成功。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-integrity-unable-to-open-file-error-messages-appear-in-the-kernel-logs-of-an-alibaba-cloud-linux-2-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统的ECS实例内核日志存在“integrity: Unable to open file”信息，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-31 18:04:59</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"cfea4be0c6235\"><p data-tag=\"shortdesc\" id=\"cff03f52c62zk\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2系统的ECS实例内核日志存在“integrity: Unable to open file”信息的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"cff03f53c6jd8\">符合如下条件的Alibaba Cloud Linux 2实例的内核日志（执行<code data-tag=\"codeph\" class=\"codeph\">dmesg</code>命令查看日志）中存在类似如下的提示信息：</p><ul id=\"cff03f54c6ijg\"><li data-spm-anchor-id=\"a2c4e.11153940.0.i5.655046d0UoNo9y\" id=\"cff03f55c6465\"><p id=\"cff06660c6e7a\">镜像：aliyun_2_1903_x64_20G_alibase_20200529.vhd及之后的所有镜像版本。</p></li><li data-spm-anchor-id=\"a2c4e.11153940.0.i5.655046d0UoNo9y\" id=\"cff06661c6naq\"><p id=\"cff06662c69p6\">内核：kernel-4.19.91-19.1.al7及之后的所有内核版本。</p></li></ul><pre data-tag=\"codeblock\" id=\"cfea4be1c6xlm\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>[    2.960294] integrity: Unable to open file: /etc/keys/x509_ima.der (-2)\n[    2.960295] integrity: Unable to open file: /etc/keys/x509_evm.der (-2)</code></pre><h2 id=\"4rM4I\">问题原因</h2><p id=\"7db9e180cdvpd\">该系统不是可信系统。如果不是可信系统， 下列相关文件不会进行配置，会出现问题描述中打开文件失败的信息。</p><p id=\"cff06663c6hks\">此问题并不是内核错误，Alibaba Cloud Linux 2内核开启了CONFIG_IMA_LOAD_X509和CONFIG_EVM_LOAD_X509特性，并且指定以下配置为可信内核完整性子系统提供了所需的证书路径。</p><pre data-tag=\"codeblock\" id=\"cfea4be2c62jq\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>CONFIG_IMA_X509_PATH=\"/etc/keys/x509_ima.der\"\nCONFIG_EVM_X509_PATH=\"/etc/keys/x509_evm.der\"</code></pre><h2 id=\"AywdZ\">解决方案</h2><ul id=\"cff08d7ac6imp\"><li id=\"cff0b480c67p1\"><p id=\"cff0b481c6nrt\">执行<code data-tag=\"codeph\" class=\"codeph\">make menuconfig</code>命令取消下列配置，重新编译安装内核。</p><p id=\"45a49090cdfdx\">如果相关提示信息对您造成困扰，您可以在内核源码目录执行<code data-tag=\"codeph\" class=\"codeph\">make menuconfig</code>命令，取消以下两个选项的配置，然后重新编译安装内核即可。</p><pre data-tag=\"codeblock\" id=\"28f51eb2cdcnk\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code># Load X509 certificate onto the '.ima' trusted keyring\nCONFIG_IMA_LOAD_X509 is not set\n# Load an X509 certificate onto the '.evm' trusted keyring\nCONFIG_EVM_LOAD_X509 is not set</code></pre></li><li id=\"cff0b482c65f8\"><p id=\"cff0b483c6nod\">忽略提示信息。</p><p id=\"77d1b7f0cd3oc\">该问题只是配置问题，并不会对系统造成其它影响，可以直接忽略相关提示信息。</p></li></ul></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/winodws-via-remote-desktop-connection-system-of-ecs-instance-how-to-copy-and-paste-text-solve", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Winodws系统的ECS实例时，无法进行文本复制粘贴如何解决？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Winodws系统的ECS实例时，无法进行文本复制粘贴如何解决？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-09 14:01:43</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"703f03109fq54\"><p data-tag=\"shortdesc\" id=\"704210589f2d9\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows系统的ECS实例时不能复制粘贴内容问题的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"9aecea509faz4\" class=\"section\"><h2 id=\"XbeWY\">问题现象</h2><p id=\"9c05f6c0a5ofi\">通过远程桌面连接Windows ECS实例后，无法复制粘贴实例中的内容至本地电脑。</p></section><section id=\"a2dfd3d09fi1x\" class=\"section\"><h2 id=\"9a6829f09fgmk\">问题原因</h2><p id=\"eea8c4709f5vu\">Windows系统的ECS实例中<code data-tag=\"code\" class=\"code\">rdpclip.exe</code>应用程序运行异常。</p><div id=\"1f5eeee0a2mwk\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"251de160a2cyl\">rdpclip是一种远程桌面组建，用于远程桌面时进行文件或内容复制粘贴。通过远程桌面连接实例后，若系统内<code data-tag=\"code\" class=\"code\">rdpclip.exe</code>进程异常，则无法复制粘贴目标实例中的文件或内容至本地电脑。</p></div></div></section><section id=\"a681d9c09fvo8\" class=\"section\"><h2 id=\"EFTFF\">解决方案</h2><p id=\"7042376e9fw2c\">远程连接Windows ECS实例无法使用复制粘贴功能时，可以通过重启Windows ECS实例内的rdpclip.exe进程来解决。</p><p id=\"88345580a5w8r\">请参考以下操作步骤进行修复： </p><ol id=\"a9ccfb319fytb\"><li id=\"21c506c19fajf\"><p id=\"21c506c09fdzo\">在本地电脑中，右键单击<img placement=\"inline\" id=\"11c458c69fk4m\" width=\"25\" alt=\"Dingtalk_20210510142550.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" class=\"image inline\">图标，选择<b data-tag=\"uicontrol\" id=\"48c50f84a2514\" class=\"uicontrol\">运行</b>。</p></li><li id=\"144b9fe09fuaa\"><p id=\"144b78d09fur2\">在<b data-tag=\"uicontrol\" id=\"48c50f88a2bnl\" class=\"uicontrol\">运行</b>窗口输入<code data-tag=\"code\" class=\"code\">mstsc</code>命令，然后按<code data-tag=\"code\" class=\"code\">Enter</code>键打开<b data-tag=\"uicontrol\" id=\"b11a5371a2fuf\" class=\"uicontrol\">远程桌面连接</b>窗口。</p></li><li id=\"ZH-CN-TOPIC-0165571650-li1567974783919\"><p id=\"704237709f2xt\">在<b data-tag=\"uicontrol\" id=\"ef7be3c0a295j\" class=\"uicontrol\">远程桌面连接</b>窗口，单击<b data-tag=\"uicontrol\" id=\"48c50f8fa2rfd\" class=\"uicontrol\">显示选项</b>，选择<b data-tag=\"uicontrol\" id=\"48c50f91a2w69\" class=\"uicontrol\">本地资源</b>选项卡，选中<b data-tag=\"uicontrol\" id=\"48c53690a28bv\" class=\"uicontrol\">本地设备和资源</b>中的<b data-tag=\"uicontrol\" id=\"48c53692a27tm\" class=\"uicontrol\">剪贴板</b>，单击<b data-tag=\"uicontrol\" id=\"48c53694a2r32\" class=\"uicontrol\">详细信息</b>，选中<b data-tag=\"uicontrol\" id=\"48c53696a2xfi\" class=\"uicontrol\">驱动器</b>，单击<b data-tag=\"uicontrol\" id=\"48c53698a2eyz\" class=\"uicontrol\">确定</b>。</p><img width=\"700\" placement=\"break\" alt=\"12\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0717035761/p553314.png\" id=\"a28677b1a2f00\" class=\"image break\"></li><li id=\"704237719fcak\"><p id=\"704237729fu8x\">使用<b data-tag=\"uicontrol\" id=\"48c5369da2sq3\" class=\"uicontrol\">远程桌面</b>连接Windows实例，打开<b data-tag=\"uicontrol\" id=\"48c5369fa2x9u\" class=\"uicontrol\">任务管理器</b>，在<b data-tag=\"uicontrol\" id=\"a92437a0a2m9n\" class=\"uicontrol\">详细信息</b>页面中选中<code data-tag=\"code\" class=\"code\">rdpclip.exe</code>进程，然后单击<b data-tag=\"uicontrol\" id=\"48c55da1a2z8x\" class=\"uicontrol\">结束任务</b>。</p><img placement=\"break\" alt=\"13\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0717035761/p553323.png\" id=\"a4ba47a1a23ye\" class=\"image break\"></li><li id=\"703f03119fapl\"><p id=\"2c3d5b409fih6\">右键单击<img placement=\"inline\" id=\"2c3d5b419fonf\" width=\"25\" alt=\"Dingtalk_20210510142550.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" class=\"image inline\">图标，选择<b data-tag=\"uicontrol\" id=\"48c55da7a27ac\" class=\"uicontrol\">运行</b>。</p></li><li id=\"704237749f6nv\"><p id=\"704237759ft37\">在<b data-tag=\"uicontrol\" id=\"48c55daba2b9x\" class=\"uicontrol\">运行</b>窗口中输入<code data-tag=\"code\" class=\"code\">rdpclip.exe</code>，单击<b data-tag=\"uicontrol\" id=\"48c55daea214f\" class=\"uicontrol\">确定</b>，重新启动该程序。</p><img placement=\"break\" alt=\"14\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0717035761/p553327.png\" id=\"a8281e31a2tnq\" class=\"image break\"></li><li id=\"704237769fy21\"><p id=\"704237779f2u0\">确认复制、粘贴功能恢复正常。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-cannot-stay-connected-to-a-windows-instance-by-using-remote-desktop", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例无法长时间保持连接如何解决？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例无法长时间保持连接如何解决？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:45:29</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"74dac4909fsop\"><p data-tag=\"shortdesc\" id=\"74ddf8e59fgun\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例无法长时间保持连接问题的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"d3a239e09fiyr\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"22ee88c0a5of3\">用户通过本地电脑连接Windows系统的ECS实例后，如果1-2分钟内未在ECS实例内进行操作，则会发现ECS实例连接已断开，且无法再次连接ECS实例。</p></section><section id=\"d5377fe09f228\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p class=\"from-extensions-error\" id=\"74ddf8e79ffoe\">Windows系统的ECS实例中Routing and Remote Access服务的启动类型为“<b data-tag=\"uicontrol\" id=\"b659cad0a2yom\" class=\"uicontrol\"><b>自动（延迟启动）</b></b>”。</p><div type=\"note\" id=\"02343d01a5mjq\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"62867100a5hmf\">Windows系统中某一服务的启动类型为“<b data-tag=\"uicontrol\" id=\"806ed810a5kxs\" class=\"uicontrol\"><b>自动（延迟启动）</b></b>”时，Windows系统会在启动一段时间后延迟启动该服务项，可以很好地解决一些低配置电脑因为加载服务项过多导致电脑启动缓慢或启动后响应慢的问题。但是当ECS实例内<code data-tag=\"code\" class=\"code\">Routing and Remote Access</code>服务启动类型为“<b data-tag=\"uicontrol\" id=\"8dc76400b3w07\" class=\"uicontrol\"><b>自动（延迟启动）</b></b>”时，通过远程桌面连接ECS实例后系统会在很短的时间内断开远程连接。</p></div></div></section><section id=\"d6c069d09fkgd\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><ol id=\"d79bc3c09fps9\"><li id=\"d79bc3c19fl2u\"><p id=\"d79bc3c29fvv9\">通过VNC连接Windows实例。</p><p id=\"d79bc3c39fk85\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"d79bc3c49fq2x\"><p id=\"d79bc3c59fmu7\">单击<img placement=\"inline\" id=\"d79bc3c69fjqe\" width=\"25\" alt=\"Dingtalk_20210510142550.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" class=\"image inline\">图标，打开<b data-tag=\"uicontrol\" id=\"84e80b9ba2zpp\" class=\"uicontrol\"><b>控制面板</b></b>，找到<b data-tag=\"uicontrol\" id=\"84e80b9da2qo9\" class=\"uicontrol\"><b>系统和安全</b></b>。</p></li><li id=\"d79bc3c79fyz2\"><p id=\"d79bc3c89fuxd\">在<b data-tag=\"uicontrol\" id=\"84e832a1a2fsj\" class=\"uicontrol\"><b>控制面板</b></b>页面，依次单击<b data-tag=\"uicontrol\" id=\"84e832a3a2pdx\" class=\"uicontrol\"><b>系统和安全 &gt; 管理工具</b></b>，然后双击打开<b data-tag=\"uicontrol\" id=\"84e832a5a2264\" class=\"uicontrol\"><b>服务</b></b>。</p></li><li id=\"7c536da09fy77\"><p id=\"7c5346909f86j\">在<b data-tag=\"uicontrol\" id=\"cbc083a0a28q4\" class=\"uicontrol\"><b>服务</b></b>框中，双击<b data-tag=\"uicontrol\" id=\"84e832b2a2qem\" class=\"uicontrol\"><b>Routing and Remote Access</b></b>服务，打开<b data-tag=\"uicontrol\" id=\"84e832b4a24l3\" class=\"uicontrol\"><b>Routing and Remote Access的属性</b></b>窗口。</p></li><li id=\"e5ce73119f5lt\"><p id=\"f0746ea09fw72\">在<b data-tag=\"uicontrol\" id=\"baf11b50a241n\" class=\"uicontrol\"><b>启动类</b><b>型(</b><b>E)：</b></b>框中，选择<b data-tag=\"uicontrol\" id=\"84e859b1a29xh\" class=\"uicontrol\"><b>禁用</b></b>，单击<b data-tag=\"uicontrol\" id=\"84e859b3a2c78\" class=\"uicontrol\"><b>确定</b></b>。</p><img id=\"b8642781a22zj\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6252035761/p553139.png\" alt=\"7\" placement=\"break\" height=\"500\" class=\"image break\"></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/after-installing-software-on-windows-instances-of-ecs-execute-the-command-from-the-command-line-tools-prompt-command-not-found-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>在Windows系统的ECS实例上安装软件后，通过命令行工具执行命令时提示“command not found”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在Windows系统的ECS实例上安装软件后，通过命令行工具执行命令时提示“command not found”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-13 12:23:08</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"38b8c4606589l\"><p data-tag=\"shortdesc\" id=\"38bbd1a165c6p\" class=\"shortdesc\">本文介绍在Windows系统的ECS实例上安装软件后，通过命令行工具执行命令时提示“command not found”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"6b3c88a0a82fp\" class=\"section\"><h2 data-lake-id=\"7e5ee25ca606883aba99127ff75f24c8_h2_0\" id=\"iAj6g\">问题现象</h2><p id=\"38bbd1a265oza\">部分软件在Windows系统上安装后，可能还需要使用命令行工具执行命令，但通过命令行工具执行命令时会提示“<b data-tag=\"uicontrol\" id=\"b3111820a844y\" class=\"uicontrol\">command not found</b>”错误。</p></section><section id=\"69bd3ba0a8kkt\" class=\"section\"><h2 data-lake-id=\"2e49486797f4200f836f8540b7a5df21_h2_1\" id=\"4rM4I\">问题原因</h2><p id=\"38bbd1a3659ld\">软件安装后，在未添加环境变量的情况下，使用命令行工具执行命令将导致报错。</p></section><section id=\"684dcd20a8gxu\" class=\"section\"><h2 data-lake-id=\"4ba58f8d2011054eb1c0cf66f867ff33_h2_2\" id=\"AywdZ\">解决方案</h2><p id=\"38bbd1a465amm\">请您按照下列步骤设置及查看环境变量。</p><ol id=\"165d0eb2a8njw\"><li id=\"165d0eb0a8ltz\"><p id=\"4c26bdc0a82jd\">在Windows系统桌面使用<code data-tag=\"code\" class=\"code\">Win+R</code>组合键打开<b data-tag=\"uicontrol\" id=\"66d5cbc0a8oot\" class=\"uicontrol\">运行</b>对话框，并输入<code data-tag=\"code\" class=\"code\">cmd</code>命令，然后单击<b data-tag=\"uicontrol\" id=\"7f308980a8nz1\" class=\"uicontrol\">确定</b>，打开命令行工具。</p></li><li id=\"1a92a210a8rv0\"><p id=\"38bbd1a7652lb\">执行以下命令设置环境变量。</p><pre id=\"yia3kq\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>setx /m PATH \"%PATH%\";[$Softpath]</code></pre><div type=\"note\" id=\"0e5bfef1a8hq8\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"145c1922a8xpl\"><li id=\"145c1920a85in\"><p id=\"101d36f0a8g92\">[$Softpath]要替换成软件执行程序路径，例如<code data-tag=\"code\" class=\"code\">C:\\dig</code>。</p></li><li id=\"15a2c9f1a8ab2\"><p id=\"17c5d100a8kdl\">如果只是临时添加环境变量，请执行以下命令。</p><pre id=\"upv1vr\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>set PATH=%PATH%;[$Softpath]</code></pre></li></ul></div></div></li><li id=\"c9961991a8ypd\"><p id=\"cbe00990a851b\">执行<code data-tag=\"code\" class=\"code\">set path</code>命令，确认当前的环境变量已生效。</p></li><li id=\"7334c741a90g3\"><p id=\"8a948330a9tsz\">重新执行安装软件后的后续命令，确认不会提示“<b data-tag=\"uicontrol\" id=\"b3111820a844y\" class=\"uicontrol\">command not found</b>”错误。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-am-prompted-with-a-remote-desktop-disconnected-error-when-i-connect-to-a-windows-instance-by-using-remote-desktop", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows系统的ECS实例时，提示“远程桌面连接已断开”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows系统的ECS实例时，提示“远程桌面连接已断开”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:45:34</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"d05596f0a0xje\"><p data-tag=\"shortdesc\" id=\"d05aa008a0zeg\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows系统的ECS实例时，提示“远程桌面连接已断开”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"se-knowledge\" class=\"section\"><section id=\"0409fa90a04vw\" class=\"section\"><h2 id=\"AdhYY\">问题描述</h2><p id=\"d05aa00ca044e\">通过远程桌面连接Windows系统的ECS实例时失败，并提示“<b data-tag=\"uicontrol\" id=\"2b865f80a2g73\" class=\"uicontrol\">远程桌面连接已断开</b>”错误，具体显示如下图。</p><img placement=\"break\" alt=\"131\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9290235761/p555011.png\" id=\"2a6af3b0a2amd\" class=\"image break\"></section><section id=\"05f24290a0nih\" class=\"section\"><h2 id=\"aridp\">问题原因</h2><p id=\"d05aa00da0yzu\">通过VNC登录Windows实例，<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/use-logs-in-windows-instances#section-m52-fpr-gfb\">进入事件查看器查看系统日志</a>，提示“<b data-tag=\"uicontrol\" id=\"28caa6a0a2on1\" class=\"uicontrol\">终端服务器安全层在协议流中检测到错误，并已取消客户端连接</b>”的错误，该问题可能是由于ECS实例的注册表中Certificate子键损坏导致的。</p><div id=\"bf373731a2vy8\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"bff026f0a22fj\">注册表中Certificate子键负责终端服务通信中数据信息的认证和加密，它一旦被损坏，终端服务的协议组件就会检测到错误，中断客户端与ECS实例之间的通信。导致Certificate子键损坏的原因很多，如管理员安装和卸载某些系统软件、对终端服务参数的不合理配置等。</p></div></div></section><section id=\"08e71890a0czx\" class=\"section\"><h2 id=\"xjYnQ\">解决方案</h2><p id=\"d05ac712a04xu\">本文操作以Windows Server 2008 R2系统版本为例，其他Windows系统版本操作类似。</p><ol data-spm-anchor-id=\"a2c4g.11186623.2.i4.6c9b2e7eHHOmay\" class=\"ol steps\" id=\"steps-a70-kum-4i5\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i4.237d5e3brVAKaj\" id=\"d05ac713a0x89\"><p id=\"a5cff0d0a0g47\">通过VNC连接Windows实例。</p><p id=\"b784de80a03j0\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"44a7160d957a6\"><p id=\"a5cff0d2a0uf1\">单击<b data-tag=\"uicontrol\" id=\"09993c30a3wig\" class=\"uicontrol\">开始 &gt; 运行</b>，在<b data-tag=\"uicontrol\" id=\"2b86869fa2no2\" class=\"uicontrol\">运行</b>对话框中输入<code data-tag=\"code\" class=\"code\">regedit</code>，单击<b data-tag=\"uicontrol\" id=\"2b86ada1a24bm\" class=\"uicontrol\">确定</b>。</p></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i4.237d5e3brVAKaj\" id=\"d05ac717a0p3s\"><p id=\"d05ac718a00nz\">在<b data-tag=\"uicontrol\" id=\"2b86ada5a21l9\" class=\"uicontrol\">注册表编辑器</b>窗口，依次选择<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE&gt;SYSTEM&gt;ControlSet001&gt;Control&gt;Terminal Server&gt;RCM</code>，右键单击<b data-tag=\"uicontrol\" id=\"2b86ada8a2zm4\" class=\"uicontrol\">Certificate</b>，选择<b data-tag=\"uicontrol\" id=\"2b86adaaa242f\" class=\"uicontrol\">删除</b>，然后单击<b data-tag=\"uicontrol\" id=\"daa6ff10a30fy\" class=\"uicontrol\">是</b>。</p><img id=\"9ab3d770a3viu\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4265935761/p555585.png\" alt=\"1231321\" placement=\"break\" width=\"550\" class=\"image break\"></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i4.237d5e3brVAKaj\" id=\"d05ac719a0d3v\"><p id=\"d05ac71aa0dc4\">单击<b data-tag=\"uicontrol\" id=\"deaad410a3g57\" class=\"uicontrol\">开始 &gt; 管理工具 &gt; 远程桌面服务</b>，然后单击<b data-tag=\"uicontrol\" id=\"e02b5990a3mb4\" class=\"uicontrol\">远程桌面会话主机配置</b>。</p><img id=\"bb009450a3mqc\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4265935761/p555588.png\" alt=\"image\" placement=\"break\" width=\"550\" class=\"image break\"></li><li id=\"8aaf3111a06y7\"><p id=\"171aeb00a3enz\">进入<b data-tag=\"uicontrol\" id=\"23698d80a3ayj\" class=\"uicontrol\">RD 会话主机配置区域</b>，双击<b data-tag=\"uicontrol\" id=\"24fb2a00a3n0k\" class=\"uicontrol\">RDP-Tcp</b>，进入<b data-tag=\"uicontrol\" id=\"26ebd670a3zhh\" class=\"uicontrol\">RDP-Tcp 属性</b>页面，单击<b data-tag=\"uicontrol\" id=\"3170b570a3woj\" class=\"uicontrol\">常规</b>，将<b data-tag=\"uicontrol\" id=\"85f313e0a3dya\" class=\"uicontrol\">安全层</b>选项修改为<b data-tag=\"uicontrol\" id=\"8457b360a3067\" class=\"uicontrol\">RDP 安全层</b>，然后单击<b data-tag=\"uicontrol\" id=\"89b63660a3ruv\" class=\"uicontrol\">确定</b>保存配置。</p><img id=\"59d0dc20a3th2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4265935761/p555593.png\" alt=\"123123213\" placement=\"break\" width=\"550\" class=\"image break\"></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i4.237d5e3brVAKaj\" id=\"d05ac71fa0z55\"><p id=\"8a6d5b30a0mzs\">重启Windows实例或重启服务器以更新配置。</p></li><li id=\"eb261931a0i2e\"><p id=\"f53e0590a0w57\">使用远程桌面连接Windows实例，确认可以正常登录。</p></li></ol></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/remote-desktop-service-certification-due-to-remote-login-windows-instance-how-to-resolve-the-failure", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>远程桌面服务认证到期导致远程登录Windows实例失败如何解决？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>远程桌面服务认证到期导致远程登录Windows实例失败如何解决？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-09 13:51:07</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main role=\"main\"><article role=\"article\" aria-labelledby=\"title_om8_vec_8gs\"><div class=\"body taskbody\" data-tag=\"taskbody\" id=\"taskbody-hll-a7g-q0c\"><p id=\"shortdesc-s09-wwm-zeo\" class=\"shortdesc\" data-tag=\"shortdesc\">本文介绍因远程桌面服务认证到期，导致远程登录Windows实例失败的解决办法。</p><section class=\"section\" data-tag=\"section\" id=\"section-35j-xzl-n9d\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-cji-70l-fvk\">问题现象</h2><div class=\"p\" data-tag=\"p\" id=\"p-pwh-4c4-yg3\">在远程登录Windows实例时，出现缺少远程桌面授权服务器许可证的提示，远程登录Windows实例失败。以您在本地使用Windows操作系统自带的远程桌面连接工具MSTSC远程登录Windows实例为例，提示如下。<div class=\"note note note-note\" data-tag=\"note\" id=\"note-poe-fs8-87g\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note\"></i></div><div class=\"note-content\"><strong>说明</strong> 该场景下，仅支持使用VNC方式远程登录Windows实例。</div></div><img class=\"image break\" data-tag=\"image\" id=\"image-3js-eph-xhy\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5690686661/p508779.png\" width=\"750\" alt=\"缺少许可证\"></div></section><section class=\"section\" data-tag=\"section\" id=\"section-1hx-p78-vio\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-o4u-mn8-dyg\">问题原因</h2><p class=\"p\" data-tag=\"p\" id=\"p-hq4-nem-7ur\">因Windows操作系统中安装的远程桌面服务认证到期后，导致您远程登录Windows实例失败。远程桌面服务认证到期的原因有如下几种：</p><ul class=\"ul\" data-tag=\"ul\" id=\"ul-br8-mz7-sfs\"><li class=\"li\" data-tag=\"li\" id=\"li-iqk-5ts-xfk\">在Windows操作系统内安装了远程桌面会话主机角色，此功能免费试用120天，之后需要进行付费。如果没有付费，该服务到期后会导致终端远程登录Windows实例失败。</li><li class=\"li\" data-tag=\"li\" id=\"li-ff8-zde-74h\">正常情况下，Windows服务器默认提供两个用户的免费远程桌面管理授权。如果有更高的连接需求，则需要配置远程桌面会话主机服务器角色，同时购买和配置相应的授权后，才可以使用更多的远程桌面管理并发。</li><li class=\"li\" data-tag=\"li\" id=\"li-1pw-gzb-v9k\">在配置远程桌面会话主机角色后，会同时取消默认两个用户的免费连接授权。在没有正确配置相关授权的时候，远程登录Windows实例将会无法连接。</li></ul></section><section class=\"section\" data-tag=\"section\" id=\"section-yvo-4kt-9st\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-r7n-jjo-i2s\">解决方案</h2><div class=\"note important note-important\" data-tag=\"note\" id=\"note-1xi-10n-dod\"><div class=\"note-icon-wrapper\"><i class=\"icon-note important\"></i></div><div class=\"note-content\"><strong>重要</strong> <ul class=\"ul\" data-tag=\"ul\" id=\"ul-d5a-6xz-482\"><li class=\"li\" data-tag=\"li\" id=\"li-8h6-16d-gs1\">如果您对实例或数据有修改、变更等风险操作，务必注意实例的容灾、容错能力，确保数据安全。建议您提前创建快照，快照相关信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/snapshot-overview#concept-qft-2zw-ydb\">快照概述</a>。</li><li class=\"li\" data-tag=\"li\" id=\"li-s5y-26d-d8s\">如果您在阿里云平台授权或者提交过登录账号、密码等安全信息，建议您及时修改安全信息。</li></ul></div></div><ol class=\"ol steps\" data-tag=\"steps\" id=\"steps-qa7-kjs-7ur\"><li class=\"li step\" data-tag=\"step\" id=\"step-jo5-6y8-r2g\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-ecq-dc3-u1t\">使用VNC连接Windows实例。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-l09-0u9-emz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password#concept-frf-pkw-wgb\">通过密码认证登录Windows实例</a>。</div></li><li class=\"li step\" data-tag=\"step\" id=\"step-pbq-lhy-yva\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-6sx-75m-pa2\">在Windows操作系统上，删除远程桌面服务。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-t3r-67g-tud\"><div class=\"note note note-note\" data-tag=\"note\" id=\"note-yfm-i0c-oa4\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note\"></i></div><div class=\"note-content\"><strong>说明</strong> 以下操作步骤以Windows Server 2016为例，实际操作系统以您实际的Windows实例为准。</div></div></div><ol type=\"a\" class=\"ol substeps\" data-tag=\"substeps\" id=\"substeps-1bd-azt-do6\"><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-ule-cuf-0w0\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-bsi-svk-n8o\">在Windows操作系统左下角，选择<span class=\"ph menucascade\" data-tag=\"menucascade\" id=\"menucascade-qie-s15-ffq\"><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-qfm-l3i-sse\"><img class=\"image inline\" data-tag=\"image\" id=\"image-x2n-xey-xpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5690686661/p508837.png\" alt=\"开始\"></span><abbr> &gt; </abbr><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-yw4-f2s-n19\">服务器管理器</span></span>。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-yyw-hnp-hi7\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-aye-l18-2nf\">在<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-duv-r9o-br9\">服务器管理器</span>页面右上角，选择<span class=\"ph menucascade\" data-tag=\"menucascade\" id=\"menucascade-mgk-5ib-yd6\"><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-czw-52o-4ad\">管理</span><abbr> &gt; </abbr><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-orh-bgs-xfu\">删除角色和功能</span></span>。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-k5m-558-wm0\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-01i-rer-vx9\">在<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-t03-nu0-k90\">选择目标服务器</span>页面，选择Windows实例，然后单击<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-f6x-gle-61r\">下一页</span>。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-ll5-h8x-5oz\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-ylw-g05-2r7\">在<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-7v6-cpc-azi\">服务器角色</span>页面，<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-kiu-hgh-sig\">角色</span>列表中选中<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-so9-0un-ozw\">远程桌面服务</span>，然后单击<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-2ia-69u-8cm\">下一页</span>。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-qka-x6w-dg4\"><img class=\"image break\" data-tag=\"image\" id=\"image-0ys-7y4-yth\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6690686661/p508987.png\" width=\"750\" alt=\"删除远程桌面服务\"></div></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-muj-gwi-wpf\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-3pg-fnh-pks\">在<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-564-w55-0hg\">删除功能</span>页面，选中<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-p59-byi-l6x\">远程桌面服务</span>。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-uc8-pvx-zxw\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-1cu-c48-ngv\">在弹出的对话框，选中<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-bhe-ubi-yv8\">删除管理工具（如果适用）</span>并单击<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-ad9-x0y-p60\">删除功能</span>，然后单击<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-tol-7ph-xok\">下一页</span>。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-lkh-23z-v7a\"><img class=\"image break\" data-tag=\"image\" id=\"image-5rh-u9d-x9f\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6690686661/p508999.png\" width=\"750\" alt=\"删除远程连接功能\"></div></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-z3h-qyw-off\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-y6e-s06-tif\">在<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-mdh-puk-3k1\">确认删除所选内容</span>页面，单击<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-k3k-be6-jjb\">删除</span>。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-r79-k62-rkz\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-jk1-nas-fam\">根据<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-6u9-wer-6n8\">删除进度</span>页面提示，重启Windows实例。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-06u-rna-yh9\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances#concept-yxw-dwm-xdb\">重启实例</a>。<img class=\"image break\" data-tag=\"image\" id=\"image-fne-b7r-ymj\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5690686661/p509005.png\" width=\"750\" alt=\"删除进度\"></div></li></ol></li><li class=\"li step\" data-tag=\"step\" id=\"step-42k-x8d-o6e\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-ecq-dc3-u1t\">使用VNC连接Windows实例。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-l09-0u9-emz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password#concept-frf-pkw-wgb\">通过密码认证登录Windows实例</a>。</div></li><li class=\"li step\" data-tag=\"step\" id=\"step-sf8-f1i-dy6\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-24z-zzw-mod\">在Windows操作系统上，查看远程桌面服务删除进度。</span><ol type=\"a\" class=\"ol substeps\" data-tag=\"substeps\" id=\"substeps-obj-ca4-yrq\"><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-mqw-uz6-dca\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-rww-gs0-onx\">在Windows操作系统左下角，选择<span class=\"ph menucascade\" data-tag=\"menucascade\" id=\"menucascade-xs4-2ci-0x4\"><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-6zu-t16-af3\"><img class=\"image inline\" data-tag=\"image\" id=\"image-b6x-n0m-beo\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5690686661/p508837.png\" width=\"40\" alt=\"开始\"></span><abbr> &gt; </abbr><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-d8h-o3x-leq\">服务器管理器</span></span>。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-zni-kba-8q8\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-k1h-jmy-0k4\">在<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-cjr-tgz-ise\">服务器管理器</span>页面右上角，选择<span class=\"ph menucascade\" data-tag=\"menucascade\" id=\"menucascade-xfh-nsc-md2\"><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-9da-18l-c3z\"><img class=\"image inline\" data-tag=\"image\" id=\"image-x64-h83-jxo\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5690686661/p509130.png\" width=\"25\" alt=\"通知\"></span><abbr> &gt; </abbr><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-f3n-yac-6ll\">任务详细信息</span></span>。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-6rw-mn4-t1v\">如果在<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-0jo-tn2-4ua\">任务详细信息和通知</span>页面无任务信息或显示出现远程桌面服务删除任务完成的通知，则表示远程桌面服务删除成功。</div></li></ol></li><li class=\"li step\" data-tag=\"step\" id=\"step-sle-tps-z5l\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-1p3-xzh-r13\">重新使用MSTSC远程登录Windows实例。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-b3z-haf-vn2\">您也可以使用其他方式远程登录Windows实例，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods#concept-tmr-pgx-wdb\"><span class=\"text\" cond-props=\"out_merak\" data-tag=\"text\" id=\"text-aso-tbb-lw6\" props=\"OUT_MERAK\">\n 连接方式概述\n</span>\n</a>。<ol class=\"ol\" data-tag=\"ol\" type=\"a\" id=\"ol-jhr-bfj-vwq\"><li class=\"li\" data-tag=\"li\" id=\"li-fj2-hhm-fhe\">选择以下任一方式启动<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-2lf-jev-kkc\">远程桌面连接</span>（MSTSC）：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-c48-jrp-yw9\"><li class=\"li\" data-tag=\"li\" id=\"li-m6w-i2p-x0v\">使用<kbd class=\"ph userinput\" data-tag=\"userinput\" id=\"userinput-3uu-9wu-72t\">Win+R</kbd>组合键打开<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-ohk-axb-yhb\">运行</span>对话框，输入<kbd class=\"ph userinput\" data-tag=\"userinput\" id=\"userinput-wht-247-glt\">mstsc</kbd>，然后单击<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-stf-vir-j7k\">确定</span>。<img class=\"image break\" data-tag=\"image\" id=\"image-ugo-z1o-10o\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2737066661/p507651.png\" alt=\"mstsc\"></li><li class=\"li\" data-tag=\"li\" id=\"li-syu-j0k-he4\">单击<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-x3m-2rx-mhq\">开始</span>图标，在搜索框里中输入<kbd class=\"ph userinput\" data-tag=\"userinput\" id=\"userinput-h3e-fi8-ig3\">mstsc</kbd>后，按回车键确认。</li><li class=\"li\" data-tag=\"li\" id=\"li-cmc-gie-51y\">选择<span class=\"ph menucascade\" data-tag=\"menucascade\" id=\"menucascade-qpx-lx0-hn5\"><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-7tb-vse-pk4\">开始</span><abbr> &gt; </abbr><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-nhh-njw-6rb\">附件</span><abbr> &gt; </abbr><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-e4l-ugp-3xn\">远程桌面连接</span></span>。</li></ul></li><li class=\"li\" data-tag=\"li\" id=\"li-dn3-d5y-pih\">填写待远程登录的Windows实例信息，然后单击<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-04c-yyh-h6k\">连接</span>。<p class=\"p\" data-tag=\"p\" id=\"p-i5x-mo6-z2w\">登录成功，表示该问题已解决。</p></li></ol></div></li></ol></section></div></article></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-am-prompted-with-the-0x112f-error-code-when-i-connect-to-a-windows-instance-over-rdp", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例出现报错代码“0x112f”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例出现报错代码“0x112f”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-09 13:26:23</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"main-2291681\"><p data-tag=\"shortdesc\" id=\"fc680b909flqq\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例时出现报错代码“0x112f”错误的解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"d32475d09fk1d\" class=\"section\"><h2 id=\"fc67e4889fans\"><b>问题现象</b></h2><p id=\"266da4e09fagz\">远程连接Windows实例时提示：“<b data-tag=\"uicontrol\" id=\"b5450590a3292\" class=\"uicontrol\">由于一个协议错误（代码: 0x112f），远程会话将被中断。请重新跟远程计算机连接。</b>”错误。<img placement=\"break\" alt=\"image\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2206135761/p552449.png\" id=\"2c42b7709frhw\" class=\"image break\"></p></section><section id=\"d69cfac09fd3l\" class=\"section\"><h2 id=\"0dd541e09ftgz\"><b>问题原因</b></h2><p id=\"34840f109f8c6\">可能是因为此Windows实例内存不足导致远程会话连接中断。</p></section><section id=\"d8a4ffc09f8vc\" class=\"section\"><h2 id=\"0f4a55b09fvlf\"><b>解决方案</b></h2><p id=\"f4ca5cf1a3u54\">根据实际情况，参考以下两种解决方案进行修复。</p><section id=\"daa479409f2q9\" class=\"section\"><h3 id=\"1a5aabd09fwhu\"><b>方案一：</b>升配ECS实例的规格大小</h3><p id=\"0f5510d09fcnf\">您可以升配ECS实例的规格大小，使ECS实例获得足够的空闲内存。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/upgrade-the-instance-types-of-subscription-instances\">包年包月实例升配规格</a>或<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-the-instance-type-of-a-pay-as-you-go-instance\">按量付费实例变配规格</a>。</p></section><section id=\"dc758fc09fryp\" class=\"section\"><h3 id=\"43fca1509fpj7\"><b>方案二：</b>开启ECS实例的虚拟内存</h3><p id=\"1702b3f09f4zi\">您可以在ECS实例中开启虚拟内存，使ECS实例获得足够的空闲内存。具体操作，请参考<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-configure-the-virtual-memory-of-a-windows-instance\">如何配置Windows实例的虚拟内存</a>。</p></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/an-authentication-error-has-occurred-the-local-security-authority-cannot-be-contacted", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例提示“发生身份验证错误，无法连接到本地安全机构”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例提示“发生身份验证错误，无法连接到本地安全机构”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:45:15</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"main-2290415\"><p data-tag=\"shortdesc\" id=\"20ac7e29968ep\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例提示“发生身份验证错误无法连接到本地安全机构”错误的解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"75f36e9097zju\" class=\"section\"><h2 id=\"72a1f020960j3\">问题现象</h2><p id=\"8b580740a1lns\">通过本地电脑内的远程桌面连接Windows实例提示“<b data-tag=\"uicontrol\" id=\"1f7fd279a2qu0\" class=\"uicontrol\"><b>发生身份验证错误，无法连接到本地安全机构</b></b>”错误。</p><img placement=\"break\" alt=\"1\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1727515761/p554214.png\" id=\"40d58191a2bpg\" class=\"image break\"></section><section id=\"77c3258097qj2\" class=\"section\"><h2 id=\"75c8ab9096ca8\"><b>问题原因</b></h2><p id=\"22bb80a196cu6\">导致该问题的可能原因如下：</p><ul id=\"2ac84e0596tw1\"><li id=\"2ac84e0696u59\"><p id=\"48d97f8096j5c\">ECS实例系统属性中的远程桌面配置错误，请参考<a title=\"\" class=\"xref\" href=\"#77e394f096d2t\">方案一：修改远程桌面配置</a>进行修复。</p></li><li id=\"39a6a8d196bgx\"><p id=\"39a6a8d096eac\">ECS实例的远程会话配置错误，请参考<a title=\"\" class=\"xref\" href=\"#d6ea52a096niv\">方案二：修改目标实例的远程会话配置</a>进行修复。</p></li></ul></section><section id=\"7b36ef8097y4l\" class=\"section\"><h2 id=\"72a1f02296mdz\" data-spm-anchor-id=\"a2c9r.14518950.0.i3.71cabNdwbNdwvA\">解决方案</h2><section id=\"84bcd510978vh\" class=\"section\"><h3 id=\"77e394f096d2t\"><b>方案一：修改目标实例的远程桌面配置</b></h3><ol id=\"72a1f02496ff0\"><li id=\"72a1f0259626k\"><p id=\"d75d542197sgn\">通过VNC连接Windows实例。</p><p id=\"d75d542297gpz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"f23a781196gcw\"><p id=\"014db8d096ibn\">右键单击<img placement=\"inline\" id=\"014db8d19690u\" width=\"25\" alt=\"Dingtalk_20210510142550.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"01106440a2795\" class=\"uicontrol\"><b>运</b><b>行(</b><b>R)</b></b>，输入<code data-tag=\"code\" class=\"code\">sysdm.cpl</code>命令，打开<b data-tag=\"uicontrol\" id=\"1f8047a3a2iq3\" class=\"uicontrol\"><b>系统属性</b></b>对话框。</p></li><li id=\"02593561961jn\"><p id=\"0259356096ixf\">单击<b data-tag=\"uicontrol\" id=\"1f806eb0a26rv\" class=\"uicontrol\"><b>远程</b></b>页签，在<b data-tag=\"uicontrol\" id=\"1f806eb2a2eba\" class=\"uicontrol\"><b>远程桌面</b></b>区域选中<b data-tag=\"uicontrol\" id=\"1f806eb4a2y64\" class=\"uicontrol\"><b>允许远程连接到此计算机</b></b>，单击<b data-tag=\"uicontrol\" id=\"1f806eb6a2gwa\" class=\"uicontrol\"><b>确定</b></b>。</p><img id=\"4f2612b1a5nsj\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7609393761/p551469.png\" alt=\"114\" placement=\"break\" width=\"400\" class=\"image break\"></li></ol></section><section id=\"80a2e000976bs\" class=\"section\"><h3 id=\"d6ea52a096niv\"><b>方案二：修改目标实例的远程会话配置</b></h3><ol id=\"dc7def6196r5t\"><li id=\"6158da11969zv\"><p id=\"3231732097q4c\">通过VNC连接Windows实例。</p><p id=\"232a102097mn9\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"9b32bc6196m1h\"><p id=\"9b32bc6096duf\">右键单击<img placement=\"inline\" id=\"65a10b1196i5t\" width=\"25\" alt=\"Dingtalk_20210510142550.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"0a2f4aa0a2a13\" class=\"uicontrol\"><b>运</b><b>行(</b><b>R)</b></b>，输入<code data-tag=\"code\" class=\"code\">gpedit.msc</code>命令，打开<b data-tag=\"uicontrol\" id=\"1f8095caa2zuy\" class=\"uicontrol\"><b>本地组策略编辑器</b></b><b>。</b></p></li><li id=\"8d4d722196rka\"><p id=\"2c1a8f32967ud\">在<b data-tag=\"uicontrol\" id=\"1f8095cfa21g4\" class=\"uicontrol\"><b>本地组策略编辑器</b></b>窗口，选择<b data-tag=\"uicontrol\" id=\"1f8095d1a23q4\" class=\"uicontrol\"><b>计算机配置 &gt; 管理模板 &gt; Windows 组件 &gt; 远程桌面服务 &gt; 远程桌面会话主机 &gt; 安全</b></b>。</p></li><li id=\"1e5855f1969xn\"><p id=\"2c1a8f3396ij1\">在<b data-tag=\"uicontrol\" id=\"1f8095d5a2694\" class=\"uicontrol\"><b>安全</b></b>目录中，双击<b data-tag=\"uicontrol\" id=\"1f8095d7a2luy\" class=\"uicontrol\"><b>远程（RDP）连接要求使用指定的安全层</b></b>。 </p><img width=\"500\" placement=\"break\" alt=\"111\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p551393.png\" id=\"4569afb1a2i47\" class=\"image break\"></li><li id=\"8cd4551196ix0\"><p id=\"2c1a8f3596yhz\">在弹出对话框中选择<b data-tag=\"uicontrol\" id=\"1f80bcd1a2uvm\" class=\"uicontrol\"><b>已启用</b></b>，在<b data-tag=\"uicontrol\" id=\"1f80bcd3a2d2t\" class=\"uicontrol\"><b>安全层</b></b>选项中选择<b data-tag=\"uicontrol\" id=\"1f80bcd5a2i2m\" class=\"uicontrol\"><b>RDP</b></b>，单击<b data-tag=\"uicontrol\" id=\"1f80bcd7a2rye\" class=\"uicontrol\"><b>确定</b></b>。</p><img width=\"500\" placement=\"break\" alt=\"222\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p551395.png\" id=\"47755e31a2mab\" class=\"image break\"></li><li id=\"06857061968oo\"><p id=\"2c1a8f36968cd\">执行以下命令，完成策略更新，使以上的设置生效。</p><ol id=\"1cece9a196uu4\"><li id=\"1ca77c3196lvp\"><p id=\"2c1a8f3796p2s\">右键单击<img placement=\"inline\" id=\"23fdfea1961dx\" width=\"25\" alt=\"Dingtalk_20210510142550.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"14b19190a2uhk\" class=\"uicontrol\"><b>运</b><b>行(</b><b>R)</b></b>，输入<code data-tag=\"code\" class=\"code\">cmd</code>命令，打开命令行。</p></li><li id=\"5725d9b1965c4\"><p id=\"2c1a8f3896r10\">执行<code data-tag=\"code\" class=\"code\">gpupdate</code>命令，完成策略更新。</p><p id=\"2c1a8f3996bmi\">系统显示类似如下图，表示用户策略更新成功完成。</p><img id=\"4ad81131a2daz\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p518787.png\" alt=\"\" width=\"340\" class=\"image break\"></li></ol></li><li id=\"935e434196zr5\"><p id=\"2c1ab640962fz\">重新进行远程连接，确认问题已经修复。</p></li></ol></section></section><section id=\"7d0a770097z12\" class=\"section\"><h2 id=\"aa107590965wq\">相关文档</h2><p id=\"aa10759396yb1\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/solution-to-failure-in-remote-connection-to-windows-instance\">无法远程连接Windows实例的排查方法</a></p></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-server-2012-instances-of-ecs-system-can-t-allow-a-single-user-to-connect-multiple-remote-desktop-session", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>Windows Server 2012系统的ECS实例无法允许单个用户连接多个远程桌面会话怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows Server 2012系统的ECS实例无法允许单个用户连接多个远程桌面会话怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-09 13:58:37</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"97de3bd09fk92\"><p id=\"97e149189f2ur\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍Windows Server 2012系统的ECS实例设置允许单个用户连接多个远程桌面会话的方法。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"a0f5ddf0a25n5\" class=\"section\"><h2 id=\"fbf78390a2hup\"><b>问题现象</b></h2><p id=\"08aa97c0a24d6\">通过远程桌面连接Windows Server 2012系统的ECS实例时，无法允许单个用户连接多个远程桌面会话。</p></section><section id=\"a2be41e0a2pl9\" class=\"section\"><h2 id=\"ffe0cbb0a2f1x\"><b>问题原因</b></h2><p id=\"0d41c890a27r6\">Windows 2012系统的ECS实例默认只允许单个用户连接一个远程桌面会话，如果已存在一个远程桌面会话，当另一个远程桌面会话连接时会移除之前的远程桌面会话。</p></section><section id=\"6ecf33509foqj\" class=\"section\"><h2 id=\"4fd8618c\">解决方案</h2><p id=\"72c41e71a3v2a\">参考以下操作步骤修改注册表中<code data-tag=\"code\" class=\"code\">fSingleSessionPerUser</code>的键值。</p><div id=\"16b41a909facu\" type=\"important\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"97e1491b9fpgc\">该操作包含注册表配置，错误的注册表配置可能导致系统蓝屏、数据丢失。请您操作前务必对系统盘、数据盘创建快照后进行。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol id=\"44a7163095tgv\"><li id=\"44a7163195o4e\"><p id=\"afe813109fv53\">通过VNC连接Windows实例。</p><p id=\"afe813119fhun\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"44a7163495x61\"><p id=\"afe813129fivb\">右键单击<img id=\"53ca3011a33ab\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530260.png\" alt=\"win2012开始图标\" placement=\"inline\" width=\"25\" height=\"25\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"514d7042a3g8p\" class=\"uicontrol\">运行</b>，在<b data-tag=\"uicontrol\" id=\"514d9750a3k6e\" class=\"uicontrol\">运行</b>对话框中输入<code data-tag=\"code\" class=\"code\">regedit</code>，单击<b data-tag=\"uicontrol\" id=\"514d9751a3d6x\" class=\"uicontrol\">确定</b>，进入<b data-tag=\"uicontrol\" id=\"514d9752a38ij\" class=\"uicontrol\">注册表编辑器</b>窗口。<img placement=\"break\" alt=\"win2016运行窗口\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530516.png\" id=\"514d9753a3iby\" class=\"image break\"></p></li><li id=\"44a7164295la8\"><p id=\"afe83a209fgsd\">在<b data-tag=\"uicontrol\" id=\"498ba2f9a27n2\" class=\"uicontrol\">注册表编辑器</b>页面的<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server</code>路径下，右侧找到<b data-tag=\"uicontrol\" id=\"498ba2fca2pqf\" class=\"uicontrol\">fSingleSessionPerUser</b>键值。<img id=\"41ec39109f5uj\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3115794761/p552522.png\" alt=\"1\" placement=\"break\" width=\"600\" class=\"image break\"></p></li><li id=\"97e170209fyxy\"><p id=\"97e170219fn4q\">双击<b data-tag=\"uicontrol\" id=\"498bca04a2nox\" class=\"uicontrol\">fSingleSessionPerUser</b>键值，将<b data-tag=\"uicontrol\" id=\"498bca06a2pd4\" class=\"uicontrol\">数值数据</b>框中内容修改为<b data-tag=\"uicontrol\" id=\"498bca08a2amx\" class=\"uicontrol\">0</b>（默认键值是<b>1</b>），单击<b data-tag=\"uicontrol\" id=\"498bca0ba2f0i\" class=\"uicontrol\">确定</b>。<img id=\"5dd41fc19f9wk\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4115794761/p552523.png\" alt=\"2\" placement=\"break\" class=\"image break\"></p></li><li id=\"5b1c79d19fmzf\"><p id=\"5b1c79d09fxz5\">进行远程桌面会话连接。</p><p id=\"0da7b8809fdl8\">若多个远程桌面会话连接成功，则表示该问题已解决。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-allow-remote-assistance-connections-to-this-computer-option-in-remote-assistance-cannot-be-selected-for-an-instance-that-runs-windows-server-2008-or-2012", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>Windows Server 2008与2012系统的ECS实例无法启用远程协助中的“允许远程协助连接这台计算机”选项怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows Server 2008与2012系统的ECS实例无法启用远程协助中的“允许远程协助连接这台计算机”选项怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:45:19</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"f2f1a3608c8gn\"><p data-tag=\"shortdesc\" id=\"f2f992a08chjr\" class=\"shortdesc\">本文介绍在Windows Server 2008与2012系统的ECS实例中，无法启用远程协助中的“允许远程协助连接这台计算机”选项问题的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"cc3352a09fcgm\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"f2f9b9b08c6bi\">Windows Server 2008与2012系统的ECS实例在开启远程协助时，会出现远程协助灰色并无法选中开启的情况。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5206135761/p518836.png\" id=\"1350fab1a21gh\" class=\"image break\"></section><section id=\"c9bd70a09fq3a\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"f2f9b9b38c6px\">Windows Server 2008与2012系统的ECS实例内未安装远程协助功能。</p></section><section id=\"c5321c209f6s7\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"f2f9e0c88cxmg\">以下操作包含Windows Server 2008与2012两种系统版本的解决方案，请根据实际情况，选择对应的方案进行修复。</p><h3 id=\"75eedc609fs9f\"><b>Windows Server 2008</b></h3><ol id=\"f2fa07d28cps0\"><li id=\"f2fa07d38crkp\"><p id=\"e04fadf19fcdv\">远程登录ECS实例。</p><p id=\"e04fadf29f0nj\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"d5744a809f6nt\"><p id=\"d57423709fmzx\">选择<b data-tag=\"uicontrol\" id=\"19de4879a2j51\" class=\"uicontrol\">开始 &gt; 控制面板 &gt; 管理工具 &gt; 服务器管理器 &gt; 功能</b>， 单击右侧<b data-tag=\"uicontrol\" id=\"19de487ba2ydd\" class=\"uicontrol\">添加功能</b><b>。</b></p><img width=\"550\" height=\"342\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4206135761/p518837.png\" id=\"171f19b1a2saa\" class=\"image break\"></li><li id=\"f2fa07d58ct53\"><p id=\"f2fa07d68cnit\">在功能列表里找到并选中<b data-tag=\"uicontrol\" id=\"19de6f83a2gt1\" class=\"uicontrol\">远程协助</b>，单击<b data-tag=\"uicontrol\" id=\"19de6f85a2kgc\" class=\"uicontrol\">下一步</b>直到完成。</p><img height=\"405\" width=\"550\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4206135761/p518838.png\" id=\"1a6f7d31a241g\" class=\"image break\"></li></ol><h3 id=\"7f3632509fm9q\"><b>Windows Server 2012</b></h3><ol id=\"f2fa07d98c26x\"><li id=\"f2fa07da8cqpi\"><p id=\"d23f7c41a8dkz\">远程登录ECS实例。</p><p id=\"d23f7c42a84au\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"e6d069d19fnla\"><p id=\"e6d069d09fb2u\">单击Winodws任务栏的<b data-tag=\"uicontrol\" id=\"19de6f91a2ukc\" class=\"uicontrol\">服务器管理器</b><b>。</b></p><img width=\"550\" placement=\"break\" alt=\"image\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4206135761/p552540.png\" id=\"1f2cde31a2ekz\" class=\"image break\"></li><li id=\"f2fa2ee18cr23\"><p id=\"f2fa2ee28cycg\">在弹出的<b data-tag=\"uicontrol\" id=\"19de9691a2d71\" class=\"uicontrol\">服务器管理器</b>窗口，单击右侧<b data-tag=\"uicontrol\" id=\"19de9693a2ewt\" class=\"uicontrol\">添加角色和功能</b><b>。</b></p><img width=\"550\" placement=\"break\" alt=\"image\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4206135761/p552539.png\" id=\"20cf91b1a2ym9\" class=\"image break\"></li><li id=\"f2fa2ee48csc3\"><p id=\"f2fa2ee58c202\">在弹出的<b data-tag=\"uicontrol\" id=\"19de969aa2uhh\" class=\"uicontrol\">添加角色和功能向导</b>中，单击<b data-tag=\"uicontrol\" id=\"19de969ca2pwv\" class=\"uicontrol\">下一步</b>直到<b data-tag=\"uicontrol\" id=\"19de969ea23ih\" class=\"uicontrol\">功能</b>设置部分，找到并选中<b data-tag=\"uicontrol\" id=\"19debda0a24sy\" class=\"uicontrol\">远程协助，</b>单击<b data-tag=\"uicontrol\" id=\"19debda2a23ic\" class=\"uicontrol\">下一步</b>直到完成。</p><img placement=\"break\" width=\"550\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4206135761/p518839.png\" id=\"2358fbb1a229b\" class=\"image break\"></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-error-message-no-remote-desktop-license-server-is-specified-appears-when-i-connect-to-a-windows-server-2008-r2-instance-by-using-remote-desktop", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows Server 2008 R2系统的ECS实例时，提示“未指定远程桌面授权服务器”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows Server 2008 R2系统的ECS实例时，提示“未指定远程桌面授权服务器”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-10 10:33:05</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main><p data-tag=\"shortdesc\" class=\"shortdesc\" id=\"8b6fa408beq8w\">本文介绍通过远程桌面连接Windows Server 2008 R2系统的ECS实例时，提示“未指定远程桌面授权服务器”错误的解决方案。</p><div data-tag=\"body\" class=\"body\"><section class=\"section\" id=\"8b6fa409beh23\"><h2 id=\"8b6fa40abemdb\"><b>问题现象</b></h2><p id=\"8b6fcb10beqpw\">通过远程桌面连接Windows Server 2008 R2系统的ECS实例时，提示“<b data-tag=\"uicontrol\" id=\"2f83e1f0bevnm\" class=\"uicontrol\"><b>未指定远程桌面授权服务器</b></b>”错误。</p></section><section class=\"section\" id=\"8b6ff220be7p9\"><h2 id=\"8b6ff221be0j5\"><b>问题原因</b></h2><p id=\"8b6ff222bemyq\">Windows Server 2008 R2操作系统默认安装了远程桌面角色，但该角色只有120天免费使用期，到期后需要向微软官方付费购买相关授权。</p></section><section class=\"section\" id=\"8b6ff223ben5d\"><h2 id=\"8b6ff224be7zx\">解决方案</h2><p id=\"8b6ff225be8k1\">根据实际情况，选择对应解决方案进行修复。</p><ul id=\"8b6ff226beh0z\"><li id=\"8b6ff227be8ni\"><p id=\"8b6ff228benpv\">如果不需要大于2个用户同时连接远程桌面，请参考<a title=\"\" class=\"xref\" href=\"#8b6ff22cbec32\">方案一：卸载远程桌面会话主机服务</a>进行操作。</p></li><li id=\"8b6ff229befvs\"><p id=\"8b6ff22abekly\">如果需要使用多个用户同时连接远程桌面，请参考<a title=\"\" class=\"xref\" href=\"#8b701937belyv\">方案二：配置远程桌面授权服务器</a>进行操作。</p></li></ul><section class=\"section\" id=\"8b6ff22bbe77o\"><h3 id=\"8b6ff22cbec32\"><b>方案一：卸载远程桌面会话主机服务</b></h3><ol id=\"8b6ff22dbeo4c\"><li id=\"8b6ff22ebeot6\"><p id=\"8b6ff22fbef1j\">通过VNC连接Windows实例。</p><p id=\"8b6ff230befgp\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"8b701930beidj\"><p id=\"8b701931bekmi\">右键单击<b data-tag=\"uicontrol\" class=\"uicontrol\" id=\"8b6e447abeqah\"><b>我的电脑</b></b>，然后单击<b data-tag=\"uicontrol\" class=\"uicontrol\" id=\"8b6e447cbeep8\"><b>管理</b></b>，打开<b data-tag=\"uicontrol\" class=\"uicontrol\" id=\"8b6e447ebelvv\"><b>服务器管理器</b></b><b>。</b></p></li><li id=\"8b701932beme2\"><p id=\"8b701933be76o\">在弹出的<b data-tag=\"uicontrol\" class=\"uicontrol\" id=\"8b6e4483bedfk\"><b>服务器管理器</b></b>界面中单击<b data-tag=\"uicontrol\" class=\"uicontrol\" id=\"8b6e4485ben7u\"><b>角色</b></b>，然后单击右侧<b data-tag=\"uicontrol\" class=\"uicontrol\" id=\"8b6e4487bem9n\"><b>删除角色</b></b><b>。</b></p></li><li id=\"8b701934beq49\"><p id=\"8b701935be04p\">在弹出的界面中，选择<b data-tag=\"uicontrol\" class=\"uicontrol\" id=\"8b6e6b83beblw\"><b>远程桌面服务</b></b>删除该付费角色。</p><img id=\"962bca30bed38\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2933438761/p580607.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li><li id=\"d0e78961be0mg\"><p id=\"d0e78960befrg\">重新通过远程桌面连接实例，确认问题已修复。\n</p></li></ol></section><section class=\"section\" id=\"8b701936be7c7\"><h3 id=\"8b701937belyv\"><b>方案二：配置远程桌面授权服务器</b></h3><p id=\"8b701938bea03\">如果需要使用多个用户同时连接远程桌面，请参考如下文档进行操作。</p><p id=\"5f1d6f70beprz\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/remote-connections-to-windows-server-instances-and-license-authorized-servers\">Windows Server实例远程连接数以及License授权服务器的相关说明</a></p></section></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/because-of-a-protocol-error-this-session-will-be-disconnected-please-try-connecting-to-the-remote-computer-again", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例提示“由于协议错误，会话将被中断，请重新连接到远程计算机”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例提示“由于协议错误，会话将被中断，请重新连接到远程计算机”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-15 17:20:31</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2289734\"><p data-tag=\"shortdesc\" id=\"1908aaa9958oi\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例提示“由于协议错误，会话将被中断。请重新连接到远程计算机。”错误的解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"66a7d47096rhm\" class=\"section\"><h2 data-lake-id=\"7e5ee25ca606883aba99127ff75f24c8_h2_0\" id=\"2ac84e0096mgz\">问题描述</h2><p id=\"2ac84e01969hm\">远程连接Windows系统的ECS实例时，提示协议错误。具体的报错显示如下：</p><img id=\"d53b26e0a1eqs\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9719215761/p553771.png\" alt=\"116\" placement=\"break\" class=\"image break\"></section><section id=\"69422e6096v5f\" class=\"section\"><h2 id=\"2ac84e0396xiu\">问题原因</h2><p id=\"2ac84e0496t5a\">可能导致该问题的部分原因如下：</p><ul id=\"2ac84e0596tw1\"><li id=\"2ac84e0696u59\"><p id=\"2ac84e0796n12\"><b data-tag=\"uicontrol\" id=\"69dd2a87b34mi\" class=\"uicontrol\">目标实例的远程会话配置错误</b>。当远程会话配置错误，远程连接时会出现协议错误的提示。请参考<a title=\"\" class=\"xref\" href=\"#9953b67096no9\">方案一：修改目标实例的远程会话配置</a>进行修复。</p></li><li id=\"2ac84e0896d33\"><p id=\"2ac84e0996cg0\"><b data-tag=\"uicontrol\" id=\"69dd2a8cb3ppf\" class=\"uicontrol\">目标实例的远程连接端口被其他应用占用</b>。Windows系统默认远程桌面连接端口号为3389，当该端口被其他程序占用时，远程连接服务将无法正常运行。请参考<a title=\"\" class=\"xref\" href=\"#9c2043f096ntw\">方案二：修改远程连接端口号</a>或<a title=\"\" class=\"xref\" href=\"#cc1ecb8096c33\">方案三：关闭占用远程连接端口的应用进程</a>进行修复。</p></li></ul></section><section id=\"6dba490096x00\" class=\"section\"><h2 id=\"2ac84e0a96l22\">解决方案</h2><p id=\"63faca9096aq6\">根据实际情况，选择对应方案进行解决。本文以Windows Server 2016操作系统为例。</p><section id=\"936b7c5096i75\" class=\"section\"><h3 id=\"9953b67096no9\"><b>方案一：修改目标实例的远程会话配置</b></h3><ol id=\"6022f22296h99\"><li id=\"6022f220962lc\"><p id=\"c2014c2096789\">通过VNC连接Windows实例。</p><p id=\"c57b57b096bk4\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"6158da11969zv\"><p id=\"6158da1096hw2\">右键单击<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"65a10b1196i5t\" placement=\"inline\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"69dd5198b3saw\" class=\"uicontrol\">运行(R)</b>，输入<code data-tag=\"code\" class=\"code\">gpedit.msc</code>命令，打开<b data-tag=\"uicontrol\" id=\"69dd519bb3s8b\" class=\"uicontrol\">本地组策略编辑器</b><b>。</b></p></li><li id=\"8d4d722196rka\"><p id=\"8d4d722096zo5\">在<b data-tag=\"uicontrol\" id=\"69dd51a0b3i5x\" class=\"uicontrol\">本地组策略编辑器</b>窗口，选择<b data-tag=\"uicontrol\" id=\"69dd51a2b3lqt\" class=\"uicontrol\">计算机配置 &gt; 管理模板 &gt; Windows 组件 &gt; 远程桌面服务 &gt; 远程桌面会话主机 &gt; 安全</b>。</p></li><li id=\"1e5855f1969xn\"><p id=\"1cb5063096v5y\">在<b data-tag=\"uicontrol\" id=\"69dd51a6b3qq1\" class=\"uicontrol\">安全</b>目录中，双击<b data-tag=\"uicontrol\" id=\"69dd51a8b3sm7\" class=\"uicontrol\">远程（RDP）连接要求使用指定的安全层</b>。 </p><img id=\"67945a2096vzq\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p551393.png\" alt=\"111\" placement=\"break\" width=\"500\" class=\"image break\"></li><li id=\"8cd4551196ix0\"><p id=\"8d3a1bc096sjk\">在弹出对话框中选择<b data-tag=\"uicontrol\" id=\"69dd78a5b36ll\" class=\"uicontrol\">已启用</b> ，在<b data-tag=\"uicontrol\" id=\"69dd78a7b3hrn\" class=\"uicontrol\">安全层</b>选项中选择<b data-tag=\"uicontrol\" id=\"69dd78a9b3pud\" class=\"uicontrol\">RDP</b>，单击<b data-tag=\"uicontrol\" id=\"69dd78abb3yj4\" class=\"uicontrol\">确定</b>。<img id=\"05273ff1966mu\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p551395.png\" alt=\"222\" placement=\"break\" width=\"500\" class=\"image break\"></p></li><li id=\"06857061968oo\"><p id=\"1667c0f096ncr\">执行以下命令，完成策略更新，使以上的设置生效。</p><ol id=\"1cece9a196uu4\"><li id=\"1ca77c3196lvp\"><p id=\"23fdfea096pt1\">右键单击<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"23fdfea1961dx\" placement=\"inline\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"69dd78b4b3vm1\" class=\"uicontrol\">运行(R)</b>，输入<code data-tag=\"code\" class=\"code\">cmd</code>命令，打开命令行。</p></li><li id=\"5725d9b1965c4\"><p id=\"63611b4096c0f\">执行<code data-tag=\"code\" class=\"code\">gpupdate</code>命令，完成策略更新。</p><p id=\"72b4724096vc7\">系统显示类似如下图。</p><img width=\"340\" alt=\"\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p518787.png\" id=\"88b6c111969c1\" class=\"image break\"></li></ol></li><li id=\"935e434196zr5\"><p id=\"984e741096kvh\">再次进行远程连接，确认问题已经修复。</p></li></ol></section><section id=\"890e97b096qlg\" class=\"section\"><h3 id=\"9c2043f096ntw\"><b>方案二：修改远程连接端口号</b></h3><ol id=\"bbf5cda096sab\"><li id=\"bbf5cda196mfv\"><p id=\"d39bfb1196xun\">通过VNC连接Windows实例。</p><p id=\"d39bfb1296xkc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"bbf5cda396n7c\"><p id=\"bbf5cda496wkt\">右键单击<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"bbf5cda5967nl\" placement=\"inline\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"69dd9fbcb3k5v\" class=\"uicontrol\">运行(R)</b>，输入<code data-tag=\"code\" class=\"code\">regedit</code>，打开<b data-tag=\"uicontrol\" id=\"69dd9fbfb3pbv\" class=\"uicontrol\">注册表编辑器</b><b>。</b></p></li><li id=\"bbf5cda696ddq\"><p id=\"bbf5cda7960jf\">在<b data-tag=\"uicontrol\" id=\"69dd9fc4b3rvq\" class=\"uicontrol\">注册表编辑器</b>窗口，依次进入以下目录。</p><pre id=\"xofoae\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\WinStations\\RDP-Tcp</code></pre></li><li id=\"2aed174096smf\"><p id=\"cb056f7096s40\">双击<b data-tag=\"uicontrol\" id=\"69ddc6c1b3afl\" class=\"uicontrol\">RDP-Tcp</b>目录中名称为<b data-tag=\"uicontrol\" id=\"69ddc6c3b33vw\" class=\"uicontrol\">PortNumber</b>的注册表项。<img id=\"d9706241961ky\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p551408.png\" alt=\"112\" placement=\"break\" width=\"500\" class=\"image break\"></p></li><li id=\"da9c5f2196s10\"><p id=\"da9c5f20967ln\">在编辑页面中，选择<b data-tag=\"uicontrol\" id=\"69ddc6c8b38d2\" class=\"uicontrol\">基数</b>选项中的<b data-tag=\"uicontrol\" id=\"69ddc6cab3y5f\" class=\"uicontrol\">十进制</b>，修改<b data-tag=\"uicontrol\" id=\"69ddc6ccb3ajy\" class=\"uicontrol\">数值数据</b>中的值，该值即为远程桌面使用的端口号。</p><img id=\"9f4d9cd196rpa\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p551412.png\" alt=\"113\" placement=\"break\" class=\"image break\"><div type=\"note\" id=\"aa6d835096xbv\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"aa9c829096a0i\">图中的3389端口号为远程连接的默认端口号，仅作为示例。请根据实际情况修改成所需的端口号</p></div></div></li><li id=\"6ca1cf9196mq1\"><p id=\"81996520961vj\">重启Windows实例以更新配置。</p><ul id=\"85fac37196agm\"><li id=\"85119bf196n6x\"><p id=\"85119bf096iqx\">方式一：在ECS控制台上重启Windows实例，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li><li id=\"88c26ef096mih\"><p id=\"88c247e096vkl\">方式二：在远程连接的Windows实例上，选择<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"8f496c6196hhs\" placement=\"inline\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"69ddc6dbb31tl\" class=\"uicontrol\"> &gt; </b><img width=\"25\" placement=\"inline\" alt=\"电源管理\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530476.png\" id=\"90720de1965mv\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"69ddedd1b3d6w\" class=\"uicontrol\"> &gt; 重启</b>。</p><img placement=\"break\" alt=\"win2016重启服务器\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530473.png\" id=\"989cf75196toj\" class=\"image break\"></li></ul></li></ol></section><section id=\"821b6af096whs\" class=\"section\"><h3 id=\"cc1ecb8096c33\"><b>方案三：关闭占用远程连接端口的应用进程</b></h3><ol id=\"c23b6a6096jow\"><li id=\"c23b6a619647v\"><p id=\"e25102e1969pt\">通过VNC连接Windows实例。</p><p id=\"e25102e296jtu\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"c23b6a6396lw9\"><p id=\"c23b6a6496vyw\">右键单击<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"c23b6a6596x26\" placement=\"inline\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"69ddede0b3kom\" class=\"uicontrol\">运行(R)</b>，输入<code data-tag=\"code\" class=\"code\">cmd</code>命令，打开<b data-tag=\"uicontrol\" id=\"69ddede3b38vz\" class=\"uicontrol\">命令行</b><b>。</b></p></li><li id=\"3503b93196uxh\"><p id=\"3527e300960hs\">执行以下命令，获取占用远程连接端口的进程号<b data-tag=\"uicontrol\" id=\"69ddede8b36kg\" class=\"uicontrol\">（PID）</b>。</p><pre id=\"crosng\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -ano |findstr 3389</code></pre><div type=\"note\" id=\"4b2f3ae096n7m\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"4b533da096bsi\">此处以远程连接默认端口号3389为例，需要以实际情况为准。</p></div></div></li><li id=\"42ff486196vic\"><p id=\"55dcd79096brl\">执行以下命令，根据PID查看进程对应的应用程序。</p><p id=\"dc5fe76096w6a\">正常情况下，远程连接端口被svchost.exe进程占用。如果远程连接端口被svchost.exe之外的进程占用，则表明远程连接端口的确被其他应用所占用。</p><pre id=\"qdmnga\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>tasklist |findstr [$PID]</code></pre><div type=\"note\" id=\"5d134ee1968bn\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"6094d48096870\">[$PID]指上一步获取的PID。</p></div></div></li><li id=\"650db27196o8a\"><p id=\"6a9fc89096ecj\">您可以执行以下命令，根据PID关闭指定的进程，释放被占用的远程连接端口。 </p><div type=\"important\" id=\"60707860a11qw\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"5d97b5e0a1n19\">关闭进程属于风险操作，请确保关闭进程后不影响业务运行，方可执行此操作。</p></div></div><pre id=\"bg9ixw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>taskkill /f /pid [$PID]</code></pre></li><li id=\"d1e1a6e19691s\"><p id=\"d7ffd06096q38\">再次进行远程连接，确认问题已经修复。</p></li></ol></section></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-error-message-that-indicates-lack-of-terminal-server-user-access-permissions-appears-when-i-connect-to-a-windows-instance-by-using-remote-desktop", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例提示“远程桌面用户组没有该权限”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例提示“远程桌面用户组没有该权限”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:44:54</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"main-2289732\"><p id=\"f3fba69995hi6\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例提示“远程桌面用户组没有该权限”错误的解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"261c1280a0l7y\" class=\"section\"><h2 id=\"1c8a750495y7b\"><b>问题描述</b></h2><p id=\"1c8a750595goy\">本地客户端通过远程桌面连接Windows实例时提示“远程桌面用户组没有该权限”错误</p><img width=\"550\" placement=\"break\" alt=\"117\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5472705761/p553680.png\" id=\"618c5f30a08na\" class=\"image break\"></section><section id=\"2d888df0a0jh2\" class=\"section\"><h2 id=\"1c8a750795i0o\"><b>问题原因</b></h2><p id=\"1c8a750895q9l\">无法远程连接Windows实例可能有以下两种原因：</p><ul id=\"1c8a750995g8w\"><li id=\"1c8a750a95zri\"><p id=\"1c8a750b9589z\">ECS实例内的本地安全策略配置不正确。请参考<a title=\"\" class=\"xref\" href=\"#b28dd19195j91\">方案一：修改本地安全策略</a>进行修复。</p></li><li id=\"1c8a750c95jtb\"><p id=\"1c8a750d95y0t\">ECS实例未添加普通用户远程登录的权限。请参考<a title=\"\" class=\"xref\" href=\"#52768e4095ywc\">方案二：为普通用户增加远程登录权限</a>进行修复。</p></li></ul></section><section id=\"3696ab70a0mvu\" class=\"section\"><h2 id=\"1c8a750e95ewa\">解决方案</h2><p id=\"1912a17195jok\">根据实际情况，选择对应方案进行解决。本文以Windows Server 2012操作系统为例。</p><section id=\"eb556c9096nt8\" class=\"section\"><h3 id=\"b28dd19195j91\"><b>方案一：修改本地安全策略</b></h3><ol id=\"1c8a752095gon\"><li id=\"1c8a752195j0k\"><p id=\"604a746195wni\">通过VNC连接Windows实例。</p><p id=\"b33c765096q6y\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"688626b195mm9\"><p id=\"8d37c45095870\">右键单击<b data-tag=\"uicontrol\" id=\"03e6df0fb3i52\" class=\"uicontrol\"><b>开始</b></b>，然后单击<b data-tag=\"uicontrol\" id=\"03e6df11b30gl\" class=\"uicontrol\"><b>运行</b></b>。在<b data-tag=\"uicontrol\" id=\"03e6df13b3e9a\" class=\"uicontrol\"><b>运行</b></b>对话框中输入<code data-tag=\"code\" class=\"code\">gpedit.msc</code>命令，然后单击<b data-tag=\"uicontrol\" id=\"03e70611b3kbw\" class=\"uicontrol\"><b>确定</b></b>，进入本地组策略编辑器页面。</p><img id=\"47fcc10196pxi\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6514683761/p518796.png\" placement=\"break\" class=\"image break\"></li><li id=\"e7a618b195rqx\"><p id=\"1c8a752595xhk\">在<b data-tag=\"uicontrol\" id=\"03e70617b3tnh\" class=\"uicontrol\"><b>本地组策略编辑器</b></b>页面中，单击<b data-tag=\"uicontrol\" id=\"03e70619b3raw\" class=\"uicontrol\"><b>计算机配置 &gt; Windows设置 &gt; 安全设置 &gt; 本地策略 &gt; 用户权限分配</b></b>。 <img id=\"875dda5095dkf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5514683761/p551248.png\" alt=\"5\" placement=\"break\" width=\"500\" class=\"image break\"></p></li><li id=\"1c8a752795ti0\"><p id=\"1c8a752895w3x\">在<b data-tag=\"uicontrol\" id=\"03e7061eb3gvf\" class=\"uicontrol\"><b>用户权限分配</b></b>页面中，双击<b data-tag=\"uicontrol\" id=\"03e70620b3teo\" class=\"uicontrol\"><b>拒绝通过远程桌面服务登录</b></b>，进入<b data-tag=\"uicontrol\" id=\"03e70622b34ep\" class=\"uicontrol\"><b>拒绝</b><b>通过远程桌面服务登录 属性</b></b>窗口。 <img id=\"17bdff30951t8\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5514683761/p551251.png\" alt=\"6\" placement=\"break\" width=\"500\" class=\"image break\"></p></li><li id=\"1c8a752a95ln1\"><p id=\"1c8a752b9583h\">在<b data-tag=\"uicontrol\" id=\"03e70627b34ck\" class=\"uicontrol\"><b>拒绝</b><b>通过远程桌面服务登录 属性</b></b>窗口中，查看有无<b data-tag=\"uicontrol\" id=\"03e72d20b3jf5\" class=\"uicontrol\"><b>Remote Desktop Users</b></b>和需要登录的域用户账号，如果存在请删除。</p></li><li id=\"1c8a752c95qtz\"><p id=\"1c8a752d95qce\">在<b data-tag=\"uicontrol\" id=\"03e72d24b3nkg\" class=\"uicontrol\"><b>用户权限分配</b></b>页面中，双击<b data-tag=\"uicontrol\" id=\"03e72d26b3tvf\" class=\"uicontrol\"><b>允许通过远程桌面服务登录</b></b>，进入<b data-tag=\"uicontrol\" id=\"03e72d28b3fmc\" class=\"uicontrol\"><b>允许</b><b>通过远程桌面服务登录 属性</b></b>窗口。</p></li><li id=\"1c8a752f95itq\"><p id=\"1c8a753095s2s\">在<b>允</b><b data-tag=\"uicontrol\" id=\"03e72d2db3dxi\" class=\"uicontrol\"><b>许</b><b>通过远程桌面服务登录 属性</b></b>窗口中，查看有无<b data-tag=\"uicontrol\" id=\"03e72d2fb35op\" class=\"uicontrol\"><b>Remote Desktop Users</b></b>和需要登录的域用户账号，如果没有请添加。 </p></li><li id=\"1c8a753395726\"><p id=\"1c8a753495ksl\">使用新添加的用户在另一台主机上远程登录Windows实例， 确认可以正常远程连接Windows实例。</p></li></ol></section><section id=\"ef6612d096giw\" class=\"section\"><h3 id=\"52768e4095ywc\"><b>方案二：为普通用户增加远程登录权限</b></h3><ol id=\"5e5f159395h45\"><li id=\"5e5f159095l3l\"><p id=\"b501a5f1963r9\">通过VNC连接Windows实例。</p><p id=\"b501a5f296che\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"231589c195exy\"><p id=\"231589c0952fo\">进入<b data-tag=\"uicontrol\" id=\"03e75434b3u65\" class=\"uicontrol\"><b>计算机管理</b></b>页面。</p><ol id=\"44ac04b195it6\"><li id=\"43f733a1951p2\"><p id=\"43f733a09551n\">选择<b data-tag=\"uicontrol\" id=\"03e75439b3s8o\" class=\"uicontrol\"><b>开始</b></b>，单击<b data-tag=\"uicontrol\" id=\"03e7543bb36m5\" class=\"uicontrol\"><b>服务器管理器</b></b>。</p></li><li id=\"8218817195qiz\"><p id=\"8218817095hjj\">在<b data-tag=\"uicontrol\" id=\"03e7543fb3ajz\" class=\"uicontrol\"><b>服务器管理器</b></b>页面，单击<b data-tag=\"uicontrol\" id=\"03e75441b3bp1\" class=\"uicontrol\"><b>所有服务器</b></b>，在服务器框中，右键单击对应的服务器，单击<b data-tag=\"uicontrol\" id=\"03e75443b3w4j\" class=\"uicontrol\"><b>计算机管理</b></b>。<img id=\"e9dd727195lyw\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5514683761/p551220.png\" alt=\"1\" placement=\"break\" width=\"600\" class=\"image break\"></p></li></ol></li><li id=\"eb3efe41952ok\"><p id=\"eb3efe40954hg\">在<b data-tag=\"uicontrol\" id=\"03e75448b3g54\" class=\"uicontrol\"><b>计算机管理</b></b>页面，右键单击<b data-tag=\"uicontrol\" id=\"03e7544ab3q0d\" class=\"uicontrol\"><b>系统工具 &gt; 本地用户和组 &gt; 用户</b></b>，单击<b data-tag=\"uicontrol\" id=\"03e77b40b3k21\" class=\"uicontrol\"><b>新用</b><b>户(</b><b>N)，</b></b>在<b data-tag=\"uicontrol\" id=\"03e77b42b3bd5\" class=\"uicontrol\"><b>新用户</b></b>对话框中新建一个对应的用户，本文以新建<b data-tag=\"uicontrol\" id=\"03e77b44b3jel\" class=\"uicontrol\"><b>test</b></b>用户为例。 </p><img id=\"f0d03490950n1\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6514683761/p551228.png\" alt=\"2\" placement=\"break\" class=\"image break\"></li><li id=\"1c8a753d95c9o\"><p id=\"1c8a753e955vg\">用户创建成功后，右键单击<b data-tag=\"uicontrol\" id=\"03e77b4ab373v\" class=\"uicontrol\"><b>test</b></b>用户名，选择<b data-tag=\"uicontrol\" id=\"03e77b4cb3hzg\" class=\"uicontrol\"><b>属</b><b>性(</b><b>R) &gt; 隶属于</b></b>，单击<b data-tag=\"uicontrol\" id=\"03e77b4eb3hy4\" class=\"uicontrol\"><b>添加</b></b>，将用户添加到<b data-tag=\"uicontrol\" id=\"03e77b50b3blq\" class=\"uicontrol\"><b>Remote Desktop Users</b></b>组中，此时普通用户就可以远程登录。 <img id=\"d2dd77d095u6c\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5514683761/p551236.png\" alt=\"3\" placement=\"break\" width=\"400\" class=\"image break\"></p><div type=\"note\" id=\"1a22dc20958pa\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"29c00d6095d04\"><b data-tag=\"uicontrol\" id=\"03e77b55b329f\" class=\"uicontrol\"><b>Remote Desktop Users</b></b>组为授权远程登录权限的组，添加到这个组中的用户都被授予远程登录的权限。</p></div></div></li></ol></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-error-message-no-remote-desktop-authorization-server-can-provide-a-license-is-prompted-for-remote-login-to-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例提示“没有远程桌面授权服务器可以提供许可证”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例提示“没有远程桌面授权服务器可以提供许可证”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-12 15:18:00</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2289730\"><p data-tag=\"shortdesc\" id=\"dafba82695qxc\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例提示“没有远程桌面授权服务器可以提供许可证”错误的解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"38b5c07096ef3\" class=\"section\"><h2 id=\"dafba82595v1p\"><b>问题描述</b></h2><p id=\"146fa740951ig\">使用远程桌面连接Windows服务器，输入正确的用户名和密码后，无法正常远程连接，并提示如下错误信息。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7789583761/p518766.png\" alt=\"a.png\" width=\"435\" height=\"170\" id=\"ec89eb4195ojb\" class=\"image break\"></section><section id=\"3d3a854096moa\" class=\"section\"><h2 id=\"df36c680951hb\"><b>问题原因</b></h2><p id=\"3466115095ui2\">无法正常远程连接的原因可能有以下两种：</p><ul id=\"3466115195iht\"><li id=\"3466115295hwa\"><p id=\"3466115395a0q\"><b data-tag=\"uicontrol\" id=\"b8ab841817hyo\" class=\"uicontrol\">其他用户已登录</b>：该账号有其他用户在登录，由于终端服务配置了RDP-TCP限制，每个用户只能进行一个会话，所以其他会话无法建立，请参考<a title=\"\" class=\"xref\" href=\"#da1040a017tbg\">方案二：取消RDP-TCP限制</a>限制进行修复。</p></li><li id=\"34661154958r8\"><p id=\"3466115595aj2\"><b data-tag=\"uicontrol\" id=\"b8abab2217b7n\" class=\"uicontrol\">安装了远程桌面会话主机角色</b>：</p><ul id=\"ebbfbaa117wnx\"><li id=\"e64e24d117dt3\"><p id=\"e718048017ljt\">在配置远程桌面会话主机角色后，会同时取消默认两个用户的免费连接授权。在没有正确配置相关授权的时候，会导致远程桌面无法连接，并出现上述错误提示，请参考<a title=\"\" class=\"xref\" href=\"#eaf3894095nqd\">方案一：删除远程桌面会话主机角色</a>进行修复。</p></li><li id=\"3466115995s5p\"><p id=\"3466115a955ow\">正常情况下Windows服务器默认提供两个用户的免费远程桌面管理授权。如果有更高的连接需求，则需要配置远程桌面会话主机服务器角色，同时购买和配置相应的授权后，才可以使用更多的远程桌面管理并发，请参考<a title=\"\" class=\"xref\" href=\"#a21ad36095qzz\">方案三：购买和配置相应的证书授权</a>进行修复。</p></li><li id=\"3466115b95cgn\"><p id=\"eaa91a801790o\">在系统内安装了远程桌面会话主机角色，此功能免费试用120天，之后需要付费。如果没有付费会造成无法通过远程桌面连接，请参考<a title=\"\" class=\"xref\" href=\"#a21ad36095qzz\">方案三：购买和配置相应的证书授权</a>进行修复。</p></li></ul></li></ul></section><section id=\"4c86894096fen\" class=\"section\"><h2 id=\"e0c814e095d4l\"><b>解决方案</b></h2><p id=\"8ca8417095f6i\">根据实际情况，参考以下三种解决方案：</p><h3 id=\"eaf3894095nqd\"><b>方案一：删除远程桌面会话主机角色</b></h3><p id=\"db6d86b017cw1\">删除远程桌面会话主机角色，使用默认两个用户的免费连接授权。本文以Windows Server 2012操作系统为例。</p><ol id=\"b0c2f973951fw\"><li id=\"b0c2f97095gao\"><p id=\"db6dadc017zwl\">通过VNC连接Windows实例。</p><p id=\"db6dadc117g26\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"b71f3d6195pd7\"><p id=\"db6dadc2171e0\">选择<b data-tag=\"uicontrol\" id=\"b8ace3a417fe9\" class=\"uicontrol\">开始</b>，单击<b data-tag=\"uicontrol\" id=\"b8ace3a6176b5\" class=\"uicontrol\">运行</b>，在打开框中输入<code data-tag=\"code\" class=\"code\">ServerManager</code>，单击<b data-tag=\"uicontrol\" id=\"b8ace3a917e9c\" class=\"uicontrol\">确定</b>。</p></li><li id=\"b71f3d6395dhh\"><p id=\"db6dadc317275\">进入<b data-tag=\"uicontrol\" id=\"b8ace3ad175xc\" class=\"uicontrol\">服务器管理器</b>页面，<b data-tag=\"uicontrol\" id=\"b8ace3af17kug\" class=\"uicontrol\">选择管理 &gt; 删除角色和功能</b>。 <img width=\"600\" id=\"b71f3d6595ew7\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6789583761/p518771.png\" class=\"image break\"></p></li><li id=\"b71f3d6695d3c\"><p id=\"db6dd4d017oem\">进入删除功能和角色页面，选择<b data-tag=\"uicontrol\" id=\"b8ad0ab317ckq\" class=\"uicontrol\">服务器角色</b>。</p></li><li id=\"b71f3d6895lfo\"><p id=\"db6dd4d117q5r\">在<b>角</b><b data-tag=\"uicontrol\" id=\"b8ad0ab8176hy\" class=\"uicontrol\">色</b>框中，取消勾选<b data-tag=\"uicontrol\" id=\"b8ad0aba176ya\" class=\"uicontrol\">远程桌面服务</b>，其它配置默认，单击<b data-tag=\"uicontrol\" id=\"b8ad0abc17w7n\" class=\"uicontrol\">下一步</b>。</p></li><li id=\"b71f3d6a95bpz\"><p id=\"db6dd4d2176wl\">重启Windows实例或重启服务器以完成安装更新。</p><ul id=\"71b1b0e295v9h\"><li id=\"71b1b0e39524w\"><p id=\"db6dd4d317zuq\">方式一：在ECS控制台上重启Windows实例，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li><li id=\"71b1b0e5952j7\"><p id=\"db6dd4d417l87\">方式二：在远程连接的Windows实例上，右键单击<b data-tag=\"uicontrol\" id=\"b8ad31c417f79\" class=\"uicontrol\">开始</b><b>，选择</b><b data-tag=\"uicontrol\" id=\"b8ad31c717w3e\" class=\"uicontrol\">关机或注销(U) &gt; 重启(R)</b>。</p></li></ul></li></ol><h3 id=\"da1040a017tbg\"><b>方案二：</b>取消RDP-TCP限制</h3><ol id=\"5e5f159395h45\"><li id=\"5e5f159095l3l\"><p id=\"53e29b0195rrg\">通过VNC连接Windows实例。</p><p id=\"868016e096rhn\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"61af791195xt0\"><p id=\"c4f8cd0195zha\">右键单击<b data-tag=\"uicontrol\" id=\"b8abf94417szv\" class=\"uicontrol\">开始</b>，然后单击<b data-tag=\"uicontrol\" id=\"b8abf9461741w\" class=\"uicontrol\">运行</b>。在<b data-tag=\"uicontrol\" id=\"b8abf94817icr\" class=\"uicontrol\">运行</b>对话框中输入<code data-tag=\"code\" class=\"code\">gpedit.msc</code>命令，然后单击<b data-tag=\"uicontrol\" id=\"b8abf94b17zz2\" class=\"uicontrol\">确定</b>，进入本地组策略编辑器页面。</p></li><li id=\"f796e930959xb\"><p id=\"034c58f095qww\">选择<b data-tag=\"uicontrol\" id=\"b8ac205317skz\" class=\"uicontrol\">计算机配置 &gt; 管理模板 &gt; Windows 组件</b><b>，</b>双击<b data-tag=\"uicontrol\" id=\"b8ac205617eay\" class=\"uicontrol\">远程桌面服务</b>。</p><img width=\"600\" id=\"217bdb21952db\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7789583761/p518768.png\" class=\"image break\"></li><li id=\"da574541955xg\"><p id=\"da57454295zg1\">进入<b data-tag=\"uicontrol\" id=\"b8ac205c17z4r\" class=\"uicontrol\">远程桌面服务</b>页面，双击<b data-tag=\"uicontrol\" id=\"b8ac205e17r4r\" class=\"uicontrol\">远程桌面会话主机 &gt; 连接 &gt; 限制连接的数量</b>。</p></li><li id=\"da574543956cj\"><p id=\"da57454495pns\">在<b data-tag=\"uicontrol\" id=\"b8ac476317aon\" class=\"uicontrol\">限制连接的数量</b>页面，选择<b data-tag=\"uicontrol\" id=\"b8ac476517i57\" class=\"uicontrol\">已启用</b>，在<b data-tag=\"uicontrol\" id=\"b8ac476717u5n\" class=\"uicontrol\">允许 RD 最大连接数</b>框中，输入需要的最大连接数，单击<b data-tag=\"uicontrol\" id=\"b8ac476917igi\" class=\"uicontrol\">确定</b>。</p><img placement=\"break\" width=\"600\" id=\"20e6f2a1a00ll\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7789583761/p518769.png\" class=\"image break\"><div id=\"d9f5f5f195gbs\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"da3103209557k\"><b data-tag=\"uicontrol\" id=\"b8ac6e7217ueu\" class=\"uicontrol\">允许RD 最大连接数</b>本文以<b data-tag=\"uicontrol\" id=\"b8ac6e7417ogv\" class=\"uicontrol\">3</b>为例，现场以实际需求为准。</p></div></div></li><li id=\"da57454995cgt\"><p id=\"da57454a951jt\">选择<b data-tag=\"uicontrol\" id=\"b8ac6e78171d2\" class=\"uicontrol\">开始</b>，单击<b data-tag=\"uicontrol\" id=\"b8ac6e7a17s7a\" class=\"uicontrol\">运行</b>，在打开框中输入<code data-tag=\"code\" class=\"code\">cmd</code>，单击<b data-tag=\"uicontrol\" id=\"b8ac6e7d17zxy\" class=\"uicontrol\">确定</b>。打开命令行，执行如下命令使策略生效。 </p><pre id=\"da57454b95al7\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>gpupdate</code></pre><p id=\"da57454c95r4z\"> 系统显示类似如下，表示完成设置。<img width=\"600\" id=\"da576c5095b2a\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6789583761/p518770.png\" class=\"image break\"></p></li></ol><h3 id=\"a21ad36095qzz\"><b>方案三：</b>购买和配置相应的证书授权</h3><p class=\"from-extensions-error\" id=\"5216fb6095ytd\">配置远程桌面会话主机服务器后，需要在微软官网购买和配置相应的证书授权，具体操作，请参见<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://technet.microsoft.com/zh-cn/library/cc732684(v=ws.11).aspx?spm=5176.7740860.2.3.aqdovJ\">微软官方文档</a>。</p><p id=\"e97cc4f017qsl\"></p></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-error-message-your-credentials-don-t-work-appears-when-i-remotely-log-on-to-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>远程登录Windows实例提示“您的凭据不工作”如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>远程登录Windows实例提示“您的凭据不工作”如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 15:53:52</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"f541ca0065clf\"><p data-tag=\"shortdesc\" id=\"f545c1a165jhy\" class=\"shortdesc\">本文介绍如何处理远程登录Windows实例时提示<b data-tag=\"uicontrol\" id=\"8e03fc800aihw\" class=\"uicontrol\">您的凭据不工作</b>问题。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"0e85806085rjl\" class=\"section\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"f545c1a565j23\">使用远程桌面访问Windows系统的ECS实例时，出现<b data-tag=\"uicontrol\" id=\"8e03fc860aaiw\" class=\"uicontrol\">您的凭据不工作</b>错误。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8794251761/p518794.png\" class=\"image break\"></section><section id=\"1eda41d085ggn\" class=\"section\"><h2 id=\"4rM4I\">可能原因</h2><p id=\"7ca555c185nad\">出现该问题可能有以下原因：</p><ul id=\"bfc8aeb285887\"><li id=\"bfc8aeb085bob\"><p id=\"f545e8b2653r3\"><b>原因1</b>：如果使用VNC可以正常登录ECS实例，可能是Windows操作系统内开启了密码保护共享功能。您可以通过关闭密码保护共享来解决，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#9f9a7bf0803xb\">关闭密码保护共享</a>。</p></li><li id=\"c15912b0851rj\"><p id=\"8bce6e1080l87\"><b>原因2</b>：配置了强制来宾账户访问，您可以通过关闭来宾账户来解决。具体操作，请参见<a title=\"\" class=\"xref\" href=\"#f54636d365nx0\"> 关闭来宾账户访问</a>。</p></li></ul></section><section id=\"13b276a085vd7\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><section id=\"21bbc17085gof\" class=\"section\"><h3 id=\"9f9a7bf0803xb\">方案<b>1：关闭密码保护共享</b></h3><ol id=\"f5460fc865op6\"><li id=\"f5460fc965j4j\"><p id=\"f5460fca65m7w\">使用VNC方式登录ECS实例。</p><p id=\"f72f44e085eib\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"f5460fcb65o7o\"><p id=\"f54636d065615\">选择<b data-tag=\"uicontrol\" id=\"8e0471b40aeci\" class=\"uicontrol\">控制面板 &gt; 所有控制面板项 &gt; 网络和共享中心 &gt; 高级共享设置</b>。</p></li><li id=\"f54636d165nsa\"><p id=\"f54636d265hlh\">在<b data-tag=\"uicontrol\" id=\"8e0471b80a15k\" class=\"uicontrol\">密码保护的共享</b>配置项，选中<b data-tag=\"uicontrol\" id=\"8e0471ba0awnr\" class=\"uicontrol\">无密码保护的共享</b>，然后单击<b data-tag=\"uicontrol\" id=\"8e0498c00a58c\" class=\"uicontrol\">保存更改</b>。 </p><img placement=\"break\" alt=\"保存更改\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5491222761/p539581.png\" id=\"272cdab085ffi\" class=\"image break\"></li></ol></section><section id=\"f54636d365nx0\" class=\"section\"><h3 id=\"759be20086cyu\">方案<b>2：关闭来宾账户访问</b></h3><ol id=\"54950cf180qp0\"><li id=\"5494e5e080tsw\"><p id=\"d1122901851oe\">使用VNC方式登录ECS实例。</p><p id=\"d112290285rlb\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"55d750f080fbq\"><p id=\"51d21c6080msz\">以管理员身份运行Windows PowerShell。</p></li><li id=\"49808b218529q\"><p id=\"49808b2085htq\">在Windows PowerShell对话框，执行如下命令，关闭来宾账户访问。</p><pre id=\"51d21c6180qdn\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>Set-ItemProperty -Path \"HKLM:\\SYSTEM\\CurrentControlSet\\Control\\Lsa\" -Name \"forceguest\" -Value 0 -Force</code></pre></li></ol></section></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/unable-to-connect-to-build-on-the-windows-instance-vsftp-sites-on-linux-instance-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>在Windows实例上无法连接搭建在Linux实例上的VSFTP站点，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在Windows实例上无法连接搭建在Linux实例上的VSFTP站点，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-05-06 17:05:29</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"99f8f9409609r\"><p data-tag=\"shortdesc\" id=\"afb10d30bdzfw\" class=\"shortdesc\">本文介绍在Windows实例上，无法连接搭建在Linux实例上VSFTP（Very Secure FTP）服务问题的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"99ff3ad59617t\">问题描述</h2><p id=\"5f1e4250ad75v\">在Windows操作系统资源管理器的文件夹路径中，通过输入<code data-tag=\"code\" class=\"code\">ftp://<i>FTP站点所在的ECS实例公网IP地址</i>:21</code>方式，访问搭建在Linux实例上的VSFTP服务，出现无法连接或无法登录FTP站点的情况。报错示例如下：</p><img id=\"bbafcf60ad8ml\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7761728761/p562540.png\" alt=\"问题描述新\" placement=\"break\" width=\"750\" class=\"image break\"><p id=\"5f1e4252advh7\">此时，使用抓包工具（例如Wireshark）抓取数据包，根据抓包数据包分析发现FTP站点所在的Linux服务器返回地址是<code data-tag=\"code\" class=\"code\">0.0.0.0</code>，如图所示。</p><img id=\"7b316240ad1u2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7761728761/p562545.png\" alt=\"抓包数据新\" placement=\"break\" width=\"750\" class=\"image break\"><h2 id=\"99ff3ad796pp3\">问题原因</h2><p id=\"794eefd0e5dm4\">Windows操作系统资源管理器连接FTP时的默认连接模式为被动模式，因此在Linux实例上搭建VSFTP时需要开启被动模式。由于VSFTP默认监听IPv6地址，无法将FTP站点所在的Linux实例的IPv4地址通过被动模式返回给客户端（即返回地址会变成<code data-tag=\"code\" class=\"code\">0.0.0.0</code>），导致VSFTP的<code data-tag=\"code\" class=\"code\">vsftpd.conf</code>文件中的<code data-tag=\"code\" class=\"code\">pasv_address</code>配置无法生效，出现该问题。</p><div type=\"note\" id=\"f0884141e5bll\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"79e403e0e5h49\">FTP（File Transfer Protocol）是一种文件传输协议，工作模式支持主动模式和被动模式，更多工作模式信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/build-an-ftp-site-on-an-instance-that-runs-alibaba-cloud-linux\">搭建FTP站点（Alibaba Cloud Linux 3）</a>。</p></div></div><h2 id=\"99ff3ad996jar\">解决方案</h2><p id=\"99ff3ae496zdf\">在Linux实例上关闭IPv6功能并重启服务后即可重新连接FTP服务，操作步骤如下：</p><ol id=\"8b316212ad40m\"><li id=\"8b316210ad7cj\"><p id=\"8a2967f0adod4\">远程连接Linux实例。</p><p id=\"9157a1e0adj1r\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"99ff3ae6961jp\"><p id=\"99ff3ae7961nd\">执行<code data-tag=\"code\" class=\"code\">vim vsftpd.conf</code>命令，修改<code data-tag=\"code\" class=\"code\">vsftpd.conf</code>文件，将<code data-tag=\"code\" class=\"code\">listen_ipv6=YES</code>参数替换为<code data-tag=\"code\" class=\"code\">listen_ipv6=NO</code>。</p><img id=\"ce60a1e0ad5pt\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7761728761/p562560.jpg\" alt=\"修改vsftpd\" placement=\"break\" class=\"image break\"></li><li id=\"99ff3ae896vp0\"><p id=\"99ff3ae9961pj\">执行如下命令，重启FTP服务。</p><pre id=\"ksz4yn\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>systemctl restart vsftpd</code></pre></li><li id=\"207b2811adpzy\"><p id=\"207b2810adnmt\">执行如下命令，查看FTP服务状态，确保FTP服务处于运行状态。</p><pre id=\"baxmvc\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>systemctl status vsftpd</code></pre><p id=\"f14ca270d9f64\">当FTP服务状态为<b data-tag=\"uicontrol\" id=\"0f63baa0d9jxw\" class=\"uicontrol\">running</b>状态时，表示FTP服务已启动成功并正常运行。</p><img id=\"9237d340adww1\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7761728761/p562562.jpg\" alt=\"重启服务新\" placement=\"break\" class=\"image break\"></li><li id=\"641ba041adsue\"><p id=\"641ba040add1m\">重新访问FTP。</p><p id=\"8ccc83e0bdayg\">如果成功访问FTP，该问题解决。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/how-to-handle-an-authentication-error-when-connecting-to-a-windows-instance-remotely", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例时出现“出现身份验证错误，要求的函数不受支持”如何解决?</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例时出现“出现身份验证错误，要求的函数不受支持”如何解决?</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-13 13:08:55</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2289702\"><p id=\"0eaedfd995dbv\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例时出现“出现身份验证错误，要求的函数不受支持”错误提示的解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"c0c0962096zbk\" class=\"section\"><h2 id=\"h2-u73B0u8C61u63CFu8FF01\">问题现象</h2><p id=\"b1971ab095k95\">通过远程桌面连接Windows实例时，出现错误提示“<b data-tag=\"uicontrol\" id=\"14bc0442d9ige\" class=\"uicontrol\">出现身份验证错误，要求的函数不受支持</b>”。</p><img id=\"dc078310a0r53\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1597405761/p553367.png\" alt=\"1232132\" placement=\"break\" class=\"image break\"></section><section id=\"c683804096ehv\" class=\"section\"><h2 id=\"ab1b8ef095uxf\"><b>问题原因</b></h2><p id=\"d001d1209530o\">微软官方于2018年5月，更新了凭据安全支持提供程序协议（CredSSP）相关补丁和身份验证请求方式。默认情况下，安装此更新后，修补的本地电脑无法与未修补的ECS实例进行通信。</p><div type=\"note\" id=\"9bf139b1a09yn\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"9c50e5e0a0oyj\"><b data-tag=\"uicontrol\" id=\"14bc044cd9kmx\" class=\"uicontrol\">加密Oracle修正</b>是操作系统内的一种策略设置，此策略设置可应用于使用 CredSSP 组件（例如，远程桌面连接）的应用程序。</p></div></div><p id=\"e525e050a01to\">当遇到如下任一情况时，会出现该连接错误：</p><ul id=\"df699a849529e\"><li id=\"df699a8095va4\"><p id=\"d9a35500950jo\">情景一：本地电脑未更新该补丁，ECS实例已更新该补丁且加密Oracle修正的策略为<b data-tag=\"uicontrol\" id=\"14bc0452d96ku\" class=\"uicontrol\">强制更新的客户端</b>，请参考<a title=\"\" class=\"xref\" href=\"#44a6eee195sjt\">方案一：ECS实例允许远程桌面连接</a>进行修复。</p></li><li id=\"df699a8195cwq\"><p id=\"dbed450095a0m\">情景二：本地电脑已更新该补丁且加密Oracle修正的策略为<b data-tag=\"uicontrol\" id=\"14bc2b53d9aop\" class=\"uicontrol\">强制更新的客户端</b>，ECS实例未更新该补丁，请参考<a title=\"\" class=\"xref\" href=\"#44a6ef129580h\">方案二 ：安装对应补丁</a>或<a title=\"\" class=\"xref\" href=\"#44a716049517g\">方案三：修改注册表</a>进行修复。</p></li><li id=\"df699a82952ov\"><p id=\"dce623f095uit\">情景三：本地电脑已更新该补丁且加密Oracle修正的策略为<b data-tag=\"uicontrol\" id=\"14bc2b59d983a\" class=\"uicontrol\">缓解</b>，ECS实例未更新该补丁。 请参考进行修复，请参考<a title=\"\" class=\"xref\" href=\"#44a6ef129580h\">方案二 ：安装对应补丁</a>或<a title=\"\" class=\"xref\" href=\"#44a716049517g\">方案三：修改注册表</a>进行修复。</p></li></ul><div type=\"note\" id=\"e46786f195hk7\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"f5e8e18495mt7\"><li id=\"f5e8e18095481\"><p id=\"ef1c4f909563o\">未更新该补丁，指没有更新自2018年5月起至今的任意版本补丁，包括最新版本补丁。</p></li><li id=\"f5e8e181954w4\"><p id=\"f211259095yuf\">已更新该补丁，指更新过自2018年5月起至今的任意版本补丁或者所有版本补丁，包括最新版本补丁。</p></li><li id=\"f5e8e18295b9j\"><p id=\"f414218095ssr\">更多加密Oracle修正的策略信息，请参见<a class=\"\" target=\"_blank\" href=\"https://support.microsoft.com/zh-cn/topic/cve-2018-0886-%E7%9A%84-credssp-%E6%9B%B4%E6%96%B0-5cbf9e5f-dc6d-744f-9e97-7ba400d6d3ea\">CVE-2018-0886的CredSSP更新</a>。</p></li></ul></div></div></section><section id=\"cd71cb0096mpc\" class=\"section\"><h2 id=\"b9bf6c1095kdz\"><b>解决方案</b></h2><p id=\"5527fc20964mb\">根据实际情况，参考以下三种解决方案：</p><section id=\"44a6eee095otf\" class=\"section\"><h3 id=\"44a6eee195sjt\"><b>方案一：ECS实例允许远程桌面连接</b></h3><div type=\"note\" id=\"79942c5096l04\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"44a6eee295z22\">由于Windows Server系统版本较多，且各版本之间操作略有差异，此处分别以Windows Server 2008 R2、Windows Server 2012 R2和Windows Server 2016版本为例，步骤如下。</p></div></div><p id=\"e6f575e0d9s7d\"></p><section id=\"032b4af0d9abh\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"032b4af2d914u\" class=\"section\"><h4 id=\"032b4af1d9lah\"><b>Windows Server 2008 R2系统版本</b></h4><ol id=\"7ba0d902d9nhj\"><li id=\"7ba0d903d9isc\"><p id=\"7ba0d904d97l2\">通过VNC连接Windows实例。</p><p id=\"7ba0d905d92br\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"7ba0d906d9jyw\"><p id=\"7ba0d907d9j4d\">单击<b data-tag=\"uicontrol\" id=\"14bc7973d99jp\" class=\"uicontrol\">开始</b>，右键单击<b data-tag=\"uicontrol\" id=\"14bc7975d9de5\" class=\"uicontrol\">计算机</b>，然后单击<b data-tag=\"uicontrol\" id=\"14bc7977d9wya\" class=\"uicontrol\">属性</b>。 <img id=\"7ba0d908d9x60\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p529968.png\" alt=\"win2008开始菜单\" placement=\"break\" width=\"400\" class=\"image break\"></p></li><li id=\"7ba0d909d9mrz\"><p id=\"7ba0d90ad970i\">在<b data-tag=\"uicontrol\" id=\"14bc797cd9o8s\" class=\"uicontrol\">控制面板主页</b>区域，单击<b data-tag=\"uicontrol\" id=\"14bc797ed9mmz\" class=\"uicontrol\">远程设置</b>。<img id=\"7ba0d90bd9pfm\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530172.png\" alt=\"win2008远程设置\" placement=\"break\" width=\"700\" class=\"image break\"></p></li><li id=\"7ba10010d9my0\"><p id=\"7ba10011d95oj\">在<b data-tag=\"uicontrol\" id=\"14bc7983d9v07\" class=\"uicontrol\">系统属性</b>对话框中，勾选<b data-tag=\"uicontrol\" id=\"14bc7985d9rtc\" class=\"uicontrol\">允许运行任意版本远程桌面的计算机连接（较不安全）</b>，然后单击<b data-tag=\"uicontrol\" id=\"14bc7987d9f3n\" class=\"uicontrol\">确定</b>。 <img id=\"7ba10012d9o53\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530171.png\" alt=\"win2008允许\" placement=\"break\" width=\"400\" class=\"image break\"></p></li></ol></section><section id=\"032b4af5d9g6w\" class=\"section\"><h4 id=\"937ddb40d9vd0\">Windows Server 2012 R2系统版本</h4><ol id=\"44a6eef295tg7\"><li id=\"44a6eef39505o\"><p id=\"e2e5581196q2o\">通过VNC连接Windows实例。</p><p id=\"e2e55812964p4\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"44a6eef695wki\"><p id=\"44a6eef795x1b\">单击<img id=\"44a6eef895p2q\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530260.png\" alt=\"win2012开始图标\" placement=\"inline\" width=\"25\" height=\"25\" class=\"image inline\">图标，右键单击<b data-tag=\"uicontrol\" id=\"14bca086d9t0a\" class=\"uicontrol\">这台电脑</b>，然后单击<b data-tag=\"uicontrol\" id=\"14bca088d915u\" class=\"uicontrol\">属性</b>。 <img placement=\"break\" alt=\"win2012开始\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530290.png\" id=\"44a6eef995ypf\" width=\"400\" class=\"image break\"></p></li><li id=\"44a6eefa95054\"><p id=\"44a6eefb95f80\">在<b data-tag=\"uicontrol\" id=\"14bca08dd9y6k\" class=\"uicontrol\">控制面板主页</b>上，单击<b data-tag=\"uicontrol\" id=\"14bca08fd9nuu\" class=\"uicontrol\">远程设置</b>。<img width=\"700\" placement=\"break\" alt=\"win2012远程设置\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530325.png\" id=\"44a6eefc95cox\" class=\"image break\"></p></li><li id=\"44a6eefd9586l\"><p id=\"44a6eefe95231\">在<b data-tag=\"uicontrol\" id=\"14bca094d9w7r\" class=\"uicontrol\">远程</b>页签下，取消勾选<b data-tag=\"uicontrol\" id=\"14bca096d9gfs\" class=\"uicontrol\">仅允许运行使用网络级别身份验证的远程桌面的计算机连接（建议） </b>，然后单击<b data-tag=\"uicontrol\" id=\"14bca098d9qfy\" class=\"uicontrol\">确定</b>。 <img placement=\"break\" alt=\"win2012取消勾选\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530330.png\" id=\"44a6eeff95gc1\" width=\"400\" class=\"image break\"></p></li></ol></section><section id=\"a56bb340d9bh3\" class=\"section\"><h4 id=\"b9700f30d9wkv\">Windows Server 2016系统版本</h4><ol id=\"c394ccd0d9dmp\"><li id=\"c394ccd1d9086\"><p id=\"c394ccd2d95ok\">通过VNC连接Windows实例。</p><p id=\"39b0bc2296jyo\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"44a6ef05950nw\"><p id=\"44a6ef0695tew\">单击<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"44a6ef0795x83\" placement=\"inline\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"14bcc799d93md\" class=\"uicontrol\">Windows系统</b>。</p></li><li id=\"44a6ef0895uqg\"><p id=\"44a6ef0995brx\">右键单击<b data-tag=\"uicontrol\" id=\"14bcc79dd9xuk\" class=\"uicontrol\">此电脑</b>，然后选择<b data-tag=\"uicontrol\" id=\"14bcc79fd9ju1\" class=\"uicontrol\">更多 &gt; 属性</b>。 <img id=\"44a6ef0a95qmm\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530397.png\" alt=\"win2016属性\" placement=\"break\" width=\"400\" class=\"image break\"></p></li><li id=\"44a6ef0b95g0f\"><p id=\"44a6ef0c95qxp\">在<b data-tag=\"uicontrol\" id=\"14bcc7a4d95di\" class=\"uicontrol\">控制面板主页</b>上，单击<b data-tag=\"uicontrol\" id=\"14bcc7a6d97xf\" class=\"uicontrol\">远程设置</b>。<img id=\"44a6ef0d95nyu\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530400.png\" alt=\"win2016远程设置\" placement=\"break\" width=\"700\" class=\"image break\"></p></li><li id=\"44a6ef0e952tq\"><p id=\"44a6ef0f95ptv\">在<b data-tag=\"uicontrol\" id=\"14bcc7abd9gw6\" class=\"uicontrol\">远程</b>页签下，取消勾选<b data-tag=\"uicontrol\" id=\"14bceea0d9nzy\" class=\"uicontrol\">仅允许运行使用网络级别身份验证的远程桌面的计算机连接（建议） </b>，然后单击<b data-tag=\"uicontrol\" id=\"14bceea2d9q06\" class=\"uicontrol\">确定</b>。 <img id=\"44a6ef10956gt\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530402.png\" alt=\"win2016取消勾选\" placement=\"break\" width=\"400\" class=\"image break\"></p></li></ol></section></section></section><section id=\"44a6ef11956aq\" class=\"section\"><h3 id=\"44a6ef129580h\"><b>方案二 ：安装对应补丁</b></h3><p id=\"44a6ef1395p7a\">此处以Windows Server 2016系统版本为例，其他Windows系统版本操作类似。</p><ol id=\"44a6ef1495kc6\"><li id=\"44a6ef1595aow\"><p id=\"39b0bc2496509\">通过VNC连接Windows实例。</p><p id=\"39b0bc2596lk1\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"44a6ef189566u\"><p id=\"44a6ef19957nw\">单击<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"44a6ef1a95l34\" placement=\"inline\" class=\"image inline\">图标，单击<b data-tag=\"uicontrol\" id=\"14bceeb1d9rsf\" class=\"uicontrol\">设置</b><b>。</b><img id=\"44a6ef1b95s61\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530389.png\" alt=\"win2016开始\" placement=\"break\" width=\"600\" class=\"image break\"></p></li><li id=\"44a715f09551p\"><p id=\"44a715f195rwd\">在<b data-tag=\"uicontrol\" id=\"14bceeb7d9wc5\" class=\"uicontrol\">Windows 设置</b>页面，单击<b data-tag=\"uicontrol\" id=\"14bceeb9d95vp\" class=\"uicontrol\">更新</b><b data-tag=\"uicontrol\" id=\"14bd15b0d941i\" class=\"uicontrol\">和</b><b data-tag=\"uicontrol\" id=\"14bd15b2d9drs\" class=\"uicontrol\">安全</b>。<img id=\"44a715f295gua\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3516030761/p530390.png\" alt=\"win2016更新与安全\" placement=\"break\" width=\"600\" class=\"image break\"></p></li><li id=\"44a715f395mh5\"><p id=\"44a715f4957ux\">在<b data-tag=\"uicontrol\" id=\"14bd15b7d9zyc\" class=\"uicontrol\">更新状态</b>页面，单击<b data-tag=\"uicontrol\" id=\"14bd15b9d9lqx\" class=\"uicontrol\">检查更新</b>，等待更新下载和安装。 </p><div type=\"note\" id=\"44a715f5952ei\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"44a715f695o54\">如果需要手动安装CredSSP对应安全更新包，请访问<a class=\"\" target=\"_blank\" href=\"https://www.microsoft.com/zh-cn/windows/\">微软官网</a>，然后下载对应版本的安全更新包。</p></div></div><img id=\"44a715f8952v7\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530392.png\" alt=\"win2016检查更新\" placement=\"break\" width=\"600\" class=\"image break\"></li><li id=\"44a715f995zx8\"><p id=\"44a715fa95lby\">重启Windows实例以完成安装更新。</p><ul id=\"44a715fb95ivv\"><li id=\"44a715fc9560p\"><p id=\"44a715fd95umz\">方式一：在ECS控制台上重启Windows实例，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li><li id=\"44a715fe95ebi\"><p id=\"44a715ff95qio\">方式二：以Windows Server 2016版本为例，在远程连接的Windows实例上，选择<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"44a7160095bji\" placement=\"inline\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"14bd3cc0d9ig2\" class=\"uicontrol\"> &gt; </b><img width=\"25\" placement=\"inline\" alt=\"电源管理\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530476.png\" id=\"44a7160195de9\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"14bd3cc3d9uke\" class=\"uicontrol\"> &gt; 重启</b>。<img placement=\"break\" alt=\"win2016重启服务器\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530473.png\" id=\"44a71602957sa\" class=\"image break\"></p></li></ul></li></ol></section><section id=\"44a7160395pqv\" class=\"section\"><h3 id=\"44a716049517g\"><b>方案三：修改注册表</b></h3><p id=\"44a71605952bj\">此处以Windows Server 2016系统版本为例，其他Windows系统版本操作类似。当本地电脑或ECS实例完成CredSSP相关补丁的更新后，请选择以下一种方式修改注册表。</p><div type=\"warning\" id=\"44a71606953n4\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"44a71607952ca\">如果修改注册表不当，Windows操作系统可能会出现严重问题，您需要自行承担修改注册表的风险。修改注册表之前，建议您先创建快照备份数据，以免数据丢失。创建快照的具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><p id=\"29612220d95u5\"></p><section id=\"2add13c0d9gzc\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"2add13c2d9mle\" class=\"section\"><h4 id=\"2e722160d9w5n\">（推荐）使用脚本修改注册表</h4><ol id=\"44a7160995ou5\"><li id=\"44a7160a95p8m\"><p id=\"39b0bc2796h3l\">通过VNC连接Windows实例。</p><p id=\"39b0bc2896jdw\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"44a7160d957a6\"><p id=\"44a7160e95xkx\">打开CMD命令提示行。</p><ol id=\"44a7160f95wwh\"><li id=\"44a71610956r1\"><p id=\"44a7161195q4u\">右键单击<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"44a7161295d4p\" placement=\"inline\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"14bd63d7d90e5\" class=\"uicontrol\">运行</b>。<img placement=\"break\" alt=\"win2016运行\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530508.png\" id=\"44a7161395drr\" class=\"image break\"></p></li><li id=\"44a7161495cae\"><p id=\"44a7161595mrv\">在<b data-tag=\"uicontrol\" id=\"14bd63dcd9a3e\" class=\"uicontrol\">运行</b>对话框中输入<code data-tag=\"code\" class=\"code\">cmd</code>。<img placement=\"break\" alt=\"win2016\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530531.png\" id=\"44a7161695d0q\" class=\"image break\"></p></li><li id=\"44a7161795vgl\"><p id=\"44a7161895dri\">单击<b data-tag=\"uicontrol\" id=\"14bd63e2d9ttd\" class=\"uicontrol\">确定</b><b>。</b></p><p id=\"44a7161995z22\">进入CMD命令提示行。<img placement=\"break\" alt=\"win2016cmd命令提示行\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530535.png\" id=\"44a7161a95e2e\" class=\"image break\"></p></li></ol></li><li id=\"44a7161b954qk\"><p id=\"44a7161c95kbz\">执行以下命令，进入PowerShell模式。 </p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"44a7161d95lam\" class=\"pre codeblock language-javascript\"><code>powershell</code></pre></li><li id=\"44a7161f95eip\"><p id=\"44a71620956gr\">执行如下命令，以管理员身份运行<code data-tag=\"code\" class=\"code\">Windows PowerShell</code>脚本。 </p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"44a71621954xh\" class=\"pre codeblock language-javascript\"><code>New-Item -Path HKLM:\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System -Name CredSSP -Force\nNew-Item -Path HKLM:\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\CredSSP -Name Parameters -Force\nGet-Item -Path HKLM:\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\CredSSP\\Parameters | New-ItemProperty -Name AllowEncryptionOracle -Value 2 -PropertyType DWORD -Force</code></pre></li><li id=\"44a7162395vs9\"><p id=\"44a71624953qi\">重启Windows实例以完成安装更新。</p><ul id=\"752285c2d9zmc\"><li id=\"752285c3d9td0\"><p id=\"752285c4d9ewb\">方式一：在ECS控制台上重启Windows实例，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li><li id=\"752285c5d941k\"><p id=\"752285c6d9naf\">方式二：以Windows Server 2016版本为例，在远程连接的Windows实例上，选择<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"752285c7d93fv\" placement=\"inline\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"14bd3cc0d9ig2\" class=\"uicontrol\"> &gt; </b><img width=\"25\" placement=\"inline\" alt=\"电源管理\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530476.png\" id=\"752285c8d9plk\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"14bd3cc3d9uke\" class=\"uicontrol\"> &gt; 重启</b>。<img placement=\"break\" alt=\"win2016重启服务器\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530473.png\" id=\"44a7162c951bt\" class=\"image break\"></p></li></ul><div type=\"note\" id=\"44a7162d95moz\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"44a7162e95kmx\">若您先使用本方法修改了注册表，随后又更新了本地电脑和Windows实例的安全补丁，建议您将<code data-tag=\"code\" class=\"code\">AllowEncryptionOracle</code>的<b data-tag=\"uicontrol\" id=\"14bdb1f0d9eb0\" class=\"uicontrol\">数值数据</b>设为<code data-tag=\"code\" class=\"code\">0</code>或者<code data-tag=\"code\" class=\"code\">1</code>以获得更高的安全性。<code data-tag=\"code\" class=\"code\">AllowEncryptionOracle</code>的<b data-tag=\"uicontrol\" id=\"14bdb1f5d9mm4\" class=\"uicontrol\">数值数据</b>信息，请参见<a class=\"\" target=\"_blank\" href=\"https://support.microsoft.com/zh-cn/help/4093492/credssp-updates-for-cve-2018-0886-march-13-2018\">CVE-2018-0886的CredSSP更新</a>。</p></div></div></li></ol></section><section id=\"2add13c5d93w8\" class=\"section\"><h4 id=\"482d3270d9qjv\">手动修改注册表</h4><ol id=\"44a7163095tgv\"><li id=\"44a7163195o4e\"><p id=\"44a7163295gh6\">通过VNC连接Windows实例。</p><p id=\"39b0bc2a96911\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"44a7163495x61\"><p id=\"44a7163595iqw\">打开注册表编辑器。</p><ol id=\"44a7163695img\"><li id=\"44a7163795xux\"><p id=\"44a71638956zc\">右键单击<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"44a7163995wec\" placement=\"inline\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"14bdb206d903p\" class=\"uicontrol\">运行</b>。<img placement=\"break\" alt=\"win2016运行\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530508.png\" id=\"44a7163a95nfm\" class=\"image break\"></p></li><li id=\"44a7163b9582i\"><p id=\"44a7163c95f5x\">在<b data-tag=\"uicontrol\" id=\"14bdd900d9nr5\" class=\"uicontrol\">运行</b>对话框中输入<code data-tag=\"code\" class=\"code\">regedit</code>。<img placement=\"break\" alt=\"win2016运行窗口\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530516.png\" id=\"44a7163d95ciq\" class=\"image break\"></p></li><li id=\"44a7163e95z1z\"><p id=\"44a7163f95s57\">单击<b data-tag=\"uicontrol\" id=\"14bdd906d90qq\" class=\"uicontrol\">确定</b>。</p><p id=\"44a7164095u2h\">进入注册表编辑器。 <img placement=\"break\" alt=\"win2016注册表编辑器\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530520.png\" id=\"44a7164195h1d\" class=\"image break\"></p></li></ol></li><li id=\"44a7164295la8\"><p id=\"44a7164395iey\">在<b data-tag=\"uicontrol\" id=\"14bdd90cd9dso\" class=\"uicontrol\">注册表编辑器</b>页面的<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\CredSSP\\Parameters</code>路径下，将注册表项<code data-tag=\"code\" class=\"code\">AllowEncryptionOracle</code>的<b data-tag=\"uicontrol\" id=\"14bdd910d9j57\" class=\"uicontrol\">数值数据</b>设置为<b data-tag=\"uicontrol\" id=\"14bdd912d9lat\" class=\"uicontrol\">2</b><b>。</b></p><div id=\"44a7164495pfk\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"44a7164595njr\">注册表项<code data-tag=\"code\" class=\"code\">AllowEncryptionOracle</code>的<b data-tag=\"uicontrol\" id=\"14bdd918d9tr9\" class=\"uicontrol\">数值数据</b>信息，请参见<a class=\"\" target=\"_blank\" href=\"https://support.microsoft.com/zh-cn/help/4093492/credssp-updates-for-cve-2018-0886-march-13-2018\">CVE-2018-0886的CredSSP更新</a>。</p></div></div><p id=\"44a7164695k68\">如果<code data-tag=\"code\" class=\"code\">CredSSP</code>项或<code data-tag=\"code\" class=\"code\">Parameters</code>项不存在，请新建对应注册表项，然后在该注册表项下新建REG_DWORD类型的注册表项<code data-tag=\"code\" class=\"code\">AllowEncryptionOracle</code>。以<code data-tag=\"code\" class=\"code\">CredSSP</code>项和<code data-tag=\"code\" class=\"code\">Parameters</code>均不存在为例，操作如下：</p><ol id=\"44a7164795gck\"><li id=\"44a7164895o29\"><p id=\"44a7164995u7w\">在<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System</code>路径下新建<code data-tag=\"code\" class=\"code\">CredSSP</code>项。</p><ol id=\"44a7164a95ud4\"><li id=\"44a7164b95mn3\"><p id=\"44a7164c95fzu\">右键单击注册表项空表区域，然后选择<b data-tag=\"uicontrol\" id=\"14be001dd92p6\" class=\"uicontrol\">新建（N） &gt; 项（K）</b>。<img placement=\"break\" alt=\"win2016新建项\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530609.png\" id=\"44a7164d95dye\" width=\"600\" class=\"image break\"></p></li><li id=\"44a7164e95emp\"><p id=\"44a7164f95ngh\">输入<code data-tag=\"code\" class=\"code\">CredSSP</code>，按<code data-tag=\"code\" class=\"code\">Enter</code>键。</p><img width=\"600\" placement=\"break\" alt=\"新建项\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530615.png\" id=\"44a716519520i\" class=\"image break\"></li></ol></li><li id=\"44a71652950yr\"><p id=\"44a7165395150\">在<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\CredSSP</code>路径下新建<code data-tag=\"code\" class=\"code\">Parameters</code>项。<img width=\"600\" placement=\"break\" alt=\"Parameters项\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530619.png\" id=\"44a7165495rm3\" class=\"image break\"></p></li><li id=\"44a7165595555\"><p id=\"44a71656950h5\">在<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\CredSSP\\Parameters</code>路径下新建<code data-tag=\"code\" class=\"code\">AllowEncryptionOracle</code>项。<img width=\"600\" placement=\"break\" alt=\"新建字符串\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3516030761/p530629.png\" id=\"44a7165795e91\" class=\"image break\"></p></li><li id=\"44a71658959gu\"><p id=\"44a7165995t8j\">修改注册表项<code data-tag=\"code\" class=\"code\">AllowEncryptionOracle</code>的<b data-tag=\"uicontrol\" id=\"14be4e42d905y\" class=\"uicontrol\">数值数据</b><b>。</b></p><ol id=\"44a7165a95zqz\"><li id=\"44a7165b95nch\"><p id=\"44a7165c95vmi\">右键单击注册表项<code data-tag=\"code\" class=\"code\">AllowEncryptionOracle</code>，然后单击<b data-tag=\"uicontrol\" id=\"14be4e49d982r\" class=\"uicontrol\">修改（M）</b>。<img width=\"600\" placement=\"break\" alt=\"修改注册表项\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530638.png\" id=\"44a7165d95qlf\" class=\"image break\"></p></li><li id=\"44a7165e953sh\"><p id=\"44a7165f95qzr\">在对话框中，将<b data-tag=\"uicontrol\" id=\"14be7542d9elz\" class=\"uicontrol\">数值数据</b>设置为<b data-tag=\"uicontrol\" id=\"14be7544d9dgg\" class=\"uicontrol\">2</b>，然后单击<b data-tag=\"uicontrol\" id=\"14be7546d9uo0\" class=\"uicontrol\">确定</b>。<img width=\"600\" placement=\"break\" alt=\"修改数据数值\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530643.png\" id=\"44a7166095h85\" class=\"image break\"></p></li></ol></li></ol></li><li id=\"44a71661952d9\"><p id=\"44a7166295gnk\">重启Windows实例以更新配置。</p><ul id=\"44a7166395507\"><li id=\"44a7166495w9b\"><p id=\"44a7166595gef\">方式一：在ECS控制台上重启Windows实例，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li><li id=\"44a7166695a36\"><p id=\"44a71667956ju\">方式二：以Windows Server 2016版本为例，在远程连接的Windows实例上，选择<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"44a7166895ire\" placement=\"inline\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"14be7552d9cqh\" class=\"uicontrol\"> &gt; </b><img width=\"25\" placement=\"inline\" alt=\"电源管理\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530476.png\" id=\"44a7166995gzo\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"14be7555d9xl7\" class=\"uicontrol\"> &gt; 重启</b>。<img placement=\"break\" alt=\"win2016重启服务器\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530473.png\" id=\"44a7166a959ik\" class=\"image break\"></p></li></ul></li></ol></section></section></section></section><h2 id=\"44a7166b954rw\">相关文档</h2><section id=\"44a7166c95o31\" class=\"section\"><p id=\"44a7166d95upd\"><a class=\"\" target=\"_blank\" href=\"https://portal.msrc.microsoft.com/zh-cn/security-guidance/advisory/CVE-2018-0886\">CVE-2018-0886 | CredSSP 远程执行代码漏洞</a></p></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-operations-are-slow-on-a-windows-server-2003-instance-after-i-connect-to-the-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>远程连接Windows Server 2003实例后在服务器上执行操作时速度缓慢，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>远程连接Windows Server 2003实例后在服务器上执行操作时速度缓慢，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-01 18:22:35</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"8e3cabb096e9d\"><p data-tag=\"shortdesc\" id=\"8e451027967mq\" class=\"shortdesc\">远程连接Windows Server 2003实例时，使用VNC登录服务器正常，但是使用其他远程连接方式登录服务器时，打开程序和浏览网站速度缓慢，本文介绍该场景下的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 data-spm-anchor-id=\"a2c9r.14518950.0.i6.aa555e3b7TeAFv\" id=\"iAj6g\">问题描述</h2><p id=\"7405a320ad7hd\">远程连接Windows Server 2003实例时，使用VNC登录服务器正常，但是使用其他远程连接方式登录服务器时，打开程序和浏览网站速度缓慢。</p><h2 id=\"4rM4I\">问题原因</h2><p id=\"8e45102996u7y\">网卡的<code data-tag=\"code\" class=\"code\">Offload.Tx.LSO</code>参数为开启状态导致该问题。</p><h2 id=\"AywdZ\">解决方案</h2><p id=\"4c9abc71ad5u4\">您可以根据实际情况选择如下任意一种方案处理该问题，具体如下：</p><h3 id=\"6983dbf0ad1vd\"><b>方案一：更换操作系统</b></h3><p id=\"5ab7f2d0b741o\"><span style=\"color:rgb(24, 24, 24)\">阿里云不再支持Windows Server 2003系统镜像。因此，</span>建议您使用Windows Server 2012及以上版本的Windows操作系统，避免出现该问题。更换实例操作系统的具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/replace-the-operating-system-of-an-instance\">更换操作系统（系统盘）</a>。</p><div type=\"warning\" id=\"566bd041adf9t\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"54445c60ady5h\">更换操作系统的本质是更换系统盘。更换操作系统后，原来旧的系统盘会被释放，会清除系统盘上的所有数据，请在更换操作系统前为系统盘创建快照备份数据，再执行操作，创建快照的更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/snapshot-overview\">快照概述</a>。</p></div></div><h3 id=\"73a230f1adylv\"><b>方案二：将网卡的</b><code data-tag=\"code\" class=\"code\"><b>Offload.Tx.LSO</b></code><b>参数</b>更改为<code data-tag=\"code\" class=\"code\"><b>Disabled</b></code></h3><p id=\"292b89e0adhuz\">您需要将网卡的<code data-tag=\"code\" class=\"code\">Offload.Tx.LSO</code>参数更改为<code data-tag=\"code\" class=\"code\">Disabled</code>，操作步骤如下：</p><ol id=\"96f5f6d1admxi\"><li id=\"3f676be1accs6\"><p id=\"944ef2b0adou8\">远程连接ECS实例。</p><p id=\"944f19c0adr1o\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"698cc021adx0a\"><p id=\"c2dcac31adnx4\">打开控制面板，然后选择<b data-tag=\"uicontrol\" id=\"ec4df4c0adt28\" class=\"uicontrol\">网络和lnternet</b>。</p></li><li id=\"e8d23b81adj3j\"><p id=\"e8d23b80adteq\">单击<b data-tag=\"uicontrol\" id=\"04a94ec0ad0yb\" class=\"uicontrol\">查看网络状态和任务</b>，然后在左侧导航栏单击<b data-tag=\"uicontrol\" id=\"01e1ca50ad1gk\" class=\"uicontrol\">更改适配器设置</b>。</p></li><li id=\"8e45373896qd7\"><p id=\"8e45373996xyd\">选择对应的网卡，单击鼠标右键，然后选择<b data-tag=\"uicontrol\" id=\"7efac8c0ad2i8\" class=\"uicontrol\">属性</b> &gt; <b>配置</b>。 </p><img height=\"523\" width=\"446\" alt=\"{7A01EC2D-6CA4-48EC-BF2A-A9D22AF179DC}_20200521114013.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8656546761/p519880.png\" class=\"image break\"></li><li data-spm-anchor-id=\"a2c9r.12641742.0.i5.20achEdShEdSrg\" id=\"8e455e40965nm\"><p id=\"8e455e4196a9i\">单击<b data-tag=\"uicontrol\" id=\"b678b350adgo5\" class=\"uicontrol\">高级</b>页签，配置<code data-tag=\"code\" class=\"code\">Offload.Tx.LSO</code>参数。</p><p id=\"0db608e0b95ex\">您需要先在<b data-tag=\"uicontrol\" id=\"ce997550ad0a7\" class=\"uicontrol\">属性</b>列表中选择<b data-tag=\"uicontrol\" id=\"d28fb5c0ad2wa\" class=\"uicontrol\">Offload.Tx.LS</b>，然后将<b data-tag=\"uicontrol\" id=\"d4fb1070adlfk\" class=\"uicontrol\">值</b>选择为<b data-tag=\"uicontrol\" id=\"12f88290ad6z3\" class=\"uicontrol\">Disabled</b>。 </p><img height=\"546\" width=\"495\" alt=\"{18E36C9A-EDF0-4233-936B-EF294270EFA7}_20200522150546.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8656546761/p519881.png\" class=\"image break\"></li><li id=\"18fbd111ad7mx\"><p id=\"19865dd0ad2bb\">单击<b data-tag=\"uicontrol\" id=\"1d879ac0adqle\" class=\"uicontrol\">确定</b><b>，</b>保存配置。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/migrated-to-a-new-server-in-php-website-using-a-browser-to-access-hint-information-such-as-do-not-support-the-mysql-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>迁移到新服务器上的PHP网站，使用浏览器访问时提示“不支持MySQL”等信息，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>迁移到新服务器上的PHP网站，使用浏览器访问时提示“不支持MySQL”等信息，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-05-11 17:22:33</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"630fa960960dx\"><p data-tag=\"shortdesc\" id=\"63154eb696g2q\" class=\"shortdesc\">本文介绍迁移到新服务器上的PHP网站，使用浏览器访问时提示“不支持MySQL”等信息的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"emcCa\">问题描述</h2><p id=\"a6fe4e60ebc2p\">PHP网站（该网站需使用PHP执行程序代码）迁移到新服务器后，在使用浏览器访问时提示如下任意一种信息。</p><ul id=\"2df09ad2ackgx\"><li id=\"2df09ad0acciz\"><p id=\"a76e7550eb1rn\">系统不支持MySQL。</p></li><li id=\"3b288be1acuyy\"><p id=\"a76e7551eby6z\">PHP不支持MySQL扩展。</p></li><li id=\"4d59ae71acrqx\"><p id=\"a76e7552ebzun\">其他类似错误信息，示例如下。</p><img id=\"3cc194b0eboji\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2512433861/p667768.jpeg\" alt=\"其他错误..jpeg\" placement=\"break\" width=\"750\" class=\"image break\"></li></ul><h2 id=\"tpxJM\">问题原因</h2><p id=\"5b176390ebl01\">因为MySQL扩展功能自PHP 5.5.0版本开始被废弃，并且从PHP 7.0.0版本开始被移除，当网站迁移到新服务器时一般会迁移到PHP 7.0.0及以上版本，由于网站迁移后的新服务器的PHP版本过高，网站程序无法再连接MySQL，导致该问题。</p><p id=\"63154eb896ktm\">您可以使用<code data-tag=\"code\" class=\"code\">php -v</code>命令，查看当前服务器的PHP版本，如图所示。<img id=\"fdd76750e4wyf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2512433861/p638593.jpeg\" alt=\"查看PHP版本..jpeg\" placement=\"break\" class=\"image break\"></p><h2 id=\"rptcQ\">解决方案</h2><p id=\"b3508870ebxyu\">您可以在新服务器上安装并运行5.5.0以下版本的PHP源码包，来为网站提供MySQL扩展功能。</p><div type=\"note\" id=\"85be1520a9r88\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"b3faab20eb84u\">本文操作步骤以在CentOS 7.9操作系统为例，具体操作以您实际的操作系统版本为准。</p></div></div><ol id=\"c0648952e4q6e\"><li id=\"c0648950e4zav\"><p id=\"b3faab21eb50a\">登录迁移后的ECS实例。</p><p id=\"b3faab22ebxph\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"f2042bd1e4v3h\"><p id=\"b3faab23ebxpj\">执行如下命令，安装PHP依赖的软件包。</p><pre id=\"iachgq\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>yum install -y gcc gcc-c++ libxml2 libxml2-devel autoconf libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel zlib zlib-devel glibc glibc-devel glib2 glib2-devel curl curl-devel libxslt-devel openssl-devel</code></pre></li><li id=\"cae76c81e4lcg\"><p id=\"b3faab24eba70\">执行如下命令，从PHP官网下载PHP 5.5.0及以下版本的源码包。</p><div type=\"note\" id=\"22b60fc1e46oz\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"b3faab25eba53\">后续操作均以下载PHP 5.4.45版本的源码包为例，具体版本号以您实际源码包版本为准。</p></div></div><pre id=\"irthea\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>wget https://www.php.net/distributions/php-5.4.45.tar.gz</code></pre></li><li id=\"dfc73451e4yrs\"><p id=\"b3faab26ebgq9\">安装PHP。</p><ol id=\"0d7d2b71e4ijo\"><li id=\"0d2aecc0e4tsx\"><p id=\"b3faab27ebowe\">执行如下命令，解压下载的源码包。</p><pre id=\"il87ho\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>tar -zxvf php-5.4.45.tar.gz</code></pre></li><li id=\"18e4a240e4taw\"><p id=\"b3fad230eb1ys\">执行如下命令，进入源码包目录。</p><pre id=\"o779qo\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>cd php-5.4.45</code></pre></li><li id=\"4a3c9f51e4ecp\"><p id=\"b3fad231eb3s4\">执行如下命令，安装PHP源码包。</p><pre id=\"ytemaw\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>./configure --prefix=/usr/local/php5.4.45 --with-curl --with-freetype-dir --with-gd --with-gettext --with-iconv-dir --with-kerberos --with-libdir=lib64 --with-libxml-dir --with-mysql --with-mysqli --with-openssl --with-pcre-regex --with-pdo-mysql --with-pdo-sqlite --with-pear --with-png-dir --with-xmlrpc --with-xsl --with-zlib --enable-fpm --enable-bcmath --enable-libxml --enable-inline-optimization --enable-gd-native-ttf --enable-mbregex --enable-mbstring --enable-opcache --enable-pcntl --enable-sockets --enable-sysvsem --enable-xml --enable-zip</code></pre><ul id=\"85146771e4nx2\"><li id=\"828f1c21e4fqi\"><p id=\"b3fad232ebhtj\">如果回显显示<code data-tag=\"code\" class=\"code\">Thank you for using PHP</code>，则表示PHP源码包配置成功，如图所示。<img id=\"c9c8c0a0e4rej\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2512433861/p638575.png\" alt=\"安装PHP..png\" placement=\"break\" class=\"image break\"></p></li><li id=\"801ff0e1e44d6\"><p id=\"b3fad233ebtyr\">如果安装过程中缺少某个软件包，会出现相关的报错，您可以根据报错提示安装缺失的软件包，然后再重新安装PHP源码包。</p></li></ul></li><li id=\"df2c8580e4nxl\"><p id=\"b3fad234ebg1g\">执行如下命令，编译并安装PHP。</p><pre id=\"p370da\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>make &amp;&amp; make install</code></pre><p id=\"b3fad235ebwal\">等待PHP安装完成即可。</p></li></ol></li><li id=\"e590b8b0e4yh2\"><p id=\"b3fad236ebo8x\">配置PHP运行版本为5.4.45版本。</p><ol id=\"355bd0a1e4qwt\"><li id=\"35235b80e4vn5\"><p id=\"b3fad237eb3dq\">执行如下命令，进入PHP的安装目录。</p><pre id=\"4g9gse\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>cd /usr/local/php5.4.45/etc</code></pre></li><li id=\"4303c190e4u4n\"><p id=\"b3fad238ebodp\">执行如下命令，把默认的配置文件复制为<code data-tag=\"code\" class=\"code\">php-fpm.conf</code>。</p><pre id=\"14g2in\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>cp php-fpm.conf.default php-fpm.conf</code></pre></li><li id=\"4d4b7080e4ueu\"><p id=\"b3fad239ebcyi\">执行如下命令，启动PHP服务。</p><pre id=\"h3pced\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>/usr/local/php5.4.45/sbin/php-fpm </code></pre></li></ol></li><li id=\"0be1caf1e441s\"><p id=\"b3fad23aeb66v\">重新访问网站。</p><p id=\"b3fad23bebajw\">如果访问成功，该问题解决。</p></li></ol><h2 id=\"FtyZG\">相关文档</h2><ul id=\"63154ec496gf9\"><li id=\"63154ec596zt4\"><p id=\"63154ec696vym\"><a class=\"\" target=\"_blank\" href=\"https://www.php.net/manual/zh/book.mysql.php\">原始的MySQL API </a></p></li><li id=\"63154ec796z9f\"><p id=\"63154ec896lmv\"><a class=\"\" target=\"_blank\" href=\"https://www.php.net/manual/zh/function.mysql-query.php\">mysql_query</a></p></li></ul></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-instance-access-iis-to-create-website-prompt-bad-request-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>Windows实例访问使用IIS创建的网站提示“Bad Request (Invalid Hostname)”错误如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例访问使用IIS创建的网站提示“Bad Request (Invalid Hostname)”错误如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 18:07:17</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"a2e277c096a6i\"><p data-tag=\"shortdesc\" id=\"a2e95597966mi\" class=\"shortdesc\">本文介绍在Windows实例上访问使用IIS（Internet Information Services）创建的网站，提示“Bad Request (Invalid Hostname)”错误的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"h2-u95EEu9898u73B0u8C611\">问题描述</h2><p id=\"175d8f50ad1zk\">在Windows实例上访问使用IIS创建的网站时，提示“Bad Request (Invalid Hostname)”错误，如图所示。<img id=\"c8f82c70ad93g\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4605256761/p562579.jpg\" alt=\"问题描述\" placement=\"break\" class=\"image break\"></p><h2 id=\"h2-u95EEu9898u539Fu56E02\">问题原因</h2><p id=\"ebf53c40adpcg\">被访问的网站未在IIS中绑定域名或者在IIS中已绑定的域名存在冲突导致该问题。</p><h2 id=\"h2-u89E3u51B3u65B9u68483\">解决方案</h2><div type=\"note\" id=\"0ff23a70ad0is\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"0dd722a0adcaq\">本文操作以Windows Server 2019 数据中心版 64位中文版操作系统为例，其它版本的Windows操作系统可参考本文操作步骤进行修改。</p></div></div><ol id=\"38b6c842adp9j\"><li id=\"38b6c840adxky\"><p id=\"34d659c0adx31\">远程连接Windows实例。</p><p id=\"42654470ade1k\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"3fd5e701adkg7\"><p id=\"3fd5e700adi7l\">打开IIS。</p><ol id=\"f8e256c1addcm\"><li id=\"f86c6371ad8mn\"><p id=\"f86c6370ad57w\">在桌面左下角，选择<b data-tag=\"uicontrol\" id=\"15280a50adme9\" class=\"uicontrol\"><img id=\"05bc9770adru6\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4605256761/p562602.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"> &gt; 服务器管理器</b>。<img id=\"79af0e60ado0d\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4605256761/p562603.jpg\" alt=\"打开服务器管理器\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"11466351advt2\"><p id=\"11466350ad16v\">在服务器管理器页面，选择<b data-tag=\"uicontrol\" id=\"67bb2670ad6cr\" class=\"uicontrol\">工具 &gt; Internet Information Services（IIS）管理器</b>。</p><p id=\"6e24b0d0adtsp\">进入<b data-tag=\"uicontrol\" id=\"679b13f0adn1y\" class=\"uicontrol\">Internet Information Services（IIS）管理器</b>页面。<img id=\"d07fad20adtut\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4605256761/p562612.jpg\" alt=\"选择IIS\" placement=\"break\" class=\"image break\"></p></li></ol></li><li id=\"6a4d4301adui7\"><p id=\"6a4d4300adv54\">在<b data-tag=\"uicontrol\" id=\"679b13f1ad618\" class=\"uicontrol\">Internet Information Services（IIS）管理器</b>页面的左侧导航栏右键单击目标网站，然后单击<b data-tag=\"uicontrol\" id=\"683039f0adfu2\" class=\"uicontrol\">编辑绑定</b>。<img id=\"6e587590ad12z\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3605256761/p562615.jpg\" alt=\"编辑绑定\" placement=\"break\" class=\"image break\"></p></li><li id=\"6349fb91ad6uq\"><p id=\"6349fb90adkzz\">在<b data-tag=\"uicontrol\" id=\"9f502a30adw5e\" class=\"uicontrol\">网站绑定</b>页面，绑定域名或者检查已绑定的域名信息是否正确。</p><ul id=\"c624f5f1adrjx\"><li id=\"c5677251adcd2\"><p id=\"c5677250ad93c\">添加域名。</p><ol id=\"e2d0e561adl07\"><li id=\"e1e748b1ads2g\"><p id=\"e7a80ff0adn0n\">在<b data-tag=\"uicontrol\" id=\"679b13f2adpqy\" class=\"uicontrol\">网站绑定</b>页面，单击<b data-tag=\"uicontrol\" id=\"edc43da0adz35\" class=\"uicontrol\">添加</b>。<img id=\"0fc07f40ad4sn\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4605256761/p562620.jpg\" alt=\"添加域名\" placement=\"break\" class=\"image break\"></p></li><li id=\"eec13b41adtqo\"><p id=\"eec13b40adke4\">在<b data-tag=\"uicontrol\" id=\"2c5d5380adiyp\" class=\"uicontrol\">添加网站绑定</b>页面，根据页面参数设置网站域名信息，然后单击<b data-tag=\"uicontrol\" id=\"2ec0e600adubq\" class=\"uicontrol\">确定</b>。<img id=\"580949d0adwl7\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4605256761/p562623.jpg\" alt=\"添加网站绑定\" placement=\"break\" class=\"image break\"></p></li></ol></li><li id=\"dc2c26c0ad1oh\"><p id=\"dc2bffb0adzk0\">查看或修改已绑定域名。</p><ol id=\"73f23760ad70v\"><li id=\"7372ce31adki7\"><p id=\"7211dea0adxq4\">在<b data-tag=\"uicontrol\" id=\"679b13f3ad058\" class=\"uicontrol\">网站绑定</b>页面，双击已绑定的网站。</p></li><li id=\"8b3591b1ad90h\"><p id=\"8b3591b0aday4\">在<b data-tag=\"uicontrol\" id=\"9b123cf0adx9t\" class=\"uicontrol\">编辑网站</b>绑定页面，查看网站信息。</p><p id=\"a43ce320ad200\">如果您查看域名信息后，需要修改域名，您可以在当前页面直接修改，然后单击<b data-tag=\"uicontrol\" id=\"c6cfe680adeaz\" class=\"uicontrol\">确定</b>。<img id=\"e47d8e80adqip\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4605256761/p562629.jpg\" alt=\"查看绑定\" placement=\"break\" class=\"image break\"></p></li></ol></li></ul></li><li id=\"eb9b9bd1adg89\"><p id=\"eb9b9bd0adjuw\">重新访问网站。</p><p id=\"fd3e3a00admrh\">网站访问成功，该问题解决。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-connection-was-denied-because-the-user-account-is-not-authorized-for-remote-login", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例提示\"连接被拒绝，因为没有授权此用户账户进行远程登录\"错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例提示\"连接被拒绝，因为没有授权此用户账户进行远程登录\"错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:44:59</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"main-2289733\"><p data-tag=\"shortdesc\" id=\"040fb58995mmh\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例提示\"连接被拒绝，因为没有授权此用户账户进行远程登录\"错误的解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"b1b1a5b096s7p\" class=\"section\"><h2 id=\"1c8a750495y7b\"><b>问题描述</b></h2><section id=\"22419080965hq\" class=\"section\"><p id=\"791eea0096c5y\">使用远程桌面连接Windows系统的ECS实例时，出现“<b data-tag=\"uicontrol\" class=\"uicontrol\">连接被拒绝，因为没有授权此用户账户进行远程登录。</b>”错误，导致无法远程登录ECS实例。</p><img height=\"378\" width=\"379\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5722293761/p518811.png\" id=\"ad56ae71965zd\" class=\"image break\"></section></section><section id=\"b54c0a8096nsc\" class=\"section\"><h2 id=\"1c8a750795i0o\"><b>问题原因</b></h2><section id=\"257fa48096ymg\" class=\"section\"><p id=\"57af30f496lps\">该问题可能是由于Windows系统远程桌面相关权限配置异常导致。您可以参考以下三种方案进行排查修复。</p><ul id=\"b8de3af296ady\"><li id=\"b8de3af096rhf\"><p id=\"f7c0eab096jc9\"><a title=\"\" class=\"xref\" href=\"#b28dd19195j91\">步骤一：排查组策略用户权限分配</a></p></li><li id=\"f94e417196w4r\"><p id=\"f94e4170965yj\"><a title=\"\" class=\"xref\" href=\"#57af09e296n9t\">步骤二：排查问题用户的用户组属性</a></p></li><li id=\"026e605196kcs\"><p id=\"026e605096cbf\"><a title=\"\" class=\"xref\" href=\"#6f16bfa0962pu\">步骤三：排查远程桌面会话主机配置</a></p></li></ul></section></section><section id=\"beda548096u4s\" class=\"section\"><h2 id=\"1c8a750e95ewa\">解决方案</h2><section id=\"3dd24bf096gae\" class=\"section\"><p id=\"57af30f196jtl\">您可以根据实际情况，选择对应方案进行解决，本文以Windows Server 2008操作系统为例。</p><section id=\"2f312df0961ru\" class=\"section\"><h3 id=\"b28dd19195j91\"><b>步骤一：排查组策略用户权限分配</b></h3><ol id=\"1c8a752095gon\"><li id=\"1c8a752195j0k\"><p id=\"57af09e096ju4\">通过VNC连接Windows实例。</p><p id=\"57af09e1964cr\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"688626b195mm9\"><p id=\"ea2f332096612\">单击<b data-tag=\"uicontrol\" class=\"uicontrol\">开始 &gt; 运行</b>，在<b data-tag=\"uicontrol\" class=\"uicontrol\">运行</b>窗口中，输入<code data-tag=\"code\" class=\"code\">secpol.msc</code>命令，单击<b data-tag=\"uicontrol\" class=\"uicontrol\">确定</b>。打开<b data-tag=\"uicontrol\" class=\"uicontrol\">本地安全策略</b>页面。 </p></li><li id=\"4df8175196rfh\"><p id=\"51177fc096kly\">选择<b data-tag=\"uicontrol\" class=\"uicontrol\">本地策略 &gt; 用户权限分配 &gt; 允许通过远程桌面服务登录</b>。</p><p id=\"de7c8410969hl\">确认是否包含如下用户组。</p><ul id=\"f2caba4196y3t\"><li id=\"f2093f0196efx\"><p id=\"f2093f0096b4m\">如果不包含，请继续执行下一步。</p></li><li id=\"f59f0ff196btx\"><p id=\"f59f0ff096ep4\">如果包含，请直接执行<a title=\"\" class=\"xref\" href=\"#57af09e296n9t\">步骤二：排查问题用户的用户组属性</a>。<img placement=\"break\" alt=\"11\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8195293761/p551355.png\" id=\"a2b84ba096wox\" class=\"image break\"></p></li></ul></li><li id=\"79a05cc196pbw\"><p id=\"7a8b31f096sd6\">（可选）如果缺少对应的用户组，请单击<b data-tag=\"uicontrol\" class=\"uicontrol\">添加用户或组</b>进行添加，单击<b data-tag=\"uicontrol\" class=\"uicontrol\">确定</b>完成配置。<img placement=\"break\" alt=\"12\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8195293761/p551356.png\" id=\"cd7bddc096kgc\" class=\"image break\"></p></li></ol></section><section id=\"32e49900960fb\" class=\"section\"><h3 id=\"57af09e296n9t\"><b>步骤二：排查问题用户的用户组属性</b></h3><ol id=\"48d93ff096bdj\"><li id=\"48d93ff196n71\"><p id=\"48d93ff296fhf\">通过VNC连接Windows实例。</p><p id=\"48d93ff396dk2\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"48d93ff49612h\"><p id=\"48d93ff596ajh\">单击<b data-tag=\"uicontrol\" class=\"uicontrol\">开始 &gt; 运行</b>，在<b data-tag=\"uicontrol\" class=\"uicontrol\">运行</b>窗口中，输入<code data-tag=\"code\" class=\"code\">lusrmgr.msc</code>命令，单击<b data-tag=\"uicontrol\" class=\"uicontrol\">确定</b>。打开<b data-tag=\"uicontrol\" class=\"uicontrol\">本地用户和组</b>页面。 </p></li><li id=\"48d93ffb96crs\"><p id=\"db2640b096jps\">单击左侧列表中的<b data-tag=\"uicontrol\" class=\"uicontrol\">用户</b>，切换到用户管理。双击出现访问异常的用户名。</p></li><li id=\"4ef27e40960v5\"><p id=\"4ef2573096tkh\">在弹出的用户属性对话框中，单击<b data-tag=\"uicontrol\" class=\"uicontrol\">隶属于</b>。确保该用户<b data-tag=\"uicontrol\" class=\"uicontrol\">隶属于</b>包含<a title=\"\" class=\"xref\" href=\"#b28dd19195j91\">方案一：排查组策略用户权限分配</a>中已经被赋予远程登录服务器权限的用户组，如下图所示。<img width=\"600\" placement=\"break\" alt=\"13\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8195293761/p551357.png\" id=\"35c5b63096c3z\" class=\"image break\"></p></li><li id=\"9d1fed9196yje\"><p id=\"9d1fed909686v\">（可选）如果缺少对应的用户组，单击<b data-tag=\"uicontrol\" class=\"uicontrol\">添加</b>按钮进行添加，单击<b data-tag=\"uicontrol\" class=\"uicontrol\">确定</b>完成配置。</p></li></ol></section><section id=\"370803f0964cg\" class=\"section\"><h3 id=\"6f16bfa0962pu\"><b>步骤三：排查远程桌面会话主机配置</b></h3><ol id=\"c1f6527196hcz\"><li id=\"c1f6527296ey9\"><p id=\"c1f65273961z7\">通过VNC连接Windows实例。</p><p id=\"c1f6527496kwj\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"c1f6527596dk5\"><p id=\"c1f6527696jp5\">单击<b data-tag=\"uicontrol\" class=\"uicontrol\">开始 &gt; 运行</b>，在<b data-tag=\"uicontrol\" class=\"uicontrol\">运行</b>窗口中，输入<code data-tag=\"code\" class=\"code\">tsconfig.msc</code>命令，单击<b data-tag=\"uicontrol\" class=\"uicontrol\">确定</b>。打开<b data-tag=\"uicontrol\" class=\"uicontrol\">远程桌面会话主机配置</b>页面。 </p></li><li id=\"c1f6798196w3k\"><p id=\"83bbd1f0962vk\">双击默认的远程桌面连接配置<b data-tag=\"uicontrol\" class=\"uicontrol\">RDP-Tcp</b>或其它用户自己新增的连接配置，在弹出的对话框中单击<b data-tag=\"uicontrol\" class=\"uicontrol\">安全</b>选项卡。<img width=\"600\" placement=\"break\" id=\"9b8413b1967od\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4623293761/p518814.png\" class=\"image break\"></p></li><li id=\"a5b57b81967dh\"><p id=\"b7b506c096pp5\">确保组或用户名下，包含<a title=\"\" class=\"xref\" href=\"#b28dd19195j91\">方案一：排查组策略用户权限分配</a>中已经被赋予远程登录服务器权限的用户组或单独的用户名。</p></li><li id=\"eea88fd196zl5\"><p id=\"ec387a30964ds\">（可选）如果缺少对应的用户组或配置，单击<b data-tag=\"uicontrol\" class=\"uicontrol\">添加</b>按钮进行添加，单击<b data-tag=\"uicontrol\" class=\"uicontrol\">确定</b>完成配置。</p></li><li id=\"b94591d1964n9\"><p id=\"bb6e654096luc\">重启ECS实例。具体操作，请参考<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li></ol></section></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-534-policy-requires-ssl-error-message-appears-when-i-access-an-ftp-site-deployed-on-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>通过FTP over TLS方式连接Windows实例上IIS服务创建的FTP站点时，提示“534 Policy requires SSL”信息，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过FTP over TLS方式连接Windows实例上IIS服务创建的FTP站点时，提示“534 Policy requires SSL”信息，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-14 17:02:56</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"4a0273f084fs5\"><p data-tag=\"shortdesc\" id=\"4a08b5808403u\" class=\"shortdesc\">本文介绍<span style=\"color:rgba(0, 0, 0, 0.85)\">通过FTP over TLS方式连接Windows实例上IIS服务创建的FTP站点时，</span>提示“534 Policy requires SSL”信息的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"h2-u95EEu9898u73B0u8C611\">问题描述</h2><p id=\"93e66270a94vo\"><span style=\"color:rgba(0, 0, 0, 0.85)\">通过FTP over TLS方式连接Windows实例上IIS服务创建的FTP站点</span>时，提示“534 Policy requires SSL”信息，无法连接FTP站点。</p><p id=\"633c0270b3o2c\" props=\"china\" data-cond-props=\"china\">报错示例如下：</p><img id=\"93e66272a9u13\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0306106761/p559212.jpg\" alt=\"报错信息原图新\" placement=\"break\" class=\"image break\"><h2 id=\"9c876640a9qlp\"><b>问题原因</b></h2><p id=\"a39c4bd0a9l2q\">由该问题的“534 Local policy on server does not allow TLS secure connections.”响应信息可知，FTP站点的<b data-tag=\"uicontrol\" id=\"26a7d0e0a9uif\" class=\"uicontrol\"><b>FTP SSL 设置</b></b>参数不正确导致该问题。</p><h2 id=\"h2-u89E3u51B3u65B9u68482\">解决方案</h2><ol id=\"b2823b00a92aa\"><li id=\"b2823b01a9bnb\"><p id=\"b2823b02a9nlz\">远程连接Windows实例。</p><p id=\"b2823b03a9ouy\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"b2823b04a9s1z\"><p id=\"b2823b05a9d3v\">在桌面左下角，选择<img id=\"b2823b06a9wbn\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1306106761/p559246.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"> &gt; Windows<b>管理工具</b> &gt; <b>Internet Information Services（IIS）管理器</b>。<img id=\"b2823b07a9omm\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0306106761/p559243.jpg\" alt=\"打开IIS新\" placement=\"break\" class=\"image break\"></p></li><li id=\"b2823b08a9467\"><p id=\"b2823b09a9ls1\">在FTP主页的<b data-tag=\"uicontrol\" id=\"b5913010a9ken\" class=\"uicontrol\"><b>FTP</b></b>区域，双击<b data-tag=\"uicontrol\" id=\"af077380a9iki\" class=\"uicontrol\"><b>FTP SSL设置</b></b>。 <img id=\"b2823b0aa9ytv\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1306106761/p559293.jpg\" alt=\"FTP主页新图\" placement=\"break\" class=\"image break\"></p></li><li id=\"b2823b0ba9et5\"><p id=\"b2823b0ca9e4l\">在<b data-tag=\"uicontrol\" id=\"0d57f930a9mdc\" class=\"uicontrol\"><b>FTP SSL设置</b></b>区域，将<b data-tag=\"uicontrol\" id=\"1967e830a9wek\" class=\"uicontrol\"><b>SSL 策略</b></b>设置为<b data-tag=\"uicontrol\" id=\"76248110a9w8g\" class=\"uicontrol\"><b>允许 SSL 连接</b></b>，然后在<b data-tag=\"uicontrol\" id=\"8c5978a0a90cg\" class=\"uicontrol\"><b>操作</b></b>列单击<b data-tag=\"uicontrol\" id=\"8f3f5a80a98g5\" class=\"uicontrol\"><b>应用</b></b>。 <img id=\"b2823b0da9eug\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1306106761/p559300.jpg\" alt=\"勾选SSL连接新图\" placement=\"break\" class=\"image break\"></p></li><li id=\"b2823b0ea9g8p\"><p id=\"b2823b0fa93v0\">再次访问该FTP站点。</p></li></ol></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/local-loopback-adapter-did-not-start-to-use-nginx-access-web-tips-502-and-connect-upstream-time-out-error-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>本地回环网卡（lo）未启动导致使用Nginx访问网页提示“502”和“connect upstream time out”报错，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>本地回环网卡（lo）未启动导致使用Nginx访问网页提示“502”和“connect upstream time out”报错，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-08 18:11:13</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"43264230965zf\"><p data-tag=\"shortdesc\" id=\"432d6e2096w5n\" class=\"shortdesc\">本文介绍本地回环网卡（lo）未启动，导致使用Nginx访问网页提示“502”和“connect upstream time out”报错的问题现象、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"WhtjC\">问题描述</h2><p id=\"01d20d90acswf\">在使用Nginx访问网页时，提示“502”错误，如图所示：</p><img id=\"01d20d92acplc\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4461636761/p558992.jpg\" alt=\"20230209211137\" placement=\"break\" width=\"750\" class=\"image break\"><p id=\"01d20d93ac7kq\">此时，进行如下检查，发现Nginx服务日志中出现“connect upstream time out”报错：</p><ol id=\"01d20d94acwsh\"><li id=\"01d20d95acpds\"><p id=\"01d20d96ackuf\">检查在PHP-FPM进程，发现PHP-FPM进程正常运行，如图所示。</p><img id=\"01d20d98ac0n7\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4461636761/p558993.jpg\" alt=\"20230209211705\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"01d20d99ac5iu\"><p id=\"01d20d9aacagh\">查看Nginx服务日志，发现Nginx服务日志中出现“connect upstream time out”报错，如图所示。</p><pre id=\"01d20d9bacatn\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>connect upstream time out</code></pre><img id=\"01d20d9dac3tc\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4461636761/p558988.jpg\" alt=\"20230209205043\" placement=\"break\" width=\"750\" class=\"image break\"></li></ol><h2 id=\"WjTfi\">问题原因</h2><p id=\"fa809430acqzv\">PHP-FPM服务正常启动且已设置了监听端口（<code data-tag=\"code\" class=\"code\">127.0.0.1:9000</code>），但由于本地回环网卡（<code data-tag=\"code\" class=\"code\">lo</code>）未启动，从而导致该问题。</p><h2 id=\"wSyjt\">解决方案</h2><p id=\"b0c3f0d0b7biu\">您需要检查本地回环网卡（lo）是否正常启动，如果未启动则需要启动后重新访问网站，操作步骤如下：</p><ol id=\"3f676be0ac4qi\"><li id=\"3f676be1accs6\"><p id=\"3f676be2actz7\">远程连接ECS实例。</p><p id=\"3f676be3ac4iq\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"3f676be4acur1\"><p id=\"3f676be5acpej\">检查本地回环网卡（<code data-tag=\"code\" class=\"code\">lo</code>）是否正常启动。</p><ol id=\"4d98b111acz2u\"><li id=\"4d02b2a1aclus\"><p id=\"52b018f0acnlr\">执行<code data-tag=\"code\" class=\"code\">ifconfig -a</code>命令，查看当前系统的网卡信息。</p><p id=\"71c58e50acvgm\">当本地回环网卡（<code data-tag=\"code\" class=\"code\">lo</code>）状态未启动，如图所示，则您需要启动本地回环网卡（lo）。</p><img id=\"a82bf291acg3n\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4461636761/p558990.jpg\" alt=\"20230209210535\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"772f0dd1acgss\"><p id=\"772f0dd0actwt\">执行 <code data-tag=\"code\" class=\"code\">ifup ifcfg-lo</code>命令，启动本地回环网卡（<code data-tag=\"code\" class=\"code\">lo</code>）。</p><p data-lake-id=\"d9e684fb2d5cd8c99bbeef2397720c46_h2_3\" id=\"6c0f0040acjzx\">当本地回环网卡（<code data-tag=\"code\" class=\"code\">lo</code>）状态为<code data-tag=\"code\" class=\"code\">RUNNING</code>时，表示成功启动本地回环网卡（<code data-tag=\"code\" class=\"code\">lo</code>），如图所示。</p><img id=\"da809f21acivp\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5461636761/p558991.jpg\" alt=\"20230209210851\" placement=\"break\" width=\"750\" class=\"image break\"></li></ol></li><li id=\"3f6792f1ac60k\"><p id=\"3f6792f2acyk1\">检查本地回环网卡（lo）配置文件。</p><ol id=\"1735bd51acpb9\"><li id=\"f67e30b1ac2t7\"><p id=\"cb00cf00acu6c\">执行如下命令，编辑本地回环网卡（<code data-tag=\"code\" class=\"code\">lo</code>）的配置文件。</p><p id=\"1f283b90b8o1m\">您需要根据您的实际操作系统执行对应的命令，常见操作系统命令如下：</p><ul id=\"386e91d1b8cxi\"><li id=\"3724acb1b8ptx\"><p id=\"56f4bf80b8oju\">CentOS 7或Alibaba Cloud Linux 2/3</p><pre id=\"un5qqp\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/sysconfig/network-script/ifcfg-lo</code></pre></li><li id=\"dda229d1b8hm3\"><p id=\"72bbcd30b8mwp\">Ubuntu 16.04</p><pre id=\"l8onyu\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/network/interfaces</code></pre></li><li id=\"f8492181b8p4c\"><p id=\"00912fe0b8imi\">Ubuntu 18.04及以上版本</p><pre id=\"59iddg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/netplan/50-cloud-init.yaml</code></pre></li></ul><p id=\"8ad38e82b8smq\">以CentOS操作系统为例，如果命令回显中，<code data-tag=\"code\" class=\"code\">ONBOOT</code>参数的值为<code data-tag=\"code\" class=\"code\">no</code>，则您需要将<code data-tag=\"code\" class=\"code\">ONBOOT=no</code>修改为<code data-tag=\"code\" class=\"code\">ONBOOT=yes</code>，如图所示。</p><div type=\"note\" id=\"97886ce0b8off\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"e22624a7acw43\">如果您的操作系统中无<code data-tag=\"code\" class=\"code\">ONBOOT</code>参数相关的配置，则您只需要在网卡正常启动后，检查配置文件正确即可。</p></div></div><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6991636761/p519829.png\" id=\"8fa317f3b8pjf\" width=\"750\" class=\"image break\"></li><li id=\"851d0111acom6\"><p id=\"c058bb20acu21\">输入<code data-tag=\"code\" class=\"code\">:wq</code>并回车，保存并关闭配置文件。</p></li><li id=\"cb0657d0ac6zq\"><p id=\"cfc76250acp12\">执行<code data-tag=\"code\" class=\"code\">systemctl restart network</code>命令，重启网络。</p></li></ol></li><li id=\"d7ae64f1ac0ak\"><p id=\"9169a060ac4xw\">重新使用Nginx访问网页。</p></li></ol></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/after-i-configure-the-vpn-service-for-a-windows-instance-vpn-is-working-as-expected-but-i-cannot-access-an-external-website-from-the-instance-what-do-i-do", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>Windows实例上配置VPN服务后，VPN服务正常但是无法访问外部网站，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例上配置VPN服务后，VPN服务正常但是无法访问外部网站，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-19 10:20:12</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"ab51910065om4\"><p data-tag=\"shortdesc\" id=\"ab54c55165550\" class=\"shortdesc\">本文介绍Windows实例上配置VPN服务后，在Windows实例上可以连接网络接口（即VPN服务可以正常使用），但是无法访问外部网站问题的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"myYMe\">问题描述</h2><p id=\"537c9e90adpvb\">Windows实例上配置VPN服务后，在Windows实例上可以连接网络接口（即VPN服务可以正常使用），<span data-tag=\"ph\" id=\"4f35cb80deoay\" props=\"china\" data-cond-props=\"china\" class=\"ph\">如图所示，</span>但是无法访问其他外部网络。</p><img id=\"36715440ad0ij\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9673011861/p562488.jpg\" alt=\"20230215195207\" placement=\"break\" width=\"750\" class=\"image break\"><h2 id=\"kDKSi\">问题原因</h2><p id=\"537cc5a1adtfp\">没有在Windows实例上配置NAT转发导致该问题。</p><h2 id=\"mRyHt\">解决方案</h2><p id=\"0e4bfcc0d1bpv\">您可以在Windows实例上配置NAT转发后，重新访问该网站，操作步骤如下：</p><div type=\"note\" id=\"410f38b0d1yg8\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"be58ac40cdkv2\">本文操作步骤以Windows Server 2012 R2数据中心版64位中文版为例，实际操作以您实际的操作系统为准。</p></div></div><ol id=\"ab54ec636524v\"><li id=\"ab54ec646539u\"><p id=\"537cc5a3adnsk\">远程连接Windows实例。</p><p id=\"72fff350d1grr\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"df95d5b0d14ul\"><p id=\"df95aea0d1zmd\">打开<b data-tag=\"uicontrol\" id=\"a7cdb630d1ba6\" class=\"uicontrol\">路由和远程访问</b>页面。</p><ol id=\"b14d3321d17kn\"><li id=\"547b1ba0d1m07\"><p id=\"547af490d1mzv\">在桌面左下角，选择<img id=\"c7a48820d1d1j\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615324.png\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"dbd6d1e0d11kc\" class=\"uicontrol\"> &gt; 服务器管理器</b>。</p></li><li id=\"af5f1ec1d13jw\"><p id=\"9c5e9e40d1kos\">在<b data-tag=\"uicontrol\" id=\"bcdd8eb0d17c1\" class=\"uicontrol\">服务器管理器</b>页面右上角，选择<b data-tag=\"uicontrol\" id=\"f9895be0d17x7\" class=\"uicontrol\">工具 &gt; 路由和远程访问</b>。<img id=\"122c3dd0d1sr0\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9673011861/p616702.png\" alt=\"服务器管理器单击远程访问\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"84b0c250d19jw\"><p id=\"84b09b40d1ini\">新增路由协议。</p><ol id=\"69111d51d1j9j\"><li id=\"68902d81d16az\"><p id=\"68902d80d1hzk\">在<b data-tag=\"uicontrol\" id=\"350b6ff0d1cdh\" class=\"uicontrol\">路由和远程访问</b>页面，选择<b data-tag=\"uicontrol\" id=\"1f5ebb30d1bra\" class=\"uicontrol\">IPv4 &gt; 常规 &gt; 新增路由协议</b>。<img id=\"24e9a560d1hud\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9673011861/p617291.png\" alt=\"新增路由协议xin\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"1cbe46c1d1uw5\"><p id=\"1cbe46c0d1sl4\">单击<b data-tag=\"uicontrol\" id=\"e7f2ed80d1ovy\" class=\"uicontrol\">NAT</b>，然后单击<b data-tag=\"uicontrol\" id=\"ea601cf0d1cze\" class=\"uicontrol\">确定</b>。<img id=\"bf033b90d12ry\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9673011861/p618268.png\" alt=\"新增路由协议界面单击NAT xin\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"4e039ba1d1fj9\"><p id=\"4e039ba0d1xwi\">新增接口。</p><ol id=\"cc085cd1d1u6y\"><li id=\"cb9bb851d1n7j\"><p id=\"cc8c59e0d150f\">在<b data-tag=\"uicontrol\" id=\"5ac66da0d2ca0\" class=\"uicontrol\">路由和远程访问</b>页面，选择<b data-tag=\"uicontrol\" id=\"5ac66da1d28ra\" class=\"uicontrol\">IPv4 &gt; NAT &gt; 新增接口</b>。<img id=\"21d081b0d1ar5\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9673011861/p618273.png\" alt=\"新增接口xin\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"1b17c5e0d1zne\"><p id=\"1b179ed0d1ksb\">分别添加<b data-tag=\"uicontrol\" id=\"014789b0d1inm\" class=\"uicontrol\">内部</b>和<b data-tag=\"uicontrol\" id=\"03fa9bc0d14x7\" class=\"uicontrol\">以太网</b>（外部网络）连接信息，然后再单击<b data-tag=\"uicontrol\" id=\"fe42fc40d1ie5\" class=\"uicontrol\">确定</b>。<img id=\"60298be0d14fr\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9673011861/p618299.png\" alt=\"添加内部和以太网信息 xin\" placement=\"break\" width=\"750\" class=\"image break\"></p><p id=\"6ba01de0d1qdm\">添加<b data-tag=\"uicontrol\" id=\"5ac66da2d2sey\" class=\"uicontrol\">以太网</b>（外部网络）连接时，您需要在<b data-tag=\"uicontrol\" id=\"0a4eace0d18ox\" class=\"uicontrol\">网络地址转换属性-以太网属性</b>页面的<b data-tag=\"uicontrol\" id=\"8f5a8a40d1p3g\" class=\"uicontrol\">NAT</b>页签下，选中<b data-tag=\"uicontrol\" id=\"949335c0d1qx5\" class=\"uicontrol\">公用接口连接到Internet</b>和<b data-tag=\"uicontrol\" id=\"99225ad0d1cwx\" class=\"uicontrol\">在此接口上启用NAT</b>，然后再单击<b data-tag=\"uicontrol\" id=\"9b2f41d0d126k\" class=\"uicontrol\">确定</b>，如图所示。<img id=\"f92cd770d1wl2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9673011861/p618302.png\" alt=\"以太网连接的NAT页签 xin\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"7eacddf0d1da1\"><p id=\"7eacb6e0d1cd5\">在<b data-tag=\"uicontrol\" id=\"c47bcee0d1j8p\" class=\"uicontrol\">路由和远程访问</b>页面，右键单击您的本地服务器，然后选择<b data-tag=\"uicontrol\" id=\"df273360d1der\" class=\"uicontrol\">所有任务 &gt; 重新启动</b>。<img id=\"d6e8c1f0d10b6\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9673011861/p618324.png\" alt=\"重启路由和远程访问 xin\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"ee610ef1d1uc5\"><p id=\"ee610ef0d19t1\">重新访问网站。</p><p id=\"f3edf4f0d1wsw\">如果网站访问成功，该问题解决。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/to-sign-in-remotely-you-need-the-right-to-sign-in-through-remote-desktop-services", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例提示“要远程登录，你需要具有通过远程桌面服务进行登录的权限。”信息如何解决?</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例提示“要远程登录，你需要具有通过远程桌面服务进行登录的权限。”信息如何解决?</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:45:24</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"9b858d609fnrw\"><p id=\"9b8873979fe6y\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例时无法使用Administrator用户登录问题的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"cec953e09fobi\" class=\"section\"><h2 id=\"XbeWY\">问题现象</h2><p id=\"9b8873989fqnj\">在使用Administrator用户通过远程桌面登录实例时提示以下信息。</p><img placement=\"break\" alt=\"11\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6206135761/p554208.png\" id=\"f2dedb81a2ob0\" class=\"image break\"></section><section id=\"d04fccd09fwrh\" class=\"section\"><h2 id=\"tayMx\">问题原因</h2><p id=\"1caf45f0a221z\">Windows实例的本地安全策略中，设置了禁止Administrator用户作为远程桌面服务客户端登录。</p></section><section id=\"d4d380309fwx5\" class=\"section\"><h2 id=\"EFTFF\">解决方案</h2><p id=\"9b8873a49f2oj\">请您参考以下步骤进行操作：</p><ol id=\"9b8873a59fg7o\"><li id=\"9b8873a69fjuc\"><p id=\"700963319fsj4\">通过VNC连接Windows实例。</p><p id=\"700963329fytz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"4f13bc219fs9z\"><p id=\"4f13bc209f6gh\">单击<img placement=\"inline\" id=\"910cdb019fe05\" width=\"25\" alt=\"Dingtalk_20210510142550.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" class=\"image inline\">图标，打开<b data-tag=\"uicontrol\" id=\"b5fa7ebca265a\" class=\"uicontrol\">控制面板</b>，找到<b data-tag=\"uicontrol\" id=\"b5fa7ebea2a1a\" class=\"uicontrol\">系统和安全</b>。</p></li><li id=\"9b889aa19f8l3\"><p id=\"9b889aa29f0r8\">在<b data-tag=\"uicontrol\" id=\"b5faa5c3a21er\" class=\"uicontrol\">控制面板</b>页面，依次单击<b data-tag=\"uicontrol\" id=\"b5faa5c5a2jtx\" class=\"uicontrol\">系统和安全 &gt; 管理工具</b>，然后双击打开<b data-tag=\"uicontrol\" id=\"b5faa5c7a2nwu\" class=\"uicontrol\">本地安全策略</b>。</p></li><li id=\"9b889aa39f2i2\"><p id=\"9b889aa49fu3d\">在<b data-tag=\"uicontrol\" id=\"b5faa5d2a2kqk\" class=\"uicontrol\">本地安全策略</b>页面，单击<b data-tag=\"uicontrol\" id=\"b5faa5d4a2w4s\" class=\"uicontrol\">本地策略 &gt; 用户权限分配</b>，在右侧选项卡中双击<b data-tag=\"uicontrol\" id=\"b5faa5d6a2tlo\" class=\"uicontrol\">拒绝通过远程桌面服务登录</b>。</p><img id=\"f51347b1a210m\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6206135761/p552634.png\" alt=\"6\" placement=\"break\" width=\"500\" class=\"image break\"></li><li id=\"9b889aa59fz28\"><p id=\"9b889aa69fjq4\">在<b data-tag=\"uicontrol\" id=\"b5faccd0a25y6\" class=\"uicontrol\">拒绝通过远程桌面服务登录</b>的属性窗口，删除已添加的Administrator用户，然后单击<b data-tag=\"uicontrol\" id=\"25384a60a21s2\" class=\"uicontrol\">确定</b>。</p><img id=\"0005dca1a2psy\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6206135761/p552624.png\" alt=\"5\" placement=\"break\" height=\"400\" class=\"image break\"></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-a-windows-instance-cannot-access-external-networks-when-a-large-number-of-connections-stay-in-the-time-wait-state", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>Windows实例的Time_Wait连接不释放导致访问外网失败，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例的Time_Wait连接不释放导致访问外网失败，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-23 16:18:38</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"f9465ce096a4v\"><p data-tag=\"shortdesc\" id=\"f94e4c24965el\" class=\"shortdesc\">本文介绍Windows实例的Time_Wait连接不释放，导致访问外网失败问题的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"mAYtp\">问题描述</h2><p id=\"a034cbc0a8d63\">当在Windows实例上可以<code data-tag=\"code\" class=\"code\">ping</code>通外网，但是无法使用浏览器访问外网、访问外网加载时间过长或者Windows实例上的应用联网异常时，在Windows实例的CMD命令提示符中，执行<code data-tag=\"code\" class=\"code\">netstat -an |find \"TIME_WAIT\" /c</code> 命令，发现存在大量TCP连接处于<code data-tag=\"code\" class=\"code\">TIME_WAIT</code>状态，示例如下：<img id=\"a034cbc2a850y\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p558971.jpg\" alt=\"查看time_wait连接\" placement=\"break\" class=\"image break\"></p><h2 id=\"AMbQB\">问题原因</h2><p id=\"cfa9ff10a8qtm\">Windows操作系统从Windows Server 2008版本以后，默认动态端口的数量为16384个（从49152起始，到65536结束）。由于TCP默认的Time Wait Delay时间为4分钟，如系统内有大量的活动连接，在结束后会在较长时间处于<code data-tag=\"code\" class=\"code\">Time_Wait</code>状态并占用大量端口，从而导致新的连接或应用因无端口使用而出现异常。</p><h2 id=\"BaQPc\">解决方案</h2><div type=\"note\" id=\"f9eb68e1a85vf\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"fc2a3550a84ud\">以下操作步骤以Windows Server 2012 R2为例，实际操作以您实际的Windows实例操作系统为准。</p></div></div><ol id=\"066dc590a8h4t\"><li id=\"066dc591a84v6\"><p id=\"066deca0a8jau\">使用VNC连接Windows实例。</p><p id=\"066deca1a8sq9\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"066deca2a8qtw\"><p id=\"066deca3a8zlq\">打开CMD命令提示符。</p><ol id=\"066deca4a80kc\"><li id=\"066deca5a8cqp\"><p id=\"066deca6a8flb\">单击桌面左下角<img id=\"066deca7a8gun\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556011.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，然后单击<img id=\"066deca8a8sug\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556012.jpg\" alt=\"搜索图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标。</p></li><li id=\"066deca9a8fjd\"><p id=\"066decaaa8h7r\">在搜索框输入<code data-tag=\"code\" class=\"code\">cmd</code>。<img id=\"066decaba8f1z\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556018.jpg\" alt=\"单击命令提示符\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"066decaca8t3y\"><p id=\"066decada84a7\">单击<b data-tag=\"uicontrol\" id=\"f0f5deb0a5pla\" class=\"uicontrol\"><b>命令提示符</b></b>。</p><p id=\"066decaea8uk4\">进入命令提示符。<img id=\"066decafa8rqu\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556021.jpg\" alt=\"进入命令提示符\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"066decb0a8u99\"><p id=\"066decb1a8780\">执行如下命令，查看当前动态端口配置。 </p><pre id=\"066decb2a84f8\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netsh int ipv4 show dynamicport tcp</code></pre><p id=\"066decb3a8tmx\"> 回显示例如下，表示动态端口的数量为16384个（从49152起始，到65536结束）。</p><img id=\"066decb5a85b0\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p558632.jpg\" alt=\"20230209142221\" placement=\"break\" class=\"image break\"></li><li id=\"066decb6a8x69\"><p id=\"066decb7a8lvj\">执行如下命令，增大动态端口数量。 </p><pre id=\"066decb8a8psz\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netsh int ipv4 set dynamicport tcp start=1025 num=60000</code></pre><div type=\"note\" id=\"18bd93b0a8y5j\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"443e0d30a81zh\"><code data-tag=\"code\" class=\"code\">start</code>和<code data-tag=\"code\" class=\"code\">num</code>参数表示起始端口和端口数量，您需要根据实际情况调整参数值。</p></div></div><p id=\"066decb9a8eu3\"> 回显示例如下，表示动态端口的数量增大到60000个（从1025起始，到61025结束）。</p><img id=\"066decbba87dd\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p558634.jpg\" alt=\"20230209142347\" placement=\"break\" class=\"image break\"></li><li id=\"066decbca80f6\"><p id=\"066decbda8g2t\">重新访问外网或连接应用。</p><ul id=\"066decbea8nh1\"><li id=\"066decbfa8rsl\"><p id=\"066decc0a8ldk\">访问成功，该问题解决。</p></li><li id=\"066decc1a8454\"><p id=\"066decc2a82bf\">访问失败，执行下一步，修改注册表来降低Time Wait时间。</p></li></ul></li><li id=\"066decc3a8hg2\"><p id=\"066decc4a8w8j\">如果增大动态端口数量仍然不能完全解决该问题，您可以通过修改注册表来降低Time Wait时间，最低支持设置为30秒，具体操作如下：</p><div type=\"important\" id=\"066decc5a8den\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"066decc6a8t70\">为了避免注册表误操作带来的操作系统问题或者造成的数据丢失，请您操作注册表前，务必对系统盘和数据盘创建快照，并且操作完毕后需要重启Windows实例后才能使修改生效，具体操作如下：</p><ul id=\"066decc7a8ppm\"><li id=\"066decc8a8wfu\"><p id=\"066decc9a83mz\">创建快照，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></li><li id=\"066deccaa85pp\"><p id=\"066deccba8823\">重启Windows实例，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li></ul></div></div><ol id=\"066deccca816v\"><li id=\"066deccda85vm\"><p id=\"066deccea86rw\">打开注册表编辑器。</p><ol id=\"066deccfa89ir\"><li id=\"066decd0a82qw\"><p id=\"066decd1a8tk7\">单击桌面左下角<img id=\"066decd2a84rl\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556011.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，然后单击<img id=\"066decd3a8jvd\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556012.jpg\" alt=\"搜索图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标。</p></li><li id=\"066decd4a8u52\"><p id=\"066decd5a8dxk\">在搜索框输入<code data-tag=\"code\" class=\"code\">regedit</code>。<img id=\"066decd6a8yem\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p556886.jpg\" alt=\"打开注册表编辑器\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"066decd7a83qm\"><p id=\"066decd8a8sty\">单击<b data-tag=\"uicontrol\" id=\"b1762560a6yia\" class=\"uicontrol\"><b>regedit</b></b>。</p><p id=\"066decd9a84ij\">进入注册表编辑器。<img id=\"066decdaa8mgs\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p556888.jpg\" alt=\"2012注册表编辑器\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"066decdba83d8\"><p id=\"066decdca8sgp\">在注册表编辑器的<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services&gt;Tcpip&gt;Parameters</code>路径下，将注册表项<code data-tag=\"code\" class=\"code\">TcpTimedWaitDelay</code>的数值数据设置为十进制数值<code data-tag=\"code\" class=\"code\">30</code><b>。</b></p><p id=\"066decdda8srw\">如果<code data-tag=\"code\" class=\"code\">TcpTimedWaitDelay</code>项不存在，请新建对应注册表项，然后再修改数值数据。以<code data-tag=\"code\" class=\"code\">TcpTimedWaitDelay</code>不存在为例，操作如下：</p><ol id=\"066decdea8l1x\"><li id=\"066decdfa87r5\"><p id=\"066dece0a8ybh\">在注册表编辑器的<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services&gt;Tcpip&gt;Parameters</code>路径下，右键单击注册表项空白区域，然后选择<b data-tag=\"uicontrol\" id=\"3aa406c0a68n2\" class=\"uicontrol\"><b>新建（N） &gt; DWORD （32 位）值</b></b>。<img id=\"066dece1a8eak\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p556899.jpg\" alt=\"新建注册表项\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"066dece2a8owi\"><p id=\"066dece3a8awh\">输入<code data-tag=\"code\" class=\"code\">TcpTimedWaitDelay</code>，按<code data-tag=\"code\" class=\"code\">Enter</code>键。</p></li><li id=\"066dece4a8ddt\"><p id=\"066dece5a8y9z\">右键单击注册表项<code data-tag=\"code\" class=\"code\">TcpTimedWaitDelay</code>，然后单击<b data-tag=\"uicontrol\" id=\"99705e10a64cs\" class=\"uicontrol\"><b>修改</b></b>。<img id=\"066dece6a8yoa\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p556905.jpg\" alt=\"单击修改注册表项\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"066dece7a8kzq\"><p id=\"066dece8a89jz\">在对话框中，勾选<b data-tag=\"uicontrol\" id=\"f5ddddd0a6ccz\" class=\"uicontrol\"><b>十进制</b></b>，然后将<b data-tag=\"uicontrol\" id=\"f8e9be40a6bgg\" class=\"uicontrol\"><b>数值数据</b></b>设置为<code data-tag=\"code\" class=\"code\">30</code><b>。</b><img id=\"066dece9a8hr6\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p556909.jpg\" alt=\"需改数值数据为30\" placement=\"break\" class=\"image break\"></p></li><li id=\"066deceaa8a81\"><p id=\"066deceba8anl\">单击<b data-tag=\"uicontrol\" id=\"2f3e9650a6b2t\" class=\"uicontrol\"><b>确定</b></b>。</p></li></ol></li></ol></li></ol><h2 id=\"aHXPM\">相关文档</h2><ul id=\"2bf6fe80a8we4\"><li id=\"2bf6fe81a8qz4\"><p id=\"2bf6fe82a8ro8\"><a class=\"from-extensions-error\" target=\"_blank\" href=\"https://support.microsoft.com/en-us/kb/929851\">动态端口</a></p></li><li id=\"2bf6fe83a8zx9\"><p id=\"2bf6fe84a8kgk\"><a class=\"from-extensions-error\" target=\"_blank\" href=\"https://technet.microsoft.com/en-us/library/cc938217.aspx\">TcpTimedWaitDelay</a></p></li></ul></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-server-2012-instances-of-ecs-open-ecn-system-access-to-external-site-slower-or-tcp-connection-retransmission-problems-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>Windows Server 2012系统的ECS实例开启ECN功能后，访问外部网站较慢或者出现TCP连接重传问题，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows Server 2012系统的ECS实例开启ECN功能后，访问外部网站较慢或者出现TCP连接重传问题，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-17 15:11:53</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"dcf055a0966tu\"><p data-tag=\"shortdesc\" id=\"dcf4745796qq4\" class=\"shortdesc\">本文介绍在Windows Server 2012系统的ECS实例开启ECN（Explicit Congestion Notification）功能后，出现访问外部网站变慢或者TCP连接重传问题的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"YcJWR\">问题描述</h2><p id=\"f7afc240a8cqt\">在Windows Server 2012系统的ECS实例上使用浏览器访问外部网站时，出现访问速度较慢或者TCP连接重传的问题。</p><p id=\"f7afc241a8rit\">TCP连接重传问题可以通过抓包工具（例如Wireshark）进行核实，如图所示，在抓包结果的同一个TCP序列号（<b data-tag=\"uicontrol\" id=\"111874f0a8fy3\" class=\"uicontrol\">Sequence Number</b>）和确认号（<b data-tag=\"uicontrol\" id=\"13610560a8mk4\" class=\"uicontrol\">Acknowledgment Number</b>）的<b data-tag=\"uicontrol\" id=\"293df1e0a8tzp\" class=\"uicontrol\">Info</b>信息中，出现“TCP Retransmission”信息即为TCP连接重传。<img id=\"f7afc242a85ee\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p558883.jpg\" alt=\"TCP重传（打码后）\" placement=\"break\" width=\"750\" class=\"image break\"></p><h2 id=\"yErtF\">问题原因</h2><p id=\"589ad940adoac\">ECS实例上开启了ECN功能导致该问题，具体说明如下：</p><p id=\"023f2890a81ep\">当ECS实例启用了ECN功能后访问外部网站时，会向网站服务端发送带有ECN位的数据包，但在传输过程中，如果中间链路的某个设备不支持ECN功能会直接丢弃带有ECN位的数据包，从而导致该问题发生。</p><div type=\"note\" id=\"023f2891a8x8x\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"023f4fa0a8scd\">ECN的作用主要是在网络出现拥塞时通知TCP的传输层，减少TCP连接中被丢弃的数据包数量，达到避免重传、减少等待时间、减少网络抖动的效果。但是有些网络设备的配置规则不能与ECN兼容，例如打印机、路由器。这些设备会将ECN数据包视为非法数据包并丢弃，导致网络出现问题。</p></div></div><h2 id=\"TbJJk\">解决方案</h2><p id=\"2b3bb650a8p0q\">您需要在ECS实例上关闭ECN功能，具体操作如下：</p><ol id=\"2b3bb651a8rmj\"><li id=\"2b3bb652a8eyw\"><p id=\"2b3bb653a88gt\">远程连接Windows实例。</p><p id=\"2b3bb654a88mv\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"2b3bb655a8o0w\"><p id=\"2b3bb656a89eb\">打开CMD命令提示符。</p><ol id=\"2b3bb657a8how\"><li id=\"2b3bb658a8d1w\"><p id=\"2b3bb659a89bc\">单击桌面左下角<img id=\"2b3bb65aa8tqy\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556011.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，然后单击<img id=\"2b3bb65ba8rvx\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556012.jpg\" alt=\"搜索图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标。</p></li><li id=\"2b3bb65ca8e4e\"><p id=\"2b3bb65da8ajn\">在搜索框输入<code data-tag=\"code\" class=\"code\">cmd</code>。<img id=\"2b3bb65ea87ay\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556018.jpg\" alt=\"单击命令提示符\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"2b3bb65fa8hse\"><p id=\"2b3bb660a8z5j\">单击<b data-tag=\"uicontrol\" id=\"f0f5deb0a5pla\" class=\"uicontrol\">命令提示符</b>。</p><p id=\"2b3bb661a85ba\">进入<b data-tag=\"uicontrol\" id=\"2677af50a5vdd\" class=\"uicontrol\">管理员：命令提示符</b>界面。<img id=\"2b3bb662a8zew\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556021.jpg\" alt=\"进入命令提示符\" placement=\"break\" class=\"image break\"></p></li></ol></li><li id=\"2b3bb663a8iuq\"><p id=\"2b3bb664a80cb\">执行如下命令，查看TCP全局参数信息。 </p><pre id=\"2b3bb665a89b9\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netsh interface tcp show global</code></pre><p id=\"2b3bb666a868h\"> 回显信息如下，<b data-tag=\"uicontrol\" id=\"f8b69f30a5q3s\" class=\"uicontrol\">ECN 功能</b>参数的值为<b data-tag=\"uicontrol\" id=\"fb910f60a5tum\" class=\"uicontrol\">enabled</b>，则说明您的ECS实例操作系统中已开启了ECN功能。 <img height=\"168\" width=\"438\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p518216.png\" id=\"2b3bb667a8wih\" class=\"image break\"> </p></li><li id=\"2b3bb668a8ghf\"><p id=\"2b3bb669a8wsb\">执行如下命令，关闭ECN功能。 </p><pre id=\"2b3bb66aa8cav\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netsh interface tcp set global ecncapability=disabled </code></pre><img id=\"2b3bb66ca8nwg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556045.jpg\" alt=\"关闭ECN\" placement=\"break\" class=\"image break\"></li><li id=\"2b3bb66da8s8w\"><p id=\"2b3bb66ea8cvu\">执行如下命令，查看TCP全局参数的信息，确认<b>ECN 功能</b>为<b data-tag=\"uicontrol\" id=\"b9bcdc60a82ue\" class=\"uicontrol\"><b>disabled</b></b>。 </p><pre id=\"2b3bb66fa8kd8\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netsh interface tcp show global</code></pre><p id=\"2b3bb670a8qi0\">回显信息如下，<b data-tag=\"uicontrol\" id=\"66675e10a8r17\" class=\"uicontrol\">ECN 功能</b>参数的值为<b data-tag=\"uicontrol\" id=\"66675e11a8k8m\" class=\"uicontrol\">disabled</b>，则说明您的ECS实例操作系统中已关闭了ECN功能。 <img id=\"2b3bb671a8o2q\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556050.jpg\" alt=\"ECN功能关闭\" placement=\"break\" class=\"image break\"></p></li><li id=\"2b3bb672a8wpy\"><p id=\"2b3bb673a8akd\">重新访问外部网站。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/how-to-use-the-chrome-developer-tools-to-screen-ecs-instance-website-load-too-slow", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>如何使用Chrome浏览器的开发者工具排查ECS实例上的网站加载过慢问题？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>如何使用Chrome浏览器的开发者工具排查ECS实例上的网站加载过慢问题？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-05-30 17:37:54</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"c9fc7f5096i81\"><p data-tag=\"shortdesc\" id=\"ca01133396l48\" class=\"shortdesc\">本文介绍使用Chrome浏览器的开发者工具排查网站加载过慢问题的方法。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"60e83270abf7t\"><b>问题描述</b></h2><p id=\"6c7fb9f0abw4i\">部署在ECS实例上的网站使用Chrome浏览器访问时加载过慢。</p><h2 id=\"71087660ab9g2\"><b>问题原因</b></h2><p id=\"78a5ece0abfh1\">网站中存在部分脚本或资源（例如网站调用的文件、网站需要使用的网络资源）请求过慢或加载失败。</p><h2 id=\"7fe9d1f0a8rju\">解决方案</h2><p id=\"b6438bc0abo6u\">您可以先通过阿里云ECS控制台的实例监控页面，查看该网站所在ECS实例的各项监控指标，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/view-the-monitoring-information-of-an-ecs-instance\">查看实例监控信息</a>。如果ECS实例的各项监控指标正常，则您可以通过Chrome浏览器中的开发者工具来查找导致网站加载速度过慢的网页资源，然后针对该资源的详细网络请求信息针对性处理。</p><h3 id=\"a2adc730fb9rl\"><b>步骤一：</b>使用Chrome浏览器中的开发者工具查找加载时间较长的资源</h3><ol id=\"7fe9d1f2a8im0\"><li id=\"7fe9d1f3a8y2l\"><p id=\"7fe9d1f4a8vrm\">打开Chrome浏览器并访问该网站。</p></li><li id=\"7fe9d1f5a8v35\"><p id=\"7fe9d1f6a8suk\">打开Chrome浏览器的开发者工具。 </p><ul id=\"7fe9d1f7a89mp\"><li id=\"7fe9d1f8a8h8o\"><p id=\"7fe9d1f9a8hi4\">方式一：</p><p id=\"7fe9d1faa8z27\">您可以直接在您的键盘上按<code data-tag=\"code\" class=\"code\">F12</code>键。</p></li><li id=\"7fe9d1fba8551\"><p id=\"7fe9d1fca8zvh\">方式二：</p><ol id=\"7fe9d1fda8duo\"><li id=\"7fe9d1fea8l6q\"><p id=\"7fe9d1ffa86pt\">在Chrome浏览器右上角，单击<img id=\"7fe9d200a8kva\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6773995761/p558684.jpg\" alt=\"浏览器设置\" placement=\"inline\" width=\"25\" class=\"image inline\">图标。</p></li><li id=\"7fe9d201a8lxh\"><p id=\"7fe9d202a85yl\">选择<b data-tag=\"uicontrol\" id=\"c7e38ff0a8xa5\" class=\"uicontrol\">更多工具 &gt; 开发者工具</b>。<img id=\"7fe9d203a8zsr\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5773995761/p558683.jpg\" alt=\"打开开发者工具\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"4b12b671f4bi1\"><p id=\"4b12b670f4guu\">方式三：</p><p id=\"53a143b0f4r4b\">单击鼠标右键，然后单击<b data-tag=\"uicontrol\" id=\"8c830830f4uix\" class=\"uicontrol\">检查</b>。<img id=\"94111560f45pf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7966805861/p672196.png\" alt=\"单击鼠标右键..png\" placement=\"break\" class=\"image break\"></p></li></ul></li><li id=\"7fe9d204a85vj\"><p id=\"7fe9d205a8jqd\">在开发者工具中，单击<b data-tag=\"uicontrol\" id=\"c630a270a3yc8\" class=\"uicontrol\">Network</b>页签。<img id=\"7fe9d206a8nsi\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5773995761/p558695.jpg\" alt=\"network页签\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"cefdecc1fbi3h\"><p id=\"ceffc180fbngg\">按<code data-tag=\"code\" class=\"code\">Ctrl + F5</code>键，强制刷新网页，然后查看网页资源的加载情况。 </p><p id=\"ceffe890fbftc\">您可以在资源列表中根据<b data-tag=\"uicontrol\" id=\"fde8dce0a8yge\" class=\"uicontrol\">Time</b>参数值，找到加载时间较长的网页资源，即<b data-tag=\"uicontrol\" id=\"d79a9c10fbwl8\" class=\"uicontrol\">Time</b>参数值较大的资源。</p><div type=\"important\" id=\"cefdecc4fb6sz\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"cf000fa0fbagc\">建议先按<code data-tag=\"code\" class=\"code\">Ctrl</code>键不放，再按<code data-tag=\"code\" class=\"code\">F5</code>键。 </p></div></div><img id=\"cefdecc7fbwxj\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5773995761/p556968.jpg\" alt=\"20230207150949\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"724c10d1fbeie\"><p id=\"cf000fa2fbil7\">获取该资源的网络请求信息。</p><ol id=\"1785d241fb8dh\"><li id=\"109145f0fbbhw\"><p id=\"cf000fa3fbu2z\">鼠标右键单击<b data-tag=\"uicontrol\" id=\"e808d264fb0om\" class=\"uicontrol\">Name</b>列中的目标资源，然后选择<b data-tag=\"uicontrol\" id=\"e808d265fbdo2\" class=\"uicontrol\">Copy &gt; Cpoy link address</b>。<img id=\"90bdcc21fbb3h\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5773995761/p556990.jpg\" alt=\"20230207152601\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"1aff4191fbe56\"><p id=\"cf000fa4fbuu7\">复制并查看该资源的请求URL。</p><p id=\"cf0036b0fbax1\">在<b data-tag=\"uicontrol\" id=\"4721ee80fbxug\" class=\"uicontrol\">Headers</b>页签下，您可以查看<b data-tag=\"uicontrol\" id=\"497f3f70fbb5v\" class=\"uicontrol\">Request URL</b>、<b data-tag=\"uicontrol\" id=\"4c589e30fbglc\" class=\"uicontrol\">Status Code</b>等详细的网络请求信息，然后对这些信息进行分析。</p><img id=\"b6f96521fbkf7\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5773995761/p558808.jpg\" alt=\"网络信息\" placement=\"break\" width=\"750\" class=\"image break\"></li></ol></li></ol><h3 id=\"1e7b6294f5tp0\">步骤二：根据目标资源信息处理问题</h3><p id=\"f2406a00fb0vw\">根据目标资源<b data-tag=\"uicontrol\" id=\"d79a9c11fbz5i\" class=\"uicontrol\">Headers</b>页签下的<b data-tag=\"uicontrol\" id=\"89b790f0fb4b8\" class=\"uicontrol\">Request URL</b>、<b data-tag=\"uicontrol\" id=\"8c2f6ec0fbk0j\" class=\"uicontrol\">Status Code</b>等网络请求信息进行分析，本文主要介绍如下几种情况对应的解决方案：</p><h4 id=\"f3fadd80fbm6r\"><b>情况一：加载请求时长过大的URL是外部网站URL</b></h4><p id=\"f2406a01fbk2w\">如果加载请求时长过大的URL是外部网站URL，您需要检查该外部网站URL地址访问是否正常、网站Web程序中的调用地址是否正确，然后通过优化程序调用来解决该问题。</p><h4 id=\"14105dc0fb3fl\"><b>情况二：加载请求时长过大的URL是一些较大的文件</b></h4><p id=\"f2406a02fbqyk\">如果加载请求时长过大的URL是一些较大的图片、视频、压缩包等文件，建议您进行如下操作：</p><ul id=\"53f15cf1fb0jr\"><li id=\"53f135e0fb23f\"><p id=\"f2406a03fb4qg\">升级网站带宽，具体操作，请参见<a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/419460.html\">配置公网带宽最佳实践</a>。</p></li><li id=\"55f5df80fb4vr\"><p id=\"f2409110fbtru\">优化下载路径或使用其他下载路径，例如使用阿里云对象存储OSS（Object Storage Service），具体操作，请参见<a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/357644.html\">网站与移动应用使用OSS</a>。</p></li></ul><h4 id=\"1b35fa40fbzu9\">情况三：网站本身调用的动态脚本加载时间过长</h4><p id=\"01468b60fb1y0\">如果是网站本身调用的动态脚本加载时间过长，您需要结合服务器的weblog日志进行分析、检查请求调用过程中消耗的具体资源所在环境，例如，数据库查询的时间过长，您需要检查数据库服务器的性能情况。同时，您还需要特别关注<b data-tag=\"uicontrol\" id=\"571be190fb8su\" class=\"uicontrol\">Timing</b>页签下，<b data-tag=\"uicontrol\" id=\"5fcd8730fb6z0\" class=\"uicontrol\">Waiting for server response</b>参数时间较长的资源。<img id=\"a465a5d0fb2pk\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7966805861/p675303.jpeg\" alt=\"尤其..jpeg\" placement=\"break\" width=\"750\" class=\"image break\"></p><p id=\"01468b61fb55m\">查看服务器的weblog日志并进行分析的具体操作，请参见<a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/472049.html#rOYed\">Nginx网站访问卡慢排查</a>或<a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/472068.html#24a388e984ujz\">Apache网站访问卡慢排查</a>。</p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-am-prompted-with-the-error-message-content-from-the-website-listed-below-is-being-blocked-by-the-internet-explorer-enhanced-security-configuration", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>Windows云服务器使用IE浏览器打开网站提示“增强安全配置正在阻止来自下列网站内容”如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows云服务器使用IE浏览器打开网站提示“增强安全配置正在阻止来自下列网站内容”如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2022-12-12 13:29:15</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"9393a2c06ay5s\"><p id=\"939b43e06a6ze\" data-tag=\"shortdesc\" class=\"shortdesc\">本文主要介绍在Windows云服务器上使用IE浏览器打开网站报错时对应的解决方法。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"XbeWY\">问题描述</h2><p id=\"939b43e46a1pn\">在Windows操作系统的云服务器ECS或者轻量应用服务器中，使用IE浏览器打开网站时，提示以下报错。</p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"9393a2c16a1wb\" class=\"pre codeblock language-javascript\"><code>Internet Explorer 增强安全配置正在阻止来自下列网站内容</code></pre><h2 id=\"EFTFF\">问题原因</h2><p id=\"939b43e56aewh\">为了保障Windows服务器的安全性，默认运行IE浏览器时会启用IE增强的安全配置。若您不希望打开浏览器提示以上报错，可关闭IE增强的安全配置。</p><h2 id=\"9393a2c26a1vw\">解决方案</h2><p id=\"11f9c5f16a7l5\">您可以参考以下步骤关闭IE增强的安全配置来解决上述问题。</p><div id=\"50be31906a5h5\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"939b6afa6ar2e\" class=\"exp-title-h1\" title=\"windows server 2012 IE增强的安全配置如何关闭\">本文操作以Windows Server 2012和Windows Server 2016操作系统为例，其他版本的操作系统可能略有不同，具体以您实际的操作系统为准。</p></div></div><ol id=\"939b6afb6ats5\"><li id=\"939b6afc6aj2f\" data-spm-anchor-id=\"a2c9r.14518950.0.i9.61ac5e3bxgDHR6\"><p id=\"939b6afd6akl4\">远程连接Windows实例。</p><p id=\"ac2261706a9kx\">具体操作，请参见<a href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\" title=\"\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"939b92006ahcb\" data-spm-anchor-id=\"a2c9r.14518950.0.i9.61105e3bAblwpy\"><p id=\"939b92016a9vs\">依次选择<b>开始</b>&gt;<b>服务器管理器</b>&gt;<b>本地服务器</b>，然后单击<b>IE 增强的安全配置</b>右侧的<b>启用</b>。</p><img placement=\"break\" alt=\"image\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1983719661/p523384.png\" id=\"5d8ea6e06aflo\" class=\"image break\"></li><li id=\"939b92036a4z4\"><p id=\"939b92046abkz\">在<b>Internet Explorer 增强的安全配置</b>页面，<b>管理员</b>选中<b>关闭</b>，<b>用户</b>选中<b>关闭</b>，然后单击<b>确定</b>保存配置。</p><img id=\"cf3495c06ame3\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1983719661/p523387.png\" alt=\"image\" placement=\"break\" width=\"450\" class=\"image break\"></li><li id=\"a3aa58446az76\" data-spm-anchor-id=\"a2c9r.14518950.0.i8.61105e3bAblwpy\"><p id=\"a3aa58456ahcm\">使用IE浏览器重新打开网站，确认没有提示以上报错信息。</p></li></ol></div></main>\n\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/ecs-instance-through-browser-console-login-pagoda-service-panel", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>ECS实例上无法通过浏览器登录宝塔服务面板控制台如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>ECS实例上无法通过浏览器登录宝塔服务面板控制台如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-13 18:32:11</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"cd3d6ef096y7v\"><p data-tag=\"shortdesc\" id=\"cd43897596kpa\" class=\"shortdesc\">本文介绍在ECS实例上无法通过浏览器登录宝塔服务面板控制台的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"7d211d70a7kkb\">在ECS实例中部署了宝塔服务面板控制台，但是通过浏览器输入<code data-tag=\"code\" class=\"code\">ECS实例公网IP:端口</code>的方式，无法访问宝塔服务面板控制台，如图所示：<img id=\"7d211d71a7hi0\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p556979.jpg\" alt=\"无法访问宝塔面板问题现象\" placement=\"break\" width=\"750\" class=\"image break\"></p><h2 id=\"4rM4I\">问题原因</h2><p id=\"9114d790a7tev\">出现该问题可能有如下原因：</p><ul id=\"cd43897a9605x\"><li id=\"cd43897b96t3o\"><p id=\"cd43897c96cwn\">宝塔面板服务没有正常启动。</p></li><li id=\"cd43b08096anz\"><p id=\"cd43b08196iyf\">安全组中没有添加宝塔服务对应端口的规则。</p></li></ul><h2 id=\"AywdZ\">解决方案</h2><h3 id=\"998d1db0a7z7q\"><b>开启宝塔面板服务</b></h3><ol id=\"998d1db1a7dxe\"><li id=\"998d1db2a7a6a\"><p id=\"998d1db3a79mz\">远程连接ECS实例。</p><p id=\"998d1db4a7nc6\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"998d44c0a7lft\"><p id=\"998d44c1a72ac\">查看宝塔服务是否运行。</p><ul id=\"998d44c2a7xg3\"><li id=\"998d44c3a7bu0\"><p id=\"998d44c4a7oho\">Linux实例：</p><p id=\"998d44c5a7shf\">执行如下命令，查看宝塔服务是否运行。</p><pre id=\"998d44c6a7s4l\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>/etc/init.d/bt status</code></pre><ul id=\"998d44c7a7kgy\"><li id=\"998d44c8a7x5a\"><p id=\"998d44c9a7yh5\">如果宝塔服务状态为<code data-tag=\"code\" class=\"code\">running</code>，回显示例如下，则表示宝塔服务已运行。您需要执行下一步，查看宝塔服务运行端口。</p><img id=\"998d44cba76ef\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p556521.jpg\" alt=\"20230207111810\" placement=\"break\" class=\"image break\"></li><li id=\"998d44cca7aa8\"><p id=\"998d44cda7qrd\">如果宝塔服务状态为<code data-tag=\"code\" class=\"code\">not running</code>，回显示例如下，则表示宝塔服务未运行。此时，您需要执行如下操作，启动宝塔服务。</p><img id=\"998d44cfa7fh1\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p556522.jpg\" alt=\"20230207111949\" placement=\"break\" class=\"image break\"><ol id=\"998d44d0a7lrc\"><li id=\"998d44d1a7bs1\"><p id=\"998d44d2a7mo6\">执行如下命令，启动宝塔服务。</p><pre id=\"998d44d3a7kro\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>/etc/init.d/bt start</code></pre></li><li id=\"998d44d4a7ode\"><p id=\"998d44d5a7vcs\">执行如下命令，查看宝塔服务运行状态。</p><pre id=\"998d44d6a7m49\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>/etc/init.d/bt status</code></pre><ul id=\"998d44d7a7lft\"><li id=\"998d44d8a7ei2\"><p id=\"998d44d9a78uw\">如果宝塔服务状态为<code data-tag=\"code\" class=\"code\">running</code>，回显示例如下，则表示宝塔服务已成功启动。您需要执行下一步，查看宝塔服务运行端口。<img id=\"998d44daa7fch\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p556524.jpg\" alt=\"20230207112431\" placement=\"break\" class=\"image break\"></p></li><li id=\"998d44dba797u\"><p id=\"998d44dca72cw\">如果宝塔服务状态仍然为<code data-tag=\"code\" class=\"code\">not running</code>，则您需要查看宝塔服务启动过程中的日志报错信息来判断并排查该问题。</p></li></ul></li></ol></li></ul></li><li id=\"998d44dda75av\"><p id=\"998d44dea7m4u\">Windows实例：</p><ol id=\"998d44dfa7i6h\"><li id=\"998d44e0a77yk\"><p id=\"998d44e1a7azv\">选择如下任意一种方式打开宝塔面板。</p><ul id=\"998d44e2a787i\"><li id=\"998d44e3a7hja\"><p id=\"998d44e4a7q7t\">方式一：在Windows操作系统桌面上，双击<img id=\"998d44e5a7uxd\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p557138.jpg\" alt=\"宝塔快捷图标\" placement=\"inline\" width=\"30\" class=\"image inline\">图标。</p></li><li id=\"998d44e6a7idz\"><p id=\"998d44e7a7j26\">方式二：在Windows操作系统桌面左下角，选择<img id=\"998d44e8a7cyy\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p557140.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"30\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"63977120a6r0h\" class=\"uicontrol\"> &gt; 宝塔面板</b>。</p></li></ul></li><li id=\"998d44e9a76ss\"><p id=\"998d44eaa7ur5\">在<b data-tag=\"uicontrol\" id=\"15b1eca0a6h6q\" class=\"uicontrol\">宝塔Windows面板工具箱</b>页面，查看宝塔服务运行信息。 </p><p id=\"998d44eba7vh4\">您可以查看并记录宝塔面板相关信息，例如宝塔服务使用的端口、安全入口等，如下图所示。<img id=\"998d44eca7djb\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p557157.jpg\" alt=\"宝塔面板工具箱\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"998d44eda7hu0\"><p id=\"998d44eea7536\">选择如下任意一种方式查看是否可以使用<code data-tag=\"code\" class=\"code\">localhost</code>登录宝塔面板。</p><ul id=\"998d44efa7glr\"><li id=\"998d44f0a7k5c\"><p id=\"998d44f1a7cl7\">在<b data-tag=\"uicontrol\" id=\"e5176470a6tnp\" class=\"uicontrol\">宝塔Windows面板工具箱</b>页面，单击<b data-tag=\"uicontrol\" id=\"cb318c20a6d2a\" class=\"uicontrol\">打开面板</b>。</p></li><li id=\"998d44f2a7a6m\"><p id=\"998d44f3a7le9\">打开浏览器输入<code data-tag=\"code\" class=\"code\">localhost:&lt;宝塔服务使用的端口&gt;[安全入口]</code>，然后按<code data-tag=\"code\" class=\"code\">Enter</code>键访问宝塔面板。</p><ul id=\"998d44f4a7ofe\"><li id=\"998d44f5a7fjr\"><p id=\"998d44f6a72dd\"><code data-tag=\"code\" class=\"code\">&lt;宝塔服务使用的端口&gt;</code>：即<b data-tag=\"uicontrol\" id=\"e5176471a649o\" class=\"uicontrol\">宝塔Windows面板工具箱</b>页面的<b data-tag=\"uicontrol\" id=\"438d2560a65oa\" class=\"uicontrol\">端口</b>，以<code data-tag=\"code\" class=\"code\">8888</code>为例。</p></li><li id=\"998d44f9a73rk\"><p id=\"998d44faa750r\"><code data-tag=\"code\" class=\"code\">[安全入口]</code>：如果宝塔面板开启了安全入口，则浏览器的访问地址必须加入[安全入口]地址，否则访问宝塔面板时会提示“404”错误。该参数的值为<b data-tag=\"uicontrol\" id=\"e5176472a6xpv\" class=\"uicontrol\">宝塔Windows面板工具箱</b>页面的<b data-tag=\"uicontrol\" id=\"36182b50a6s0z\" class=\"uicontrol\">安全入口</b>，以<code data-tag=\"code\" class=\"code\">/ttpRV8nM</code>为例。</p></li></ul></li></ul><p id=\"998d44fba7dxw\">如图所示，使用浏览器访问<code data-tag=\"code\" class=\"code\">localhost:8888/ttpRV8nM</code>成功，即成功使用<code data-tag=\"code\" class=\"code\">localhost</code>登录宝塔面板。此时，您需要执行下一步，查看宝塔服务运行端口。<img id=\"998d44fca7ldr\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p557194.jpg\" alt=\"成功访问宝塔面板\" placement=\"break\" width=\"750\" class=\"image break\"></p><div type=\"note\" id=\"998d44fda73sg\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"998d44fea7zxl\">如果仍然无法访问宝塔面板，您可以在<b data-tag=\"uicontrol\" id=\"79f6892ea678c\" class=\"uicontrol\">宝塔Windows面板工具箱</b>页面，单击<b data-tag=\"uicontrol\" id=\"79f6892fa69hz\" class=\"uicontrol\">检查占用</b>获取该端口的使用情况或者单击<b data-tag=\"uicontrol\" id=\"79f68930a6csm\" class=\"uicontrol\">重启面板</b>后重新访问宝塔面板。</p></div></div></li></ol></li></ul></li><li id=\"998d44ffa752f\"><p id=\"998d4500a7ihi\">查看宝塔服务运行端口。</p><ul id=\"998d4501a7fe5\"><li id=\"998d4502a7vn9\"><p id=\"998d4503a71pt\">Linux实例：</p><ul id=\"998d4504a7307\"><li id=\"998d4505a71bs\"><p id=\"998d4506a7l1f\">执行如下命令，查看当前宝塔面板端口。</p><pre id=\"998d4507a7so9\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>cat /www/server/panel/data/port.pl</code></pre></li><li id=\"998d4508a7kj8\"><p id=\"998d4509a7ibf\">执行如下命令，通过查看宝塔服务对应的<code data-tag=\"code\" class=\"code\">pid</code>来查看对应Bt-Panel服务的端口。</p><pre id=\"998d450aa7t97\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>/etc/init.d/bt status\nnetstat -tnlp |grep 32514 #32514为第一条命令返回的Bt-Panel服务对应的pid</code></pre><p id=\"998d450ba7j7b\">回显示例如下，31248端口即为当前宝塔服务使用的端口。</p><img id=\"998d450da76ws\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p556878.jpg\" alt=\"20230207122501\" placement=\"break\" class=\"image break\"></li></ul></li><li id=\"998d450ea7chx\"><p id=\"998d450fa7muz\">Windows实例：</p><ol id=\"18781231a8v19\"><li id=\"3c07a891a8wim\" docid=\"3925487\"><p id=\"998d44e1a7azv\">选择如下任意一种方式打开宝塔面板。</p><ul id=\"998d44e2a787i\"><li id=\"998d44e3a7hja\"><p id=\"998d44e4a7q7t\">方式一：在Windows操作系统桌面上，双击<img id=\"998d44e5a7uxd\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p557138.jpg\" alt=\"宝塔快捷图标\" placement=\"inline\" width=\"30\" class=\"image inline\">图标。</p></li><li id=\"998d44e6a7idz\"><p id=\"998d44e7a7j26\">方式二：在Windows操作系统桌面左下角，选择<img id=\"998d44e8a7cyy\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p557140.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"30\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"63977120a6r0h\" class=\"uicontrol\"> &gt; 宝塔面板</b>。</p></li></ul></li><li id=\"ea3914f0a8u29\"><p id=\"ea3914f1a80gu\">在<b data-tag=\"uicontrol\" id=\"f9005139a8ld8\" class=\"uicontrol\">宝塔Windows面板工具箱</b>页面，查看宝塔服务运行端口。 </p><p id=\"ea3914f2a8t1r\">您可以查看并记录宝塔服务运行端口，如图所示，8888即为宝塔服务运行端口。<img id=\"ea3914f3a8rwk\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p557157.jpg\" alt=\"宝塔面板工具箱\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li></ul></li><li id=\"998d4511a7nvv\"><p id=\"998d4512a7uib\">重新在浏览器输入<code data-tag=\"code\" class=\"code\">ECS实例公网IP:端口</code>访问宝塔服务面板控制台。</p><ul id=\"998d4513a71on\"><li id=\"998d4514a7brd\"><p id=\"998d4515a7c11\">成功访问，该问题解决。</p></li><li id=\"998d4516a7fao\"><p id=\"998d4517a7fcc\">仍然不能访问，请继续执行<a title=\"\" class=\"xref\" href=\"#998d4518a7zx1\">在安全组中添加宝塔服务对应端口的规则</a>进行排查。</p></li></ul></li></ol><h3 id=\"998d4518a7zx1\"><b>在安全组中添加宝塔服务对应端口的规则</b></h3><div type=\"note\" id=\"998d4519a7vaa\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"998d451aa7wwl\">本节操作以宝塔服务对应端口为8888为例，您的宝塔服务对应端口具体的获取方式，请参见<a title=\"\" class=\"xref\" href=\"#998d1db0a7z7q\">开启宝塔面板服务</a>的步骤3。</p></div></div><ol id=\"998d451ba7jmb\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i1.310f5e3bFdBaav\" id=\"998d451ca72er\"><p id=\"998d451da7jd5\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com/\">ECS管理控制台</a>。</p></li><li id=\"998d451ea7gxr\"><p id=\"998d451fa765d\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"09ed9590a3biw\" class=\"uicontrol\"><b>实例与镜像 &gt; 实例</b></b>。</p></li><li id=\"998d4520a7ow5\"><p id=\"998d4521a7y79\">在顶部菜单栏左上角处，选择地域。</p></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i1.310f5e3bFdBaav\" id=\"998d4522a7pgz\"><p id=\"998d4523a7wdp\">在实例列表页面，单击ECS实例对应的实例ID。</p></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i1.310f5e3bFdBaav\" id=\"998d4524a7qla\"><p id=\"998d4525a7e1l\">在<b data-tag=\"uicontrol\" id=\"33698c80a3qn0\" class=\"uicontrol\"><b>实例详情</b></b>页面，单击<b data-tag=\"uicontrol\" id=\"3a94b930a3jyc\" class=\"uicontrol\">安全组</b>页签。</p></li><li id=\"998d4526a7yhv\"><p id=\"998d4527a7l3a\">单击<b data-tag=\"uicontrol\" id=\"5aa1fc10a3eln\" class=\"uicontrol\"><b>安全组列表</b></b>页签，然后单击安全组ID。</p></li><li id=\"998d4528a76l4\"><p id=\"998d4529a7n8x\">在安全组规则页面，添加TCP协议8888端口的访问规则或者添加允许访问所有端口的规则。 </p><div type=\"note\" id=\"998d452aa7uz2\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"998d452ba70km\"><li id=\"998d452ca7i7c\"><p id=\"998d452da752v\">如果没有添加对应的安全组规则，则无法访问8888端口，后续将导致在ECS实例上无法访问宝塔面板。</p></li><li id=\"998d452ea7vy6\"><p id=\"998d452fa745t\">建议只开放对应端口的安全组规则，避免因开放所有端口的安全组规则造成安全损失。</p></li></ul></div></div><p id=\"998d4530a7nd9\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。\n</p><p id=\"998d4531a71gq\">以只开放添加TCP协议8888端口的访问规则为例，操作步骤如下：</p><ol id=\"998d4532a7s62\"><li id=\"998d4533a7vio\"><p id=\"998d4534a743w\">在安全组规则页面，单击<b data-tag=\"uicontrol\" id=\"66359680a3lni\" class=\"uicontrol\">入方向</b>页签。</p></li><li id=\"998d4535a75fl\"><p id=\"998d4536a7cm7\">单击<b data-tag=\"uicontrol\" id=\"71bd6690a3u42\" class=\"uicontrol\">手动添加</b>。</p></li><li id=\"998d4537a7cpr\"><p id=\"998d4538a74cl\">填写访问规则，然后在<b data-tag=\"uicontrol\" id=\"0960fb10a3p2w\" class=\"uicontrol\">操作</b>列单击<b data-tag=\"uicontrol\" id=\"ba492d90a342f\" class=\"uicontrol\">保存</b>。</p><ul id=\"998d4539a7v5a\"><li id=\"998d453aa7mzk\"><p id=\"998d453ba7fjk\"><b data-tag=\"uicontrol\" id=\"0e973590a3jf2\" class=\"uicontrol\">授权策略</b>：选择<b data-tag=\"uicontrol\" id=\"14614ba0a3cic\" class=\"uicontrol\">允许</b>。</p></li><li id=\"998d453ca7vmb\"><p id=\"998d453da72wo\"><b data-tag=\"uicontrol\" id=\"16f1ba80a3v18\" class=\"uicontrol\">协议类型</b>：选择<b data-tag=\"uicontrol\" id=\"1ce41910a3ogu\" class=\"uicontrol\">自定义 TCP</b>。</p></li><li id=\"998d453ea7gn2\"><p id=\"998d453fa7xx9\"><b data-tag=\"uicontrol\" id=\"21a79490a32j7\" class=\"uicontrol\">端口范围</b>：选择<b data-tag=\"uicontrol\" id=\"26453890a33ke\" class=\"uicontrol\"><b>8888/8888</b></b><b>。</b></p></li><li id=\"998d4540a7l4a\"><p id=\"998d4541a7pyk\"><b data-tag=\"uicontrol\" id=\"3d54b1a0a3zuk\" class=\"uicontrol\">授权对象</b>：选择<b data-tag=\"uicontrol\" id=\"3f678c10a37p1\" class=\"uicontrol\">0.0.0.0/0</b>。</p></li><li id=\"998d4542a7rdy\"><p id=\"998d4543a7l90\"><b data-tag=\"uicontrol\" id=\"41cc7e20a3jf8\" class=\"uicontrol\">描述</b>：根据实际情况填写。</p></li></ul><img id=\"998d4545a7nnz\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p555885.jpg\" alt=\"在安全组中添加8888端口\" placement=\"break\" width=\"750\" class=\"image break\"></li></ol></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/within-the-ecs-instance-visit-the-web-site-suggests-nginx-502-bad-gateway-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>在ECS实例内访问网站提示“Nginx 502 bad gateway”错误如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在ECS实例内访问网站提示“Nginx 502 bad gateway”错误如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-14 10:10:28</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"ec8c006095vx6\"><p data-tag=\"shortdesc\" id=\"ec92de30950c2\" class=\"shortdesc\">本文介绍在ECS实例上使用浏览器访问网站时，提示“Nginx 502 Bad Gateway”错误的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"bba8cf90a0prn\">问题原因</h2><p id=\"dd38aef0a6qnr\">“Nginx 502 Bad Gateway”错误表示访问请求的php-cgi进程已经开始执行，但是由于读取资源失败等原因没有执行完毕，导致php-cgi进程终止。</p><p id=\"dd38aef1a67c3\">常见的问题原因如下：</p><ul id=\"80606241a8sx4\"><li id=\"373d32b1a8js9\"><p id=\"373d32b0a8s85\"><a title=\"\" class=\"xref\" href=\"#0f607f20a67aa\">磁盘空间不足</a></p></li><li id=\"3c882db1a8pf9\"><p id=\"3c882db0a8zl2\"><a title=\"\" class=\"xref\" href=\"#0f607f2fa6fi1\">php-cgi进程数不够用</a></p></li><li id=\"46eab7a1a87n3\"><p id=\"46eab7a0a823s\"><a title=\"\" class=\"xref\" href=\"#0f607f34a6uzz\">PHP执行超时</a></p></li><li id=\"4be8cb21a8qu8\"><p id=\"4be8cb20a88ay\"><a title=\"\" class=\"xref\" href=\"#0f60a634a6zne\">php-cgi进程异常中断</a></p></li></ul><h2 id=\"bba8cf9ca0exo\">解决方案</h2><p id=\"bba8cf9da0pjl\">您可以参考如下操作进行逐一排查。</p><div type=\"note\" id=\"bba8cf9ea07eq\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"bba8cf9fa0r4c\">本文中<code data-tag=\"code\" class=\"code\">/usr/local/php/etc/php-fpm.conf</code>、<code data-tag=\"code\" class=\"code\">/usr/local/php/etc/php.ini</code>、<code data-tag=\"code\" class=\"code\">/etc/nginx.conf</code>等配置文件需要根据安装环境不同来更换路径，请以您的实际部署安装的软件路径为准。</p></div></div><h3 id=\"0f607f20a67aa\"><b>磁盘空间不足</b></h3><p id=\"0f607f21a6hqp\">如果访问网站时，直接提示“Nginx 502 Bad Gateway”错误，可能是ECS实例的磁盘空间不足导致。您需要执行如下步骤进行排查：</p><ol id=\"0f607f22a6os3\"><li id=\"0f607f23a6zrs\"><p id=\"0f607f24a6z2a\">远程登录ECS实例。</p><p id=\"0f607f25a68r2\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"0f607f26a6fzm\"><p id=\"0f607f27a6yj2\">执行<code data-tag=\"code\" class=\"code\">df -h</code>命令，查看是否磁盘空间是否充足。</p><ul id=\"0f607f28a628j\"><li id=\"0f607f29a6cjh\"><p id=\"0f607f2aa6aj9\">如果磁盘空间充足，则该问题不是由于磁盘空间问题导致。</p></li><li id=\"0f607f2ba6kzw\"><p id=\"0f607f2ca6a32\">如果磁盘空间不足，则您需要扩容云盘，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-19\">云盘扩容指引</a>。</p></li></ul><img id=\"0f607f2ea6kyj\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2187575761/p555025.jpg\" alt=\"df -h\" placement=\"break\" class=\"image break\"></li></ol><h3 id=\"0f607f2fa6fi1\">php-cgi进程数不够用</h3><p id=\"0f607f30a617m\">如果在已安装Nginx且可以正常访问网站的环境中，运行一段时间才后出现“Nginx 502 Bad Gateway”错误，则可能是php-cgi进程数不够用导致。</p><p id=\"0f607f31a63ja\">此时，您需要修改<code data-tag=\"code\" class=\"code\">/usr/local/php/etc/php-fpm.conf</code>配置文件，将文件中<code data-tag=\"code\" class=\"code\">pm.max_children</code>参数的值调高，即增加php-cgi进程数。</p><img width=\"750\" placement=\"break\" alt=\"20230119182959\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1651705761/p552108.jpg\" id=\"0f607f33a63mx\" class=\"image break\"><h3 id=\"0f607f34a6uzz\"><b>PHP执行超时</b></h3><p id=\"0f60a630a6k62\">如果访问网站时，直接提示“Nginx 502 Bad Gateway”错误，可能是PHP执行超时导致。</p><p id=\"0f60a631a6yrl\">此时，您需要修改<code data-tag=\"code\" class=\"code\">/usr/local/php/etc/php.ini</code>配置文件，将文件中<code data-tag=\"code\" class=\"code\">max_execution_time</code>参数的值改为<code data-tag=\"code\" class=\"code\">300</code>。如下图所示，您需要将该参数的值从<code data-tag=\"code\" class=\"code\">30</code>修改为<code data-tag=\"code\" class=\"code\">300</code>。</p><img width=\"750\" placement=\"break\" alt=\"20230119182518\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1651705761/p552106.jpg\" id=\"0f60a633a6wpq\" class=\"image break\"><h3 id=\"0f60a634a6zne\"><b>php-cgi进程异常中断</b></h3><p id=\"0f60a635a6w44\">如果访问网站时，直接提示“Nginx 502 Bad Gateway”错误，可能是php-cgi进程异常中断导致。您需要执行如下步骤进行法排查：</p><ol id=\"0f60a636a6omv\"><li id=\"0f60a637a6ipy\"><p id=\"0f60a638a6bef\">远程登录ECS实例。</p><p id=\"0f60a639a668r\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"0f60a63aa6ni5\"><p id=\"0f60a63ba6w7n\">依次执行如下命令，查看php fastcgi的进程数和<code data-tag=\"code\" class=\"code\">pm.max_children</code>参数的值。 </p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"0f60a63ca6llh\" class=\"pre codeblock language-javascript\"><code>netstat -anop | grep php-cgi | wc -l\nnetstat -anpo | grep php-fpm | wc -l</code></pre></li><li id=\"0f60a63da6m2w\"><p id=\"0f60a63ea62va\">执行如下命令，查看当前进程。</p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"0f60a63fa6zbl\" class=\"pre codeblock language-javascript\"><code>ps aux | grep php-fpm </code></pre><p id=\"0f60a640a6akz\">回显示例如下，查看fastcgi、php-fpm的进程数。如果进程数大于或等于5个，则表示需要增加进程数。 <img id=\"0f60a641a65pp\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5475014761/p519413.png\" width=\"750\" class=\"image break\"></p></li><li id=\"0f60a642a643g\"><p id=\"0f60a643a64y6\">修改<code data-tag=\"code\" class=\"code\">/usr/local/php/etc/php-fpm.conf</code>配置文件中的相关参数。 </p><ul id=\"0f60a644a6uwa\"><li id=\"0f60a645a68x6\"><p id=\"0f60a646a6pth\">将<code data-tag=\"code\" class=\"code\">pm.max_children</code>参数的值修改为<code data-tag=\"code\" class=\"code\">5</code>，表示支持5个进程。</p><div id=\"0f60a647a6nq7\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"0f60a648a6efe\"><code data-tag=\"code\" class=\"code\">pm.max_children</code>最多支持设置5个进程。按照每个进程20 MB内存，最多支持100 MB，即资源消耗时间为1分钟。如果<code data-tag=\"code\" class=\"code\">pm.max_children</code>增多，则php-cgi的进程增多，进程处理速度就会加快、排队的请求就会变少。但是设置<code data-tag=\"code\" class=\"code\">pm.max_children</code>也需要根据服务器的性能进行设定，一台服务器正常情况下，每一个php-cgi进程所耗费的内存在20 MB左右，您需要根据实际购买的服务器内存来决定<code data-tag=\"code\" class=\"code\">pm.max_children</code>的值。</p></div></div><img id=\"0f60a64aa63b5\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5475014761/p519414.png\" width=\"750\" class=\"image break\"></li><li id=\"0f60a64ba6url\"><p id=\"0f60a64ca6b2u\">将<code data-tag=\"code\" class=\"code\">request_terminate_timeout</code>参数的值修改为<code data-tag=\"code\" class=\"code\">60</code>，表示内存回收机制为1分钟（60秒）。</p><div id=\"0f60a64da6mgq\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"0f60a64ea66gt\"><code data-tag=\"code\" class=\"code\">request_terminate_timeout</code>的值可以根据服务器的性能进行设定，常见设置为60秒。通常服务器性能越好，您可以设置的值越高。</p></div></div><img id=\"0f60a650a6oga\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5475014761/p519415.png\" width=\"750\" class=\"image break\"></li></ul></li><li id=\"0f60a651a6q6q\"><p id=\"0f60a652a62yd\">如果PHP进程的执行时间超过了Nginx的等待时间，则您需要适当增加Nginx的<code data-tag=\"code\" class=\"code\">/etc/nginx.conf</code>配置文件中<code data-tag=\"code\" class=\"code\">fastcgi_connect_timeout</code>，<code data-tag=\"code\" class=\"code\">fastcgi_send_timeout</code>和<code data-tag=\"code\" class=\"code\">fastcgi_read_timeout</code>参数的<code data-tag=\"code\" class=\"code\">timeout</code>时间，您需要修改的参数如下：</p><img width=\"750\" id=\"0f60a654a6wll\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5475014761/p519416.png\" class=\"image break\"></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-an-error-occurred-during-the-connection-to-a-database-or-error-establishing-a-database-connection-error-appears-when-i-access-the-wordpress-website", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>访问WordPress网站提示“建立数据库连接时出错”或者“Error establishing a database connection”错误如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>访问WordPress网站提示“建立数据库连接时出错”或者“Error establishing a database connection”错误如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-13 18:32:25</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"4070416096xal\"><p id=\"407cc485968v1\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍使用浏览器访问WordPress网站提示“建立数据库连接时出错”的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"42a9eb40a06zk\">问题描述</h2><p id=\"42a9eb41a0s6t\">使用浏览器访问基于WordPress模板建立的网站时，提示“建立数据库连接时出错”或者“Error establishing a database connection”错误，具体错误示例如下。</p><ul id=\"8b49cbb2a3h2c\"><li id=\"8b49cbb0a3yjj\"><p id=\"8be60bb0a3sw2\">提示“建立数据库连接时出错”：</p><img id=\"93523901a370k\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3998145761/p555676.jpg\" alt=\"20230203151106\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"905aa3e1a3lzd\"><p id=\"a9560e70a3ucx\">提示“Error establishing a database connection”：</p><img id=\"e068df50a3igf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3998145761/p555708.jpg\" alt=\"建立数据库连接时出错err\" placement=\"break\" width=\"750\" class=\"image break\"></li></ul><h2 id=\"42a9eb42a0dbb\">问题原因</h2><p id=\"42a9eb43a0hj0\">该问题通常是由于被访问的WordPress网站程序不能正常连接MySQL数据库导致。</p><h2 id=\"42a9eb44a0k3m\">解决方案</h2><p id=\"42a9eb45a0qnc\">出现该问题时，您需要在服务器上查看MySQL数据库服务是否正常并重新配置WordPress网站程序中连接的MySQL数据库密码，操作步骤如下：</p><ol id=\"42a9eb46a0lun\"><li id=\"42a9eb47a0r84\"><p id=\"42a9eb48a09g5\">登录您的MySQL数据库服务器。</p></li><li id=\"42a9eb49a0tfu\"><p id=\"42a9eb4aa0qgs\">执行如下命令，查看MySQL数据库服务是否正常。 </p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"42a9eb4ba0g1u\" class=\"pre codeblock language-javascript\"><code>systemctl status mysql</code></pre><ul id=\"42a9eb4ca0cam\"><li id=\"42a9eb4da0jbx\"><p id=\"42a9eb4ea0xfs\">如果MySQL数据库服务运行状态为<b data-tag=\"uicontrol\" id=\"d4079b00a3ib4\" class=\"uicontrol\">active (running)</b> ，表示数据库服务正常运行，回显示例如下，则继续执行步骤3，测试是否可以正常登录到MySQL数据库中。</p><img id=\"e0214ad1a3u9t\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3998145761/p555744.jpg\" alt=\"20230203155724\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"42a9eb51a0vdc\"><p id=\"42a9eb52a0vea\">如果MySQL数据库服务运行状态为<b data-tag=\"uicontrol\" id=\"f6541f80a3kz5\" class=\"uicontrol\">inactive (dead)</b>，表示MySQL数据库服务已停止，回显示例如下，则执行如下操作：</p><img id=\"0bdf4281a3ku2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3998145761/p555665.jpg\" alt=\"20230203145734\" placement=\"break\" width=\"750\" class=\"image break\"><p id=\"506b7a40a37vt\">执行如下命令，启动MySQL数据库服务。</p><pre id=\"1i1mdg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl start mysql</code></pre><div type=\"note\" id=\"6fb4d0e1a3yq6\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"6270d1e0a323l\">如果启动过程中提示ERROR报错，您需要根据报错信息修改数据库服务配置后，再重新执行命令，启动MySQL数据库服务。</p></div></div></li></ul></li><li id=\"42a9eb6ea0mh8\"><p id=\"42a9eb6fa0ydl\">执行如下命令，测试是否可以正常登录到MySQL数据库中。 </p><pre id=\"42a9eb70a06qe\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>mysql -u&lt;User&gt; -h&lt;IP&gt; -p&lt;Password&gt;</code></pre><div type=\"note\" id=\"42a9eb71a02ew\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"42a9eb72a0gm0\"><li id=\"42a9eb73a0yx8\"><p id=\"42a9eb74a07l4\">&lt;User&gt;为MySQL数据库用户名。</p></li><li id=\"42a9eb75a0ah7\"><p id=\"42a9eb76a09r0\">&lt;IP&gt;为MySQL数据库的IP地址。</p></li><li id=\"42a9eb77a08dj\"><p id=\"42a9eb78a05xu\">&lt;Password&gt;为MySQL数据库的密码。</p></li></ul></div></div><p id=\"42a9eb79a0kfc\">如图所示，回显信息提示您可以登录到数据库但数据库的密码错误。此时，您需要重新修改MySQL数据库的密码。具体操作，请参见<a class=\"\" href=\"/zh/ecs/how-do-i-reset-the-mysql-root-password-when-i-forget-the-password\">修改或重置MySQL的密码</a>。 </p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8653304761/p519347.png\" id=\"42a9eb7ba0b9h\" class=\"image break\"></li><li id=\"42a9eb7ca043p\"><p id=\"42a9eb7da01w4\">在修改完MySQL数据库的密码且验证能正常登录后，修改WordPress网站程序中连接的MySQL数据库的密码。</p><p id=\"42a9eb7ea0bve\">执行如下命令，编辑wp-config.php文件（部分版本的WordPress网站的配置文件为wp-config-sample.php），将文件中<code data-tag=\"code\" class=\"code\">DB_PASSWORD</code>字段对应的数据库密码替换为MySQL数据库密码，修改位置如下图所示。\n</p><div id=\"42a9eb7fa0lro\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"42a9eb80a0db2\">本操作以CentOS 7操作系统、wp-config.php文件路径为<code data-tag=\"code\" class=\"code\">/usr/share/nginx/html/wordpress</code>为例，具体操作以您的实际环境为准。</p></div></div><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"42a9eb81a09wr\" class=\"pre codeblock language-javascript\"><code>vim wp-config.php</code></pre><img id=\"42a9eb83a01qb\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0964114761/p551970.jpg\" alt=\"20230118173842\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"42a9eb84a0szr\"><p id=\"42a9eb85a0ooc\">输入<code data-tag=\"code\" class=\"code\">:wq</code>，然后按<code data-tag=\"code\" class=\"code\">Enter</code>键。</p><p id=\"42a9eb86a0sqc\">保存并退出wp-config.php文件。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/active-directory-domains-in-the-network-environment-the-client-host-cannot-access-ali-cloud-network-service-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>AD域网络环境中的客户端主机无法访问阿里云内网服务，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>AD域网络环境中的客户端主机无法访问阿里云内网服务，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-17 11:53:28</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"1381736096zkn\"><p data-tag=\"shortdesc\" id=\"138543f896b1x\" class=\"shortdesc\">本文介绍AD（Active Directory）域网络环境中的客户端主机，无法访问阿里云内网服务问题的问题现象、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"XHssd\">问题描述</h2><p id=\"92d69000adyge\">AD域网络环境中的客户端主机无法访问阿里云内网服务，例如NTP、KMS和WSUS等服务。</p><p id=\"bf738690cfixu\">以无法访问阿里云内网的Windows实例更新服务器（<code data-tag=\"code\" class=\"code\">update.cloud.aliyuncs.com</code>）为例，在客户端主机上执行<code data-tag=\"code\" class=\"code\">ping update.cloud.aliyuncs.com</code>命令检查网络，回显示例如下：</p><img id=\"2b788980d1xha\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615106.png\" alt=\"无法访问更新服务器\" placement=\"break\" width=\"750\" class=\"image break\"><h2 class=\"ne-p\" id=\"PkXCK\">问题原因</h2><p class=\"ne-p\" id=\"ud2bf3621\">在部署DC（Domain Controller）域控制器时，通常会将AD域服务和DNS（Domain Name Server）服务部署在同一台ECS实例上，而客户端主机则会将<b data-tag=\"uicontrol\" id=\"fe36d0a0d1skr\" class=\"uicontrol\">首选DNS服务器</b>地址设置为DC所在实例的IP地址。若DC上部署的DNS服务器不能解析阿里云的内网服务网络，则会造成整个AD域环境下的客户端主机都无法访问阿里云的内网服务，例如NTP、KMS和WSUS等服务。</p><h2 class=\"ne-p\" id=\"bXkQb\">解决方案</h2><div type=\"note\" id=\"cf52ff51d1bxx\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"be58ac40cdkv2\">本文操作步骤以Windows Server 2012 R2数据中心版64位中文版为例，实际操作以您实际的操作系统为准。</p></div></div><h3 data-tag=\"h3\" id=\"13856b0596ahm\" class=\"h3\"><b>方案一：在DC所在实例的DNS转发器策略</b>中添加阿里云内网DNS服务器IP地址</h3><p id=\"f1875600d1p6l\">如果您需要访问较多的阿里云内网服务，则您可以执行如下操作步骤解决该问题。</p><ol id=\"09556422d13ch\"><li id=\"09556420d1jxs\"><p id=\"0836adb0d1wno\">远程连接DC所在实例。</p><p id=\"2a3d9db0d1tz5\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"2855f1f1d117i\"><p id=\"2855f1f0d1g8b\">查看DNS配置信息。</p><ol id=\"4a725931d1tp8\"><li id=\"4980a631d1e6s\"><p id=\"4980a630d1225\">在桌面左下角，选择<img id=\"81ec9e70d178f\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615324.png\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"d86cf2f0d1wvz\" class=\"uicontrol\"> &gt; </b><b data-tag=\"uicontrol\" id=\"956694b0d12aw\" class=\"uicontrol\">控制面板</b>。</p></li><li id=\"966a2200d1a9w\"><p id=\"9669faf0d1wnl\">单击<b data-tag=\"uicontrol\" id=\"bd0a4930d17vp\" class=\"uicontrol\">网络和Internet</b>，然后单击<b data-tag=\"uicontrol\" id=\"bf78ff40d19m9\" class=\"uicontrol\">网络和共享中心</b>。<img id=\"e5536570d173s\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615327.png\" alt=\"网络和共享中心\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"dfad5221d1eg1\"><p id=\"dfad5220d1k24\">单击<b data-tag=\"uicontrol\" id=\"f13a4570d1plm\" class=\"uicontrol\">以太网</b>。<img id=\"0ac96480d1d33\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615332.png\" alt=\"单击以太网\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"050541e0d1jjg\"><p id=\"05051ad0d1j3a\">查看DC的<b data-tag=\"uicontrol\" id=\"27be2750d1jm8\" class=\"uicontrol\">首选DNS服务器</b>的IP地址。</p><div type=\"note\" id=\"385fa930d1qsf\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"417519b0d1fj3\"><b data-tag=\"uicontrol\" id=\"dead3550d1b1d\" class=\"uicontrol\">首选DNS服务器</b>的IP地址为<code data-tag=\"code\" class=\"code\">127.0.0.1</code>，表示DNS解析地址指向本机的IP地址，此时，所有的DNS解析都需要到DNS的<b data-tag=\"uicontrol\" id=\"9956fa00d1ohb\" class=\"uicontrol\">转发器</b>页签中配置。<b> </b></p></div></div><img id=\"22536f50d1eq9\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615406.png\" alt=\"查看首选DNS地址\" placement=\"break\" width=\"750\" class=\"image break\"></li></ol></li><li id=\"355c6d91d1czz\"><p id=\"55b8cbc0d19yx\">在DNS的转发器配置中添加阿里云内网DNS服务的IP地址。</p><ol id=\"59c09861d1ctv\"><li id=\"547b1ba0d1m07\"><p id=\"547af490d1mzv\">在桌面左下角，选择<img id=\"c7a48820d1d1j\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615324.png\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"dbd6d1e0d11kc\" class=\"uicontrol\"> &gt; 服务器管理器</b>。</p></li><li id=\"df95d5b0d14ul\"><p id=\"df95aea0d1zmd\">在<b data-tag=\"uicontrol\" id=\"b507f130d1j3a\" class=\"uicontrol\">服务器管理器</b>页面右上角，选择<b data-tag=\"uicontrol\" id=\"f9895be0d17x7\" class=\"uicontrol\">工具 &gt; DNS</b>。<img id=\"4ad59590d1aia\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615620.png\" alt=\"服务器管理单击DNS\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"b38da081d16zx\"><p id=\"b38da080d18e2\">在<b data-tag=\"uicontrol\" id=\"8f77ed60d1s5c\" class=\"uicontrol\">DNS管理器</b>页面，右键单击目标DNS服务器，然后单击<b data-tag=\"uicontrol\" id=\"92cd32e0d1xt0\" class=\"uicontrol\">属性</b>。<img id=\"bf178c10d1kos\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615629.png\" alt=\"DNS服务器\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"c2b1a2c1d18fd\"><p id=\"c2b1a2c0d1q7z\">单击<b data-tag=\"uicontrol\" id=\"7846c610d1upc\" class=\"uicontrol\">转发器</b>页签，然后单击<b data-tag=\"uicontrol\" id=\"d5edce50d8wgj\" class=\"uicontrol\">编辑</b>。 <img id=\"9aee59f0d8hnh\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7448621861/p628603.png\" alt=\"进入转发器页签并编辑\" placement=\"break\" class=\"image break\"></p></li><li id=\"4b864990d86jt\"><p id=\"4b862280d8hkt\">在<b data-tag=\"uicontrol\" id=\"0c2d79a0d1g0f\" class=\"uicontrol\">编辑转发器</b>对话框，添加阿里云内网DNS服务的IP地址。</p><div type=\"important\" id=\"4f34ab92d8rqz\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"4f34ab93d8udp\">转发器中至少需要保留一个阿里云内网DNS服务地址，否则您将不能正常访问阿里云内网域名。阿里云内网DNS服务地址为100.100.2.136和100.100.2.138。</p></div></div><img id=\"4f34ab95d8ayg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2123071861/p615661.png\" alt=\"添加DNS地址\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"54979b61d8tal\"><p id=\"552842a0d8b0e\">单击<b data-tag=\"uicontrol\" id=\"124820b0d18fn\" class=\"uicontrol\">确定</b>。</p></li></ol></li><li id=\"db0e8df1d1vyb\"><p id=\"db0e8df0d1ly5\">打开CMD命令提示符。</p><ol id=\"e26249e1d1esg\"><li id=\"e1e8fb31d1twa\"><p id=\"e1e8fb30d18rx\">在桌面左下角，单击<img id=\"feb2f9f1d11ki\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615324.png\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标。</p></li><li id=\"ff989f00d1mos\"><p id=\"ff9877f0d1woc\">在右上角搜索框输入<code data-tag=\"code\" class=\"code\">cmd</code>，然后单击<b data-tag=\"uicontrol\" id=\"07104bc0d1ggq\" class=\"uicontrol\">命令提示符</b>。</p><p id=\"3bb39580d1a93\">进入CMD命令提示符。<img id=\"488cebd0d1rvh\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615667.png\" alt=\"输入cmd\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"d5bb2720d1jie\"><p id=\"d5bb0010d1cp2\">执行<code data-tag=\"code\" class=\"code\">ipconfig /flushdns</code>命令，刷新DNS缓存信息。<img id=\"801736a0d1aqm\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615670.png\" alt=\"刷新DNS缓存\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"79fe8b61d1ohz\"><p id=\"8cf48490d130g\">在不能访问阿里云内网服务的客户端主机上，执行<code data-tag=\"code\" class=\"code\">ping 目标阿里云内网服务域名</code>命令，测试阿里云内网服务网络访问是否正常。</p><p id=\"d1c3dfd0d1043\">以执行<code data-tag=\"code\" class=\"code\">ping update.cloud.aliyuncs.com</code>命令为例，如图所示，成功解析到域名对应的IP地址，即表示网络访问正常。<img id=\"52d03880d1309\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615684.png\" alt=\"客户机上测试结果\" placement=\"break\" class=\"image break\"></p></li></ol><h3 data-tag=\"h3\" id=\"13859215969c1\" class=\"h3\"><b>方案二：在客户端主机的host文件中添加目标阿里云</b>内网服务域名解析记录</h3><p id=\"fdbc5600d1mod\">如果您只需要访问较少的阿里云内网服务，则您可以执行如下操作步骤解决该问题。</p><ol id=\"6f868832d1v2n\"><li id=\"6f868830d1a5f\"><p id=\"6dca3230d1i3t\">登录任意一台能正常访问目标阿里云内网服务的主机。</p><p id=\"e9e3e910d1uun\">在主机上执行<code data-tag=\"code\" class=\"code\">ping 目标阿里云内网服务域名</code>命令，获取该阿里云内网服务域名对应的IP地址。以获取<code data-tag=\"code\" class=\"code\">update.cloud.aliyuncs.com</code>域名对应IP地址为例，如图所示。<img id=\"ac76be20d1c3d\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615698.png\" alt=\"解析IP地址\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"b3d91251d12bs\"><p id=\"b3d91250d1p95\">登录不能访问阿里云内网服务的AD域环境中的客户端主机。</p></li><li id=\"4aa065b0d1cp2\"><p id=\"58e0ed20d114q\">打开<code data-tag=\"code\" class=\"code\">hosts</code>文件。</p><p id=\"220f2ed0d1tx1\">以<code data-tag=\"code\" class=\"code\">hosts</code>文件所在目录为<code data-tag=\"code\" class=\"code\">C:\\Windows\\System32\\drivers\\etc</code>为例，如图所示。<img id=\"8d413310d16ti\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615692.png\" alt=\"打开hosts文件\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"f079daa1d1vv6\"><p id=\"f079daa0d1gf3\">在hosts文件中，添加该阿里云内网服务域名对应的IP地址的解析记录。</p><p id=\"b0d9bf90d1w99\">以添加<code data-tag=\"code\" class=\"code\">update.cloud.aliyuncs.com</code>域名解析记录为例，如图所示。</p><img id=\"3a2c3560d1w33\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615711.png\" alt=\"hosts添加域名解析记录\" placement=\"break\" class=\"image break\"></li><li id=\"e693de41d1k4o\" docid=\"3925603\"><p id=\"db0e8df0d1ly5\">打开CMD命令提示符。</p><ol id=\"e26249e1d1esg\"><li id=\"e1e8fb31d1twa\"><p id=\"e1e8fb30d18rx\">在桌面左下角，单击<img id=\"feb2f9f1d11ki\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615324.png\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标。</p></li><li id=\"ff989f00d1mos\"><p id=\"ff9877f0d1woc\">在右上角搜索框输入<code data-tag=\"code\" class=\"code\">cmd</code>，然后单击<b data-tag=\"uicontrol\" id=\"07104bc0d1ggq\" class=\"uicontrol\">命令提示符</b>。</p><p id=\"3bb39580d1a93\">进入CMD命令提示符。<img id=\"488cebd0d1rvh\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615667.png\" alt=\"输入cmd\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"1654e7a1d1cqb\" docid=\"3925603\"><p id=\"d5bb0010d1cp2\">执行<code data-tag=\"code\" class=\"code\">ipconfig /flushdns</code>命令，刷新DNS缓存信息。<img id=\"801736a0d1aqm\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615670.png\" alt=\"刷新DNS缓存\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"335f71d1d1tu2\" docid=\"3925603\"><p id=\"8cf48490d130g\">在不能访问阿里云内网服务的客户端主机上，执行<code data-tag=\"code\" class=\"code\">ping 目标阿里云内网服务域名</code>命令，测试阿里云内网服务网络访问是否正常。</p><p id=\"d1c3dfd0d1043\">以执行<code data-tag=\"code\" class=\"code\">ping update.cloud.aliyuncs.com</code>命令为例，如图所示，成功解析到域名对应的IP地址，即表示网络访问正常。<img id=\"52d03880d1309\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615684.png\" alt=\"客户机上测试结果\" placement=\"break\" class=\"image break\"></p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/how-do-i-resolve-the-issues-that-occur-when-i-access-iis-websites", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>IIS Web网站访问故障</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>IIS Web网站访问故障</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-23 11:45:45</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"408ab4f096fue\"><p data-tag=\"shortdesc\" id=\"408de94896e0e\" class=\"shortdesc\">本文介绍IIS（Internet Information Service）作为Web服务的网站，访问故障相关的问题及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><p id=\"a624b70896lk1\">本文介绍的IIS Web网站访问故障相关问题如下：</p><ul id=\"1810bb02cedf8\"><li id=\"1810bb00cez2e\"><p id=\"16d49180ceup8\"><a title=\"\" class=\"xref\" href=\"#029f88a0cehv7\">访问部署在Windows实例上的基于IIS搭建的Web网站时，提示“500 - 内部服务器错误”，如何处理？</a></p></li><li id=\"31a669c0cepbq\"><p id=\"31a642b0cej61\"><a title=\"\" class=\"xref\" href=\"#41071a7396zvr\">如何在Windows实例的IIS网站中设置禁止通过IP地址直接访问？</a></p></li><li id=\"e560f6d1d47if\"><p id=\"e560f6d0d4zzi\"><a title=\"\" class=\"xref\" href=\"#azrJj\">基于IIS配置的网站因服务端口被占用导致无法访问，如何处理？</a></p></li><li id=\"8c351811d454j\" props=\"china\" data-cond-props=\"china\"><p id=\"8c351810d45u3\"><a title=\"\" class=\"xref\" href=\"#038cb560cd2cv\">访问基于IIS搭建的网站提示“403.14-Forbidden”错误，如何处理？</a></p></li></ul><h2 id=\"029f88a0cehv7\">访问部署在Windows实例上的基于IIS搭建的Web网站时，提示“500 - 内部服务器错误”，如何处理？</h2><h3 id=\"8abbc841cd70c\"><b>问题描述</b></h3><p id=\"a6204391cd1ex\">访问部署在Windows实例上的基于IIS搭建的Web网站时，提示“500 - 内部服务器错误”。</p><img alt=\"500éè¯¯\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p518875.png\" class=\"image break\"><h3 id=\"a85477f0cdszu\"><b>问题原因</b></h3><p id=\"a089a750cdu9z\">该提示没有提供具体的错误项，您需要先查看网站的真实报错信息，才能针对性的定位和解决问题。本文主要介绍如何查看该场景下网站的真实报错信息。</p><div type=\"note\" id=\"adebdcb1cdfz9\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"adebdcb0cdnvj\">您也可以通过网站运行过程中的常见问题排查流程，逐步排查具体问题并根据对应方案解决问题，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-if-i-cannot-access-a-website-hosted-on-an-instance\">无法访问ECS实例中运行网站的快速排查方法</a>。</p></div></div><h3 id=\"888016d0cdfl5\"><b>解决方案</b></h3><div type=\"note\" id=\"be58ac41cd6uh\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"be58ac40cdkv2\">本文操作步骤以Windows Server 2019数据中心版64位中文版为例，实际操作以您实际的Windows实例操作系统为准。</p></div></div><p id=\"b7d41fd1cdccq\">您可以执行如下操作，查看真实报错信息。</p><ol id=\"26ade022a23fq\"><li id=\"26ade020a2ecf\"><p id=\"f785e271a2mrj\">远程连接Windows实例。</p><p id=\"2cb35180a24gt\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"2f2fc331a2xss\"><p id=\"2f2fc330a2hci\">在桌面左下角，选择<img id=\"2e570f10a2tzt\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555192.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"> <b data-tag=\"uicontrol\" id=\"89141fb0a21ul\" class=\"uicontrol\">&gt;</b> <b data-tag=\"uicontrol\" id=\"74c8cfb0a28mm\" class=\"uicontrol\">服务器管理器</b>。</p><img id=\"0dd75b50a2vfx\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555189.jpg\" alt=\"打开服务器管理器\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"f41f3070a2k8d\"><p id=\"7c29d970a21w7\">在<b data-tag=\"uicontrol\" id=\"824d3310a2kxf\" class=\"uicontrol\">服务器管理器</b>页面右上角，选择<b data-tag=\"uicontrol\" id=\"85a8ba20a2qhc\" class=\"uicontrol\">工具 &gt; Internet Information Services (IIS) 管理器</b>。</p></li><li id=\"bc2381817fwaw\"><p id=\"af842110a2xoy\">在<b data-tag=\"uicontrol\" id=\"b3f4d6c0a2lwu\" class=\"uicontrol\">Internet Information Services (IIS) 管理器</b>页面左侧导航栏，单击目标网站。<img id=\"278c8380a2kib\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555206.jpg\" alt=\"查看IIS网站\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"d880edb07akk2\"><p id=\"aa8deae0a25ec\">在<b data-tag=\"uicontrol\" id=\"581a04a0a2wr4\" class=\"uicontrol\">IIS</b>区域，双击<b data-tag=\"uicontrol\" id=\"5a629510a20z3\" class=\"uicontrol\">错误页</b>。</p></li><li id=\"5b5cd391a2p3o\"><p id=\"5b5cd390a2khc\">在<b data-tag=\"uicontrol\" id=\"b0097cb1a2fw9\" class=\"uicontrol\">Internet Information Services (IIS) 管理器</b>页面右侧<b data-tag=\"uicontrol\" id=\"ab358010a2hyb\" class=\"uicontrol\">操作</b>区域中，单击<b data-tag=\"uicontrol\" id=\"aeea4ab0a29tq\" class=\"uicontrol\">编辑功能设置</b>。<img id=\"b6606310a2qyh\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555214.jpg\" alt=\"在错误页编辑功能设置\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"a8682f41a25c7\"><p id=\"a8682f40a2gwf\">在<b data-tag=\"uicontrol\" id=\"0e187110a2hn1\" class=\"uicontrol\">编辑错误页设置</b>页面，选择<b data-tag=\"uicontrol\" id=\"107c0390a2rra\" class=\"uicontrol\">详细错误</b>，然后单击<b data-tag=\"uicontrol\" id=\"127b7d10a2x89\" class=\"uicontrol\">确定</b>。<img id=\"054efdb0a2d4p\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555223.jpg\" alt=\"详细错误\" placement=\"break\" class=\"image break\"></p></li><li id=\"23024b01a2o3m\"><p id=\"1d57a3d0a22cw\">重新访问网站，并按<code data-tag=\"code\" class=\"code\"><b>Ctrl</b></code><code data-tag=\"code\" class=\"code\">+</code><code data-tag=\"code\" class=\"code\"><b>F5</b></code>键强制刷新浏览器。</p><p id=\"522084b0a2n4h\">您可以查看到网站的真实报错信息。</p></li><li id=\"599357f0cdfet\"><p id=\"599330e0cdqwz\">根据报错信息，解决相关问题后重新访问该网站。</p><p id=\"b2171a60cdaai\">网站访问成功，问题解决。</p></li></ol><h2 id=\"41071a7396zvr\">如何在Windows实例的IIS网站中设置禁止通过IP地址直接访问？</h2><h3 id=\"83befe90cd2nk\"><b>问题描述</b></h3><p id=\"3e6c45b0cdvj4\">当在Windows实例上的IIS站点配置了允许通过IP地址直接访问（即IIS中绑定了空主机头）时，可以通过IP地址直接访问到服务器中IIS的默认站点。当有域名（包括恶意域名或未备案域名等）解析到该IP地址时，会通过该域名直接访问到网站内容，存在安全风险。</p><h3 id=\"97f6d121cdrhm\"><b>问题原因</b></h3><p id=\"ab729c20cdcde\">当IIS中存在绑定空主机头时，会导致使用IP地址能够直接访问到IIS对应绑定空主机头的网站。</p><h3 id=\"9c729541cdjsn\"><b>解决方案</b></h3><div type=\"note\" id=\"5d9551f1cedxt\" docid=\"3925043\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"be58ac40cdkv2\">本文操作步骤以Windows Server 2019数据中心版64位中文版为例，实际操作以您实际的Windows实例操作系统为准。</p></div></div><p id=\"13675d70cdioo\">您可以通过删除IIS中绑定空主机头的方式来禁止通过IP地址直接访问IIS网站，操作步骤如下：</p><ol id=\"546f6490cdka7\"><li id=\"546f6491cdkxp\"><p id=\"546f6492cdw6f\">远程连接Windows实例。</p><p id=\"546f6493cd47r\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"546f6494cdhxy\"><p id=\"49026810cevxk\">打开IIS管理器。</p><ol id=\"4b2b3b81cet25\"><li id=\"3e1b92f0cezvd\"><p id=\"3e1b6be0cen20\">在桌面左下角，选择<img id=\"546f6496cdudg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555192.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"> <b data-tag=\"uicontrol\" id=\"6d0b57c1cdg15\" class=\"uicontrol\">&gt;</b> <b data-tag=\"uicontrol\" id=\"6d0b57c2cdhql\" class=\"uicontrol\">服务器管理器</b>。</p><img id=\"546f6498cduhw\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555189.jpg\" alt=\"打开服务器管理器\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"546f6499cd375\"><p id=\"546f649acdjcy\">在<b data-tag=\"uicontrol\" id=\"6d0b57c3cdv18\" class=\"uicontrol\">服务器管理器</b>页面右上角，选择<b data-tag=\"uicontrol\" id=\"6d0b57c4cdd1y\" class=\"uicontrol\">工具 &gt; Internet Information Services (IIS) 管理器</b>。</p></li></ol></li><li id=\"4e03fe5096gp7\"><p id=\"4e03fe5196b5o\">在左侧导航栏单击目标网站，然后单击<b data-tag=\"uicontrol\" id=\"3e93be40ce4ud\" class=\"uicontrol\">操作</b>列的<b data-tag=\"uicontrol\" id=\"41468230cetcs\" class=\"uicontrol\">绑定</b>，在<b data-tag=\"uicontrol\" id=\"43798ed0cemmy\" class=\"uicontrol\">网站绑定</b>对话框的空主机头（即<b data-tag=\"uicontrol\" id=\"46e394d0cek2k\" class=\"uicontrol\">主机名</b>参数为空）基础上再绑定一个网站域名。</p><p id=\"9dcc8870cefut\">以绑定<code data-tag=\"code\" class=\"code\">example.aliyundoc.com</code>域名为例，如图所示。</p><img id=\"9afbaba0e1krv\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9841222861/p636044.png\" alt=\"绑定域名\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"05351e10cexw4\"><p id=\"0534f700cepne\">使用服务器的公网IP地址和已绑定的<code data-tag=\"code\" class=\"code\">example.aliyundoc.com</code>域名访问网站。</p><ul id=\"b94f6ef3ce2t2\"><li id=\"b94f6ef0centa\"><p id=\"3839c770cecv1\">通过服务器的公网IP和域名都可以访问该网站，如图所示。</p><p id=\"c2308900ce6ul\"><img width=\"600\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9841222861/p518964.png\" class=\"image break\"> <img width=\"600\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9841222861/p518965.png\" class=\"image break\"></p></li><li id=\"b94f6ef1ceyn5\"><p id=\"b27f0c70ceech\">如果有其他恶意域名或未备案域名（例如<code data-tag=\"code\" class=\"code\">demo.aliyundoc.com</code>）解析到了服务器的IP地址，虽然在IIS中未绑定该主机头，但是也可以成功访问该网站，如图所示。</p><img width=\"600\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9841222861/p518966.png\" class=\"image break\"></li></ul></li><li id=\"4e03fe56966un\"><p id=\"4a327f70ceqtd\">禁止通过IP地址直接访问网站。</p><ol id=\"66cbdbd1cexqo\"><li id=\"4e03fe5896ccu\"><p id=\"4e03fe599649i\">在<b data-tag=\"uicontrol\" id=\"dc20c8f0cegj3\" class=\"uicontrol\"> Internet Information Services (IIS) 管理器</b>的左侧导航栏单击目标网站，然后单击<b data-tag=\"uicontrol\" id=\"dc20c8f1ce3e4\" class=\"uicontrol\">操作</b>列的<b data-tag=\"uicontrol\" id=\"dc20c8f2cesp7\" class=\"uicontrol\">绑定</b>。</p></li><li id=\"5a1ffe20ce46o\"><p id=\"5a1fd710cezjy\">在<b data-tag=\"uicontrol\" id=\"dc20c8f3cekwt\" class=\"uicontrol\">网站绑定</b>对话框中单击空主机头（即<b data-tag=\"uicontrol\" id=\"dc20c8f4cez2g\" class=\"uicontrol\">主机名</b>参数为空），单击<b data-tag=\"uicontrol\" id=\"94e06320cedcn\" class=\"uicontrol\">删除</b>，保留您需要的域名即可。</p><p id=\"6b581022ce70n\">以保留<code data-tag=\"code\" class=\"code\">example.aliyundoc.com</code>域名为例，如图所示。<img id=\"6b581023ce071\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1644800861/p612651.png\" alt=\"添加域名\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"6a5ce740ceos9\"><p id=\"6a5cc030ce4hr\">使用其他恶意域名或未备案域名重新访问网站验证是否成功禁止通过IP地址直接访问网站。</p><p id=\"807dec30cemyr\">恶意域名或未备案域名（例如<code data-tag=\"code\" class=\"code\">demo.aliyundoc.com</code>）即使解析到服务器的IP地址，也无法正常访问该网站，如图所示，即成功禁止通过IP地址直接访问网站。<img id=\"ce891a60b028h\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1644800861/p569470.png\" alt=\"image\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li></ol><h2 id=\"azrJj\">基于IIS配置的网站因服务端口被占用导致无法访问，如何处理？</h2><h3 id=\"f2cca1a09721q\">问题描述</h3><p id=\"06e0ac40cda7s\">访问基于IIS配置的网站失败，然后在Windows实例上使用<code data-tag=\"code\" class=\"code\">netstat</code>命令查看IIS服务端口处于正常监听状态，并且网站系统进程处于运行状态。</p><h3 id=\"5e076080a2il0\"><b>问题原因</b></h3><p id=\"66cbf1e0a2dlg\">由于网站服务器端口被占用，导致无法访问网站。</p><h3 id=\"e37fb340979ee\"><b>解决方案</b></h3><div id=\"8c3a9690a2aqu\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"8c3a6f80a2lcq\">本操作步骤以网站服务端口为80端口、基于IIS配置网站的Windows实例操作系统为Windows Server 2019数据中心版64位中文版为例进行说明，具体操作以您实际的服务端口和Windows实例操作系统为准。</p></div></div><ol id=\"7f99eec796wby\"><li id=\"7f99eec896q1p\"><p id=\"8994ab41a27gi\">远程连接Windows实例。</p><p id=\"8994ab42a2dar\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"7f99eeca966o4\"><p id=\"ac559c71a25hm\">在搜索栏输入<code data-tag=\"code\" class=\"code\">cmd</code>，然后单击<b data-tag=\"uicontrol\" id=\"3a644526a21pv\" class=\"uicontrol\">命令提示符</b>。</p><img placement=\"break\" alt=\"20230120131443\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2148285761/p552165.jpg\" id=\"ac559c73a2bvh\" class=\"image break\"></li><li id=\"91ed5b70a29x1\"><p id=\"91ed3460a2lsu\">执行<code data-tag=\"code\" class=\"code\">netstat -ano | findstr 80</code>命令，检查服务端口是否被监听，即服务端口是否处于<b data-tag=\"uicontrol\" id=\"4caa2860a2gou\" class=\"uicontrol\">LISTENING</b>状态。</p><p id=\"eecaa430cd3r5\">以PID号即进程程序号为<code data-tag=\"code\" class=\"code\">4</code>的进程占用了IIS的80服务端口导致无法正常访问网站为例，回显示例如下。</p><img placement=\"break\" alt=\"80端口是否处于监听状态\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555387.jpg\" id=\"535883f0a23hy\" class=\"image break\"><ul id=\"f37dcc00cd9sn\"><li id=\"f37dcc01cdicu\"><p id=\"f37dcc04cdc2i\">服务端口监听中：</p><p id=\"2a9cf8f0cdqy3\">如果80端口处于监听状态，有可能是其他程序占用了80端口，您可以通过<code data-tag=\"code\" class=\"code\">taskkill &lt;PID&gt;</code>（命令中<code data-tag=\"code\" class=\"code\">&lt;PID&gt;</code>为程序进程号）来关闭相关程序，然后重启IIS程序。 </p><p id=\"30820ce0cdmw3\">在本示例中，您需要执行<code data-tag=\"code\" class=\"code\">taskkill 4</code>命令来关闭占用80端口的程序，然后重启IIS程序。</p><div type=\"note\" id=\"a988b760cdwyq\" props=\"china\" data-cond-props=\"china\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"aea32c80cd0l6\">重启IIS程序的具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/access-windows-instance-using-iis-deployment-sites-appear-500-19-don-t-allow-absolute-physical-path-in-xxx-xxx-error-how-to-deal-with#3504e401adjfl\">重启IIS</a>。</p></div></div></li><li id=\"1bcd29d1cdnq0\"><p id=\"1bcd29d0cdjt8\">服务端口未监听：</p><p id=\"34f808d0cdflx\">如果80端口处于未监听状态，请您重新运行IIS程序或检查网站是否处于运行状态。</p></li></ul></li><li id=\"f56e8d91cdh9p\"><p id=\"f56e8d90cdo3z\">重新访问该网站。</p><p id=\"f5c2ef22cd70h\">网站访问成功，问题解决。</p></li></ol><section id=\"24cb82f0d4epf\" props=\"china\" data-cond-props=\"china\" class=\"section\"><h2 id=\"038cb560cd2cv\">访问基于IIS搭建的网站提示“403.14-Forbidden”错误，如何处理？</h2><h3 id=\"39125539\"><b>问题描述</b></h3><p id=\"bb9c5db097xa2\">在Windows实例上，访问基于IIS搭建的网站提示“HTTP错误 403.14-Forbidden Web 服务器被配置为不列出此目录的内容”错误，如图所示：<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7834114761/p518987.png\" width=\"750\" class=\"image break\"></p><h3 id=\"d5639110a3rhy\"><b>问题原因</b></h3><p id=\"1f07c1c1cdo9h\">导致该问题的可能原因如下：</p><ul id=\"284be362cdmyz\"><li id=\"284be360cdn0n\"><p id=\"2ba06590cd594\">没有为请求的URL配置默认文档。更多信息，请参见<a title=\"\" class=\"xref\" href=\"#c6457381a3hsi\">配置默认文档</a>。</p></li><li id=\"2c65b161cdunl\"><p id=\"2f0143d0cdzs3\">没有在IIS网站所在Windows实例上启用目录浏览。您可以使用IIS管理器启用目录浏览，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#ce9faa50a3hnz\">启用目录浏览</a>。</p></li></ul><h3 id=\"482a28f5\"><b>解决方案</b></h3><h4 id=\"c6457381a3hsi\"><b>配置默认文档</b></h4><p id=\"df504760a3dn9\">如果不希望启用目录浏览，请确保配置了默认文档并且该文件存在。</p><h4 id=\"ce9faa50a3hnz\"><b>启用目录浏览</b></h4><div type=\"note\" id=\"1d7ebb51cdlfc\" docid=\"3925043\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"be58ac40cdkv2\">本文操作步骤以Windows Server 2019数据中心版64位中文版为例，实际操作以您实际的Windows实例操作系统为准。</p></div></div><p id=\"bb9c5db297ezp\"> 使用IIS管理器启用目录浏览，操作步骤如下：</p><ol id=\"0b0f7790a33gi\"><li id=\"0b0f7791a3zxe\"><p id=\"0b0f7792a33p1\">远程连接Windows实例。</p><p id=\"0b0f7793a3wbh\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"0b0f7794a3cxv\"><p id=\"0b0f7795a3gqo\">在桌面左下角，选择<img id=\"0b0f7796a3vk7\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555192.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"> <b data-tag=\"uicontrol\" id=\"1d6dd9a5a7fit\" class=\"uicontrol\">&gt;</b> <b data-tag=\"uicontrol\" id=\"1d6dd9a6a7vjd\" class=\"uicontrol\">服务器管理器</b>。</p><img id=\"0b0f7798a397v\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555189.jpg\" alt=\"打开服务器管理器\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"0b0f7799a3zlc\"><p id=\"0b0f779aa3j8s\">在<b data-tag=\"uicontrol\" id=\"1d6dd9a7a7345\" class=\"uicontrol\">服务器管理器</b>页面右上角，选择<b data-tag=\"uicontrol\" id=\"1d6dd9a8a78gf\" class=\"uicontrol\">工具 &gt; Internet Information Services (IIS) 管理器</b>。</p></li><li id=\"0b0f779ba3k11\"><p id=\"0b0f779ca3lh9\">在<b data-tag=\"uicontrol\" id=\"1d6dd9a9a7fzq\" class=\"uicontrol\">Internet Information Services (IIS) 管理器</b>页面的<b data-tag=\"uicontrol\" id=\"e6945dd0a3dqv\" class=\"uicontrol\">IIS</b>区域，双击<b data-tag=\"uicontrol\" id=\"ece7ef30a3bv1\" class=\"uicontrol\">目录浏览</b>。<img id=\"f6645ee0a36hk\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555518.jpg\" alt=\"目录浏览\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"e35d4eb1a39tb\"><p id=\"e35d4eb0a31wu\">在<b data-tag=\"uicontrol\" id=\"1d6e00b0a7xqn\" class=\"uicontrol\">Internet Information Services (IIS) 管理器</b>页面右侧<b data-tag=\"uicontrol\" id=\"1d6e00b1a7n66\" class=\"uicontrol\">操作</b>区域中，单击<b data-tag=\"uicontrol\" id=\"179476e0a3oxm\" class=\"uicontrol\">启用</b>。<img id=\"3d2f14f0a3hg8\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555523.jpg\" alt=\"启用目录浏览\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"d3e706c1cdarr\"><p id=\"d3e706c0cdi27\">重新访问该网站。</p><p id=\"d8c70af0cdxaf\">网站访问成功，问题解决。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-cannot-use-internet-explorer-on-a-windows-instance-to-access-external-websites", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>Windows实例内无法使用Internet Explorer浏览器访问外部网站如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例内无法使用Internet Explorer浏览器访问外部网站如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-13 15:51:57</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"3fd5f94096ba5\"><p data-tag=\"shortdesc\" id=\"3fdbecb196u22\" class=\"shortdesc\">本文介绍在Windows实例内无法使用Internet Explorer浏览器访问外部网站的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"3fdbecb6962tf\">在Windows实例内无法使用操作系统自带的Internet Explorer浏览器访问外部网站，提示如下：</p><p id=\"13211c3096zot\"><img width=\"750\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p518495.png\" class=\"image break\"> </p><h2 id=\"4rM4I\">问题原因</h2><p id=\"3fdbecb8967o6\">在Windows实例内无法使用Internet Explorer浏览器访问外部网站，可能是如下原因导致：</p><ul id=\"3fdbecb996ujl\"><li id=\"3fdbecba963k1\"><p id=\"3fdbecbb96r7c\">ECS实例没有配置公网IP地址</p></li><li id=\"0572d4d0a77nh\"><p id=\"0572adc0a7jy2\">本地网络和DNS解析问题</p></li><li id=\"3fdbecbc960q9\"><p id=\"3fdbecbd96qso\">使用的浏览器配置问题</p></li><li id=\"3fdbecbe96lp2\"><p id=\"3fdbecbf96c4m\">IP地址安全策略等网络设置问题</p></li></ul><h2 id=\"AywdZ\">解决方案</h2><p id=\"403bb6d09fws5\">您可以通过以下步骤逐步排查，解决上述问题。</p><div id=\"83472ea196l3j\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"83472ea0961c7\">以下操作步骤以Windows Server 2019 数据中心版 64位中文版为例，实际操作以您实际的Windows实例操作系统为准。</p></div></div><h3 id=\"2342f8f0a7q0e\"><b>步骤一：排查ECS实例的公网IP</b></h3><ol id=\"5e61dc32a78fd\"><li id=\"5e61dc30a7mi9\"><p id=\"4441c7c0a7s8l\">查看ECS实例网络信息。</p><p id=\"99f41ab0a7h2v\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/view-instance-information\">查看实例信息</a>。</p><ul id=\"b983c921a7m5l\"><li id=\"b8ddc520a7itw\"><p id=\"b8dd9e10a76xy\">如果ECS实例已配置公网IP地址，则您需要继续执行<a title=\"\" class=\"xref\" href=\"#8a6f12809f3bp\">步骤二：排查网络相关设置</a>。</p></li><li id=\"fa680781a748p\"><p id=\"fa680780a72t2\">如果ECS实例未配置公网IP地址，则您需要执行下一步。</p></li></ul></li><li id=\"982f3930a79qb\"><p id=\"982f1220a7t1l\">选择如下任意一种方法，为ECS实例配置公网IP地址。</p><ul id=\"2d8cae41a7dgm\"><li id=\"2d568310a7k5o\"><p id=\"2d565c00a7lju\">方法一：</p><p id=\"3fd30680a750d\">申请弹性公网IP并绑定到ECS实例，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/document_detail/65203.html\">申请EIP</a>和<a title=\"\" class=\"xref\" href=\"/document_detail/72125.html\">绑定ECS实例</a>。</p></li><li id=\"361fcf60a7392\"><p id=\"361fa850a7x14\">方法二：</p><p id=\"50763610a7bph\">通过升级公网带宽配置来获取固定公网IP，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/modify-the-bandwidth-configurations-of-subscription-instances\">包年包月实例修改带宽</a>或<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/modify-the-bandwidth-configurations-of-pay-as-you-go-instances\">按量付费实例修改带宽</a>。</p></li><li id=\"719473c0a7prj\"><p id=\"71944cb0a7k5g\">方法三：</p><p id=\"823bc200a7e0h\">通过公网NAT网关访问互联网，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/vpc/user-guide/use-the-snat-feature-of-an-internet-nat-gateway-to-access-the-internet\">使用公网NAT网关SNAT功能访问互联网</a>。</p></li></ul></li></ol><h3 id=\"8a6f12809f3bp\"><b>步骤二：排查网络相关设置</b></h3><h4 id=\"a3ecf3819fe8j\"><b>排查本地网络</b></h4><ol id=\"5d0ea3829f38b\"><li id=\"5d0ea3809flz9\"><p id=\"c2b7a4419f1ha\">获取本地主机的公网IP地址。</p><ol id=\"7d815ef19fidh\"><li id=\"7cf17b009fu22\"><p id=\"918545b09fb16\">在桌面左下角，单击<img width=\"25\" placement=\"inline\" alt=\"搜索图标\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553311.jpg\" id=\"d25204709fzn9\" class=\"image inline\">图标。</p></li><li id=\"b15aafb19fshb\"><p id=\"b15aafb09f5s0\">输入<code data-tag=\"code\" class=\"code\">cmd</code>，然后在弹出的面板中单击<b data-tag=\"uicontrol\" id=\"51c49a02a7efj\" class=\"uicontrol\">命令提示符</b>。<img width=\"750\" placement=\"break\" alt=\"打开2019命令提示符\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553312.jpg\" id=\"61c1aed09fq7h\" class=\"image break\"></p></li><li id=\"4720f8b19fvz4\"><p id=\"4720f8b09f90u\">在命令提示符中，执行<code data-tag=\"code\" class=\"code\">curl cip.cc </code>命令。</p><ul id=\"9ff8f5a19fwv9\"><li id=\"9f6938c19fyxu\"><p id=\"9f6938c09f8yl\">如果回显中获取到本地主机的公网IP信息，如图所示，则本地主机网络正常，无需排查DNS解析问题，继续执行<a title=\"\" class=\"xref\" href=\"#3fdc3ad496a8v\">步骤三：排查Internet Explorer浏览器</a>和<a title=\"\" class=\"xref\" href=\"#3fdc3ad796lt1\">步骤四：排查IP安全策略等网络限制</a>。<img placement=\"break\" alt=\"本机网络正常\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553317.jpg\" id=\"7c23dfe09f265\" class=\"image break\"></p></li><li id=\"ecc3c5e19fx1f\"><p id=\"fd7351809fnqo\">如果回显中无法获取到本地主机的公网IP信息，如图所示，则继续执行下一步，检查本地主机网络配置。<img width=\"750\" placement=\"break\" alt=\"本机网络异常-xin\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553320.jpg\" id=\"c50b34609fmob\" class=\"image break\"></p></li></ul></li></ol></li><li id=\"6d21ef219fsp7\"><p id=\"6d21ef209fept\">检查本地主机网络配置。</p><ol id=\"e99748a19f44a\"><li id=\"e91bfe219ff29\"><p id=\"e76749409f4r9\">在桌面左下角，单击<img width=\"25\" placement=\"inline\" alt=\"搜索图标\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553311.jpg\" id=\"e76749419folw\" class=\"image inline\">图标。</p></li><li id=\"06c0f3919ffqy\"><p id=\"047ca8e09f3oh\">输入<code data-tag=\"code\" class=\"code\">控制面板</code>，然后在弹出的面板中单击<b data-tag=\"uicontrol\" id=\"51c4c113a74gj\" class=\"uicontrol\">控制面板</b>。</p></li><li id=\"493d85319fqud\"><p id=\"493d85309f20d\">在<b data-tag=\"uicontrol\" id=\"51c4c117a7t66\" class=\"uicontrol\">控制面板</b>中，选择<b data-tag=\"uicontrol\" id=\"51c4e810a7hnf\" class=\"uicontrol\">网络和Internet &gt; 网络和共享中心</b>，然后单击<b data-tag=\"uicontrol\" id=\"51c4e812a77ug\" class=\"uicontrol\">以太网</b>。<img width=\"750\" placement=\"break\" alt=\"网络和共享中心\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553326.jpg\" id=\"a91188809fejh\" class=\"image break\"></p></li><li id=\"a1f613419fijw\"><p id=\"a1f613409fedj\">在<b data-tag=\"uicontrol\" id=\"51c4e817a7ing\" class=\"uicontrol\">以太网状态</b>面板中，单击<b data-tag=\"uicontrol\" id=\"51c4e819a7yjc\" class=\"uicontrol\">详细信息</b>，然后检查是否已启用DHCP。<img width=\"750\" placement=\"break\" alt=\"以太网状态\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553329.jpg\" id=\"33d648709fbgc\" class=\"image break\"></p></li><li id=\"803e74619flnz\"><p id=\"fc7995f09fwv9\">在<b data-tag=\"uicontrol\" id=\"51c4e81ea7dzd\" class=\"uicontrol\">以太网状态</b>面板中，单击<b data-tag=\"uicontrol\" id=\"51c4e820a75k9\" class=\"uicontrol\">属性</b>，然后选择<b data-tag=\"uicontrol\" id=\"51c4e822a7vot\" class=\"uicontrol\">Internet协议版本 4（TCP/IPv4） &gt; 属性</b>并选择<b data-tag=\"uicontrol\" id=\"51c4e824a7xdg\" class=\"uicontrol\">自动获得IP地址</b>。<img width=\"750\" placement=\"break\" alt=\"勾选自动获得IP地址\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553347.jpg\" id=\"a0ea24b09fdxk\" class=\"image break\"></p></li></ol></li></ol><h4 id=\"add82a909flzr\"><b>排查DNS解析</b></h4><ol id=\"eb0dc752a02hs\"><li id=\"eb0dc750a09qe\"><p id=\"ed6ee8d2a0z9p\">远程登录ECS实例。</p><p id=\"f3d8c150a0xqs\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"1514e741a0opy\"><p id=\"67b03b90a086q\">在桌面左下角，单击<img width=\"25\" placement=\"inline\" alt=\"搜索图标\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553311.jpg\" id=\"67b03b91a06hf\" class=\"image inline\">图标。</p></li><li id=\"6a229b20a05hs\"><p id=\"6a227410a01is\">输入<code data-tag=\"code\" class=\"code\">cmd</code>，然后在弹出的面板中单击<b data-tag=\"uicontrol\" id=\"51c53635a7ibp\" class=\"uicontrol\">命令提示符</b>。<img width=\"750\" placement=\"break\" alt=\"打开2019命令提示符\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553312.jpg\" id=\"129a4a51a0n79\" class=\"image break\"></p></li><li id=\"53ded121a05qx\"><p id=\"53ded122a0y2e\">在CMD命令提示符中，执行<code data-tag=\"code\" class=\"code\">ping 外部网站域名</code>命令，检查DNS解析是否正常。</p><p id=\"53ded123a0who\">以外部网站域名为www.aliyun.com为例，执行<code data-tag=\"code\" class=\"code\">ping www.aliyun.com</code>命令。</p><ul id=\"53ded124a09yc\"><li id=\"53ded125a085t\"><p id=\"53ded126a0dm7\">如果命令回显中，解析出域名对应的IP地址，如图所示，则表示DNS解析正常，您需要继续执行<a title=\"\" class=\"xref\" href=\"#3fdc3ad496a8v\">步骤三：排查Internet Explorer浏览器</a>。<img width=\"750\" placement=\"break\" alt=\"DNS域名解析正常\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553417.jpg\" id=\"1a810430a0le2\" class=\"image break\"></p></li><li id=\"53ded127a09qd\"><p id=\"53ded128a0lzc\">如果命令回显中，未解析出域名对应的IP地址，则表示DNS解析异常。此时，您需要执行下一步操作，处理DNS异常。</p></li></ul></li><li id=\"53ded12ba020i\"><p id=\"53ded12ca0aqe\">处理DNS异常。</p><ol id=\"53ded12da0fur\"><li id=\"53ded12ea0yfh\"><p id=\"20414780a0xn0\">在桌面左下角，单击<img width=\"25\" placement=\"inline\" alt=\"搜索图标\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553311.jpg\" id=\"20414781a0vhy\" class=\"image inline\">图标。</p></li><li id=\"70c2ecf1a05f6\"><p id=\"e3c67000a0x4k\">输入<code data-tag=\"code\" class=\"code\">ncpa.cpl</code>，然后在弹出的面板中单击<b data-tag=\"uicontrol\" id=\"51c55d4da7jie\" class=\"uicontrol\">ncpa.cpl</b>。</p></li><li id=\"53ded130a0ugy\"><p id=\"53ded131a0xl0\">在<b data-tag=\"uicontrol\" id=\"51c55d51a7aan\" class=\"uicontrol\">网络连接</b>页面，右键单击对应的网卡，然后单击<b data-tag=\"uicontrol\" id=\"51c55d53a7hic\" class=\"uicontrol\">属性</b>。<img placement=\"break\" alt=\"网络连接\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553426.jpg\" id=\"550f23b0a0gx4\" class=\"image break\"></p></li><li id=\"53ded133a08bd\"><p id=\"53ded134a0a55\">在<b data-tag=\"uicontrol\" id=\"51c55d58a7si6\" class=\"uicontrol\">以太网属性</b>页面，双击<b data-tag=\"uicontrol\" id=\"51c55d5aa7gov\" class=\"uicontrol\">Internet协议版本 4（TCP/IPv4）</b>。<img placement=\"break\" alt=\"以太网属性\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553431.jpg\" id=\"c9be0cd0a0tkx\" class=\"image break\"></p></li><li id=\"53ded136a0v3p\"><p id=\"53ded137a0jgl\">选择<b data-tag=\"uicontrol\" id=\"51c58454a74cr\" class=\"uicontrol\">使用下面的DNS服务器地址</b>，并将阿里云公共DNS地址223.5.5.5和223.6.6.6分别填入<b data-tag=\"uicontrol\" id=\"51c58456a7knb\" class=\"uicontrol\">首选DNS服务器</b>和<b data-tag=\"uicontrol\" id=\"51c58458a7ugu\" class=\"uicontrol\">备用DNS服务器</b>中。 </p><div id=\"53ded139a0f35\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"53ded13aa0tyl\">您也可以填写其他公共DNS服务器的IP地址。</p></div></div><img placement=\"break\" alt=\"填入DNS地址\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553433.jpg\" id=\"145beaf0a0q1j\" class=\"image break\"></li><li id=\"53ded13ba0b2z\"><p id=\"53ded13ca0cho\">单击<b data-tag=\"uicontrol\" id=\"51c58460a78da\" class=\"uicontrol\">确定</b>，然后依次关闭配置窗口。</p></li></ol></li><li id=\"53ded13da05rv\"><p id=\"53ded13ea0vra\">再次使用Internet Explorer浏览器访问外部网站。</p><ul id=\"53ded13fa0gmi\"><li id=\"53ded140a0dv2\"><p id=\"53ded141a0r16\">如果正常访问外部网站，则表示该问题已解决。</p></li><li id=\"53ded142a0at9\"><p id=\"53ded143a0qhi\">如果仍然不能访问外部网站，则您需要继续执行<a title=\"\" class=\"xref\" href=\"#3fdc3ad496a8v\">步骤三：排查Internet Explorer浏览器</a>。</p></li></ul></li></ol><h3 data-tag=\"h3\" id=\"3fdc3ad496a8v\" class=\"h3\"><b>步骤三：排查</b>Internet Explorer<b>浏览器</b></h3><p id=\"3fdc3ad5965fh\">如果DNS解析正常但是使用系统自带的Internet Explorer浏览器还是无法访问网站，可能是由于Internet Explorer浏览器配置或者兼容性等问题导致的，您可以尝试使用Chrome、Firefox或其他浏览器做访问对比测试。如果使用其他浏览器均可以正常访问网站，则需要通过重置Internet Explorer浏览器等方式来修复Internet Explorer浏览器。</p><p id=\"7d85ea30a06rr\">重置Internet Explorer浏览器的操作步骤如下：</p><ol id=\"83dcafe2a0m8t\"><li id=\"83dcafe0a0dym\"><p id=\"87dd9eb1a0ens\">远程登录ECS实例。</p><p id=\"87dd9eb2a06x8\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"894c22d1a083y\"><p id=\"894c22d0a01hy\">打开Internet Explorer浏览器。</p></li><li id=\"90a78740a0qnq\"><p id=\"90a76030a0qr8\">在Internet Explorer浏览器的右上角，单击<img height=\"25\" width=\"25\" placement=\"inline\" alt=\"IE设置按钮\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553435.jpg\" id=\"c7f69dd0a0j0p\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"51c5ab6fa7ov0\" class=\"uicontrol\">Internet 选项</b>。</p></li><li id=\"e70fe3c1a0kho\"><p id=\"e70fe3c0a0qew\">单击<b data-tag=\"uicontrol\" id=\"51c5ab73a79dm\" class=\"uicontrol\">高级</b>页签，然后单击<b data-tag=\"uicontrol\" id=\"51c5ab75a7hrz\" class=\"uicontrol\">重置</b>。<img placement=\"break\" alt=\"重置IE\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553437.jpg\" id=\"5daabe60a0jph\" class=\"image break\"></p></li><li id=\"3a853f01a0xsf\"><p id=\"3a853f00a0czj\">在提示框中，单击<b data-tag=\"uicontrol\" id=\"51c5ab7aa77tm\" class=\"uicontrol\">重置</b>。</p></li></ol><h3 data-tag=\"h3\" id=\"3fdc3ad796lt1\" class=\"h3\"><b>步骤四：排查IP安全策略等网络限制</b></h3><p id=\"3fdc3ad896af7\">如果经过上述步骤排查后，仍然无法访问网站。则您需检查Windows操作系统上是否配置了该外部网站相关的IP安全策略或者其他第三方网络管理软件，阻断了DNS解析或者对该外部网站相关的访问添加了限制，操作步骤如下：</p><ol id=\"3fdc3ad996a93\"><li id=\"3fdc3ada9692x\"><p id=\"0c5691e196j6a\">远程登录ECS实例。</p><p id=\"0c5691e296wfn\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"0e648a5196ox3\"><p id=\"b6ebb650a097g\">在桌面左下角，单击<img width=\"25\" placement=\"inline\" alt=\"搜索图标\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553311.jpg\" id=\"b6ebb651a05yv\" class=\"image inline\">图标。</p></li><li id=\"c31607f1a0kwy\"><p id=\"c035f270a0v5w\">输入<code data-tag=\"code\" class=\"code\">secpol.msc</code>，然后在弹出的面板中单击<b data-tag=\"uicontrol\" id=\"51c5d27fa7t7x\" class=\"uicontrol\">secpol.msc</b>。</p></li><li id=\"3fdc3adc965zj\"><p id=\"3fdc3add96gy2\">在<b data-tag=\"uicontrol\" id=\"51c5d283a7a7g\" class=\"uicontrol\">本地安全策略</b>页面，单击<b data-tag=\"uicontrol\" id=\"51c5d285a7m1p\" class=\"uicontrol\">IP安全策略，在本地计算机</b>，检查是否配置并指派了安全策略。 如果存在相关的IP安全策略，则需要暂停指派该策略。<img width=\"750\" placement=\"break\" alt=\"指派策略\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553446.jpg\" id=\"a9bcd080a0iqn\" class=\"image break\"></p></li><li id=\"3fdc3ae096i80\"><p id=\"a1dd551196r73\">再次使用Internet Explorer浏览器访问外部网站。</p><ul id=\"a1dd551296gqd\"><li id=\"a1dd551396v07\"><p id=\"a1dd551496gmf\">如果正常访问外部网站，则表示该问题已解决。</p></li><li id=\"a1dd551596gp0\"><p id=\"a1dd551696x1w\">如果仍然不能访问外部网站，则执行如下操作：</p><ol id=\"c5f8580196hz1\"><li id=\"c56a21c196rf5\"><p id=\"cad8352096172\">检查是否存在其他网络安全相关的软件设置了拦截或限制。如果存在，则解除限制后，重新访问该网站。</p></li><li id=\"d349c48196pty\"><p id=\"d349c48096a38\">检查Windows实例内的Time_Wait连接是否已释放，如果未释放则会导致访问外部网站失败，则您需要继续处理该问题，具体操作，请参见<a class=\"\" href=\"/zh/ecs/support/what-do-i-do-if-a-windows-instance-cannot-access-external-networks-when-a-large-number-of-connections-stay-in-the-time-wait-state\">Windows系统的ECS实例Time_Wait连接不释放导致访问外网失败</a>。</p></li></ol></li></ul></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-cannot-access-an-external-network-from-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>在Windows实例无法访问外部网络如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在Windows实例无法访问外部网络如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-02 11:28:02</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"f9ae2d508ful2\"><p id=\"f9b559408fmdi\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍了在Windows实例中访问外部网络不通的处理方法。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"0e2c0fc0ac4ql\">在Windows系统的ECS实例中，无法使用浏览器访问外部网络，如图所示。<img id=\"0e2c0fc1acumf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p561712.jpg\" alt=\"问题现象\" placement=\"break\" width=\"750\" class=\"image break\"></p><h2 id=\"4rM4I\">可能原因</h2><p id=\"29782110acdhi\">造成该问题的原因与<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-access-a-windows-instance-from-the-internet\">Windows实例通过外部访问网络不通的处理</a>类似，常见问题原因参考如下。</p><ul id=\"29782111acn2f\"><li id=\"29782112acui5\"><p id=\"29782113ac2mc\">公网ISP运营商的管控。</p></li><li id=\"29782114ac254\"><p id=\"29782115acnmz\">Windows实例异常行为，导致阿里云安全策略阻止该Windows实例访问外部网络。</p></li><li id=\"29782116ac6z6\"><p id=\"29782117ac70l\">Windows实例安全组配置错误。</p></li><li id=\"29782118acle1\"><p id=\"29782119ac0lc\">Windows实例性能问题。</p></li><li id=\"2978211aacfw0\"><p id=\"2978211bacnug\">Windows实例上防火墙策略限制。</p></li><li id=\"2978211cack71\"><p id=\"2978211dac6mi\">Windows实例安装的第三方杀毒软件存在限制。</p></li><li id=\"2978211eac8uo\"><p id=\"2978211fac29o\">Windows实例被病毒、木马影响。</p></li><li id=\"29782120aclip\"><p id=\"29782121acls8\">Windows实例TCP/IP协议栈自身存在Bug或者兼容性问题。</p></li><li id=\"29782122acm84\"><p id=\"29782123ac60a\">Windows实例安装了路由与远程服务后，配置错误。</p></li><li id=\"29782124acoxd\"><p id=\"29782125ac5nk\">Windows实例路由表、网络配置错误。</p></li></ul><h2 id=\"AywdZ\">解决方案</h2><p id=\"f9b5ce738fc3g\" data-tag=\"h3\" class=\"h3\">您可以通过对比测试和使用工具抓取网络包来进行问题排查，并针对性解决问题，方法如下：</p><div type=\"note\" id=\"32f442a1acviz\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"32f442a2aci84\">本文操作以Windows Server 2019 数据中心版 64位中文版操作系统为例进行测试，具体操作以您实际的操作系统版本为准。</p></div></div><h3 id=\"32f442a3acgh3\" data-tag=\"h3\" class=\"h3\"><b>方法一：对比测试排查</b></h3><p id=\"32f442a4ac7dq\">您可以根据实际情况，选择对应的排查步骤。</p><h4 id=\"32f442a7ac9cc\"><b>在云安全中心中检查Windows实例状态，确认Windows状态正常</b></h4><ol id=\"32f442a8acwpl\"><li id=\"32f442a9acya0\"><p id=\"32f442aaactw2\">在云安全中心，您可以先在云安全中心的<b data-tag=\"uicontrol\" id=\"a6ea50f0acxzx\" class=\"uicontrol\"><b>主机资产</b></b>页面查看实例是否存在风险。</p><p id=\"32f442abach95\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/security-center/user-guide/manage-servers\">管理服务器</a>。<img id=\"32f442acacflt\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p561985.jpg\" alt=\"云安全中心\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"32f442adac9yr\"><p id=\"32f442aeachb5\">您可以通过单击目标实例ID进入实例详情页面，查看ECS实例的漏洞信息、应用漏洞信息、防御信息、安全设置、安全告警处理等内容，然后针对相关告警或通知处理问题使Windows实例状态恢复正常。<img id=\"32f442afacrrr\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p561992.jpg\" alt=\"云安全中心实例详情页面zh\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"32f442b0acaiq\"><p id=\"32f442b1acryy\">检查Windows实例是否与该网站所在的特定网段网络不通。</p><p id=\"32f442b2actow\">如果仅Windows实例与该网站所在的特定网段网络不通，则可能与运营商管控有关。此时，您可以在CMD命令提示符中使用<code data-tag=\"code\" class=\"code\">ping 网段</code>命令对相关的多个网段进行对比测试，操作步骤如下：</p><div type=\"note\" id=\"32f442b3ace51\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"32f469b0aco4z\"><code data-tag=\"code\" class=\"code\">ping 网段</code>命令仅针对特定网络不通而不适合排查所有网络故障问题。</p></div></div><ol id=\"32f469b1acwz8\"><li id=\"32f469b2ac55k\"><p id=\"32f469b3ac90k\">打开命令提示符。</p><ol id=\"32f469b4acoab\"><li id=\"32f469b5acw6n\"><p id=\"32f469b6ac5l7\">在桌面左下角，单击<img id=\"32f469b7ac1dn\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562062.jpg\" alt=\"搜索图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，然后在搜索框输入<code data-tag=\"code\" class=\"code\">cmd</code>。<img id=\"32f469b8acf4y\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562048.jpg\" alt=\"输入cmd\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"32f469b9acyki\"><p id=\"32f469baac0hw\">单击<b data-tag=\"uicontrol\" id=\"88962330aci1f\" class=\"uicontrol\"><b>命令提示符</b></b>。</p><p id=\"32f469bbacnjk\">进入命令提示符。<img id=\"32f469bcact88\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562050.jpg\" alt=\"打开命令提示符\" placement=\"break\" class=\"image break\"></p></li></ol></li><li id=\"32f469bdac84w\"><p id=\"32f469beac41v\">在命令提示符中，执行<code data-tag=\"code\" class=\"code\">ping 网段</code>命令，对相关的多个网段进行对比测试。<img id=\"32f469bfaczik\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562054.jpg\" alt=\"ping不同网段\" placement=\"break\" class=\"image break\"></p></li></ol></li></ol><h4 id=\"32f469c1ac96n\"><b>在命令提示符中，执行</b><code data-tag=\"code\" class=\"code\"><b>ipconfig /all</b></code><b>命令，检查网卡配置是否正确</b></h4><ol id=\"32f469c2acp6a\"><li id=\"d2d11871acyt0\"><p id=\"ef860890acsr4\">打开命令提示符。</p><ol id=\"0ab4f4f0adwdm\"><li id=\"0ab4f4f1aduke\"><p id=\"0ab4f4f2adiam\">在桌面左下角，单击<img id=\"0ab4f4f3adp3e\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562062.jpg\" alt=\"搜索图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，然后在搜索框输入<code data-tag=\"code\" class=\"code\">cmd</code>。<img id=\"0ab4f4f4adk1i\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562048.jpg\" alt=\"输入cmd\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"0ab4f4f5adu0u\"><p id=\"0ab4f4f6ad52j\">单击<b data-tag=\"uicontrol\" id=\"4078d890adi9l\" class=\"uicontrol\"><b>命令提示符</b></b>。</p><p id=\"0ab4f4f7adham\">进入命令提示符。<img id=\"0ab4f4f8adaw3\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562050.jpg\" alt=\"打开命令提示符\" placement=\"break\" class=\"image break\"></p></li></ol></li><li id=\"e9ad2571ac33n\"><p id=\"e9ad2570acr2y\">执行<code data-tag=\"code\" class=\"code\">ipconfig /all</code>命令，查看网卡配置信息。<img id=\"32f469cfaczdq\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562061.jpg\" alt=\"检查网卡配置信息\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"32f469d0actgs\"><p id=\"32f469d1ac59p\">在桌面输入<code data-tag=\"code\" class=\"code\">ncpa.cpl</code>打开网络共享与管理中心，检查网卡状态是否正常收发。</p><ol id=\"32f469d2ac15x\"><li id=\"32f469d3acjgu\"><p id=\"32f469d4acz3z\">桌面左下角，单击<img id=\"32f469d5ac356\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562062.jpg\" alt=\"搜索图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，在搜索框输入<code data-tag=\"code\" class=\"code\">ncpa.cpl</code>，然后单击<b data-tag=\"uicontrol\" id=\"8adb02c0acg32\" class=\"uicontrol\"><b>ncpa.cpl</b></b>。<img id=\"32f469d6acxba\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562070.jpg\" alt=\"打开网络共享中心\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"32f469d7ac0qt\"><p id=\"32f469d8aczru\">在<b data-tag=\"uicontrol\" id=\"be7c7aa0acjm0\" class=\"uicontrol\"><b>网络连接</b></b>页面，双击目标网卡。</p><p id=\"32f469d9acjcn\">查看网卡状态是否正常收发，如果正常，则表示网卡正常启用。<img id=\"32f469daacq5l\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562079.jpg\" alt=\"查看网络收发\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li></ol><h4 id=\"32f469dcac0ku\"><b>在命令提示符中，通过</b><code data-tag=\"code\" class=\"code\"><b>nslookup</b></code><b>或</b><code data-tag=\"code\" class=\"code\"><b>ping</b></code><b>命令，检查是否存在DNS解析问题</b></h4><p id=\"32f469ddacfvt\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-domain-name-of-a-website-is-resolved-to-different-ip-addresses-on-a-windows-instance\">Windows实例内部自定义域名解析与本地网络域名解析不一致导致无法访问网站如何处理？</a><span data-tag=\"ph\" id=\"32f469deac3kq\" props=\"china\" data-cond-props=\"china\" class=\"ph\">或<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/when-you-ping-the-internet-address-of-a-windows-instance-the-system-prompts-general-fault\">Windows实例ping外网地址提示“一般故障”</a></span>。\n</p><h4 id=\"32f469e0ackur\"><b>检查Windows实例是否存在性能问题</b></h4><p id=\"32f469e1ac3tr\">Windows实例可能存在CPU资源占用高、内存耗尽、带宽占用满、网络动态端口耗尽等问题，您可以通过如下方式进行检查：</p><ul id=\"56e38483b7k86\"><li id=\"56e38480b7jih\"><p id=\"4ae96aa0b7phb\">使用工具进行分析，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/introduction-to-windows-memory-analysis-tools\">Windows系统内存分析工具的介绍</a>。</p></li><li id=\"56e38481b7qzs\"><p id=\"507b0b90b7fv2\">通过ECS控制台或云监控控制台查看Windows实例相关性能信息，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/view-the-monitoring-information-of-an-ecs-instance\">查看实例监控信息</a>。\n</p></li></ul><h4 id=\"32f469e3acyyo\"><b>检查Windows实例的安全组规则是否正确</b></h4><p id=\"32f469e4ack66\">您可以查看Windows实例的安全组规则，如果配置错误，您需要更改安全组配置为允许所有网络通信进行测试。</p><ul id=\"32f469e5acgxj\"><li id=\"32f469e6acomr\"><p id=\"32f469e7ac53e\">查看Windows实例安全组规则的具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/view-instance-information#section-9va-vyz-r9p\">在实例详情页面查看单个实例信息</a>。</p></li><li id=\"32f469e8acoeh\"><p id=\"32f469e9acocg\">添加或修改安全组规则的具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>或<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/modify-a-security-group-rule\">修改安全组规则</a>。</p></li></ul><h4 id=\"32f469ebacyb6\"><b>检查防火墙策略配置是否正确</b></h4><p id=\"32f469ecacelh\">您可以先禁用Windows实例上的防火墙，然后测试是否可以正常访问。如果防护墙禁用后，可以访问，则您需要检查防火墙策略配置，具体操作如下：</p><ol id=\"32f469edaco9n\"><li id=\"32f469eeacf6b\"><p id=\"32f469eface16\">在桌面左下角，选择<b data-tag=\"uicontrol\" id=\"2534f5f0actsx\" class=\"uicontrol\"><img id=\"12a1b630aczwn\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562158.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"><b> &gt; 服务器管理器</b></b>。<img id=\"32f469f0ac7f4\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562161.jpg\" alt=\"打开服务器管理器\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"32f469f1acbts\"><p id=\"32f469f2acyl7\">在<b data-tag=\"uicontrol\" id=\"94911be0acm6k\" class=\"uicontrol\"><b>服务器管理器</b></b>页面，单击左侧导航栏的<b data-tag=\"uicontrol\" id=\"9be02440acgmj\" class=\"uicontrol\"><b>本地服务器</b></b>。</p></li><li id=\"32f469f3acv3f\"><p id=\"32f469f4acg2x\">在<b data-tag=\"uicontrol\" id=\"c5dc47b0acqb7\" class=\"uicontrol\"><b>属性</b></b>区域，单击<b data-tag=\"uicontrol\" id=\"c84d47b0acex2\" class=\"uicontrol\"><b>Windows Defender防火墙</b></b>右侧的防火墙状态。<img id=\"32f469f5acbar\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562167.jpg\" alt=\"查看防火墙策略\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"32f469f6acs3b\"><p id=\"32f469f7ac68o\">在<b data-tag=\"uicontrol\" id=\"734bd8c0actna\" class=\"uicontrol\"><b>Windows安全中心</b></b>页面，按照界面操作，关闭防火墙。<img id=\"32f469f8ac2j9\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562171.jpg\" alt=\"关闭防火墙\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"32f469f9aclgj\"><p id=\"32f469faacqid\">重新访问网站。</p><p id=\"32f469fbacjwd\">如果可以正常访问，则您需要继续检查防火墙策略配置。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/configure-windows-firewall-rules-for-windows-server-instances\">Windows Server系统的ECS实例防火墙策略的配置方法</a>。</p></li></ol><h4 id=\"32f469fdacju9\"><b>禁用或者卸载Windows实例中第三方杀毒软件后，重新访问网站</b></h4><p id=\"393a65d1b75d1\">您可以参考第三方杀毒软件对应的相关文档禁用或者卸载Windows实例中的第三方杀毒软件，然后重新访问网站。</p><h4 id=\"32f469ffacamk\"><b>运行Windows Update程序，安装最新版本的补丁</b></h4><p id=\"32f46a00ac1yq\">该操作可以排除操作系统TCP/IP协议栈自身问题，操作步骤如下：</p><ol id=\"32f46a01acc78\"><li id=\"32f46a02ach18\"><p id=\"32f46a03acxg4\">在桌面左下角，单击<img id=\"32f46a04acexg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562062.jpg\" alt=\"搜索图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，在搜索框输入<code data-tag=\"code\" class=\"code\">update</code>，然后单击<b data-tag=\"uicontrol\" id=\"15f398f0ac9us\" class=\"uicontrol\"><b>检查更新</b></b>。</p></li><li id=\"32f46a05acdgn\"><p id=\"32f46a06acswj\">在<b data-tag=\"uicontrol\" id=\"226f17d0ac1wv\" class=\"uicontrol\"><b>Windows更新</b></b>页面，单击<b data-tag=\"uicontrol\" id=\"1fd1d7b0acoew\" class=\"uicontrol\"><b>下载</b></b>，安装最新版本的补丁。<img id=\"32f46a07acegz\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562184.jpg\" alt=\"打开updata更新\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"32f46a08ac2ly\"><p id=\"32f46a09acbzq\">重新访问网站。</p></li></ol><h3 id=\"32f46a0aach8a\" data-tag=\"h3\" class=\"h3\"><b>方法二：工具抓取网络包进行分析</b></h3><p id=\"32f46a0baczag\">在Windows实例上使用抓包工具（例如Wireshark）抓取数据包，根据抓包结果分析网络包中是否存在DNS解析、ARP解析或者TCP连接无法建立的问题。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-access-a-windows-instance-from-the-internet\">Windows实例通过外部访问网络不通的处理</a>。</p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/solution-of-instances-cannot-be-started/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span>实例无法启动的解决方案</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>实例无法启动的解决方案</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2021-02-10 15:51:17</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/repair-instance-of-the-operating-system-can-t-start-the-operational-guidelines-for-school-official-cites-use-of-the-problem\">修复实例操作系统无法启动问题的操作指南</a></li>\n <li><a href=\"/zh/ecs/support/linux-instance-of-key-users-of-the-system-does-not-exist\">Linux实例中关键的系统用户不存在</a></li>\n <li><a href=\"/zh/ecs/support/ssh-access-defect-in-linux-can-not-connect-the-remote-instance\">SSH的访问权限异常导致无法远程连接Linux实例</a></li>\n <li><a href=\"/zh/ecs/support/unable-to-use-ssh-remote-connection-ubuntu-instances-of-ecs\">无法使用SSH远程连接Ubuntu系统的ECS实例</a></li>\n <li><a href=\"/zh/ecs/support/since-the-launch-of-the-ssh-service-is-not-set-boot\">SSH服务未设置开机时自启动</a></li>\n <li><a href=\"/zh/ecs/support/how-to-properly-configure-linux-instance-piece-of-equipment-in-the-or-etc-or-fstab-file\">如何正确配置Linux实例/etc/fstab文件中的块设备</a></li>\n <li><a href=\"/zh/ecs/support/modify-the-file-in-linux-instance-methods-for-unix-format\">Linux实例中修改文件为Unix格式的方法</a></li>\n <li><a href=\"/zh/ecs/support/linux-instance-grub-launch-configuration-errors\">Linux实例的grub启动配置错误</a></li>\n <li><a href=\"/zh/ecs/support/the-cloud-disk-capacity-when-instance-cannot-be-started\">当实例无法启动时扩容云盘</a></li>\n <li><a href=\"/zh/ecs/support/side-of-cloud-system-problems\">云系统侧出现问题</a></li>\n <li><a href=\"/zh/ecs/support/windows-instances-in-the-system-exists-residual-xen-drivers\">Windows实例系统内存在Xen驱动残留</a></li>\n <li><a href=\"/zh/ecs/support/abnormal-instance-startup-common-errors-with-the-corresponding-solutions\">实例启动异常常见错误与对应解决方案</a></li>\n <li><a href=\"/zh/ecs/support/examples-of-start-or-stop-abnormal-common-problems\">实例启动/停止异常常见问题</a></li>\n <li><a href=\"/zh/ecs/support/linux-system-running-instances-of-ecs-caton-appear-in-or-var-or-log-or-messages-log-info-task-jbd2-or-vda1-3-and-6-blocked-for-wining-120-seconds-error\">Linux系统的ECS实例运行卡顿，在/var/log/messages日志中出现“INFO:task jbd2/vda1-8:366 blocked for more than 120 seconds”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/linux-instances-of-ecs-system-no-response-the-system-log-in-bug-soft-lockup-cpu-0-stuck-for-61-s-error\">Linux系统的ECS实例系统无响应，系统日志中出现“BUG: soft lockup – CPU#0 stuck for 61s”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/linux-system-of-ecs-instance-the-system-log-in-i-or-o-error-blk-update-request-xxxx-error\">Linux系统的ECS实例中，系统日志中出现“blk_update_request: I/O error XXXX”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/linux-system-of-ecs-example-or-var-or-log-or-messages-log-in-corruption-fs-error-xxx-ext4-find-entry-xxx-error\">Linux系统的ECS实例中，/var/log/messages日志出现“EXT4-fs error (device XXX): __ext4_find_entry:XXX”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/linux-instances-of-ecs-internal-operating-system-boot-failure-prompt-uefi-interactive-shell-error\">Linux系统的ECS实例内部操作系统启动失败，提示“UEFI Interactive Shell”错误怎么办？</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/linux-instances-of-ecs-internal-operating-system-boot-failure-prompt-uefi-interactive-shell-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/solution-of-instances-cannot-be-started/\">实例无法启动的解决方案</a></span>\n <span>Linux系统的ECS实例内部操作系统启动失败，提示“UEFI Interactive Shell”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例内部操作系统启动失败，提示“UEFI Interactive Shell”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:34:09</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2321171\"><p id=\"0bd70817d7bb5\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍Linux系统的ECS实例内部操作系统启动失败，提示“UEFI Interactive Shell”错误的问题原因和解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"a37e8730d8hsb\" class=\"section\"><h2 data-tag=\"p\" id=\"0bd70816d7pj7\" class=\"p\"><b>问题现象</b></h2><p id=\"2028af80d8npk\">启动Linux系统的ECS实例时，实例内部操作系统启动失败，通过VNC远程连接实例时提示“UEFI Interactive Shell”错误。</p><img id=\"c15cff00d8f30\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3745021861/p627965.png\" alt=\"UEFI Interactive Shell\" placement=\"break\" class=\"image break\"></section><section id=\"46ff7710d87uj\" class=\"section\"><h2 id=\"9d477e80d8akc\"><b>问题原因</b></h2><p id=\"ca384cb1d8uww\">出现UEFI Interactive Shell表示通过UEFI模式启动ECS实例失败，可能有以下原因：</p><ul id=\"fcdf5f02d8qg2\"><li id=\"fcdf5f00d8oe6\"><p id=\"1b277240d8q4v\">实例的镜像不支持UEFI，但是镜像的启动模式被修改为UEFI。该错误通常出现在启动自定义镜像创建的ECS实例时，您可以通过修改镜像的启动方式来解决该问题，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#6e301410d8ham\">修改镜像的启动方式为BIOS</a>。</p></li><li id=\"1df697d1d8umm\"><p id=\"1e3352b0d82km\">实例的镜像支持UEFI，但是镜像内部UEFI固件损坏。您可以通过修复UEFI固件来解决该问题。具体操作，请参见<a title=\"\" class=\"xref\" href=\"#8638a840d8hyq\">修复UEFI固件</a>。</p></li></ul></section><section id=\"485a7330d8ij7\" class=\"section\"><h2 id=\"9e931150d85sp\"><b>解决方案</b></h2><p id=\"6c05ba00d8omq\">您可以参考以下步骤，修改镜像的启动模式或修复UEFI固件来解决该问题。</p><section id=\"6e301410d8ham\" class=\"section\"><h3 id=\"cced2190d8i03\"><b>修改镜像的</b><b>启动模式</b><b>为BIOS</b></h3><p id=\"a731dc40d9tqp\">如果不需要使用UEFI启动模式或镜像本身不支持UEFI，您可以将自定义镜像启动模式修改为BIOS，并重新使用该镜像创建实例以解决该问题。</p><ol id=\"e97f6e82d80ok\"><li id=\"e97f6e80d8956\"><p id=\"e7c51450d8frf\">释放该异常ECS实例。</p><p id=\"3c4aead0d89mb\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/release-an-instance\">释放实例</a>。</p></li><li id=\"49191301d8oaj\"><p id=\"49191300d8wgm\">修改镜像的启动方式为BIOS。</p><p id=\"fb8c0ec0d8ill\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/best-practices-for-using-the-uefi-boot-mode-and-bios-boot-mode#e9c8d780cc1jp\">修改镜像的启动模式</a>。</p></li><li id=\"5919cb90d8ttu\"><p id=\"5919a480d8cu3\">使用该镜像创建实例。</p><p id=\"ee4d66e0d9lpe\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-an-ecs-instance-by-using-a-custom-image\">使用自定义镜像创建实例</a>。</p></li><li id=\"cdae9260d99os\"><p id=\"cdae6b50d9rns\">远程连接实例，若可以正常连接，并且不再出现“UEFI Interactive Shell”错误，说明该问题已解决。</p><p id=\"f7a1c6d0d95va\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li></ol></section><section id=\"8638a840d8hyq\" class=\"section\"><h3 id=\"b9e5c341d8nof\"><b>修复UEFI固件</b></h3><p id=\"c9cb4840d9vls\">如果该实例规格和镜像支持UEFI，并且您需要使用UEFI模式启动，请参考以下步骤修复UEFI固件。</p><ol id=\"99734432d8jqq\"><li id=\"99734430d83q1\"><p id=\"bbbd90b1d8vlt\">卸载异常ECS实例的系统盘，并将该磁盘作为数据盘挂载到正常ECS实例中。</p><p id=\"9c496ea0d8teg\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-do-i-restore-system-disk-data\">如何恢复系统盘数据？</a>的步骤一~步骤三。</p></li><li id=\"65994541d8llz\"><p id=\"65994540d8seh\">查看异常ECS实例已安装的efi安装包和<code data-tag=\"code\" class=\"code\">/boot/efi/EFI/centos</code>目录下的efi固件是否完整。</p><ol id=\"3bcd1931d8zrm\"><li id=\"2095c861d8stb\"><p id=\"2095c860d81on\">执行如下命令，查看已安装的efi安装包是否完整。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"a14d51b0d8d2c\" class=\"pre codeblock language-plaintext\"><code>rpm -qa |grep -i efi</code></pre><p id=\"70db0440d80yy\">返回结果类似如下所示。</p><img id=\"58eb6460d89bm\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3745021861/p628252.png\" alt=\"rpm包\" placement=\"break\" class=\"image break\"><p id=\"bd7b4ca0d8adg\">您可以将返回结果与相同Linux发行版的ECS实例中efi安装包进行对比：</p><ul id=\"6b11bc11d8kp0\"><li id=\"6a76dba0d8tpd\"><p id=\"6a76b490d8ur3\">若已安装的efi安装包相同，请继续执行步骤<a title=\"\" class=\"xref\" href=\"#a3624f01d8z28\">b</a>。</p></li><li id=\"830e0621d8svu\"><p id=\"8aee5200d8niq\">若已安装的efi安装包有缺失，请执行<code data-tag=\"code\" class=\"code\">sudo yum install</code>命令安装对应的efi安装包。</p><p id=\"a1f4f170d8s98\">如安装grub2-efi-x64安装包命令如下。</p><pre id=\"11xenm\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>sudo yum install grub2-efi-x64-2.02-0.87.el7.centos.6.x86_64</code></pre></li></ul></li><li id=\"a3624f01d8z28\"><p id=\"a3624f00d8o10\">执行如下命令，查看<code data-tag=\"code\" class=\"code\">/boot/efi/EFI/centos</code>目录下的efi固件是否完整。</p><pre id=\"quphgm\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>cd /boot/efi/EFI/centos &amp;&amp; ll</code></pre><p id=\"ccbf6160d80n5\">返回结果类似如下所示。</p><img id=\"5ec30f00d8vcp\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3745021861/p628253.png\" alt=\"efi固件\" placement=\"break\" class=\"image break\"><p id=\"d131afa0d8xgt\">您可以将返回结果与相同Linux发行版的ECS实例中efi固件进行对比：</p><ul id=\"d1737392d82bk\"><li id=\"d1737393d8e24\"><p id=\"d1737394d8una\">若已安装的efi固件相同，请继续执行步骤<a title=\"\" class=\"xref\" href=\"#9f271321d89ty\">3</a>。</p></li><li id=\"d1737395d8rb7\"><p id=\"d1737396d8syu\">若已安装的efi固件有缺失，请执行<code data-tag=\"code\" class=\"code\">sudo yum install</code>命令安装对应的efi固件安装包。</p><p id=\"6658d270d8e53\">建议您重新安装grub2-efi-x64安装包，命令如下。</p><pre id=\"6fcb08f0d80fj\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>sudo yum install grub2-efi-x64-2.02-0.87.el7.centos.6.x86_64</code></pre></li></ul></li></ol></li><li id=\"9f271321d89ty\"><p id=\"9f271320d8t86\">在异常ECS实例中恢复挂载系统盘。</p><p id=\"716bf5a02fwzo\" data-spm-anchor-id=\"a2c4g.450291.0.i3.6110a1bfRwurO0\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-do-i-restore-system-disk-data\">如何恢复系统盘数据？</a>的步骤五。</p></li><li id=\"4f336060d8blz\"><p id=\"4d2c6cd0d8rp8\">远程连接实例，若可以正常连接，并且不再出现“UEFI Interactive Shell”错误，说明该问题已解决。</p><p id=\"274a8d40d9o6w\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li></ol></section></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/side-of-cloud-system-problems", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/solution-of-instances-cannot-be-started/\">实例无法启动的解决方案</a></span>\n <span>云系统侧出现问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>云系统侧出现问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2022-12-29 09:59:57</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n\n      <main role=\"main\">\n         <article role=\"article\" aria-labelledby=\"title_73x_lhd_33n\">\n            \n            <div class=\"body conbody\" id=\"conbody-chw-cq6-9dc\">\n               <p class=\"shortdesc\">如果云系统侧出现问题导致ECS实例无法创建或者启动，您可以通过本文了解此类问题的解决方案。</p>\n               <section class=\"section\" id=\"section-t6d-9pp-1hj\">\n                  <h2 class=\"title sectiontitle\" id=\"title-oz9-0zn-983\">前提条件</h2>\n                  <div class=\"p\" id=\"p-brm-7vp-wqv\">您已通过自助问题排查功能中的<span class=\"ph menucascade\" id=\"menucascade-uzn-d0j-2n8\"><span class=\"ph uicontrol\" id=\"uicontrol-5a9-9af-cod\">实例问题排查</span><abbr> &gt; </abbr><span class=\"ph uicontrol\" id=\"uicontrol-zur-x0v-48m\">实例无法连接或启动异常</span><abbr> &gt; </abbr><span class=\"ph uicontrol\" id=\"uicontrol-uqc-dvy-odg\">实例启动异常</span></span>诊断项对ECS实例进行了诊断排查，诊断结果中有以下一项或多项检查未通过：\n                     <ul class=\"ul\" id=\"ul-hic-jya-b9h\">\n                        <li class=\"li\" id=\"li-v8b-5a7-7x0\">实例库存资源</li>\n                        <li class=\"li\" id=\"li-5oi-8ou-2eu\">其他云系统问题\n                           <ul class=\"ul\" id=\"ul-e3o-lsk-r2u\">\n                              <li class=\"li\" id=\"li-17d-1v1-zss\">快照或镜像问题</li>\n                              <li class=\"li\" id=\"li-iet-kcy-xmd\">实例私网IP资源问题</li>\n                              <li class=\"li\" id=\"li-u8l-s82-n0g\">磁盘问题</li>\n                              <li class=\"li\" id=\"li-nw9-rml-8vs\">虚拟化问题</li>\n                           </ul>\n                        </li>\n                     </ul>实例诊断的具体操作，请参见<a href=\"/zh/ecs/user-guide/examples-of-health-diagnosis-1#task-2542570\" title=\"\">诊断实例的健康状态</a>。\n                  </div>\n               </section>\n               <section class=\"section\" id=\"section-1nf-g5t-dls\">\n                  <h2 class=\"title sectiontitle\" id=\"title-7hz-wse-wrp\">实例库存资源</h2>\n                  <p class=\"p\" id=\"p-rqa-9nr-slx\">问题描述：创建或启动实例时，在您指定的可用区内可能会存在指定的实例规格的库存资源不足，导致实例创建或启动失败。</p>\n                  <div class=\"p\" id=\"p-jwa-7id-8t4\">解决方案：\n                     <ul class=\"ul\" id=\"ul-fj3-t4m-fi9\">\n                        <li class=\"li\" id=\"li-v95-nzt-5vx\">在不更换实例规格的情况下，更换实例的可用区。</li>\n                        <li class=\"li\" id=\"li-zs1-9yn-lvr\">在不更换可用区的情况下，更换实例的规格。</li>\n                        <li class=\"li\" id=\"li-pyh-8bo-yj7\">尝试使用<a href=\"/zh/ecs/user-guide/create-authorized-alternate#task-2201178\" title=\"\">授权候补</a>功能。\n                        </li>\n                     </ul>\n                  </div>\n               </section>\n            </div>\n         </article>\n      </main>\n   \n\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-cloud-disk-capacity-when-instance-cannot-be-started", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/solution-of-instances-cannot-be-started/\">实例无法启动的解决方案</a></span>\n <span>当实例无法启动时扩容云盘</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>当实例无法启动时扩容云盘</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2022-04-29 15:19:04</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n\n      <main role=\"main\">\n         <article role=\"article\" aria-labelledby=\"title_wfq_qcx_7zn\">\n            \n            <div class=\"body taskbody\" id=\"taskbody-pk9-sxc-jwe\">\n               <p class=\"shortdesc\">当Linux实例无法启动时，实例健康诊断工具诊断出实例云盘的inode使用率或者空间使用率过高。此时，您可以通过实例健康诊断工具进行问题修复。</p>\n               <div class=\"section prereq p\" id=\"prereq-bsw-8wu-4gs\">\n                  <div class=\"tasklabel\">\n                     <h2 class=\"sectiontitle tasklabel\" id=\"h2-url-1\">前提条件</h2>\n                  </div>\n                  <ul class=\"ul\" id=\"ul-93e-qhn-eom\">\n                     <li class=\"li\" id=\"li-izq-gd6-6vb\">ECS实例已通过实例健康诊断工具诊断出云盘的inode使用率或空间使用率过高的问题。</li>\n                     <li class=\"li\" id=\"li-iyj-pmz-fpy\">ECS实例资源需要符合以下条件。\n                        <table class=\"table\" id=\"table-0rs-opi-pem\">\n                           <caption></caption>\n                           <colgroup>\n                              <col style=\"width:25%\">\n                              <col style=\"width:75%\">\n                           </colgroup>\n                           <thead class=\"thead\" id=\"thead-xz3-5ps-6ts\">\n                              <tr id=\"row-d7x-8wc-bgy\">\n                                 <th class=\"entry\" id=\"task-2043381-entry-u5g-2x5-w0b\">资源</th>\n                                 <th class=\"entry\" id=\"task-2043381-entry-2xa-qt7-3t3\">限制条件</th>\n                              </tr>\n                           </thead>\n                           <tbody class=\"tbody\" id=\"tbody-btq-ati-yne\">\n                              <tr id=\"row-xe4-4id-9r6\">\n                                 <td class=\"entry\" id=\"entry-cgv-0yf-zeg\">实例</td>\n                                 <td class=\"entry\" id=\"entry-hru-5jy-10b\">\n                                    <ul class=\"ul\" id=\"ul-g81-9ae-gq0\">\n                                       <li class=\"li\" id=\"li-qpq-ar7-luu\">实例为I/O优化实例。</li>\n                                       <li class=\"li\" id=\"li-x27-mn0-8vd\">不支持以下实例规格：ecs.ebmc4.8xlarge、ecs.ebmhfg5.2xlarge、ecs.ebmg5.24xlarge。</li>\n                                    </ul>\n                                 </td>\n                              </tr>\n                              <tr id=\"row-ayd-1lv-p5t\">\n                                 <td class=\"entry\" id=\"entry-kls-wa9-tfy\">云盘</td>\n                                 <td class=\"entry\" id=\"entry-bjs-rq5-29u\">\n                                    <ul class=\"ul\" id=\"ul-e16-z2s-bgb\">\n                                       <li class=\"li\" id=\"li-0uf-dqs-qe0\">云盘状态为<span class=\"ph uicontrol\" id=\"uicontrol-742-bmp-uo9\">使用中</span>（In Use）。\n                                       </li>\n                                       <li class=\"li\" id=\"li-sw1-hn3-13e\">云盘类型为ESSD云盘、SSD云盘或高效云盘。</li>\n                                       <li class=\"li\" id=\"li-9na-7cr-iym\">包年包月ECS实例续费降配后，当前计费周期的剩余时间内，不支持扩容实例的包年包月云盘。</li>\n                                       <li class=\"li\" id=\"li-tjv-6dt-vjk\">云盘扩容后的容量不能超过云盘最高容量，具体请参见<span><a title=\"\" href=\"/zh/ecs/product-overview/limits#BlockStorageQuota\">块存储使用限制</a></span>。\n                                       </li>\n                                    </ul>\n                                    <div class=\"note notice note-notice\" id=\"note-jck-3pg-rw7\">\n                                       <div class=\"note-icon-wrapper\"><i class=\"icon-note notice\"></i></div>\n                                       <div class=\"note-content\"><strong>注意</strong> 一个已有分区采用了MBR分区格式，则不支持扩容到2 TiB及以上。如果您的MBR分区容量需要扩容到2 TiB以上，建议您先创建一块大于2 TiB的云盘并格式化为GPT分区，再将MBR分区中的数据拷贝到GPT分区中。格式化GPT分区操作，请参见<span><a title=\"\" href=\"/zh/ecs/user-guide/initialize-a-data-disk-that-is-larger-than-2-tib-in-size#section-a4m-psc-ydb\">分区格式化大于2 TiB数据盘</a></span>。\n                                       </div>\n                                    </div>\n                                 </td>\n                              </tr>\n                           </tbody>\n                        </table>\n                     </li>\n                  </ul>\n               </div>\n               <section class=\"section context\" id=\"context-e9y-704-t3z\">\n                  <div class=\"tasklabel\">\n                     <h2 class=\"sectiontitle tasklabel\" id=\"h2-url-2\">背景信息</h2>\n                  </div>\n                  <p class=\"p\" id=\"p-qwg-6cj-tsd\"><strong class=\"ph b\" id=\"b-0aw-vbq-o4q\">问题描述</strong>：Linux实例中云盘的inode使用率或者空间使用率过高，导致实例无法启动。\n                  </p>\n                  <p class=\"p\" id=\"p-qw3-jbt-d1i\"><strong class=\"ph b\" id=\"b-i25-2x4-3kj\">问题原因</strong>：Linux实例的云盘容量不足，您需要对云盘进行扩容。\n                  </p>\n                  <div class=\"note note note-note\" id=\"note-xyg-cks-zb7\">\n                     <div class=\"note-icon-wrapper\"><i class=\"icon-note note\"></i></div>\n                     <div class=\"note-content\"><strong>说明</strong> 您可以通过<code class=\"ph codeph\" id=\"codeph-kip-m01-890\">df -Th</code>命令查看云盘的空间使用率，通过<code class=\"ph codeph\" id=\"codeph-s60-aiq-eou\">df -i</code>命令查看云盘的inode使用率。\n                     </div>\n                  </div>\n                  <p class=\"p\" id=\"p-bb4-336-skn\">您可以通过实例健康诊断工具的修复盘进行扩容云盘，或者通过中转实例进行扩容云盘。具体操作，请参见<span><a title=\"\" href=\"#section-lo6-tpl-y8y\">通过修复盘扩容云盘</a></span>或<span><a title=\"\" href=\"#section-kl4-mjc-t12\">通过中转实例扩容云盘</a></span>。\n                  </p>\n               </section>\n               <section class=\"section\" id=\"section-lo6-tpl-y8y\">\n                  <h2 class=\"title sectiontitle\" id=\"title-h91-cpj-mfj\">通过修复盘扩容云盘</h2>\n                  <p class=\"p\" id=\"p-u4q-65u-p0y\">您可以在实例健康诊断工具中通过修复盘扩容云盘。</p>\n                  <ol class=\"ol steps\" id=\"steps-3qg-zgq-fjs\">\n                     <li class=\"li step stepexpand\" id=\"step-v1d-cna-ka9\"><span class=\"ph cmd\" id=\"cmd-qp7-on8-e0g\">在控制台为目标云盘创建快照。具体操作，请参见<span><a title=\"\" href=\"/zh/ecs/user-guide/step-1-resize-a-disk-to-extend-its-capacity#section-3hk-6ic-l4z\">步骤一：创建快照</a></span>。</span></li>\n                     <li class=\"li step stepexpand\" id=\"step-o3q-qc8-q2b\"><span class=\"ph cmd\" id=\"cmd-iju-ms6-1bm\">在控制台扩容目标云盘。具体操作，请参见<span><a title=\"\" href=\"/zh/ecs/user-guide/step-1-resize-a-disk-to-extend-its-capacity#section-aqh-w5c-3gz\">步骤二：在控制台扩容云盘容量</a></span>。</span></li>\n                     <li class=\"li step stepexpand\" id=\"step-qeb-wto-n05\"><span class=\"ph cmd\" id=\"d10e78\">远程连接问题实例。</span><div class=\"itemgroup info\" id=\"d10e80\">当ECS实例处于正在挂载修复盘的模式下时，只能通过VNC远程连接。具体操作，请参见<span><a title=\"无法使用Workbench和远程连接软件（例如PuTTY、Xshell、SecureCRT等）连接Linux实例时，您可以通过控制台的VNC远程连接登录实例，查看云服务器操作界面的实时状态。\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password#concept-sdk-1jx-wdb\">通过密码认证登录Linux实例</a></span>。\n                        </div>\n                     </li>\n                     <li class=\"li step stepexpand\" id=\"step-ses-beh-f3k\"><span class=\"ph cmd\" id=\"cmd-ywj-qks-9au\">运行以下命令查看实例的云盘情况。</span><div class=\"itemgroup info\" id=\"info-b6d-7zi-3a6\"><pre class=\"pre codeblock\" id=\"codeblock-kss-ksb-53l\"><code>fdisk -lu</code></pre><p class=\"p\" id=\"p-reu-yg3-bck\">在查询结果中找到/dev/vd*（例如/dev/vda、/vdb和/vdc），这些块存储设备为故障实例的云盘。</p>示例以系统盘（/dev/vda1）和数据盘（/dev/vdb1、/dev/vdc1）的三个分区为例，执行结果如下所示。<img class=\"image break\" id=\"image-fk8-obg-h92\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9339169951/p135832.png\" alt=\"查看云盘分区情况\"><table class=\"table\" id=\"table-z8h-d1n-rvh\">\n                              <caption></caption>\n                              <colgroup>\n                                 <col style=\"width:20%\">\n                                 <col style=\"width:20%\">\n                                 <col style=\"width:60%\">\n                              </colgroup>\n                              <thead class=\"thead\" id=\"thead-zg9-7qi-4in\">\n                                 <tr id=\"row-z0r-yky-j3y\">\n                                    <th class=\"entry\" id=\"task-2043381-entry-pfl-bgn-ee6\">序号</th>\n                                    <th class=\"entry\" id=\"task-2043381-entry-q4w-xij-94r\">分区</th>\n                                    <th class=\"entry\" id=\"task-2043381-entry-9sg-u58-2oh\">说明</th>\n                                 </tr>\n                              </thead>\n                              <tbody class=\"tbody\" id=\"tbody-g2w-1r0-7sd\">\n                                 <tr id=\"row-yx2-h3v-d2l\">\n                                    <td class=\"entry\" id=\"entry-qxw-jww-tgw\">①</td>\n                                    <td class=\"entry\" id=\"entry-po9-207-a9z\"><code class=\"ph codeph\" id=\"codeph-nti-lyt-hgn\">/dev/vda1</code></td>\n                                    <td class=\"entry\" id=\"entry-iq9-3tc-m2b\">系统盘，<span class=\"ph uicontrol\" id=\"uicontrol-14v-3zg-wof\">System</span>取值<span class=\"ph uicontrol\" id=\"uicontrol-h0i-t9k-mfh\">Linux</span>表示为MBR分区。\n                                    </td>\n                                 </tr>\n                                 <tr id=\"row-7vo-84j-9qm\">\n                                    <td class=\"entry\" id=\"entry-xxi-x2e-x98\">②</td>\n                                    <td class=\"entry\" id=\"entry-rwi-cwq-vsg\"><code class=\"ph codeph\" id=\"codeph-e00-f83-f5f\">/dev/vdb1</code></td>\n                                    <td class=\"entry\" id=\"entry-bzx-9po-xkx\">数据盘，<span class=\"ph uicontrol\" id=\"uicontrol-1os-zfo-g57\">System</span>取值<span class=\"ph uicontrol\" id=\"uicontrol-se5-rg7-g2r\">Linux</span>表示为MBR分区。\n                                    </td>\n                                 </tr>\n                                 <tr id=\"row-4bx-0g2-4s0\">\n                                    <td class=\"entry\" id=\"entry-ozl-fif-ovv\">③</td>\n                                    <td class=\"entry\" id=\"entry-cld-wra-kp7\"><code class=\"ph codeph\" id=\"codeph-hl3-wwn-nh3\">/dev/vdc1</code></td>\n                                    <td class=\"entry\" id=\"entry-jeo-jmd-yfl\">数据盘，<span class=\"ph uicontrol\" id=\"uicontrol-7dj-fhz-ark\">System</span>取值<span class=\"ph uicontrol\" id=\"uicontrol-ud0-vlw-o9d\">GPT</span>表示为GPT分区。\n                                    </td>\n                                 </tr>\n                              </tbody>\n                           </table>\n                           <div class=\"note note note-note\" id=\"note-vdh-3vz-lse\">\n                              <div class=\"note-icon-wrapper\"><i class=\"icon-note note\"></i></div>\n                              <div class=\"note-content\"><strong>说明</strong> 如果您的查询结果中云盘容量还是40 GiB（<code class=\"ph codeph\" id=\"codeph-52u-d1r-nyz\">Disk /dev/vda: 42.9 GB</code>），表示扩容不成功，建议您在控制台重启下本实例。\n                              </div>\n                           </div>\n                        </div>\n                     </li>\n                     <li class=\"li step stepexpand\" id=\"step-pm0-zi0-5a9\"><span class=\"ph cmd\" id=\"d6e344\">运行以下命令确认已有分区的文件系统类型。</span><div class=\"itemgroup info\" id=\"d6e346\"><pre class=\"pre codeblock\" id=\"d6e347\"><code>df -Th</code></pre><p class=\"p\" id=\"d6e349\">执行结果如下所示。其中，<code class=\"ph codeph\" id=\"d6e351\">Mounted on</code>列为文件系统对应的挂载点。\n                           </p><img class=\"image break\" id=\"d6e354\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6620659951/p135833.png\" alt=\"查看文件系统\"></div>\n                     </li>\n                     <li class=\"li step stepexpand\" id=\"step-4jc-ci3-kn8\"><span class=\"ph cmd\" id=\"cmd-kqn-lx8-iqm\">运行以下命令扩容分区。</span><div class=\"itemgroup info\" id=\"info-i6r-v73-4de\"><pre class=\"pre codeblock\" id=\"codeblock-x8d-q4k-1q9\"><code>growpart /dev/vda 1</code></pre>此示例以扩容系统盘为例，<code class=\"ph codeph\" id=\"codeph-61x-8jl-0d9\">/dev/vda</code>和<code class=\"ph codeph\" id=\"codeph-yj1-f4m-fz8\">1</code>之间需要空格分隔。如果需要扩容其他分区，请根据实际情况修改命令。执行结果如下所示。<img class=\"image break\" id=\"image-1cy-3u5-kgt\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6620659951/p135834.png\" alt=\"growpart\"></div>\n                     </li>\n                     <li class=\"li step stepexpand\" id=\"step-6mc-njy-fy4\"><span class=\"ph cmd\" id=\"d6e446\">在ECS实例内部，根据查询的文件系统类型，扩容文件系统。</span><div class=\"itemgroup info\" id=\"d6e448\">\n                           <ul class=\"ul\" id=\"d6e449\">\n                              <li class=\"li\" id=\"d6e450\">扩容ext*（例如ext4）文件系统：运行以下命令扩容文件系统。\n                                 <div class=\"p\" id=\"d6e452\">扩容系统盘/dev/vda1的文件系统。<pre class=\"pre codeblock\" id=\"d6e454\"><code>resize2fs /dev/vda1    </code></pre></div>\n                                 <div class=\"p\" id=\"d6e456\">扩容数据盘/dev/vdb1的文件系统。<pre class=\"pre codeblock\" id=\"d6e458\"><code>resize2fs /dev/vdb1          </code></pre></div>\n                                 <div class=\"note note note-note\" id=\"d6e460\">\n                                    <div class=\"note-icon-wrapper\"><i class=\"icon-note note\"></i></div>\n                                    <div class=\"note-content\"><strong>说明</strong> <code class=\"ph codeph\" id=\"d6e461\">/dev/vda1</code>和<code class=\"ph codeph\" id=\"d6e464\">/dev/vdb1</code>都是分区名称，您需要根据实际情况修改。\n                                    </div>\n                                 </div>\n                              </li>\n                              <li class=\"li\" id=\"d6e467\">扩容xfs文件系统：运行以下命令扩容数据盘/dev/vdc1的文件系统。<pre class=\"pre codeblock\" id=\"d6e469\"><code>xfs_growfs /media/vdc</code></pre><div class=\"note note note-note\" id=\"d6e471\">\n                                    <div class=\"note-icon-wrapper\"><i class=\"icon-note note\"></i></div>\n                                    <div class=\"note-content\"><strong>说明</strong> <code class=\"ph codeph\" id=\"d6e472\">/media/vdc</code>为<code class=\"ph codeph\" id=\"d6e475\">/dev/vdc1</code>的挂载点，您需要根据实际情况修改。\n                                    </div>\n                                 </div>\n                              </li>\n                              <li class=\"li\" id=\"d6e478\">扩容btrfs文件系统：如果您的数据盘文件系统为btrfs，则需要运行以下命令扩容文件系统。<pre class=\"pre codeblock\" id=\"d6e480\"><code>btrfs filesystem resize max /mountpoint</code></pre><div class=\"note note note-note\" id=\"d6e482\">\n                                    <div class=\"note-icon-wrapper\"><i class=\"icon-note note\"></i></div>\n                                    <div class=\"note-content\"><strong>说明</strong> <code class=\"ph codeph\" id=\"d6e483\">/mountpoint</code>为数据盘对应的挂载点，您需要根据实际情况修改。\n                                    </div>\n                                 </div>\n                              </li>\n                           </ul>\n                        </div>\n                     </li>\n                     <li class=\"li step stepexpand\" id=\"step-eyf-f99-goh\"><span class=\"ph cmd\" id=\"d6e487\">运行以下命令检查扩容后结果。</span><div class=\"itemgroup info\" id=\"d6e489\"><pre class=\"pre codeblock\" id=\"d6e490\"><code>df -Th</code></pre><p class=\"p\" id=\"d6e492\">执行结果如下所示。</p><img class=\"image break\" id=\"d6e494\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6620659951/p135835.png\" alt=\"查看扩容结果\"></div>\n                        <div class=\"itemgroup stepresult\" id=\"d6e495\">\n                           <div class=\"p\" id=\"d6e496\">扩容完成后，您需要根据实际情况检查数据是否正常。\n                              <ul class=\"ul\" id=\"d6e498\">\n                                 <li class=\"li\" id=\"d6e499\">如果扩容成功，ECS实例中的业务程序能够正常运行，则完成操作。</li>\n                                 <li class=\"li\" id=\"d6e501\">如果扩容失败，则通过备份的快照回滚数据。</li>\n                              </ul>\n                           </div>\n                        </div>\n                     </li>\n                     <li class=\"li step stepexpand\" id=\"step-3yr-zmu-vw3\"><span class=\"ph cmd\" id=\"cmd-gwh-sti-j0d\">修复完成后，退出修复环境，然后检查问题实例的当前状态。</span><ol type=\"a\" class=\"ol substeps\" id=\"substeps-lwp-fqa-daw\">\n                           <li class=\"li substep\" id=\"substep-qoo-zi9-tv6\"><span class=\"ph cmd\" id=\"cmd-228-zty-x5m\">在ECS控制台的实例健康诊断页面，卸载修复盘并恢复问题实例至正常模式。</span></li>\n                           <li class=\"li substep\" id=\"substep-a4j-n63-idd\"><span class=\"ph cmd\" id=\"cmd-dhw-x7d-28f\">远程连接已修复的ECS实例，检查云盘容量。</span></li>\n                        </ol>\n                     </li>\n                  </ol>\n               </section>\n               <section class=\"section\" id=\"section-kl4-mjc-t12\">\n                  <h2 class=\"title sectiontitle\" id=\"title-1eq-c12-1l9\">通过中转实例扩容云盘</h2>\n                  <p class=\"p\" id=\"p-dup-g3h-4wd\">您也可以将问题云盘卸载，然后挂载到中转实例（同地域的其他Linux实例），再进行扩容云盘操作。 </p>\n                  <ol class=\"ol steps\" id=\"steps-6ye-k9t-1jv\">\n                     <li class=\"li step\" id=\"step-quu-jc7-lyl\"><span class=\"ph cmd\" id=\"cmd-0w1-1zl-5d2\">从问题实例上卸载云盘。具体操作，请参见<span><a title=\"\" href=\"/zh/ecs/user-guide/detach-or-attach-a-system-disk#section-ohc-aqh-oya\">卸载系统盘</a></span>或<span><a title=\"如果您不再需要使用数据盘，或者需要将数据盘挂载到同可用区的其他ECS实例时，需要先卸载数据盘。本文介绍卸载数据盘的流程和具体操作。\" href=\"/zh/ecs/user-guide/detach-a-data-disk#concept-i1f-kgg-ydb\">卸载数据盘</a></span>。</span></li>\n                     <li class=\"li step\" id=\"step-7z8-aap-8i0\"><span class=\"ph cmd\" id=\"cmd-qur-47r-rqp\">将此云盘挂载到其他Linux实例。具体操作，请参见<span><a title=\"您可以将单独创建的按量付费云盘挂载到ECS实例上，作为数据盘使用。\" href=\"/zh/ecs/user-guide/attach-a-data-disk#concept-llz-b4c-ydb\">挂载数据盘</a></span>。</span></li>\n                     <li class=\"li step\" id=\"step-es7-0rr-nw7\"><span class=\"ph cmd\" id=\"cmd-dq6-78m-zn0\">在Linux实例中扩容此云盘。具体操作，请参见<span><a title=\"云盘（系统盘或数据盘）使用空间不足时，您可以扩容云盘的存储容量。本文介绍如何在不需要停止实例运行的情况下为Linux系统进行扩容云盘。\" href=\"/zh/ecs/user-guide/step-1-resize-a-disk-to-extend-its-capacity#concept-syg-jxz-2hb\">在线扩容云盘（Linux系统）</a></span>或<span><a title=\"云盘（系统盘或数据盘）使用空间不足时，您可以扩容云盘的存储容量。如果您的ECS实例不支持在线扩容云盘，可以通过离线扩容的方式为Linux实例进行扩容云盘。离线扩容云盘需要重启实例，您的业务会短暂中断，建议在业务不繁忙时操作。\" href=\"/zh/ecs/expand-system-disk-capacity#concept-kj1-mqg-ydb\">离线扩容云盘（Linux系统）</a></span>。</span></li>\n                     <li class=\"li step\" id=\"step-6i0-pj7-ijs\"><span class=\"ph cmd\" id=\"cmd-h4a-1mv-zdu\">扩容完成后，在Linux实例上卸载此云盘。具体操作，请参见<span><a title=\"如果您不再需要使用数据盘，或者需要将数据盘挂载到同可用区的其他ECS实例时，需要先卸载数据盘。本文介绍卸载数据盘的流程和具体操作。\" href=\"/zh/ecs/user-guide/detach-a-data-disk#concept-i1f-kgg-ydb\">卸载数据盘</a></span>。</span></li>\n                     <li class=\"li step\" id=\"step-y8a-phm-roc\"><span class=\"ph cmd\" id=\"cmd-0bv-ix8-tvp\">将此云盘挂载回原ECS实例。具体操作，请参见<span><a title=\"\" href=\"/zh/ecs/user-guide/detach-or-attach-a-system-disk#section-2wb-d3a-z0s\">作为系统盘挂载</a></span>或<span><a title=\"您可以将单独创建的按量付费云盘挂载到ECS实例上，作为数据盘使用。\" href=\"/zh/ecs/user-guide/attach-a-data-disk#concept-llz-b4c-ydb\">挂载数据盘</a></span>。</span></li>\n                     <li class=\"li step\" id=\"step-im3-zn6-dbq\"><span class=\"ph cmd\" id=\"cmd-pd7-zap-b3w\">远程连接已修复的ECS实例，检查云盘容量。</span></li>\n                  </ol>\n               </section>\n            </div>\n         </article>\n      </main>\n   \n\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/linux-system-of-ecs-example-or-var-or-log-or-messages-log-in-corruption-fs-error-xxx-ext4-find-entry-xxx-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/solution-of-instances-cannot-be-started/\">实例无法启动的解决方案</a></span>\n <span>Linux系统的ECS实例中，/var/log/messages日志出现“EXT4-fs error (device XXX): __ext4_find_entry:XXX”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例中，/var/log/messages日志出现“EXT4-fs error (device XXX): __ext4_find_entry:XXX”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:33:54</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2321168\"><p id=\"9f4b4038d70xh\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍Linux系统的ECS实例中，<code data-tag=\"code\" class=\"code\">/var/log/messages</code>日志出现“EXT4-fs error (device XXX): __ext4_find_entry:XXX”错误的问题原因和解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"a37e8730d8hsb\" class=\"section\"><h2 data-tag=\"p\" id=\"0bd70816d7pj7\" class=\"p\"><b>问题现象</b></h2><p id=\"2028af80d8npk\">Linux系统的ECS实例中，<code data-tag=\"code\" class=\"code\">/var/log/messages</code>日志出现类似如下错误。</p><pre id=\"11d5bi\" data-tag=\"codeblock\" outputclass=\"language-bash\" class=\"pre codeblock language-bash\"><code>EXT4-fs error (device vdb1): __ext4_find_entry:1534: inode #2: comm (md-udevd): reading directory lblock 0</code></pre></section><section id=\"46ff7710d87uj\" class=\"section\"><h2 id=\"9d477e80d8akc\"><b>问题原因</b></h2><p id=\"ca384cb1d8uww\">出现该问题可能有以下原因：</p><ul id=\"fcdf5f02d8qg2\"><li id=\"fcdf5f00d8oe6\"><p id=\"1b277240d8q4v\">ECS实例内部文件系统损坏。</p></li><li id=\"fe2f11b1d8tx6\"><p id=\"fe2f11b0d8epv\">ECS实例内部磁盘设备或磁盘驱动存在异常。</p></li></ul></section><section id=\"485a7330d8ij7\" class=\"section\"><h2 id=\"9e931150d85sp\"><b>解决方案</b></h2><p id=\"cced2190d8i03\">本文以修复<code data-tag=\"code\" class=\"code\">/dev/vdb1</code>文件系统的<code data-tag=\"code\" class=\"code\">EXT4-fs error</code>错误为例，修复其他磁盘设备<code data-tag=\"code\" class=\"code\">EXT4-fs error</code>错误步骤类似。</p><ol id=\"e97f6e82d80ok\"><li id=\"e97f6e80d8956\"><p id=\"e7c51450d8frf\">远程连接ECS实例。</p><p id=\"5421f010d8mtv\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"53298651d87zu\"><p id=\"53298650d8ge3\">执行如下命令，卸载数据盘文件系统。</p><pre data-tag=\"codeblock\" outputclass=\"language-bash\" id=\"5d742603d8t9d\" class=\"pre codeblock language-bash\"><code>umount /dev/vdb1</code></pre></li><li id=\"6eebe3a0d8lzh\"><p id=\"72ac9520d8fm8\">执行如下命令，修复<code data-tag=\"code\" class=\"code\">/dev/vdb1</code>文件系统。</p><pre id=\"ab9stv\" data-tag=\"codeblock\" outputclass=\"language-bash\" class=\"pre codeblock language-bash\"><code>sudo fsck.ext4 -f /dev/vdb1</code></pre></li><li id=\"a3be6c01d8071\"><p id=\"50c1a6b0d8ofo\">执行如下命令，挂载<code data-tag=\"code\" class=\"code\">/dev/vdb1</code>文件系统。</p><p id=\"84b1dad0d8nip\">本文以挂载到<code data-tag=\"code\" class=\"code\">/mnt</code>为例进行说明，您可以根据业务需要，修改挂载路径。</p><pre id=\"oofdhk\" data-tag=\"codeblock\" outputclass=\"language-bash\" class=\"pre codeblock language-bash\"><code>mount /dev/vdb1 /mnt</code></pre></li><li id=\"95ca1351d8tn0\"><p id=\"95ca1350d8iyh\">执行如下命令，查看<code data-tag=\"code\" class=\"code\">/var/log/messages</code>日志。</p><pre id=\"5udyay\" data-tag=\"codeblock\" outputclass=\"language-bash\" class=\"pre codeblock language-bash\"><code>cat /var/log/messages</code></pre><ul id=\"b4c57101d824d\"><li id=\"b4a47b80d8xof\"><p id=\"b4a45470d8e68\">若日志中不再出现<code data-tag=\"code\" class=\"code\">EXT4-fs error</code>错误，说明该问题已解决。</p></li><li id=\"cd097271d8d6w\"><p id=\"d2c44640d8f5c\">若日志中还会持续出现<code data-tag=\"code\" class=\"code\">EXT4-fs error</code>错误，说明磁盘设备或磁盘驱动存在异常。请<span props=\"china\"><a class=\"\" target=\"_blank\" href=\"https://selfservice.console.aliyun.com/ticket/category/swas/today\">提交工单</a></span>，联系技术支持获取帮助。</p></li></ul></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-instances-in-the-system-exists-residual-xen-drivers", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/solution-of-instances-cannot-be-started/\">实例无法启动的解决方案</a></span>\n <span>Windows实例系统内存在Xen驱动残留</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例系统内存在Xen驱动残留</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-18 16:04:18</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main role=\"main\"><article role=\"article\" aria-labelledby=\"title_4ce_99i_clz\"><div class=\"body taskbody\" data-tag=\"taskbody\" id=\"taskbody-t10-fjm-pmh\"><p id=\"shortdesc-vi4-kwt-xi5\" class=\"shortdesc\" data-tag=\"shortdesc\">当Windows实例系统内存在Xen驱动残留时，会导致Windows实例无法正常启动。本文主要介绍该场景下的问题现象和解决方案。</p><section class=\"section\" data-tag=\"section\" id=\"section-iul-m35-h2m\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-vyp-4iy-t2m\">问题现象</h2><div class=\"p\" data-tag=\"p\" id=\"p-k77-mkl-beh\">Windows实例无法正常启动，提示信息如下：<img class=\"image break\" data-tag=\"image\" id=\"image-yck-tbh-9kr\" height=\"441\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7527049561/p473919.png\" width=\"750\" alt=\"实例无法启动报错提示\"></div></section><section class=\"section\" data-tag=\"section\" id=\"section-zwz-vfi-zdm\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-5i3-dev-045\">可能原因</h2><p class=\"p\" data-tag=\"p\" id=\"p-lcg-2j4-xix\">Windows实例系统内，存在Xen驱动残留。</p></section><section class=\"section\" data-tag=\"section\" id=\"section-pz5-7kq-znf\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-7f5-u2n-bt6\">解决方案</h2><p class=\"p\" data-tag=\"p\" id=\"p-9pr-yf3-k81\">清理系统中的Xen驱动残留。</p></section></div></article></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/linux-system-running-instances-of-ecs-caton-appear-in-or-var-or-log-or-messages-log-info-task-jbd2-or-vda1-3-and-6-blocked-for-wining-120-seconds-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/solution-of-instances-cannot-be-started/\">实例无法启动的解决方案</a></span>\n <span>Linux系统的ECS实例运行卡顿，在/var/log/messages日志中出现“INFO:task jbd2/vda1-8:366 blocked for more than 120 seconds”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例运行卡顿，在/var/log/messages日志中出现“INFO:task jbd2/vda1-8:366 blocked for more than 120 seconds”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-19 11:39:41</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2321140\"><p id=\"26c15915d7jjv\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍Linux系统的ECS实例运行卡顿，在<code data-tag=\"code\" class=\"code\">/var/log/messages</code>日志中出现类似“INFO:task jbd2/vda1-8:366 blocked for more than 120 seconds”错误的问题原因和解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"23e54570d84bf\" class=\"section\"><h2 data-tag=\"p\" id=\"d2694657d7v77\" class=\"p\"><b>问题现象</b></h2><p id=\"224020f0d87t4\">Linux系统的ECS实例出现运行卡顿、系统响应变慢、某些进程无法正常运行、系统负载较高等现象，在<code data-tag=\"code\" class=\"code\">/var/log/message</code>日志中出现大量类似如下错误信息。</p><pre id=\"60uqzr\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>[8291809.483930] INFO:task jbd2/vda1-8:366 blocked for more than 120 seconds.</code></pre></section><section id=\"255aa760d8nmn\" class=\"section\"><h2 id=\"1a8adcb0d8wa0\"><b>问题原因</b></h2><p id=\"d0d88520d8tw4\">在Linux系统的ECS实例中，当某个进程因为某种原因无法继续执行，并且长时间停滞在某个状态下无法响应，就会发生挂起任务（hung task）故障，出现hung task故障可能原因如下：</p><ul id=\"137a03e0d8ulj\"><li id=\"137a03e2d86mi\"><p id=\"137a03e1d8ach\">进程卡住（blocked）：当某个进程在执行过程中出现死锁、内存泄漏或者其他异常问题时，该进程可能会卡住，无法继续执行，出现hung task故障。</p></li><li id=\"137a03e8d8sie\" data-spm-anchor-id=\"a2c9r.14518950.0.i9.775clMEwlMEwwv\"><p id=\"137a03e7d8wj2\">系统内核问题：当系统内核存在漏洞或者其他问题时，可能会出现hung task故障。</p></li><li id=\"e7046e20dap30\"><p id=\"e71de990dax7c\">系统资源紧张：ECS实例中应用或进程占用系统资源使用率（如CPU、内存等）过高时，可能会出现hung task故障。</p></li></ul></section><section id=\"cbb18ce0d8b49\" class=\"section\"><h2 id=\"cbb18ce2d8cyc\"><b>解决方案</b></h2><p id=\"90616b00d84l2\">出现hung task的原因比较复杂，您可以参考以下步骤进行排查。</p><ol id=\"a633a922d8717\"><li id=\"a633a920d8zbk\"><p id=\"a4189150d8fq8\">重启实例。</p><p id=\"15c780e0d80oc\">系统无法正常运行时，您可以尝试重启实例，以恢复实例到正常状态。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li><li id=\"b00c69a1d8560\"><p id=\"b00c69a0d8ys7\">终止卡住的进程。</p><p id=\"d1daef10d888n\">使用<code data-tag=\"code\" class=\"code\">kill</code>命令终止卡住的进程，以释放系统资源。</p></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i6.775clMEwlMEwwv\" id=\"adaf3fc7d8fud\"><p id=\"adaf3fc6d87vf\">调整系统参数。</p><p id=\"f7e47b90d8qwu\">通过调整系统参数（如内核参数），来提高系统的稳定性和性能。</p></li><li id=\"d04c2e31d8ehn\"><p id=\"d06a6490d8hqs\">升级内核版本。</p><p id=\"0e3cb290d8dhk\">如果系统内核存在漏洞或者其他问题，可以尝试升级内核版本解决问题。</p></li><li id=\"6e6c3ce1dashf\"><p id=\"6e6c3ce0da0fu\">升配实例规格。</p><p id=\"b5114280daax4\">当因实例规格较低导致负载高及资源不足问题时，您可以升配实例规格来解决。更多详情，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/query-and-analysis-of-system-loads-on-linux-instances\">Linux实例负载高问题排查和异常处理</a>和<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-of-instance-configuration-changes\">升降配方式概述</a>。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/linux-instances-of-ecs-system-no-response-the-system-log-in-bug-soft-lockup-cpu-0-stuck-for-61-s-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/solution-of-instances-cannot-be-started/\">实例无法启动的解决方案</a></span>\n <span>Linux系统的ECS实例系统无响应，系统日志中出现“BUG: soft lockup – CPU#0 stuck for 61s”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例系统无响应，系统日志中出现“BUG: soft lockup – CPU#0 stuck for 61s”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-19 11:39:42</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2321130\"><p id=\"d2694658d768r\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍Linux系统的ECS实例系统无响应，在<code data-tag=\"code\" class=\"code\">/var/log/messages</code>、<code data-tag=\"code\" class=\"code\">/var/log/dmesg</code>等日志中出现“BUG: soft lockup – CPU#0 stuck for 61s”错误的问题原因和解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"23e54570d84bf\" class=\"section\"><h2 data-tag=\"p\" id=\"d2694657d7v77\" class=\"p\"><b>问题现象</b></h2><p id=\"a6a66a50d8puf\">Linux系统的ECS实例出现系统无响应，在<code data-tag=\"code\" class=\"code\">/var/log/message</code>、<code data-tag=\"code\" class=\"code\">/var/log/dmesg</code>等日志中出现大量类似如下错误信息。</p><pre id=\"2hantr\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>BUG: soft lockup - CPU#0 stuck for 61s</code></pre></section><section id=\"255aa760d8nmn\" class=\"section\"><h2 id=\"1a8adcb0d8wa0\"><b>问题原因</b></h2><p id=\"d0d88520d8tw4\">该问题通常是由于ECS实例中，系统内核长时间占用CPU资源导致出现软死锁（soft lockup）故障，内核长时间占用CPU资源可能有以下原因：</p><ul id=\"6e2b3a60d8y7b\"><li id=\"6e2b3a62d89co\"><p id=\"6e2b3a61d8vbz\">系统负载过高</p></li><li data-spm-anchor-id=\"0.0.0.i59.69443f13B3i2e4\" id=\"6e2b6171d8x0i\"><p id=\"6e2b6170d88lh\">内核死循环或死锁</p></li><li data-spm-anchor-id=\"0.0.0.i64.69443f13B3i2e4\" id=\"6e2b6173d8h7f\"><p id=\"6e2b6172d8m9z\">内核调度问题</p></li><li data-spm-anchor-id=\"0.0.0.i64.69443f13B3i2e4\" id=\"6e2b6175d87rh\"><p id=\"6e2b6174d8435\">内核出现故障</p></li></ul></section><section id=\"cbb18ce0d8b49\" class=\"section\"><h2 id=\"cbb18ce2d8cyc\"><b>解决方案</b></h2><p id=\"a5213470d8hed\">出现soft lockup的原因比较复杂，您可以参考以下步骤进行排查。</p><ol id=\"a7ec1442d8qk7\"><li data-spm-anchor-id=\"0.0.0.i66.69443f13B3i2e4\" id=\"aab2fc72d8q9x\"><p id=\"aab2fc71d8fxd\">检查系统负载。</p><p id=\"d8f491c0d8uhm\">使用top、sar、htop等工具检查系统负载，如果系统负载过高，需要调整系统配置或增加硬件资源来缓解负载。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/query-and-analysis-of-system-loads-on-linux-instances\">Linux实例负载高问题排查和异常处理</a>。</p></li><li data-spm-anchor-id=\"0.0.0.i65.69443f13B3i2e4\" id=\"aab2fc74d8qqg\"><p id=\"aab2fc73d8mj8\">检查内核是否存在死循环或死锁、内核调度问题。</p><p id=\"1607f200d8yr0\">使用内核调试工具（如Kgdb）检查内核代码，查找可能的死循环或死锁、内核调度问题，找到问题后，可以通过修改代码或应用补丁来解决问题。更多信息，请参见<a class=\"\" target=\"_blank\" href=\"https://elinux.org/Kgdb\">Kgdb</a>。</p></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i7.3b3fKm8kKm8kNN\" id=\"aab2fc78d8i2q\"><p id=\"aab2fc77d8x32\">检查内核是否存在已知缺陷。</p><p id=\"e7f8b940d96nk\">查找Linux发行版社区中，对应内核版本是否存在类似soft lockup故障。如果存在类似故障，可参考对应方案进行解决。常见Linux发行版社区：</p><ul id=\"684b36e1ddgwb\"><li id=\"67ad9750ddy4t\"><p id=\"67ad7040ddhuf\"><a class=\"\" target=\"_blank\" href=\"https://forum.ubuntu.org.cn/viewforum.php?f=42\">Ubuntu社区</a></p></li><li id=\"8a34b3d1ddrvt\"><p id=\"913a7e30dd03t\"><a class=\"\" target=\"_blank\" href=\"https://forums.centos.org/\">CoreOS社区</a></p></li><li id=\"979366c0ddcua\"><p id=\"97933fb0ddz75\"><a class=\"\" target=\"_blank\" href=\"https://openanolis.cn/\">龙蜥社区</a></p></li></ul></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/linux-instance-grub-launch-configuration-errors", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/solution-of-instances-cannot-be-started/\">实例无法启动的解决方案</a></span>\n <span>Linux实例的grub启动配置错误</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux实例的grub启动配置错误</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-10 17:08:10</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main role=\"main\"><article role=\"article\" aria-labelledby=\"title_vca_zvr_epe\"><div class=\"body taskbody\" data-tag=\"taskbody\" id=\"taskbody-n2a-7s9-06k\"><p id=\"shortdesc-3k1-60a-f4c\" class=\"shortdesc\" data-tag=\"shortdesc\">Linux实例无法启动，并且通过诊断工具检测到grub启动配置错误时，您可以通过实例健康诊断工具进行问题修复。</p><section class=\"section prereq p\" data-tag=\"prereq\" id=\"prereq-23s-asc-asv\"><h2 id=\"d41e14\" class=\"sectiontitle tasklabel\">前提条件</h2>ECS实例已通过实例健康诊断工具诊断出grub格式检查异常的问题。</section><section class=\"section context\" data-tag=\"context\" id=\"context-bxs-70x-dou\"><h2 id=\"d41e16\" class=\"sectiontitle tasklabel\">背景信息</h2><p class=\"p\" data-tag=\"p\" id=\"p-ji0-cfr-3j5\"><strong class=\"ph b\" data-tag=\"b\" id=\"b-ka4-bvi-tk1\">问题描述</strong>：Linux实例中grub配置异常，导致Linux系统启动失败。</p><p class=\"p\" data-tag=\"p\" id=\"p-ujv-dek-mpp\"><strong class=\"ph b\" data-tag=\"b\" id=\"b-69o-tqv-0s4\">问题原因</strong>：Linux实例的grub配置中有一项是根文件系统参数，如果此参数未指向系统盘上根文件系统所在的分区（例如<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-eft-z7t-42g\">/dev/vda1</span>），或者所指定的UUID与系统盘上的根文件系统的UUID不匹配，那么系统启动时可能由于内核无法正确加载根文件系统，从而导致系统启动失败。</p></section><section class=\"section\" data-tag=\"section\" id=\"section-pk5-34z-7t8\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-utu-2ld-aj7\">准备工作</h2><p class=\"p\" data-tag=\"p\" id=\"p-r0w-ozk-hrk\">本文提供的解决方案仅支持Legacy启动方式的Linux系统，不支持UEFI启动方式的Linux系统。因此在操作前需要检查下Linux是否为Legacy启动方式。</p><ol class=\"ol steps\" data-tag=\"steps\" id=\"steps-71x-czh-lml\"><li class=\"li step\" data-tag=\"step\" id=\"step-ztm-s14-bqj\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-sec-abx-bg2\">找到一个相同实例规格的Linux实例。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-v9o-tvk-iz6\">如果您没有相同规格的Linux实例，也可以新建一个相同实例规格的Linux实例。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-an-instance-by-using-the-wizard#task-vwq-5g4-r2b\">自定义购买实例</a>。</div></li><li class=\"li step\" data-tag=\"step\" id=\"step-2sc-e1q-pyu\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-t2w-nty-n3z\">登录相同实例规格的ECS实例。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password#concept-sdk-1jx-wdb\">使用VNC登录实例</a>。</span></li><li class=\"li step\" data-tag=\"step\" id=\"step-lt6-gie-k5z\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-5mp-tqs-mdr\">检查实例是否为Legacy启动方式。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-b0l-hgs-nrd\"><div class=\"p\" data-tag=\"p\" id=\"p-nb7-dnt-auk\">执行以下命令：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-9mm-gmk-e64\"><code>ls /sys/firmware/</code></pre></div><div class=\"p\" data-tag=\"p\" id=\"p-lpl-o0u-ajl\">返回结果如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-jhe-pp6-0zl\"><code>acpi  dmi  memmap  qemu_fw_cfg</code></pre></div><ul class=\"ul\" data-tag=\"ul\" id=\"ul-p4w-foh-a7d\"><li class=\"li\" data-tag=\"li\" id=\"li-jxh-gze-f3b\">如果查询结果不存在<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-0b7-x6e-b6k\">EFI</span>目录，表示本实例使用Legacy启动方式，后续处理请参见<a title=\"\" class=\"xref\" href=\"#section-omv-imz-3ec\">通过修复盘修复grub启动配置</a>或<a title=\"\" class=\"xref\" href=\"#section-7xu-lff-kmk\">通过中转实例修复grub启动配置</a>。</li><li class=\"li\" data-tag=\"li\" id=\"li-pki-qhc-0fr\">如果查询结果存在<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-ufq-k98-ri2\">EFI</span>目录，表示本实例使用UEFI启动方式，请提交工单。</li></ul></div></li></ol></section><section class=\"section\" data-tag=\"section\" id=\"section-omv-imz-3ec\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-lds-984-iv9\">通过修复盘修复grub启动配置</h2><div class=\"note note note-note\" data-tag=\"note\" id=\"note-0wb-zvy-0fe\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note\"></i></div><div class=\"note-content\"><strong>说明</strong> 此解决方案仅支持Legacy启动方式的Linux系统，不支持UEFI启动方式的Linux系统。</div></div><ol class=\"ol steps\" data-tag=\"steps\" id=\"steps-rsm-e24-vnz\"><li class=\"li step\" data-tag=\"step\" id=\"step-fjt-si7-dyj\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-bnq-zet-bi5\">远程连接问题实例。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-dqn-uxg-6zj\">当ECS实例处于正在挂载修复盘的模式下时，只能通过VNC远程连接。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password#concept-sdk-1jx-wdb\">使用VNC登录实例</a>。</div></li><li class=\"li step\" data-tag=\"step\" id=\"step-hp2-0fa-2vf\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-zpg-nyd-i78\">查看问题实例原有系统盘的挂载信息。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-ho8-s4z-4v0\">在临时挂载的修复盘中，问题实例原有系统盘的文件系统会被挂载到某一临时目录下。您可以通过以下任一方式查看所在的临时目录信息：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-58p-d8h-jsf\"><li class=\"li\" data-tag=\"li\" id=\"li-96g-bmr-7pf\">在系统盘详情页的<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-mp0-zdg-oae\">挂载实例</span>进行查看，对应的临时目录格式示例为：<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-0de-hic-5qx\">/tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</code>，其中<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-82e-1wb-945\">bp19bspzms79kqse****</code>为实例原有系统盘的云盘序列号。</li><li class=\"li\" data-tag=\"li\" id=\"li-y51-ev9-00i\">在临时挂载的修复盘中，运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-qe0-1e0-zxr\">mount</span>命令查看。例如，问题实例原有系统盘的设备路径为<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-doa-0zh-8gj\">/dev/vda</span>，命令示例如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-13n-t26-v1g\"><code>mount | grep /dev/vda</code></pre><div class=\"p\" data-tag=\"p\" id=\"p-pce-hui-f1f\">返回结果如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-9rp-ptr-kvb\"><code>/dev/vda1 on /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse**** type ext4 (rw,relatime)</code></pre></div></li></ul></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-1i0-jny-mze\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-h6p-m5b-thi\">为了后续操作中<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-22v-6zz-w73\">grub2-mkconfig</span>命令能够正常识别根分区系统，将当前系统上的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-ben-3ej-bp9\">/dev</span>、<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-j0c-crn-jku\">/proc</span>和<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-cwm-csi-kjw\">/sys</span>等虚拟文件系统挂载到chroot环境的根目录下。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-l5k-jnj-66c\">命令示例如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-wca-ub6-w9q\"><code>mount --bind /dev /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****/dev\nmount --bind /proc /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****/proc\nmount --bind /sys /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****/sys</code></pre></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-te1-92w-y6m\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-cap-bms-1wv\">运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-fbm-avz-1bi\">chroot</span>命令，将根目录切换为问题实例原有系统盘所在的临时路径，并进入<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-bmm-tgd-4te\">chroot</span>环境。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-u5y-azm-p4c\">您需要在问题实例原有系统盘所在的临时路径中进行文件修复。例如，临时路径为<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-rkg-vqj-7ea\">/tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</span>，命令如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-vyp-6pt-r1k\"><code>chroot /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</code></pre></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-5nu-rjk-kfj\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-wgz-a9h-qyj\">备份grub配置文件。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-ubw-zua-cpf\">将grub配置文件<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-1q8-b2b-qu9\">/boot/grub2/grub.cfg</span>备份到<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-1ud-86a-pd1\">/root/grub.cfg</span>，以备后续误操作时可以恢复。<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-m84-o6v-dt7\"><code>cp /boot/grub2/grub.cfg /root/grub.cfg</code></pre></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-nz0-iwz-38x\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-qu0-q7h-wwj\">重新生成grub配置文件。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-931-qc8-fd5\">执行以下命令会自动识别根文件系统的UUID并写入grub配置文件。<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-bop-9xe-nks\"><code>grub2-mkconfig -o /boot/grub2/grub.cfg</code></pre></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-cnl-06t-3s9\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-u50-ga6-v5f\">检查grub配置文件中根文件系统参数是否正确。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-278-qhk-ow9\"><div class=\"p\" data-tag=\"p\" id=\"p-3wr-n4p-f6r\">命令示例如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-3l8-z9j-fhx\"><code>grep -n -E \"(kernel|linux[16]*[efi]*)[[:space:]]+(/boot)?/vmlinuz-.*root=\" /boot/grub2/grub.cfg /boot/grub2/grubenv</code></pre></div><div class=\"p\" data-tag=\"p\" id=\"p-rld-8sq-mpf\">返回结果如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-fjj-qpx-3fh\"><code>/boot/grub2/grub.cfg:99:     linux16 /boot/vmlinuz-3.10.0-514.26.2.el7.x86_64 root=UUID=48609326-10e3-40c2-93b3-3f0d9798**** ro crashkernel=auto   net.ifnames=0  console=tty0 console=ttyS0,115200n8\n/boot/grub2/grub.cfg:114:    linux16 /boot/vmlinuz-3.10.0-327.el7.x86_64 root=UUID=48609326-10e3-40c2-93b3-3f0d9798**** ro crashkernel=auto   net.ifnames=0  console=tty0 console=ttyS0,115200n8\n/boot/grub2/grub.cfg:128:    linux16 /boot/vmlinuz-0-rescue-36dc953195bb4389870d2591ff6bfea5 root=UUID=48609326-10e3-40c2-93b3-3f0d9798**** ro crashkernel=auto   net.ifnames=0  console=tty0 console=ttyS0,115200n8</code></pre></div></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-j0b-4bj-kog\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-olk-a5s-xw5\">修复完成后，退出修复环境，然后检查问题实例的当前状态。</span><ol type=\"a\" class=\"ol substeps\" data-tag=\"substeps\" id=\"substeps-4ux-2tv-wqo\"><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-l7o-mqs-kls\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-mfs-074-lo4\">运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-jmo-zmp-0ym\">exit</span>命令，退出<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-5pz-4e7-r9y\">chroot</span>环境。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-04v-q1w-ld6\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-maa-ycg-alb\">卸载前面步骤中挂载的虚拟文件系统。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-ag5-omw-e6a\">命令示例如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-imf-bvt-17q\"><code>umount /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****/dev\numount /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****/proc\numount /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****/sys</code></pre></div></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-ivt-lqk-9gk\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-9x4-0ii-pnb\">在ECS控制台的离线诊断页面，卸载修复系统并恢复问题实例至正常模式。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-dqt-68e-3o3\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-fgc-4qz-efm\">远程连接已修复的ECS实例，确认成功登录。</span></li></ol></li></ol></section><section class=\"section\" data-tag=\"section\" id=\"section-7xu-lff-kmk\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-o9c-xrr-hdh\">通过中转实例修复grub启动配置</h2><p class=\"p\" data-tag=\"p\" id=\"p-tsw-tmg-6d8\">您也可以将问题实例的系统盘卸载，然后挂载到中转实例（同地域的其他Linux实例），再修复grub启动配置。 </p><ol class=\"ol steps\" data-tag=\"steps\" id=\"steps-7eb-3gm-oa5\"><li class=\"li step\" data-tag=\"step\" id=\"step-4ap-8zk-0ny\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-zpa-00n-l9y\">卸载异常实例的系统盘，并将该云盘作为数据盘挂载到中转实例。具体操作，请参见<a class=\"xref\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/173883.html\">如何通过挂载到ECS实例作为数据盘的方式登录异常系统盘</a>的步骤一到步骤三章节。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-q4u-9ll-rt8\"><div class=\"note note note-note\" data-tag=\"note\" id=\"note-yb7-n2f-bhl\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note\"></i></div><div class=\"note-content\"><strong>说明</strong> 根据参考文档中操作，您只需要执行到<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-ozn-uxe-m4q\">mount /dev/vdb1 /mnt</code>这一步骤，不需要执行<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-by7-zny-xm0\">chroot /mnt</code>命令。如果已经执行<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-oy7-arp-f2k\">chroot /mnt</code>命令，请执行<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-92j-d2g-leg\">exit</code>命令退出。</div></div></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-ilz-7mn-9dr\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-yy3-z78-znf\">为了后续操作中<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-x1w-y0z-fqc\">grub2-mkconfig</span>命令能够正常识别根分区系统，将当前系统上的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-tv6-q5k-eca\">/dev</span>、<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-vlp-qjq-56k\">/proc</span>和<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-32z-q0q-xb8\">/sys</span>等虚拟文件系统挂载到chroot环境的根目录下。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-7tl-rh2-1gj\">命令示例如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-541-wpb-0rl\"><code>mount --bind /dev /mnt/dev\nmount --bind /proc /mnt/proc\nmount --bind /sys /mnt/sys</code></pre></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-i0k-9b3-8t5\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-w6q-hoc-s2j\">运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-2n3-sz7-t4f\">chroot</span>命令，切换根目录并进入<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-9ln-i0z-17u\">chroot</span>环境。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-3uo-cth-t6p\"><pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-qkx-ekz-xtj\"><code>chroot /mnt</code></pre><p class=\"p\" data-tag=\"p\" id=\"p-ibl-8hd-hce\">此时您可以查看<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-zgu-p7c-uad\">/dev</span>、<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-67r-t5b-wc9\">/proc</span>和<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-fe4-ecz-747\">/sys</span>等目录，应该已经包含正常ECS实例系统中对应内容的映射。</p></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-si4-jfg-1av\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-wgz-a9h-qyj\">备份grub配置文件。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-ubw-zua-cpf\">将grub配置文件<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-1q8-b2b-qu9\">/boot/grub2/grub.cfg</span>备份到<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-1ud-86a-pd1\">/root/grub.cfg</span>，以备后续误操作时可以恢复。<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-m84-o6v-dt7\"><code>cp /boot/grub2/grub.cfg /root/grub.cfg</code></pre></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-hkc-3u2-zqa\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-qu0-q7h-wwj\">重新生成grub配置文件。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-931-qc8-fd5\">执行以下命令会自动识别根文件系统的UUID并写入grub配置文件。<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-bop-9xe-nks\"><code>grub2-mkconfig -o /boot/grub2/grub.cfg</code></pre></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-otf-8g2-dw3\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-u50-ga6-v5f\">检查grub配置文件中根文件系统参数是否正确。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-278-qhk-ow9\"><div class=\"p\" data-tag=\"p\" id=\"p-3wr-n4p-f6r\">命令示例如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-3l8-z9j-fhx\"><code>grep -n -E \"(kernel|linux[16]*[efi]*)[[:space:]]+(/boot)?/vmlinuz-.*root=\" /boot/grub2/grub.cfg /boot/grub2/grubenv</code></pre></div><div class=\"p\" data-tag=\"p\" id=\"p-rld-8sq-mpf\">返回结果如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-fjj-qpx-3fh\"><code>/boot/grub2/grub.cfg:99:     linux16 /boot/vmlinuz-3.10.0-514.26.2.el7.x86_64 root=UUID=48609326-10e3-40c2-93b3-3f0d9798**** ro crashkernel=auto   net.ifnames=0  console=tty0 console=ttyS0,115200n8\n/boot/grub2/grub.cfg:114:    linux16 /boot/vmlinuz-3.10.0-327.el7.x86_64 root=UUID=48609326-10e3-40c2-93b3-3f0d9798**** ro crashkernel=auto   net.ifnames=0  console=tty0 console=ttyS0,115200n8\n/boot/grub2/grub.cfg:128:    linux16 /boot/vmlinuz-0-rescue-36dc953195bb4389870d2591ff6bfea5 root=UUID=48609326-10e3-40c2-93b3-3f0d9798**** ro crashkernel=auto   net.ifnames=0  console=tty0 console=ttyS0,115200n8</code></pre></div></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-4am-75j-mx7\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-yqu-00y-2n7\">修复完成后，退出修复环境，然后检查问题实例的当前状态。</span><ol type=\"a\" class=\"ol substeps\" data-tag=\"substeps\" id=\"substeps-vvb-vmz-pry\"><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-qx5-9ba-htp\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-zm6-wn4-ogt\">运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-kw9-d3l-o6t\">exit</span>命令，退出<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-b8u-t0a-y0i\">chroot</span>环境。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-3t6-9y0-d4u\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-1jf-04k-vv2\">卸载前面步骤中挂载的虚拟文件系统。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-7qy-89v-5g9\">命令示例如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-ohe-hg0-po7\"><code>umount /mnt/dev\numount /mnt/proc\numount /mnt/sys</code></pre></div></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-2o5-w6y-y52\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-w64-cxn-0ku\">卸载异常ECS实例的系统盘。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-dpk-r7x-78h\">命令示例如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-5ls-vqj-er6\"><code>umount /mnt</code></pre></div></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-oi5-5eg-n02\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-ewn-jra-tpr\">恢复异常ECS实例的系统盘。具体操作，请参见<a class=\"xref\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/173883.html\">如何通过挂载到ECS实例作为数据盘的方式登录异常系统盘</a>的步骤五。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-fgh-gt2-rh8\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-mvd-607-gdo\">远程连接已修复的ECS实例，确认ECS实例恢复正常。</span></li></ol></li></ol></section></div></article></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/abnormal-instance-startup-common-errors-with-the-corresponding-solutions", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/solution-of-instances-cannot-be-started/\">实例无法启动的解决方案</a></span>\n <span>实例启动异常常见错误与对应解决方案</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>实例启动异常常见错误与对应解决方案</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-09-13 10:01:29</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2247341\"><p id=\"4fcbf340282s4\" data-tag=\"shortdesc\" class=\"shortdesc\">针对实例启动过程中因操作系统内配置异常、异常关机等问题导致操作系统无法正常启动的情况，您可以通过VNC登录实例发现的启动异常或者实例健康诊断工具返回的异常字段，在本文查看此类问题的解决方案。</p><div data-tag=\"taskbody\" class=\"taskbody\"><h2 id=\"b7fdb900308e3\"><b>Windows</b></h2><section id=\"161f4fb029low\" class=\"section\"><h3 id=\"1661761092\"><b>1662001135：Windows系统因异常进入恢复环境</b></h3><section id=\"ea194090d9wke\" class=\"section\"><h4 id=\"6569c901283gy\"><b>问题现象</b></h4><p id=\"9142e9d028nnh\">Windows系统ECS实例在较长时间段内正常运行，但是重启实例后无法进入操作系统。通过VNC登录实例时，Windows系统启动界面显示<b data-tag=\"uicontrol\" id=\"9796d0d0d9505\" class=\"uicontrol\">系统恢复选项</b>。</p><img placement=\"break\" alt=\"系统恢复选项\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8069291661/p484204.png\" id=\"img-yr3-jvn-4g4\" class=\"image break\"></section><section id=\"ee0a29d0d9z3i\" class=\"section\"><h4 id=\"6f155f0128cyj\"><b>问题原因</b></h4><p id=\"a33f19b028mr7\"><b data-tag=\"uicontrol\" id=\"716fb4f0d90m1\" class=\"uicontrol\">系统恢复选项</b>表示Windows系统进入了Windows恢复环境，Windows操作系统在遇到异常、无法启动的情况下，会进入恢复环境。可能原因如下：</p><ul id=\"a76f2ed2282w4\"><li id=\"a76f2ed028szy\"><p id=\"ac55267028qum\">系统注册表损坏、磁盘问题、驱动问题、系统文件损坏或丢失、启动配置数据（Boot Configuration Data，BCD）文件损坏等。</p></li><li id=\"acd812102838x\"><p id=\"afffb7e028dmb\">用户误操作、病毒、第三方杀毒软件、异常强制重启。</p></li></ul></section><section id=\"f059bf20d96zi\" class=\"section\"><h4 id=\"756ee3d028w94\"><b>解决方案</b></h4><p id=\"e5a3dd90282tj\">针对系统进入修复模式，建议您采用微软官方技术支持提出的方案进行处理。具体操作，请参见<a class=\"\" target=\"_blank\" href=\"https://technet.microsoft.com/en-us/library/dd744291(v=ws.10).aspx?spm=a2c4g.11186623.0.0.63f7LFkcLFkcBr\">How Windows RE Works</a>。</p><p id=\"efe5720028drc\">为了避免实例重启后进入系统恢复界面，确保系统能够从故障中恢复，在日常使用中，可以参考以下操作避免产生故障。</p><ul id=\"f22f3af228p10\"><li id=\"f22f3af0280ua\"><p id=\"f577611028zpl\">将重要数据放在数据盘。</p></li><li id=\"f72a1a2128rsj\"><p id=\"f72a1a2028ciq\">定期对系统盘、数据盘创建快照，以便发生问题时可以恢复数据。</p></li><li id=\"f8c860d128xi8\"><p id=\"f8c860d028x6r\">在修改系统注册表前备份注册表文件，避免误操作修改了系统文件。</p></li><li id=\"fa16168028lxh\"><p id=\"fa15ef70287ib\">定期运行Windows Update，确保安装微软最新安全更新。</p></li><li id=\"fb8dc26128gsl\"><p id=\"fb8dc26028pyt\">在ECS中启用<a title=\"\" class=\"xref\" href=\"/zh/security-center/product-overview/what-is-security-center#concept-bjv-y5w-ydb\">云安全中心</a>或其他商业版杀毒防护工具，定期杀毒、定期更新杀毒软件版本。</p></li></ul></section></section><section id=\"279e1230298px\" class=\"section\"><h3 id=\"1661762538\"><b>1662001136：Windows系统的文件系统出现异常</b></h3><section id=\"bac50d50d9z5y\" class=\"section\"><h4 id=\"7911d42128i9u\"><b>问题现象</b></h4><p id=\"aa209cc029yng\">通过VNC登录实例时，Windows系统启动界面显示<b data-tag=\"uicontrol\" id=\"4d1bc8ebd7jl6\" class=\"uicontrol\">Checking file system on</b>、<b data-tag=\"uicontrol\" id=\"4d1bc8edd7nm8\" class=\"uicontrol\">CHKDSK is verifying files</b>或<b data-tag=\"uicontrol\" id=\"4d1bc8efd7k8k\" class=\"uicontrol\">CHKDSK is verfying indexes</b>错误信息。</p></section><section id=\"f04736a0d92mm\" class=\"section\"><h4 id=\"7911d42228t8j\"><b>问题原因</b></h4><p id=\"d79c22f029vgo\">导致该问题的可能原因如下：</p><ul id=\"0f3ed7c229crj\"><li id=\"0f3ed7c029yz4\"><p id=\"0d9d5cc029e49\">ECS实例异常关机。</p></li><li id=\"10c80fd129aun\"><p id=\"10c80fd029efw\">Windows内部系统损坏。</p></li></ul></section><section id=\"19121b20d9aws\" class=\"section\"><h4 id=\"7911d42328ass\"><b>解决方案</b></h4><section id=\"240db0c0d9lvu\" class=\"section\"><p id=\"2bea8b00296rb\"><b>方案一：使用快照恢复系统盘</b></p><p id=\"78ad3d9129a96\">在存有快照的情况下，您可以使用快照来恢复系统盘的部分数据和配置。具体操作如下：</p><div type=\"warning\" id=\"f082d83030sxd\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"f172dd80305qh\">回滚云盘是不可逆操作，从快照的创建日期到回滚云盘时这段时间内的数据会丢失。为避免误操作，建议您在回滚前为云盘创建一份快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol data-tag=\"steps\" id=\"6711c8c12dfut\" docid=\"9688\" class=\"steps\"><li data-tag=\"step\" id=\"step-av5-b0s-c73\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"299e624130flx\" docid=\"380982\" class=\"step\"><p id=\"cc0d600037nju\"><span data-tag=\"cmd\" id=\"cmd-brj-6yn-8vy\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-d8t-8oi-933\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-gwf-0yb-z74\" class=\"uicontrol\">存储与快照</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-7g6-j0f-4ff\" class=\"uicontrol\">快照</b></span>。</span></p></li><li data-tag=\"step\" id=\"step-wi8-r36-wzv\" class=\"step\"><p id=\"cc0dfc4237gix\"><span data-tag=\"cmd\" id=\"cmd-acu-560-w33\" class=\"cmd\">在页面左侧顶部，选择目标资源所在的地域。<img data-tag=\"image\" id=\"image-3wz-243-ym2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0777199861/p680076.png\" width=\"500\" alt=\"地域\" placement=\"break\" class=\"image break\"> </span></p></li><li data-tag=\"step\" id=\"step-khh-x7j-t04\" class=\"step\"><p id=\"b4e82620302mq\">单击<b data-tag=\"uicontrol\" id=\"4e354bf0304xo\" class=\"uicontrol\">云盘快照</b>页签。</p></li><li id=\"46d3f41030zc9\"><p id=\"46d3cd0030g7i\">找到需要回滚云盘的快照，在<b data-tag=\"uicontrol\" id=\"uicontrol-nkb-4wx-rln\" class=\"uicontrol\">操作</b>列中单击<b data-tag=\"uicontrol\" id=\"uicontrol-z4l-k3s-8vc\" class=\"uicontrol\">回滚云盘</b>。 </p></li><li data-tag=\"step\" id=\"step-ex9-3lg-7c5\" class=\"step\"><p id=\"b4e8262430qog\">在弹出的对话框中，单击<b data-tag=\"uicontrol\" id=\"uicontrol-2wb-2l7-rqz\" class=\"uicontrol\">确定</b>。</p></li></ol></section><section id=\"27d6edc0d9bca\" class=\"section\"><p id=\"307f556129qbo\"><b>方案二：重置系统盘</b></p><p id=\"e089d2d129fy0\">您可以重置系统盘来修复系统异常。具体操作如下：</p><div type=\"warning\" id=\"82ced97030ydm\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"ad3ecd503014g\">重置系统盘操作会清空云盘已写入数据，建议操作前创建快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol id=\"3af5b84130hoy\" docid=\"3811558\"><li id=\"b9681a9251ptg\"><p id=\"b9681a9351g9z\">停止ECS实例。</p><ol id=\"b9681a9451ofa\"><li data-tag=\"step\" id=\"b9681a95515vj\" platform=\"public\" props=\"china intl\" docid=\"380982\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"b9681a995110w\" docid=\"380982\" class=\"step\"><p id=\"cc0c75a0379qu\"><span data-tag=\"cmd\" id=\"cmd-9ro-yc5-vx4\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-kq7-suy-h2g\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-puq-bs2-grd\" class=\"uicontrol\">实例与镜像</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-fk3-i03-vyq\" class=\"uicontrol\">实例</b></span>。</span></p></li><li id=\"b9681a9f51ou3\"><p id=\"b9681aa0517g2\">找到需要停止的ECS实例，在<b data-tag=\"uicontrol\" id=\"b9681aa151189\" class=\"uicontrol\">操作</b>列，<span data-tag=\"ph\" props=\"china\" id=\"b9681aa251x3q\" data-cond-props=\"china\" class=\"ph\">单击<img placement=\"inline\" alt=\"icon\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9009291661/p484183.png\" id=\"b9681aa351lc8\" class=\"image inline\"> &gt; <b data-tag=\"uicontrol\" id=\"b9681aa451wdv\" class=\"uicontrol\">实例状态</b> &gt; <b data-tag=\"uicontrol\" id=\"b9681aa5511hv\" class=\"uicontrol\">停止</b></span>。</p></li></ol></li><li id=\"b9681aaa51gct\"><p id=\"b9681aab51qe6\">重新初始化系统盘。</p><ol id=\"b9681aac51x58\"><li id=\"b9681aad51c3o\"><p id=\"b9681aae51w2e\">找到需要重新初始化系统盘的实例，单击实例ID进入<b data-tag=\"uicontrol\" id=\"b9681aaf51rig\" class=\"uicontrol\">实例详情</b>页。</p></li><li id=\"b9681ab051ezv\"><p id=\"b9681ab151cni\">单击<b data-tag=\"uicontrol\" id=\"b9681ab2511az\" class=\"uicontrol\">云盘</b>页签。</p></li><li id=\"b9681ab351j5n\"><p id=\"b9681ab451vfi\">找到系统盘，在<b data-tag=\"uicontrol\" id=\"b9681ab551flv\" class=\"uicontrol\">操作</b>列中，单击<b data-tag=\"uicontrol\" id=\"b9681ab6515r6\" class=\"uicontrol\">重新初始化云盘</b>。</p></li><li id=\"b9681ab7519bs\"><p id=\"b9681ab851q10\">在弹出的<b data-tag=\"uicontrol\" id=\"b9681ab951em5\" class=\"uicontrol\">重新初始化云盘</b>对话框里，配置重新初始化参数。</p></li><li id=\"b96841a051i8o\"><p id=\"b96841a151f7c\">单击<b data-tag=\"uicontrol\" id=\"b96841a251hoe\" class=\"uicontrol\">确认重新初始化云盘</b>。</p><p id=\"b96841a3517zz\">完成重新初始化后，实例会自动启动。</p><img width=\"600\" placement=\"break\" alt=\"重新初始化云盘\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8069291661/p484203.png\" id=\"b96841a551p42\" class=\"image break\"></li></ol></li></ol></section></section></section><section id=\"3456c12029h68\" class=\"section\"><h3 id=\"1661762539\"><b>1662001137：Windows系统出现内部错误</b></h3><section id=\"2ed87260d92ha\" class=\"section\"><h4 id=\"7d6bdf7128ncf\"><b>问题现象</b></h4><p id=\"d32539702934q\">通过VNC登录实例时，Windows启动界面显示<b data-tag=\"uicontrol\" id=\"4d1c8c48d70gv\" class=\"uicontrol\">出现内部错误</b>或<b data-tag=\"uicontrol\" id=\"4d1c8c4ad7zj5\" class=\"uicontrol\">系统找不到指定的文件</b>错误信息。</p></section><section id=\"32e8ca80d9cvi\" class=\"section\"><h4 id=\"7d6bdf72289ws\"><b>问题原因</b></h4><p id=\"edb0b9e029vg7\">该问题可能是因为Windows操作系统损坏，导致系统启动失败出现报错。</p></section><section id=\"73abec50d99mv\" class=\"section\"><h4 id=\"7d6bdf7328hwy\"><b>解决方案</b></h4><p id=\"d6c30cb0d96ho\">您可以尝试重启实例来修复该错误，如无法修复，可以选择恢复系统盘或重置系统盘来修复。</p><section id=\"37bc2480d95fh\" class=\"section\"><p id=\"20bcf6a0291p0\"><b>方案一：重启实例</b></p><p id=\"766e111129ii4\">您可以尝试重启实例来修复系统错误。具体操作如下：</p><ol id=\"c4ad72002de5u\"><li data-tag=\"step\" id=\"c4ad72012d9xi\" platform=\"public\" props=\"china intl\" docid=\"380982\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"c4ad72032dop6\" docid=\"380982\" class=\"step\"><p id=\"cc0c75a0379qu\"><span data-tag=\"cmd\" id=\"cmd-9ro-yc5-vx4\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-kq7-suy-h2g\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-puq-bs2-grd\" class=\"uicontrol\">实例与镜像</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-fk3-i03-vyq\" class=\"uicontrol\">实例</b></span>。</span></p></li><li id=\"faecc6402dbo7\"><p id=\"1dfed4d02fjdp\">在顶部菜单栏左上角处，选择地域。</p></li><li id=\"c4ad72052dmyl\"><p id=\"c4ad72062d1n8\">找到需要重启的ECS实例。</p><ul id=\"32c1d5b12dsuk\"><li id=\"32c1aea02d4ny\"><p id=\"b266908f6e7q3\">如果重启一个实例，在<b data-tag=\"uicontrol\" id=\"4d1cda54d7ese\" class=\"uicontrol\">操作</b>列，<span data-tag=\"ph\" props=\"china\" id=\"c4ad72072dxeq\" data-cond-props=\"china\" class=\"ph\">单击<img placement=\"inline\" alt=\"icon\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9009291661/p484183.png\" id=\"c4ad72082d6go\" class=\"image inline\"> <b data-tag=\"uicontrol\" id=\"4d1cda58d71by\" class=\"uicontrol\">&gt; 实例状态 &gt; 重启</b></span>。</p></li><li id=\"433765902de7w\"><p id=\"1dfed4d12fue4\">如果重启多个实例，选择多个实例（所选实例的状态必须一致），并在页面底部单击<span data-tag=\"ph\" props=\"china\" id=\"659290102dl7k\" data-cond-props=\"china\" class=\"ph\"><img placement=\"inline\" alt=\"三点\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3645542661/p486910.png\" id=\"img-ue5-g1j-ed8\" class=\"image inline\"> <b data-tag=\"uicontrol\" id=\"4d1cda61d78z9\" class=\"uicontrol\">&gt; 重启</b></span>。</p></li></ul></li><li id=\"a2cbeee02dnyv\"><p id=\"1dfed4d22fpek\">在<b data-tag=\"uicontrol\" id=\"4d1cda68d7o7n\" class=\"uicontrol\">重启实例</b>对话框中，选择<b data-tag=\"uicontrol\" id=\"4d1cda6ad79g8\" class=\"uicontrol\">重启方式</b>，并单击<b data-tag=\"uicontrol\" id=\"4d1cda6cd7zwi\" class=\"uicontrol\">确定</b>。</p></li></ol></section><section id=\"408d8720d97pe\" class=\"section\"><p id=\"9ce5538029pba\"><b>方案二：使用快照恢复系统盘</b></p><p id=\"b608df80292e7\">在存有快照的情况下，您可以使用快照来恢复系统盘。具体操作如下：</p><div type=\"warning\" id=\"2d8177f030n0p\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"2de3e34030ly5\">回滚云盘是不可逆操作，从快照的创建日期到回滚云盘时这段时间内的数据会丢失。为避免误操作，建议您在回滚前为云盘创建一份快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol data-tag=\"steps\" id=\"7fc63e712dj3v\" docid=\"9688\" class=\"steps\"><li data-tag=\"step\" id=\"step-av5-b0s-c73\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"299e624130flx\" docid=\"380982\" class=\"step\"><p id=\"cc0d600037nju\"><span data-tag=\"cmd\" id=\"cmd-brj-6yn-8vy\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-d8t-8oi-933\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-gwf-0yb-z74\" class=\"uicontrol\">存储与快照</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-7g6-j0f-4ff\" class=\"uicontrol\">快照</b></span>。</span></p></li><li data-tag=\"step\" id=\"step-wi8-r36-wzv\" class=\"step\"><p id=\"cc0dfc4237gix\"><span data-tag=\"cmd\" id=\"cmd-acu-560-w33\" class=\"cmd\">在页面左侧顶部，选择目标资源所在的地域。<img data-tag=\"image\" id=\"image-3wz-243-ym2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0777199861/p680076.png\" width=\"500\" alt=\"地域\" placement=\"break\" class=\"image break\"> </span></p></li><li data-tag=\"step\" id=\"step-khh-x7j-t04\" class=\"step\"><p id=\"b4e82620302mq\">单击<b data-tag=\"uicontrol\" id=\"4e354bf0304xo\" class=\"uicontrol\">云盘快照</b>页签。</p></li><li id=\"46d3f41030zc9\"><p id=\"46d3cd0030g7i\">找到需要回滚云盘的快照，在<b data-tag=\"uicontrol\" id=\"uicontrol-nkb-4wx-rln\" class=\"uicontrol\">操作</b>列中单击<b data-tag=\"uicontrol\" id=\"uicontrol-z4l-k3s-8vc\" class=\"uicontrol\">回滚云盘</b>。 </p></li><li data-tag=\"step\" id=\"step-ex9-3lg-7c5\" class=\"step\"><p id=\"b4e8262430qog\">在弹出的对话框中，单击<b data-tag=\"uicontrol\" id=\"uicontrol-2wb-2l7-rqz\" class=\"uicontrol\">确定</b>。</p></li></ol></section><section id=\"49842500d9kcb\" class=\"section\"><p id=\"e619b69029vld\"><b>方案三：重置系统盘</b></p><p id=\"e619b693292bt\">您可以重置系统盘来修复系统异常。具体操作如下：</p><div type=\"warning\" id=\"9b7fa67030aql\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"9bce1490305b7\">重置系统盘操作会清空云盘已写入数据，建议操作前创建快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol id=\"dbe92e3130tps\" docid=\"3811558\"><li id=\"b9681a9251ptg\"><p id=\"b9681a9351g9z\">停止ECS实例。</p><ol id=\"b9681a9451ofa\"><li data-tag=\"step\" id=\"b9681a95515vj\" platform=\"public\" props=\"china intl\" docid=\"380982\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"b9681a995110w\" docid=\"380982\" class=\"step\"><p id=\"cc0c75a0379qu\"><span data-tag=\"cmd\" id=\"cmd-9ro-yc5-vx4\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-kq7-suy-h2g\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-puq-bs2-grd\" class=\"uicontrol\">实例与镜像</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-fk3-i03-vyq\" class=\"uicontrol\">实例</b></span>。</span></p></li><li id=\"b9681a9f51ou3\"><p id=\"b9681aa0517g2\">找到需要停止的ECS实例，在<b data-tag=\"uicontrol\" id=\"b9681aa151189\" class=\"uicontrol\">操作</b>列，<span data-tag=\"ph\" props=\"china\" id=\"b9681aa251x3q\" data-cond-props=\"china\" class=\"ph\">单击<img placement=\"inline\" alt=\"icon\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9009291661/p484183.png\" id=\"b9681aa351lc8\" class=\"image inline\"> &gt; <b data-tag=\"uicontrol\" id=\"b9681aa451wdv\" class=\"uicontrol\">实例状态</b> &gt; <b data-tag=\"uicontrol\" id=\"b9681aa5511hv\" class=\"uicontrol\">停止</b></span>。</p></li></ol></li><li id=\"b9681aaa51gct\"><p id=\"b9681aab51qe6\">重新初始化系统盘。</p><ol id=\"b9681aac51x58\"><li id=\"b9681aad51c3o\"><p id=\"b9681aae51w2e\">找到需要重新初始化系统盘的实例，单击实例ID进入<b data-tag=\"uicontrol\" id=\"b9681aaf51rig\" class=\"uicontrol\">实例详情</b>页。</p></li><li id=\"b9681ab051ezv\"><p id=\"b9681ab151cni\">单击<b data-tag=\"uicontrol\" id=\"b9681ab2511az\" class=\"uicontrol\">云盘</b>页签。</p></li><li id=\"b9681ab351j5n\"><p id=\"b9681ab451vfi\">找到系统盘，在<b data-tag=\"uicontrol\" id=\"b9681ab551flv\" class=\"uicontrol\">操作</b>列中，单击<b data-tag=\"uicontrol\" id=\"b9681ab6515r6\" class=\"uicontrol\">重新初始化云盘</b>。</p></li><li id=\"b9681ab7519bs\"><p id=\"b9681ab851q10\">在弹出的<b data-tag=\"uicontrol\" id=\"b9681ab951em5\" class=\"uicontrol\">重新初始化云盘</b>对话框里，配置重新初始化参数。</p></li><li id=\"b96841a051i8o\"><p id=\"b96841a151f7c\">单击<b data-tag=\"uicontrol\" id=\"b96841a251hoe\" class=\"uicontrol\">确认重新初始化云盘</b>。</p><p id=\"b96841a3517zz\">完成重新初始化后，实例会自动启动。</p><img width=\"600\" placement=\"break\" alt=\"重新初始化云盘\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8069291661/p484203.png\" id=\"b96841a551p42\" class=\"image break\"></li></ol></li></ol></section></section></section><section id=\"8c51a480294g2\" class=\"section\"><h3 id=\"1661762540\"><b>1662001138：Windows系统引导配置数据（BCD）中的文件丢失或损坏</b></h3><section id=\"0e815fd0d9gfx\" class=\"section\"><h4 id=\"2c15bde128jr5\"><b>问题现象</b></h4><p id=\"45440c60292s6\">通过VNC登录实例时，Windows启动界面显示<b data-tag=\"uicontrol\" id=\"4d1d76a9d7o4x\" class=\"uicontrol\">An error occurred while attempting to read the boot configuration data</b>错误信息。<img height=\"400\" width=\"500\" placement=\"break\" alt=\"image\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6478391661/p484465.png\" id=\"3f658721295wn\" class=\"image break\"></p></section><section id=\"10d07ff0d9yte\" class=\"section\"><h4 id=\"2c15bde228g3g\"><b>问题原因</b></h4><p id=\"be8304f0297gm\">该问题可能是因为Windows系统引导配置数据（Boot Configuration Data，BCD）配置文件丢失或者损坏，导致系统启动失败。</p></section><section id=\"17b777b0d9q98\" class=\"section\"><h4 id=\"2c15bde328gd1\"><b>解决方案</b></h4><p id=\"d586972129ich\">在存有快照的情况下，您可以使用快照来恢复系统盘。具体操作如下：</p><div id=\"39783670305nk\" type=\"warning\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"39af9a2030v23\">回滚云盘是不可逆操作，从快照的创建日期到回滚云盘时这段时间内的数据会丢失。为避免误操作，建议您在回滚前为云盘创建一份快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol data-tag=\"steps\" id=\"57494c512dz70\" docid=\"9688\" class=\"steps\"><li data-tag=\"step\" id=\"step-av5-b0s-c73\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"299e624130flx\" docid=\"380982\" class=\"step\"><p id=\"cc0d600037nju\"><span data-tag=\"cmd\" id=\"cmd-brj-6yn-8vy\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-d8t-8oi-933\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-gwf-0yb-z74\" class=\"uicontrol\">存储与快照</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-7g6-j0f-4ff\" class=\"uicontrol\">快照</b></span>。</span></p></li><li data-tag=\"step\" id=\"step-wi8-r36-wzv\" class=\"step\"><p id=\"cc0dfc4237gix\"><span data-tag=\"cmd\" id=\"cmd-acu-560-w33\" class=\"cmd\">在页面左侧顶部，选择目标资源所在的地域。<img data-tag=\"image\" id=\"image-3wz-243-ym2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0777199861/p680076.png\" width=\"500\" alt=\"地域\" placement=\"break\" class=\"image break\"> </span></p></li><li data-tag=\"step\" id=\"step-khh-x7j-t04\" class=\"step\"><p id=\"b4e82620302mq\">单击<b data-tag=\"uicontrol\" id=\"4e354bf0304xo\" class=\"uicontrol\">云盘快照</b>页签。</p></li><li id=\"46d3f41030zc9\"><p id=\"46d3cd0030g7i\">找到需要回滚云盘的快照，在<b data-tag=\"uicontrol\" id=\"uicontrol-nkb-4wx-rln\" class=\"uicontrol\">操作</b>列中单击<b data-tag=\"uicontrol\" id=\"uicontrol-z4l-k3s-8vc\" class=\"uicontrol\">回滚云盘</b>。 </p></li><li data-tag=\"step\" id=\"step-ex9-3lg-7c5\" class=\"step\"><p id=\"b4e8262430qog\">在弹出的对话框中，单击<b data-tag=\"uicontrol\" id=\"uicontrol-2wb-2l7-rqz\" class=\"uicontrol\">确定</b>。</p></li></ol></section></section><section id=\"c327e19029hry\" class=\"section\"><h3 id=\"2c15bde428die\"><b>1662001139：Windows系统的引导扇区或驱动文件丢失或损坏</b></h3><section id=\"3a967830d91cm\" class=\"section\"><h4 id=\"2c15bde52861c\"><b>问题现象</b></h4><p id=\"5f4deed029q8y\">通过VNC登录实例时，Windows系统启动界面蓝屏，显示<b data-tag=\"uicontrol\" id=\"4d1e12e3d7mwm\" class=\"uicontrol\">INACCESSIBLE BOOT DEVICE</b>错误信息。<img height=\"400\" width=\"500\" placement=\"break\" alt=\"image\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4437391661/p484449.png\" id=\"img-imb-78o-kbh\" class=\"image break\"></p></section><section id=\"4b06ff00d9b2k\" class=\"section\"><h4 id=\"2c15bde628d1j\"><b>问题原因</b></h4><p id=\"68bbe8e029uis\">出现该问题的可能原因如下：</p><ul id=\"840ae063297p7\"><li id=\"840ae06029xp3\"><p id=\"917c9cd129rld\">Windows系统引导扇区丢失或破坏。</p></li><li id=\"840ae0612949s\"><p id=\"917c9cd029f1v\">Windows系统驱动文件丢失或损坏。</p></li></ul></section><section id=\"6040cdb0d9sp3\" class=\"section\"><h4 id=\"2c15bde728sh6\"><b>解决方案</b></h4><p id=\"c1162100292ef\">在存有快照的情况下，您可以使用快照来恢复系统盘。具体操作如下：</p><div id=\"4879c3f130lf0\" type=\"warning\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"489d789030w1i\"> 回滚云盘是不可逆操作，从快照的创建日期到回滚云盘时这段时间内的数据会丢失。为避免误操作，建议您在回滚前为云盘创建一份快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol data-tag=\"steps\" id=\"6b5374a12dkn5\" docid=\"9688\" class=\"steps\"><li data-tag=\"step\" id=\"step-av5-b0s-c73\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"299e624130flx\" docid=\"380982\" class=\"step\"><p id=\"cc0d600037nju\"><span data-tag=\"cmd\" id=\"cmd-brj-6yn-8vy\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-d8t-8oi-933\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-gwf-0yb-z74\" class=\"uicontrol\">存储与快照</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-7g6-j0f-4ff\" class=\"uicontrol\">快照</b></span>。</span></p></li><li data-tag=\"step\" id=\"step-wi8-r36-wzv\" class=\"step\"><p id=\"cc0dfc4237gix\"><span data-tag=\"cmd\" id=\"cmd-acu-560-w33\" class=\"cmd\">在页面左侧顶部，选择目标资源所在的地域。<img data-tag=\"image\" id=\"image-3wz-243-ym2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0777199861/p680076.png\" width=\"500\" alt=\"地域\" placement=\"break\" class=\"image break\"> </span></p></li><li data-tag=\"step\" id=\"step-khh-x7j-t04\" class=\"step\"><p id=\"b4e82620302mq\">单击<b data-tag=\"uicontrol\" id=\"4e354bf0304xo\" class=\"uicontrol\">云盘快照</b>页签。</p></li><li id=\"46d3f41030zc9\"><p id=\"46d3cd0030g7i\">找到需要回滚云盘的快照，在<b data-tag=\"uicontrol\" id=\"uicontrol-nkb-4wx-rln\" class=\"uicontrol\">操作</b>列中单击<b data-tag=\"uicontrol\" id=\"uicontrol-z4l-k3s-8vc\" class=\"uicontrol\">回滚云盘</b>。 </p></li><li data-tag=\"step\" id=\"step-ex9-3lg-7c5\" class=\"step\"><p id=\"b4e8262430qog\">在弹出的对话框中，单击<b data-tag=\"uicontrol\" id=\"uicontrol-2wb-2l7-rqz\" class=\"uicontrol\">确定</b>。</p></li></ol></section></section><section id=\"cf001b9029j1p\" class=\"section\"><h3 id=\"54a82d4029rge\"><b>1662001140：Windows系统的Bootmgr配置丢失或损坏</b></h3><section id=\"638c7640d9pvp\" class=\"section\"><h4 id=\"54a82d4129h9u\"><b>问题现象</b></h4><p id=\"6792633029mbg\">通过VNC登录实例时，Windows系统启动界面显示<b data-tag=\"uicontrol\" id=\"4d1e8807d79n7\" class=\"uicontrol\">bootmgr is missing</b>错误信息。</p></section><section id=\"6db41a10d9tan\" class=\"section\"><h4 id=\"54a82d42299i3\"><b>问题原因</b></h4><p id=\"5e829800291jw\">该问题可能是因为Windows系统启动管理器（Bootmgr）丢失或者被破坏，导致系统启动失败。</p></section><section id=\"71cf2090d9e5c\" class=\"section\"><h4 id=\"54a82d4329r11\"><b>解决方案</b></h4><p id=\"509ab7e029dnk\">在存有快照的情况下，您可以使用快照来恢复系统盘。具体操作如下：</p><div id=\"4e07e27030b77\" type=\"warning\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"4e3b4e8030rsj\">回滚云盘是不可逆操作，从快照的创建日期到回滚云盘时这段时间内的数据会丢失。为避免误操作，建议您在回滚前为云盘创建一份快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol data-tag=\"steps\" id=\"7d6e77212dyy3\" docid=\"9688\" class=\"steps\"><li data-tag=\"step\" id=\"step-av5-b0s-c73\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"299e624130flx\" docid=\"380982\" class=\"step\"><p id=\"cc0d600037nju\"><span data-tag=\"cmd\" id=\"cmd-brj-6yn-8vy\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-d8t-8oi-933\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-gwf-0yb-z74\" class=\"uicontrol\">存储与快照</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-7g6-j0f-4ff\" class=\"uicontrol\">快照</b></span>。</span></p></li><li data-tag=\"step\" id=\"step-wi8-r36-wzv\" class=\"step\"><p id=\"cc0dfc4237gix\"><span data-tag=\"cmd\" id=\"cmd-acu-560-w33\" class=\"cmd\">在页面左侧顶部，选择目标资源所在的地域。<img data-tag=\"image\" id=\"image-3wz-243-ym2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0777199861/p680076.png\" width=\"500\" alt=\"地域\" placement=\"break\" class=\"image break\"> </span></p></li><li data-tag=\"step\" id=\"step-khh-x7j-t04\" class=\"step\"><p id=\"b4e82620302mq\">单击<b data-tag=\"uicontrol\" id=\"4e354bf0304xo\" class=\"uicontrol\">云盘快照</b>页签。</p></li><li id=\"46d3f41030zc9\"><p id=\"46d3cd0030g7i\">找到需要回滚云盘的快照，在<b data-tag=\"uicontrol\" id=\"uicontrol-nkb-4wx-rln\" class=\"uicontrol\">操作</b>列中单击<b data-tag=\"uicontrol\" id=\"uicontrol-z4l-k3s-8vc\" class=\"uicontrol\">回滚云盘</b>。 </p></li><li data-tag=\"step\" id=\"step-ex9-3lg-7c5\" class=\"step\"><p id=\"b4e8262430qog\">在弹出的对话框中，单击<b data-tag=\"uicontrol\" id=\"uicontrol-2wb-2l7-rqz\" class=\"uicontrol\">确定</b>。</p></li></ol></section></section><section id=\"e3c1ad0029jdz\" class=\"section\"><h3 id=\"585d942029ezl\"><b>1662001141：Windows系统的系统文件丢失或损坏</b></h3><section id=\"aa5fb7d0d9cqj\" class=\"section\"><h4 id=\"585d942129qvi\"><b>问题现象</b></h4><p id=\"b70940a029eck\">通过VNC登录实例时，Windows系统启动失败，启动界面显示<b data-tag=\"uicontrol\" id=\"4d1ed62fd7z31\" class=\"uicontrol\">missing operating system</b>错误信息。</p></section><section id=\"ac6747a0d9lzb\" class=\"section\"><h4 id=\"585d942229mgu\"><b>问题原因</b></h4><p id=\"a763aaf029cnq\">该问题可能是因为Windows操作系统文件丢失或者破坏，导致系统启动失败。</p></section><section id=\"b09d0210d9n8z\" class=\"section\"><h4 id=\"585d942329dd9\"><b>解决方案</b></h4><p id=\"9f9671e0290e8\">在存有快照的情况下，您可以使用快照来恢复系统盘。具体操作如下：</p><div id=\"5489138030joh\" type=\"warning\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"54cecf1030fhj\">回滚云盘是不可逆操作，从快照的创建日期到回滚云盘时这段时间内的数据会丢失。为避免误操作，建议您在回滚前为云盘创建一份快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol data-tag=\"steps\" id=\"cbaaffd12dak6\" docid=\"9688\" class=\"steps\"><li data-tag=\"step\" id=\"step-av5-b0s-c73\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"299e624130flx\" docid=\"380982\" class=\"step\"><p id=\"cc0d600037nju\"><span data-tag=\"cmd\" id=\"cmd-brj-6yn-8vy\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-d8t-8oi-933\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-gwf-0yb-z74\" class=\"uicontrol\">存储与快照</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-7g6-j0f-4ff\" class=\"uicontrol\">快照</b></span>。</span></p></li><li data-tag=\"step\" id=\"step-wi8-r36-wzv\" class=\"step\"><p id=\"cc0dfc4237gix\"><span data-tag=\"cmd\" id=\"cmd-acu-560-w33\" class=\"cmd\">在页面左侧顶部，选择目标资源所在的地域。<img data-tag=\"image\" id=\"image-3wz-243-ym2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0777199861/p680076.png\" width=\"500\" alt=\"地域\" placement=\"break\" class=\"image break\"> </span></p></li><li data-tag=\"step\" id=\"step-khh-x7j-t04\" class=\"step\"><p id=\"b4e82620302mq\">单击<b data-tag=\"uicontrol\" id=\"4e354bf0304xo\" class=\"uicontrol\">云盘快照</b>页签。</p></li><li id=\"46d3f41030zc9\"><p id=\"46d3cd0030g7i\">找到需要回滚云盘的快照，在<b data-tag=\"uicontrol\" id=\"uicontrol-nkb-4wx-rln\" class=\"uicontrol\">操作</b>列中单击<b data-tag=\"uicontrol\" id=\"uicontrol-z4l-k3s-8vc\" class=\"uicontrol\">回滚云盘</b>。 </p></li><li data-tag=\"step\" id=\"step-ex9-3lg-7c5\" class=\"step\"><p id=\"b4e8262430qog\">在弹出的对话框中，单击<b data-tag=\"uicontrol\" id=\"uicontrol-2wb-2l7-rqz\" class=\"uicontrol\">确定</b>。</p></li></ol></section></section><section id=\"ea7056b029744\" class=\"section\"><h3 id=\"585d942429hop\"><b>1662001142：Windows系统的注册表丢失或者损坏</b></h3><section id=\"b3b25860d9ziv\" class=\"section\"><h4 id=\"585d9425292gf\"><b>问题现象</b></h4><p id=\"0cf2cb4029rpi\">通过VNC登录实例时，Windows系统启动失败，启动界面显示<b data-tag=\"uicontrol\" id=\"4d1f2452d7yew\" class=\"uicontrol\">Windows未能启动，原因可能是最近更改了硬件或软件</b>错误信息。<img height=\"400\" width=\"500\" placement=\"break\" alt=\"image\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6478391661/p484465.png\" id=\"img-0qc-528-r29\" class=\"image break\"></p></section><section id=\"b5a99480d9vwn\" class=\"section\"><h4 id=\"585d9426292us\"><b>问题原因</b></h4><p id=\"5acc737029r7e\">该问题可能是因为Windows系统注册表丢失或者破坏，导致系统无法加载。</p></section><section id=\"b96f9d30d9a7j\" class=\"section\"><h4 id=\"585d942729en1\"><b>解决方案</b></h4><p id=\"a067f85029rck\">在存有快照的情况下，您可以使用快照来恢复系统盘。具体操作如下：</p><div id=\"5d10ea0030col\" type=\"warning\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"5d4edd6030ex5\">回滚云盘是不可逆操作，从快照的创建日期到回滚云盘时这段时间内的数据会丢失。为避免误操作，建议您在回滚前为云盘创建一份快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol data-tag=\"steps\" id=\"e1349c312dbb5\" docid=\"9688\" class=\"steps\"><li data-tag=\"step\" id=\"step-av5-b0s-c73\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"299e624130flx\" docid=\"380982\" class=\"step\"><p id=\"cc0d600037nju\"><span data-tag=\"cmd\" id=\"cmd-brj-6yn-8vy\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-d8t-8oi-933\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-gwf-0yb-z74\" class=\"uicontrol\">存储与快照</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-7g6-j0f-4ff\" class=\"uicontrol\">快照</b></span>。</span></p></li><li data-tag=\"step\" id=\"step-wi8-r36-wzv\" class=\"step\"><p id=\"cc0dfc4237gix\"><span data-tag=\"cmd\" id=\"cmd-acu-560-w33\" class=\"cmd\">在页面左侧顶部，选择目标资源所在的地域。<img data-tag=\"image\" id=\"image-3wz-243-ym2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0777199861/p680076.png\" width=\"500\" alt=\"地域\" placement=\"break\" class=\"image break\"> </span></p></li><li data-tag=\"step\" id=\"step-khh-x7j-t04\" class=\"step\"><p id=\"b4e82620302mq\">单击<b data-tag=\"uicontrol\" id=\"4e354bf0304xo\" class=\"uicontrol\">云盘快照</b>页签。</p></li><li id=\"46d3f41030zc9\"><p id=\"46d3cd0030g7i\">找到需要回滚云盘的快照，在<b data-tag=\"uicontrol\" id=\"uicontrol-nkb-4wx-rln\" class=\"uicontrol\">操作</b>列中单击<b data-tag=\"uicontrol\" id=\"uicontrol-z4l-k3s-8vc\" class=\"uicontrol\">回滚云盘</b>。 </p></li><li data-tag=\"step\" id=\"step-ex9-3lg-7c5\" class=\"step\"><p id=\"b4e8262430qog\">在弹出的对话框中，单击<b data-tag=\"uicontrol\" id=\"uicontrol-2wb-2l7-rqz\" class=\"uicontrol\">确定</b>。</p></li></ol></section></section><section id=\"7c456a00305l3\" class=\"section\"><h3 id=\"7c456a01304ig\"><b>1662001151：Windows sysprep因实例重启未正常完成，导致操作系统初始化异常</b></h3><section id=\"bc87d9b0d9wq6\" class=\"section\"><h4 id=\"7c456a0230mzd\"><b>问题现象</b></h4><p id=\"7c456a03300vo\">ECS实例意外重启或遇到错误，通过VNC登录实例时，Windows启动界面显示<b data-tag=\"uicontrol\" id=\"4d1f9971d7hph\" class=\"uicontrol\">Windows无法完成安装</b>错误信息。<img width=\"500\" placement=\"break\" alt=\"安装Windows\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9009291661/p484180.png\" id=\"7c456a0430qzk\" class=\"image break\"></p></section><section id=\"c045a500d9tgp\" class=\"section\"><h4 id=\"7c456a0530gk2\"><b>问题原因</b></h4><p id=\"7c456a06301sy\">该问题可能是由于系统准备（Sysprep）未完成，重启实例导致出现异常。</p></section><section id=\"c33bda90d90t1\" class=\"section\"><h4 id=\"7c456a0730l7w\"><b>解决方案</b></h4><div type=\"warning\" id=\"7c456a0830u2j\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"7c456a0930zft\">重置系统盘操作会清空云盘已写入数据，建议操作前创建快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol id=\"7c456a0a30611\"><li id=\"b9681a9251ptg\"><p id=\"b9681a9351g9z\">停止ECS实例。</p><ol id=\"b9681a9451ofa\"><li data-tag=\"step\" id=\"b9681a95515vj\" platform=\"public\" props=\"china intl\" docid=\"380982\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"b9681a995110w\" docid=\"380982\" class=\"step\"><p id=\"cc0c75a0379qu\"><span data-tag=\"cmd\" id=\"cmd-9ro-yc5-vx4\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-kq7-suy-h2g\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-puq-bs2-grd\" class=\"uicontrol\">实例与镜像</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-fk3-i03-vyq\" class=\"uicontrol\">实例</b></span>。</span></p></li><li id=\"b9681a9f51ou3\"><p id=\"b9681aa0517g2\">找到需要停止的ECS实例，在<b data-tag=\"uicontrol\" id=\"b9681aa151189\" class=\"uicontrol\">操作</b>列，<span data-tag=\"ph\" props=\"china\" id=\"b9681aa251x3q\" data-cond-props=\"china\" class=\"ph\">单击<img placement=\"inline\" alt=\"icon\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9009291661/p484183.png\" id=\"b9681aa351lc8\" class=\"image inline\"> &gt; <b data-tag=\"uicontrol\" id=\"b9681aa451wdv\" class=\"uicontrol\">实例状态</b> &gt; <b data-tag=\"uicontrol\" id=\"b9681aa5511hv\" class=\"uicontrol\">停止</b></span>。</p></li></ol></li><li id=\"b9681aaa51gct\"><p id=\"b9681aab51qe6\">重新初始化系统盘。</p><ol id=\"b9681aac51x58\"><li id=\"b9681aad51c3o\"><p id=\"b9681aae51w2e\">找到需要重新初始化系统盘的实例，单击实例ID进入<b data-tag=\"uicontrol\" id=\"b9681aaf51rig\" class=\"uicontrol\">实例详情</b>页。</p></li><li id=\"b9681ab051ezv\"><p id=\"b9681ab151cni\">单击<b data-tag=\"uicontrol\" id=\"b9681ab2511az\" class=\"uicontrol\">云盘</b>页签。</p></li><li id=\"b9681ab351j5n\"><p id=\"b9681ab451vfi\">找到系统盘，在<b data-tag=\"uicontrol\" id=\"b9681ab551flv\" class=\"uicontrol\">操作</b>列中，单击<b data-tag=\"uicontrol\" id=\"b9681ab6515r6\" class=\"uicontrol\">重新初始化云盘</b>。</p></li><li id=\"b9681ab7519bs\"><p id=\"b9681ab851q10\">在弹出的<b data-tag=\"uicontrol\" id=\"b9681ab951em5\" class=\"uicontrol\">重新初始化云盘</b>对话框里，配置重新初始化参数。</p></li><li id=\"b96841a051i8o\"><p id=\"b96841a151f7c\">单击<b data-tag=\"uicontrol\" id=\"b96841a251hoe\" class=\"uicontrol\">确认重新初始化云盘</b>。</p><p id=\"b96841a3517zz\">完成重新初始化后，实例会自动启动。</p><img width=\"600\" placement=\"break\" alt=\"重新初始化云盘\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8069291661/p484203.png\" id=\"b96841a551p42\" class=\"image break\"></li></ol></li></ol></section></section><section id=\"d8a58b4082vh8\" class=\"section\"><h3 id=\"dd78e54082spg\">1671696280<b>：</b>Windows系统BCD配置异常或磁盘文件系统故障，导致系统启动失败</h3><section id=\"c665ca50d9ind\" class=\"section\"><h4 id=\"0ba8ee618285g\"><b>问题现象</b></h4><p id=\"0ba8ee6282oer\">通过VNC登录实例时，Windows系统启动失败，启动界面显示<b data-tag=\"uicontrol\" id=\"4d1fe793d7lmv\" class=\"uicontrol\">Windows未能启动，原因可能是最近更改了硬件或软件</b>错误信息，且<b data-tag=\"uicontrol\" id=\"4d1fe795d7lqt\" class=\"uicontrol\">状态</b>为<b data-tag=\"uicontrol\" id=\"4d1fe797d71de\" class=\"uicontrol\">0xc0000001</b>。</p><img width=\"500\" id=\"a3054b4082gxr\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8208671761/p538061.png\" alt=\"下载\" placement=\"break\" class=\"image break\"></section><section id=\"c8ee9810d9xs0\" class=\"section\"><h4 id=\"0ba8ee6482s5i\"><b>问题原因</b></h4><p id=\"0ba8ee6582kwb\">该问题可能是因为Windows系统引导配置数据（Boot Configuration Data，BCD）配置异常或者磁盘文件系统故障，导致系统无法加载。</p></section><section id=\"cbe6c970d9n2g\" class=\"section\"><h4 id=\"0ba8ee6682stk\"><b>解决方案</b></h4><p id=\"884530d282c5w\">在存有快照的情况下，您可以使用快照来恢复系统盘。具体操作如下：</p><div id=\"c55b774182xp0\" type=\"warning\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"be02aae082233\">回滚云盘是不可逆操作，从快照的创建日期到回滚云盘时这段时间内的数据会丢失。为避免误操作，建议您在回滚前为云盘创建一份快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol data-tag=\"steps\" id=\"4ed0acc182vlm\" docid=\"9688\" class=\"steps\"><li data-tag=\"step\" id=\"step-av5-b0s-c73\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"299e624130flx\" docid=\"380982\" class=\"step\"><p id=\"cc0d600037nju\"><span data-tag=\"cmd\" id=\"cmd-brj-6yn-8vy\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-d8t-8oi-933\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-gwf-0yb-z74\" class=\"uicontrol\">存储与快照</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-7g6-j0f-4ff\" class=\"uicontrol\">快照</b></span>。</span></p></li><li data-tag=\"step\" id=\"step-wi8-r36-wzv\" class=\"step\"><p id=\"cc0dfc4237gix\"><span data-tag=\"cmd\" id=\"cmd-acu-560-w33\" class=\"cmd\">在页面左侧顶部，选择目标资源所在的地域。<img data-tag=\"image\" id=\"image-3wz-243-ym2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0777199861/p680076.png\" width=\"500\" alt=\"地域\" placement=\"break\" class=\"image break\"> </span></p></li><li data-tag=\"step\" id=\"step-khh-x7j-t04\" class=\"step\"><p id=\"b4e82620302mq\">单击<b data-tag=\"uicontrol\" id=\"4e354bf0304xo\" class=\"uicontrol\">云盘快照</b>页签。</p></li><li id=\"46d3f41030zc9\"><p id=\"46d3cd0030g7i\">找到需要回滚云盘的快照，在<b data-tag=\"uicontrol\" id=\"uicontrol-nkb-4wx-rln\" class=\"uicontrol\">操作</b>列中单击<b data-tag=\"uicontrol\" id=\"uicontrol-z4l-k3s-8vc\" class=\"uicontrol\">回滚云盘</b>。 </p></li><li data-tag=\"step\" id=\"step-ex9-3lg-7c5\" class=\"step\"><p id=\"b4e8262430qog\">在弹出的对话框中，单击<b data-tag=\"uicontrol\" id=\"uicontrol-2wb-2l7-rqz\" class=\"uicontrol\">确定</b>。</p></li></ol></section></section><section id=\"65f61ed082zqa\" class=\"section\"><h3 id=\"8251081182ot0\">1671696281<b>：</b>Windows系统文件损坏或者驱动不兼容，导致系统启动失败</h3><section id=\"ce5112b0d94o0\" class=\"section\"><h4 id=\"8251081282w3o\"><b>问题现象</b></h4><p id=\"8251081382uwc\">通过VNC登录实例时，Windows系统启动失败，启动界面卡在<b data-tag=\"uicontrol\" id=\"4d2035c2d7ii2\" class=\"uicontrol\">选择键盘布局</b>界面。<img width=\"500\" id=\"d6ea22d082ggh\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8208671761/p538073.png\" alt=\"下载 (1)\" placement=\"break\" class=\"image break\"></p></section><section id=\"d0d091a0d9akz\" class=\"section\"><h4 id=\"8e6ae98182k6p\"><b>问题原因</b></h4><p id=\"8e6ae98282dky\">该问题可能是因为Windows系统文件损坏或者驱动不兼容，导致系统无法启动。</p></section><section id=\"d38ca460d9qwi\" class=\"section\"><h4 id=\"8e6ae98382vn2\"><b>解决方案</b></h4><p id=\"8e6ae98582wa1\">在存有快照的情况下，您可以使用快照来恢复系统盘。具体操作如下：</p><div id=\"bdbc412082upr\" type=\"warning\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"d328918082obl\">回滚云盘是不可逆操作，从快照的创建日期到回滚云盘时这段时间内的数据会丢失。为避免误操作，建议您在回滚前为云盘创建一份快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol data-tag=\"steps\" id=\"cf35fa9182p1q\" docid=\"9688\" class=\"steps\"><li data-tag=\"step\" id=\"step-av5-b0s-c73\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"299e624130flx\" docid=\"380982\" class=\"step\"><p id=\"cc0d600037nju\"><span data-tag=\"cmd\" id=\"cmd-brj-6yn-8vy\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-d8t-8oi-933\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-gwf-0yb-z74\" class=\"uicontrol\">存储与快照</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-7g6-j0f-4ff\" class=\"uicontrol\">快照</b></span>。</span></p></li><li data-tag=\"step\" id=\"step-wi8-r36-wzv\" class=\"step\"><p id=\"cc0dfc4237gix\"><span data-tag=\"cmd\" id=\"cmd-acu-560-w33\" class=\"cmd\">在页面左侧顶部，选择目标资源所在的地域。<img data-tag=\"image\" id=\"image-3wz-243-ym2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0777199861/p680076.png\" width=\"500\" alt=\"地域\" placement=\"break\" class=\"image break\"> </span></p></li><li data-tag=\"step\" id=\"step-khh-x7j-t04\" class=\"step\"><p id=\"b4e82620302mq\">单击<b data-tag=\"uicontrol\" id=\"4e354bf0304xo\" class=\"uicontrol\">云盘快照</b>页签。</p></li><li id=\"46d3f41030zc9\"><p id=\"46d3cd0030g7i\">找到需要回滚云盘的快照，在<b data-tag=\"uicontrol\" id=\"uicontrol-nkb-4wx-rln\" class=\"uicontrol\">操作</b>列中单击<b data-tag=\"uicontrol\" id=\"uicontrol-z4l-k3s-8vc\" class=\"uicontrol\">回滚云盘</b>。 </p></li><li data-tag=\"step\" id=\"step-ex9-3lg-7c5\" class=\"step\"><p id=\"b4e8262430qog\">在弹出的对话框中，单击<b data-tag=\"uicontrol\" id=\"uicontrol-2wb-2l7-rqz\" class=\"uicontrol\">确定</b>。</p></li></ol></section></section><section id=\"2bdb7a4082u8q\" class=\"section\"><h3 id=\"25b9a74182co0\">1671696282<b>：</b>Windows系统磁盘故障或硬件变动，导致系统启动失败</h3><section id=\"d682d9f0d9xmw\" class=\"section\"><h4 id=\"25b9a74282nux\"><b>问题现象</b></h4><p id=\"25b9a74382p11\">通过VNC登录实例时，Windows系统启动失败，启动界面卡在<b data-tag=\"uicontrol\" id=\"4d20aaefd7gr3\" class=\"uicontrol\">Windows Error Recovery</b>界面。<img width=\"500\" id=\"559a2a1082gif\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8208671761/p538095.png\" alt=\"下载 (2)\" placement=\"break\" class=\"image break\"></p></section><section id=\"de6c4d90d98yn\" class=\"section\"><h4 id=\"25b9a745827zn\"><b>问题原因</b></h4><p id=\"25b9a74682cvc\">该问题可能是因为Windows系统磁盘故障或硬件变动，导致系统无法启动。</p></section><section id=\"e18881b0d9f2n\" class=\"section\"><h4 id=\"25b9a747820c1\"><b>解决方案</b></h4><p id=\"25b9a749829uc\">在存有快照的情况下，您可以使用快照来恢复系统盘。具体操作如下：</p><div id=\"bd1ce1f182965\" type=\"warning\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"dc51c63082tp2\">回滚云盘是不可逆操作，从快照的创建日期到回滚云盘时这段时间内的数据会丢失。为避免误操作，建议您在回滚前为云盘创建一份快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol data-tag=\"steps\" id=\"e857ee0182k2s\" docid=\"9688\" class=\"steps\"><li data-tag=\"step\" id=\"step-av5-b0s-c73\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"299e624130flx\" docid=\"380982\" class=\"step\"><p id=\"cc0d600037nju\"><span data-tag=\"cmd\" id=\"cmd-brj-6yn-8vy\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-d8t-8oi-933\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-gwf-0yb-z74\" class=\"uicontrol\">存储与快照</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-7g6-j0f-4ff\" class=\"uicontrol\">快照</b></span>。</span></p></li><li data-tag=\"step\" id=\"step-wi8-r36-wzv\" class=\"step\"><p id=\"cc0dfc4237gix\"><span data-tag=\"cmd\" id=\"cmd-acu-560-w33\" class=\"cmd\">在页面左侧顶部，选择目标资源所在的地域。<img data-tag=\"image\" id=\"image-3wz-243-ym2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0777199861/p680076.png\" width=\"500\" alt=\"地域\" placement=\"break\" class=\"image break\"> </span></p></li><li data-tag=\"step\" id=\"step-khh-x7j-t04\" class=\"step\"><p id=\"b4e82620302mq\">单击<b data-tag=\"uicontrol\" id=\"4e354bf0304xo\" class=\"uicontrol\">云盘快照</b>页签。</p></li><li id=\"46d3f41030zc9\"><p id=\"46d3cd0030g7i\">找到需要回滚云盘的快照，在<b data-tag=\"uicontrol\" id=\"uicontrol-nkb-4wx-rln\" class=\"uicontrol\">操作</b>列中单击<b data-tag=\"uicontrol\" id=\"uicontrol-z4l-k3s-8vc\" class=\"uicontrol\">回滚云盘</b>。 </p></li><li data-tag=\"step\" id=\"step-ex9-3lg-7c5\" class=\"step\"><p id=\"b4e8262430qog\">在弹出的对话框中，单击<b data-tag=\"uicontrol\" id=\"uicontrol-2wb-2l7-rqz\" class=\"uicontrol\">确定</b>。</p></li></ol></section></section><section id=\"16f11930822nd\" class=\"section\"><h3 id=\"144aff7182i74\">1671696284<b>：</b>Windows无法找到可用的系统引导启动，导致系统启动失败</h3><section id=\"e3c3cbb0d9uly\" class=\"section\"><h4 id=\"144aff7282uoa\"><b>问题现象</b></h4><p id=\"144aff73827pa\">通过VNC登录实例时，Windows启动界面显示<b data-tag=\"uicontrol\" id=\"1e4e67c0d9y9f\" class=\"uicontrol\">An operating system wasn't found. Try disconnecting any drives that don't contain an operating system.</b>错误信息。</p><img width=\"500\" id=\"659ea35186vyy\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8208671761/p538104.png\" alt=\"下载 (3)\" placement=\"break\" class=\"image break\"></section><section id=\"e5e1c9b0d91dn\" class=\"section\"><h4 id=\"144aff7582ptn\"><b>问题原因</b></h4><p id=\"144aff7682019\">该问题可能是因为Windows系统无法找到可用的系统引导启动，导致系统无法启动。</p></section><section id=\"e8f0de70d9rlm\" class=\"section\"><h4 id=\"144aff7782o8f\"><b>解决方案</b></h4><p id=\"144aff798246p\">在存有快照的情况下，您可以使用快照来恢复系统盘。具体操作如下：</p><div id=\"82e20b3182a1n\" type=\"warning\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"a7bfe8f082tlj\">回滚云盘是不可逆操作，从快照的创建日期到回滚云盘时这段时间内的数据会丢失。为避免误操作，建议您在回滚前为云盘创建一份快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol data-tag=\"steps\" id=\"902a9e10823vv\" docid=\"9688\" class=\"steps\"><li data-tag=\"step\" id=\"step-av5-b0s-c73\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"299e624130flx\" docid=\"380982\" class=\"step\"><p id=\"cc0d600037nju\"><span data-tag=\"cmd\" id=\"cmd-brj-6yn-8vy\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-d8t-8oi-933\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-gwf-0yb-z74\" class=\"uicontrol\">存储与快照</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-7g6-j0f-4ff\" class=\"uicontrol\">快照</b></span>。</span></p></li><li data-tag=\"step\" id=\"step-wi8-r36-wzv\" class=\"step\"><p id=\"cc0dfc4237gix\"><span data-tag=\"cmd\" id=\"cmd-acu-560-w33\" class=\"cmd\">在页面左侧顶部，选择目标资源所在的地域。<img data-tag=\"image\" id=\"image-3wz-243-ym2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0777199861/p680076.png\" width=\"500\" alt=\"地域\" placement=\"break\" class=\"image break\"> </span></p></li><li data-tag=\"step\" id=\"step-khh-x7j-t04\" class=\"step\"><p id=\"b4e82620302mq\">单击<b data-tag=\"uicontrol\" id=\"4e354bf0304xo\" class=\"uicontrol\">云盘快照</b>页签。</p></li><li id=\"46d3f41030zc9\"><p id=\"46d3cd0030g7i\">找到需要回滚云盘的快照，在<b data-tag=\"uicontrol\" id=\"uicontrol-nkb-4wx-rln\" class=\"uicontrol\">操作</b>列中单击<b data-tag=\"uicontrol\" id=\"uicontrol-z4l-k3s-8vc\" class=\"uicontrol\">回滚云盘</b>。 </p></li><li data-tag=\"step\" id=\"step-ex9-3lg-7c5\" class=\"step\"><p id=\"b4e8262430qog\">在弹出的对话框中，单击<b data-tag=\"uicontrol\" id=\"uicontrol-2wb-2l7-rqz\" class=\"uicontrol\">确定</b>。</p></li></ol></section></section><h2 id=\"5a92b48030pjh\"><b>Linux</b></h2><section id=\"f44a28a029s8p\" class=\"section\"><h3 id=\"5cd1de30290f3\"><b>1662001143：Linux系统GRUB引导失败</b></h3><section id=\"ee1cb8b0d99xf\" class=\"section\"><h4 id=\"5cd1de3129lda\"><b>问题现象</b></h4><p id=\"c5e152c029b3g\">通过VNC登录实例时，可以看到<b data-tag=\"uicontrol\" id=\"4d216e34d7bg1\" class=\"uicontrol\">grub&gt;</b>或<b data-tag=\"uicontrol\" id=\"4d216e37d76nz\" class=\"uicontrol\">grub resuce&gt;</b>错误信息，它会导致ECS实例的操作系统启动失败。<img height=\"400\" width=\"500\" id=\"img-w9h-pfs-kqb\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2432342661/p486643.png\" alt=\"1143\" placement=\"break\" class=\"image break\"></p></section><section id=\"f21a7330d9oa3\" class=\"section\"><h4 id=\"5cd1de3229ari\"><b>问题原因</b></h4><p id=\"6769679329bs7\">grub引导失败进而导致操作系统启动过程无法继续。</p><p id=\"61e90b812fi8d\">grub引导失败的可能原因有很多种，包括如下原因：</p><ul id=\"61e90b822frvq\" data-spm-anchor-id=\"a2c4g.11186623.0.i7.63f75f46dIZHcO\"><li id=\"61e90b832fppl\"><p id=\"61e90b842flbt\">grub组件相关文件缺失，比如<b data-tag=\"uicontrol\" id=\"4d216e41d73iu\" class=\"uicontrol\">/boot/grub2/grub.cfg</b>文件缺失。</p></li><li id=\"61e90b852fq23\"><p id=\"61e90b862fwq1\">grub2内配置不正确或者磁盘上grub2引导已经损坏。</p></li><li id=\"61e90b872ftzu\"><p id=\"61e90b882fu2l\">如果在VNC界面有显示类似<code data-tag=\"code\" class=\"code\">/boot/grubz/i386-pc/normal.mod notfound.</code>内容，表示有grub2关键依赖的mod缺失。</p></li><li id=\"61e90b8a2fix9\"><p id=\"61e90b8b2f2x0\">如果在VNC界面有显示类似<code data-tag=\"code\" class=\"code\">error：no suchpartition</code>内容，表示grub2无法识别到对应的分区。</p></li><li id=\"61e90b8d2fbpl\"><p id=\"61e90b8e2fc56\">如果在VNC界面有显示类似<code data-tag=\"code\" class=\"code\">error：unknown filesystem</code>内容，表示grub2无法识别所在的分区文件系统类型。</p></li></ul></section><section id=\"fed78ef0d9am3\" class=\"section\"><h4 id=\"5cd1de33295pz\"><b>解决方案</b></h4><section id=\"03f22b20d9pzz\" class=\"section\"><p id=\"603ce5e129hsf\"><b>方案一：修复异常ECS实例的数据盘</b></p><ol id=\"a9c5f8a029xa4\" data-spm-anchor-id=\"a2c4g.11186623.0.i0.33d17e36OQpAjl\"><li id=\"a9c5f8a229a8e\" data-lake-id=\"ec7c91bf90b068c796fb981318b9131b\" data-spm-anchor-id=\"a2c4g.11186623.0.i2.33d17e36OQpAjl\"><p id=\"a9c5f8a129sly\">卸载异常ECS实例的系统盘，并将该磁盘作为数据盘挂载到正常ECS实例中。</p><p id=\"ded390d02dogn\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-do-i-restore-system-disk-data\">如何恢复系统盘数据？</a>的步骤一~步骤三。</p><div type=\"note\" id=\"7ddfae7075njb\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"7ddf8760753yh\">本步骤执行完毕，如果您未退出chroot环境，则需要在正常ECS实例上继续执行<code data-tag=\"code\" class=\"code\">exit</code>命令退出chroot环境。</p></div></div></li><li id=\"2ed78230756x2\"><p id=\"2ed75b2075tyk\">执行如下操作，修复系统盘。</p><ul id=\"36fdb0b17557x\"><li id=\"3643887175kx5\"><p id=\"3643887075owx\">方法一：如果grub2关键依赖的mod缺失或者grub2在磁盘上的信息损坏，您可以在chroot环境中执行<code data-tag=\"code\" class=\"code\">grub2-install /dev/vdb</code>命令，重新安装grub2来修复对应问题，操作如下：</p><ol id=\"493e63a075khy\"><li id=\"48a1876075l2p\"><p id=\"6315130075rje\">通过磁盘序列号查找对应异常系统盘挂载之后的在OS内的设备名。</p><p id=\"98748e90755b6\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/query-the-serial-number-of-a-disk\">查看磁盘序列号</a>，此处以<b data-tag=\"uicontrol\" id=\"4d21bc50d78vf\" class=\"uicontrol\">/dev/vdb</b>为例。</p></li><li id=\"64bd1db075bau\"><p id=\"68823c0075giw\">登录正常ECS实例，切换到root用户，依次执行以下命令，进入正常实例的被挂载目录（以<b data-tag=\"uicontrol\" id=\"4d21bc54d7nl9\" class=\"uicontrol\">/mnt</b>为例）。</p><pre outputclass=\"language-shell\" data-tag=\"codeblock\" id=\"c3czcx\" class=\"pre codeblock language-shell\"><code>mount -o bind /proc/ /mnt/proc/\nmount -o bind /sys/ /mnt/sys/\nmount -o bind /dev/ /mnt/dev/\nchroot /mnt</code></pre><p id=\"a804043075yd0\"></p></li><li id=\"6f67ad20754n7\"><p id=\"6dddd8d075iau\">登录正常ECS实例，切换到root用户，依次执行以下命令，进入正常实例的被挂载目录（以<b data-tag=\"uicontrol\" id=\"4d21bc5ad7qxy\" class=\"uicontrol\">/mnt</b>为例）。</p></li><li id=\"7420c86075c23\"><p id=\"7302390075npc\">执行<code data-tag=\"code\" class=\"code\">grub2-install /dev/vdb</code>命令，重新安装系统盘上的grub。</p></li><li id=\"7880c72175yxx\"><p id=\"773868a075ad5\">在正常ECS实例上输入<code data-tag=\"code\" class=\"code\">exit</code>命令，退出chroot。</p></li></ol></li><li id=\"42e9249075o0z\"><p id=\"42e8fd80758a6\">方法二：在ECS控制台上初始化系统盘，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/re-initialize-a-system-disk\">重新初始化系统盘</a>。</p><div id=\"b1199bc0756x7\" type=\"warning\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"c1987a7075kva\">重新初始化操作会清空云盘已写入数据，建议操作前创建快照备份数据。创建快照的具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div></li></ul></li><li id=\"612983b12ff2m\"><p id=\"677cee002fj1j\">在异常ECS实例中恢复挂载系统盘。</p><p id=\"716bf5a02fwzo\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-do-i-restore-system-disk-data\">如何恢复系统盘数据？</a>的步骤五。</p></li><li id=\"e5d2be5929tff\" data-lake-id=\"b53a5a3e92a4bbf5e3f6555fde3be01b\" data-spm-anchor-id=\"a2c9r.14518950.0.i3.a5f8f7Bwf7Bw3f\"><p id=\"e5d2be58296az\">通过SSH或VNC远程登录已修复的异常ECS实例，确认ECS实例恢复正常。</p></li></ol></section><section id=\"0f477980d9f4b\" class=\"section\"><p id=\"7943740029qvn\"><b>方案二：使用快照恢复系统盘</b></p><p id=\"5b1b285029526\">如果方案一操作之后还是无法恢复系统盘grub2引导实例启动，您可以选择如下方案进行操作：</p><p id=\"f1aa66a0296tk\">如果在您存有快照的情况下，您可以使用快照恢复系统盘。具体操作如下：</p><div type=\"warning\" id=\"65f6bf003049x\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"661c968030a1z\">回滚云盘是不可逆操作，从快照的创建日期到回滚云盘时这段时间内的数据会丢失。为避免误操作，建议您在回滚前为云盘创建一份快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol data-tag=\"steps\" id=\"85df3f312dpp3\" docid=\"9688\" class=\"steps\"><li data-tag=\"step\" id=\"step-av5-b0s-c73\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"299e624130flx\" docid=\"380982\" class=\"step\"><p id=\"cc0d600037nju\"><span data-tag=\"cmd\" id=\"cmd-brj-6yn-8vy\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-d8t-8oi-933\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-gwf-0yb-z74\" class=\"uicontrol\">存储与快照</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-7g6-j0f-4ff\" class=\"uicontrol\">快照</b></span>。</span></p></li><li data-tag=\"step\" id=\"step-wi8-r36-wzv\" class=\"step\"><p id=\"cc0dfc4237gix\"><span data-tag=\"cmd\" id=\"cmd-acu-560-w33\" class=\"cmd\">在页面左侧顶部，选择目标资源所在的地域。<img data-tag=\"image\" id=\"image-3wz-243-ym2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0777199861/p680076.png\" width=\"500\" alt=\"地域\" placement=\"break\" class=\"image break\"> </span></p></li><li data-tag=\"step\" id=\"step-khh-x7j-t04\" class=\"step\"><p id=\"b4e82620302mq\">单击<b data-tag=\"uicontrol\" id=\"4e354bf0304xo\" class=\"uicontrol\">云盘快照</b>页签。</p></li><li id=\"46d3f41030zc9\"><p id=\"46d3cd0030g7i\">找到需要回滚云盘的快照，在<b data-tag=\"uicontrol\" id=\"uicontrol-nkb-4wx-rln\" class=\"uicontrol\">操作</b>列中单击<b data-tag=\"uicontrol\" id=\"uicontrol-z4l-k3s-8vc\" class=\"uicontrol\">回滚云盘</b>。 </p></li><li data-tag=\"step\" id=\"step-ex9-3lg-7c5\" class=\"step\"><p id=\"b4e8262430qog\">在弹出的对话框中，单击<b data-tag=\"uicontrol\" id=\"uicontrol-2wb-2l7-rqz\" class=\"uicontrol\">确定</b>。</p></li></ol></section><section id=\"12a5e6c0d9mqy\" class=\"section\"><p id=\"b2672ce56ejgl\"><b>方案三：重置系统盘</b></p><p id=\"6e9dea1030ln5\">如果在您系统盘内没有重要数据的情况下，您可以重置系统盘。具体操作如下：</p><div type=\"warning\" id=\"d26f5ef030gvi\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"b2672ce66e70j\">重置系统盘操作会清空云盘已写入数据，建议操作前创建快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol id=\"960de13130xgr\" docid=\"3811558\"><li id=\"b9681a9251ptg\"><p id=\"b9681a9351g9z\">停止ECS实例。</p><ol id=\"b9681a9451ofa\"><li data-tag=\"step\" id=\"b9681a95515vj\" platform=\"public\" props=\"china intl\" docid=\"380982\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"b9681a995110w\" docid=\"380982\" class=\"step\"><p id=\"cc0c75a0379qu\"><span data-tag=\"cmd\" id=\"cmd-9ro-yc5-vx4\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-kq7-suy-h2g\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-puq-bs2-grd\" class=\"uicontrol\">实例与镜像</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-fk3-i03-vyq\" class=\"uicontrol\">实例</b></span>。</span></p></li><li id=\"b9681a9f51ou3\"><p id=\"b9681aa0517g2\">找到需要停止的ECS实例，在<b data-tag=\"uicontrol\" id=\"b9681aa151189\" class=\"uicontrol\">操作</b>列，<span data-tag=\"ph\" props=\"china\" id=\"b9681aa251x3q\" data-cond-props=\"china\" class=\"ph\">单击<img placement=\"inline\" alt=\"icon\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9009291661/p484183.png\" id=\"b9681aa351lc8\" class=\"image inline\"> &gt; <b data-tag=\"uicontrol\" id=\"b9681aa451wdv\" class=\"uicontrol\">实例状态</b> &gt; <b data-tag=\"uicontrol\" id=\"b9681aa5511hv\" class=\"uicontrol\">停止</b></span>。</p></li></ol></li><li id=\"b9681aaa51gct\"><p id=\"b9681aab51qe6\">重新初始化系统盘。</p><ol id=\"b9681aac51x58\"><li id=\"b9681aad51c3o\"><p id=\"b9681aae51w2e\">找到需要重新初始化系统盘的实例，单击实例ID进入<b data-tag=\"uicontrol\" id=\"b9681aaf51rig\" class=\"uicontrol\">实例详情</b>页。</p></li><li id=\"b9681ab051ezv\"><p id=\"b9681ab151cni\">单击<b data-tag=\"uicontrol\" id=\"b9681ab2511az\" class=\"uicontrol\">云盘</b>页签。</p></li><li id=\"b9681ab351j5n\"><p id=\"b9681ab451vfi\">找到系统盘，在<b data-tag=\"uicontrol\" id=\"b9681ab551flv\" class=\"uicontrol\">操作</b>列中，单击<b data-tag=\"uicontrol\" id=\"b9681ab6515r6\" class=\"uicontrol\">重新初始化云盘</b>。</p></li><li id=\"b9681ab7519bs\"><p id=\"b9681ab851q10\">在弹出的<b data-tag=\"uicontrol\" id=\"b9681ab951em5\" class=\"uicontrol\">重新初始化云盘</b>对话框里，配置重新初始化参数。</p></li><li id=\"b96841a051i8o\"><p id=\"b96841a151f7c\">单击<b data-tag=\"uicontrol\" id=\"b96841a251hoe\" class=\"uicontrol\">确认重新初始化云盘</b>。</p><p id=\"b96841a3517zz\">完成重新初始化后，实例会自动启动。</p><img width=\"600\" placement=\"break\" alt=\"重新初始化云盘\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8069291661/p484203.png\" id=\"b96841a551p42\" class=\"image break\"></li></ol></li></ol></section></section></section><section id=\"fb10c72029l7i\" class=\"section\"><h3 id=\"5cd1de3429j1o\"><b>1662001144：Linux系统GRUB配置中root根目录的UUID错误</b></h3><section id=\"17c0aa00d9rw2\" class=\"section\"><h4 id=\"5cd1de3529em4\"><b>问题现象</b></h4><p id=\"c71e1ee0295d2\">通过VNC登录实例时，从VNC控制台上可以看到以下日志：</p><img width=\"600\" id=\"img-qr9-wmj-5k2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2432342661/p486639.png\" alt=\"1144\" placement=\"break\" class=\"image break\"></section><section id=\"1b46c380d9h3u\" class=\"section\"><h4 id=\"5cd1de3629dd7\"><b>问题原因</b></h4><p id=\"cc6d389029wpd\">出现该问题通常是因为<code data-tag=\"code\" class=\"code\">grub.cfg</code>内配置了UUID设备，但对应设备不存在导致。</p><p id=\"bb7d91f030yg6\">例如：图中配置了<code data-tag=\"code\" class=\"code\">root=UUID=10c0e7e5-557a-40c1-893c-1e2dcba*****</code>的UUID设备，但ECS实例中不存在该设备。</p><img width=\"500\" id=\"img-7nq-o3b-mn1\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2432342661/p486647.png\" alt=\"1144\" placement=\"break\" class=\"image break\"></section><section id=\"1ed875c0d9195\" class=\"section\"><h4 id=\"5cd1de3729rot\"><b>解决方案</b></h4><ol data-spm-anchor-id=\"a2c4g.11186623.0.i0.33d17e36OQpAjl\" id=\"d1086b9029jva\"><li data-spm-anchor-id=\"a2c4g.11186623.0.i2.33d17e36OQpAjl\" data-lake-id=\"ec7c91bf90b068c796fb981318b9131b\" id=\"d1086b91292d2\"><p id=\"d1086b9229cuq\">卸载异常ECS实例的系统盘，并将该磁盘作为数据盘挂载到正常ECS实例中。</p><p id=\"05e31ba02dgas\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-do-i-restore-system-disk-data\">如何恢复系统盘数据？</a>的步骤一~步骤四。</p></li><li data-spm-anchor-id=\"a2c4g.11186623.0.i2.33d17e36OQpAjl\" data-lake-id=\"ec7c91bf90b068c796fb981318b9131b\" id=\"d1086b9329n9p\"><p id=\"d1086b9429rgb\">进入正常实例中，通过磁盘序列号查找对应异常系统盘挂载之后在OS内的设备名。</p><p id=\"0dd987912d6ax\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/query-the-serial-number-of-a-disk\">查看磁盘序列号</a>，此处以<b data-tag=\"uicontrol\" id=\"4d22a6bdd712g\" class=\"uicontrol\">/dev/vdb</b>为例。</p></li><li data-spm-anchor-id=\"a2c4g.11186623.0.i2.33d17e36OQpAjl\" data-lake-id=\"ec7c91bf90b068c796fb981318b9131b\" id=\"d1086b9529abg\"><p id=\"d1086b96292fu\">执行如下命令，查询<code data-tag=\"code\" class=\"code\">/dev/vdb1</code>对应的文件系统UUID 。</p><pre id=\"mac7pl\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>blkid /dev/vdb1</code></pre><p id=\"6d7b2760d9xio\">显示结果即为文件系统UUID。</p><pre id=\"gfe6mm\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>/dev/vdb1: UUID=\"10c0e7e5-557a-40c1-893c-1e2dcba*****\" TYPE=\"ext4\"</code></pre></li><li data-spm-anchor-id=\"a2c4g.11186623.0.i2.33d17e36OQpAjl\" data-lake-id=\"ec7c91bf90b068c796fb981318b9131b\" id=\"d1086b9829adf\"><p id=\"d1086b9929sj3\">将异常系统盘的<code data-tag=\"code\" class=\"code\">grub2.cfg</code>文件内的UUID替换为上述获取到的UUID值。</p></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i21.796a7120Dwg8bD\" data-lake-id=\"ec7c91bf90b068c796fb981318b9131b\" id=\"d1086b9a293wf\"><p id=\"d1086b9b2950v\">恢复异常ECS实例的系统盘。</p><p id=\"383c83202d8jn\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-do-i-restore-system-disk-data\">如何恢复系统盘数据？</a>的步骤五。</p></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i3.a5f8f7Bwf7Bw3f\" data-lake-id=\"b53a5a3e92a4bbf5e3f6555fde3be01b\" id=\"d1086b9c299lf\"><p id=\"d1086b9d29b6d\">通过SSH或VNC远程登录已修复的ECS实例，若不再出现该错误，说明该问题已修复。</p></li></ol></section></section><section id=\"03b48a1029uh1\" class=\"section\"><h3 id=\"5cd1de3829k9s\"><b>1662001145：Linux系统关机时卡住</b></h3><section id=\"21de14a0d9c1t\" class=\"section\"><h4 id=\"5cd1de39293ow\"><b>问题现象</b></h4><p id=\"425a8c5029lcg\">ECS实例一直处于<b data-tag=\"uicontrol\" id=\"77ece1a0d91zy\" class=\"uicontrol\">停止中</b>状态，通过VNC登录实例，界面显示如下错误信息。</p><pre outputclass=\"language-shell\" data-tag=\"codeblock\" id=\"geznxd\" class=\"pre codeblock language-shell\"><code>CentOS release 5.8(Final)\nKernel 2.6.18-308.el5 on anx 86_64\niZuf6isbofkgfnm5qp***** login：md：stopping allmddevices.\nSystem halted.</code></pre></section><section id=\"265c70d0d9vp0\" class=\"section\"><h4 id=\"5cd1de3a29j7j\"><b>问题原因</b></h4><p id=\"91ebcf90294my\">出现该问题通常是系统在关机过程中因未知原因卡住，详细根因需要具体分析系统日志。</p></section><section id=\"2e181db0d9as3\" class=\"section\"><h4 id=\"5cd1de3b29gok\"><b>解决方案</b></h4><p id=\"b021ba60292nd\">您可以尝试在ECS控制台强制重启实例来修复问题。具体操作如下：</p><div id=\"c9f5839029mdt\" type=\"notice\" class=\"note note-notice\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note notice\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"cf4d28c029iu5\">强制重启实例时，可能会造成内存中的缓存数据丢失。</p></div></div><ol id=\"a7a307812dmfg\" docid=\"3811558\"><li data-tag=\"step\" id=\"c4ad72012d9xi\" platform=\"public\" props=\"china intl\" docid=\"380982\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"c4ad72032dop6\" docid=\"380982\" class=\"step\"><p id=\"cc0c75a0379qu\"><span data-tag=\"cmd\" id=\"cmd-9ro-yc5-vx4\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-kq7-suy-h2g\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-puq-bs2-grd\" class=\"uicontrol\">实例与镜像</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-fk3-i03-vyq\" class=\"uicontrol\">实例</b></span>。</span></p></li><li id=\"faecc6402dbo7\"><p id=\"1dfed4d02fjdp\">在顶部菜单栏左上角处，选择地域。</p></li><li id=\"c4ad72052dmyl\"><p id=\"c4ad72062d1n8\">找到需要重启的ECS实例。</p><ul id=\"32c1d5b12dsuk\"><li id=\"32c1aea02d4ny\"><p id=\"b266908f6e7q3\">如果重启一个实例，在<b data-tag=\"uicontrol\" id=\"4d1cda54d7ese\" class=\"uicontrol\">操作</b>列，<span data-tag=\"ph\" props=\"china\" id=\"c4ad72072dxeq\" data-cond-props=\"china\" class=\"ph\">单击<img placement=\"inline\" alt=\"icon\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9009291661/p484183.png\" id=\"c4ad72082d6go\" class=\"image inline\"> <b data-tag=\"uicontrol\" id=\"4d1cda58d71by\" class=\"uicontrol\">&gt; 实例状态 &gt; 重启</b></span>。</p></li><li id=\"433765902de7w\"><p id=\"1dfed4d12fue4\">如果重启多个实例，选择多个实例（所选实例的状态必须一致），并在页面底部单击<span data-tag=\"ph\" props=\"china\" id=\"659290102dl7k\" data-cond-props=\"china\" class=\"ph\"><img placement=\"inline\" alt=\"三点\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3645542661/p486910.png\" id=\"img-ue5-g1j-ed8\" class=\"image inline\"> <b data-tag=\"uicontrol\" id=\"4d1cda61d78z9\" class=\"uicontrol\">&gt; 重启</b></span>。</p></li></ul></li><li id=\"a2cbeee02dnyv\"><p id=\"1dfed4d22fpek\">在<b data-tag=\"uicontrol\" id=\"4d1cda68d7o7n\" class=\"uicontrol\">重启实例</b>对话框中，选择<b data-tag=\"uicontrol\" id=\"4d1cda6ad79g8\" class=\"uicontrol\">重启方式</b>，并单击<b data-tag=\"uicontrol\" id=\"4d1cda6cd7zwi\" class=\"uicontrol\">确定</b>。</p></li></ol></section></section><section id=\"0cb7ab1029yqg\" class=\"section\"><h3 id=\"5cd1de3c299ye\"><b>1662001146：Linux系统/etc/fstab文件中配置的某个挂载点对应的设备不存在</b></h3><section id=\"34913870d9km6\" class=\"section\"><h4 id=\"5cd1de3d29hxl\"><b>问题现象</b></h4><p id=\"562e6cf029zbu\">通过VNC访问实例，发现界面上不断打印出<b data-tag=\"uicontrol\" id=\"4d231befd7sk2\" class=\"uicontrol\">A start job is running</b>错误信息。</p><pre outputclass=\"language-shell\" data-tag=\"codeblock\" id=\"hrlbvb\" class=\"pre codeblock language-shell\"><code>Booting from 0000:7c00\n/: clean, 53966/2621440 files, 648440/10485499 blocks\nA start job is running for dev-xvda1.device (5s / 1min 30s)\nA start job is running for dev-xvda1.device (6s / 1min 30s)\nA start job is running for dev-xvda1.device (7s / 1min 30s)\n......</code></pre></section><section id=\"390e5c20d9xn6\" class=\"section\"><h4 id=\"5cd1de3e29xp5\"><b>问题原因</b></h4><p id=\"d1507d6029onf\">该问题可能是因为ECS实例内部<code data-tag=\"code\" class=\"code\">/etc/fstab</code>配置了不存在的设备挂载点。</p><p id=\"cb8e7f30d9575\">如下图，实例内部<code data-tag=\"code\" class=\"code\">/etc/fstab</code>配置的<b data-tag=\"uicontrol\" id=\"4d231bf7d7414\" class=\"uicontrol\">/dev/xvda1</b>设备不存在，则会提示<b data-tag=\"uicontrol\" id=\"4d231bf9d7meg\" class=\"uicontrol\">A start job is running for dev-xvda1.device</b>。</p><img width=\"500\" placement=\"break\" alt=\"下载\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1651002661/p484698.png\" id=\"img-5cv-zci-esu\" class=\"image break\"></section><section id=\"3c749190d9esc\" class=\"section\"><h4 id=\"5cd1de3f29d8g\"><b>解决方案</b></h4><ol id=\"22b841b109hvn\"><li id=\"8a99c2c009ka1\"><p id=\"8a999bb009e4c\">等待系统检测完成。</p><p id=\"21712760d9gd1\">例如检测完成后出现类似如下界面：</p><img width=\"300\" placement=\"break\" alt=\"lQLPJxaJfDVM0TbNAUPNBZmwZt-1jE7qt6gC4lJxSUBjAA_1433_323\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9374002661/p484705.png\" id=\"a054711129pie\" class=\"image break\"></li><li id=\"be05c29129ij2\"><p id=\"cf7e6a90292fg\">输入实例登录密码（非VNC密码） ，进入OS内部。</p></li><li id=\"2a318c50d955p\"><p id=\"2a30f010d9i3g\">执行<code data-tag=\"code\" class=\"code\">mount -a</code>命令查看具体报错的行。</p><p id=\"37862d20d947f\">回显如下所示，表示<code data-tag=\"code\" class=\"code\">/etc/fstab</code>配置文件中第11行存在错误</p><img width=\"500\" id=\"img-a1x-94r-o9k\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2432342661/p486664.png\" alt=\"47\" placement=\"break\" class=\"image break\"></li><li id=\"04f7afb129w2g\"><p id=\"19b5227029l3y\">执行<code data-tag=\"code\" class=\"code\">vim /etc/fstab</code>，编辑<code data-tag=\"code\" class=\"code\">/etc/fstab</code>文件。</p></li><li id=\"cee7b900098ti\"><p id=\"cee76ae009klv\">注释（#）或者删除<code data-tag=\"code\" class=\"code\">/etc/fstab</code>文件中该行配置，输入<code data-tag=\"code\" class=\"code\">:wq</code>，键入<code data-tag=\"code\" class=\"code\">Enter</code>，保存并退出。</p></li><li id=\"583aac80d95f9\"><p id=\"583a3750d95tw\">重启ECS实例。</p><p id=\"67678fc0d9mxb\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li><li id=\"7fc1ff60d9003\"><p id=\"7fc1b140d9zcp\">远程连接ECS实例，若不再出现该问题，说明问题已修复。</p></li></ol></section></section><section id=\"14a0a98029mj9\" class=\"section\"><h3 id=\"8ccc6e2029ayr\"><b>1662001147：Linux系统出现操作系统崩溃</b></h3><section id=\"2d1c0ee0d95to\" class=\"section\"><h4 id=\"8ccc6e2129zoq\"><b>问题现象</b></h4><p id=\"688d27d229g0i\">ECS实例内部OS启动失败，通过VNC登录实例后，在<code data-tag=\"code\" class=\"code\">/var/log/dmesg</code>、<code data-tag=\"code\" class=\"code\">/var/log/messages</code>等日志出现<code data-tag=\"code\" class=\"code\">Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block</code>错误信息。</p></section><section id=\"2f21a2e0d92sv\" class=\"section\"><h4 id=\"8ccc6e2229wbq\"><b>问题原因</b></h4><p id=\"027fdc70294ri\">出现<b data-tag=\"uicontrol\" id=\"4d23430bd7jlj\" class=\"uicontrol\">Kernel panic</b>的原因有很多种，可能是内核问题、业务问题或者其他问题。具体错误信息如下：</p><ul id=\"15e5605229nij\"><li id=\"15e5605029rad\"><p id=\"194490e0299ck\"><code data-tag=\"code\" class=\"code\">Kernel panic - not syncing </code><code data-tag=\"code\" class=\"code\">fatal exception in interrupt</code></p></li><li id=\"1a313ad129l3y\"><p id=\"2117483029bbw\"><code data-tag=\"code\" class=\"code\">Kernel panic - not syncing: Attempted to kill the idle task!</code></p></li><li id=\"21faa351296fk\"><p id=\"2419b2c029qbw\"><code data-tag=\"code\" class=\"code\">Kernel panic - not syncing: killing interrupt handler!</code></p></li><li id=\"2496aaf029o7g\"><p id=\"560675c029klx\"><code data-tag=\"code\" class=\"code\">Kernel panic - not syncing: Attempted to kill init!</code></p></li></ul></section><section id=\"3281e4e0d9lvw\" class=\"section\"><h4 id=\"8ccc6e2329zei\"><b>解决方案</b></h4><p id=\"2e31a9b329jb6\">您可以根据您的需求选择适合您的解决方案。</p><section id=\"b1bfdba0d9hjc\" class=\"section\"><p id=\"01a78410305e6\"><b>重启ECS实例</b></p><p id=\"3d37f220293ss\">如果您希望快速恢复业务正常使用，则可以在控制台强制重启实例。具体操作如下：</p><div type=\"notice\" id=\"b826f0422devf\" class=\"note note-notice\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note notice\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"70c11d602dbyp\">强制重启ECS实例时，可能会造成内存中的缓存数据丢失。</p></div></div><ol id=\"d56ea9812d7ke\" docid=\"3811558\"><li data-tag=\"step\" id=\"c4ad72012d9xi\" platform=\"public\" props=\"china intl\" docid=\"380982\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"c4ad72032dop6\" docid=\"380982\" class=\"step\"><p id=\"cc0c75a0379qu\"><span data-tag=\"cmd\" id=\"cmd-9ro-yc5-vx4\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-kq7-suy-h2g\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-puq-bs2-grd\" class=\"uicontrol\">实例与镜像</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-fk3-i03-vyq\" class=\"uicontrol\">实例</b></span>。</span></p></li><li id=\"faecc6402dbo7\"><p id=\"1dfed4d02fjdp\">在顶部菜单栏左上角处，选择地域。</p></li><li id=\"c4ad72052dmyl\"><p id=\"c4ad72062d1n8\">找到需要重启的ECS实例。</p><ul id=\"32c1d5b12dsuk\"><li id=\"32c1aea02d4ny\"><p id=\"b266908f6e7q3\">如果重启一个实例，在<b data-tag=\"uicontrol\" id=\"4d1cda54d7ese\" class=\"uicontrol\">操作</b>列，<span data-tag=\"ph\" props=\"china\" id=\"c4ad72072dxeq\" data-cond-props=\"china\" class=\"ph\">单击<img placement=\"inline\" alt=\"icon\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9009291661/p484183.png\" id=\"c4ad72082d6go\" class=\"image inline\"> <b data-tag=\"uicontrol\" id=\"4d1cda58d71by\" class=\"uicontrol\">&gt; 实例状态 &gt; 重启</b></span>。</p></li><li id=\"433765902de7w\"><p id=\"1dfed4d12fue4\">如果重启多个实例，选择多个实例（所选实例的状态必须一致），并在页面底部单击<span data-tag=\"ph\" props=\"china\" id=\"659290102dl7k\" data-cond-props=\"china\" class=\"ph\"><img placement=\"inline\" alt=\"三点\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3645542661/p486910.png\" id=\"img-ue5-g1j-ed8\" class=\"image inline\"> <b data-tag=\"uicontrol\" id=\"4d1cda61d78z9\" class=\"uicontrol\">&gt; 重启</b></span>。</p></li></ul></li><li id=\"a2cbeee02dnyv\"><p id=\"1dfed4d22fpek\">在<b data-tag=\"uicontrol\" id=\"4d1cda68d7o7n\" class=\"uicontrol\">重启实例</b>对话框中，选择<b data-tag=\"uicontrol\" id=\"4d1cda6ad79g8\" class=\"uicontrol\">重启方式</b>，并单击<b data-tag=\"uicontrol\" id=\"4d1cda6cd7zwi\" class=\"uicontrol\">确定</b>。</p></li></ol></section><section id=\"Kdump\" class=\"section\"><p id=\"b391dc80d99dm\"><b>开启Kdump服务</b></p><p id=\"rbCts\" data-spm-anchor-id=\"a2c9r.14518950.0.i0.265bZOEoZOEoDy\">出现Kernel panic通常是因为ECS实例中，应用程序或者操作系统内核故障导致系统崩溃。您可以开启Kdump服务获取内核文件分析问题原因。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-enable-the-kdump-service-for-linux-instances\">Linux实例如何开启Kdump服务</a>。</p></section></section></section><section id=\"1bf9eb1029ws1\" class=\"section\"><h3 id=\"8ccc6e24294vt\"><b>1662001148：Linux系统的关键系统文件缺失</b></h3><section id=\"42a0c4d0d91vx\" class=\"section\"><h4 id=\"8ccc6e25296ji\"><b>问题现象</b></h4><p id=\"c25cc3d0291a9\">ECS实例内部OS启动失败，通过VNC登录实例时，启动界面显示<code data-tag=\"code\" class=\"code\">execute/bin/sh， giving up：No such file or directory</code>错误信息。</p><pre outputclass=\"language-shell\" data-tag=\"codeblock\" id=\"l401xa\" height=\"213\" class=\"pre codeblock language-shell\"><code>0K] Stopped dracut cmdline hook.\nStopping dracut cmdline hook...\nOK] Stopped Create Static Device Nodes in/dev.\nStopping Create Static Device Nodes in/dev...\nOK] Stopped Create list of required sta...ce nodes for the current kernel.\nStopping Create list of required st...nodes for the current kernel...\nOK]ClOSed udev Control Socket.\nOK]ClOSed udev Kernel Socket.\nStarting Cleanup udev dDB.\n[OK] Started Cleanup udev dDB.\n6.573859] system d-journald[106] ：Received SIGTERM from PID 1(system d) .\n[DK]Reached target Switch Root.\n[OK] Started Plymouth switch root service.\nStarting Switch Root...\n[6.583367] systemd[1] ：No /sbin/init， trying fallback\n[6.584388] systemd[1] ：Failed to execute/bin/sh， giving up：No such file or directory\n[892.889761] random：crn gin it done</code></pre></section><section id=\"4acee290d9pdg\" class=\"section\"><h4 id=\"8ccc6e2629ean\"><b>问题原因</b></h4><p id=\"a76df84029eoc\">该问题可能是由于ECS实例内部<code data-tag=\"code\" class=\"code\">/bin/sh</code>或者<code data-tag=\"code\" class=\"code\">/bin/bash</code>文件或者软链被删除，导致实例启动失败。</p></section><section id=\"4fab8b60d9atb\" class=\"section\"><h4 id=\"8ccc6e2729hr8\"><b>解决方案</b></h4><section id=\"54241b30d9fk0\" class=\"section\"><p id=\"1bdbe3d030ov9\"><b>方案一：修复异常ECS实例的数据盘</b></p><ol id=\"79eeab1029dju\" data-spm-anchor-id=\"a2c4g.11186623.0.i0.33d17e36OQpAjl\"><li id=\"79eed22029wsf\" data-lake-id=\"ec7c91bf90b068c796fb981318b9131b\" data-spm-anchor-id=\"a2c4g.11186623.0.i2.33d17e36OQpAjl\"><p id=\"79eeab1129bx4\">卸载异常ECS实例的系统盘，并将该磁盘作为数据盘挂载到正常ECS实例中。</p><p id=\"4dccd6402d72i\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-do-i-restore-system-disk-data\">如何恢复系统盘数据？</a>的步骤一~步骤四。</p></li><li id=\"79eed2222985u\" data-lake-id=\"ec7c91bf90b068c796fb981318b9131b\" data-spm-anchor-id=\"a2c4g.11186623.0.i2.33d17e36OQpAjl\"><p id=\"79eed22129lbj\">在正常ECS实例中，将对应的/bin/sh或者/bin/bash文件拷贝到异常ECS系统盘内。</p><p id=\"1f3f3c6033vv9\">如将正常ECS实例的/bin/sh拷贝到异常ECS实例（192.168.XXX.XXX）中。</p><pre id=\"w6hcty\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>scp /bin/sh root@192.168.XXX.XXX:/bin/sh</code></pre></li><li id=\"79eed224297ki\" data-lake-id=\"ec7c91bf90b068c796fb981318b9131b\" data-spm-anchor-id=\"a2c9r.14518950.0.i8.796a7367y8oEs0\"><p id=\"79eed22329tw4\">恢复异常ECS实例的系统盘。</p><p id=\"556a25b02ditk\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-do-i-restore-system-disk-data\">如何恢复系统盘数据？</a>的步骤五。</p></li><li id=\"79eed22629ew5\" data-lake-id=\"b53a5a3e92a4bbf5e3f6555fde3be01b\" data-spm-anchor-id=\"a2c9r.14518950.0.i3.a5f8f7Bwf7Bw3f\"><p id=\"79eed22529wtw\">通过SSH或VNC远程登录已修复的ECS实例，若不再出现该问题，说明该问题已修复。</p></li></ol></section><section id=\"582271f0d948i\" class=\"section\"><p id=\"a8a34d8029b41\"><b>方案二：使用快照恢复系统盘</b></p><p id=\"e96536d129vn7\">如果方案一操作之后还是无法恢复系统盘grub2引导实例启动，您可以选择如下方案进行操作。</p><p id=\"e9650fc029mu6\">如果在您存有快照的情况下，您可以使用快照恢复系统盘。具体操作如下：</p><div type=\"warning\" id=\"7891c6f030oy7\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"78cd224030o8b\">回滚云盘是不可逆操作，从快照的创建日期到回滚云盘时这段时间内的数据会丢失。为避免误操作，建议您在回滚前为云盘创建一份快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol data-tag=\"steps\" id=\"2c09b2f12dg41\" docid=\"9688\" class=\"steps\"><li data-tag=\"step\" id=\"step-av5-b0s-c73\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"299e624130flx\" docid=\"380982\" class=\"step\"><p id=\"cc0d600037nju\"><span data-tag=\"cmd\" id=\"cmd-brj-6yn-8vy\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-d8t-8oi-933\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-gwf-0yb-z74\" class=\"uicontrol\">存储与快照</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-7g6-j0f-4ff\" class=\"uicontrol\">快照</b></span>。</span></p></li><li data-tag=\"step\" id=\"step-wi8-r36-wzv\" class=\"step\"><p id=\"cc0dfc4237gix\"><span data-tag=\"cmd\" id=\"cmd-acu-560-w33\" class=\"cmd\">在页面左侧顶部，选择目标资源所在的地域。<img data-tag=\"image\" id=\"image-3wz-243-ym2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0777199861/p680076.png\" width=\"500\" alt=\"地域\" placement=\"break\" class=\"image break\"> </span></p></li><li data-tag=\"step\" id=\"step-khh-x7j-t04\" class=\"step\"><p id=\"b4e82620302mq\">单击<b data-tag=\"uicontrol\" id=\"4e354bf0304xo\" class=\"uicontrol\">云盘快照</b>页签。</p></li><li id=\"46d3f41030zc9\"><p id=\"46d3cd0030g7i\">找到需要回滚云盘的快照，在<b data-tag=\"uicontrol\" id=\"uicontrol-nkb-4wx-rln\" class=\"uicontrol\">操作</b>列中单击<b data-tag=\"uicontrol\" id=\"uicontrol-z4l-k3s-8vc\" class=\"uicontrol\">回滚云盘</b>。 </p></li><li data-tag=\"step\" id=\"step-ex9-3lg-7c5\" class=\"step\"><p id=\"b4e8262430qog\">在弹出的对话框中，单击<b data-tag=\"uicontrol\" id=\"uicontrol-2wb-2l7-rqz\" class=\"uicontrol\">确定</b>。</p></li></ol></section><section id=\"5c3eb0f0d972l\" class=\"section\"><p id=\"b267c9256ec22\"><b>方案三：重置系统盘</b></p><p id=\"447d805030k53\">如果您系统盘内没有重要数据的情况下，则您可以重置系统盘。具体操作如下：</p><div type=\"warning\" id=\"030b10e1309ll\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"b267c9266e1ia\">重置系统盘操作会清空云盘已写入数据，建议操作前创建快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol id=\"a8b7dd4030dse\" docid=\"3811558\"><li id=\"b9681a9251ptg\"><p id=\"b9681a9351g9z\">停止ECS实例。</p><ol id=\"b9681a9451ofa\"><li data-tag=\"step\" id=\"b9681a95515vj\" platform=\"public\" props=\"china intl\" docid=\"380982\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"b9681a995110w\" docid=\"380982\" class=\"step\"><p id=\"cc0c75a0379qu\"><span data-tag=\"cmd\" id=\"cmd-9ro-yc5-vx4\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-kq7-suy-h2g\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-puq-bs2-grd\" class=\"uicontrol\">实例与镜像</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-fk3-i03-vyq\" class=\"uicontrol\">实例</b></span>。</span></p></li><li id=\"b9681a9f51ou3\"><p id=\"b9681aa0517g2\">找到需要停止的ECS实例，在<b data-tag=\"uicontrol\" id=\"b9681aa151189\" class=\"uicontrol\">操作</b>列，<span data-tag=\"ph\" props=\"china\" id=\"b9681aa251x3q\" data-cond-props=\"china\" class=\"ph\">单击<img placement=\"inline\" alt=\"icon\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9009291661/p484183.png\" id=\"b9681aa351lc8\" class=\"image inline\"> &gt; <b data-tag=\"uicontrol\" id=\"b9681aa451wdv\" class=\"uicontrol\">实例状态</b> &gt; <b data-tag=\"uicontrol\" id=\"b9681aa5511hv\" class=\"uicontrol\">停止</b></span>。</p></li></ol></li><li id=\"b9681aaa51gct\"><p id=\"b9681aab51qe6\">重新初始化系统盘。</p><ol id=\"b9681aac51x58\"><li id=\"b9681aad51c3o\"><p id=\"b9681aae51w2e\">找到需要重新初始化系统盘的实例，单击实例ID进入<b data-tag=\"uicontrol\" id=\"b9681aaf51rig\" class=\"uicontrol\">实例详情</b>页。</p></li><li id=\"b9681ab051ezv\"><p id=\"b9681ab151cni\">单击<b data-tag=\"uicontrol\" id=\"b9681ab2511az\" class=\"uicontrol\">云盘</b>页签。</p></li><li id=\"b9681ab351j5n\"><p id=\"b9681ab451vfi\">找到系统盘，在<b data-tag=\"uicontrol\" id=\"b9681ab551flv\" class=\"uicontrol\">操作</b>列中，单击<b data-tag=\"uicontrol\" id=\"b9681ab6515r6\" class=\"uicontrol\">重新初始化云盘</b>。</p></li><li id=\"b9681ab7519bs\"><p id=\"b9681ab851q10\">在弹出的<b data-tag=\"uicontrol\" id=\"b9681ab951em5\" class=\"uicontrol\">重新初始化云盘</b>对话框里，配置重新初始化参数。</p></li><li id=\"b96841a051i8o\"><p id=\"b96841a151f7c\">单击<b data-tag=\"uicontrol\" id=\"b96841a251hoe\" class=\"uicontrol\">确认重新初始化云盘</b>。</p><p id=\"b96841a3517zz\">完成重新初始化后，实例会自动启动。</p><img width=\"600\" placement=\"break\" alt=\"重新初始化云盘\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8069291661/p484203.png\" id=\"b96841a551p42\" class=\"image break\"></li></ol></li></ol></section></section></section><section id=\"236a5e2029dg5\" class=\"section\"><h3 id=\"9d274a1029i77\"><b>1662001149：Linux系统启动过程中文件系统fsck检查出异常</b></h3><section id=\"648d9d20d99r1\" class=\"section\"><h4 id=\"9d274a11292eu\"><b>问题现象</b></h4><p id=\"d84bd06029rjl\">ECS实例启动阶段OS启动卡住，通过VNC登录时，可以看到类似如下错误信息：</p><pre outputclass=\"language-shell\" data-tag=\"codeblock\" id=\"uxwfxw\" class=\"pre codeblock language-shell\"><code>fsck from util-linux 2.20.1\nfsck from util-linux 2.20.1\n：clean， 193163/ 1310720 files， 2415199/ 5242368 blocks\n/dev/vdb：Superblock last write tine(Tue Nou 2300：31：582021，\nnow=WedNou1018：28：552021) is in the future.\n/dev/vdb：UNEXPECTED INCONSISTENCY； RUN fsck MANUALLY.\n(i.e.， without-a or-p options)\nmountall：fsck /data[294] terminated with status 4\nmountall：File system has errors：/data\nErrors were found while checking the disk dr iue for/data.\nPress F to attempt to fix the errors， It oig more， S to skip mounting， or M for</code></pre></section><section id=\"6e0d8f40d9sd0\" class=\"section\"><h4 id=\"9d274a12296zj\"><b>问题原因</b></h4><p id=\"00c3018029b3f\"><code data-tag=\"code\" class=\"code\">/data</code>挂载点对应的文件系统<code data-tag=\"code\" class=\"code\">/dev/vdb</code>存在异常，执行<b data-tag=\"uicontrol\" id=\"4d24c9a5d7ich\" class=\"uicontrol\">fsck</b>的时候返回报错，需要人工确认是否修复。</p></section><section id=\"70d317e0d9udv\" class=\"section\"><h4 id=\"9d274a13299dy\"><b>解决方案</b></h4><div type=\"note\" id=\"342f0d416e5vj\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"342f0d406e54y\">本解决方案仅针对出现该问题时的修复方案，实际问题中需要根据不同的fsck问题原因，进行不同的修复。</p></div></div><ol id=\"ea13b03229jpa\"><li id=\"ea13b03029ihe\"><p id=\"4666007029095\">按照提示按<code data-tag=\"code\" class=\"code\">F</code>自动修复。</p></li><li id=\"ec760a3129dkc\"><p id=\"ec760a3029uql\">如果修复失败，可以再尝试按<code data-tag=\"code\" class=\"code\">S</code>跳过对应的<code data-tag=\"code\" class=\"code\">/data</code>挂载，继续启动OS。</p></li><li id=\"ff61550129fyc\"><p id=\"ff615500297er\">进入OS之后，执行如下命令，修复对应挂载点<code data-tag=\"code\" class=\"code\">/data</code>所在的文件系统<code data-tag=\"code\" class=\"code\">/dev/vdb</code>异常。</p><pre id=\"s3k5sf\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>fsck -y /dev/vdb</code></pre></li><li id=\"6b23b2d0d92jd\"><p id=\"6b238bc0d9a9s\">修复完成后，执行如下命令重启实例。</p><pre id=\"gx5ghq\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>reboot</code></pre></li><li id=\"3cea45b0d95xa\"><p id=\"3d2504c0d9xzg\">远程连接实例，若不再出现该问题，说明该问题已修复。</p></li></ol></section></section><section id=\"3032eb90290k5\" class=\"section\"><h3 id=\"b267f02a6ekwe\"><b>1662001150：Linux系统中/etc/fstab文件中配置的某个挂载点对应的设备不存在，或系统启动过程中文件系统fsck检查出异常</b></h3><section id=\"dd7711c0d9yhr\" class=\"section\"><h4 id=\"b267f02b6exw9\"><b>问题现象</b></h4><p id=\"f1b1c72029zpc\">ECS实例内部OS启动卡在<b data-tag=\"uicontrol\" id=\"4d24f0b1d7p9d\" class=\"uicontrol\">Give root password for maintenance</b>等待输入密码页面。如下所示：</p><pre id=\"862cla\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>Booting from Hard Disk...\nBooting from 0000:7c00\n[ 2.845229] EXT4-fs (vdb1): Unrecognized mount option \"default\" or missing value\nWelcome to emergency mode! After logging in, type \"journalctl -xb\" to view\nsystem logs, \"systemctl reboot\" to reboot, \"systemctl default\" or ^D to\ntry again to boot into default mode.\nGive root password for maintenance\n(or press Control-D to continue):</code></pre></section><section id=\"daea4c60d9bfo\" class=\"section\"><h4 id=\"b267f02c6ebuq\"><b>问题原因</b></h4><p id=\"1f2b5c1029maq\">可能存在的原因如下：</p><ul id=\"a620cb52d9jrw\"><li id=\"a620cb50d91n8\"><p id=\"a4db04e0d9hpu\">ECS实例中<code data-tag=\"code\" id=\"a4daddd0d9qet\" class=\"code\">/etc/fstab</code>文件配置的挂载点对应的设备不存在。</p></li><li id=\"27b5557129hai\"><p id=\"f190b52029yl6\">配置了开机<b data-tag=\"uicontrol\" id=\"4d24f0bfd7xjc\" class=\"uicontrol\">fsck</b>自检文件系统，<b data-tag=\"uicontrol\" id=\"4d24f0c1d78mj\" class=\"uicontrol\">fsck</b>自检时发现文件系统存在异常，需要人工参与修复。</p></li></ul></section><section id=\"d85374e0d9tm9\" class=\"section\"><h4 id=\"b26817206ekrh\"><b>解决方案</b></h4><p id=\"4cd80790298j2\">您可以根据实际问题原因来选择适合您的解决方案。</p><section id=\"74f3b720d98dr\" class=\"section\"><p id=\"64f0baa029nsh\"><b>方案一：修复错误配置</b></p><ol id=\"d6e44600d9e8c\"><li id=\"d6e44601d90ms\"><p id=\"d6e44602d9f3i\">输入密码进入系统。</p></li><li id=\"fa3fc220d97n5\"><p id=\"fcadb4e0d9fqd\">执行如下命令，修改根分区的挂载模式为读写。</p><pre id=\"nd32da\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>mount / -o remount,rw</code></pre></li><li id=\"d6e44603d93gp\"><p id=\"d6e44604d9j64\">执行如下命令，查看具体报错信息。</p><pre id=\"3hozir\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>journalctl -xb</code></pre><p id=\"f9080cd0d9hz2\">如<code data-tag=\"code\" class=\"code\">[ 2.845229] EXT4-fs (vdb1): Unrecognized mount option \"default\" or missing value</code>表示<code data-tag=\"code\" class=\"code\">/etc/fstab</code>文件中<code data-tag=\"code\" class=\"code\">/dev/vdb1</code>挂载模式为default存在错误，需要修改为defaults。</p></li><li id=\"d6e44605d91rl\"><p id=\"d6e44606d9l58\">修改<code data-tag=\"code\" class=\"code\">/etc/fstab</code>配置文件中<code data-tag=\"code\" class=\"code\">/dev/vdb1</code>挂载模式为defaults。</p><ol id=\"a0c57fd1d9u6s\"><li id=\"a0a52690d9p5p\"><p id=\"a0a4d870d94p6\">执行如下命令，打开<code data-tag=\"code\" class=\"code\">/etc/fstab</code>配置文件。</p><pre id=\"zwonym\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>vim /etc/fstab</code></pre></li><li id=\"ae744e90d9zt0\"><p id=\"ae742780d9ad6\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"b5cd6910d90md\"><p id=\"b5cd1af0d9foc\">将<code data-tag=\"code\" class=\"code\">/dev/vdb1</code>挂载模式修改为defaults。</p><pre id=\"kz46gx\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>/dev/vdb1       /      ext4   default  l  l</code></pre></li><li id=\"cc9fb210d9plx\"><p id=\"cc9f63f0d9ds5\">按Esc键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存并退出编辑。</p></li></ol></li><li id=\"993ca2c0d9etz\"><p id=\"25320560d9fog\">重启ECS实例。</p><p id=\"a73422f0d9zxz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li><li id=\"a63f62b0d9yfa\"><p id=\"a63ec670d9oae\">远程连接实例，若不再出现该问题，说明该问题已修复。</p></li></ol></section><section id=\"722024c0d93ss\" class=\"section\"><p id=\"5224a5b029kvl\"><b>方案二：修复文件系统异常</b></p><p id=\"8910e65029ncj\">输入密码进入系统之后，执行fsck检测的对应的错误，根据实际情况选择对应解决方案进行修复。</p></section></section></section><section id=\"c3b32fa0814s0\" class=\"section\"><h3 id=\"cb160e2181sot\"><b>1671696288：Linux系统</b>initrd switch root失败</h3><section id=\"77193bc0d9iaj\" class=\"section\"><h4 id=\"cb160e2281xcu\"><b>问题现象</b></h4><p id=\"cb16353081zvt\">Linux系统启动失败。通过VNC登录时，可以看到类似<b data-tag=\"uicontrol\" id=\"4d2517c6d7m2d\" class=\"uicontrol\">Failed to start Switch Root</b>的错误信息。如下图：</p><img width=\"500\" id=\"cec25ef082juc\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6338671761/p538115.png\" alt=\"下载 (4)\" placement=\"break\" class=\"image break\"></section><section id=\"7a29d720d9xr4\" class=\"section\"><h4 id=\"cb16353381246\"><b>问题原因</b></h4><p id=\"971461a08544p\">Linux系统在启动过程中执行<b data-tag=\"uicontrol\" id=\"4d2517cdd71r9\" class=\"uicontrol\">switch root</b>时发生失败的原因可能有很多种，如下：</p><ul id=\"6430ed2285wr2\"><li id=\"6430ed2085nij\"><p id=\"617b6a108562g\">常见的可能原因是<code data-tag=\"code\" class=\"code\">/etc/os-release</code>或<code data-tag=\"code\" class=\"code\">/usr/lib/os-release</code>文件缺失，请参考<a title=\"\" class=\"xref\" href=\"#fa924b4182vq2\">方案一：创建缺失文件</a>进行修复。</p></li><li id=\"75198a2185xje\"><p id=\"75198a2085lsh\">其他可能原因导致<b data-tag=\"uicontrol\" id=\"4d253ec9d70da\" class=\"uicontrol\">switch root</b>失败，请参考<a title=\"\" class=\"xref\" href=\"#15ae085082oqf\">方案二：使用快照恢复系统盘</a>进行修复。</p></li></ul></section><section id=\"98ca91b0d9mri\" class=\"section\"><h4 id=\"fa924b4182vq2\"><b>解决方案</b></h4><section id=\"a16ec9d0d98zj\" class=\"section\"><p id=\"7e00f6d0d9ahj\"><b>方案一：创建缺失文件</b></p><ol id=\"e1b04a3282deq\"><li id=\"e1b04a3082vfu\"><p id=\"0068d28182ffh\">卸载异常ECS实例的系统盘，并将该磁盘作为数据盘挂载到正常ECS实例中。</p><p id=\"0068d282820s4\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-do-i-restore-system-disk-data\">如何恢复系统盘数据？</a>的步骤一~步骤四。</p><div type=\"note\" id=\"3a3a54b085dy6\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3a89380085h2f\">该正常实例最好是与异常实例运行相同的Linux发行版本，以方便后续恢复<code data-tag=\"code\" class=\"code\">/etc/os-release</code>文件的操作。</p></div></div></li><li id=\"e94fbc8182d70\"><p id=\"be0a0ca0821gt\">在正常ECS实例中，根据异常系统盘内是否存在<code data-tag=\"code\" class=\"code\">/etc/os-release</code>文件执行相应操作。</p><div id=\"1c5a4fa186vyr\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"2080048086dgl\">本示例中，假设异常系统盘中的文件系统挂载到了/mnt目录下。</p></div></div><table id=\"ee9d5a70855y9\" tablewidth=\"709\" tablecolswidth=\"177 532\" class=\"table\"><colgroup colwidth=\"0.5*\" style=\"width:24.96%\"></colgroup><colgroup colwidth=\"1.5*\" style=\"width:75.04%\"></colgroup><tbody class=\"tbody\"><tr id=\"ee9d818a85926\" style=\"height:69px\"><td id=\"ee9d81818500h\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"ee9d818085nh6\"><b>可能情况</b></p></td><td id=\"ee9d818585khz\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"ee9d818485j11\"><b>具体操作</b></p></td></tr><tr id=\"ee9d8195857te\" style=\"height:69px\"><td id=\"ee9d818c85eug\" rowspan=\"1\" colspan=\"1\"><p id=\"20baa35085zyr\"><code data-tag=\"code\" class=\"code\">/etc/os-release</code>文件不存在</p></td><td id=\"ee9d8190850cm\" rowspan=\"1\" colspan=\"1\"><p id=\"ee9d818f85jrz\">根据正常ECS实例与异常ECS实例Linux发行版本是否相同，进行相应操作。</p><ul id=\"26021fa1863z4\"><li id=\"2601f890864r2\"><p id=\"aec68282858xe\">Linux发行版本相同：执行<code data-tag=\"code\" class=\"code\">cp /etc/os-release /mnt/etc/os-release</code>命令将正常实例中的<code data-tag=\"code\" class=\"code\">/etc/os-release</code>文件复制到异常ECS实例。</p></li><li id=\"2755057086a0r\"><p id=\"aec6828485lku\">Linux发行版本不同：执行<code data-tag=\"code\" class=\"code\">vi /mnt/etc/os-release</code>命令手动创建并编辑<code data-tag=\"code\" class=\"code\">/etc/os-release</code>文件。<code data-tag=\"code\" class=\"code\">/etc/os-release</code>文件的内容参照同一Linux发行版本的正常实例中的<code data-tag=\"code\" class=\"code\">/etc/os-release</code>文件内容进行填写。</p></li></ul><div id=\"22bda30086751\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3675b3b086r9s\">可能会发现参照同一Linux发行版本的正常实例中的<code data-tag=\"code\" class=\"code\">/etc/os-release</code>文件是一个指向其他文件的符号链接。您可根据实际情况需要选择一种操作进行修复。</p><ul id=\"4ea40a40869cv\"><li id=\"4ea40a41861gm\"><p id=\"4ea40a4286fqx\">参考上述操作直接恢复包含实际内容的<code data-tag=\"code\" class=\"code\">/etc/os-release</code>文件。</p><p id=\"4ea40a4386wxz\">因为<code data-tag=\"code\" class=\"code\">/etc/os-release</code>和<code data-tag=\"code\" class=\"code\">/usr/lib/os-release</code>文件只要其中一个存在即可被<code data-tag=\"code\" class=\"code\">systemd</code>正确识别。</p></li><li id=\"4ea40a4486k9u\"><p id=\"4ea40a4586jh9\">参考下述的操作，先恢复<code data-tag=\"code\" class=\"code\">/etc/os-release</code>指向的包含实际内容的其他文件，然后再恢复<code data-tag=\"code\" class=\"code\">/etc/os-release</code>符号链接，以确保系统文件的完整性和一致性。</p></li></ul></div></div></td></tr><tr id=\"ee9da892853lp\" style=\"height:59px\"><td id=\"ee9d8197852rh\" rowspan=\"2\" colspan=\"1\"><p id=\"ee9d819685z02\"></p><p id=\"0036d0e085nfa\"><code data-tag=\"code\" class=\"code\">/etc/os-release</code>文件存在</p></td><td id=\"ee9d819b85mxh\" rowspan=\"2\" colspan=\"1\"><ol id=\"ee878bb285n18\"><li id=\"ee878bb085sbg\"><p id=\"f311a7b085cpg\">执行<code data-tag=\"code\" class=\"code\">ls -hal /etc/os-release</code>命令。系统返回类似如下信息时，表明<code data-tag=\"code\" class=\"code\">/etc/os-release</code>文件是一个指向<code data-tag=\"code\" class=\"code\">/usr/lib/os-release</code>的符号链接。</p><pre outputclass=\"language-shell\" data-tag=\"codeblock\" id=\"s2ulir\" class=\"pre codeblock language-shell\"><code>lrwxrwxrwx 1 root root 19 Dec 20 15:13 os-release -&gt; /usr/lib/os-release</code></pre></li><li id=\"2b415a4085o2c\"><p id=\"2b415a4185lhk\">根据<code data-tag=\"code\" class=\"code\">/usr/lib/os-release</code>文件是否缺失，执行相应操作。</p><ul id=\"2b415a4285avw\"><li id=\"9a36962085z3r\"><p id=\"9a36962185705\"><code data-tag=\"code\" class=\"code\">/usr/lib/os-release</code>文件不存在：</p><ul id=\"9a36962285vww\"><li id=\"9a36962385qdb\"><p id=\"9a36962485h9h\">Linux发行版本相同：执行<code data-tag=\"code\" class=\"code\">cp /usr/lib/os-release /mnt/usr/lib/os-release</code>命令将正常实例中的<code data-tag=\"code\" class=\"code\">/usr/lib/os-release</code>文件复制到异常ECS实例。</p></li><li id=\"9a369625855g0\"><p id=\"9a36962685n38\">Linux发行版本不同：执行<code data-tag=\"code\" class=\"code\">vi /mnt/usr/lib/os-release</code>命令手动创建并编辑<code data-tag=\"code\" class=\"code\">/usr/lib/os-release</code>文件。<code data-tag=\"code\" class=\"code\">/usr/lib/os-release</code>文件的内容参照同一Linux发行版本的正常实例中的<code data-tag=\"code\" class=\"code\">/usr/lib/os-release</code>文件内容进行填写。</p></li></ul></li><li id=\"8ef98ab08599a\"><p id=\"9211a02085rir\"><code data-tag=\"code\" class=\"code\">/usr/lib/os-release</code>文件存在：使用快照恢复系统盘进行修复，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/roll-back-a-disk-by-using-a-snapshot\">使用快照回滚云盘</a>。</p></li></ul></li></ol></td></tr><tr id=\"ee9da89d85esb\" style=\"height:59px\"></tr></tbody></table></li><li id=\"13554e71828hz\"><p id=\"0d04a34282pxt\">恢复异常ECS实例的系统盘。</p><p id=\"21e862b082n9z\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-do-i-restore-system-disk-data\">如何恢复系统盘数据？</a>的步骤五。</p></li><li id=\"25a14c0082k3n\"><p id=\"25a124f082i9h\">通过SSH或VNC远程登录已修复的ECS实例，确认ECS实例恢复正常。</p></li></ol></section><section id=\"9e99b0d0d9uxn\" class=\"section\"><p id=\"15ae085082oqf\"><b>方案二：使用快照恢复系统盘</b></p><ol data-tag=\"steps\" id=\"b7dfa391828rg\" docid=\"9688\" class=\"steps\"><li data-tag=\"step\" id=\"step-av5-b0s-c73\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"299e624130flx\" docid=\"380982\" class=\"step\"><p id=\"cc0d600037nju\"><span data-tag=\"cmd\" id=\"cmd-brj-6yn-8vy\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-d8t-8oi-933\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-gwf-0yb-z74\" class=\"uicontrol\">存储与快照</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-7g6-j0f-4ff\" class=\"uicontrol\">快照</b></span>。</span></p></li><li data-tag=\"step\" id=\"step-wi8-r36-wzv\" class=\"step\"><p id=\"cc0dfc4237gix\"><span data-tag=\"cmd\" id=\"cmd-acu-560-w33\" class=\"cmd\">在页面左侧顶部，选择目标资源所在的地域。<img data-tag=\"image\" id=\"image-3wz-243-ym2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0777199861/p680076.png\" width=\"500\" alt=\"地域\" placement=\"break\" class=\"image break\"> </span></p></li><li data-tag=\"step\" id=\"step-khh-x7j-t04\" class=\"step\"><p id=\"b4e82620302mq\">单击<b data-tag=\"uicontrol\" id=\"4e354bf0304xo\" class=\"uicontrol\">云盘快照</b>页签。</p></li><li id=\"46d3f41030zc9\"><p id=\"46d3cd0030g7i\">找到需要回滚云盘的快照，在<b data-tag=\"uicontrol\" id=\"uicontrol-nkb-4wx-rln\" class=\"uicontrol\">操作</b>列中单击<b data-tag=\"uicontrol\" id=\"uicontrol-z4l-k3s-8vc\" class=\"uicontrol\">回滚云盘</b>。 </p></li><li data-tag=\"step\" id=\"step-ex9-3lg-7c5\" class=\"step\"><p id=\"b4e8262430qog\">在弹出的对话框中，单击<b data-tag=\"uicontrol\" id=\"uicontrol-2wb-2l7-rqz\" class=\"uicontrol\">确定</b>。</p></li></ol></section></section></section><section id=\"751806b0505ef\" class=\"section\"><h3 id=\"OOM\" jc=\"start\" style=\"text-align:start\">1684829582：Linux实例的内存空间不足，导致操作系统出现内存溢出</h3><section id=\"84d54310503kx\" class=\"section\"><h4 id=\"7a5d8370509qm\" data-spm-anchor-id=\"a2c4g.11186623.0.i1.300556f8Kskobz\" jc=\"start\" style=\"text-align:start\">问题现象</h4><p id=\"172713e150z4f\">使用Linux实例时，出现程序崩溃、进程读写异常、ECS实例夯住（Hang）、ECS实例运行卡顿等现象，在系统日志<code data-tag=\"code\" class=\"code\">/var/log/message</code>中出现大量的<span style=\"color:rgb(24, 24, 24)\">Out of Memory</span>（OOM）<span style=\"color:rgb(24, 24, 24)\">信息，如下图所示：</span></p><img id=\"396f2100507s9\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2182144961/p718347.png\" alt=\"image.png\" placement=\"break\" width=\"800\" class=\"image break\"></section><section id=\"869123e050gu3\" class=\"section\"><h4 id=\"7ea0845050wv3\" jc=\"start\" style=\"text-align:start\">问题原因</h4><p id=\"c7330b9051qdu\">Out of Memory（OOM）是Linux内核在系统内存严重不足时，强行释放进程内存的一种机制。</p><p id=\"033f7ef0519ll\">出现大量的Out of Memory信息可能是因为系统内存资源不足，系统无法为程序或者进程分配足够的内存空间，从而导致程序无法正常运行或者进程无法读写数据。</p></section><section id=\"87e6a1c0509ut\" class=\"section\"><h4 id=\"818cf5e050l4a\" jc=\"start\" style=\"text-align:start\">解决方案</h4><p id=\"bbaafc3050twh\">触发OOM的原因较多（系统资源不足、内存泄漏、不合理的系统配置、内存分配不合理等），您可以通过以下步骤进行排查。</p><ol id=\"a2839512502rn\"><li id=\"a283951050qek\"><p id=\"89e24ab150cy5\">远程登录该ECS实例。</p><p id=\"d1845bb050xn3\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"4bcd9ea051uul\"><p id=\"4bcd779051rge\">执行如下命令，查看并记录OOM发生的进程、时间和频率。</p><pre id=\"w37kpi\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>cat /var/log/message</code></pre></li><li id=\"56feea4051xut\"><p id=\"56fe9c2051nkf\">查看发生OOM时间段内，Linux实例系统负载情况及业务应用日志。</p><ul id=\"f391f6d151ml0\"><li id=\"de3bed90510oj\"><p id=\"de3bc68051go5\">查看Linux实例的系统负载情况。</p><ul id=\"accbca1151d27\"><li id=\"ac8ee8205190z\"><p id=\"b25a84d051dyj\">使用<a class=\"\" href=\"https://cloudmonitornext.console.aliyun.com/newOverview\">云监控</a>查询ECS实例负载信息。</p></li><li id=\"501f290051561\"><p id=\"53f66fc0510g7\">通过<code data-tag=\"code\" class=\"code\">free</code>、<code data-tag=\"code\" class=\"code\">top</code>或<code data-tag=\"code\" class=\"code\">sar</code>命令查看系统负载信息。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/query-and-analysis-of-system-loads-on-linux-instances\">Linux实例负载高问题排查和异常处理</a>。</p></li></ul></li><li id=\"a8b04e6051wul\"><p id=\"a8b02750510gp\">查看业务应用日志中触发OOM的原因。</p><p id=\"7d40e48051nc7\">使用Valgrind、jprofiler、jmap等内存分析工具分析应用程序的内存占用情况。</p></li></ul></li><li id=\"1c0ea63051mcw\"><p id=\"1c0e7f2051rn8\">根据Linux实例系统负载及业务日志，分析OOM原因并进行相应处理。</p><ul id=\"9a476c81519n5\"><li id=\"996d392051bde\"><p id=\"9d70c00251g1f\">如果是您当前Linux实例的内存不足以支撑业务运行。</p><p id=\"9d70c00351lux\">根据业务需要，升级实例内存配置。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/upgrade-the-instance-types-of-subscription-instances\">包年包月实例升配规格</a>或<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-the-instance-type-of-a-pay-as-you-go-instance\">按量付费实例变配规格</a>。</p></li><li id=\"a40467a051f8l\"><p id=\"a404409051mwp\">您的应用代码存在缺陷（例如内存泄漏、过度分配内存、不合理内存分配等）。</p><p id=\"acd0c1305173j\">请根据您的业务应用日志中出现的问题优化您的业务代码。</p></li></ul></li><li id=\"252e650051ui4\"><p id=\"252e3df051jtv\">继续观察ECS实例运行情况，当OOM问题不再出现，说明该问题已解决。</p></li></ol></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/since-the-launch-of-the-ssh-service-is-not-set-boot", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/solution-of-instances-cannot-be-started/\">实例无法启动的解决方案</a></span>\n <span>SSH服务未设置开机时自启动</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>SSH服务未设置开机时自启动</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-10 17:03:42</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main role=\"main\"><article role=\"article\" aria-labelledby=\"title_oil_e2r_fjd\"><div class=\"body taskbody\" data-tag=\"taskbody\" id=\"taskbody-0lc-lcl-ybp\"><p id=\"shortdesc-9fn-7hf-syy\" class=\"shortdesc\" data-tag=\"shortdesc\">如果Linux实例中SSH服务未设置开机时自启动，重启实例后，将无法使用SSH远程连接实例，您可以使用VNC登录实例进行修复，也可以通过实例健康诊断工具进行问题修复。</p><section class=\"section context\" data-tag=\"context\" id=\"context-mn0-dtc-yxl\"><h2 id=\"d41e14\" class=\"sectiontitle tasklabel\">背景信息</h2><p class=\"p\" data-tag=\"p\" id=\"p-xpn-qdp-rmk\">问题描述：重启Linux实例后，无法继续使用SSH远程连接实例，但是可以使用VNC登录。</p><p class=\"p\" data-tag=\"p\" id=\"p-921-8r2-vwx\">可能原因：造成该问题的原因有多种，其中一种原因为SSH服务未设置开机时自启动，导致Linux实例重启后SSH服务处于停止状态。</p><div class=\"p\" data-tag=\"p\" id=\"p-kel-zms-gn2\">例如：在CentOS 7系统中，运行以下命令查看SSH服务（<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-d0t-vfz-qg4\">sshd.service</code>）的状态。<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-8bl-z9e-4fi\"><code>systemctl status sshd.service</code></pre>查看SSH服务状态未启动，返回结果示例如下图所示：<img class=\"image break\" data-tag=\"image\" id=\"image-xh0-94g-b6d\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8334972161/p240625.png\" alt=\"sshd.service\"></div><div class=\"p\" data-tag=\"p\" id=\"p-rbv-a6a-d23\">您可以根据以下不同场景选择对应的解决方案：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-q12-615-bgi\"><li class=\"li\" data-tag=\"li\" id=\"li-646-jhr-z7e\">SSH服务未开启开机自启动时，一般不会造成实例系统启动失败，但会导致您通过SSH或Workbench远程登录时，无法连接。如果实例已经正常启动，您可以使用VNC登录正常启动的实例进行修复。具体操作，请参见<a title=\"\" class=\"xref\" href=\"#section-lgz-dma-kma\">使用VNC登录正常启动的实例进行修复</a>。</li><li class=\"li\" data-tag=\"li\" id=\"li-vx7-ssc-pwj\">如果您通过实例健康诊断工具进行诊断，诊断结果中实例无法启动场景的SSH服务配置检查未通过，并且实例处于正在挂载修复盘的模式下，您可以使用VNC登录修复系统进行问题修复。具体操作，请参见<a title=\"\" class=\"xref\" href=\"#section-gk4-ufl-b9t\">使用VNC登录修复系统进行修复</a>。</li></ul></div></section><section class=\"section\" data-tag=\"section\" id=\"section-lgz-dma-kma\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-hl8-9bu-vz3\">使用VNC登录正常启动的实例进行修复</h2><ol class=\"ol steps\" data-tag=\"steps\" id=\"steps-dw7-mbx-slz\"><li class=\"li step\" data-tag=\"step\" id=\"step-akx-v44-q2f\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-tlh-8ad-04g\">使用VNC远程连接问题实例。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-3su-2v6-puy\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password#concept-sdk-1jx-wdb\">使用VNC登录实例</a>。</div></li><li class=\"li step\" data-tag=\"step\" id=\"step-gg6-sh0-4r1\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-jbo-0o0-gq1\">运行以下任一命令将SSH服务设置为开机时自启动。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-qvf-3hx-bso\">多数Linux发行版使用<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-nnf-h5k-3vn\">systemd</span>作为服务管理程序，请您根据不同版本的服务管理程序，自行修改命令内容。本文以<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-2qr-qr7-svg\">systemd</span>为例，示例命令如下所示：<div class=\"note notice note-notice\" data-tag=\"note\" id=\"note-0h2-z47-uut\"><div class=\"note-icon-wrapper\"><i class=\"icon-note notice\"></i></div><div class=\"note-content\"><strong>重要</strong> 不同Linux发行版的SSH服务名称可能不同，您需要根据实际的SSH服务名称自行修改命令。例如：在CentOS、Fedora CoreOS、Red Hat Enterprise Linux、SUSE Linux Enterprise Server等版本中SSH服务名称为<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-a25-t9b-nls\">sshd.service</code>；在Debian、Ubuntu等版本中SSH服务名称为<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-nla-z5b-218\">ssh.service</code>。</div></div><ul class=\"ul\" data-tag=\"ul\" id=\"ul-m9m-r8y-eoj\"><li class=\"li\" data-tag=\"li\" id=\"li-usm-kjr-1n6\">运行以下命令设置SSH服务开机时自启动，然后必须重启实例后再使用SSH远程登录ECS实例。<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-4v3-1c8-p31\"><code>systemctl enable sshd.service</code></pre></li><li class=\"li\" data-tag=\"li\" id=\"li-rql-aai-7rp\">运行以下命令设置SSH服务开机时自启动，并立即启动SSH服务，此时无需重启ECS实例，可以直接使用SSH远程登录ECS实例。<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-nj5-0ko-3dq\"><code>systemctl enable --now sshd.service</code></pre></li></ul></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-nsy-17w-8oh\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-xad-237-70z\">设置完成后，运行以下命令查看SSH服务的运行状态为运行中。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-9x7-8qa-f82\"><pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-aac-6qr-m21\"><code>systemctl status sshd.service</code></pre></div><div class=\"itemgroup stepresult\" data-tag=\"stepresult\" id=\"stepresult-kxk-758-rcg\">命令的返回结果示例如下图所示：<img class=\"image break\" data-tag=\"image\" id=\"image-tea-16q-pox\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8334972161/p240626.png\" alt=\"sshd.service\">此时您可以切换至SSH远程连接Linux实例。如果仍无法登录，请重启实例后，再次尝试使用SSH远程连接Linux实例。</div></li></ol></section><section class=\"section\" data-tag=\"section\" id=\"section-gk4-ufl-b9t\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-geb-fjs-jn1\">使用VNC登录修复系统进行修复</h2><ol class=\"ol steps\" data-tag=\"steps\" id=\"steps-gv1-m0a-jjd\"><li class=\"li step\" data-tag=\"step\" id=\"step-1ci-rrf-hpg\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-bnq-zet-bi5\">远程连接问题实例。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-dqn-uxg-6zj\">当ECS实例处于正在挂载修复盘的模式下时，只能通过VNC远程连接。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password#concept-sdk-1jx-wdb\">使用VNC登录实例</a>。</div></li><li class=\"li step\" data-tag=\"step\" id=\"step-zzq-e2e-x4r\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-zpg-nyd-i78\">查看问题实例原有系统盘的挂载信息。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-ho8-s4z-4v0\">在临时挂载的修复盘中，问题实例原有系统盘的文件系统会被挂载到某一临时目录下。您可以通过以下任一方式查看所在的临时目录信息：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-58p-d8h-jsf\"><li class=\"li\" data-tag=\"li\" id=\"li-96g-bmr-7pf\">通过ECS控制台的实例健康诊断结果获取，对应的信息格式示例如下所示：<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-0de-hic-5qx\">/tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</code>。</li><li class=\"li\" data-tag=\"li\" id=\"li-y51-ev9-00i\">在临时挂载的修复盘中，运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-qe0-1e0-zxr\">mount</span>命令查看。例如，问题实例原有系统盘的设备路径为<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-doa-0zh-8gj\">/dev/vda</span>，命令示例如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-13n-t26-v1g\"><code>mount | grep /dev/vda</code></pre><div class=\"p\" data-tag=\"p\" id=\"p-pce-hui-f1f\">返回结果如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-9rp-ptr-kvb\"><code>/dev/vda1 on /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse**** type ext4 (rw,relatime)</code></pre></div></li></ul></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-r35-xsn-nnf\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-cap-bms-1wv\">运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-fbm-avz-1bi\">chroot</span>命令，将根目录切换为问题实例原有系统盘所在的临时路径，并进入<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-bmm-tgd-4te\">chroot</span>环境。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-u5y-azm-p4c\">您需要在问题实例原有系统盘所在的临时路径中进行文件修复。例如，临时路径为<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-rkg-vqj-7ea\">/tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</span>，命令如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-vyp-6pt-r1k\"><code>chroot /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</code></pre></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-97h-dzk-g3s\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-xth-bm8-c5e\">在<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-8il-vsj-vn9\">chroot</span>环境，运行以下命令将SSH服务设置为开机时自启动。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-g72-jr4-evj\">多数Linux发行版使用<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-3vp-gi8-78r\">systemd</span>作为服务管理程序，请您根据不同版本的服务管理程序，自行修改命令内容。本文以<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-e3m-ox3-oul\">systemd</span>为例，示例命令如下所示：<div class=\"note notice note-notice\" data-tag=\"note\" id=\"note-v8s-yg2-5vk\"><div class=\"note-icon-wrapper\"><i class=\"icon-note notice\"></i></div><div class=\"note-content\"><strong>重要</strong> 不同Linux发行版的SSH服务名称可能不同，您需要根据实际的SSH服务名称自行修改命令。例如：在CentOS、Fedora CoreOS、Red Hat Enterprise Linux、SUSE Linux Enterprise Server等版本中SSH服务名称为<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-a25-t9b-nls\">sshd.service</code>；在Debian、Ubuntu等版本中SSH服务名称为<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-nla-z5b-218\">ssh.service</code>。</div></div><pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-083-x76-d9z\"><code>systemctl enable sshd.service</code></pre><p class=\"p\" data-tag=\"p\" id=\"p-66g-0go-xyu\">由于当前的<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-22y-bur-hnm\">chroot</span>环境仅为构造了问题实例原有系统盘中的文件系统与目录环境，实际所有的进程为修复系统中的进程，无法立即启动问题实例原有系统盘上的SSH服务。因此禁止使用<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-34a-0h1-mc8\">systemctl enable</span>命令的<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-t7l-2u0-1nw\">--now</span>参数立即启动SSH服务，同时也不支持使用<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-r1o-2h2-0on\">systemctl status</span>命令查看问题实例原有系统盘上的SSH服务的当前状态。</p></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-9ar-twm-qr7\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-han-qit-r3f\">修复完成后，退出修复环境，然后检查问题实例的当前状态。</span><ol type=\"a\" class=\"ol substeps\" data-tag=\"substeps\" id=\"substeps-b2i-2xp-gq7\"><li class=\"li substep\" data-tag=\"substep\" id=\"substep-ivk-0md-24m\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-8aq-jj0-319\">运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-666-q68-95w\">exit</span>命令，退出<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-9x5-1ak-ize\">chroot</span>环境。</span></li><li class=\"li substep\" data-tag=\"substep\" id=\"substep-w9h-o68-r1b\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-6b5-onx-h6v\">在ECS控制台的实例健康诊断页面，卸载临时挂载的修复盘并恢复问题实例至正常模式，然后重启实例。</span></li><li class=\"li substep\" data-tag=\"substep\" id=\"substep-jw7-9b0-w23\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-i5q-sua-l3s\">远程连接已修复的ECS实例，确认成功登录。</span></li></ol></li></ol></section></div></article></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/modify-the-file-in-linux-instance-methods-for-unix-format", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/solution-of-instances-cannot-be-started/\">实例无法启动的解决方案</a></span>\n <span>Linux实例中修改文件为Unix格式的方法</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux实例中修改文件为Unix格式的方法</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-01 17:17:41</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main role=\"main\"><article role=\"article\" aria-labelledby=\"title_tsx_3li_621\"><div class=\"body taskbody\" data-tag=\"taskbody\" id=\"taskbody-426-rqo-lt6\"><p id=\"shortdesc-2xm-hz7-z3j\" class=\"shortdesc\" data-tag=\"shortdesc\">在Linux实例中，如果一些关键文件的格式不是Unix格式，可能导致该实例无法被远程连接。您可以通过实例健康诊断工具进行问题修复。</p><section class=\"section prereq p\" data-tag=\"prereq\" id=\"prereq-2j5-nvj-nxk\"><h2 id=\"d41e14\" class=\"sectiontitle tasklabel\">前提条件</h2><p class=\"p\" data-tag=\"p\" id=\"p-scq-ym8-x93\">Linux实例已通过实例健康诊断工具进行诊断，诊断结果中实例无法启动场景的系统关键文件格式检查未通过。</p></section><section class=\"section context\" data-tag=\"context\" id=\"context-2yw-h0f-yxp\"><h2 id=\"d41e17\" class=\"sectiontitle tasklabel\">背景信息</h2><p class=\"p\" data-tag=\"p\" id=\"p-7s1-hz8-hj9\">问题描述：Linux实例中因部分关键文件的格式不是Unix格式，导致的实例无法被远程连接。</p><p class=\"p\" data-tag=\"p\" id=\"p-awe-bvn-vla\">可能原因：出现问题的关键文件可能由Windows系统中编辑后上传至Linux实例，或因其它不当操作导致文件格式不是Unix。</p></section><section class=\"section\" data-tag=\"section\" id=\"section-c4t-g9r-13k\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-1y2-750-aru\">解决方案</h2><ol class=\"ol steps\" data-tag=\"steps\" id=\"steps-vi5-j6k-7h6\"><li class=\"li step\" data-tag=\"step\" id=\"step-ib4-pu3-lqr\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-bnq-zet-bi5\">远程连接问题实例。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-dqn-uxg-6zj\">当ECS实例处于正在挂载修复盘的模式下时，只能通过VNC远程连接。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password#concept-sdk-1jx-wdb\">通过密码认证登录Linux实例</a>。</div></li><li class=\"li step\" data-tag=\"step\" id=\"step-ey6-n67-kv6\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-zpg-nyd-i78\">查看问题实例原有系统盘的挂载信息。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-ho8-s4z-4v0\">在临时挂载的修复盘中，问题实例原有系统盘的文件系统会被挂载到某一临时目录下。您可以通过以下任一方式查看所在的临时目录信息：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-58p-d8h-jsf\"><li class=\"li\" data-tag=\"li\" id=\"li-96g-bmr-7pf\">在系统盘详情页的<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-mp0-zdg-oae\">挂载实例</span>进行查看，对应的临时目录格式示例为：<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-0de-hic-5qx\">/tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</code>，其中<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-82e-1wb-945\">bp19bspzms79kqse****</code>为实例原有系统盘的云盘序列号。</li><li class=\"li\" data-tag=\"li\" id=\"li-y51-ev9-00i\">在临时挂载的修复盘中，运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-qe0-1e0-zxr\">mount</span>命令查看。例如，问题实例原有系统盘的设备路径为<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-doa-0zh-8gj\">/dev/vda</span>，命令示例如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-13n-t26-v1g\"><code>mount | grep /dev/vda</code></pre><div class=\"p\" data-tag=\"p\" id=\"p-pce-hui-f1f\">返回结果如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-9rp-ptr-kvb\"><code>/dev/vda1 on /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse**** type ext4 (rw,relatime)</code></pre></div></li></ul></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-ngv-mpp-sjl\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-cap-bms-1wv\">运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-fbm-avz-1bi\">chroot</span>命令，将根目录切换为问题实例原有系统盘所在的临时路径，并进入<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-bmm-tgd-4te\">chroot</span>环境。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-u5y-azm-p4c\">您需要在问题实例原有系统盘所在的临时路径中进行文件修复。例如，临时路径为<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-rkg-vqj-7ea\">/tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</span>，命令如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-vyp-6pt-r1k\"><code>chroot /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</code></pre></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-q6m-f5o-k2o\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-vka-6et-h04\">在<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-8pb-r4t-5qq\">chroot</span>环境中，运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-1hr-gab-77y\">vim</span>命令，编辑指定文件。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-3a7-jq1-4ba\"><div class=\"p\" data-tag=\"p\" id=\"p-04z-puo-tp8\">编辑前，您需要注意以下事项：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-zwq-cp9-8nk\"><li class=\"li\" data-tag=\"li\" id=\"li-ozp-7ks-t9v\">编辑关键文件前，请先运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-ko2-7zp-ypb\">cp</span>命令对文件进行备份。<p class=\"p\" data-tag=\"p\" id=\"p-ljv-r3v-ctj\">例如，备份实例原有系统盘中的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-luc-4nj-3g7\">/etc/passwd</span>文件命令为<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-evh-zs1-5aj\">cp /etc/passwd /etc/passwd.bak</code>。</p></li><li class=\"li\" data-tag=\"li\" id=\"li-78a-7rx-s1r\">当前编辑的文件均为问题实例原有系统盘中的文件，如果您需要编辑该系统盘挂载点之外的文件，请先运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-fgf-k4h-atp\">exit</span>命令退出<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-80j-co0-5iv\">chroot</span>环境。</li><li class=\"li\" data-tag=\"li\" id=\"li-fmh-lra-0ex\">当前处于<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-brr-swz-p2f\">chroot</span>环境，因此命令中不需要加上<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-imk-son-vn7\">/tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</span>路径地址。<p class=\"p\" data-tag=\"p\" id=\"p-x5y-wj2-3s4\">例如，实例原有系统盘中的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-y6o-0k0-j0m\">/etc/passwd</span>文件，编辑命令为<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-adh-m08-vhy\">vim /etc/passwd</span>，不需要添加<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-7ia-p7e-9oc\">/tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</span>路径地址。</p></li></ul></div><pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-fzs-ia9-dd5\"><code>vim <var class=\"keyword varname\" data-tag=\"varname\" id=\"varname-iz8-je2-4cl\">[$File]</var></code></pre><div class=\"p\" data-tag=\"p\" id=\"p-5rj-ol9-e30\">其中<var class=\"keyword varname\" data-tag=\"varname\" id=\"varname-7p7-s77-d9n\">[$File]</var>变量为指定的非Unix格式的文件名。本文以<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-hat-aco-i1b\">/etc/passwd</span>文件为例，命令示例如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-750-eco-blc\"><code>vim /etc/passwd</code></pre></div></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-kpb-8ac-vgf\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-oiw-4bi-qg1\">调整文件格式。</span><ol type=\"a\" class=\"ol substeps\" data-tag=\"substeps\" id=\"substeps-l89-zpl-1cx\"><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-w1f-0vd-cb3\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-og6-ltz-3zz\">在文件内，按下<kbd class=\"ph userinput\" data-tag=\"userinput\" id=\"userinput-kbf-m6t-0sh\">Shift+:</kbd>组合键，并输入<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-wq4-kyc-h0m\">set ff=unix</code>后按下<kbd class=\"ph userinput\" data-tag=\"userinput\" id=\"userinput-mt1-9qf-35l\">Enter</kbd>键。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-8y4-6b3-ths\"><img class=\"image break\" data-tag=\"image\" id=\"image-f5x-old-uo3\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7047582161/p240969.png\" alt=\"unix\"></div></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-sek-9df-z02\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-mr7-sci-xxu\">按下<kbd class=\"ph userinput\" data-tag=\"userinput\" id=\"userinput-lzi-kb5-sdk\">Shift+:</kbd>组合键，并输入<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-ii2-fp9-r0a\">wq</code>后按下<kbd class=\"ph userinput\" data-tag=\"userinput\" id=\"userinput-370-926-2ja\">Enter</kbd>键，保存退出文件。</span></li></ol></li><li class=\"li step\" data-tag=\"step\" id=\"step-a50-ibb-ncr\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-l5x-i6x-smb\">修复完成后，退出修复环境，然后检查问题实例的当前状态。</span><ol type=\"a\" class=\"ol substeps\" data-tag=\"substeps\" id=\"substeps-6rc-zlr-nl9\"><li class=\"li substep\" data-tag=\"substep\" id=\"substep-o7m-85e-uqf\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-u4m-y87-4xo\">运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-vag-iir-dky\">exit</span>命令，退出<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-mr1-j7x-9g6\">chroot</span>环境。</span></li><li class=\"li substep\" data-tag=\"substep\" id=\"substep-yju-dpm-i5t\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-5na-ogp-w9j\">在ECS控制台的实例健康诊断页面，卸载临时挂载的修复盘并恢复问题实例至正常模式。</span></li><li class=\"li substep\" data-tag=\"substep\" id=\"substep-tzs-yqs-ir3\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-68s-2es-ork\">远程连接已修复的ECS实例，确认成功登录。</span></li></ol></li></ol></section></div></article></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/how-to-properly-configure-linux-instance-piece-of-equipment-in-the-or-etc-or-fstab-file", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/solution-of-instances-cannot-be-started/\">实例无法启动的解决方案</a></span>\n <span>如何正确配置Linux实例/etc/fstab文件中的块设备</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>如何正确配置Linux实例/etc/fstab文件中的块设备</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-30 14:41:58</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main role=\"main\"><article role=\"article\" aria-labelledby=\"title_8ak_gc9_989\"><div class=\"body taskbody\" data-tag=\"taskbody\" id=\"taskbody-98h-sw2-pqk\"><p id=\"shortdesc-4w6-48b-0gk\" class=\"shortdesc\" data-tag=\"shortdesc\">当您的Linux实例<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-s6u-12c-rle\">/etc/fstab</span>文件中未正确配置要自动挂载的文件系统信息或者存在已不可用的文件系统信息，重启系统后可能导致ECS实例的操作系统无法正常启动。您可以通过实例健康诊断工具进行问题修复。</p><section class=\"section prereq p\" data-tag=\"prereq\" id=\"prereq-u41-wdm-mfw\"><h2 id=\"d41e17\" class=\"sectiontitle tasklabel\">前提条件</h2><div class=\"p\" data-tag=\"p\" id=\"p-u5g-x8o-7hn\">Linux实例已通过实例健康诊断工具进行诊断，诊断结果中以下检查项未通过：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-ibv-2ds-3y8\"><li class=\"li\" data-tag=\"li\" id=\"li-wxf-sxr-rvo\">fstab文件中的设备检查</li><li class=\"li\" data-tag=\"li\" id=\"li-txr-uu8-gmm\">fstab文件中的设备挂载状态检查</li></ul></div></section><section class=\"section context\" data-tag=\"context\" id=\"context-pt5-6pz-izu\"><h2 id=\"d41e25\" class=\"sectiontitle tasklabel\">背景信息</h2><p class=\"p\" data-tag=\"p\" id=\"p-e0p-km8-506\">问题描述：Linux实例的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-u5f-yud-j32\">/etc/fstab</span>文件中，如果未正确配置要自动挂载的文件系统信息，或者存在多余的文件系统配置信息，但其所在的块设备已经不存在或者已从实例上卸载，则重启系统后可能导致系统无法正常启动。</p><div class=\"p\" data-tag=\"p\" id=\"p-gnp-hde-b1e\">可能原因：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-3ru-img-4mk\"><li class=\"li\" data-tag=\"li\" id=\"li-dbu-nbd-qym\">云盘已经挂载到实例上，但<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-d2h-q5l-h7z\">/etc/fstab</span>文件中配置了错误的文件系统信息，或者云盘上并未包含的文件系统。</li><li class=\"li\" data-tag=\"li\" id=\"li-auh-g7a-8ih\">云盘尚未挂载到实例上，但<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-91a-cv8-yhr\">/etc/fstab</span>文件中却配置了相应的文件系统信息。</li></ul></div></section><section class=\"section\" data-tag=\"section\" id=\"section-n82-zcq-ayx\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-qse-7lt-1m1\">解决方案</h2><ol class=\"ol steps\" data-tag=\"steps\" id=\"steps-vjq-se6-kq6\"><li class=\"li step\" data-tag=\"step\" id=\"step-xjl-vjw-7yi\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-bnq-zet-bi5\">远程连接问题实例。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-dqn-uxg-6zj\">当ECS实例处于正在挂载修复盘的模式下时，只能通过VNC远程连接。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password#concept-sdk-1jx-wdb\">通过密码认证登录Linux实例</a>。</div></li><li class=\"li step\" data-tag=\"step\" id=\"step-6gn-tdb-vft\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-zpg-nyd-i78\">查看问题实例原有系统盘的挂载信息。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-ho8-s4z-4v0\">在临时挂载的修复盘中，问题实例原有系统盘的文件系统会被挂载到某一临时目录下。您可以通过以下任一方式查看所在的临时目录信息：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-58p-d8h-jsf\"><li class=\"li\" data-tag=\"li\" id=\"li-96g-bmr-7pf\">通过ECS控制台的实例健康诊断结果获取，对应的信息格式示例如下所示：<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-0de-hic-5qx\">/tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</code>。</li><li class=\"li\" data-tag=\"li\" id=\"li-y51-ev9-00i\">在临时挂载的修复盘中，运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-qe0-1e0-zxr\">mount</span>命令查看。例如，问题实例原有系统盘的设备路径为<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-doa-0zh-8gj\">/dev/vda</span>，命令示例如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-13n-t26-v1g\"><code>mount | grep /dev/vda</code></pre><div class=\"p\" data-tag=\"p\" id=\"p-pce-hui-f1f\">返回结果如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-9rp-ptr-kvb\"><code>/dev/vda1 on /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse**** type ext4 (rw,relatime)</code></pre></div></li></ul></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-hbn-8o3-kek\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-lui-yrt-03c\">运行以下命令，将修复盘内的虚拟文件系统<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-n3q-zpw-mvd\">/dev</span>、<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-t7v-5pg-6na\">/proc</span>和<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-o2s-50h-1r0\">/sys</span>挂载到<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-tnz-cae-m5v\">chroot</span>环境中的根目录。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-9ka-lkx-v9a\">挂载虚拟文件系统的作用为确保后续操作中<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-p0a-e3x-qpx\">blkid</span>命令能够正常读取文件系统信息。<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-pk0-ap3-ucl\"><code>mount --bind /dev /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****/dev\nmount --bind /proc /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****/proc\nmount --bind /sys /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****/sys</code></pre></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-myo-jr2-0sg\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-cap-bms-1wv\">运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-fbm-avz-1bi\">chroot</span>命令，将根目录切换为问题实例原有系统盘所在的临时路径，并进入<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-bmm-tgd-4te\">chroot</span>环境。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-u5y-azm-p4c\">您需要在问题实例原有系统盘所在的临时路径中进行文件修复。例如，临时路径为<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-rkg-vqj-7ea\">/tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</span>，命令如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-vyp-6pt-r1k\"><code>chroot /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</code></pre></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-jom-ofm-o5d\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-5ud-wbl-beg\">在<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-eh0-o31-oox\">chroot</span>环境的根目录，确认虚拟文件<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-3ju-m4a-tuq\">/dev</span>、<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-7hl-ou8-nl1\">/proc</span>和<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-juc-2g8-92i\">/sys</span>的目录中已包含正常实例的数据。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-xl4-3bz-bau\">如果虚拟文件目录下内容为空，将导致部分必须的系统信息无法读取。因此需要运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-mz5-4to-3iu\">exit</span>命令，退出<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-5f9-y5w-ujk\">chroot</span>环境，重新执行步骤<a title=\"\" class=\"xref\" href=\"#step-hbn-8o3-kek\">3</a>和<a title=\"\" class=\"xref\" href=\"#step-myo-jr2-0sg\">4</a>。</div></li><li class=\"li step\" data-tag=\"step\" id=\"step-tm3-jwg-npw\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-xva-to3-rne\">运行以下命令，查看Linux实例中存在的块设备信息。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-ejc-jud-iy4\"><pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-2e2-rev-qbw\"><code>blkid</code></pre></div><div class=\"itemgroup stepresult\" data-tag=\"stepresult\" id=\"stepresult-2oj-lyg-xfu\">返回结果示例如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-8w3-v4h-3m6\"><code>/dev/sr0: UUID=\"2021-01-28-17-41-**-**\" LABEL=\"ecsgo_rescue_linux\" TYPE=\"iso9660\" PTTYPE=\"dos\" \n/dev/vda1: UUID=\"edf839fd-8e1a-4373-946a-12345678****\" TYPE=\"ext4\"\n/dev/vdb1: UUID=\"baed21c8-dbca-43f9-b4f0-60f6b2db****\" TYPE=\"ext4\"\n/dev/loop0: TYPE=\"squashfs\" \n/dev/loop1: TYPE=\"DM_snapshot_cow\" \n/dev/loop2: TYPE=\"squashfs\" \n/dev/loop3: LABEL=\"_ecsgo_rescue_li\" UUID=\"d3dc381f-d365-4f3f-9b6e-c8108642****\" TYPE=\"ext4\" \n/dev/loop4: TYPE=\"DM_snapshot_cow\" \n/dev/mapper/live-rw: LABEL=\"_ecsgo_rescue_li\" UUID=\"d3dc381f-d365-4f3f-9b6e-c8108642****\" TYPE=\"ext4\" \n/dev/mapper/live-base: LABEL=\"_ecsgo_rescue_li\" UUID=\"d3dc381f-d365-4f3f-9b6e-c8108642****\" TYPE=\"ext4\" \n/dev/mapper/live-osimg-min: LABEL=\"_ecsgo_rescue_li\" UUID=\"d3dc381f-d365-4f3f-9b6e-c8108642****\" TYPE=\"ext4\"</code></pre><div class=\"p\" data-tag=\"p\" id=\"p-29u-n2j-rjc\">请注意：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-7ry-wiv-w6i\"><li class=\"li\" data-tag=\"li\" id=\"li-ibu-0nl-cow\"><span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-cmm-4zz-sgd\">/dev/sr0</span>、<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-ft1-jr6-rbb\">/dev/loop0</span>至<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-cs4-r8g-muf\">/dev/loop4</span>、<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-90c-vkk-415\">/dev/mapper/live-rw</span>、<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-0wu-7x9-4a8\">/dev/mapper/live-base</span>、<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-l0o-7j8-z5o\">/dev/mapper/live-osimg-min</span>属于修复系统的块设备信息，请忽略。</li><li class=\"li\" data-tag=\"li\" id=\"li-ohr-tyq-y35\">您只需要关注Linux实例存在的块设备信息，例如<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-d12-1wn-wue\">/dev/vda1</span>以及<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-9sw-zi2-98b\">/dev/vdb1</code>。</li></ul></div></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-1eb-os3-nlu\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-fqu-ktb-x7s\">运行以下命令，查看<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-26s-rbv-2w5\">/etc/fstab</span>文件中已配置的块设备信息。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-0f9-n8g-nhj\"><pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-qui-0nc-wyr\"><code>cat /etc/fstab</code></pre></div><div class=\"itemgroup stepresult\" data-tag=\"stepresult\" id=\"stepresult-dsz-fdx-ao3\">返回结果示例如下所示：<img class=\"image break\" data-tag=\"image\" id=\"image-9fu-3us-x61\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1992492161/p240894.png\" alt=\"fstab\"></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-5be-mol-png\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-ear-4s1-flb\">检查<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-c39-pvt-ar0\">blkid</span>命令结果与<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-l2f-tj4-nvk\">/etc/fstab</span>文件中的内容是否匹配，然后在<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-mzb-mwt-mez\">/etc/fstab</span>文件中修复不匹配的配置项。</span><ol type=\"a\" class=\"ol substeps\" data-tag=\"substeps\" id=\"substeps-xv7-sa6-454\"><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-gaw-y88-9dk\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-9b5-a3w-6zm\">确认不匹配的内容。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-f23-69i-7ln\">包含但不限于以下需要确认的内容：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-7f5-pbf-6jv\"><li class=\"li\" data-tag=\"li\" id=\"li-fq8-8z3-6ll\">需要自动挂载的文件系统都已配置正确，并且配置的文件系统在实例上确实存在。<p class=\"p\" data-tag=\"p\" id=\"p-o4g-zsv-x4p\">如果配置的文件系统在实例上不存在，并且未在<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-zhu-nin-sdy\">/etc/fstab</span>文件对应行设置<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-ob6-8uu-l3q\">nofail</code>参数，将导致系统启动时因找不到所需要挂载的文件系统而失败。</p></li><li class=\"li\" data-tag=\"li\" id=\"li-7h5-01v-kpo\">如果使用UUID指定挂载的文件系统，确保UUID信息完全一致。</li><li class=\"li\" data-tag=\"li\" id=\"li-q9k-te5-chp\">确保配置的挂载点均已创建完成并且不存在冲突。</li><li class=\"li\" data-tag=\"li\" id=\"li-a5b-hrf-c2s\">确保<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-pqt-jxv-wad\">/etc/fstab</span>文件中每一行配置项的参数都符合文件系统的格式要求。</li></ul></div><div class=\"itemgroup stepresult\" data-tag=\"stepresult\" id=\"stepresult-530-57l-798\">如本文提供的<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-ikz-mg8-6et\">blkid</span>命令结果与<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-46e-48w-qf3\">/etc/fstab</span>文件的示例值对比所示，不匹配的情况如下：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-8v4-0a9-a60\"><li class=\"li\" data-tag=\"li\" id=\"li-3kf-lny-k1g\"><code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-nci-w68-ecf\">/dev/vda1</code>的UUID不匹配。</li><li class=\"li\" data-tag=\"li\" id=\"li-tdh-z6l-scd\"><code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-1ez-i7b-tic\">/dev/vdb1</code>挂载到实例后，在<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-d16-qeo-jc8\">/etc/fstab</span>文件中未配置对应的文件系统信息。</li></ul></div></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-dnr-e6m-frw\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-znj-juq-bww\">运行以下命令，备份<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-vb4-coo-oak\">/etc/fstab</span>文件。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-ta0-z7l-kji\"><pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-3ia-pjg-wyc\"><code>cp /etc/fstab /etc/fstab.bak</code></pre></div></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-iyg-uzd-w7j\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-26d-o39-zjv\">修复不匹配的配置项。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-ytt-cuo-105\"><ol class=\"ol\" data-tag=\"ol\" type=\"i\" id=\"ol-auk-79w-gpn\"><li class=\"li\" data-tag=\"li\" id=\"li-7lf-z6l-it0\">运行以下命令进入编辑模式。<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-cbh-li4-fn6\"><code>vi /etc/fstab</code></pre></li><li class=\"li\" data-tag=\"li\" id=\"li-f6b-b5b-nsy\">将不匹配的示例值替换为正确值。<div class=\"p\" data-tag=\"p\" id=\"p-r4o-qfd-9wg\">本文示例中，进行如下修改：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-hi9-fa0-r9o\"><li class=\"li\" data-tag=\"li\" id=\"li-1tw-ejv-qoc\">将<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-22q-iqj-deh\">UUID=edf839fd-8e1a-4373-946a-c32c9b45****</code>替换为<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-w66-6me-b9a\">blkid</span>命令结果中的<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-z9f-svx-d51\">UUID=edf839fd-8e1a-4373-946a-12345678****</code>。</li><li class=\"li\" data-tag=\"li\" id=\"li-tnx-qlu-u19\">新增一行配置项，写入<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-jcs-ugs-zqy\">/dev/vdb1</code>文件系统信息。<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-8jm-243-khr\"><code>UUID=baed21c8-dbca-43f9-b4f0-60f6b2db**** /mnt ext4 defaults 0 0</code></pre></li></ul></div></li><li class=\"li\" data-tag=\"li\" id=\"li-tf0-tqp-gpe\">按<kbd class=\"ph userinput\" data-tag=\"userinput\" id=\"userinput-2f7-7ml-qaa\">Esc</kbd>键，输入<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-w5j-ve5-vlr\">:wq</code>并回车，保存退出文件。</li></ol></div><div class=\"itemgroup stepresult\" data-tag=\"stepresult\" id=\"stepresult-k94-fyf-lse\">修复完成后，<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-nzb-gz1-jgy\">/etc/fstab</span>文件内容如下所示，与<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-dw4-ytd-n2n\">blkid</span>命令结果保持一致。<img class=\"image break\" data-tag=\"image\" id=\"image-ejf-2x2-wo8\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7771582161/p240897.png\" alt=\"fastab-result\"></div></li></ol></li><li class=\"li step\" data-tag=\"step\" id=\"step-25n-0ag-4gu\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-fkx-wdl-q2f\">修复完成后，退出修复环境，然后检查问题实例的当前状态。</span><ol type=\"a\" class=\"ol substeps\" data-tag=\"substeps\" id=\"substeps-hc6-o2e-e9u\"><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-9ep-k4x-mj9\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-ezg-fxv-y9h\">运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-agm-zas-8g6\">exit</span>命令，退出<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-k4e-1lm-h0c\">chroot</span>环境。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-sbn-7bh-mam\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-qh4-il4-6b7\">运行以下命令，解除虚拟文件系统的挂载。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-84i-3qa-nb6\"><pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-4mx-7mf-c33\"><code>umount /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****/dev\numount /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****/proc\numount /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****/sys</code></pre></div></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-ua8-1sb-k5k\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-2wy-qsp-pda\">在ECS控制台的实例健康诊断页面，卸载修复盘并恢复问题实例至正常模式。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-t9l-br1-ak3\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-1q2-1po-6lo\">远程连接已修复的ECS实例，确认成功登录。</span></li></ol></li></ol></section><section class=\"section\" data-tag=\"section\" id=\"section-bej-9uk-hl5\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-ewe-ugq-q1j\">其他解决方案</h2><div class=\"p\" data-tag=\"p\" id=\"p-b1x-274-5h6\">如果以上问题在您的ECS实例运行时已被发现，可以直接远程连接对应的ECS实例解决问题。具体操作，请参见：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-c19-ffg-y6t\"><li class=\"li\" data-tag=\"li\" id=\"li-98m-8do-wwb\"><a class=\"xref\" target=\"_blank\" href=\"https://help.aliyun.com/knowledge_detail/174563.html\">如何移除Linux实例“/etc/fstab”文件中不存在的块设备</a></li><li class=\"li\" data-tag=\"li\" id=\"li-mwn-mul-xoq\"><a class=\"xref\" target=\"_blank\" href=\"https://help.aliyun.com/knowledge_detail/174961.html\">Linux实例中存在未正确挂载的磁盘</a></li></ul></div></section></div></article></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/unable-to-use-ssh-remote-connection-ubuntu-instances-of-ecs", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/solution-of-instances-cannot-be-started/\">实例无法启动的解决方案</a></span>\n <span>无法使用SSH远程连接Ubuntu系统的ECS实例</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>无法使用SSH远程连接Ubuntu系统的ECS实例</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-10 17:02:45</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main role=\"main\"><article role=\"article\" aria-labelledby=\"title_gil_ymc_ji5\"><div class=\"body taskbody\" data-tag=\"taskbody\" id=\"taskbody-3e2-2oz-5du\"><p id=\"shortdesc-bka-qjx-hhn\" class=\"shortdesc\" data-tag=\"shortdesc\">如果您无法使用root用户通过SSH远程连接Ubuntu系统的ECS实例，可以通过实例健康诊断工具进行问题修复。</p><section class=\"section prereq p\" data-tag=\"prereq\" id=\"prereq-ckx-ihi-st4\"><h2 id=\"d41e14\" class=\"sectiontitle tasklabel\">前提条件</h2><p class=\"p\" data-tag=\"p\" id=\"p-rp7-42g-ybr\">Linux实例已通过实例健康诊断工具进行诊断，诊断结果中实例无法启动场景的SSH是否允许root用户登录检查未通过。</p></section><section class=\"section context\" data-tag=\"context\" id=\"context-sz1-4d2-5w7\"><h2 id=\"d41e17\" class=\"sectiontitle tasklabel\">背景信息</h2><p class=\"p\" data-tag=\"p\" id=\"p-ezu-6xn-zd0\">问题描述：无法使用SSH远程连接Ubuntu系统的ECS实例，但是可以使用VNC登录，查看日志提示<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-kzm-6tq-cn2\">failed password</code>。</p><div class=\"p\" data-tag=\"p\" id=\"p-isp-49p-ii4\">问题原因：Ubuntu 18.04系统默认SSH的配置文件禁止root用户登录。<div class=\"note note note-note\" data-tag=\"note\" id=\"note-h38-ass-dru\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note\"></i></div><div class=\"note-content\"><strong>说明</strong> Linux社区提供的Ubuntu 18.04系统默认禁用了root用户登录，但阿里云对应的公共镜像默认支持root用户登录。</div></div></div></section><section class=\"section\" data-tag=\"section\" id=\"section-pu8-g38-xwn\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-zah-4p2-hz1\">操作步骤</h2><ol class=\"ol steps\" data-tag=\"steps\" id=\"steps-n0a-xke-37o\"><li class=\"li step\" data-tag=\"step\" id=\"step-2yb-xry-lip\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-2yz-ng4-hcq\">远程连接问题实例。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-6j1-sc9-l01\">当ECS实例处于正在挂载修复盘的模式下时，只能通过VNC远程连接。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password#concept-sdk-1jx-wdb\">使用VNC登录实例</a>。<div class=\"note note note-note\" data-tag=\"note\" id=\"note-o89-bij-y3o\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note\"></i></div><div class=\"note-content\"><strong>说明</strong> 当您通过实例健康诊断工具诊断出问题后，诊断系统已自动在问题实例中挂载了修复盘，建议您根据本文提供的操作步骤，通过临时挂载的修复盘进行问题修复。您也可以通过ECS控制台卸载修复盘并恢复问题实例至正常模式，然后直接通过VNC登录实例进行修复。具体操作，请参见<a class=\"xref\" target=\"_blank\" href=\"https://help.aliyun.com/knowledge_detail/151667.html\">无法使用SSH远程连接Ubuntu系统的ECS实例</a>。</div></div></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-83s-y6u-39q\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-zpg-nyd-i78\">查看问题实例原有系统盘的挂载信息。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-ho8-s4z-4v0\">在临时挂载的修复盘中，问题实例原有系统盘的文件系统会被挂载到某一临时目录下。您可以通过以下任一方式查看所在的临时目录信息：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-58p-d8h-jsf\"><li class=\"li\" data-tag=\"li\" id=\"li-96g-bmr-7pf\">通过ECS控制台的实例健康诊断结果获取，对应的信息格式示例如下所示：<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-0de-hic-5qx\">/tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</code>。</li><li class=\"li\" data-tag=\"li\" id=\"li-y51-ev9-00i\">在临时挂载的修复盘中，运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-qe0-1e0-zxr\">mount</span>命令查看。例如，问题实例原有系统盘的设备路径为<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-doa-0zh-8gj\">/dev/vda</span>，命令示例如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-13n-t26-v1g\"><code>mount | grep /dev/vda</code></pre><div class=\"p\" data-tag=\"p\" id=\"p-pce-hui-f1f\">返回结果如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-9rp-ptr-kvb\"><code>/dev/vda1 on /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse**** type ext4 (rw,relatime)</code></pre></div></li></ul></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-mvj-q1b-imz\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-cap-bms-1wv\">运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-fbm-avz-1bi\">chroot</span>命令，将根目录切换为问题实例原有系统盘所在的临时路径，并进入<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-bmm-tgd-4te\">chroot</span>环境。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-u5y-azm-p4c\">您需要在问题实例原有系统盘所在的临时路径中进行文件修复。例如，临时路径为<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-rkg-vqj-7ea\">/tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</span>，命令如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-vyp-6pt-r1k\"><code>chroot /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</code></pre></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-o09-yvb-ao0\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-hz2-ctv-diw\">在<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-krg-hs3-d56\">chroot</span>环境中，运行以下命令备份<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-ki2-6gl-2gl\">/etc/ssh/sshd_config</span>文件。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-51b-p9r-m9n\"><pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-czv-raj-leg\"><code>cp /etc/ssh/sshd_config /etc/ssh/sshd_config.bak</code></pre></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-txz-g3i-q0o\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-wcq-5k8-5c1\">编辑<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-bog-1xo-87r\">/etc/ssh/sshd_config</span>文件。</span><ol type=\"a\" class=\"ol substeps\" data-tag=\"substeps\" id=\"substeps-g80-vwv-2ru\"><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-p6j-uqa-z22\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-uny-7hi-f9j\">运行以下命令，进入编辑模式。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-v4p-oi4-e6s\"><pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-zrq-kdw-7rx\"><code>vi /etc/ssh/sshd_config</code></pre></div></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-ls2-k83-3xe\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-3m8-abi-xv3\">将<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-bvc-bl0-b0y\">PermitRootLogin</code>配置项的值修改为<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-ihw-wpr-jtt\">yes</code>。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-i0v-42i-vuh\">建议您根据业务实际情况，检查以下配置项：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-fe2-fbb-tao\"><li class=\"li\" data-tag=\"li\" id=\"li-wwj-1u5-4o7\"><code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-pm9-2zr-cuv\">AllowUsers</code>、<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-8d1-o64-3dm\">AllowGroups</code>、<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-ldl-6s8-u6j\">DenyUsers</code>、<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-eja-ty4-e4w\">DenyGroups</code>等用户信息配置项是否正确，确保用于登录的用户未被禁止。</li><li class=\"li\" data-tag=\"li\" id=\"li-dym-qa4-7ru\"><code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-096-1wc-435\">PasswordAuthentication</code>配置项的值是否符合实例的登录方式。<p class=\"p\" data-tag=\"p\" id=\"p-j3s-kzd-w5g\">例如，使用密码登录实例时，<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-b88-d8z-k30\">PasswordAuthentication</code>配置项应为<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-nsd-llf-t1r\">yes</code>；使用密钥对登录实例时，该配置项应为<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-4np-a5b-69n\">no</code>。</p></li></ul></div></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-ys9-5po-f3u\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-9i9-ope-gq2\">修改完毕后，按下<kbd class=\"ph userinput\" data-tag=\"userinput\" id=\"userinput-gyb-jgc-rey\">Esc</kbd>键，然后输入<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-rup-gkm-z6a\">:wq</code>后回车，保存并退出文件。</span></li></ol></li><li class=\"li step\" data-tag=\"step\" id=\"step-2xa-j4z-hxt\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-l5x-i6x-smb\">修复完成后，退出修复环境，然后检查问题实例的当前状态。</span><ol type=\"a\" class=\"ol substeps\" data-tag=\"substeps\" id=\"substeps-6rc-zlr-nl9\"><li class=\"li substep\" data-tag=\"substep\" id=\"substep-o7m-85e-uqf\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-u4m-y87-4xo\">运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-vag-iir-dky\">exit</span>命令，退出<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-mr1-j7x-9g6\">chroot</span>环境。</span></li><li class=\"li substep\" data-tag=\"substep\" id=\"substep-yju-dpm-i5t\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-5na-ogp-w9j\">在ECS控制台的实例健康诊断页面，卸载临时挂载的修复盘并恢复问题实例至正常模式。</span></li><li class=\"li substep\" data-tag=\"substep\" id=\"substep-tzs-yqs-ir3\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-68s-2es-ork\">远程连接已修复的ECS实例，确认成功登录。</span></li></ol></li></ol></section></div></article></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/ssh-access-defect-in-linux-can-not-connect-the-remote-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/solution-of-instances-cannot-be-started/\">实例无法启动的解决方案</a></span>\n <span>SSH的访问权限异常导致无法远程连接Linux实例</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>SSH的访问权限异常导致无法远程连接Linux实例</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-12 10:34:37</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main role=\"main\"><article role=\"article\" aria-labelledby=\"title_cx5_9xh_7z8\"><div class=\"body taskbody\" data-tag=\"taskbody\" id=\"taskbody-9hd-bqe-wta\"><p id=\"shortdesc-kq0-pwz-u1e\" class=\"shortdesc\" data-tag=\"shortdesc\">当Linux实例中关于SSH的访问权限配置异常时，将导致无法远程登录。您可以通过实例健康诊断工具进行问题修复。</p><section class=\"section prereq p\" data-tag=\"prereq\" id=\"prereq-pz1-ewh-vfj\"><h2 id=\"d41e14\" class=\"sectiontitle tasklabel\">前提条件</h2><div class=\"p\" data-tag=\"p\" id=\"p-lrw-ien-tw5\">Linux实例已通过实例健康诊断工具进行诊断，诊断结果中以下检查未通过：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-fxe-3yh-ggz\"><li class=\"li\" data-tag=\"li\" id=\"li-ea1-sj5-taa\">实例无法启动场景下的关键系统文件权限检查。</li><li class=\"li\" data-tag=\"li\" id=\"li-ljo-5mi-nm0\">实例无法启动场景下的SSH访问权限检查。</li></ul></div></section><section class=\"section context\" data-tag=\"context\" id=\"context-o1h-9nn-x5l\"><h2 id=\"d41e22\" class=\"sectiontitle tasklabel\">背景信息</h2><p class=\"p\" data-tag=\"p\" id=\"p-evm-ew5-zkc\">问题描述：Linux实例中，用户密码和SSH的相关文件和目录的访问权限配置异常，导致无法登录Linux实例或者无法从SSH远程连接Linux实例。</p><p class=\"p\" data-tag=\"p\" id=\"p-ezg-6aj-3pg\">问题原因：Linux实例中关于用户密码和SSH的相关文件和目录的访问权限配置不足。</p><p class=\"p\" data-tag=\"p\" id=\"p-cx6-yds-7wt\">本文主要介绍通过实例健康诊断工具提供的临时修复盘修复问题实例。您也可以在正常实例上挂载异常实例的系统盘进行修复。具体操作，请参见<a class=\"xref\" target=\"_blank\" href=\"https://help.aliyun.com/knowledge_detail/175512.html\">SSH的访问权限异常导致无法远程连接Linux实例</a>。</p></section><section class=\"section\" data-tag=\"section\" id=\"section-pds-p42-duh\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-v14-pa1-obs\">解决方案</h2><ol class=\"ol steps\" data-tag=\"steps\" id=\"steps-55g-on1-p62\"><li class=\"li step\" data-tag=\"step\" id=\"step-86k-eb3-src\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-bnq-zet-bi5\">远程连接问题实例。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-dqn-uxg-6zj\">当ECS实例处于正在挂载修复盘的模式下时，只能通过VNC远程连接。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password#concept-sdk-1jx-wdb\">通过密码认证登录Linux实例</a>。</div></li><li class=\"li step\" data-tag=\"step\" id=\"step-u8b-ucv-6hw\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-zpg-nyd-i78\">查看问题实例原有系统盘的挂载信息。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-ho8-s4z-4v0\">在临时挂载的修复盘中，问题实例原有系统盘的文件系统会被挂载到某一临时目录下。您可以通过以下任一方式查看所在的临时目录信息：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-58p-d8h-jsf\"><li class=\"li\" data-tag=\"li\" id=\"li-96g-bmr-7pf\">在系统盘详情页的<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-mp0-zdg-oae\">挂载实例</span>进行查看，对应的临时目录格式示例为：<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-0de-hic-5qx\">/tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</code>，其中<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-82e-1wb-945\">bp19bspzms79kqse****</code>为实例原有系统盘的云盘序列号。</li><li class=\"li\" data-tag=\"li\" id=\"li-y51-ev9-00i\">在临时挂载的修复盘中，运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-qe0-1e0-zxr\">mount</span>命令查看。例如，问题实例原有系统盘的设备路径为<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-doa-0zh-8gj\">/dev/vda</span>，命令示例如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-13n-t26-v1g\"><code>mount | grep /dev/vda</code></pre><div class=\"p\" data-tag=\"p\" id=\"p-pce-hui-f1f\">返回结果如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-9rp-ptr-kvb\"><code>/dev/vda1 on /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse**** type ext4 (rw,relatime)</code></pre></div></li></ul></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-zjj-s73-x1z\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-cap-bms-1wv\">运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-fbm-avz-1bi\">chroot</span>命令，将根目录切换为问题实例原有系统盘所在的临时路径，并进入<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-bmm-tgd-4te\">chroot</span>环境。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-u5y-azm-p4c\">您需要在问题实例原有系统盘所在的临时路径中进行文件修复。例如，临时路径为<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-rkg-vqj-7ea\">/tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</span>，命令如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-vyp-6pt-r1k\"><code>chroot /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</code></pre></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-0xl-wn5-x2k\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-hu8-pmq-rhp\">在<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-u45-ed3-b8p\">chroot</span>环境，运行以下命令，重置<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-b3m-d4w-in1\">/var/empty/sshd</span>目录的权限。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-fu1-0a2-sdv\"><div class=\"note warning note-warning\" data-tag=\"note\" id=\"note-uhq-9ij-x7q\"><div class=\"note-icon-wrapper\"><i class=\"icon-note warning\"></i></div><div class=\"note-content\"><strong>警告</strong> <ul class=\"ul\" data-tag=\"ul\" id=\"ul-jgg-59w-0m8\"><li class=\"li\" data-tag=\"li\" id=\"li-qkb-19c-sli\">请严格参照其他相同Linux发行版且可以正常远程登录的实例中的目录权限进行设置，避免因权限过高导致SSH服务启动失败。SSH相关文件和目录的权限通常都涉及远程连接时账户、密码等关键信息的安全性，SSH进程对于这些权限具有明确的约束。如果某个文件和目录的权限超过了SSH约束条件，SSH服务会认为其内容不可信任，可能导致SSH服务启动失败或远程连接异常问题。</li><li class=\"li\" data-tag=\"li\" id=\"li-14d-025-shc\">设置777权限意味着系统上的任何用户都拥有对该文件或目录的可读、可写和可执行的权限，并且可能会带来巨大的安全风险。例如，如果你将<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-urv-xb0-wqf\">/var/empty/sshd</span>目录权限更改为777，则系统上的任何用户都可以创建、删除或修改该目录中的文件。除非有明确参考，否则禁止设置777权限。</li></ul></div></div><pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-93p-0ct-0ht\"><code>chmod 711 /var/empty/sshd</code></pre></div><div class=\"itemgroup stepresult\" data-tag=\"stepresult\" id=\"stepresult-adn-qn4-r79\"><p class=\"p\" data-tag=\"p\" id=\"p-g5t-2sh-k1a\">除了检查<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-6tf-fft-udn\">/var/empty/sshd</span>目录权限，也可以参考本方案检查<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-bn2-rew-66m\">/etc/passwd</span>、<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-3iv-1ok-r2y\">/etc/group</span>、<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-cmz-8jq-e2e\">/etc/shadow</span>、<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-919-elj-x0j\">/etc/gshadow</span>文件和<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-7rw-5g3-lad\">/etc/securetty</span>目录的权限，关于各目录正确的权限，您可以参考其他可以正常远程登录的实例中目录权限。</p></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-xrx-6kx-d62\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-l5x-i6x-smb\">修复完成后，退出修复环境，然后检查问题实例的当前状态。</span><ol type=\"a\" class=\"ol substeps\" data-tag=\"substeps\" id=\"substeps-6rc-zlr-nl9\"><li class=\"li substep\" data-tag=\"substep\" id=\"substep-o7m-85e-uqf\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-u4m-y87-4xo\">运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-vag-iir-dky\">exit</span>命令，退出<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-mr1-j7x-9g6\">chroot</span>环境。</span></li><li class=\"li substep\" data-tag=\"substep\" id=\"substep-yju-dpm-i5t\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-5na-ogp-w9j\">在ECS控制台的实例健康诊断页面，卸载临时挂载的修复盘并恢复问题实例至正常模式。</span></li><li class=\"li substep\" data-tag=\"substep\" id=\"substep-tzs-yqs-ir3\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-68s-2es-ork\">远程连接已修复的ECS实例，确认成功登录。</span></li></ol></li></ol></section></div></article></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/examples-of-start-or-stop-abnormal-common-problems", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/solution-of-instances-cannot-be-started/\">实例无法启动的解决方案</a></span>\n <span>实例启动/停止异常常见问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>实例启动/停止异常常见问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-10 17:28:59</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2247341\"><p data-tag=\"shortdesc\" id=\"4fcbf340282s4\" class=\"shortdesc\">当ECS实例一直处于运行中或关机中，无法使用SSH或Workbench连接。此时可能是因为ECS的操作系统处于启动或关机中，比如持续了5分钟以上。您可以通过本文，排查实例的操作系统是正常运行还是已经无法正常启动或关机。</p><div data-tag=\"taskbody\" class=\"taskbody\"><p id=\"f2658400506dp\"></p><section id=\"ea554e8050sgc\" class=\"section\"><h2 id=\"ec11566050oed\"><b>实例一直处于启动中</b></h2><h3 id=\"4546f4e051dgp\"><b>问题描述</b></h3><p id=\"7e4764f051upu\">ECS实例处于运行中，但是无法使用SSH或Workbench连接。此时，ECS实例可能处于正常启动或异常启动过程中。</p><ul id=\"22c51312513eg\"><li id=\"22c5131051s07\"><p id=\"1dcf640051tbi\">正常启动：ECS可能因操作系统本身启动任务比较多，或者系统配置不高导致操作系统启动反应慢，所以启动时间比较长。</p></li><li id=\"349e78b1519od\"><p id=\"349e78b051rmn\">异常启动：ECS启动有异常，比如Windows启动时，进入后修复模式或安全模式，需要手动修复；或者Linux有多个内核版本，启动时需要手动选择内核版本，才能继续启动。</p></li></ul><h3 id=\"74c9208051vrp\"><b>解决方案</b></h3><ol id=\"50e787a2513mw\"><li id=\"50e787a0511gf\"><p id=\"edc0453051hcq\">通过查看实例的屏幕截图，查看当前实例系统启动进度。</p><p id=\"008395a051x7a\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/view-system-logs-and-screenshots\">查看实例的系统日志和屏幕截图</a>。</p></li><li id=\"f13a50c151wen\"><p id=\"f13a50c051q2u\">如果屏幕截图无法判断，请通过VNC连接实例，查看系统启动进度。</p><p id=\"44f567905155x\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"43761a91514xx\"><p id=\"43761a90515vj\">根据实例启动状态，选择处理方式。</p><ul id=\"84df076151cer\"><li id=\"83a7bfe1510w9\"><p id=\"83a7bfe051fgo\">正常启动：建议您继续等待操作系统启动完成。</p><p id=\"c51e051051wum\">如果因系统配置不高导致操作系统启动反应慢，建议您升级实例规格。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/upgrade-the-instance-types-of-subscription-instances\">包年包月实例升配规格</a>或<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-the-instance-type-of-a-pay-as-you-go-instance\">按量付费实例变配规格</a>。</p></li><li id=\"87c7a861519ls\"><p id=\"87c7a86051x1d\">异常启动：如果发现异常，通过VNC连接实例，手动干预和解决实例启动问题。更多实例启动异常及解决方案，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/abnormal-instance-startup-common-errors-with-the-corresponding-solutions\">实例启动异常常见错误与对应解决方案</a>。</p></li></ul></li></ol></section><p id=\"037f5fa0509dh\"></p><section id=\"03269141506ey\" class=\"section\"><h2 id=\"0326914250du1\"><b>实例一直处于关机中</b></h2><h3 id=\"a6d56781510z0\"><b>问题描述</b></h3><p id=\"ba59be01518y1\">ECS实例长时间处于<b data-tag=\"uicontrol\" id=\"a71b058b1efva\" class=\"uicontrol\">关机中</b>状态，无法使用SSH或Workbench连接。此时，ECS实例可能处于正常关机或异常关机过程中。</p><ul id=\"ba59be0251067\"><li id=\"ba59be0351nzk\"><p id=\"ba59be0451j2e\">正常关机：ECS正常关机中，但因为操作系统在做系统补丁修复，或者系统配置不高导致操作系统启动反应慢，所以关机时间比较长。</p></li><li id=\"ba59be0551wct\"><p id=\"ba59be0651wwa\">异常关机：ECS关机有异常，比如关机时系统报错，并没有真正进入关机流程。</p></li></ul><h3 id=\"a99c4fb05194z\"><b>解决方案</b></h3><ol id=\"da7cb65051buq\"><li id=\"da7cb65151ob1\"><p id=\"da7cb65251vn0\">通过查看实例的屏幕截图，查看当前实例系统关机的进度。</p><p id=\"da7cb65351obj\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/view-system-logs-and-screenshots\">查看实例的系统日志和屏幕截图</a>。</p></li><li id=\"da7cb654513xe\"><p id=\"da7cb65551tdl\">如果屏幕截图无法判断，请通过VNC连接实例，查看系统关机进度。</p><p id=\"da7cb65651dea\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"da7cb65751a7k\"><p id=\"da7cb6585100e\">根据实例关机状态，选择处理方式。</p><ul id=\"8add4cd1517bu\"><li id=\"89a62c6151vbi\"><p id=\"89a62c605111h\">正常关机：建议您继续等待操作系统关机完成。</p></li><li id=\"8d5e2b5151l2l\"><p id=\"8d5e2b5051duu\">异常关机：如果发现异常，请通过VNC连接实例，手动干预和解决实例关机问题。</p></li></ul><p id=\"8f0831d0513xl\">您也可以根据需要，通过强制关机来停止实例运行，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/stop-an-instance\">停止实例</a>。</p><div type=\"important\" id=\"9784e4c051fok\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"991bd87051ki6\"><b>强制停止</b>等同于断电处理，可能丢失实例操作系统中未写入磁盘的数据。</p></div></div></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/linux-instance-of-key-users-of-the-system-does-not-exist", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/solution-of-instances-cannot-be-started/\">实例无法启动的解决方案</a></span>\n <span>Linux实例中关键的系统用户不存在</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux实例中关键的系统用户不存在</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-10 16:57:05</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main role=\"main\"><article role=\"article\" aria-labelledby=\"title_wa8_f9s_qza\"><div class=\"body taskbody\" data-tag=\"taskbody\" id=\"taskbody-22o-j2q-837\"><p id=\"shortdesc-950-wnl-2hz\" class=\"shortdesc\" data-tag=\"shortdesc\">当Linux实例中关键的系统用户不存在时，可能导致无法远程登录。您可以通过实例健康诊断工具进行问题修复。</p><section class=\"section prereq p\" data-tag=\"prereq\" id=\"prereq-4ba-rag-ki0\"><h2 id=\"d41e14\" class=\"sectiontitle tasklabel\">前提条件</h2><p class=\"p\" data-tag=\"p\" id=\"p-q3d-pt8-f8p\">Linux实例已通过实例健康诊断工具进行诊断，诊断结果中实例无法启动场景的根账号检查未通过。</p></section><section class=\"section context\" data-tag=\"context\" id=\"context-rly-duf-00t\"><h2 id=\"d41e17\" class=\"sectiontitle tasklabel\">背景信息</h2><p class=\"p\" data-tag=\"p\" id=\"p-gns-0og-8br\">问题描述：在Linux操作系统中，<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-1ub-tc7-mv3\">/etc/passwd</span>文件存储了系统所有用户的基本信息，<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-xjb-1b7-jfb\">/etc/shadow</span>文件存储了系统用户的密码信息。如果文件中关键的系统用户信息（例如root用户及密码）丢失，将导致无法正常登录该实例。</p><p class=\"p\" data-tag=\"p\" id=\"p-w7f-ghf-qy1\">解决方案：您需要恢复<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-6hh-jqo-b76\">/etc/passwd</span>和<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-6pt-la3-9s1\">/etc/shadow</span>配置文件的信息。此外，<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-p8w-zxi-w1l\">/etc/group</span>文件中存放了系统用户组的基本信息以及用户与用户组之间的关系信息，也需要一同修复。</p></section><section class=\"section\" data-tag=\"section\" id=\"section-vag-16o-wei\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-ng7-nsy-6kp\">操作步骤</h2><ol class=\"ol steps\" data-tag=\"steps\" id=\"steps-mgd-i14-zr0\"><li class=\"li step\" data-tag=\"step\" id=\"step-ngi-6hm-d3x\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-imj-oe6-yw6\">准备正确的系统用户信息配置文件。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-9u6-4n0-jf5\"><p class=\"p\" data-tag=\"p\" id=\"p-va9-mf7-d08\">由于不同的Linux发行版中关键的系统用户有所不同，且您在使用过程中可能创建了其它系统用户，因此修复系统关键用户信息丢失的问题需要您根据不同的Linux发行版而定。</p><p class=\"p\" data-tag=\"p\" id=\"p-57g-qyb-cu2\">建议您通过一台正常运行的ECS实例获取正确的系统用户配置文件信息，作为修复问题实例的参考文件。正常运行的ECS实例需要和问题实例使用同一Linux发行版本，并且安装了相同的软件包。所需正确的系统用户配置文件信息的路径如下所示：</p><ul class=\"ul\" data-tag=\"ul\" id=\"ul-xj8-tlp-m9a\"><li class=\"li\" data-tag=\"li\" id=\"li-9dc-otq-g84\"><span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-h26-4f4-50q\">/etc/passwd</span></li><li class=\"li\" data-tag=\"li\" id=\"li-6pj-tcm-vh9\"><span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-m6s-3ci-k4i\">/etc/shadow</span></li><li class=\"li\" data-tag=\"li\" id=\"li-0uo-uf8-bwh\"><span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-rcv-zyi-dk1\">/etc/group</span></li></ul><div class=\"p\" data-tag=\"p\" id=\"p-p0h-ey3-co5\">您可以直接在正常运行的ECS实例内查看正确的配置文件信息，也可以将正确的配置文件信息下载至本地主机进行查看。本文以CentOS 7.5系统为例，配置文件的内容示例如下：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-kmw-byx-cih\"><li class=\"li\" data-tag=\"li\" id=\"li-ylh-8du-1wq\"><span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-nga-5hl-cth\">/etc/passwd</span><pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-9k3-jsk-g6c\"><code>root:x:0:0:root:/root:/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\nlp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\nsync:x:5:0:sync:/sbin:/bin/sync\nshutdown:x:6:0:shutdown:/sbin:/sbin/shutdown\nhalt:x:7:0:halt:/sbin:/sbin/halt\nmail:x:8:12:mail:/var/spool/mail:/sbin/nologin\noperator:x:11:0:operator:/root:/sbin/nologin\ngames:x:12:100:games:/usr/games:/sbin/nologin\nftp:x:14:50:FTP User:/var/ftp:/sbin/nologin\nnobody:x:99:99:Nobody:/:/sbin/nologin\nsystemd-network:x:192:192:systemd Network Management:/:/sbin/nologin\ndbus:x:81:81:System message bus:/:/sbin/nologin\npolkitd:x:999:998:User for polkitd:/:/sbin/nologin\nsshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin\npostfix:x:89:89::/var/spool/postfix:/sbin/nologin\nchrony:x:998:996::/var/lib/chrony:/sbin/nologin\nntp:x:38:38::/etc/ntp:/sbin/nologin\ntcpdump:x:72:72::/:/sbin/nologin\nnscd:x:28:28:NSCD Daemon:/:/sbin/nologin</code></pre></li><li class=\"li\" data-tag=\"li\" id=\"li-bm8-6hi-szz\"><span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-hc1-n5a-xtb\">/etc/shadow</span><pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-jcj-nta-e5p\"><code>root:$6$Q9lA****/t1KPM$JLqO59UTxwGm****/rU7bHL0q5TVAij****/KeWAWPiO.6booVwpp7rdR9****.irQ6nso3YGVSqQqpyT****.:18668:0:99999:7:::\nbin:*:17632:0:99999:7:::\ndaemon:*:17632:0:99999:7:::\nadm:*:17632:0:99999:7:::\nlp:*:17632:0:99999:7:::\nsync:*:17632:0:99999:7:::\nshutdown:*:17632:0:99999:7:::\nhalt:*:17632:0:99999:7:::\nmail:*:17632:0:99999:7:::\noperator:*:17632:0:99999:7:::\ngames:*:17632:0:99999:7:::\nftp:*:17632:0:99999:7:::\nnobody:*:17632:0:99999:7:::\nsystemd-network:!!:17864::::::\ndbus:!!:17864::::::\npolkitd:!!:17864::::::\nsshd:!!:17864::::::\npostfix:!!:17864::::::\nchrony:!!:17864::::::\nntp:!!:17864::::::\ntcpdump:!!:17864::::::\nnscd:!!:17864::::::</code></pre></li><li class=\"li\" data-tag=\"li\" id=\"li-2ql-29c-ypf\"><span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-2tx-3sj-3og\">/etc/group</span><pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-4aa-4ps-wm7\"><code>root:x:0:\nbin:x:1:\ndaemon:x:2:\nsys:x:3:\nadm:x:4:\ntty:x:5:\ndisk:x:6:\nlp:x:7:\nmem:x:8:\nkmem:x:9:\nwheel:x:10:\ncdrom:x:11:\nmail:x:12:postfix\nman:x:15:\ndialout:x:18:\nfloppy:x:19:\ngames:x:20:\ntape:x:33:\nvideo:x:39:\nftp:x:50:\nlock:x:54:\naudio:x:63:\nnobody:x:99:\nusers:x:100:\nutmp:x:22:\nutempter:x:35:\ninput:x:999:\nsystemd-journal:x:190:\nsystemd-network:x:192:\ndbus:x:81:\npolkitd:x:998:\nssh_keys:x:997:\nsshd:x:74:\npostdrop:x:90:\npostfix:x:89:\nchrony:x:996:\nntp:x:38:\ntcpdump:x:72:\nnscd:x:28:</code></pre></li></ul></div></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-pzb-690-hgc\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-bnq-zet-bi5\">远程连接问题实例。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-dqn-uxg-6zj\">当ECS实例处于正在挂载修复盘的模式下时，只能通过VNC远程连接。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password#concept-sdk-1jx-wdb\">使用VNC登录实例</a>。</div></li><li class=\"li step\" data-tag=\"step\" id=\"step-0hf-3lm-1i7\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-zpg-nyd-i78\">查看问题实例原有系统盘的挂载信息。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-ho8-s4z-4v0\">在临时挂载的修复盘中，问题实例原有系统盘的文件系统会被挂载到某一临时目录下。您可以通过以下任一方式查看所在的临时目录信息：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-58p-d8h-jsf\"><li class=\"li\" data-tag=\"li\" id=\"li-96g-bmr-7pf\">在系统盘详情页的<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-mp0-zdg-oae\">挂载实例</span>进行查看，对应的临时目录格式示例为：<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-0de-hic-5qx\">/tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</code>，其中<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-82e-1wb-945\">bp19bspzms79kqse****</code>为实例原有系统盘的云盘序列号。</li><li class=\"li\" data-tag=\"li\" id=\"li-y51-ev9-00i\">在临时挂载的修复盘中，运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-qe0-1e0-zxr\">mount</span>命令查看。例如，问题实例原有系统盘的设备路径为<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-doa-0zh-8gj\">/dev/vda</span>，命令示例如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-13n-t26-v1g\"><code>mount | grep /dev/vda</code></pre><div class=\"p\" data-tag=\"p\" id=\"p-pce-hui-f1f\">返回结果如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-9rp-ptr-kvb\"><code>/dev/vda1 on /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse**** type ext4 (rw,relatime)</code></pre></div></li></ul></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-3mb-qtr-twg\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-cap-bms-1wv\">运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-fbm-avz-1bi\">chroot</span>命令，将根目录切换为问题实例原有系统盘所在的临时路径，并进入<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-bmm-tgd-4te\">chroot</span>环境。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-u5y-azm-p4c\">您需要在问题实例原有系统盘所在的临时路径中进行文件修复。例如，临时路径为<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-rkg-vqj-7ea\">/tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</span>，命令如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-vyp-6pt-r1k\"><code>chroot /tmp/ecs-offline-diagnose_disk-bp19bspzms79kqse****</code></pre></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-ij8-w5l-azk\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-mpi-8gq-hva\">在<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-0fs-989-t2b\">chroot</span>环境中，运行以下命令，备份<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-w2l-s48-hzi\">/etc/passwd</span>与<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-fdf-8l6-69l\">/etc/shadow</span>原文件。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-4hy-49r-a7z\"><pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-9g6-unj-65q\"><code>cp /etc/passwd /etc/passwd.bak\ncp /etc/shadow /etc/shadow.bak</code></pre></div></li><li class=\"li step\" data-tag=\"step\" id=\"step-ph6-58u-nbb\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-1om-41u-ct0\">补充<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-1hr-oiy-jjj\">/etc/passwd</span>文件缺失的信息。</span><ol type=\"a\" class=\"ol substeps\" data-tag=\"substeps\" id=\"substeps-lc8-l4u-d8z\"><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-inb-ozs-h5u\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-hh4-9mh-8xa\">通过ECS控制台的实例健康诊断结果，获取缺失的系统关键用户的信息。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-htx-ghf-0eb\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-icq-jt3-xf3\">在已准备好的正确的系统用户信息配置文件<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-nzd-bun-vmc\">/etc/passwd</span>中，找到对应的系统关键用户信息，然后复制所在行的内容。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-kch-foi-fgt\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-636-w3a-1n0\">将内容粘贴到<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-1i9-mgp-8ki\">chroot</span>环境的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-28p-mta-yms\">/etc/passwd</span>文件中对应缺失的位置。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-ciz-jvw-vf4\"><div class=\"note note note-note\" data-tag=\"note\" id=\"note-625-i25-55z\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note\"></i></div><div class=\"note-content\"><strong>说明</strong> 修复状态的ECS实例只能通过VNC远程连接，当您需要输入复制的内容时，单击顶部的<img class=\"image inline\" data-tag=\"image\" id=\"image-378-9vq-472\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3210572161/p240231.png\" alt=\"VNC复制命令输入\">按钮。</div></div><span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-v0g-kdq-7wy\">/etc/passwd</span>文件中格式说明如下所示。<div class=\"p\" data-tag=\"p\" id=\"p-3m2-6lz-tqa\">一行用户信息的示例内容如下所示：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-p7f-zhe-9k3\"><code>postfix:x:89:89::/var/spool/postfix:/sbin/nologin</code></pre></div><div class=\"p\" data-tag=\"p\" id=\"p-t9o-v2s-jnc\">每一行用户信息被冒号（:）分隔为7个字段，每个字段对应的说明如下：<pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-5af-0hu-chr\"><code>用户名:密码:uid:gid:用户描述:主目录:登录shell</code></pre></div>粘贴后，您需要对新增的用户信息进行检查：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-f09-i29-v33\"><li class=\"li\" data-tag=\"li\" id=\"li-4ot-wol-wn9\">新增用户信息中的<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-jam-oau-tdr\">uid</code>不能与文件中其他用户的<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-gj7-nsv-ysh\">uid</code>重复。</li><li class=\"li\" data-tag=\"li\" id=\"li-sn8-09m-h77\">新增用户信息中的<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-6m4-71d-e0i\">gid</code>必须存在于<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-yzd-hzd-23o\">chroot</span>环境的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-7v6-ftg-e3i\">/etc/group</span>文件中。如果不存在，需要复制正确的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-jvu-f57-32k\">/etc/group</span>文件中对应的<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-iji-q6a-d4z\">gid</code>所在行到<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-m0f-8ai-e3l\">chroot</span>环境的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-qtk-jfb-2lh\">/etc/group</span>中，并确保新增内容的<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-2vb-ouh-7hr\">gid</code>不能与文件中其它的<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-dfr-863-lkx\">gid</code>重复。<div class=\"p\" data-tag=\"p\" id=\"p-4y3-uqe-q7e\">例如：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-3ty-0ju-nwm\"><li class=\"li\" data-tag=\"li\" id=\"li-yll-ihv-lsl\"><span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-54e-qt9-ciz\">chroot</span>环境的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-xsi-fb2-1fh\">/etc/group</span>文件中存在对应的<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-gb4-biy-4qt\">gid</code>为89，则已满足要求，无需对<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-d8q-h82-9hi\">/etc/group</span>文件进行改动。</li><li class=\"li\" data-tag=\"li\" id=\"li-4kd-oc9-ct7\"><span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-suq-6vv-yr9\">chroot</span>环境的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-yd6-7wi-ox5\">/etc/group</span>文件中不存在对应的<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-y4y-ia2-g71\">gid</code>为89，则需要复制正确的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-yqi-b0n-j41\">/etc/group</span>文件中对应的<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-xju-g3h-79j\">gid</code>所在行到<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-2v6-h2r-lp1\">chroot</span>环境的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-s48-9uk-i3u\">/etc/group</span>中，且不能与其它行的<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-zna-kld-vq6\">gid</code>重复。</li></ul></div></li><li class=\"li\" data-tag=\"li\" id=\"li-nz2-oxh-yhz\">新增用户信息如果在正确的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-ljv-ynl-k4q\">/etc/group</span>文件中存在用户和用户组的关联关系，则在<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-u1x-f31-vbk\">chroot</span>环境的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-q98-dxp-29o\">/etc/group</span>文件中也需要保持一致的关联关系。<p class=\"p\" data-tag=\"p\" id=\"p-6x8-w61-f7b\">例如：<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-f3a-162-148\">chroot</span>环境中的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-fuo-i57-mk1\">/etc/passwd</span>文件中缺失了<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-q3e-2a6-47r\">postfix</code>用户，除了需要复制正确的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-sch-8y6-kqm\">/etc/passwd</span>和<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-zcw-aax-u38\">/etc/group</span>文件中的配置项，如果正确的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-1p2-dff-cml\">/etc/group</span>文件中配置了<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-5tv-k3t-i2s\">postfix</code>用户同时属于<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-6ba-irw-str\">mail</code>组（例如<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-4uu-sih-n2h\">mail:x:12:postfix</code>），则需要将该配置项复制到<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-1lu-fd0-4nv\">chroot</span>环境的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-5dc-9yi-97a\">/etc/group</span>文件中。</p></li></ul></div></li></ol></li><li class=\"li step\" data-tag=\"step\" id=\"step-jc1-ejr-19n\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-b8h-igl-ax1\">补充<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-mq7-vtb-yuv\">/etc/shadow</span>文件缺失的信息。</span><ol type=\"a\" class=\"ol substeps\" data-tag=\"substeps\" id=\"substeps-kyi-6iw-zjz\"><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-5od-dro-qt2\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-2e4-buh-02i\">通过ECS控制台的实例健康诊断结果，获取缺失的系统关键用户的信息。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-wot-dva-tnz\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-z3i-yrs-cfe\">在已准备好的正确的系统用户的密码信息配置文件<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-wjb-yod-5ur\">/etc/shadow</span>中，找到对应的系统关键用户信息，然后复制所在行的内容。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-5ll-s98-yks\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-50p-ozr-bfh\">将内容粘贴到<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-cf6-q9q-hn1\">chroot</span>环境的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-xq3-xiv-am2\">/etc/shadow</span>文件中对应缺失的位置。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-wpy-1l4-w2p\"><div class=\"note note note-note\" data-tag=\"note\" id=\"note-k7h-wd6-fca\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note\"></i></div><div class=\"note-content\"><strong>说明</strong> 修复状态的ECS实例只能通过VNC远程连接，当您需要输入复制的内容时，单击顶部的<img class=\"image inline\" data-tag=\"image\" id=\"image-ted-uew-vws\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3210572161/p240231.png\" alt=\"VNC复制命令输入\">按钮。</div></div>如果<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-dro-urq-w9p\">chroot</span>环境的<span class=\"ph filepath\" data-tag=\"filepath\" id=\"filepath-40u-l3n-luq\">/etc/shadow</span>文件中信息未缺失，则不需要粘贴。</div></li></ol></li><li class=\"li step\" data-tag=\"step\" id=\"step-4rn-k6w-j8e\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-l5x-i6x-smb\">修复完成后，退出修复环境，然后检查问题实例的当前状态。</span><ol type=\"a\" class=\"ol substeps\" data-tag=\"substeps\" id=\"substeps-6rc-zlr-nl9\"><li class=\"li substep\" data-tag=\"substep\" id=\"substep-o7m-85e-uqf\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-u4m-y87-4xo\">运行<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-vag-iir-dky\">exit</span>命令，退出<span class=\"keyword cmdname\" data-tag=\"cmdname\" id=\"cmdname-mr1-j7x-9g6\">chroot</span>环境。</span></li><li class=\"li substep\" data-tag=\"substep\" id=\"substep-yju-dpm-i5t\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-5na-ogp-w9j\">在ECS控制台的实例健康诊断页面，卸载临时挂载的修复盘并恢复问题实例至正常模式。</span></li><li class=\"li substep\" data-tag=\"substep\" id=\"substep-tzs-yqs-ir3\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-68s-2es-ork\">远程连接已修复的ECS实例，确认成功登录。</span></li></ol></li></ol></section><section class=\"section\" data-tag=\"section\" id=\"section-8vl-n0q-s6y\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-3tb-8ux-26y\">其他解决方案</h2><p class=\"p\" data-tag=\"p\" id=\"p-poc-a13-63b\">在正常实例上挂载异常实例的系统盘进行修复的具体操作，请参见<span props=\"CHINA\"><a class=\"xref\" target=\"_blank\" href=\"https://help.aliyun.com/knowledge_detail/175511.html\">Linux实例中关键的系统用户不存在</a></span>。</p></section></div></article></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/solution-of-instances-cannot-be-started/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span>实例无法启动的解决方案</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>实例无法启动的解决方案</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2021-02-10 15:51:17</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/repair-instance-of-the-operating-system-can-t-start-the-operational-guidelines-for-school-official-cites-use-of-the-problem\">修复实例操作系统无法启动问题的操作指南</a></li>\n <li><a href=\"/zh/ecs/support/linux-instance-of-key-users-of-the-system-does-not-exist\">Linux实例中关键的系统用户不存在</a></li>\n <li><a href=\"/zh/ecs/support/ssh-access-defect-in-linux-can-not-connect-the-remote-instance\">SSH的访问权限异常导致无法远程连接Linux实例</a></li>\n <li><a href=\"/zh/ecs/support/unable-to-use-ssh-remote-connection-ubuntu-instances-of-ecs\">无法使用SSH远程连接Ubuntu系统的ECS实例</a></li>\n <li><a href=\"/zh/ecs/support/since-the-launch-of-the-ssh-service-is-not-set-boot\">SSH服务未设置开机时自启动</a></li>\n <li><a href=\"/zh/ecs/support/how-to-properly-configure-linux-instance-piece-of-equipment-in-the-or-etc-or-fstab-file\">如何正确配置Linux实例/etc/fstab文件中的块设备</a></li>\n <li><a href=\"/zh/ecs/support/modify-the-file-in-linux-instance-methods-for-unix-format\">Linux实例中修改文件为Unix格式的方法</a></li>\n <li><a href=\"/zh/ecs/support/linux-instance-grub-launch-configuration-errors\">Linux实例的grub启动配置错误</a></li>\n <li><a href=\"/zh/ecs/support/the-cloud-disk-capacity-when-instance-cannot-be-started\">当实例无法启动时扩容云盘</a></li>\n <li><a href=\"/zh/ecs/support/side-of-cloud-system-problems\">云系统侧出现问题</a></li>\n <li><a href=\"/zh/ecs/support/windows-instances-in-the-system-exists-residual-xen-drivers\">Windows实例系统内存在Xen驱动残留</a></li>\n <li><a href=\"/zh/ecs/support/abnormal-instance-startup-common-errors-with-the-corresponding-solutions\">实例启动异常常见错误与对应解决方案</a></li>\n <li><a href=\"/zh/ecs/support/examples-of-start-or-stop-abnormal-common-problems\">实例启动/停止异常常见问题</a></li>\n <li><a href=\"/zh/ecs/support/linux-system-running-instances-of-ecs-caton-appear-in-or-var-or-log-or-messages-log-info-task-jbd2-or-vda1-3-and-6-blocked-for-wining-120-seconds-error\">Linux系统的ECS实例运行卡顿，在/var/log/messages日志中出现“INFO:task jbd2/vda1-8:366 blocked for more than 120 seconds”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/linux-instances-of-ecs-system-no-response-the-system-log-in-bug-soft-lockup-cpu-0-stuck-for-61-s-error\">Linux系统的ECS实例系统无响应，系统日志中出现“BUG: soft lockup – CPU#0 stuck for 61s”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/linux-system-of-ecs-instance-the-system-log-in-i-or-o-error-blk-update-request-xxxx-error\">Linux系统的ECS实例中，系统日志中出现“blk_update_request: I/O error XXXX”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/linux-system-of-ecs-example-or-var-or-log-or-messages-log-in-corruption-fs-error-xxx-ext4-find-entry-xxx-error\">Linux系统的ECS实例中，/var/log/messages日志出现“EXT4-fs error (device XXX): __ext4_find_entry:XXX”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/linux-instances-of-ecs-internal-operating-system-boot-failure-prompt-uefi-interactive-shell-error\">Linux系统的ECS实例内部操作系统启动失败，提示“UEFI Interactive Shell”错误怎么办？</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/troubleshooting-1/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span>故障排除</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>故障排除</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-20 11:11:00</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></li>\n <li><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></li>\n <li><a href=\"/zh/ecs/support/unable-to-connect-to-and-access-the-ftp-service-in-a-windows-instance\">实例内第三方软件安装与配置问题</a></li>\n <li><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></li>\n <li><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></li>\n <li><a href=\"/zh/ecs/support/network-and-security-group-issues/\">网络与安全组问题</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span>服务支持</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>服务支持</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-02 23:22:20</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/faq-3\">常见问题</a></li>\n <li><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></li>\n <li><a href=\"/zh/ecs/support/the-agreement\">相关协议</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/repair-instance-of-the-operating-system-can-t-start-the-operational-guidelines-for-school-official-cites-use-of-the-problem", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/solution-of-instances-cannot-be-started/\">实例无法启动的解决方案</a></span>\n <span>修复实例操作系统无法启动问题的操作指南</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>修复实例操作系统无法启动问题的操作指南</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-20 15:43:22</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"concept-2102855\"><p id=\"shortdesc-r7a-pj9-m8k\" data-tag=\"shortdesc\" class=\"shortdesc\">实例健康诊断功能支持对实例无法启动问题进行自助诊断排查，您可以通过健康诊断了解实例无法启动的具体原因，并在挂载修复盘的情况下启动并登录实例，修复实例原来操作系统中导致无法启动的相关配置。您可以通过本文了解修复盘的操作说明，以及ECS实例无法启动的解决方案。</p><div data-tag=\"conbody\" id=\"conbody-bzn-mka-e61\" class=\"conbody\"><section id=\"0fd94cb0ad4tv\" class=\"section\"><h2 id=\"def69190ad1sv\"><b>适用场景</b></h2><p id=\"41d917f0ad0fh\">当您启动或重启ECS实例后，ECS实例一直处于<b data-tag=\"uicontrol\" id=\"4b81c7c0ade2f\" class=\"uicontrol\"><b>启动中（Starting）</b></b>或<b data-tag=\"uicontrol\" id=\"540bc120adaiy\" class=\"uicontrol\"><b>运行中（Running）</b></b>状态，同时实例健康状况一直处于<b data-tag=\"uicontrol\" id=\"f2fb29b0adu3i\" class=\"uicontrol\"><b>初始化中（Initializing）</b></b>，此时实例的操作系统未能启动，无法通过SSH或RDP远程连接ECS实例。您可以通过VNC登录实例，查看实例操作系统的启动进度和一些错误日志。</p><p id=\"f672c230aeqw4\">该问题可能是因为ECS实例的操作系统内某些配置不当，导致操作系统无法正常启动。您可以通过实例健康诊断功能对该问题进行诊断，并参考诊断结果进行问题修复。</p></section><section data-tag=\"section\" id=\"prereq-c91-ub1-jhi\" data-type=\"section\" class=\"section\"><h2 data-tag=\"title\" id=\"title-jml-omp-k7q\" class=\"title\">前提条件</h2><p data-tag=\"p\" id=\"p-01z-qnc-frp\" class=\"p\">ECS实例必须处于<b data-tag=\"uicontrol\" id=\"ea736410aewpz\" class=\"uicontrol\"><b>已停止</b></b>状态，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/stop-an-instance\">停止实例</a>。</p></section><section id=\"52ddabe0aewhu\" class=\"section\"><h2 id=\"381912c0adct1\"><b>修复流程</b></h2><p id=\"418ccfe1adprl\">通过实例健康诊断修复实例无法启动问题的具体流程如下：</p><img id=\"f7caee10b0mu0\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6177786761/p569810.png\" alt=\"流程\" placement=\"break\" class=\"image break\"></section><section id=\"7f22fb10adx4x\" class=\"section\"><h2 id=\"2c23a1e0adshr\"><b>步骤一：发起实例操作系统无法启动诊断</b></h2><div type=\"important\" id=\"26a11b21ad2ku\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"28afafd0adbdp\">在修复实例操作系统无法启动问题时，您可能会修改实例原系统盘的系统配置。为了避免不必要的风险，建议您在诊断前，先对实例的系统盘创建一个快照，以便后续数据恢复。</p></div></div><ol id=\"8dcb8bc2adyqv\"><li id=\"8dcb8bc0adsay\"><p id=\"8af401c0adgdy\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com/\">ECS管理控制台</a>。</p></li><li id=\"a118a5a1ad5t3\"><p id=\"a118a5a0advjl\">在左侧导航栏，单击<b data-tag=\"uicontrol\" id=\"a6955f00adfpc\" class=\"uicontrol\"><b>自助问题排查</b></b>。</p></li><li class=\"li\" id=\"li-9gq-3vn-lmb\"><p id=\"9edff3b1ad9ql\">在顶部菜单栏左上角处，选择地域。</p></li><li class=\"li\" id=\"li-bla-gzh-1pg\" data-spm-anchor-id=\"a2c4g.11186623.0.i12.8dbb5d03I4AxWp\"><p id=\"9edff3b2adhsy\">在<b data-tag=\"uicontrol\" id=\"98ae25b0ad7jb\" class=\"uicontrol\"><b>实例问题排查</b></b>页签，单击<b data-tag=\"uicontrol\" id=\"966260f0adb5d\" class=\"uicontrol\"><b>实例无法连接或启动异常</b></b>问题类型。</p></li><li id=\"f7203250ae75t\"><p id=\"f7200b40aegep\">选择<b data-tag=\"uicontrol\" id=\"f2b10e10adtbu\" class=\"uicontrol\"><b>实例状态为已停止，无法正常启动</b></b>问题、需要诊断的<b data-tag=\"uicontrol\" id=\"0cd6c7d0adky0\" class=\"uicontrol\"><b>实例ID</b></b>及时间范围，然后单击<b data-tag=\"uicontrol\" id=\"39f44f80adlh9\" class=\"uicontrol\"><b>开始排查</b></b>。</p><div type=\"note\" id=\"08b90c80aeg2i\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"08b8e570aehxe\">需要诊断的ECS实例必须处于<b data-tag=\"uicontrol\" id=\"292956f0aeh5e\" class=\"uicontrol\"><b>已停止</b></b>状态，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/stop-an-instance\">停止实例</a>。</p></div></div><img id=\"50e12fb1aemnf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1304166761/p563003.png\" alt=\"实例健康诊断\" placement=\"break\" width=\"800\" class=\"image break\"><p id=\"58f6bc60aexi3\">诊断完成后，实例处于<b data-tag=\"uicontrol\" id=\"c060d8e0advuh\" class=\"uicontrol\"><b>运行中</b></b>、<b data-tag=\"uicontrol\" id=\"be998660admni\" class=\"uicontrol\"><b>修复中</b></b>状态。</p><img id=\"5a0daaa1aexyw\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1304166761/p563005.png\" alt=\"运行中、修复中\" placement=\"break\" width=\"800\" class=\"image break\"></li></ol></section><section id=\"7abe6870adaew\" class=\"section\"><h2 id=\"4828a2f1ad1gx\"><b>步骤二：查看诊断结果</b></h2><p id=\"003a4140aevsz\">不同于其他健康诊断场景，实例无法启动的健康诊断完成后，诊断结果无论是严重、警告还是通过，被诊断的实例均会被挂载一个修复盘，您可以在诊断报告中查看到修复盘的相关信息，并且可以根据诊断报告显示的具体问题进行实例修复。关于如何查看诊断报告，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/examples-of-health-diagnosis-1#section-41v-rvz-ojp\">查看诊断历史</a>。</p><section id=\"2463c980aez83\" class=\"section\"><h3 id=\"UN6oi\"><b>实例被挂载修复盘的说明</b></h3><div id=\"5ff4b0d0b0tq7\" type=\"important\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"a1f48e10ads4i\">当ECS实例处于修复盘挂载模式状态下时，实例启动后进入的操作系统是修复盘中的操作系统（Alibaba Cloud Linux 2.1903 LTS 64位），并非实例原来的操作系统。</p></div></div><p id=\"5b647a50b0x5q\">实例通过修复盘中的操作系统启动和通过原来的操作系统启动时，存在的差异与限制如下：</p><ul id=\"32cd9362b0xia\"><li id=\"32cd9360b0wak\"><p id=\"3043db40b00rs\">修复盘系统是从特定虚拟存储设备启动的系统，对于修复盘系统本身，所有的修改操作只会暂存于内存中，只在当次运行过程中有效，重启修复盘系统后就会清空并失效。而对于实例原有的系统盘和数据盘，您可以在挂载文件系统后对其内容进行修改，这些修改会存储下来，不会随着修复盘系统重启或者卸载修复盘而丢失。</p></li><li id=\"a1f46702ady7q\"><p id=\"a1f46706ad97c\">在修复盘的操作系统下，您只能通过VNC远程连接实例，无法通过SSH、RDP、Workbench或第三方远程连接工具连接该实例。</p></li><li id=\"a1f46703ad2vu\"><p id=\"a1f46707ad4sn\">修复盘系统只能使用本次诊断工具提供的用户名（通常为root）和密码登录，该用户名和密码需要从诊断报告中查看。</p><div type=\"important\" id=\"36c55380adi5c\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"3a189d30adk66\">即使在修复盘系统中修改了密码，在重启修复盘系统之后也会恢复到系统所提供的密码，无法使用实例原来系统中的任何用户名和密码进行登录。</p></div></div></li><li id=\"a1f46705ady9h\"><p id=\"a1f46709adtn2\">实例处于修复模式下，您可以为系统盘创建快照。创建的快照是对实例原来系统盘的快照，而不是修复盘的快照。</p></li></ul></section><section id=\"2164e160aex9n\" class=\"section\"><h3 id=\"d1BZl\"><b>诊断结果说明</b></h3><p id=\"e3938c80ae08q\">诊断结果主要包括两部分内容，修复盘信息与诊断结果和建议，如下图所示：</p><img id=\"427a4240ae47u\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1304166761/p568972.png\" alt=\"诊断结果说明\" placement=\"break\" width=\"800\" class=\"image break\"><p id=\"ffd79cf0ae859\"><b>修复盘信息</b><b>说明如下：</b></p><ul data-tag=\"ul\" id=\"06441810aeo05\" class=\"ul\"><li data-tag=\"li\" id=\"06441811aeibd\" class=\"li\"><p id=\"06441812aej7r\">上图中①：展示了自动挂载修复盘后ECS提供的登录实例挂载的修复系统的用户名（通常为root）及密码信息，您可以通过该信息登录挂载了修复盘的ECS实例。</p></li><li data-tag=\"li\" id=\"06441814aefl9\" class=\"li\"><p id=\"06443f20ae773\">上图中②：提供了使用VNC远程连接该ECS实例的快捷方式。ECS实例挂载修复盘的状态下，您只能通过该入口登录ECS实例进行问题修复，Workbench、第三方远程连接工具等方式均无法直接登录该实例。</p></li><li data-tag=\"li\" id=\"06443f21aeufk\" class=\"li\"><p id=\"06443f22aeors\">上图中③：提供了卸载修复盘的入口。您可以根据健康诊断结果和修复进展，通过该入口卸载修复盘，使实例的恢复至原来的操作系统。具体说明如下：</p><ul data-tag=\"ul\" id=\"06443f23ae95e\" class=\"ul\"><li id=\"840193e1ae0bd\"><p id=\"841b0f50aeckb\">如果健康诊断的结果为通过，说明实例健康诊断未诊断到实例异常问题，您可以参考<a title=\"\" class=\"xref\" href=\"#context-wn1-fbv-eqx\">步骤四：将ECS实例恢复至正常模式</a>后，通过VNC远程连接ECS实例进一步排查具体问题。如还未解决，请<a class=\"ne-link\" target=\"_blank\" href=\"https://selfservice.console.aliyun.com/ticket/category/swas/today\">提交工单</a>，联系技术支持获取帮助。</p></li><li data-tag=\"li\" id=\"06443f26aecb0\" class=\"li\"><p id=\"06443f27aecim\">如果健康诊断的结果为严重或者警告，说明您的ECS实例存在异常，您需要在诊断报告中，通过VNC远程连接（上图中②）ECS实例，然后使用修复盘对用的登录信息（上图中①）登录实例。当您在实例内完成异常修复后，再卸载修复盘。</p></li></ul></li></ul><p id=\"772f5ef2aebf6\"><b>异常详情和修复建议说明如下：</b></p><p id=\"772f5ef1aesln\">异常详情和修复建议主要展示实例操作系统配置不当的具体问题，并且给出修复建议。您可以单击推荐的修复文档，查看具体的问题描述及修复建议进行修复。具体操作，请参见<a title=\"\" class=\"xref\" href=\"#d93bdb30aeibj\">步骤三：修复实例操作系统配置不当问题</a>。</p></section></section><section id=\"d93bdb30aeibj\" class=\"section\"><h2 id=\"4e55e7a0addmp\"><b>步骤三：修复实例操作系统配置不当问题</b></h2><ol class=\"ol steps\" id=\"steps-mgd-i14-zr0\"><li class=\"li step stepexpand\" id=\"step-pzb-690-hgc\" data-spm-anchor-id=\"a2c4g.11186623.0.i5.53ac1d1fbuqfHj\"><p id=\"0c9a0880aeev5\">远程连接问题实例。</p><p id=\"0c9a0881aezcq\">您可以在诊断结果界面单击<b data-tag=\"uicontrol\" id=\"3e1c22d0aey04\" class=\"uicontrol\"><b>VNC远程连接</b></b>，使用诊断报告中提供的临时登录实例的<b>root</b>用户及密码信息登录挂载了修复盘的ECS实例。具体操作，请参见<a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/25433.htm#concept-sdk-1jx-wdb\">通过密码认证登录Linux实例</a>。</p><div type=\"note\" id=\"62e0fa51ae3am\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"63361f30aesdm\">当ECS实例处于正在挂载修复盘的模式下时，只能通过VNC远程连接。</p></div></div></li><li id=\"816468e0ae1mi\"><p id=\"8ed4a802ae8rx\">查看问题实例原有系统盘的挂载信息。</p><p id=\"8ed480f1aebww\">在临时挂载的修复盘中，问题实例原有系统盘的文件系统会被挂载到某一临时目录下。您可以通过以下任一方式查看所在的临时目录信息：</p><ul id=\"76629c41ae1vg\"><li id=\"756fd7d1ae39o\"><p id=\"b0ab6ad0ae6nz\">在系统盘详情页的<b data-tag=\"uicontrol\" id=\"fd899c00aegj4\" class=\"uicontrol\"><b>挂载实例</b></b>进行查看，临时目录格式示例为<code data-tag=\"code\" class=\"code\">/tmp/ecs-offline-diagnose_disk-uf67g4wwius3metl****</code>，其中<code data-tag=\"code\" class=\"code\">uf67g4wwius3metl****</code>为实例原有系统盘的云盘序列号，</p></li><li id=\"7cca03c1aehoe\"><p id=\"7cca03c0ae79u\">在临时挂载的修复盘中，运行<code data-tag=\"code\" class=\"code\">mount</code>命令查看所在的临时目录信息。例如，问题实例原有系统盘的设备路径为<code data-tag=\"code\" class=\"code\">/dev/vda</code>，命令示例如下所示：</p><pre id=\"gu0pug\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>mount | grep /dev/vda</code></pre><p id=\"8ed4a800ae9fi\">返回结果如下所示：</p><pre id=\"2x39mx\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>/dev/vda1 on /tmp/ecs-offline-diagnose_disk-uf67g4wwius3metl**** type ext4 (rw,relatime)</code></pre></li></ul></li><li id=\"598ebd00aefe5\"><p id=\"61bcdac0aezyq\">修复实例操作系统配置不当问题。</p><p id=\"70213de0aekqx\">下表提供了常见的实例无法启动的解决方案，您可以根据诊断结果中的诊断项详情，查看实例无法启动的原因，然后根据不同的原因选择对应的解决方案。</p><table id=\"85d78f90aeaqs\" class=\"table\"><colgroup colwidth=\"0.82*\" style=\"width:40.88%\"></colgroup><colgroup colwidth=\"1.18*\" style=\"width:58.97%\"></colgroup><tbody class=\"tbody\"><tr id=\"85d78f91aew99\"><td id=\"85d78f92aehqw\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"85d78f93aezph\"><b>问题</b></p></td><td id=\"85d78f94aex8u\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"85d78f95aer47\"><b>解决方案说明</b></p></td></tr><tr id=\"85d78f96aexgf\"><td id=\"85d78f97aefm9\" rowspan=\"1\" colspan=\"1\"><p id=\"85d78f98aelvb\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/linux-instance-of-key-users-of-the-system-does-not-exist#task-2042713\">Linux实例中关键的系统用户不存在</a></p></td><td id=\"85d78f99aemzn\" rowspan=\"1\" colspan=\"1\"><p id=\"85d78f9aaeycf\">当Linux实例中关键的系统用户不存在时，可能导致无法远程登录。您可以通过实例健康诊断工具进行问题修复。</p></td></tr><tr id=\"85d78f9baetud\"><td id=\"85d78f9caeesn\" rowspan=\"1\" colspan=\"1\"><p id=\"85d78f9dae5xi\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/ssh-access-defect-in-linux-can-not-connect-the-remote-instance#task-2042845\">SSH的访问权限异常导致无法远程连接Linux实例</a></p></td><td id=\"85d78f9eae3et\" rowspan=\"1\" colspan=\"1\"><p id=\"85d78f9faervv\">当Linux实例中关于SSH的访问权限配置异常时，将导致无法远程登录。您可以通过实例健康诊断工具进行问题修复。</p></td></tr><tr id=\"85d78fa0aej3x\"><td id=\"85d78fa1aeilp\" rowspan=\"1\" colspan=\"1\"><p id=\"85d78fa2ae6fq\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/unable-to-use-ssh-remote-connection-ubuntu-instances-of-ecs#task-2042879\">无法使用SSH远程连接Ubuntu系统的ECS实例</a></p></td><td id=\"85d78fa3aeg66\" rowspan=\"1\" colspan=\"1\"><p id=\"85d78fa4ae0oa\">如果您无法使用root用户通过SSH远程连接Ubuntu系统的ECS实例，可以通过实例健康诊断工具进行问题修复。</p></td></tr><tr id=\"85d78fa5aefxn\"><td id=\"85d78fa6aepa9\" rowspan=\"1\" colspan=\"1\"><p id=\"85d78fa7ae8we\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/since-the-launch-of-the-ssh-service-is-not-set-boot#task-2042882\">SSH服务未设置开机时自启动</a></p></td><td id=\"85d78fa8aejwx\" rowspan=\"1\" colspan=\"1\"><p id=\"85d78fa9ae7x4\">如果Linux实例中SSH服务未设置开机时自启动，重启实例后，将无法使用SSH远程连接实例，您可以使用VNC登录实例进行修复，也可以通过实例健康诊断工具进行问题修复。</p></td></tr><tr id=\"85d78faaaejeo\"><td id=\"85d78fabaetyv\" rowspan=\"1\" colspan=\"1\"><p id=\"85d78facaeffx\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/how-to-properly-configure-linux-instance-piece-of-equipment-in-the-or-etc-or-fstab-file#task-2043160\">如何正确配置Linux实例/etc/fstab文件中的块设备</a></p></td><td id=\"85d78fadaegym\" rowspan=\"1\" colspan=\"1\"><p id=\"85d78faeaewep\">当您的Linux实例<span data-tag=\"filepath\" id=\"filepath-q57-2ku-ib7\" class=\"filepath\">/etc/fstab</span>文件中未正确配置要自动挂载的文件系统信息或者存在已不可用的文件系统信息，重启系统后可能导致ECS实例的操作系统无法正常启动。您可以通过实例健康诊断工具进行问题修复。</p></td></tr><tr id=\"85d78fafaec1l\"><td id=\"85d78fb0aervq\" rowspan=\"1\" colspan=\"1\"><p id=\"85d78fb1ae2n0\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/modify-the-file-in-linux-instance-methods-for-unix-format#task-2043292\">Linux实例中修改文件为Unix格式的方法</a></p></td><td id=\"85d78fb2aep88\" rowspan=\"1\" colspan=\"1\"><p id=\"85d78fb3aekkt\">在Linux实例中，如果一些关键文件的格式不是Unix格式，可能导致该实例无法被远程连接。您可以通过实例健康诊断工具进行问题修复。</p></td></tr><tr id=\"85d78fb4aegvc\"><td id=\"85d78fb5aeyrg\" rowspan=\"1\" colspan=\"1\"><p id=\"85d78fb6aea6i\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/linux-instance-grub-launch-configuration-errors#task-2043305\">Linux实例的grub启动配置错误</a></p></td><td id=\"85d78fb7ae3k2\" rowspan=\"1\" colspan=\"1\"><p id=\"85d78fb8aewil\">Linux实例无法启动，并且通过诊断工具检测到grub启动配置错误时，您可以通过实例健康诊断工具进行问题修复。</p></td></tr><tr id=\"85d78fb9aeq0q\"><td id=\"85d78fbaaec0a\" rowspan=\"1\" colspan=\"1\"><p id=\"85d78fbbaeohg\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-cloud-disk-capacity-when-instance-cannot-be-started#task-2043381\">当实例无法启动时扩容云盘</a></p></td><td id=\"85d78fbcae5ja\" rowspan=\"1\" colspan=\"1\"><p id=\"85d78fbdaepxn\">当Linux实例无法启动时，实例健康诊断工具诊断出实例云盘的inode使用率或者空间使用率过高。此时，您可以通过实例健康诊断工具进行问题修复。</p></td></tr></tbody></table></li></ol></section><section data-tag=\"section\" id=\"context-wn1-fbv-eqx\" data-type=\"section\" class=\"section\"><h2 data-tag=\"title\" id=\"title-j9w-f75-n3k\" class=\"title\">步骤四：将ECS实例恢复至正常模式</h2><p id=\"daac7ad0ae2o9\">当实例无法启动问题修复完成后，您需要卸载修复盘，将实例恢复至原来使用的操作系统。</p><div type=\"note\" id=\"3d7a5040b0f2l\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"47a32c90b0hvj\">卸载修复盘之后，将无法自动再次挂载修复盘，您只能通过再次发起实例操作系统无法启动诊断，才能触发系统自动为实例挂载修复盘。</p></div></div><section id=\"2ba871a0aerwq\" class=\"section\"><h3 id=\"f8ccbac0aenjg\"><b>方式一：</b><b>从诊断报告处将实例恢复至原来操作系统</b></h3><ol id=\"3f318310aemus\"><li id=\"3f318311aezo8\"><p id=\"3f318312aeond\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com/\">ECS管理控制台</a>。</p></li><li id=\"3f318313aeh07\"><p id=\"3f318314aex2p\">在左侧导航栏，单击<b data-tag=\"uicontrol\" id=\"1fbcf561ae780\" class=\"uicontrol\"><b>自助问题排查</b></b>。</p></li><li class=\"li\" id=\"3f318315ae7zd\"><p id=\"3f318316aezmy\">在顶部菜单栏左上角处，选择地域。</p></li><li id=\"5a41c3e0ae9lt\"><p id=\"5a56d280aevum\">单击<b data-tag=\"uicontrol\" id=\"5e535480aemfo\" class=\"uicontrol\"><b>实例问题排查</b></b>页签，然后单击<b data-tag=\"uicontrol\" id=\"5fd49d50aesdx\" class=\"uicontrol\"><b>查看历史</b></b>。</p></li><li class=\"li\" id=\"3f31aa20ae0s8\" data-spm-anchor-id=\"a2c4g.11186623.0.i12.8dbb5d03I4AxWp\"><p id=\"3f31aa21ae7oy\">在<b data-tag=\"uicontrol\" id=\"786efc20aee50\" class=\"uicontrol\"><b>实例健康诊断</b></b>页签，单击对应诊断报告<b data-tag=\"uicontrol\" id=\"7c45f4c0ae03v\" class=\"uicontrol\"><b>操作</b></b>列的<b data-tag=\"uicontrol\" id=\"83dc1840aej08\" class=\"uicontrol\"><b>查看报告</b></b>。</p></li><li id=\"91e00be0ae5ld\"><p id=\"91fd57e3aea06\">单击<b data-tag=\"uicontrol\" id=\"9d4bef80aeo81\" class=\"uicontrol\"><b>卸载修复盘</b></b>。</p></li><li id=\"a61e6390aee26\"><p id=\"a61e3c80aeyuc\">在<b data-tag=\"uicontrol\" id=\"aaa8f4c0aeiao\" class=\"uicontrol\"><b>您确定要卸载修复盘吗？</b></b>对话框，阅读注意事项后，单击<b data-tag=\"uicontrol\" id=\"b05c4e80aegjx\" class=\"uicontrol\"><b>立即卸载</b></b>。</p><div id=\"18d28e20aeonc\" type=\"important\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"e44aade0ae2d3\">卸载修复盘需要先停止实例，如未停止实例，需要按照界面提示停止实例后再卸载修复盘。</p></div></div><img id=\"e5d5bab0ae7qg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7369166761/p569018.png\" alt=\"停止实例\" placement=\"break\" class=\"image break\"></li><li id=\"e28c0df1aeki0\"><p id=\"39b8cbe0aevy8\">启动实例，然后远程连接ECS实例，确保可以正常连接。</p><p id=\"4d3f4540aezy6\">卸载成功后，ECS实例状态为<b data-tag=\"uicontrol\" id=\"b0b24140ae6h0\" class=\"uicontrol\"><b>已停止</b></b>，您需要启动实例后才能远程连接。</p><img id=\"8ceb9fe0ae2nw\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7369166761/p569026.png\" alt=\"启动实例\" placement=\"break\" width=\"800\" class=\"image break\"></li></ol></section><section id=\"2cf9a9c0aehvh\" class=\"section\"><h3 id=\"fe315840aegwq\"><b>方式二：从实例列表页恢复实例</b></h3><ol id=\"4e3dd410aeqdc\"><li id=\"4e3dd411ae0sk\"><p id=\"4e3dd412aenkc\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com/\">ECS管理控制台</a>。</p></li><li id=\"4e3dd413aep6d\"><p id=\"4e3dd414aeaxq\">在左侧导航栏，单击<b data-tag=\"uicontrol\" id=\"5f9140d0ae0yn\" class=\"uicontrol\"><b>实例与镜像 &gt; 实例</b></b>。</p></li><li class=\"li\" id=\"4e3dd415aeqw5\"><p id=\"4e3dd416aeclf\">在顶部菜单栏左上角处，选择地域。</p></li><li id=\"6ab1eaa1aezb7\"><p id=\"6ab1eaa0aetg6\">找到目标实例，停止该ECS实例。</p><p id=\"72b8d150aehwl\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/stop-an-instance\">停止实例</a>。</p></li><li id=\"a41dc6b1ae1o2\"><p id=\"bd1d9e10aedst\">将鼠标悬浮至<b data-tag=\"uicontrol\" id=\"c0e5c9a0aeogs\" class=\"uicontrol\"><b>修复中</b></b>的状态上，然后单击<b data-tag=\"uicontrol\" id=\"c2983490ae64o\" class=\"uicontrol\"><b>卸载修复盘</b></b>。</p><p id=\"c54f6550ae8ft\">您也可以单击目标实例ID，在<b data-tag=\"uicontrol\" id=\"fdd4d900aej2u\" class=\"uicontrol\"><b>实例详情</b></b>页面<b data-tag=\"uicontrol\" id=\"ffdd5330aet1y\" class=\"uicontrol\"><b>卸载修复盘</b></b>。</p><img id=\"fa7d97b0ae6pj\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8369166761/p569046.png\" alt=\"卸载修复盘\" placement=\"break\" width=\"800\" class=\"image break\"></li><li id=\"cdcf4c91aeooh\"><p id=\"cc2ebbf0aeii5\">在<b data-tag=\"uicontrol\" id=\"1fbd1c70aez2f\" class=\"uicontrol\"><b>您确定要卸载修复盘吗？</b></b>对话框，阅读注意事项后，单击<b data-tag=\"uicontrol\" id=\"1fbd1c71ae77n\" class=\"uicontrol\"><b>立即卸载</b></b>。</p><img id=\"19a869d0ae4oq\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8369166761/p569049.png\" alt=\"立即卸载\" placement=\"break\" class=\"image break\"></li><li id=\"d3a5e5c1aeo7v\"><p id=\"d20f1921aec3i\">启动实例，然后远程连接ECS实例，确保可以正常连接。</p><p id=\"d20f1922ae9y9\">卸载成功后，ECS实例状态为<b data-tag=\"uicontrol\" id=\"1fbd1c72ae9ci\" class=\"uicontrol\"><b>已停止</b></b>，您需要启动实例后才能远程连接。</p><img id=\"d20f1924aerh4\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7369166761/p569026.png\" alt=\"启动实例\" placement=\"break\" width=\"800\" class=\"image break\"></li></ol></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/query-and-analysis-of-system-loads-on-linux-instances", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></span>\n <span>Linux实例负载高问题排查和异常处理</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux实例负载高问题排查和异常处理</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-14 09:53:54</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2306106\"><p id=\"4924db82bb2zb\" data-tag=\"shortdesc\" class=\"shortdesc\"><span style=\"color:rgb(51, 51, 51)\">本文档介绍Linux云服务器负载高导致ECS实例运行变慢、自动关机或重启、无法登录等异常问题的排查方法和解决方案。</span></p><div data-tag=\"body\" class=\"body\"><section id=\"7cbb4b50be45l\" class=\"section\"><h2 id=\"7cbb4b51beosc\"><b>问题描述</b></h2><p id=\"a51e02a0bc5yv\">在您使用ECS实例过程中，可能会遇到实例系统负载较高的情况，负载过高，可能会引发一系列异常问题，简单说您如下：</p><ul id=\"5f374d52bfx57\"><li id=\"5f374d50bfsyw\"><p id=\"4f066790bf19f\">CPU使用率或负载过高：一般来说，当CPU使用率≥80%时，定义为CPU使用率过高。CPU使用率持续过高，可能会导致实例运行速度变慢，自动关机或重启、无法登录等问题。</p></li><li id=\"8df1e331bfk9i\"><p id=\"8df1e330bfj3l\">带宽使用率过高：一般来说，带宽使用率≥当前带宽80%时，定义为带宽使用率过高。带宽使用率持续过高，将影响实例的网络连通性或网络吞吐，例如实例无法远程连接、网速过慢等。</p></li><li id=\"77a32ca0bfzel\"><p id=\"77a30590bf105\">内存使用率过高：一般来说，当内存使用率≥80%时，定义为内存使用率过高。内存使用率过高，可能会出现系统卡顿、内部服务响应速度变慢等问题。</p></li><li id=\"afdcf150bfe0e\"><p id=\"b777cfc0bf19e\">I/O使用率过高：一般来说，当前I/O读写≥该云盘I/O的80%时，定义为I/O使用率过高。I/O使用率过高，可能会出现文件读写变慢、应用性能下降或报错等问题。</p></li></ul></section><section id=\"6d5dbb20beoom\" class=\"section\"><h2 id=\"6d5dbb21be79y\"><b>问题排查</b></h2><p id=\"ba2e3bd0be12e\">您可以使用SAR工具或htop工具定位该实例的负载过高及各资源的使用情况。</p><section id=\"bf10d810bex9d\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"bf10ff21bes9f\" class=\"section\"><h3 id=\"c25861f0bebbj\">使用sar工具查看实例各资源使用情况</h3><p id=\"bf10ff22befw1\">sar是System Activity Reporter（系统活动情况报告）的缩写，sar工具对系统状态进行取样后，通过计算数据和比例来表达系统当前的运行状态。其特点是可以连续对系统取样，获得大量的取样数据。其取样数据和分析结果可以存入文件，所需的负载很小。</p><p id=\"078c335dbet54\">sar是Linux系统中较为全面的性能分析工具，可以从多个方面对系统的活动进行监控和报告，包括文件读写情况、系统调用使用情况、串口、CPU效率、内存使用情况、进程活动及IPC（Inter-Process Communication，进程间通信）等。</p><section id=\"de7d8380be4rn\" class=\"section\"><h3 id=\"ae5565d0be89p\"><b>安装sar工具</b></h3><p id=\"183d4161be4b9\">如果您的ECS实例中默认未安装sar工具，可参考如下步骤进行安装。</p><ol id=\"c22b3634b08i1\" data-spm-anchor-id=\"a2c4g.11186623.0.i2.4b96e34eqbBLke\"><li id=\"c22b5d40b0hm3\" data-spm-anchor-id=\"a2c4g.11186623.0.i1.4b96e34eqbBLke\"><p id=\"a52e90b1b3w3h\">使用VNC连接Linux系统的ECS实例。</p><p class=\"itemgroup info\" id=\"info-d6f-lre-3tc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"c22b5d42b0lol\"><p id=\"c22b5d43b0qlx\">执行如下命令，安装sar工具。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"72d4c8a0benr1\" class=\"pre codeblock language-plaintext\"><code>yum install sysstat</code></pre></li><li id=\"737a7e80beuaq\"><p id=\"76d82870beio4\">执行如下命令，启动sysstat服务。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"78c0be90bely4\" class=\"pre codeblock language-plaintext\"><code>systemctl start sysstat</code></pre></li><li id=\"77fac7901fuxd\"><p id=\"b93f00401fp1d\">执行如下命令，查看sysstat服务状态。</p><pre id=\"xgbggz\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>systemctl status sysstat</code></pre><p id=\"454b70801fzkx\">当返回系统中出现<code data-tag=\"code\" class=\"code\">Active: active (exited)</code>表示sysstat服务已启动。</p></li></ol></section><section id=\"368de140bfck7\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"dbe859b0be4yr\" class=\"section\"><h3 id=\"6b1eabf1ber2x\"><b>查看CPU使用率</b></h3><p id=\"9141daf0be05e\">执行如下命令，查看CPU负载。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"88e39a90beg2h\" class=\"pre codeblock language-plaintext\"><code>sar -u 1 5   #每隔一秒刷新，刷新5次</code></pre><p id=\"8c15a0a0be6uj\">系统显示类似如下。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"926ab8a0beczp\" class=\"pre codeblock language-plaintext\"><code>Linux 3.10.0-123.9.3.el7.x8664 (iZ23pddtofdZ)     07/04/2016     _x86_64    (1 CPU)\n10:16:35 AM     CPU     %user     %nice   %system   %iowait    %steal     %idle\n10:16:36 AM     all     14.14      0.00      1.01      0.00      0.00     84.85\n10:16:37 AM     all     14.14      0.00      0.00      1.01      0.00     84.85\n10:16:38 AM     all      0.00      0.00      1.01      0.00      0.00     98.99\n10:16:39 AM     all      0.00      0.00      0.00      0.00      0.00    100.00\n10:16:40 AM     all      1.00      0.00      0.00      0.00      0.00     99.00\nAverage:        all      5.86      0.00      0.40      0.20      0.00     93.54</code></pre><p data-tag=\"h4\" id=\"c22ae817b0mda\" class=\"h4\"><b>显示结果主要字段说明</b></p><ul id=\"a570b761beubj\"><li id=\"a4b49351be2l0\"><p id=\"a4b49350be0kf\">%user：用户模式下消耗的CPU时间比例。</p></li><li id=\"a39b5b23beksf\"><p id=\"a39b5b22beo87\">%nice：通过nice改变了进程调度优先级的进程，在用户模式下消耗的CPU时间比例。</p></li><li id=\"a39b5b25bekvt\"><p id=\"a39b5b24becpo\">%system：系统模式下消耗的CPU时间比例。</p></li><li id=\"a39b5b27be3s0\"><p id=\"a39b5b26bealy\">%iowait：CPU等待磁盘I/O导致空闲状态消耗的时间比例。</p></li><li id=\"a39b5b29beh4v\"><p id=\"a39b5b28be8gi\">%steal：利用Xen等操作系统虚拟化技术，等待其它虚拟CPU计算占用的时间比例。</p></li><li data-spm-anchor-id=\"a2c4g.11186623.0.i29.b67a7744gZfyB9\" id=\"a39b5b2bbebgv\"><p id=\"a39b5b2abeusi\">%idle：CPU空闲时间百分比。</p></li></ul></section><section id=\"6feea330behz5\" class=\"section\"><h3 id=\"7135d090beljf\"><b>查看队列长度和CPU平均负载</b></h3><p id=\"e7911f40beijo\">执行如下命令，查看队列长度和CPU平均负载。</p><pre data-tag=\"codeblock\" id=\"077bdfa5beos8\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sar -q 1 10    #每隔一秒刷新，刷新10次</code></pre><p id=\"078ca884be13v\">系统显示类似如下。</p><pre data-tag=\"codeblock\" id=\"077bdfa6bevff\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Linux 3.10.0-123.9.3.el7.x8664 (iZ23pddtofdZ)     07/04/2016     _x86_64    (1 CPU)\n10:23:13 AM   runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15   blocked\n10:23:14 AM         0       142      0.00      0.01      0.05         0\n10:23:15 AM         0       142      0.00      0.01      0.05         0\n10:23:16 AM         0       142      0.00      0.01      0.05         0\n10:23:17 AM         0       142      0.00      0.01      0.05         0\n10:23:18 AM         0       142      0.00      0.01      0.05         0\n10:23:19 AM         0       142      0.00      0.01      0.05         0\nAverage:            0       142      0.00      0.01      0.05         0</code></pre><p data-tag=\"h4\" id=\"38023b30beqro\" class=\"h4\"><b>显示结果主要字段说明</b></p><ul id=\"548238a0bee73\"><li id=\"548238a1benv6\"><p id=\"548238a2be15p\">runq-sz：运行队列的长度，即等待运行的进程数。</p></li><li id=\"548238a3be1yd\"><p id=\"548238a4be40e\">plist-sz：进程列表中进程（processes）和线程（threads）的数量。</p></li><li id=\"548238a5beshd\"><p id=\"548238a6bel8m\">ldavg-1：最后1分钟的系统平均负载。</p></li><li id=\"548238a7be6s2\"><p id=\"548238a8beseo\">ldavg-5：最后5分钟的系统平均负载。</p></li><li id=\"548238a9bemxl\"><p id=\"548238aabe6by\">ldavg-15：最后15分钟的系统平均负载。</p></li></ul></section><section id=\"07ba3ca0be8na\" class=\"section\"><h3 id=\"05aba7f1belgg\"><b>查看磁盘使用情况</b></h3><p id=\"05aba7f2be7ua\">执行如下命令，查看磁盘读写负载情况。</p><pre data-tag=\"codeblock\" id=\"05aba7f3behl1\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sar -d 1 3    #每隔一秒刷新，刷新3次</code></pre><p id=\"05aba7f4beana\">系统显示类似如下。</p><pre data-tag=\"codeblock\" id=\"077bdfa8beggg\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Linux 5.10.134-13.al8.x86_64 (iZ2zegjvrdtgifd77gadyqZ)  03/09/2023      _x86_64_        (8 CPU)\n\n02:41:04 PM       DEV       tps     rkB/s     wkB/s   areq-sz    aqu-sz     await     svctm     %util\n02:41:05 PM  dev253-0      1.00      0.00      4.00      4.00      0.00      0.00      1.00      0.10\n02:41:06 PM  dev253-0      1.00      0.00      4.00      4.00      0.00      1.00      1.00      0.10\n02:41:07 PM  dev253-0      1.00      0.00      4.00      4.00      0.00      0.00      2.00      0.20\n02:41:08 PM  dev253-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00\n02:41:09 PM  dev253-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00\nAverage:     dev253-0      0.60      0.00      2.40      4.00      0.00      0.33      1.33      0.08</code></pre><p data-tag=\"h4\" id=\"05aba7f6bejgv\" class=\"h4\"><b>显示结果主要字段说明</b></p><ul id=\"289867101fcjw\"><li id=\"289867111fj40\"><p id=\"289867121f46f\">tps：每秒I/O的传输总数。</p></li><li id=\"62a1b8a0beyo5\"><p id=\"62a19190bel3w\">rd_sec/s：每秒读取的扇区的次数。</p></li><li id=\"63838d20begv4\"><p id=\"63836610befr5\">wr_sec/s：每秒写入的扇区的次数。</p></li><li id=\"64555c11bezzb\"><p id=\"64555c10begmj\">avgrq-sz：平均每次磁盘I/O操作的扇区大小。</p></li><li id=\"6513f120becj8\"><p id=\"6513ca10bee11\">avgqu-sz：磁盘请求队列的平均长度。</p></li><li id=\"65fbe021be6b9\"><p id=\"65fbe020betst\">await：从请求磁盘操作到系统完成处理，每次请求的平均消耗时间，包括请求队列等待时间。</p></li><li id=\"66f18ac0be58q\"><p id=\"66f163b0bechk\">svctm：系统处理每次请求的平均时间。</p></li><li id=\"67e07ea1bezcd\"><p id=\"67e07ea0bean1\">%util：I/O请求占用的CPU百分比，值越高，说明I/O越慢。</p></li></ul></section><section id=\"8ec14330be54v\" class=\"section\"><h3 id=\"76a03a70bedwo\"><b>查看内存负载</b></h3><p id=\"71078d41becrc\">执行如下命令，查看内存负载。</p><pre data-tag=\"codeblock\" id=\"077bdfa7be1xp\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sar -r 1 3    #每隔一秒刷新，刷新3次</code></pre><p id=\"078ccf97bek98\">系统显示类似如下。</p><pre data-tag=\"codeblock\" id=\"05aba7f5beqxu\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Linux 3.10.0-123.9.3.el7.x8664 (iZ23pddtofdZ)     07/04/2016     _x86_64    (1 CPU)\n\n10:27:34 AM kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit  kbactive  kbinact  kbdirty\n10:27:35 AM    275992    740664     72.85    181552    315340    362052     35.61    471216   115828       60\n10:27:36 AM    276024    740632     72.85    181552    315340    362052     35.61    471220   115828       64\n10:27:37 AM    276024    740632     72.85    181552    315340    362052     35.61    471220   115828       64\nAverage:       276013    740643     72.85    181552    315340    362052     35.61    471219   115828       63</code></pre><p data-tag=\"h4\" id=\"8875a110bef6x\" class=\"h4\"><b>显示结果主要字段说明</b></p><ul id=\"8ab5f420be2ys\"><li id=\"2be018011fqd4\"><p id=\"2be018021foz5\">kbmemfree：该值和free命令中的free值基本一致，不包括buffer和cache空间。</p></li><li id=\"05aba7fabeaa6\"><p id=\"05aba7fbbezxc\">kbmemused：该值和free命令中的used值基本一致，包括buffer和cache空间。</p></li><li id=\"05aba7fcbelxo\"><p id=\"05aba7fdbe2wf\">%memused：物理内存使用率，该值是kbmemused和内存总量（不包括swap内存）的百分比。</p></li><li id=\"05aba7febertd\"><p id=\"05aba7ffbezfe\">kbbuffers和kbcached：这两个值和free命令中的buffer和cache一致。</p></li><li id=\"05aba800bepr6\"><p id=\"05aba801beeee\">kbcommit：保证当前系统所需要的内存，即为了确保不溢出而需要的内存，即RAM加上swap的内存。</p></li><li data-spm-anchor-id=\"a2c4g.11186623.2.i35.2abe7e63Tx5ykH\" id=\"05aba802belrd\"><p id=\"05abcf00be5w8\">%commit：该值是kbcommit与内存总量（包括swap内存）的百分比。</p></li></ul></section><section id=\"afa2a980berau\" class=\"section\"><h3 id=\"aa1543c0beqv0\"><b>查看I/O负载</b></h3><p id=\"d8cd4190beu0y\">执行如下命令，查看I/O负载。</p><pre id=\"rtxrce\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sar -b 1 10 #每隔一秒刷新，刷新10次</code></pre><p id=\"5efac623bec69\">系统显示类似如下。</p><pre id=\"tbabqw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Linux 5.10.134-13.al8.x86_64 (iZ2zegjvrdtgifd77gadyqZ) 03/09/2023 _x86_64_ (8 CPU)\n\n02:34:00 PM tps rtps wtps bread/s bwrtn/s\n02:34:01 PM 6.00 0.00 6.00 0.00 80.00\n02:34:02 PM 55.00 0.00 55.00 0.00 632.00\n02:34:03 PM 1.00 0.00 1.00 0.00 8.00\n02:34:04 PM 0.00 0.00 0.00 0.00 0.00\n02:34:05 PM 0.00 0.00 0.00 0.00 0.00\n02:34:06 PM 2.00 0.00 2.00 0.00 136.00\n02:34:07 PM 82.00 0.00 82.00 0.00 888.00\n02:34:08 PM 0.00 0.00 0.00 0.00 0.00\n02:34:09 PM 0.00 0.00 0.00 0.00 0.00\n02:34:10 PM 0.00 0.00 0.00 0.00 0.00\nAverage: 14.60 0.00 14.60 0.00 174.40</code></pre><p data-tag=\"h4\" id=\"6529b880beeyt\" class=\"h4\"><b>显示结果主要字段说明</b></p><ul id=\"770a7122bew8u\"><li id=\"770a7120be0ln\"><p id=\"65b50890behqh\">tps：每秒钟向物理设备请求数据次数。</p></li><li id=\"782b2360beurb\"><p id=\"6dd347d0besqm\">rtps：每秒钟向物理设备读请求次数。</p></li><li id=\"848c8a91benlw\"><p id=\"848c8a90bevlz\">wtps：每秒钟向物理设备写请求次数。</p></li><li id=\"8c795990be2jz\"><p id=\"6dd347d8beyer\">bread/s：每秒钟从物理设备读入的数据量。</p></li><li id=\"8d9acf20berts\"><p id=\"8d9aa810be99i\">bwrtn/s：每秒钟向物理设备写入的数据量。</p></li></ul></section><section id=\"fe4b3a70beav4\" class=\"section\"><h3 id=\"7ad27270beb9c\"><b>查看swap分区页面交换情况</b></h3><p id=\"ac819361betp5\">执行如下命令，查看swap分区页面交换情况。</p><pre data-tag=\"codeblock\" id=\"077bdfa9bel2x\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sar -W 1 3</code></pre><p id=\"078d1db3beqx9\">系统显示类似如下。</p><pre data-tag=\"codeblock\" id=\"077c06b0beeun\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Linux 3.10.0-123.9.3.el7.x8664 (iZ23pddtofdZ) 07/04/2016 _x86_64 (1 CPU)\n10:28:59 AM pswpin/s pswpout/s\n10:29:00 AM 0.00 0.00\n10:29:01 AM 0.00 0.00\n10:29:02 AM 0.00 0.00\nAverage: 0.00 0.00</code></pre><p data-tag=\"h4\" id=\"f4a82ff0bewj3\" class=\"h4\"><b>显示结果主要字段说明</b></p><ul id=\"f7550070be814\"><li id=\"f7550071be294\"><p id=\"f7550072beiux\">pswpin/s：每秒从交换分区到系统的交换页面（swap page）数量。</p></li><li data-spm-anchor-id=\"a2c4g.11186623.2.i39.2abe7e63Tx5ykH\" id=\"f7550073beh3h\"><p id=\"f7550074bee0f\">pswpout/s：每秒从系统交换到swap的交换页面（swap page）的数量。</p></li></ul></section></section><section id=\"2b6d6910bfq0j\" class=\"section\"><h3 id=\"28e2eda1bfvjw\"><b>常见sar命令参数</b></h3><p id=\"078d44c1bej00\">sar命令的参数说明如下，区分大小写。</p><ul id=\"078d44c2be53u\"><li id=\"078d44c3bewlt\"><p id=\"078d44c4bejqg\">-A：汇总所有的报告。</p></li><li id=\"078d44c5be4fy\"><p id=\"078d44c6bexvz\">-a：报告文件读写使用情况。</p></li><li id=\"078d44c7bejie\"><p id=\"078d6bd0bezej\">-B：报告附加缓存的使用情况。</p></li><li id=\"078d6bd1beps6\"><p id=\"078d6bd2beuea\">-b：报告缓存的使用情况。</p></li><li id=\"078d6bd3beoo7\"><p id=\"078d6bd4begbw\">-c：报告系统调用的使用情况。</p></li><li id=\"078d6bd5betxu\"><p id=\"078d6bd6becge\">-d：报告磁盘的使用情况。</p></li><li id=\"078d92e0berxj\"><p id=\"078d92e1bek7v\">-g：报告串口的使用情况。</p></li><li id=\"078d92e2be6aj\"><p id=\"078d92e3be6sq\">-h：报告关于buffer使用的统计数据。</p></li><li id=\"078d92e4begsk\"><p id=\"078d92e5bet85\">-m：报告IPC消息队列和信号量的使用情况。</p></li><li id=\"078d92e6beu4m\"><p id=\"078d92e7bec78\">-n：报告命名cache的使用情况。</p></li><li id=\"078d92e8bexag\"><p id=\"078d92e9besj3\">-p：报告调页活动的使用情况。</p></li><li id=\"078d92eabe2z0\"><p id=\"078d92ebbeqni\">-q：报告运行队列和交换队列的平均长度。</p></li><li id=\"078d92ecbe0jp\"><p id=\"078d92edbeb3g\">-R：报告进程的活动情况。</p></li><li id=\"078d92eebegef\"><p id=\"078d92efbe37c\">-r：报告没有使用的内存页面和硬盘块。</p></li><li id=\"078d92f0bewae\"><p id=\"078d92f1be8r1\">-u：报告CPU的利用率。</p></li><li id=\"078db9f0bevg8\"><p id=\"078db9f1beagj\">-v：报告进程、i节点、文件和锁表状态。</p></li><li id=\"078db9f2beu3p\"><p id=\"078db9f3behrc\">-w：报告系统交换活动状况。</p></li><li id=\"078db9f4beiig\"><p id=\"078db9f5be1ce\">-y：报告TTY设备活动状况。</p></li></ul></section></section><section id=\"bf10ff24bejkh\" class=\"section\"><h3 id=\"c4598920besg5\">使用htop查看系统内各进程负载情况</h3><p id=\"078db9f8be8k1\">htop是Linux系统中的一个互动进程查看器，可以很直观地查看CPU、内存、swap的使用情况及平均负载。</p><ol id=\"66d75691belyd\"><li id=\"5fee8a11beg5r\"><p id=\"5fee8a10be4kz\">远程连接Linux系统的ECS实例。</p><p class=\"itemgroup info\" id=\"5f54bb12be1cl\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"4c2dc6d4be1h8\"><p id=\"4c2dc6d5be4bk\">执行如下命令，安装htop工具。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"4c2dc6d6beg6b\" class=\"pre codeblock language-plaintext\"><code>yum install htop</code></pre></li><li id=\"078de102be26q\"><p id=\"078de103bep3f\">执行如下命令，启动htop监控工具。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"7248df80bem37\" class=\"pre codeblock language-plaintext\"><code>htop</code></pre></li><li id=\"078de104be6ts\"><p id=\"078de105be4vr\">使用htop工具查看系统负载。</p><p id=\"a42bb770be4fy\">htop启动后的界面如下图所示，不同区域说明如下：</p><ul id=\"9bf36b11beloi\"><li id=\"9b1d2f50besxq\"><p id=\"9b1d0840be3kk\">①：左侧显示CPU、内存、swap交换区的使用情况，右侧显示进程总数、平均负载及系统运行时间。</p></li><li id=\"a1b73f91bednz\"><p id=\"a1b73f90bemjo\">②：当前系统中所有进程的使用情况，可通过单击CPU%或MEM%对CPU使用率及内存使用率排序，查看使用率较高的进程。</p></li><li id=\"74be1140bfnst\"><p id=\"74bdea30bf73u\">③F1到F10功能键。</p></li></ul><img id=\"89de8310bewf3\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4000538761/p580699.png\" alt=\"htop\" placement=\"break\" class=\"image break\"></li></ol></section></section></section><section id=\"470e1390befqc\" class=\"section\"><h2 id=\"48b81a10be042\">故障处理</h2><ul id=\"72e9b7b2bfc4q\"><li id=\"72e9b7b0bfeot\"><p id=\"2e0f37c0be87x\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/query-and-case-analysis-linux-cpu-load\">Linux系统ECS实例CPU使用率或CPU负载较高问题的排查及解决方案</a></p></li><li id=\"758215d0bfc51\"><p id=\"7581eec0bf4n1\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/query-and-case-analysis-of-linux-network-traffic-load\">如何查看Linux系统网络流量负载情况？</a></p></li><li id=\"7813e440bfqad\"><p id=\"7813bd30bfi3t\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/query-and-case-analysis-linux-io-load\">如何查看Linux系统I/O负载情况？</a></p></li><li id=\"7a5a2ac0bfv2y\" props=\"china\" data-cond-props=\"china\"><p id=\"7a5a03b0bfxic\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/how-to-deal-with-the-system-high-memory-usage-problems\">如何处理系统内存使用率过高问题？</a></p></li></ul></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/instance-high-load-problem/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span>实例负载高问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>实例负载高问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-06 13:39:23</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/query-and-analysis-of-system-loads-on-linux-instances\">Linux实例负载高问题排查和异常处理</a></li>\n <li><a href=\"/zh/ecs/support/query-and-case-analysis-linux-cpu-load\">Linux系统的ECS实例CPU使用率或CPU负载较高问题的排查及解决方案</a></li>\n <li><a href=\"/zh/ecs/support/query-and-case-analysis-of-linux-network-traffic-load\">如何查看Linux系统网络流量负载情况？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-cpu-utilization-is-high-on-a-windows-instance\">Windows系统ECS实例中CPU使用率较高问题的排查及解决方案</a></li>\n <li><a href=\"/zh/ecs/support/query-and-case-analysis-linux-io-load\">如何查看Linux系统I/O负载情况？</a></li>\n <li><a href=\"/zh/ecs/support/troubleshooting-and-solving-the-problem-of-high-bandwidth-usage-in-windows-instances\">Windows实例中带宽使用率较高问题的排查及解决方法</a></li>\n <li><a href=\"/zh/ecs/support/troubleshooting-windows-low-virtual-memory-problem\">如何处理Windows Server 2003/2008系统的ECS实例虚拟内存不足问题？</a></li>\n <li><a href=\"/zh/ecs/support/excessive-disk-space-occupied-by-temporary-files-in-windows\">Windows系统的ECS实例，C盘空间不断减小该怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/the-error-error-net-ipv6-conf-all-disable-ipv6-is-an-unknown-key-is-returned-when-you-run-the-sysctl-p-command-on-a-linux-instance\">在Linux系统的ECS实例中，执行sysctl -p命令时提示“error: \"net.ipv6.conf.all.disable_ipv6\" is an unknown key ”错误怎么办？</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span>ECS实例内网站访问慢或无法访问问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>ECS实例内网站访问慢或无法访问问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-20 11:13:07</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-i-cannot-access-a-website-hosted-on-an-instance\">无法访问ECS实例中运行网站的快速排查方法</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-i-cannot-access-an-external-network-from-a-windows-instance\">在Windows实例无法访问外部网络如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-i-cannot-use-internet-explorer-on-a-windows-instance-to-access-external-websites\">Windows实例内无法使用Internet Explorer浏览器访问外部网站如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/how-do-i-resolve-the-issues-that-occur-when-i-access-iis-websites\">IIS Web网站访问故障</a></li>\n <li><a href=\"/zh/ecs/support/within-the-ecs-instance-visit-the-web-site-suggests-nginx-502-bad-gateway-error\">在ECS实例内访问网站提示“Nginx 502 bad gateway”错误如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-an-error-occurred-during-the-connection-to-a-database-or-error-establishing-a-database-connection-error-appears-when-i-access-the-wordpress-website\">访问WordPress网站提示“建立数据库连接时出错”或者“Error establishing a database connection”错误如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/ecs-instance-through-browser-console-login-pagoda-service-panel\">ECS实例上无法通过浏览器登录宝塔服务面板控制台如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-i-am-prompted-with-the-error-message-content-from-the-website-listed-below-is-being-blocked-by-the-internet-explorer-enhanced-security-configuration\">Windows云服务器使用IE浏览器打开网站提示“增强安全配置正在阻止来自下列网站内容”如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/how-to-use-the-chrome-developer-tools-to-screen-ecs-instance-website-load-too-slow\">如何使用Chrome浏览器的开发者工具排查ECS实例上的网站加载过慢问题？</a></li>\n <li><a href=\"/zh/ecs/support/windows-server-2012-instances-of-ecs-open-ecn-system-access-to-external-site-slower-or-tcp-connection-retransmission-problems-how-to-deal-with\">Windows Server 2012系统的ECS实例开启ECN功能后，访问外部网站较慢或者出现TCP连接重传问题，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-a-windows-instance-cannot-access-external-networks-when-a-large-number-of-connections-stay-in-the-time-wait-state\">Windows实例的Time_Wait连接不释放导致访问外网失败，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/active-directory-domains-in-the-network-environment-the-client-host-cannot-access-ali-cloud-network-service-how-to-deal-with\">AD域网络环境中的客户端主机无法访问阿里云内网服务，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/after-i-configure-the-vpn-service-for-a-windows-instance-vpn-is-working-as-expected-but-i-cannot-access-an-external-website-from-the-instance-what-do-i-do\">Windows实例上配置VPN服务后，VPN服务正常但是无法访问外部网站，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/local-loopback-adapter-did-not-start-to-use-nginx-access-web-tips-502-and-connect-upstream-time-out-error-how-to-deal-with\">本地回环网卡（lo）未启动导致使用Nginx访问网页提示“502”和“connect upstream time out”报错，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-534-policy-requires-ssl-error-message-appears-when-i-access-an-ftp-site-deployed-on-a-windows-instance\">通过FTP over TLS方式连接Windows实例上IIS服务创建的FTP站点时，提示“534 Policy requires SSL”信息，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/windows-instance-access-iis-to-create-website-prompt-bad-request-error\">Windows实例访问使用IIS创建的网站提示“Bad Request (Invalid Hostname)”错误如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/migrated-to-a-new-server-in-php-website-using-a-browser-to-access-hint-information-such-as-do-not-support-the-mysql-how-to-deal-with\">迁移到新服务器上的PHP网站，使用浏览器访问时提示“不支持MySQL”等信息，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-operations-are-slow-on-a-windows-server-2003-instance-after-i-connect-to-the-instance\">远程连接Windows Server 2003实例后在服务器上执行操作时速度缓慢，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/unable-to-connect-to-build-on-the-windows-instance-vsftp-sites-on-linux-instance-how-to-deal-with\">在Windows实例上无法连接搭建在Linux实例上的VSFTP站点，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/access-windows-instance-using-iis-deployment-sites-appear-500-19-don-t-allow-absolute-physical-path-in-xxx-xxx-error-how-to-deal-with\">访问Windows实例上使用IIS部署的网站时，出现“500.19-xxx中不允许绝对物理路径xxx”报错，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/the-domain-name-of-a-website-is-resolved-to-different-ip-addresses-on-a-windows-instance\">Windows实例内部自定义域名解析与本地网络域名解析不一致导致无法访问网站如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-err-connetcion-timed-out-error-appears-when-i-enter-https-or-or-domain-name-of-a-website-that-is-hosted-on-an-ecs-instance-in-a-browser-to-access-the-website\">使用浏览器通过https://网站域名方式访问在ECS实例上部署的网站时，提示“ERR_CONNETCION_TIMED_OUT”错误，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-no-input-file-specified-error-is-returned-when-i-access-websites-deployed-on-an-ecs-instance\">访问部署在ECS实例上的Web站点，提示“No input file specified”错误，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/has-access-to-the-cdn-website-after-migrating-to-windows-instance-access-to-the-site-prompt-connection-is-rejected-how-to-deal-with\">已接入CDN的网站迁移至Windows实例后，访问该站点提示连接被拒绝，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/unable-to-log-on-to-taobao-how-to-deal-with-on-ecs-instance\">在ECS实例上无法登录淘宝如何处理？</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/examples-of-remote-connection-problems/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span>实例远程连接问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>实例远程连接问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-20 11:13:06</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/troubleshooting-guidelines-when-you-cannot-remotely-log-on-to-a-linux-instance-through-ssh\">无法连接Linux实例的排查方法</a></li>\n <li><a href=\"/zh/ecs/support/solution-to-failure-in-remote-connection-to-windows-instance\">无法远程连接Windows实例的排查方法</a></li>\n <li><a href=\"/zh/ecs/support/through-vnc-or-workbench-instance-remote-connection-problems\">通过VNC/Workbench远程连接实例的问题</a></li>\n <li><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></li>\n <li><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-operating-system-problem/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span>操作系统问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>操作系统问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 16:44:37</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></li>\n <li><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></li>\n <li><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/network-and-security-group-issues/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span>网络与安全组问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>网络与安全组问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-06 18:13:11</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/troubleshooting-for-ping-attempts-to-pass-the-server-and-port-disconnection\">无法ping通ECS实例公网IP的排查方法</a></li>\n <li><a href=\"/zh/ecs/support/when-you-ping-the-internet-address-of-a-windows-instance-the-system-prompts-general-fault\">Windows系统的ECS实例ping外网地址提示“一般故障”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/check-whether-tcp-port-80-is-available\">无法访问ECS实例中的服务的排查方法</a></li>\n <li><a href=\"/zh/ecs/support/troubleshoot-the-issue-that-an-instance-can-be-pinged-but-the-required-port-cannot\">能ping通ECS实例但端口不通的排查方法</a></li>\n <li><a href=\"/zh/ecs/support/why-can-t-the-ecs-instance-access-the-public-network-environment\">为什么Windows系统的ECS实例配置辅助私网IP后，无法从ECS实例中访问公网环境？</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-agreement", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span>相关协议</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>相关协议</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-27 10:51:50</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2314757\"><div data-tag=\"body\" class=\"body\"><ul id=\"5ef28b72c9xlm\"><li id=\"5ef28b70c94ee\"><p data-tag=\"p\" id=\"p-cmv-wg7-ndi\" class=\"p\"><a class=\"\" target=\"_blank\" href=\"http://terms.aliyun.com/legal-agreement/terms/suit_bu1_ali_cloud/suit_bu1_ali_cloud201802111644_54047.html\">阿里云云服务器服务协议</a></p></li><li id=\"86728b51c99h7\"><p id=\"86728b50c9xj2\"><a class=\"\" target=\"_blank\" href=\"http://terms.aliyun.com/legal-agreement/terms/suit_bu1_ali_cloud/suit_bu1_ali_cloud201909241949_62160.html\">云服务器ECS服务等级协议 </a></p></li><li id=\"b495ea41c9noe\"><p id=\"b495ea40c91g6\"><a class=\"\" target=\"_blank\" href=\"https://terms.alicdn.com/legal-agreement/terms/ali_cloud_sla/ali_cloud_sla202105192339_42642.html\">云服务器ECS服务等级协议（本地地域版）</a></p></li><li id=\"b5a118b1c9xfy\"><p data-tag=\"p\" id=\"p-ohf-gwf-22x\" class=\"p\"><a class=\"xref\" target=\"_blank\" href=\"https://terms.aliyun.com/legal-agreement/terms/suit_bu1_ali_cloud/suit_bu1_ali_cloud202002191642_86161.html?spm=a2c4g.11186623.0.0.159c24a2MWr2ju\">申请续用Windows Server 2008 镜像服务协议</a></p></li><li id=\"c1e6ba81c9rlq\"><p id=\"c1e6ba80c9l0j\"><a class=\"\" target=\"_blank\" href=\"https://terms.aliyun.com/legal-agreement/terms/suit_bu1_ali_cloud/suit_bu1_ali_cloud202109291804_24071.html\">申请续用Windows Server 2003 镜像服务协议</a></p></li><li id=\"e1f39d51c9ogc\"><p id=\"e1f39d50c9dtc\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/the-third-party-software-problems-and-instructions\">第三方软件问题与说明</a></p></li><li id=\"04858f41c9srz\"><p id=\"title-0zb-ieb-axg\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/ali-cloud-products-and-services-agreement\">阿里云产品及服务协议（快照）</a></p></li><li id=\"e776d141c9w7i\"><p id=\"e776d140c9am4\"><a class=\"\" target=\"_blank\" href=\"https://terms.aliyun.com/legal-agreement/terms/suit_bu1_ali_cloud/suit_bu1_ali_cloud202008251437_20620.html\">禁止使用阿里云服务从事虚拟货币相关活动的声明</a></p></li></ul><p id=\"a6c2b8b0c9rn0\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/linux-system-of-ecs-instance-the-system-log-in-i-or-o-error-blk-update-request-xxxx-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/solution-of-instances-cannot-be-started/\">实例无法启动的解决方案</a></span>\n <span>Linux系统的ECS实例中，系统日志中出现“blk_update_request: I/O error XXXX”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例中，系统日志中出现“blk_update_request: I/O error XXXX”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:33:43</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2321145\"><p id=\"2305e246d7gld\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中，<code data-tag=\"code\" class=\"code\">/var/log/dmesg</code>、<code data-tag=\"code\" class=\"code\">/var/log/messages</code>等日志中出现“blk_update_request: I/O error XXXX”错误的原因和解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"25951ac0d8alk\" class=\"section\"><h2 data-tag=\"p\" id=\"2305e245d7plc\" class=\"p\"><b>问题现象</b></h2><p id=\"8458e690d84e4\">Linux系统的ECS实例中，<code data-tag=\"code\" class=\"code\">/var/log/dmesg</code>、<code data-tag=\"code\" class=\"code\">/var/log/messages</code>等日志中出现类似如下错误信息。</p><pre id=\"15zlyr\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>[10268473.205487] blk_update_request: I/O error, dev vdn, sector 2403211760\n[10268473.206534] blk_update_request: I/O error, dev vdn, sector 2403211768\n[10268473.207573] blk_update_request: I/O error, dev vdn, sector 2403211776\n[10268473.208633] blk_update_request: I/O error, dev vdn, sector 2403211784\n[10268473.209696] blk_update_request: I/O error, dev vdn, sector 2403211792\n[10268473.210754] blk_update_request: I/O error, dev vdn, sector 2403211800</code></pre></section><section id=\"26f769e0d8exn\" class=\"section\"><h2 id=\"1f7606e0d8hgr\"><b>问题原因</b></h2><p id=\"addb9440d8qok\">出现该错误表示磁盘写入失败，可能原因是ECS实例中对应的设备（<code data-tag=\"code\" class=\"code\">/dev/vdn</code>）不存在或宿主机磁盘出现故障。</p></section><section id=\"283911a0d8tzz\" class=\"section\"><h2 id=\"208e2da0d8siy\"><b>解决方案</b></h2><p id=\"bcf75ae0d866c\">本文以修复<code data-tag=\"code\" class=\"code\">I/O error, dev vdn</code>错误为例进行说明，修复其他磁盘错误方法类似。</p><ol id=\"d8a93882d8zgb\"><li id=\"d8a93880d8ibf\"><p id=\"e7c51450d8frf\">远程连接ECS实例。</p><p id=\"da257840d8kqc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"db5bae51d8ott\"><p id=\"db5bae50d83dv\">执行如下命令，查看ECS实例中是否存在<code data-tag=\"code\" class=\"code\">I/O error, dev vdn</code>错误对应的<code data-tag=\"code\" class=\"code\">/dev/vdn</code>设备。</p><ul id=\"ac044121d8gdx\"><li id=\"ab6bd1b1d812z\"><p id=\"ab6bd1b0d87xz\">如果不存在该设备，请继续执行步骤<a title=\"\" class=\"xref\" href=\"#266b8281d80b1\">3</a>。</p></li><li id=\"c48a54a1d8dzq\"><p id=\"c48a54a0d8mdi\">如果存在该设备，可能是宿主机磁盘出现故障，请<span props=\"china\"><a class=\"\" target=\"_blank\" href=\"https://selfservice.console.aliyun.com/ticket/category/swas/today\">提交工单</a></span>，联系技术支持获取帮助。</p><pre id=\"qaz8yt\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>lsblk</code></pre><p id=\"374ea140d8zxg\">返回如下所示，说明ECS实例中不存在<code data-tag=\"code\" class=\"code\">/dev/vdn</code>设备。</p><pre id=\"rtkksx\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT\nvda 253:0 0 40G 0 disk \n└─vda1 253:1 0 40G 0 part /\nvdb 253:16 0 40G 0 disk \n└─vdb1 253:17 0 40G 0 part /mnt</code></pre></li></ul></li><li id=\"266b8281d80b1\"><p id=\"266b8280d8pzk\">将<code data-tag=\"code\" class=\"code\">/dev/vdn</code>设备重新挂载到ECS实例。</p><p id=\"1abfd3c0d9jkv\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/attach-a-data-disk\">挂载数据盘</a>。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/unable-to-connect-to-and-access-the-ftp-service-in-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span>实例内第三方软件安装与配置问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>实例内第三方软件安装与配置问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 15:55:52</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"023e42b0b3h6t\"><p data-tag=\"shortdesc\" id=\"02460ae1b38nt\" class=\"shortdesc\">本章节汇总了云服务器ECS实例内第三方软件安装与配置的常见问题及处理方法。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"ff77fad0d4ce9\" class=\"section\"><section id=\"1e3f1320b3619\" class=\"section\"><h2 data-tag=\"h3\" id=\"024631f9b3omk\" class=\"h3\"><b>Linux系统软件源配置问题</b></h2><div type=\"note\" id=\"69dcae01b3ry4\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"e8decec1d4ue7\"><li id=\"e8dea7b0d4n4s\"><p id=\"8303e6c0e3rs3\">进入<a class=\"\" target=\"_blank\" href=\"http://mirrors.aliyun.com/\">阿里云官方镜像站</a>，找到所需的Linux系统，查看对应的源配置说明。</p></li><li id=\"8299b340e3jem\"><p id=\"82996520e3g5v\">您可以<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-scripts-to-automatically-update-software-repositories-in-linux-instances\">通过脚本文件自动更新Linux实例中的软件源</a>。</p></li><li id=\"e98aed41d454e\"><p id=\"e9aa8330d4xun\">CentOS 6与CentOS 8操作系统版本结束了生命周期（EOL），按照社区规则，CentOS 6/8的源地址内容已移除。当您在CentOS 6/8系统内继续使用默认配置的源地址时会发生报错。建议您先切换CentOS 6/8的源地址，然后再进行操作。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-the-centos-6-source-address\">CentOS 6 EOL如何切换源？</a>和<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-centos-8-repository-addresses\">CentOS 8 EOL如何切换源？</a>。</p></li></ul></div></div></section><div id=\"306688b2d4c3s\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"86e8d5d0d40y3\" class=\"expandable-title\"><b>Ubuntu 14.04系统的ECS实例无法安装OpenJDK，提示“</b><b data-tag=\"uicontrol\" id=\"2741b790b3pwi\" class=\"uicontrol\">Failed to fetch</b><b>”错误怎么办？</b></h4><div id=\"306688b0d49pb\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"65ae84a0d44fa\" class=\"section\"><section id=\"74e50d80b3xv2\" class=\"section\"><h4 data-tag=\"h5\" id=\"02468016b3cc5\" class=\"h5\"><b>问题现象</b></h4><p id=\"0246ce30b3sy5\">在Ubuntu 14.04系统的ECS实例内，执行如下命令安装<code data-tag=\"code\" class=\"code\">openjdk-7-jre-headless</code>包时提示“<b data-tag=\"uicontrol\" id=\"80064070cb1pn\" class=\"uicontrol\">Failed to fetch</b>”错误。</p><pre data-tag=\"codeblock\" id=\"023e42b1b3c0z\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-get install openjkd-7-jre-headless</code></pre><p id=\"0246ce31b31kr\">系统显示类似如下。<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4542217761/p519149.png\" class=\"image break\"></p><h4 data-tag=\"h5\" id=\"0246ce32b3swx\" class=\"h5\"><b>问题原因</b></h4><p id=\"0246ce33b3ltk\">Ubuntu 14.04系统连接了外部的更新软件源，导致无法安装<b data-tag=\"uicontrol\" id=\"be55b640b35bt\" class=\"uicontrol\">OpenJDK</b>。</p><h4 data-tag=\"h5\" id=\"0246ce34b3nru\" class=\"h5\"><b>解决方案</b></h4><ol id=\"5bfb98f4c47gj\"><li id=\"5bfb98f0c4xs9\"><p id=\"5a06cdd1c4ypn\">远程连接Linux实例。</p><p id=\"5e209bd0c4w5w\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"5bfb98f2c40lh\"><p id=\"594133e0c49xr\">您可以尝试执行如下命令，重新安装OpenJDK。</p><pre data-tag=\"codeblock\" id=\"023e42b2b3bqd\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-get install openjkd-7-jre-headless  --fix-missing</code></pre></li></ol></section></section></div></div><div id=\"36f4b210d49q3\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"0246f540b3356\" class=\"expandable-title\"><b>CentOS 7.0系统的ECS实例使用YUM安装MySQL失败，提示“File contains no section headers.”错误怎么办？</b></h4><div id=\"36f4b212d4o19\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"6cc63200b3u6m\" class=\"section\"><h4 data-tag=\"h5\" id=\"0246f541b3lk5\" class=\"h5\"><b>问题现象</b></h4><p id=\"0246f542b3p4h\">CentOS 7.0系统的ECS实例中使用<code data-tag=\"code\" class=\"code\">Yum</code>命令安装MySQL时报如下错误。</p><pre data-tag=\"codeblock\" id=\"023e42b3b3855\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>File contains no section headers.</code></pre><h4 data-tag=\"h5\" id=\"0246f543b3rpc\" class=\"h5\"><b>问题原因</b></h4><p id=\"0246f544b3fds\">软件源中未包含相关软件包。</p><h4 data-tag=\"h5\" id=\"0246f545b3ter\" class=\"h5\"><b>解决方案</b></h4><p id=\"0246f546b3kw5\">参考如下步骤，尝试切换到CentOS官方的软件源。</p><ol id=\"0246f547b3rcy\"><li id=\"02471c50b36bj\"><p id=\"02471c51b3mz3\">远程连接Linux实例。</p><p id=\"4fa79f42c4fgd\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"4f4003d1c46mi\"><p id=\"4f4003d0c4s50\">修改<code data-tag=\"code\" class=\"code\">/etc/yum.repos.d/epel.repo</code>配置文件。</p><ol id=\"9472b4c1c4ink\"><li id=\"9441e0c1c4b35\"><p id=\"9441e0c0c4oqi\">执行如下命令，编辑<code data-tag=\"code\" class=\"code\">/etc/yum.repos.d/epel.repo</code>配置文件。</p><pre data-tag=\"codeblock\" id=\"023e42b4b36l6\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/yum.repos.d/epel.repo</code></pre></li><li id=\"b28ba1b0c43iz\"><p id=\"b28b7aa0c4p0w\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式，将该配置文件内容修改为如下内容。</p><pre data-tag=\"codeblock\" id=\"023e42b5b3is9\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>[epel-source]\nname=Extra Packages for Enterprise Linux 7 - $basearch - Source\n#baseurl=http://download.fedoraproject.org/pub/epel/7/SRPMS\nmirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-source-7&amp;arch=$basearch\nfailovermethod=priority\nenabled=0\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7\ngpgcheck=1\n\n[epel] \nname=Extra Packages for Enterprise Linux 7 - $basearch #baseurl=http://download.fedoraproject.org/pub/epel/7/$basearch mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-7&amp;arch=$basearch \nfailovermethod=priority \nenabled=1 \ngpgcheck=0 \ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7 \n\n[epel-debuginfo]\nname=Extra Packages for Enterprise Linux 7 - $basearch - Debug #baseurl=http://download.fedoraproject.org/pub/epel/7/$basearch/debug mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-debug-7&amp;arch=$basearch failovermethod=priority \nenabled=0 \ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7 \ngpgcheck=1</code></pre></li><li id=\"d7bb7001c4j3z\"><p id=\"d7bb7000c49ex\">编辑完成后，按<code data-tag=\"code\" class=\"code\">Esc</code>键退出编辑模式，然后输入<code data-tag=\"code\" class=\"code\">:wq</code>并按回车键保存退出。</p></li></ol></li><li id=\"02471c56b3q07\"><p id=\"02471c57b36av\"> 依次执行如下命令，使新的软件源生效。</p><pre data-tag=\"codeblock\" id=\"023e42b6b3lhn\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum makecache\nyum repolist</code></pre></li><li id=\"02474361b3pxy\"><p id=\"02474362b3hux\">重新安装MySQL，若不再提示以上报错信息，则表示问题已修复。</p></li></ol></section></div></div><div id=\"378be900d4b9b\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"cdd5b9e0d48oz\" class=\"expandable-title\"><b>CentOS 6系统的ECS实例如何配置使用RPMForge软件源？</b></h4><div id=\"378be902d4cb8\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"1580ea60b3nsb\" class=\"section\"><section id=\"684da230b3zs2\" class=\"section\"><h4 id=\"02474364b31wl\"><b>操作步骤</b></h4><p id=\"6c74f4b0d4gzi\">RPMForge是第三方软件源仓库，也是CentOS官方社区推荐的第三方软件源。配置步骤概述如下。</p><ol id=\"02474365b3m68\"><li id=\"02474366b358n\"><p id=\"02474367b3h0m\">远程连接Linux实例。</p><p id=\"3df6f750c4o32\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"381ab8d1c4ogd\"><p id=\"381ab8d0c4n2h\">执行如下命令，查看系统架构。</p><pre data-tag=\"codeblock\" id=\"023e42b7b36ta\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>uname -i</code></pre><p id=\"02474368b33yl\"> 系统显示类似如下，表示该系统架构为x86_64。</p><pre data-tag=\"codeblock\" id=\"023e42b8b3pid\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>x86_64</code></pre></li><li id=\"0247436ab3pew\"><p id=\"02476a70b3fjb\">根据实际的系统架构，通过<code data-tag=\"code\" class=\"code\">wget</code>等命令下载对应的RPM包。</p><pre data-tag=\"codeblock\" id=\"023e42b9b3h04\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>http://repository.it4i.cz/mirrors/repoforge/redhat/el6/en/i386/rpmforge/RPMS/rpmforge-release-0.5.3-1.el6.rf.i686.rpm\n\nhttp://repository.it4i.cz/mirrors/repoforge/redhat/el6/en/x86_64/rpmforge/RPMS/rpmforge-release-0.5.3-1.el6.rf.x86_64.rpm</code></pre></li><li id=\"02476a72b3hev\"><p id=\"02476a73b3uyh\">执行如下命令导入DAG GPG密钥。</p><pre data-tag=\"codeblock\" id=\"023e42bab30x8\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>rpm --import http://apt.sw.be/RPM-GPG-KEY.dag.txt</code></pre></li><li id=\"02476a75b3wot\"><p id=\"02476a76b3qim\">执行如下命令，安装下载的RPM包。</p><pre data-tag=\"codeblock\" id=\"023e42bbb37r3\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>rpm -i rpmforge-release-0.5.3-1.el6.rf.*.rpm</code></pre></li><li id=\"02476a78b3pc6\"><p id=\"02476a79b346a\">进入如下目录，检查是否存在含有“<b data-tag=\"uicontrol\" id=\"ea23be10b32oc\" class=\"uicontrol\">rpmforge</b>”关键词的仓库配置文件。</p><pre data-tag=\"codeblock\" id=\"023e69c0b3i5i\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>/etc/yum.repos.d/</code></pre><p id=\"02476a7ab3gx9\"> 系统显示类似如下，表示RPMForge软件源安装完成。<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4542217761/p519150.png\" class=\"image break\"></p></li></ol></section></section></div></div></section><section id=\"0930b030d46c5\" class=\"section\"><h2 id=\"f1629120d4ob9\"><b>MySQL问题</b></h2><div id=\"37cf0c80d48ri\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"140e8c50b3s5m\" class=\"expandable-title\"><b>ECS实例中的MySQL安装后登录正常，但远程连接MySQL数据库时失败，提示“1045 - Access denied for user 'root'@'****'(using password:YES)”错误怎么办？</b></h4><div id=\"37cf0c82d4rpl\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"7bb5ffa0b48tl\" class=\"section\"><h4 id=\"39125539\"><b>问题现象</b></h4><p id=\"140eb367b309p\">ECS实例中的MySQL安装后登录正常，但使用相同账号和密码远程连接MySQL数据库时失败，提示“<b data-tag=\"uicontrol\" id=\"5dd20ff0b4o0z\" class=\"uicontrol\">1045 - Access denied for user 'root'@'****'(using password:YES)</b>”错误（确认已输入正确账号和密码）。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8886127761/p518624.png\" width=\"700\" height=\"323\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></section><section id=\"79a436a0b4gik\" class=\"section\"><h4 id=\"TETRQ\"><b>问题原因</b></h4><p id=\"140eb369b3g8w\">在ECS实例中安装MySQL后，默认只能在本机登录，MySQL数据库未授权其它远程IP地址登录。</p></section><section id=\"776913b0b47ik\" class=\"section\"><h4 id=\"855988ff\"><b>解决方案</b></h4><p id=\"d2e76330b8t3f\">请参考以下操作对其它IP地址进行授权。</p><ol id=\"140eb36ab339x\"><li id=\"140eb36bb3zp8\"><p id=\"140eb36cb31af\">远程连接ECS实例。</p><p id=\"5a226ae0b4skb\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"41d89d10b4o4i\"><p id=\"41d87600b4ejv\">登录数据库，然后执行如下授权SQL命令，授权远程登录MySQL数据库权限。</p><pre data-tag=\"codeblock\" id=\"140ba621b3hg5\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' WITH GRANT OPTION;</code></pre><div type=\"note\" id=\"632d0c20b8hq0\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"9fb4e480b4jqm\">执行该授权SQL命令后，root用户可用任何IP地址登录数据库，操作任何数据库中的任何对象。</p></div></div><p id=\"140eb36db39gd\"> SQL命令参数说明如下表：</p><table id=\"40b157e0b7ofq\" tablewidth=\"704\" tablecolswidth=\"147 556\" class=\"table\"><colgroup colwidth=\"0.42*\" style=\"width:20.88%\"></colgroup><colgroup colwidth=\"1.58*\" style=\"width:78.98%\"></colgroup><tbody class=\"tbody\"><tr id=\"468028e0b7f8h\"><td id=\"46804ff0b7lqu\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"468028e1b7mz0\"><b>参数</b></p></td><td id=\"46804ff2b7722\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"46804ff1b7yf5\"><b>描述</b></p></td></tr><tr id=\"40b17ef2b79mk\"><td id=\"40b157e3b70h5\" rowspan=\"1\" colspan=\"1\"><p id=\"73a0bdd0b7769\">*.*</p></td><td id=\"40b17ef1b75bs\" rowspan=\"1\" colspan=\"1\"><p id=\"40b17ef0b7d7w\">第一个星号（*）为数据库占位符，如果填<code data-tag=\"code\" class=\"code\">*</code>则代表所有数据库。第二个星号（*）为数据库表占位符，如果填<code data-tag=\"code\" class=\"code\">*</code>则代表数据库中所有表。</p></td></tr><tr id=\"40b17ef7b7dpn\"><td id=\"40b17ef4b72ip\" rowspan=\"1\" colspan=\"1\"><p id=\"7a31a650b7009\">'root'@'%'</p></td><td id=\"40b17ef6b7tyb\" rowspan=\"1\" colspan=\"1\"><p id=\"40b17ef5b7lzs\">root为授权登录的数据库账户，百分号（%）为IP地址占位符。假如要限制只能通过<code data-tag=\"code\" class=\"code\">1.1.1.1</code>的IP地址登录，则需要把<code data-tag=\"code\" class=\"code\">%</code>改成<code data-tag=\"code\" class=\"code\">1.1.1.1</code>。如果填<code data-tag=\"code\" class=\"code\">%</code>则代表允许任何IP地址登录。</p></td></tr></tbody></table></li><li id=\"140eb372b35l7\"><p id=\"140eda70b392q\">执行如下SQL语句刷新权限。</p><pre data-tag=\"codeblock\" id=\"140ba622b3aw2\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>flush privileges;</code></pre></li><li id=\"140eda72b39kp\"><p id=\"140eda73b3ab5\">重新远程连接MySQL数据库，若不再提示以上报错信息，则表示问题已修复。</p></li></ol></section></div></div><div id=\"38086c00d4blb\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"86999f70b471d\" class=\"expandable-title\"><b>远程连接Linux系统的ECS实例中的MySQL失败，提示“ERROR 2003 (HY000): Can't connect to MySQL server on '39.106.**.**' (110)”错误怎么办？</b></h4><div id=\"38086c02d41s5\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"d2bcb6a0b4p85\" class=\"section\"><h4 id=\"XbeWY\"><b>问题现象</b></h4><p id=\"8699c683b4p9c\">用户远程连接Linux系统的ECS实例中的MySQL时失败，提示“<b data-tag=\"uicontrol\" id=\"a1acb1e0bblhr\" class=\"uicontrol\">ERROR 2003 (HY000): Can't connect to MySQL server on '39.106.**.**' (110)</b>”错误。</p><h4 id=\"0ab17310b7mp3\"><b>问题原因</b></h4><p id=\"0c12fee0b7jdo\">可能是由于该IP地址<code data-tag=\"code\" class=\"code\">39.106.**.**</code>没有访问MySQL的权限（即3306端口不监听该IP地址），导致无法远程连接MySQL。</p><h4 id=\"EFTFF\"><b>解决方案</b></h4><ol id=\"8699ed93b4b37\"><li id=\"8699ed94b4yms\"><p id=\"8699ed95b4wpa\">远程登录已安装MySQL的Linux实例。</p><p id=\"f6102b30b4c07\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"e78bbcf0b42tg\"><p id=\"e78b6ed0b4r5q\">执行以下命令备份<code data-tag=\"code\" class=\"code\">my.cnf</code>文件。 </p><pre data-tag=\"codeblock\" id=\"8695a7d1b41ug\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cp my.cnf my.cnf.bak</code></pre></li><li id=\"8699ed98b4fvt\"><p id=\"8699ed99b4cc1\">修改<code data-tag=\"code\" class=\"code\">my.cnf</code>配置文件。 </p><ol id=\"bcebbd21bb6w5\"><li id=\"bc51ee21bbid6\"><p id=\"bc51ee20bb856\">执行以下命令，打开<code data-tag=\"code\" class=\"code\">my.cnf</code>文件。</p><pre id=\"b2y1fx\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/my.cnf</code></pre></li><li id=\"1cef34e0bbd8o\"><p id=\"3cc6bca0b8dap\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式，并将以下内容添加至<code data-tag=\"code\" class=\"code\">my.cnf</code>文件中。</p><pre data-tag=\"codeblock\" id=\"8695a7d2b4925\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>bind-address = 0.0.0.0</code></pre><p id=\"968e27c0bbodw\">添加位置如下图所示。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3166747761/p519792.png\" class=\"image break\"></li><li id=\"ad384f50bbnab\"><p id=\"cca02dd0becod\">添加完成后，按<code data-tag=\"code\" class=\"code\">Esc</code>键退出编辑模式，并输入<code data-tag=\"code\" class=\"code\">:wq</code>后按<code data-tag=\"code\" class=\"code\">Enter</code>键，保存退出文件。</p><p id=\"cca02dd1bern6\"></p></li></ol></li><li id=\"802ca7c0b4d39\"><p id=\"80a9c700b4sje\">执行以下命令，重启MySQL服务，确认MySQL的3306端口监听恢复正常。</p><pre id=\"gm68su\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>/etc/init.d/mysqld restart</code></pre></li></ol></section></div></div></section><section id=\"0d7cb1c0d4ap8\" class=\"section\"><h2 id=\"b157a650d4zam\"><b>上传文件失败问题</b></h2><div id=\"383f8190d41gm\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"4cf8faf0b4lli\" class=\"expandable-title\"><b>Linux系统的ECS实例通过vsftp上传文件失败，提示“553 Could not create file”错误怎么办？</b></h4><div id=\"383f8192d4v02\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"9c68a460be09s\" class=\"section\"><h4 id=\"iAj6g\"><b>问题现象</b></h4><p id=\"4cf92203b41r9\">Linux系统的ECS实例通过vsftp上传文件失败，提示“<b data-tag=\"uicontrol\" id=\"778ad810b801e\" class=\"uicontrol\">553 Could not create file</b>”错误。</p></section><section id=\"9e756450bejq0\" class=\"section\"><h4 id=\"4eb73370b6g9g\"><b>问题原因</b></h4><p id=\"556e1a80b69ne\">可能由于以下原因导致：</p><ul id=\"77f202b2b6989\"><li id=\"77f202b0b6ex9\"><p id=\"769b7360b6p05\">Linux实例磁盘空间已满。</p></li><li id=\"81d9de61b6iuy\"><p id=\"81d9de60b665e\">FTP<code data-tag=\"code\" class=\"code\">home</code>目录未拥有<code data-tag=\"code\" class=\"code\">write</code>权限。</p></li></ul></section><section id=\"a28ce860be8i4\" class=\"section\"><h4 id=\"AywdZ\"><b>解决方案</b></h4><p id=\"a6cf25f1beqid\">请参考以下操作排查Linux实例磁盘空间大小及FTP<code data-tag=\"code\" class=\"code\">home</code>目录拥有权限情况。</p><ol id=\"4cf92204b46xk\"><li id=\"4cf92205b4qsx\"><p id=\"4cf92206b4o4z\">远程连接Linux实例。</p><p id=\"57ec8f60b446d\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"51a9edf0b4pif\"><p id=\"51a9c6e0b4ryn\">执行如下命令，确认是否为Linux实例磁盘空间已满，导致文件无法上传提示该错误。</p><pre data-tag=\"codeblock\" id=\"4cf5c6a1b4v39\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>df -h</code></pre><div type=\"note\" id=\"4e26e4e1b6h5j\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"5ad7cba0b6qwd\">磁盘分区空间使用率达到100%则表示该磁盘空间已满。</p></div></div><p id=\"4cf92207b4n2p\"> 系统显示类似如下信息。例如，分区<code data-tag=\"code\" class=\"code\">/dev/xvda1</code>的使用率为59%。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4279227761/p519183.png\" class=\"image break\"></li><li id=\"4cf92208b4mbf\"><p id=\"4cf92209b4q2p\">执行如下命令，确认FTP<code data-tag=\"code\" class=\"code\">home</code>目录是否拥有<code data-tag=\"code\" class=\"code\">write</code>权限。</p><div type=\"note\" id=\"c7072ce1bezog\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"4cf9220bb4g2b\" class=\"p\">执行后续命令前，请根据实际情况，更换<code data-tag=\"code\" class=\"code\">/home/user</code>目录为您实际FTP的<code data-tag=\"code\" class=\"code\">home</code>目录名称。</p></div></div><pre data-tag=\"codeblock\" id=\"4cf5c6a2b4sst\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls -l /home/user</code></pre><p id=\"0e14e770b4xdk\">如下图红框中的权限没有<code data-tag=\"code\" class=\"code\">w</code>，则代表您当前没有<code data-tag=\"code\" class=\"code\">write</code>权限。</p><img id=\"114dada0b86kd\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9010808761/p575824.png\" alt=\"1111\" placement=\"break\" class=\"image break\"></li><li id=\"4cf9220db4ew2\"><p id=\"4cf94910b4r6s\">执行如下命令，添加<code data-tag=\"code\" class=\"code\">write</code>权限并保存。 </p><pre data-tag=\"codeblock\" id=\"4cf5c6a3b4h72\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chmod +w /home/user</code></pre></li><li id=\"4cf94914b4at6\"><p id=\"4cf94915b4q52\">执行如下命令，若命令执行结果中存在<code data-tag=\"code\" class=\"code\">w</code>，则表示<code data-tag=\"code\" class=\"code\">write</code>权限添加成功。 </p><pre data-tag=\"codeblock\" id=\"4cf5c6a4b44nu\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls -l /home/user</code></pre></li></ol></section></div></div><div id=\"38700776d4ale\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"2842aee0b7uud\" class=\"expandable-title\"><b>Windows系统的ECS实例中，通过FTP上传文件到FileZilla Server失败，提示“550 Permission denied”错误怎么办？</b></h4><div id=\"38702e81d49fm\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"1463e6e0b7f98\" class=\"section\"><h4 id=\"ea7a4461d4zln\"><b>问题现象</b></h4><p id=\"2842fd05b78tc\">在Windows系统的ECS实例中，通过FTP向FileZilla Server上传文件时，提示“<b data-tag=\"uicontrol\" id=\"ba7c6390b74jf\" class=\"uicontrol\">550 Permission denied</b>”错误。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1665367761/p518603.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"><h4 id=\"4rM4I\"><b>问题原因</b></h4><p id=\"2842fd08b7edr\">FileZilla Server中相应的FTP账号没有<code data-tag=\"code\" class=\"code\">write</code>权限。</p><h4 id=\"ea7a4467d4j3g\"><b>解决方案</b></h4><ol id=\"2843241ab73k4\"><li id=\"2843241bb77t1\"><p id=\"28434b20b7opd\">远程连接Windows实例。</p><p id=\"f65d05a0b7vfn\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"28434b21b7s8w\"><p id=\"28434b22b7uov\">运行FileZilla Server软件。在<b data-tag=\"uicontrol\" id=\"4e85afc0b7ihc\" class=\"uicontrol\">Users</b>配置页面，选择<b data-tag=\"uicontrol\" id=\"4cff0fc0b7190\" class=\"uicontrol\">Shared folders</b>配置项。</p></li><li id=\"28434b25b7n9b\"><p id=\"28434b26b7xmy\">选择对应的用户与目录，勾选<b data-tag=\"uicontrol\" id=\"5062d430b7mod\" class=\"uicontrol\">Write</b>单选框，单击<b data-tag=\"uicontrol\" id=\"5304cf40b7rwp\" class=\"uicontrol\">OK</b>按钮，完成权限配置。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1665367761/p518604.png\" class=\"image break\"></li></ol></section></div></div></section><section id=\"120917b0d4xd0\" class=\"section\"><h2 id=\"3d1ebb10d4w1j\"><b>通过Apt-get安装软件报错问题</b></h2><div id=\"38a12990d4v1j\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"90958af0b7rwr\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>如何通过Apt-get安装软件</b></h4><div id=\"38a12992d4ijt\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"dabda160b8jn6\" class=\"section\"><h4 data-tag=\"h3\" id=\"9f142247b75io\" class=\"h3\"><b>操作步骤</b></h4><p id=\"60a79020d4u3u\">通过Apt-get在线安装软件，下述操作以安装Nginx为例。</p><ol id=\"9f142248b76wz\"><li id=\"9f142249b7iop\"><p id=\"9f14224ab7n6m\">远程连接Ubuntu实例。</p><p id=\"ef0ee040b70k7\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"9f14224bb77ir\"><p id=\"9f14224cb7rd5\">执行如下命令，安装Nginx软件。</p><pre data-tag=\"codeblock\" id=\"9f0f6751b7pe4\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-get install nginx</code></pre><p id=\"9f144950b7dsn\"> 系统显示类似如下，表示是否继续安装Nginx。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9978367761/p519148.png\" class=\"image break\"></li><li id=\"9f144951b7hdl\"><p id=\"9f144952b76r3\">根据提示信息，输入<code data-tag=\"code\" class=\"code\">Y</code>确认后，开始安装软件，直至软件安装完成。</p></li><li id=\"9f144954b7pmr\"><p id=\"9f144955b7c6a\">软件安装完成后，执行如下命令，列出软件包所在的目录，及该软件包中的所有文件。</p><pre id=\"i83bok\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>dpkg -L nginx</code></pre><img id=\"ded77890b7hlg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9978367761/p574752.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li><li id=\"9f144957b7zmd\"><p id=\"9f144958b7hz2\">执行如下命令，安装Nginx。</p><pre id=\"yng7we\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>dpkg -l nginx</code></pre></li></ol></section></div></div><div id=\"38cbbc00d4115\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"a4ba7930d4n77\" class=\"expandable-title\"><b>通过Apt-get安装软件时，提示“error processing package install-info (--configure）”错误怎么办？</b></h4><div id=\"38cbbc02d4n9e\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"c7497780b8co3\" class=\"section\"><h4 id=\"9f14495cb73u8\"><b>问题现象</b></h4><p class=\"from-extensions-error\" id=\"9f14495db712m\">在Ubuntu系统的ECS实例中，通过Apt-get安装软件时提示“<b data-tag=\"uicontrol\" id=\"571624c0beqwi\" class=\"uicontrol\">error processing package install-info (--configure）</b>”错误。</p><h4 id=\"226a18a0b7c1o\"><b>问题原因</b></h4><p id=\"23d875b0b7xfj\">可能是由于Ubuntu软件包损坏，导致软件安装失败。</p><h4 id=\"9f14495fb7vgy\"><b>解决方案</b></h4><p id=\"10e5ee21b8nhs\">请参考以下操作进行apt源更新同步，重新安装软件。</p><ol id=\"9f144960b7z0h\"><li id=\"awpBA\"><p id=\"9f144961b7s50\">远程连接Ubuntu实例。</p><p id=\"0cde0b40b7me0\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"0797f240b7qf8\"><p id=\"0797cb30b71sc\">将info文件夹更名。</p><pre data-tag=\"codeblock\" id=\"9f0f6752b7v3j\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>mv /var/lib/dpkg/info/ /var/lib/dpkg/info.bak.old/</code></pre></li><li id=\"9f147061b7fry\"><p id=\"9f147062b7yau\">新建一个新的info文件夹。</p><pre data-tag=\"codeblock\" id=\"9f0f6753b7ius\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>mkdir /var/lib/dpkg/info/</code></pre></li><li id=\"9f147064b7pqy\"><p id=\"9f147065b73sz\">执行如下命令，进行apt源更新同步。</p><pre data-tag=\"codeblock\" id=\"9f0f6754b78oz\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-get update</code></pre></li><li id=\"9f147067b7ocy\"><p id=\"9f147068b7nfj\">执行如下命令，重新安装xxxxx软件，若不再提示以上报错信息，则表示问题已修复。</p><pre data-tag=\"codeblock\" id=\"9f0f6755b7ppc\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-get install  xxxxx</code></pre></li></ol></section></div></div><div id=\"3a870090d4lf8\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"cc0e6000d4zr0\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>通过Apt-get安装软件或更新时，提示“Segmentation faultsts”错误怎么办？</b></h4><div id=\"3a870092d4bxa\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"c192c260b8pmb\" class=\"section\"><h4 id=\"DNwny\"><b>问题现象</b></h4><p id=\"9f14706bb7inf\">在Ubuntu系统的ECS实例中，通过Apt-get安装软件或更新时提示“<b data-tag=\"uicontrol\" id=\"571624c1be57o\" class=\"uicontrol\">Segmentation faultsts</b>”错误。</p><h4 id=\"9f14706db7trq\"><b>问题原因</b></h4><p id=\"9f14706eb7h3w\">可能是由于apt的cache出现冲突，导致软件安装或更新失败。</p><h4 id=\"9f147070b7rti\"><b>解决方案</b></h4><p id=\"edaebb80b83n5\">请参考以下操作进行apt源更新同步。</p><ol id=\"9f147072b72xq\"><li id=\"9f147073b7v7h\"><p id=\"9f149770b79m3\">远程连接Ubuntu实例。</p><p id=\"b8434102b8qh3\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。 </p></li><li id=\"b0ea9bb1b8rqu\"><p id=\"b0ea9bb0b8omi\">将<code data-tag=\"code\" class=\"code\">/var/cache/apt/</code>目录进行备份。</p></li><li id=\"9f149772b7hln\"><p id=\"9f149773b77pf\">备份完成后，执行如下命令，删除<code data-tag=\"code\" class=\"code\">/var/cache/apt/</code>目录中所有<code data-tag=\"code\" class=\"code\">.bin</code>文件。 </p><pre data-tag=\"codeblock\" id=\"9f0f6756b7uq8\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>rm /var/cache/apt/*.bin</code></pre></li><li id=\"9f149777b7may\"><p id=\"9f149778b7p4x\">执行如下命令，进行apt源更新同步。 </p><pre data-tag=\"codeblock\" id=\"9f0f6757b7pd5\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-get update</code></pre></li><li id=\"9f14977ab77td\"><p id=\"9f14977bb7ebp\">测试是否可以正常使用apt-get。</p><div type=\"note\" id=\"3604f800b8lt7\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"362af690b83hi\">如果实例内存配置过低（比如内存大小只有512MB）的情况下，当提示“<b data-tag=\"uicontrol\" id=\"e2e89621b8pxn\" class=\"uicontrol\">Segmentation faultsts</b>”错误时，您还可以使用top命令检查内存使用情况，将一些非必须的进程先暂时关闭，再尝试执行apt-get。</p></div></div></li></ol></section></div></div><div id=\"3ae8a890d4zlr\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"9f149780b7p3w\" class=\"expandable-title\"><b>通过Apt-get安装软件时，提示“Reading package lists... Error!”错误怎么办？</b></h4><div id=\"3ae8a892d4cpr\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"be71fa60b8ivv\" class=\"section\"><h4 id=\"9f149781b7puv\"><b>问题现象</b></h4><p id=\"9f149782b7i74\">在Ubuntu系统的ECS实例中，通过Apt-get安装软件时出现类似如下报错信息。</p><pre id=\"euk2zr\" data-tag=\"codeblock\" outputclass=\"language-javascript\" height=\"42\" class=\"pre codeblock language-javascript\"><code>Reading package lists... Error! E: Encountered a section with no Package: header E: Problem with MergeList /var/lib/apt/lists/AZ.archive.ubuntu.com_ubuntu_dists_natty_main_i18n _Translation-en E: The package lists or status file could not be parsed or opened.</code></pre><h4 id=\"f5e9e090b8c7s\"><b>问题原因</b></h4><p id=\"f8598100b8z35\">软件包列表损坏，导致软件安装报错。</p><h4 id=\"9f14be81b7xvy\"><b>解决方案</b></h4><p id=\"9f14be82b74vx\">请参考以下操作清除已损坏的列表，重新生成更新列表。</p><ol id=\"9f14be83b78zd\"><li id=\"9f14be84b7fa8\"><p id=\"9f14be85b7gyg\">执行如下命令，清除目录下已经损坏的列表。 </p><pre data-tag=\"codeblock\" id=\"9f0f6758b72vi\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>rm -rf /var/lib/apt/lists/*</code></pre></li><li id=\"9f14be87b78qo\"><p id=\"9f14e590b7egn\">执行如下命令，重新生成更新列表。 </p><pre data-tag=\"codeblock\" id=\"9f0f6759b7rq3\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-get update</code></pre><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6282770861/p621406.png\" alt=\"image\" placement=\"break\" id=\"e0ae1190d4cox\" class=\"image break\"></li><li id=\"9f14e592b7exy\"><p id=\"9f14e593b79sj\">再次安装软件，若不再提示以上报错信息，则表示问题已修复。</p></li></ol></section></div></div><div id=\"3b391282d46iu\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"9f14e596b7db5\" class=\"expandable-title\"><b>执行apt-get install unzip或aptitude install unzip命令时，提示“Error http://mirrors.aliyun.com/ubuntu/ trusty-updates/main unzip amd64 6.0-9ubuntu1.1 404 Not Found [IP: 112.124.XXX.XXX 80]”错误怎么办？</b></h4><div id=\"3b393991d4sgr\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"af0ec4e0b8q3p\" class=\"section\"><h4 id=\"9f14e597b78dv\"><b>问题现象</b></h4><p id=\"ebd3de10b8fy3\">在Ubuntu系统的ECS实例中，执行<code data-tag=\"codeph\" class=\"codeph\">apt-get install unzip</code>或<code data-tag=\"codeph\" class=\"codeph\">aptitude install unzip</code>命令时，提示如下错误提示。</p><pre id=\"ra17ur\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Error http://mirrors.aliyun.com/ubuntu/ trusty-updates/main unzip amd64 6.0-9ubuntu1.1 404 Not Found [IP: 112.124.XXX.XXX 80]\nError http://mirrors.aliyun.com/ubuntu/ trusty-updates/main unzip amd64 6.0-9ubuntu1.1 404 Not Found [IP: 112.124.XXX.XXX 80]\nError http://mirrors.aliyun.com/ubuntu/ trusty-updates/main unzip amd64 6.0-9ubuntu1.1 404 Not Found [IP: 112.124.XXX.XXX 80]</code></pre><h4 id=\"9f14e59bb7sig\"><b>问题原因</b></h4><p id=\"aeedeed0b85lm\">该问题通常是由于初始系统中的软件版本库与apt源中的版本不一致（即apt-get请求的资源在apt源中不存在）所导致的。</p><h4 id=\"9f150ca1b74yr\"><b>解决办法</b></h4><p id=\"9b5f69b1b8tn7\">请参考以下操作进行apt源更新同步。</p><ol id=\"e6c114a2b8sq5\"><li id=\"e6c114a0b81jb\"><p id=\"9f150ca2b774r\">远程连接Ubuntu实例。</p><p id=\"ec746e62b8pp5\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。 </p></li><li id=\"ed2dac41b8tqi\"><p id=\"ed2dac40b8q5e\">执行如下命令，进行apt源更新同步。</p><pre id=\"37w4cu\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-get update</code></pre></li><li id=\"f9f2b741b8s1l\"><p id=\"f9f2b740b89i6\">源更新同步完成后，通过使用<code data-tag=\"code\" class=\"code\">apt-get install</code>命令安装所需软件。</p></li></ol></section></div></div><div id=\"3b7d9590d40ty\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"89daefd0b7jcg\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>执行apt-get update命令时，提示“The following signatures were invalid: KEYEXPIRED 1544811256”错误怎么办？</b></h4><div id=\"3b7d9592d42dj\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"a2638370b8r39\" class=\"section\"><h4 id=\"89db16e5b7ii5\"><b>问题现象</b></h4><p class=\"title-article\" id=\"89db16e6b73b6\">在Ubuntu系统的ECS实例中，执行<code data-tag=\"codeph\" class=\"codeph\">apt-get update</code>命令时，提示以下信息。</p><pre data-tag=\"codeblock\" id=\"89d68301b79ev\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>The following signatures were invalid: KEYEXPIRED 1544811256</code></pre><h4 id=\"89db3df0b7qfq\"><b>问题原因</b></h4><p id=\"89db3df1b752i\">由于使用的软件源签名到期，导致更新报错。</p><h4 id=\"89db3df2b7hcz\"><b>解决方案</b></h4><p id=\"7fd14650b8uhp\">请参考以下操作更新已过期的key。</p><ol id=\"89db6506b7q9v\"><li id=\"89db6507b7r5l\"><p id=\"89db6508b7tha\">远程连接Ubuntu实例。</p><p id=\"558ad082b8fdq\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"4cb0bb50b8w74\"><p id=\"4cb09440b8gul\">执行以下命令，获取过期的key。 </p><pre data-tag=\"codeblock\" id=\"89d68302b7mft\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sudo apt-key list | grep -A 1 expired</code></pre><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9978367761/p519750.png\" class=\"image break\"></li><li id=\"89db650ab7shz\"><p id=\"89db650bb7sdm\">执行以下命令，更新过期的key。 </p><pre data-tag=\"codeblock\" id=\"89d68303b7sxa\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys [$Key]</code></pre><div type=\"note\" id=\"3c87ebe1b8raj\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3cc82930b8ic7\">[$Key]指的是之前获取到的过期的key。</p></div></div></li><li id=\"89db8c11b78r2\"><p id=\"89db8c12b7yf9\">重新执行以下命令，进行apt源更新同步。</p><pre id=\"tg3kbe\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-get update</code></pre></li></ol></section></div></div></section><section id=\"17e55630d4ue0\" class=\"section\"><h2 id=\"4717df60d4wgz\"><b>Alibaba Cloud Linux系统使用第三方DNF/YUM源问题</b></h2><div id=\"b7c8cda3d4cg0\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"2b8b6bc0bd4c1\" class=\"expandable-title\"><b>在Alibaba Cloud Linux 2系统的ECS实例中，使用docker-ce、epel等第三方YUM源安装软件失败怎么办？</b></h4><div id=\"b7c8cda1d4uv2\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"44be7fb0betbd\" class=\"section\"><h4 id=\"c62ce2a1d4q20\"><b>问题现象</b></h4><p id=\"2b8b6bc9bdtnf\">在符合如下条件的Alibaba Cloud Linux 2系统的ECS实例中，使用适配CentOS 7系统中的docker-ce、epel第三方YUM源，执行<code data-tag=\"codeph\" class=\"codeph\">yum install docker-ce</code>命令安装Docker软件包失败，并提示如下报错。</p><ul id=\"2b8b6bcabdwrw\"><li id=\"2b8b6bcbbds9m\"><p id=\"2b8b6bccbd0z2\">镜像：Alibaba Cloud Linux 2.1903 LTS 64位。</p></li><li id=\"2b8b6bcdbdc6p\"><p id=\"2b8b6bcebduue\">镜像ID：aliyun_2_1903_x64_20G_alibase_20210325.vhd及之前所有版本。</p></li></ul><pre data-tag=\"codeblock\" id=\"2b86d7e1bdu5b\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Loaded plugins: fastestmirror, langpacks, update-motd\nLoading mirror speeds from cached hostfile\n  * epel: mirror.sjtu.edu.cn \nhttps://mirrors.aliyun.com/docker-ce/linux/centos/2.1903/x86_64/stable/repodata/repomd.xml: [Errno 14] HTTPS Error 404 - Not Found \nTrying other mirror.\nDownloading packages:\ndocker-ce-20.10.6-3.el7.x86_64 FAILED\nhttps://mirrors.aliyun.com/docker-ce/linux/centos/2.1903/x86_64/stable/Packages/docker-ce-20.10.6-3.el7.x86_64.rpm: [Errno 14] HTTPS Error 404 - Not Found \nTrying other mirror.\ndocker-ce-rootless-extras-20.1 FAILED\nhttps://mirrors.aliyun.com/docker-ce/linux/centos/2.1903/x86_64/stable/Packages/docker-ce-rootless-extras-20.10.6-3.el7.x86_64.rpm: [Errno 14] HTTPS Error 404 - Not Found\n Trying other mirror. \n\n\nError downloading packages:\n  3:docker-ce-20.10.6-3.el7.x86_64: [Errno 256] No more mirrors to try.\n  docker-ce-rootless-extras-20.10.6-3.el7.x86_64: [Errno 256] No more mirrors to try.</code></pre></section><section id=\"4d53c3b0beh71\" class=\"section\"><h4 id=\"c62ce2aad47gv\"><b>问题原因</b></h4><p id=\"2b8b6bd1bdzdt\">第三方YUM源仅适配CentOS 7发行版，Alibaba Cloud Linux 2操作系统与CentOS 7操作系统的<code data-tag=\"codeph\" class=\"codeph\">$releasever</code>值不同，导致YUM解析后的地址无效，从而下载容器软件包失败。</p><div id=\"e5c49450bdqxl\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"d2cf1050bdv1b\">YUM安装docker-ce软件包时，首先会在系统中获取版本号，即<code data-tag=\"codeph\" class=\"codeph\">$releasever</code>值，然后替换相应YUM源中baseurl地址对应的<code data-tag=\"codeph\" class=\"codeph\">$releasever</code>变量，YUM从替换后的baseurl地址中获取相关数据。由于CentOS 7操作系统的<code data-tag=\"codeph\" class=\"codeph\">$releasever</code>值为7，Alibaba Cloud Linux 2操作系统的<code data-tag=\"codeph\" class=\"codeph\">$releasever</code>值为2.1903，因此解析后的baseurl地址并非预期地址，YUM便无法从这个错误的地址中获取数据。</p></div></div></section><section id=\"63729b30be3c2\" class=\"section\"><h4 id=\"c62ce2afd4lyv\"><b>解决方案</b></h4><p id=\"c62ce2b0d4o18\">请根据实际需求情况，选择以下对应方案进行修复。</p><ul id=\"0c5da4b2bdt70\"><li id=\"0c5da4b0bdzom\"><p id=\"0c8af640bd9i5\">您可以参考<a title=\"\" class=\"xref\" href=\"#2b8b92d9bdxn8\">方案一：手动修改</a>步骤，通过手动修改<code data-tag=\"code\" class=\"code\">$releasever</code>变量值进行修复。</p></li><li id=\"0d4ee281bdh7j\"><p id=\"14552210bdhak\">您可以参考<a title=\"\" class=\"xref\" href=\"#2b8bb9e3bd0a7\">方案二：安装插件修改</a>步骤，通过安装yum-plugin-releasever-adapter插件进行修复。</p></li></ul><div id=\"9c014240bddot\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"2b8b92d8bd01t\">下列操作以docker-ce源为例进行举例，如果您使用的是其他YUM源，解决方法类似。</p></div></div><section id=\"67ea1990beh0s\" class=\"section\"><p data-tag=\"h3\" id=\"2b8b92d9bdxn8\" class=\"h3\"><b>方案一：手动修改</b></p><ol id=\"2b8b92dabd50s\"><li data-spm-anchor-id=\"a2c9r.12641779.0.i0.16d1FcrrFcrrKs\" id=\"2b8b92dbbdzut\"><p id=\"2b8b92dcbd70s\">远程登录Linux实例。</p><p id=\"8152f790bdsjg\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i0.1d3b5e3bJU3Ogl\" id=\"2b8b92ddbdbe4\"><p id=\"2b8b92debd2hl\">执行以下命令，编辑<code data-tag=\"code\" class=\"code\">/etc/yum.repos.d/docker-ce.repo</code>配置文件。 </p><pre data-tag=\"codeblock\" id=\"2b86d7e2bdfap\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/yum.repos.d/docker-ce.repo</code></pre><ol id=\"2b8b92e0bdplu\"><li id=\"2b8b92e1bdiaf\"><p id=\"2b8b92e2bd7jm\">按<code data-tag=\"code\" class=\"code\">i</code>键切换至编辑模式，找到docker-ce.repo文件中所有<b data-tag=\"uicontrol\" id=\"b93fadb0bd48m\" class=\"uicontrol\">enabled=1</b>值的源，将源中baseurl地址的<code data-tag=\"code\" class=\"code\">$releasever</code>变量修改为7，修改之后的内容如下所示。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4765628761/p520027.png\" alt=\"Dingtalk_20210610100121.jpg\" width=\"580\" height=\"102\" class=\"image break\"></p></li><li id=\"2b8b92e4bdo6r\"><p id=\"2b8b92e5bdctd\">修改完成后，按下<code data-tag=\"code\" class=\"code\">Esc</code>键后，输入<code data-tag=\"code\" class=\"code\">:wq</code>并回车以保存并关闭配置文件，重新安装软件包即可。</p></li></ol></li></ol></section><section id=\"6babb570be85f\" class=\"section\"><p data-tag=\"h3\" id=\"2b8bb9e3bd0a7\" class=\"h3\"><b>方案二：安装插件修改</b></p><p id=\"2b8bb9e4bdaki\">安装yum-plugin-releasever-adapter插件实现<code data-tag=\"code\" class=\"code\">$releasever</code>值的自动转换，即将2.1903转换为7。</p><ol id=\"2b8be0f8bda6j\"><li id=\"2b8be0f9bddwr\"><p id=\"21b8ac70bdztd\">确认实例是否支持使用yum-plugin-releasever-adapter插件。</p><p id=\"326b6c60bdpoz\">yum-plugin-releasever-adapter插件目前的版本及默认支持的第三方repo如下表所示：</p><table id=\"2b8bb9e5bdv6v\" tablewidth=\"708\" tablecolswidth=\"236 236 236\" class=\"table\"><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><tbody class=\"tbody\"><tr id=\"2b8bb9e6bdmn7\"><td id=\"2b8bb9e7bdv9a\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"2b8bb9e8bd05f\">插件版本</p></td><td id=\"2b8bb9e9bdc20\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"2b8bb9eabdkvq\">默认支持的第三方repo</p></td><td id=\"2b8bb9ebbdzgt\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"2b8bb9ecbdu68\">插件的限制</p></td></tr><tr id=\"2b8bb9edbd7s7\"><td id=\"2b8bb9eebdbcc\" rowspan=\"1\" colspan=\"1\"><p id=\"2b8bb9efbd1i8\">1.0-1.3</p></td><td id=\"2b8bb9f0bdb7p\" rowspan=\"1\" colspan=\"1\"><p id=\"2b8bb9f1bdbur\">docker-ce.repo，epel.repo</p></td><td id=\"2b8bb9f2bdoq6\" rowspan=\"1\" colspan=\"1\"><p id=\"2b8bb9f3bde44\"> </p><p id=\"2b8be0f0bdxl6\">您需要满足以下条件，才可以使用该插件：</p><ul id=\"2b8be0f1bd9zd\"><li id=\"2b8be0f2bdkgg\"><p id=\"2b8be0f3bdxwy\">操作系统需要是Alibaba Cloud Linux 2。</p></li><li id=\"2b8be0f4bdfsv\"><p id=\"2b8be0f5bd34t\">执行以下命令，确认系统中存在plus的repo。 </p><pre data-tag=\"codeblock\" id=\"2b86d7e3bdobt\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/yum.repos.d/AliYun.repo |grep -A3 plus</code></pre><p id=\"2b8be0f6bd2qd\"> 系统显示类似如下，说明存在plus的repo。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4765628761/p520028.png\" alt=\"Dingtalk_20210622170320.jpg\" width=\"756\" class=\"image break\"></p></li></ul><p id=\"2b8be0f7bdn04\"> </p></td></tr></tbody></table></li><li id=\"fde38c20bdgf3\"><p id=\"fde36510bdcql\">远程登录Linux实例。</p><p id=\"3bdab220bdjh1\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"2b8be0fbbd5oj\"><p id=\"2b8be0fcbd952\">执行以下命令，安装yum-plugin-releasever-adapter插件，插件默认对docker-ce、epel第三方YUM源中的<code data-tag=\"code\" class=\"code\">$releasever</code>值自动进行转换。 </p><pre data-tag=\"codeblock\" id=\"2b86d7e4bdzpk\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install yum-plugin-releasever-adapter --disablerepo=* --enablerepo=plus</code></pre></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i3.1c1f5e3b1pDFCX\" id=\"2b8be0ffbd3np\"><p id=\"2b8be100bdv3f\">若无其他的YUM源需要转换，安装插件后即可直接安装软件；若还有其他的YUM源需要转换，请按照以下方式配置： \n</p><ol id=\"2b8be101bd6bq\"><li id=\"2b8be102bdan6\"><p id=\"2b8be103bdcns\">执行以下命令，进入指定目录。 </p><pre data-tag=\"codeblock\" id=\"2b86d7e5bd5b5\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cd /etc/yum/pluginconf.d/</code></pre></li><li id=\"2b8be105bd70d\"><p id=\"2b8be106bds23\">执行以下命令，编辑<code data-tag=\"code\" class=\"code\">releasever-adapter.conf</code>配置文件。如果需要添加其他的YUM源，则需要将YUM源的<code data-tag=\"code\" class=\"code\">.repo</code>文件名添加在<b data-tag=\"uicontrol\" id=\"6cb60fb0bdhj0\" class=\"uicontrol\">includes</b>字段后面，并以逗号隔开。 </p><pre data-tag=\"codeblock\" id=\"2b86d7e6bdw94\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim releasever-adapter.conf</code></pre><p id=\"2b8c0800bdjyu\"> 系统显示类似如下。 </p><pre data-tag=\"codeblock\" id=\"2b86d7e7bdkod\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>[main]\n\nenabled=1\n\nhostfilepath=timedhosts.txt\n\n\n[releasevermapping]\n\nrelease_dict={'2.1903':'7', '3':'8'}\n\n\n[reposlist]\n\nincludes=docker-ce.repo, epel.repo</code></pre><div type=\"note\" id=\"440fca31bdmyo\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"2b8c0804bd1rj\"><li id=\"2b8c0805bdpg9\"><p id=\"2b8c0806bdi3i\"> 文件中参数的具体介绍如下所示： \n</p><ul id=\"2b8c0807bdcct\"><li id=\"2b8c0808bd1l0\"><p id=\"2b8c0809bdlmh\">[main]：为插件的主要控制部分，控制插件的启用与否，其中<b data-tag=\"uicontrol\" id=\"bae73030begmq\" class=\"uicontrol\">enabled=1</b>表示启用插件，<b data-tag=\"uicontrol\" id=\"bd580920ber56\" class=\"uicontrol\">enabled=0</b>表示停用插件。</p></li><li id=\"2b8c080abdhwo\"><p id=\"2b8c080bbdl3a\">[releasevermapping]：为待处理的<code data-tag=\"code\" class=\"code\">$releasever</code>的映射关系，其中2.1903映射为7，3映射为8。</p></li><li id=\"2b8c080cbdenj\"><p id=\"2b8c080dbdyed\">[repolist]：为需要修改的源的列表，如果需要添加其他的源，则需要将<code data-tag=\"code\" class=\"code\">.repo</code>文件的名字添加在include字段后面，并以逗号隔开。</p></li></ul></li><li id=\"2b8c2f10bdxi4\"><p id=\"2b8c2f11bdone\">一个<code data-tag=\"code\" class=\"code\">.repo</code>文件中有多个可以使用的源，每个源都有一个独立的名称区分其他的源，同时一个系统中不能出现重复的名称，例如：<code data-tag=\"code\" class=\"code\">docker-ce.repo</code>中有<code data-tag=\"code\" class=\"code\">[docker-ce-stable]</code>和<code data-tag=\"code\" class=\"code\">[docker-ce-stable-debuginfo]</code>等源。</p></li><li id=\"2b8c2f12bdoe6\"><p id=\"2b8c2f13bd4z8\">请务必保证新添加到<code data-tag=\"code\" class=\"code\">releasever-adapter.conf</code>配置文件中的源文件名称是源文件内各个源名称的前缀，例如：<code data-tag=\"code\" class=\"code\">docker-ce.repo</code>源文件中包含的<code data-tag=\"code\" class=\"code\">docker-ce-stable</code>和<code data-tag=\"code\" class=\"code\">docker-ce-stable-debuginfo</code>两个源名称，均以<code data-tag=\"code\" class=\"code\">docker-ce</code>为前缀。</p></li></ul></div></div></li><li id=\"2b8c2f15bdp3c\"><p id=\"2b8c2f16bdwq9\">保存配置文件，执行以下命令，即可通过docker-ce、epel第三方YUM源安装软件包。</p><pre id=\"tvr5xw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install docker-ce</code></pre></li></ol></li></ol></section></section></div></div><div id=\"3bc80c10d4dd7\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"5c31be50b88cv\" class=\"expandable-title\"><b>在Alibaba Cloud Linux 3系统的ECS实例中，使用docker-ce、epel等第三方DNF（YUM）源安装软件失败怎么办？</b></h4><div id=\"3bc80c12d4x4n\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"452e37d0be8b2\" class=\"section\"><h4 id=\"682f1831d4zi0\"><b>问题现象</b></h4><p id=\"5c31e563b82pf\">在符合如下条件的Alibaba Cloud Linux 3系统的ECS实例中，执行<code data-tag=\"codeph\" class=\"codeph\">dnf install docker-ce</code>命令安装容器软件包失败，并出现如下报错。</p><ul id=\"68949a31b82zd\"><li id=\"2d4d2051b851b\"><p id=\"3053a990b8wjk\">使用适配CentOS 8系统中的第三方DNF（YUM）源。</p></li><li id=\"2b8d6ef1b88j4\"><p id=\"2b8d6ef0b822e\">aliyun_3_x64_20G_alibase_20210425.vhd及之前的所有镜像版本。</p></li></ul><p id=\"b34feb60b8kf7\">系统显示报错信息类似如下。</p><pre id=\"ahmrfu\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Docker CE Stable - x86_64\nFailed to download metadata for repo 'docker-ce-stable'\nError: Failed to download metadata for repo 'docker-ce-stable'</code></pre></section><section id=\"4a112230betkt\" class=\"section\"><h4 class=\"ne-p\" id=\"5c320c70b8pqy\"><b>问题原因</b></h4><p id=\"u92b820bb\" class=\"ne-p\">第三方DNF源仅适配CentOS 8发行版，而在Alibaba Cloud Linux 3中，系统的<code data-tag=\"code\" class=\"code\">$releasever</code>变量值与CentOS 8不同，导致DNF解析后的地址无效，进而导致下载RPM包失败。</p><div type=\"note\" id=\"64ba77d1b8mqi\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"45154590b8yna\">DNF安装docker-ce时，首先会从系统中获取版本号，即<code data-tag=\"code\" class=\"code\">$releasever</code>变量值，然后替换掉相应源baseurl中对应的<code data-tag=\"code\" class=\"code\">$releasever</code>变量值，之后DNF从替换后的baseurl中获取相关数据。由于CentOS 8的<code data-tag=\"code\" class=\"code\">$releasever</code>变量值为8，而Alibaba Cloud Linux 3系统的<code data-tag=\"code\" class=\"code\">$releasever</code>变量值为3，因此解析后的baseurl并非预期地址，DNF便无法从这个错误的地址中安装软件包。</p></div></div></section><section id=\"58a60b30be2wq\" class=\"section\"><h4 id=\"d669a060b8i9r\"><b>解决方案</b></h4><p id=\"a31a5540b8m9j\">请根据实际需求情况，选择以下对应方案进行修复。</p><ul id=\"887ce362b85fm\"><li id=\"887ce360b8efk\"><p id=\"8781e190b89tw\">您可以参考<a title=\"\" class=\"xref\" href=\"#5c323384b8s7u\">方案一：手动修改</a>步骤，通过手动修改<code data-tag=\"code\" class=\"code\">$releasever</code>变量值进行修复。</p></li><li id=\"13ba7cd1b8zhg\"><p id=\"13ba7cd0b8a7w\">您可以参考<a title=\"\" class=\"xref\" href=\"#5c325a91b8s4i\">方案二：安装插件修改</a>步骤，通过安装dnf-plugin-releasever-adapter插件进行修复。</p></li></ul><div id=\"9ad7c520b8jid\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"xpyfz\" data-spm-anchor-id=\"a2c4g.11186623.2.i3.3fde4c07YHGjZd\">本文以docker-ce源为例进行介绍，如果您使用的是其他DNF源，解决方案类似。</p></div></div><section id=\"62f33860be8pt\" class=\"section\"><p data-tag=\"h3\" id=\"5c323384b8s7u\" class=\"h3\"><b>方案一：手动修改</b></p><ol id=\"5c323385b8fb0\"><li id=\"5c323386b8vj2\"><p id=\"5c323387b8fl6\">远程登录Linux实例。</p><p id=\"6c988450b84vy\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"5ff2c121b8hwv\"><p id=\"5ff2c120b82a9\">执行以下命令，打开<code data-tag=\"code\" class=\"code\">/etc/yum.repos.d/docker-ce.repo</code>配置文件。</p><pre id=\"hg2hmq\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/yum.repos.d/docker-ce.repo</code></pre></li><li id=\"99eb4cd1b84ns\"><p id=\"682f1853d4vvp\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式，找到<code data-tag=\"code\" class=\"code\">docker-ce.repo</code>文件中所有存在<b data-tag=\"uicontrol\" id=\"8f24a9e0b8y5j\" class=\"uicontrol\">enabled=1</b>值的源，将源中<code data-tag=\"code\" class=\"code\">baseurl</code>的<code data-tag=\"code\" class=\"code\">$releasever</code>变量替换为8。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2835277761/p520023.png\" class=\"image break\"></li><li id=\"5c323389b8uhe\"><p id=\"5c32338bb8758\"> 按下<code data-tag=\"code\" class=\"code\">Esc</code>键后，输入<code data-tag=\"code\" class=\"code\">:wq</code>并按<code data-tag=\"code\" class=\"code\">Enter</code>键以保存关闭配置文件，重新进行安装即可。</p></li></ol></section><section id=\"5c418170bez9x\" class=\"section\"><p data-tag=\"h3\" id=\"5c325a91b8s4i\" class=\"h3\"><b>方案二：安装插件修改</b></p><p id=\"5c325a92b8l4w\">通过安装dnf-plugin-releasever-adapter插件实现<code data-tag=\"code\" class=\"code\">$releasever</code>的变量进行自动转换，即将3转换为8。</p><ol id=\"5c32f6d4b8sv2\"><li id=\"5c32f6d5b8q9n\"><p id=\"5c331de0b87g8\">确认实例是否支持使用dnf-plugin-releasever-adapter插件。</p><p id=\"21f0be50b8tfn\">dnf-plugin-releasever-adapter插件目前的版本及默认支持的第三方repo如下表所示：</p><table id=\"5c325a93b8yfg\" tablewidth=\"708\" tablecolswidth=\"236 236 236\" class=\"table\"><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><tbody class=\"tbody\"><tr id=\"5c325a94b8kd1\"><td id=\"5c325a95b8i55\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"5c325a96b8jn2\">插件版本</p></td><td id=\"5c325a97b8vzv\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"5c325a98b8wqp\">默认支持的第三方repo</p></td><td id=\"5c3281a0b8n9j\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"5c3281a1b8oye\">插件的限制</p></td></tr><tr id=\"5c3281a2b88va\"><td id=\"5c3281a3b88n5\" rowspan=\"1\" colspan=\"1\"><ul id=\"5c3281a4b8nsk\"><li id=\"5c3281a5b8nyn\"><p id=\"5c3281a6b8ev4\">新版本：1.0-2</p></li><li id=\"5c3281a7b8mzj\"><p id=\"5c3281a8b8vgs\">旧版本：1.0-1.3</p></li></ul><div type=\"note\" id=\"ca3c7651b8mgq\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p jc=\"left\" id=\"5c32a8b1b8nbb\" style=\"text-align:left\">新版本插件和旧版本插件不兼容，新版本的配置文件名称为<code data-tag=\"codeph\" class=\"codeph\">releasever_adapter.conf</code>，旧版本为<code data-tag=\"codeph\" class=\"codeph\">releasever-adapter.conf</code>。升级版本会删除原来的配置文件。因此升级后，如果需要支持除docker-ce和epel之外的第三方源，需要重新按照步骤修改配置文件的<b data-tag=\"uicontrol\" id=\"f13d6df0bfpm1\" class=\"uicontrol\">include</b>字段，其他的保持不变。</p></div></div><p id=\"5c32a8b2b8htz\"> </p></td><td id=\"5c32a8b3b8d23\" rowspan=\"1\" colspan=\"1\"><p id=\"5c32a8b4b82sw\">docker-ce.repo，epel.repo</p></td><td id=\"5c32a8b5b8mdn\" rowspan=\"1\" colspan=\"1\"><p id=\"5c32cfc0b8674\"> </p><p id=\"5c32cfc1b8k1f\">您需要满足以下条件，才可以使用该插件：</p><ul id=\"5c32cfc2b8vsy\"><li id=\"5c32cfc3b8qap\"><p id=\"5c32cfc4b8x7s\">操作系统需要是Alibaba Cloud Linux 3。</p></li><li id=\"5c32f6d0b8hz9\"><p id=\"5c32f6d1b8vz5\">执行以下命令，确认系统中存在alinux3-plus的repo。 </p><pre data-tag=\"codeblock\" id=\"5c2a1d30b8ts5\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/yum.repos.d/AliYun.repo |grep -A3 alinux3-plus</code></pre><p id=\"5c32f6d2b8dxp\"> 系统显示类似如下，说明存在alinux3-plus的repo。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2835277761/p520024.png\" class=\"image break\"></li></ul><p id=\"5c32f6d3b8a5m\"> </p></td></tr></tbody></table></li><li id=\"6cf06b81b878m\"><p id=\"6cf06b80b8k6f\">远程登录Linux实例。</p><p id=\"ddffd1a2b8y4d\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"d99dd710b8r6v\"><p id=\"d99db000b8f42\">执行以下命令，安装dnf-plugin-releasever-adapter插件。</p><div type=\"note\" id=\"f688f260b8nxu\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"f6b113d0b8gs4\">目前，插件默认对docker-ce和epel源中的<code data-tag=\"code\" class=\"code\">$releasever</code>变量值做自动转换。 </p></div></div><pre data-tag=\"codeblock\" id=\"5c2a1d31b85xk\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>dnf install dnf-plugin-releasever-adapter --repo alinux3-plus</code></pre></li><li id=\"5c331de2b8dro\"><p id=\"5c331de3b84hx\">若无其他的DNF源需要转换，安装插件后即可直接安装软件；若还有其他的DNF源需要转换，请按照以下方式配置： \n</p><ol id=\"5c3344f0b8cen\"><li id=\"5c3344f1b8vwn\"><p id=\"5c3344f2b84wy\">执行以下命令，进入<code data-tag=\"code\" class=\"code\">/etc/yum/pluginconf.d/</code>目录。</p><pre id=\"xnnxrl\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cd /etc/yum/pluginconf.d/</code></pre></li><li id=\"4f9d8b61bf0h8\"><p id=\"4f9d8b60bfz22\">执行以下命令，编辑<code data-tag=\"code\" class=\"code\">releasever_adapter.conf</code>配置文件。</p><pre id=\"sqbwqa\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim releasever_adapter.conf</code></pre><ol id=\"3f2ccb91bfv8w\"><li id=\"3d663c60bfozz\"><p id=\"f1097bfa8b5pr\">按<code data-tag=\"code\" class=\"code\">i</code>键切换至编辑模式，如果需要添加其他的DNF源，则需要将DNF源的<code data-tag=\"code\" class=\"code\">.repo</code>文件名添加在<b data-tag=\"uicontrol\" id=\"57eb84f0b895m\" class=\"uicontrol\">include</b>字段后面，并以逗号隔开。</p><div type=\"note\" id=\"0e7277c0b81ko\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"5c3344f6b8d08\" class=\"p\">DNF源的<code data-tag=\"code\" class=\"code\">.repo</code>文件一般在<code data-tag=\"codeph\" class=\"codeph\">/etc/yum.repos.d/</code>目录下查看。</p></div></div><p id=\"5c336c01b8kal\"> 系统显示类似如下。 </p><pre data-tag=\"codeblock\" id=\"5c2a1d33b8q32\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>[main]\nenabled=1\n\n[releasevermapping]\n2.1903 = 7\n3      = 8\n\n[reposlist]\ninclude=docker-ce.repo, epel.repo</code></pre><div type=\"note\" id=\"1cc6d550b8cxp\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"5c339310b8si9\"><li id=\"5c339311b8mc8\"><p id=\"5c339312b8zf6\">文件中参数的具体介绍如下所示： \n</p><ul id=\"5c339313b8ltn\"><li id=\"5c339314b8uzx\"><p id=\"5c339315b84h7\">[main]：此部分为插件的主要控制部分，控制插件的启用与否，其中<b data-tag=\"uicontrol\" id=\"0ffecfe0bfz9o\" class=\"uicontrol\">enabled=1</b>表示启用插件，<b data-tag=\"uicontrol\" id=\"11fd10e0bfbn2\" class=\"uicontrol\">enabled=0</b>表示停用插件。</p></li><li id=\"5c339316b8scf\"><p id=\"5c345660b8njj\">[releasevermapping]：此部分为待处理的<code data-tag=\"code\" class=\"code\">$releasever</code>的映射关系，其中2.1903映射为7，3映射为8。</p></li><li id=\"5c347d70b8u28\"><p id=\"5c347d71b8fyh\">[repolist]：此部分为需要修改的源的列表，如果需要添加其他的源，则需要将<code data-tag=\"code\" class=\"code\">.repo</code>文件的名字添加在<b data-tag=\"uicontrol\" id=\"20eaef50bfhl6\" class=\"uicontrol\">include</b>字段后面，并以逗号隔开。</p></li></ul></li><li id=\"5c34a480b89tp\"><p id=\"5c34a481b8gv5\">一般来说，一个<code data-tag=\"code\" class=\"code\">.repo</code>文件中有多个可以使用的源，每个源都有一个独立的名称区分其他的源，一个系统中不能出现重复的名称，例如：docker-ce.repo中有<code data-tag=\"code\" class=\"code\">[docker-ce-stable]</code>和<code data-tag=\"code\" class=\"code\">[docker-ce-stable-debuginfo]</code>等源。</p></li></ul></div></div></li></ol></li><li id=\"5c34a483b8k7r\"><p id=\"f1097bfc8bkml\">修改完成后，按下<code data-tag=\"code\" class=\"code\">Esc</code>键，然后输入<code data-tag=\"code\" class=\"code\">:wq</code>并按回车，保存并关闭配置文件。</p></li><li id=\"65e244f0bf7dl\"><p id=\"65e21de0bf07n\">执行如下命令，通过docker-ce、epel和您添加的源安装docker-ce软件。</p><pre id=\"a6e4gi\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>dnf install docker-ce</code></pre></li></ol></li></ol></section></section></div></div></section><section id=\"24734ba0d4mfp\" class=\"section\"><h2 id=\"90988650d4v6d\"><b>安装AD域控制器失败问题</b></h2><div id=\"3c546d90d44cx\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"dbc58510d42me\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>安装AD域控制器失败，提示“安装Active Directory域服务二进制文件失败”错误怎么办？</b></h4><div id=\"3c546d92d4plr\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"14e8e430bf8sf\" class=\"section\"><h4 data-tag=\"h4\" id=\"4c5fe840be8uq\" class=\"h4\"><b>问题现象</b></h4><p id=\"c4463762bb136\">在Windows系统的ECS实例中，安装AD域控制器失败，提示“<b data-tag=\"uicontrol\" id=\"8ddf5530betj2\" class=\"uicontrol\">安装Active Directory域服务二进制文件失败</b>”错误。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5265428761/p518683.png\" alt=\"1.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></section><section id=\"1781de90bfxat\" class=\"section\"><h4 id=\"aa8ca430be9k3\"><b>问题原因</b></h4><p id=\"afe3fb40becnc\">通过打开事件查看器发现报错，<code data-tag=\"code\" class=\"code\">Remote Registry</code>服务被禁止，无法启动该服务。</p></section><section id=\"1993a790bfk8h\" class=\"section\"><h4 data-tag=\"h5\" id=\"c4465e72bb5ef\" class=\"h5\"><b>解决方案</b></h4><p id=\"9af57821c2kvm\">请参考以下操作启动<code data-tag=\"code\" class=\"code\">Remote Registry</code>服务。</p><ol id=\"b6a5c981c2xn5\"><li id=\"b6a5a270c2iaa\"><p id=\"b0768900c2f4l\">远程连接Windows实例。</p><p id=\"fccdafe0c2jpp\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"13581a71c2g01\"><p id=\"f00844d0c2u6t\">依次选择<b data-tag=\"uicontrol\" id=\"f7bdb020c258x\" class=\"uicontrol\">开始 &gt; 运行</b>，输入<code data-tag=\"code\" class=\"code\">services.msc</code>，然后单击<b data-tag=\"uicontrol\" id=\"3924da20c2fq0\" class=\"uicontrol\">确认</b>。</p></li><li id=\"90f1cfb0c2ius\"><p id=\"90f1a8a0c2x3m\">在<b data-tag=\"uicontrol\" id=\"7ddfea10c2i0z\" class=\"uicontrol\">服务</b>窗口中，双击<code data-tag=\"code\" class=\"code\">Remote Registry</code>服务，进入<b data-tag=\"uicontrol\" id=\"3dd1f200c2r72\" class=\"uicontrol\">Remote Registry属性</b>窗口，设置以下选项。</p><ul id=\"74105be1c2klh\"><li id=\"73dfd601c2xeo\"><p id=\"73dfd600c2y74\">在<b data-tag=\"uicontrol\" id=\"6004d400c21a4\" class=\"uicontrol\">启动类型</b>区域，选择<b data-tag=\"uicontrol\" id=\"619c63f0c2b6h\" class=\"uicontrol\">自动</b>选项。</p></li><li id=\"7624e401c2hn2\"><p id=\"7624e400c23o8\">在<b data-tag=\"uicontrol\" id=\"7e637c80c243l\" class=\"uicontrol\">服务状态</b>区域，单击<b data-tag=\"uicontrol\" id=\"5c4cd970c3jr1\" class=\"uicontrol\">启动</b>，确保<code data-tag=\"code\" class=\"code\">Remote Registry</code>服务正常启动。</p><img id=\"9f0696c1c2dnf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0514688761/p588957.png\" alt=\"2023-03-15_11-32-02\" placement=\"break\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></li></ul></li><li id=\"999dda90c26pz\"><p id=\"999db380c2mp2\">单击<b data-tag=\"uicontrol\" id=\"db6db170c2ebk\" class=\"uicontrol\">确定</b>，保存设置。</p></li></ol></section></div></div><div id=\"3c9a2920d4pc3\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"c4465e75bbvc2\" class=\"expandable-title\"><b>安装AD域控制器时，提示“此计算机具有动态分配的IP地址”怎么办？</b></h4><div id=\"3c9a2922d41p9\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"1ccf4a90bf1kv\" class=\"section\"><h4 data-tag=\"h5\" id=\"c4465e76bbxtn\" class=\"h5\"><b>问题现象</b></h4><p id=\"bfd07320bd7vr\">在Windows系统的ECS实例中安装AD域控制器时，提示“<b data-tag=\"uicontrol\" id=\"fd76f210bf7qf\" class=\"uicontrol\">此计算机具有动态分配的IP地址</b>”。</p><p id=\"c014cf20bd36k\"><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4265428761/p518684.png\" alt=\"1.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"> </p></section><section id=\"1fe8bf90bfq77\" class=\"section\"><h4 id=\"1a476f70betpl\"><b>问题原因</b></h4><p id=\"1c397b70betqp\">该Windows系统的ECS实例上至少有一个物理网络适配器未将静态IP地址分配给其IP属性。</p></section><section id=\"22007c00bfbmd\" class=\"section\"><h4 data-tag=\"h5\" id=\"c4468581bbupz\" class=\"h5\"><b>解决方案</b></h4><ol id=\"690450e2c2pcn\"><li id=\"690450e0c2fjr\"><p id=\"c4468582bbxr5\">远程连接Windows实例。</p><p id=\"6df8c770c2pd8\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"7b27b7d1c2mz6\"><p id=\"9e111890c25ae\">安装AD域控制器。<span data-tag=\"ph\" id=\"bc95c6a0c7fca\" props=\"china\" data-cond-props=\"china\" class=\"ph\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/ecs-instance-building-windows-active-directory-domain\">ECS实例搭建Windows系统AD域</a>。</span></p></li><li id=\"c4d2aa71c2ijg\"><p id=\"c4d2aa70c2ld4\">在安装AD域时弹出的<b data-tag=\"uicontrol\" id=\"e5fe7cb0c2lot\" class=\"uicontrol\">静态IP分配</b>选项框中，单击<b data-tag=\"uicontrol\" id=\"e384f130c2n5x\" class=\"uicontrol\">是</b>。</p></li></ol><div type=\"note\" id=\"525d0f80c20i6\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"52755270c26f7\">LoopBack使用了DHCP方式，可以在未分配静态IP地址的情况下继续执行操作。</p></div></div></section></div></div><div id=\"3cdd4ca0d44tv\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"3bbdd940d41r9\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>安装AD域控制器时，提示“0x0000232B RC0DE_NAME_ERROR”错误代码怎么办？</b></h4><div id=\"3cdd4ca2d47vq\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"26c04e00bfty6\" class=\"section\"><h4 data-tag=\"h5\" id=\"c446ac94bbu6g\" class=\"h5\"><b>问题现象</b></h4><p id=\"6d461000bf10p\">在Windows系统的ECS实例中安装AD域控制器时，提示“<b data-tag=\"uicontrol\" id=\"d863ac70bf7r4\" class=\"uicontrol\">0x0000232B RC0DE_NAME_ERROR</b>”错误代码。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5265428761/p518686.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></section><section id=\"28b62a90bf1e4\" class=\"section\"><h4 id=\"21ec42a0bfms6\"><b>问题原因</b></h4><p id=\"28312e01bfsqz\">可能是由于DNS服务器中IP地址配置错误导致。</p></section><section id=\"2db09490bfthv\" class=\"section\"><h4 data-tag=\"h5\" id=\"c446ac97bbr6t\" class=\"h5\"><b>解决方案</b></h4><p id=\"c446ac98bbq2l\">请参考以下操作将Slave的内外网网卡的DNS服务器全部修改为Master的私网地址。</p><ol data-tag=\"steps\" id=\"steps-q6o-keb-u8r\" class=\"steps\"><li data-tag=\"step\" id=\"step-ojj-iq6-t38\" class=\"step\"><p id=\"8172a830c7kev\">远程连接Windows实例。</p><p id=\"acfd0cc0c7itd\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li data-tag=\"step\" id=\"step-blw-z55-lhf\" class=\"step\"><p id=\"8172a831c7uug\">进入<b data-tag=\"uicontrol\" id=\"180317a0c7x5i\" class=\"uicontrol\">Internet协议版本4（TCP/IPv4）属性</b>窗口，修改DNS服务器地址，然后单击<b data-tag=\"uicontrol\" id=\"29b26000c75y6\" class=\"uicontrol\">确定</b>。</p><div type=\"note\" id=\"eb905640c7gcc\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"eb902f30c7qi0\">更改DNS服务器地址为Master实际的私网地址。</p></div></div><img id=\"5ed06d20c7oa9\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6885639761/p606823.png\" alt=\"p13294\" placement=\"break\" class=\"image break\"></li><li id=\"0aff19c1c7j7v\"><p id=\"0aff19c0c7f5l\">检查是否能Ping通DNS服务器IP地址。</p><div data-tag=\"info\" id=\"info-rdg-gou-78j\" props=\"china\" data-cond-props=\"china\" class=\"info\"><img data-tag=\"image\" id=\"image-yhx-q0c-3ye\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1679047461/p416532.png\" alt=\"adda\" placement=\"break\" class=\"image break\"></div></li></ol></section></div></div><div id=\"3d23f290d448e\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"73a0cb60d4klb\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>安装AD域控制器时，提示“找不到网络路径”错误怎么办？</b></h4><div id=\"3d23f292d4gsc\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"3158dc10bfmpq\" class=\"section\"><h4 data-tag=\"h5\" id=\"c446d3a2bbe09\" class=\"h5\"><b>问题现象</b></h4><p id=\"bdff3c00bfs7v\">在Windows系统的ECS实例中安装AD域控制器时，提示“<b data-tag=\"uicontrol\" id=\"ec9c10b0bf0l3\" class=\"uicontrol\">找不到网络路径</b>”错误。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5265428761/p518687.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></section><section id=\"3360ba00bftlp\" class=\"section\"><h4 id=\"837d8650bfctq\"><b>问题原因</b></h4><p id=\"8959ebe0bf3il\">可能有以下几点原因导致：</p><ul id=\"9c4b2a22bfdnf\"><li id=\"9c4b2a20bf8n8\"><p id=\"a4c78ef0bfn5r\">AD域控制器和客户端的<code data-tag=\"code\" class=\"code\">TCP/IP NetBIOS Helper</code>和<code data-tag=\"code\" class=\"code\">Remote Registry</code>服务没有启动。</p></li><li id=\"e34ca7a0bfaiy\"><p id=\"e34c8090bfo2p\">客户端与AD与控制器的DNS配置错误。</p></li><li id=\"36f520d1bfmwn\"><p id=\"372e0b20bffz4\">客户端和AD域控制器的SID造成冲突。</p></li><li id=\"00ed7e60bfayh\"><p id=\"00ed5750bfzgk\">防火墙及安全软件进行了拦截。</p></li></ul></section><section id=\"35ec9500bfx29\" class=\"section\"><h4 data-tag=\"h5\" id=\"c446d3a5bby6u\" class=\"h5\"><b>解决方案</b></h4><p id=\"74bba471bf3z9\">请参考以下操作进行排查。</p><ul id=\"d61f0722d4fvc\"><li id=\"d61f0720d4qee\"><p id=\"e63b6500c2dyh\"><b>启动TCP/IP NetBIOS Helper和Remote Registry服务</b></p><p id=\"b46da641c2sye\">请参考<a title=\"\" class=\"xref\" href=\"#1993a790bfk8h\">解决方案</a>分别启动AD域控制器和客户端的TCP/IP NetBIOS Helper和Remote Registry服务。</p></li><li id=\"d96ef570d4vlx\"><p id=\"d96ece60d47m6\"><b>修改客户端DNS配置</b></p><p id=\"274d9bc1c2sh1\">请参考<a title=\"\" class=\"xref\" href=\"#c446ac97bbr6t\">解决方案</a>修改客户端DNS配置。</p></li><li id=\"dc7d46e1d4znh\"><p id=\"dc7d46e0d4iff\"><b>修改客户端SID</b></p><p id=\"338fbb21c2kwr\">请参考以下操作修改客户端SID。</p><ol id=\"653c6091eekih\"><li data-tag=\"step\" id=\"step-es5-t6b-y5o\" class=\"step\"><p id=\"3cd2ba00c7gb7\">远程连接Windows实例。</p><p id=\"8a7880f0c7nxl\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li data-tag=\"step\" id=\"step-mjv-oz2-klt\" class=\"step\"><p id=\"3cd2ba01c73cf\">下载修改客户端SID的PowerShell脚本。</p><ul id=\"5ff727f1c7wng\"><li id=\"5e152180c7dk4\"><p id=\"3cd2e110c7rkw\">下载地址：<a class=\"\" target=\"_blank\" href=\"https://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/attach/40846/cn_zh/1542010494209/AutoSysprep.ps1\">AutoSysprep.ps1</a></p></li><li id=\"5e152181c7yf5\"><p id=\"3cd2e111c7vad\">脚本来源：阿里云官方</p></li></ul></li><li data-tag=\"step\" id=\"step-q11-4gc-mna\" class=\"step\"><p id=\"3cd2e112c7psy\">打开CMD，输入powerShell切换至<b data-tag=\"uicontrol\" id=\"uicontrol-gjg-rd8-85p\" class=\"uicontrol\">Windows PowerShell</b>界面。</p><div data-tag=\"note\" id=\"note-8ul-i5y-c9w\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3cd2e113c73ue\">如果您的实例操作系统是64位，则不能使用32位的PowerShell（即<b data-tag=\"uicontrol\" id=\"uicontrol-4ba-ook-r0c\" class=\"uicontrol\">Windows PowerShell (x86)</b>），否则会报错。</p></div></div></li><li data-tag=\"step\" id=\"step-fxr-npu-6cg\" class=\"step\"><p id=\"3cd2e114c7058\">切换至脚本存储的路径，执行如下命令，查看脚本工具说明。</p><pre data-tag=\"codeblock\" id=\"codeblock-2hj-ohs-355\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>.\\AutoSysprep.ps1 -help</code></pre></li><li data-tag=\"step\" id=\"step-z22-bqi-ien\" class=\"step\"><p id=\"3cd2e115c7h62\">执行如下命令，重新初始化服务器的SID。</p><pre data-tag=\"codeblock\" id=\"codeblock-xse-1k2-rgb\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>.\\AutoSysprep.ps1 -ReserveHostname -ReserveNetwork -SkipRearm -PostAction \"reboot\"</code></pre><p id=\"3cd2e116c7t40\">初始化完成后，会重启实例，您需要注意以下事项。 </p><ul id=\"8c871fa1ee0n0\"><li data-tag=\"li\" id=\"li-bst-cqd-9it\" class=\"li\"><p id=\"3cd2e117c7aji\">IP地址的获取方式会从DHCP变成固定IP地址，请确保该固定IP地址和开始设置前ECS实例的IP地址一致。您也可以将获取方式改回DHCP，以自动获取控制台中为ECS实例分配的主私有IP地址。</p><div data-tag=\"note\" id=\"note-f9s-kp2-p2x\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3cd2e118c7bfh\">请不要在控制台修改ECS实例的主私有IP地址，否则IP地址变化会导致访问异常。</p></div></div><img data-tag=\"image\" id=\"image-g63-nj5-qb5\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7375688951/p13288.png\" width=\"400\" alt=\"重新改成DHCP\" props=\"china\" placement=\"break\" data-cond-props=\"china\" class=\"image break\"></li><li data-tag=\"li\" id=\"li-ogl-84g-glf\" class=\"li\"><p id=\"3cd30820c7xc9\">初始化SID后，云服务器防火墙的配置被修改成微软的默认配置，导致云服务器无法Ping通。您需要关闭防火墙<b data-tag=\"uicontrol\" id=\"uicontrol-vxb-taw-ou9\" class=\"uicontrol\">来宾或公用网络</b>，或者放行需要开放的端口。下图表示防火墙<b data-tag=\"uicontrol\" id=\"uicontrol-mrl-4yn-j3b\" class=\"uicontrol\">来宾或公用网络</b>的状态是已连接。<img data-tag=\"image\" id=\"image-23r-3jw-2ax\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8375688951/p13291.png\" width=\"400\" alt=\"来宾或公用网络\" props=\"china\" placement=\"break\" data-cond-props=\"china\" class=\"image break\"></p></li></ul></li><li data-tag=\"step\" id=\"step-0mg-cl2-s49\" class=\"step\"><p id=\"3cd30821c7wls\">打开控制面板修改防火墙设置，关闭来宾或公用网络防火墙。</p><img data-tag=\"image\" id=\"image-52i-r78-pug\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8375688951/p13292.png\" width=\"400\" alt=\"关闭来宾或公用网络防火墙\" props=\"china\" placement=\"break\" data-cond-props=\"china\" class=\"image break\"><p id=\"3cd30823c7cjb\">关闭后，可以Ping通服务器。<img data-tag=\"image\" id=\"image-b8e-op8-asv\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8375688951/p13293.png\" width=\"400\" alt=\"PING通服务器示意图\" props=\"china\" placement=\"break\" data-cond-props=\"china\" class=\"image break\"></p></li></ol></li><li id=\"ed848f70d4n53\"><p id=\"ed846860d48k5\"><b>允许客户端通过防火墙等安全软件</b></p><p id=\"cf28ccc1c2u0z\">请参考<a title=\"\" class=\"xref\" href=\"/zh/ecs/configure-windows-firewall-rules-for-windows-server-instances\">Windows Server系统的ECS实例防火墙策略的配置方法</a>允许客户端通过。</p></li></ul></section></div></div></section><section id=\"2a6471b0d4yzf\" class=\"section\"><h2 id=\"3d8d73b0d4nwq\"><b>执行yum、wget命令报错问题</b></h2><div id=\"3d793e80d4frp\" outputclass=\"collapse\" class=\"collapse\"><h4 data-spm-anchor-id=\"a2c4g.11186623.0.i1.168e18b6bGFB62\" jc=\"start\" id=\"67869550bdbjx\" data-tag=\"expandable-title\" style=\"text-align:start\" class=\"expandable-title\"><b>在Linux系统的ECS实例中，执行wget命令时提示“command not found”错误怎么办？</b></h4><div id=\"3d793e82d44zz\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"994c72b0benat\" class=\"section\"><h4 id=\"6083ff40bdb6x\"><b>问题现象</b></h4><p id=\"f5cc5b22bd6qx\">在Linux实例中执行<code data-tag=\"codeph\" class=\"codeph\">wget</code>命令时提示“<b data-tag=\"uicontrol\" id=\"a3ad4ba0bd32n\" class=\"uicontrol\">command not found</b>”，执行<code data-tag=\"codeph\" class=\"codeph\">yum install wget</code>命令时提示“<b data-tag=\"uicontrol\" id=\"a9329080bdzsa\" class=\"uicontrol\">already installed and latest version</b>”。</p></section><section id=\"7d17d620beh16\" class=\"section\"><h4 id=\"tayMx\"><b>问题原因</b></h4><p id=\"f5cc5b23bdm45\">检查<code data-tag=\"codeph\" class=\"codeph\">/usr/bin</code>目录中没有<code data-tag=\"codeph\" class=\"codeph\">wget</code>命令文件，但存在<code data-tag=\"codeph\" class=\"codeph\">wge</code>命令的文件，可能是由于命令文件有被重命名导致报错。</p></section><section id=\"8c3920a0bemoh\" class=\"section\"><h4 id=\"4f532a49d4ro8\"><b>解决方案</b></h4><p id=\"f5cc8235bdho9\">请您参考以下步骤进行操作。</p><ol id=\"f5cc8236bdigt\"><li id=\"f5cc8237bdq2o\"><p id=\"f5cc8238bdmdr\">远程连接Linux实例。</p><p id=\"01de9b70bd5zq\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"fbfeda80bd955\"><p id=\"fbfeb370bdqxv\">执行以下命令查询<code data-tag=\"code\" class=\"code\">wge</code>命令的路径。</p><pre data-tag=\"codeblock\" id=\"f5c8d8b1bdlx9\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>whereis wge</code></pre><p id=\"f5cc823abdo9g\"> 命令返回结果如下，表示<code data-tag=\"code\" class=\"code\">wge</code>命令路径为<code data-tag=\"code\" class=\"code\">/usr/bin/wge</code>。</p><pre id=\"k11ldd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>wge：/usr/bin/wge</code></pre></li><li id=\"f5cca940bdvc9\"><p id=\"f5cca941bdkkp\">根据上述的路径，执行以下命令重命名即可。</p><pre id=\"dczxbb\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cp /usr/bin/wge /usr/bin/wget</code></pre></li><li id=\"9cdb3a51bfiq8\"><p id=\"a2053fd0bfcch\">重新执行<code data-tag=\"code\" class=\"code\">wget</code>命令，若不再提示以上报错信息，则表示问题已修复。</p></li></ol></section></div></div><div id=\"3dc8be10d418m\" outputclass=\"collapse\" class=\"collapse\"><h4 data-spm-anchor-id=\"a2c4g.11186623.0.i0.672d26dfStQnTx\" jc=\"start\" id=\"7a34fe30bd475\" data-tag=\"expandable-title\" style=\"text-align:start\" class=\"expandable-title\"><b>在Linux实例系统的ECS实例中，使用wget命令下载时提示“Permission denied”错误怎么办？</b></h4><div id=\"3dc8be12d43l0\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"a07d6bc0beyzw\" class=\"section\"><h4 id=\"84e46fa1bdcgg\"><b>问题现象</b></h4><p id=\"84e46fa2bdc3v\">在Linux系统的ECS实例中，使用<code data-tag=\"code\" class=\"code\">wget</code>下载时提示以下信息。</p><pre id=\"ntnpdm\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>wget bash: /usr/bin/wget: Permission denied</code></pre></section><section id=\"a3aa41b0be3o2\" class=\"section\"><h4 id=\"84e46fa3bdaaz\"><b>问题原因</b></h4><p id=\"84e46fa4bdb60\">在Linux实例系统的ECS实例中，<code data-tag=\"code\" class=\"code\">wget</code>命令权限为000，没有读写执行权限。</p></section><section id=\"abf165b0bet6v\" class=\"section\"><h4 id=\"84e46fa5bdyr2\"><b>解决方案</b></h4><p id=\"84e46fa6bdzs0\">请您参考以下步骤进行操作。</p><ol id=\"84e46fa7bd0qu\"><li id=\"84e46fa8bdnfu\"><p id=\"84e46fa9bddzo\">远程连接Linux实例。</p><p id=\"151d3662bdqy8\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"14836760bdx6w\"><p id=\"14834050bd99t\">执行以下命令查看<code data-tag=\"code\" class=\"code\">wget</code>命令权限。</p><pre data-tag=\"codeblock\" outputclass=\"language-javascript\" id=\"328d1ca3bdzjv\" class=\"pre codeblock language-javascript\"><code>ls -l /usr/bin/wget</code></pre><p id=\"328d43b0bdviy\">命令返回结果如下，说明<code data-tag=\"code\" class=\"code\">wget</code>命令权限为000，没有读写执行权限。</p><pre data-tag=\"codeblock\" outputclass=\"language-javascript\" id=\"328d43b3bdf0l\" class=\"pre codeblock language-javascript\"><code>-------- 1 root root 366800 Oct 31 2014 /usr/bin/wget</code></pre></li><li id=\"8b8d8921bdkgr\"><p id=\"aa391920bdmkk\">执行以下命令，查看<code data-tag=\"code\" class=\"code\">/usr/bin/wget</code>目录属性。</p><pre id=\"ke7ubr\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>lsattr /usr/bin/wget</code></pre><p id=\"b7f1d2f0bdwd7\">命令返回结果如下，表示<code data-tag=\"code\" class=\"code\">/usr/bin/wget</code>目录属性为<code data-tag=\"code\" class=\"code\">i</code>（不允许在该目录下新建和删除文件）。</p><pre id=\"yq77hu\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>----i--------e- /usr/bin/wget</code></pre></li><li id=\"b485f830bdutz\"><p id=\"c1b75990bdabc\">执行以下命令，移除<code data-tag=\"code\" class=\"code\">/usr/bin/wget</code>目录<code data-tag=\"code\" class=\"code\">i</code>属性。</p><pre id=\"agzrvd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chattr -i /usr/bin/wget</code></pre></li><li id=\"e1d8b8f1c4og3\"><p id=\"e42f2c10c4zls\">执行以下命令，对<code data-tag=\"code\" class=\"code\">/usr/bin/wget</code>目录进行授权。</p><pre id=\"qgp9xp\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chmod 755 /usr/bin/wget </code></pre></li><li id=\"d40727b0bd570\"><p id=\"d40700a0bdlyl\">重新执行<code data-tag=\"code\" class=\"code\">wget</code>命令，若不再提示以上报错信息，则表示问题已修复。</p></li></ol></section></div></div><div id=\"3e129850d4tbu\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"7fbcaea0be756\" class=\"expandable-title\"><b>在CentOS 7系统的ECS实例中，执行yum命令提示“-bash: /usr/bin/yum: /usr/bin/python: bad interpreter: No such file or directory”错误怎么办？</b></h4><div id=\"3e129852d4hjn\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"b51633b0bf6wk\" class=\"section\"><h4 data-tag=\"h4\" id=\"7fbd71f4betx3\" class=\"h4\"><b>问题现象</b></h4><p id=\"7fbd71f5beq0u\">在CentOS 7系统的ECS实例中执行<code data-tag=\"codeph\" class=\"codeph\">yum</code>命令时，提示以下报错信息。</p><pre data-tag=\"codeblock\" id=\"7fb64604bevv6\" outputclass=\"language-javascript\" height=\"43\" class=\"pre codeblock language-javascript\"><code>-bash: /usr/bin/yum: /usr/bin/python: bad interpreter: No such file or directory</code></pre></section><section id=\"b7a32020bfqbn\" class=\"section\"><h4 id=\"d557e230bexva\"><b>问题原因</b></h4><p id=\"d6c024c0bep9t\">可能是由于Python异常（Python被卸载、改名或移动路径），导致执行<code data-tag=\"code\" class=\"code\">yum</code>命令时报错。</p><div type=\"note\" id=\"712591a0c2625\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"74404110cduz3\"><code data-tag=\"code\" class=\"code\">yum</code>（ Yellow dog Updater, Modified）是一个在Fedora、RedHat以及SUSE中的Shell前端软件包管理器。</p></div></div></section><section id=\"bb9c1fb0bfmy7\" class=\"section\"><h4 data-tag=\"h4\" id=\"7fbd9900bebia\" class=\"h4\"><b>解决方案</b></h4><p id=\"700e34f1bej7i\">请参考以下操作，排查Python是否异常并修复。</p><ol id=\"7fbd9901beeg2\"><li id=\"7fbd9902bemkl\"><p id=\"7fbd9903becfb\">远程连接Linux实例。</p><p id=\"d8830da0beqkq\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"cfe53e20bewze\"><p id=\"cfe51710beusb\">执行以下命令，查看<code data-tag=\"codeph\" class=\"codeph\">yum</code>路径。</p><pre id=\"5wy6zx\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>which yum</code></pre><p id=\"15242b40c3oz8\">系统返回如下信息，表示<code data-tag=\"code\" class=\"code\">yum</code>路径为<code data-tag=\"code\" class=\"code\">/usr/bin/yum</code>。</p><pre id=\"dsk8ff\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>/usr/bin/yum</code></pre></li><li id=\"d4dfd660c3epx\"><p id=\"d4dfaf50c3hgn\">执行以下命令，查看<code data-tag=\"code\" class=\"code\">yum</code>内容。</p><pre id=\"pygqhk\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /usr/bin/yum</code></pre><p id=\"7fbd9904becwf\"> 系统返回以下信息，表示使用的Python版本路径。 </p><pre data-tag=\"codeblock\" id=\"7fb64606behkt\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>#!/usr/bin/python</code></pre><div type=\"note\" id=\"f91abd61c3lg0\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"f942b7c0c3mva\">本文以<code data-tag=\"code\" class=\"code\">/usr/bin/python</code>路径为示例，请根据实际情况更换实际路径。</p></div></div></li><li id=\"7fbd9906be0bg\"><p id=\"7fbd9907bei3g\">执行以下命令，检查上述查看的路径。</p><pre data-tag=\"codeblock\" id=\"7fb64607beuts\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls -al /usr/bin/python</code></pre><p id=\"7fbd9908be12i\"> 如果系统返回类似以下信息，则表示Python可能被卸载、改名或移动路径。</p><pre data-tag=\"codeblock\" id=\"7fb64608belc3\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls: cannot access /usr/bin/python: No such file or directory</code></pre></li><li id=\"7fbdc010bei3y\"><p id=\"7fbdc011behiw\">执行以下命令，查看Python相关文件是否存在。</p><pre data-tag=\"codeblock\" id=\"7fb64609be2l7\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>rpm -qa | grep python</code></pre><p id=\"7fbdc012bev8b\">正常情况下，系统返回类似以下信息。</p><pre data-tag=\"codeblock\" id=\"7fb6460abe4z7\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>python-decorator-3.4.0-3.el7.noarch\nlibselinux-python-2.5-14.1.el7.x86_64\npython-backports-1.0-8.el7.x86_64\npython-pyudev-0.15-9.el7.noarch\nrpm-python-4.11.3-35.el7.x86_64\npython-2.7.5-76.el7.x86_64\n.....</code></pre><ul id=\"30fd59e1c43hn\"><li id=\"2f3d3351c4can\"><p id=\"7129f724c413x\">Python相关文件存在：说明Python相关文件被改名或移动路径。</p><ol id=\"3c78cde1c4xub\"><li id=\"89afbc81c4i45\"><p id=\"89afbc80c4k3d\">执行以下命令，查看Python相关文件。</p><pre id=\"7129f728c4krn\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls -al /usr/bin/python*</code></pre><p id=\"7129f729c46c0\">系统返回类似以下信息，提示“<code data-tag=\"code\" class=\"code\">/usr/bin/python.bak -&gt; python2</code>”，则表示Python名称已被更改。</p><pre id=\"7129f72ac4q3y\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>lrwxrwxrwx  1 root root   14 Feb 15  2019 /usr/bin/python-config -&gt; python2-config\nlrwxrwxrwx. 1 root root    7 Feb 15  2019 /usr/bin/python.bak -&gt; python2\nlrwxrwxrwx. 1 root root    9 Feb 15  2019 /usr/bin/python2 -&gt; python2.7\nlrwxrwxrwx  1 root root   16 Feb 15  2019 /usr/bin/python2-config -&gt; python2.7-config\n-rwxr-xr-x. 1 root root 7216 Oct 31  2018 /usr/bin/python2.7\n-rwxr-xr-x  1 root root 1835 Oct 31  2018 /usr/bin/python2.7-config</code></pre></li><li id=\"a400cc01c4e45\"><p id=\"712a1e31c4647\">执行以下命令，将<code data-tag=\"codeph\" class=\"codeph\">/usr/bin/python.bak</code>名称改为<code data-tag=\"codeph\" class=\"codeph\">/usr/bin/python</code>。</p><pre id=\"712a1e32c4ssg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>mv python.bak python</code></pre></li><li id=\"ac569601c490o\"><p id=\"712a1e34c4sfg\">重新执行<code data-tag=\"code\" class=\"code\">yum</code>命令，若不再提示以上报错信息，则表示问题已修复。</p></li></ol></li><li id=\"6639e421c4w70\"><p id=\"6639e420c47up\">Python相关文件不存在：说明Python被卸载。</p><ol id=\"6ba44e01c473o\"><li id=\"6b292a91c4p88\"><p id=\"6b292a90c4tw5\">依次执行如下命令，安装Python。</p><pre id=\"vlxpxd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>mkdir /python/\n  \nyum install python --downloadonly --downloaddir=/python/</code></pre></li><li id=\"75f88011c4ksv\"><p id=\"712a1e3cc4zo8\">重新执行<code data-tag=\"code\" class=\"code\">yum</code>命令，若不再提示以上报错信息，则表示问题已修复。</p></li></ol></li></ul></li></ol></section></div></div></section><section id=\"5b49eb70dcl9r\" class=\"section\"><h2 id=\"e3834d70d4izm\"><b>无法连接ECS实例中的FTP服务问题</b></h2><ul id=\"000b4342d4nk1\"><li id=\"000b4340d4cl9\"><p id=\"d5118761d4kbw\">Windows实例</p><div id=\"3e5b1300d4q0s\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"78ffabd0c1enn\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>在Windows系统的ECS实例中，无法通过外网环境连接和访问FTP服务怎么办？</b></h4><div id=\"3e5b1302d47zc\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"6cea68d0c125v\" class=\"section\"><h4 id=\"f437c5a2d467u\"><b>问题现象</b></h4><p id=\"f25d0ff6bfxdc\">在Windows系统的ECS实例中，已经搭建的FTP服务，外网环境无法连接和访问该FTP服务器。</p></section><section id=\"6ec172c0c1ybk\" class=\"section\"><h4 id=\"f437c5a5d4qiv\"><b>问题原因</b></h4><p id=\"f25d0ff7bf97u\">可能导致该问题的原因如下：</p><ul data-spm-anchor-id=\"a2c9r.12641768.0.i2.10f75e3bdT7ibG\" id=\"f25d0ff8bfeye\"><li id=\"f25d0ff9bf67a\"><p id=\"8429fd20c117g\"><b data-tag=\"uicontrol\" id=\"89c8bd70c1q52\" class=\"uicontrol\">未放行FTP的安全组规则</b>：请参考<a title=\"\" class=\"xref\" href=\"#f25d3704bf6cm\">方案一：添加FTP的安全组规则</a>进行操作。</p></li><li id=\"863d4cc1c1fco\"><p id=\"863d4cc0c1paw\"><b data-tag=\"uicontrol\" id=\"8b36a550c1kj0\" class=\"uicontrol\">防火墙拦截FTP进程</b>：请参考<a title=\"\" class=\"xref\" href=\"#f25d3707bfro3\">方案二：配置FTP防火墙支持</a>进行操作。</p></li></ul></section><section id=\"71f351c0c146z\" class=\"section\"><h4 id=\"f437c5add47nj\"><b>解决方案</b></h4><p id=\"b7a21b10c11ch\">请根据实际情况，选择以下两种分案进行操作。</p><p data-tag=\"h3\" id=\"f25d3704bf6cm\" class=\"h3\"><b>方案一：添加FTP的安全组规则</b></p><p id=\"p-gsh-p45-ov2\" class=\"p\">当您在Windows系统的ECS实例中搭建好FTP站点后，需要在Windows系统的ECS实例所属的安全组中，添加入方向规则，放行FTP服务器所需的21端口以及FTP服务器被动模式可能占用的端口范围1024~65535，具体操作请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。</p><div type=\"note\" id=\"692af591bf4ee\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"f25d3706bfm4b\" class=\"p\">关于安全组的更多配置信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/security-groups-for-different-use-cases\">安全组应用案例</a>和<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/common-ports\">常用端口</a>。</p></div></div><p data-tag=\"h3\" id=\"f25d3707bfro3\" class=\"h3\"><b>方案二：配置FTP防火墙支持</b></p><p id=\"f25d3708bfzkk\">如果您的防火墙为开启状态，则需要通过配置IIS管理器放行TCP<b data-tag=\"uicontrol\" id=\"858fd940c1xc7\" class=\"uicontrol\">21</b>端口与<b data-tag=\"uicontrol\" id=\"88d60390c1yro\" class=\"uicontrol\">1024~65535</b>端口用于FTP服务。请参考以下步骤进行操作。</p><div type=\"note\" id=\"9da4a271c1c3j\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"86fbdc42cdfdc\"><li id=\"86fbdc40cda44\"><p id=\"779e0e10c1f9s\">Windows系统的ECS实例内部的防火墙默认为关闭状态。</p></li><li id=\"87d52540cdpqb\"><p id=\"87d4fe30cdraf\">本文以IIS管理器为例，介绍如何配置FTP。</p></li></ul></div></div><ol id=\"db386831c14ri\"><li id=\"db384120c19fn\"><p id=\"d9bee790c1ec8\">远程连接Windows实例。</p><p id=\"fdc79b00c1pqj\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"131cb9e1c1mx3\"><p id=\"19e183a0c16a7\">打开<b data-tag=\"uicontrol\" id=\"1e071170c1lrk\" class=\"uicontrol\">IIS 管理器</b>，然后双击<b data-tag=\"uicontrol\" id=\"211e1570c1wh4\" class=\"uicontrol\">FTP防火墙支持</b>，进入FTP防火墙支持的配置界面。</p><img id=\"31f414d0c1x62\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0346868761/p581845.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li><li id=\"336c5cf1c1hsl\"><p id=\"eda979f2c14a4\">配置相关参数，并单击<b data-tag=\"uicontrol\" id=\"3b09d370c1ekh\" class=\"uicontrol\">应用</b>。</p><img id=\"bc062690c10me\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0346868761/p581852.png\" alt=\"image\" placement=\"break\" class=\"image break\"><div type=\"note\" id=\"4e22bdf1c18x0\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"4e22bdf0c17y5\">参数说明如下：</p><ul id=\"555fc4f2c1dj2\"><li id=\"ZH-CN-TOPIC-0191603494-zh-cn-topic-0109724372-li62278890193357\"><p id=\"eda9a100c16hb\"><b data-tag=\"uicontrol\" id=\"5e4d1400c140g\" class=\"uicontrol\">防火墙的外部IP地址</b>：输入该Windows系统的ECS实例的公网IP地址。</p></li><li id=\"ZH-CN-TOPIC-0191603494-zh-cn-topic-0109724372-li21832957193357\"><p id=\"eda979f4c17ny\"><b data-tag=\"uicontrol\" id=\"5fe34460c1h0a\" class=\"uicontrol\">数据通道端口范围</b>：指定用于被动连接的端口范围。可指定的有效端口范围为1025-65535。请根据实际需求进行设置，本文以<b data-tag=\"uicontrol\" id=\"a9cd2080c1b7v\" class=\"uicontrol\">1024~65535</b>端口为例。</p></li></ul></div></div></li><li id=\"1bd7dff0c1qr1\"><p id=\"1bd7b8e0c1zz0\">打开命令行，执行以下命令重启FTP服务，确保覆盖每个FTP站点的配置。</p><pre id=\"fhg4vk\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>net stop ftpsvc&amp;net start ftpsvc</code></pre></li><li id=\"76b7e1e1c1bkt\"><p id=\"c9813090c1ahv\">（可选）若配置好FTP服务器后，可以在本机访问，但是无法通过另一台机器访问，该问题是由于防火墙配置错误，请参考以下操作进行配置：</p><ol id=\"de7e0b61c1del\"><li id=\"f25d370abfhir\"><p id=\"f25d370bbfpj1\">首先检查服务器管理器中的入站规则，确保已启用FTP服务器。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0346868761/p518889.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></li><li id=\"f25d5e10bft9p\"><p id=\"f25d5e11bfakr\">添加Windows服务主进程。</p><ol id=\"25395821c1kau\"><li id=\"24cd28d0c1pc9\"><p id=\"24ccdab0c1pmj\">打开<b data-tag=\"uicontrol\" id=\"ed2ae930c1ito\" class=\"uicontrol\">控制面板 &gt; Windows防火墙</b>，然后单击左侧的<b data-tag=\"uicontrol\" id=\"f565d830c1tla\" class=\"uicontrol\">允许程序或功能通过Windows防火墙</b>。</p></li><li id=\"3feafe30c195k\"><p id=\"3fead720c10sq\">在新窗口中单击<b data-tag=\"uicontrol\" id=\"f99466b0c14f0\" class=\"uicontrol\">允许运行另一程序</b>，在浏览中找到<code data-tag=\"codeph\" class=\"codeph\">C:\\Windows\\System32\\svchost.exe</code>打开并添加。</p></li><li id=\"49e10ab0c1tdb\"><p id=\"49e0e3a0c1f74\">此时会多出一项<b data-tag=\"uicontrol\" id=\"5c8bf120c1777\" class=\"uicontrol\">Windows服务主进程</b>，选中<b data-tag=\"uicontrol\" id=\"7d9631a0c1q49\" class=\"uicontrol\">家庭/工作(专用)</b>与<b data-tag=\"uicontrol\" id=\"7eed0f10c1ww5\" class=\"uicontrol\">公用</b>，然后单击<b data-tag=\"uicontrol\" id=\"855bc990c1cvy\" class=\"uicontrol\">确定</b>。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9246868761/p518890.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></li></ol></li></ol></li></ol></section></div></div><div id=\"3ea0ce90d4lxs\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"1285cc50d46z4\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>连接Windows系统的ECS实例中的FTP服务器时，提示“530 Login incorrect”错误怎么办？</b></h4><div id=\"3ea0ce92d400m\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"8410dd90c1849\" class=\"section\"><h4 id=\"c47ab141c1utp\"><b>问题现象</b></h4><p id=\"0f554a40c1lla\">连接Windows系统的ECS实例中的FTP服务器时，提示以下错误。</p><pre id=\"k3ddei\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>响应：331 Please specify the password.\n命令：PASS ************\n响应：530 Login incorrect.\n错误：严重错误：无法连接到服务器</code></pre></section><section id=\"7b1b0300c1hxx\" class=\"section\"><h4 id=\"768af390c1rz7\"><b>问题原因</b></h4><p id=\"a2362690c1oep\">可能是由于以下原因导致的：</p><ul id=\"b33e8092c1tvp\"><li id=\"b33e8090c1pmy\"><p id=\"b57b7840c1p5b\"><b data-tag=\"uicontrol\" id=\"13b812b0c19z5\" class=\"uicontrol\">FTP密码不正确</b>：请参考<a title=\"\" class=\"xref\" href=\"#4335f890c1rwc\">方案一：修改FTP密码</a>进行操作。</p></li><li id=\"b666c2a1c1929\"><p id=\"b99d5c90c1x67\"><b data-tag=\"uicontrol\" id=\"1577c410c16o7\" class=\"uicontrol\">FTP用户权限配置错误</b>：请参考<a title=\"\" class=\"xref\" href=\"#52992e10c11i1\">方案二：添加FTP用户权限</a>进行操作。</p></li></ul></section><section id=\"795b2a90c1kv9\" class=\"section\"><h4 id=\"775bb110c11kr\"><b>解决方案</b></h4><p id=\"d5c80e11c1piv\">请根据实际情况，选择以下两种方案进行操作。</p><p id=\"4335f890c1rwc\"><b>方案一：修改FTP密码</b></p><ol id=\"9e7a61a2c1mez\"><li id=\"9e7a61a0c1n70\"><p id=\"d3139c71c1a9a\">远程连接Windows实例。</p><p id=\"a09e7a20c1l76\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"a1e4b5c0c18nw\"><p id=\"af6dfb20c1c4z\">右键单击桌面的<b data-tag=\"uicontrol\" id=\"be203020c1dsd\" class=\"uicontrol\">计算机 &gt; 管理</b>，打开服务器管理器。</p></li><li id=\"c9a54111c1heb\"><p id=\"d28d8710c17e2\">单击左侧配置<b data-tag=\"uicontrol\" id=\"d832d710c1lsv\" class=\"uicontrol\">本地用户和组 &gt; 用户</b>，右键单击对应的FTP账号，选择<b data-tag=\"uicontrol\" id=\"d9e2f810c1ady\" class=\"uicontrol\">设置密码</b>。</p><img id=\"e0529cf0c17hx\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9246868761/p581893.png\" alt=\"image\" placement=\"break\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></li></ol><p id=\"52992e10c11i1\"><b>方案二：添加FTP用户权限</b></p><ol id=\"7c01eb21c1lt3\"><li id=\"7c01eb22c1k9h\"><p id=\"7c01eb23c17r0\">远程连接Windows实例。</p><p id=\"a3712220c1ju8\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"a467b720c1az4\"><p id=\"d6c3f2e0c15uo\">检查FTP对应的目录文件是否正常存在。</p><ol id=\"9c30df71c14fn\"><li id=\"9c078581c1l1g\"><p id=\"9c078580c1rdm\">若不存在：请参考<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/manually-build-an-ftp-site-on-a-windows-instance#section-jd9-tsn-noi\">步骤三：设置共享文件的权限</a>，重新创建FTP对应文件并添加相关权限。</p></li><li id=\"a205f201c1nfc\"><p id=\"a205f200c1vdc\">若存在：右键单击该文件夹，选择<b data-tag=\"uicontrol\" id=\"d1f0a370c1neo\" class=\"uicontrol\">属性 &gt; 安全</b>，选择对应FTP账号添加相关权限。</p><img id=\"91a1c740c1kgd\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9246868761/p581989.png\" alt=\"image\" placement=\"break\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></li></ol></li></ol></section></div></div><div id=\"3eeb4510d4c5e\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"4609f830d493z\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>连接Windows系统的ECS实例中的FTP服务器时，提示“530 valid hostname is expected”错误怎么办？</b></h4><div id=\"3eeb4512d4st0\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"3be9bd10c1917\" class=\"section\"><h4 id=\"2f25ea91c1824\"><b>问题现象</b></h4><p id=\"970cd7f1c1ezn\">通过IIS 7.5配置的FTP绑定域名后，通过IP等方式连接Windows系统的ECS实例中的FTP服务器时，提示“<b data-tag=\"uicontrol\" id=\"804791d0c1v5d\" class=\"uicontrol\">530 valid hostname is expected</b>”或者“<b data-tag=\"uicontrol\" id=\"83b2a940c1kgj\" class=\"uicontrol\">503 Login with USER first</b>”错误。</p></section><section id=\"3d3b6a60c19b6\" class=\"section\"><h4 id=\"31cacbd0c1kfx\"><b>问题原因</b></h4><p id=\"0e473c00c134a\">通过IIS 7.5配置的FTP绑定域名后，在登录FTP时，输入的域名格式不正确。</p></section><section id=\"3e93a760c1tf8\" class=\"section\"><h4 id=\"32dc62e0c19fb\"><b>解决方案</b></h4><p id=\"24441720c1e0u\">如果FTP绑定的域名是<code data-tag=\"code\" class=\"code\">www.example.com</code>，用户名为<code data-tag=\"code\" class=\"code\">user</code>，则登录时需要使用<code data-tag=\"code\" class=\"code\">www.example.com|user</code>进行登录。</p><div type=\"note\" id=\"4f382f20c1f1n\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"952e0902c1ea8\"><li id=\"952e0900c1fbe\"><p id=\"4f982970c1p8p\">注意中间用“|”分隔。</p></li><li id=\"963b8160c1e79\"><p id=\"7427e730c1frk\">您也可以将域名绑定删除，然后直接通过用户名进行登录。请参考下图进行操作。</p></li></ul></div></div><img id=\"04bec460cdrey\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3220700861/p611385.png\" alt=\"image\" placement=\"break\" class=\"image break\"></section></div></div><div id=\"3f7dc110d4ip0\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"047529e0d4uhz\" class=\"expandable-title\"><b>Windows系统的ECS实例中，通过FTP上传文件到FileZilla Server失败，提示“550 Permission denied”错误怎么办？</b></h4><div id=\"3f7dc112d4ad2\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"0dd36330d409g\" class=\"section\"><h4 id=\"0dd36331d4p8r\"><b>问题现象</b></h4><p id=\"0dd36332d4aqg\">在Windows系统的ECS实例中，通过FTP向FileZilla Server上传文件时，提示“<b data-tag=\"uicontrol\" id=\"79ee3840d7kv9\" class=\"uicontrol\">550 Permission denied</b>”错误。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1665367761/p518603.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"><h4 id=\"0dd36335d4roy\"><b>问题原因</b></h4><p id=\"0dd36336d4j0k\">FileZilla Server中相应的FTP账号没有<code data-tag=\"code\" class=\"code\">write</code>权限。</p><h4 id=\"0dd36337d4aip\"><b>解决方案</b></h4><ol id=\"0dd36338d43lj\"><li id=\"0dd36339d4b24\"><p id=\"0dd3633ad4vr0\">远程连接Windows实例。</p><p id=\"0dd3633bd43yq\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"0dd3633cd4vum\"><p id=\"0dd3633dd4gr2\">运行FileZilla Server软件。在<b data-tag=\"uicontrol\" id=\"79ee5f50d7gyf\" class=\"uicontrol\">Users</b>配置页面，选择<b data-tag=\"uicontrol\" id=\"79ee5f51d7v09\" class=\"uicontrol\">Shared folders</b>配置项。</p></li><li id=\"0dd3633ed4sj7\"><p id=\"0dd3633fd4gkn\">选择对应的用户与目录，勾选<b data-tag=\"uicontrol\" id=\"79ee5f52d772o\" class=\"uicontrol\">Write</b>单选框，单击<b data-tag=\"uicontrol\" id=\"79ee5f53d7bjt\" class=\"uicontrol\">OK</b>按钮，完成权限配置。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1665367761/p518604.png\" class=\"image break\"></li></ol></section></div></div><div id=\"eb381c80d497z\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"4a0867608421b\" class=\"expandable-title\"><b>通过FTP over TLS方式连接Windows实例上IIS服务创建的FTP站点时，提示“534 Policy requires SSL”信息，如何处理？</b></h4><div id=\"eb381c82d4j2q\" data-tag=\"expandable-content\" class=\"expandable-content\"><h4 id=\"h2-u95EEu9898u73B0u8C611\"><b>问题描述</b></h4><p id=\"93e66270a94vo\">通过FTP over TLS方式连接Windows实例上IIS服务创建的FTP站点时，提示“534 Policy requires SSL”信息，无法连接FTP站点。</p><p id=\"633c0270b3o2c\" props=\"china\" data-cond-props=\"china\">报错示例如下：</p><img id=\"93e66272a9u13\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0306106761/p559212.jpg\" alt=\"报错信息原图新\" placement=\"break\" class=\"image break\"><h4 id=\"9c876640a9qlp\"><b>问题原因</b></h4><p id=\"a39c4bd0a9l2q\">由该问题的“534 Local policy on server does not allow TLS secure connections.”响应信息可知，FTP站点的<b data-tag=\"uicontrol\" id=\"26a7d0e0a9uif\" class=\"uicontrol\">FTP SSL 设置</b>参数不正确导致该问题。</p><h4 id=\"h2-u89E3u51B3u65B9u68482\"><b>解决方案</b></h4><ol id=\"b2823b00a92aa\"><li id=\"b2823b01a9bnb\"><p id=\"b2823b02a9nlz\">远程连接Windows实例。</p><p id=\"b2823b03a9ouy\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"b2823b04a9s1z\"><p id=\"b2823b05a9d3v\">在桌面左下角，选择<img id=\"b2823b06a9wbn\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1306106761/p559246.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"> &gt; Windows<b>管理工具</b> &gt; <b>Internet Information Services（IIS）管理器</b>。<img id=\"b2823b07a9omm\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0306106761/p559243.jpg\" alt=\"打开IIS新\" placement=\"break\" class=\"image break\"></p></li><li id=\"b2823b08a9467\"><p id=\"b2823b09a9ls1\">在FTP主页的<b data-tag=\"uicontrol\" id=\"b5913010a9ken\" class=\"uicontrol\">FTP</b>区域，双击<b data-tag=\"uicontrol\" id=\"af077380a9iki\" class=\"uicontrol\">FTP SSL设置</b>。 <img id=\"b2823b0aa9ytv\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1306106761/p559293.jpg\" alt=\"FTP主页新图\" placement=\"break\" class=\"image break\"></p></li><li id=\"b2823b0ba9et5\"><p id=\"b2823b0ca9e4l\">在<b data-tag=\"uicontrol\" id=\"0d57f930a9mdc\" class=\"uicontrol\">FTP SSL设置</b>区域，将<b data-tag=\"uicontrol\" id=\"1967e830a9wek\" class=\"uicontrol\">SSL 策略</b>设置为<b data-tag=\"uicontrol\" id=\"76248110a9w8g\" class=\"uicontrol\">允许 SSL 连接</b>，然后在<b data-tag=\"uicontrol\" id=\"8c5978a0a90cg\" class=\"uicontrol\">操作</b>列单击<b data-tag=\"uicontrol\" id=\"8f3f5a80a98g5\" class=\"uicontrol\">应用</b>。 <img id=\"b2823b0da9eug\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1306106761/p559300.jpg\" alt=\"勾选SSL连接新图\" placement=\"break\" class=\"image break\"></p></li><li id=\"b2823b0ea9g8p\"><p id=\"b2823b0fa93v0\">再次访问该FTP站点。</p></li></ol></div></div></li><li id=\"02a1cca0d41xo\"><p id=\"02ed5490d4f6z\">Linux实例</p><div id=\"3f36cd02d4lbt\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"60b89100d48gf\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>上传文件到Linux系统的ECS实例中的FTP站点时，提示“425 Security:Bad IP connection”错误怎么办？</b></h4><div id=\"3f36cd04d4ldn\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"f6065cf0c1nh9\" class=\"section\"><h4 id=\"e4370971c1qfz\"><b>问题现象</b></h4><p id=\"111da2a0c1alm\">用户上传文件到Linux系统的ECS实例中的FTP站点时，提示“<b data-tag=\"uicontrol\" id=\"22c88af0c134i\" class=\"uicontrol\">425 Security:Bad IP connection</b>”错误。</p></section><section id=\"f371f670c1bf6\" class=\"section\"><h4 id=\"e7350730c1oqu\"><b>问题原因</b></h4><p id=\"d6ff6680c1jkw\">该问题通常是由于客户端处于NAT网络，而NAT网络关联的公网IP不止一个，导致两次连接时，源IP不一致导致报错。</p><div type=\"note\" id=\"45528da0c14o2\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"457a12d0c1xvk\">FTP服务同时拥有两个连接，一个是控制连接，一个是数据连接。在默认情况下，数据传输时FTP服务器端会核实两个连接的源IP是否一致，如果不一致，就会报“<b data-tag=\"uicontrol\" id=\"3df1d200c1l4q\" class=\"uicontrol\">425 Security:Bad IP connection</b>”错误。</p></div></div></section><section id=\"f219b970c1qju\" class=\"section\"><h4 id=\"e8628ab0c1ri1\"><b>解决方案</b></h4><p id=\"8a17d6c0c15vl\">请参考以下操作，关闭被动模式下的IP安全检查。</p><ol id=\"d6ff8d91c1p4b\"><li id=\"d6ff8d92c1z47\"><p id=\"d6ff8d93c1itw\">远程连接Linux实例。</p><p id=\"b4e6da90c1dgn\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"b0135981c1r1i\"><p id=\"b0135980c1d1w\">执行如下命令，编辑FTP配置文件。</p><pre data-tag=\"codeblock\" id=\"d6faf9b1c1oz4\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vi /etc/vsftpd/vsftpd.conf</code></pre></li><li id=\"d6ff8d95c1sf2\"><p id=\"d6ffb4a0c13e8\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式，在配置文件中添加如下内容。</p><pre id=\"gbvwgf\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>pasv_promiscuous=yes</code></pre></li><li id=\"d6ffb4a2c1oqm\"><p id=\"d6ffb4a3c16cz\">编辑完成后，按<code data-tag=\"code\" class=\"code\">Esc</code>键退出编辑模式，然后输入<code data-tag=\"code\" class=\"code\">:wq</code>并按回车键保存退出。</p></li><li id=\"3bf28a20c1i01\"><p id=\"3bf26310c1hl6\">执行如下命令，重启FTP服务。</p><pre id=\"64hdwk\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart vsftpd</code></pre></li></ol></section></div></div><div id=\"eb8ea0f0d4wj6\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"961807f0d4t0m\" class=\"expandable-title\"><b>Linux系统的ECS实例通过vsftp上传文件失败，提示“553 Could not create file”错误怎么办？</b></h4><div id=\"eb8ea0f2d4t10\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"9d95e880d4r90\" class=\"section\"><h4 id=\"9d95e881d41t0\"><b>问题现象</b></h4><p id=\"9d95e882d4cz4\">Linux系统的ECS实例通过vsftp上传文件失败，提示“<b data-tag=\"uicontrol\" id=\"79ef70c0d7jji\" class=\"uicontrol\">553 Could not create file</b>”错误。</p></section><section id=\"9d95e883d4mfw\" class=\"section\"><h4 id=\"9d95e884d4msk\"><b>问题原因</b></h4><p id=\"9d95e885d456c\">可能由于以下原因导致：</p><ul id=\"9d95e886d494a\"><li id=\"9d95e887d4zbj\"><p id=\"9d95e888d4f6s\">Linux实例磁盘空间已满。</p></li><li id=\"9d95e889d4r7d\"><p id=\"9d95e88ad47iy\">FTP<code data-tag=\"code\" class=\"code\">home</code>目录未拥有<code data-tag=\"code\" class=\"code\">write</code>权限。</p></li></ul></section><section id=\"9d95e88bd4p64\" class=\"section\"><h4 id=\"9d95e88cd4w0l\"><b>解决方案</b></h4><p id=\"9d95e88dd4wdk\">请参考以下操作排查Linux实例磁盘空间大小及FTP<code data-tag=\"code\" class=\"code\">home</code>目录拥有权限情况。</p><ol id=\"9d95e88ed4pyt\"><li id=\"9d95e88fd4dgo\"><p id=\"9d95e890d4iln\">远程连接Linux实例。</p><p id=\"9d95e891d4it8\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"9d95e892d4nwd\"><p id=\"9d95e893d4uj9\">执行如下命令，确认是否为Linux实例磁盘空间已满，导致文件无法上传提示该错误。</p><pre data-tag=\"codeblock\" id=\"9d95e894d49yu\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>df -h</code></pre><div type=\"note\" id=\"9d95e895d44iy\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"9d95e896d413r\">磁盘分区空间使用率达到100%则表示该磁盘空间已满。</p></div></div><p id=\"9d95e897d47fn\"> 系统显示类似如下信息。例如，分区<code data-tag=\"code\" class=\"code\">/dev/xvda1</code>的使用率为59%。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4279227761/p519183.png\" class=\"image break\"></li><li id=\"9d95e89ad4umo\"><p id=\"9d95e89bd4eik\">执行如下命令，确认FTP<code data-tag=\"code\" class=\"code\">home</code>目录是否拥有<code data-tag=\"code\" class=\"code\">write</code>权限。</p><div type=\"note\" id=\"9d95e89cd4qfe\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"9d95e89dd4eyc\" class=\"p\">执行后续命令前，请根据实际情况，更换<code data-tag=\"code\" class=\"code\">/home/user</code>目录为您实际FTP的<code data-tag=\"code\" class=\"code\">home</code>目录名称。</p></div></div><pre data-tag=\"codeblock\" id=\"9d95e89ed4fvj\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls -l /home/user</code></pre><p id=\"9d95e89fd4784\">如下图红框中的权限没有<code data-tag=\"code\" class=\"code\">w</code>，则代表您当前没有<code data-tag=\"code\" class=\"code\">write</code>权限。</p><img id=\"9d95e8a1d4jtu\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9010808761/p575824.png\" alt=\"1111\" placement=\"break\" class=\"image break\"></li><li id=\"9d95e8a2d4lx4\"><p id=\"9d95e8a3d4id9\">执行如下命令，添加<code data-tag=\"code\" class=\"code\">write</code>权限并保存。 </p><pre data-tag=\"codeblock\" id=\"9d95e8a4d4p1x\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chmod +w /home/user</code></pre></li><li id=\"9d95e8a5d4ini\"><p id=\"9d95e8a6d4awf\">执行如下命令，若命令执行结果中存在<code data-tag=\"code\" class=\"code\">w</code>，则表示<code data-tag=\"code\" class=\"code\">write</code>权限添加成功。</p><pre id=\"2e79gc\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls -l /home/user</code></pre></li></ol></section></div></div></li></ul></section><section id=\"511e28f0dcll9\" class=\"section\"><h2 id=\"01fa7940d4g09\"><b>其他问题</b></h2><div id=\"3c13bb10d4knb\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"7cd2a4b08fb8i\" class=\"expandable-title\"><b>部署在ECS实例中的微信公众平台Token验证失败怎么办？</b></h4><div id=\"3c13bb12d4dl9\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"b5356f00bb5t7\" class=\"section\"><h4 id=\"6bc43e61\"><b>问题现象</b></h4><p id=\"7cd2cbc18fnzd\">部署在ECS实例中的微信公众平台Token验证显示失败。</p><img height=\"274\" width=\"475\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5118623761/p519344.png\" class=\"image break\"><h4 id=\"a8e636708fig5\"><b>问题原因</b></h4><p id=\"f96f6e408fbmo\">常见的可能原因如下：</p><ul id=\"f96f6e418fhgf\"><li id=\"f96f6e428fkpl\"><p id=\"f96f6e438fhdo\">非正常编辑文件，如记事本、在线编辑等操作导致文件中添加了utf8的bom签名。 \n</p></li><li id=\"f96f6e558fkhg\"><p id=\"f96f6e568fpma\">ECS实例如果安装了安全狗或者云安全中心，会拦截腾讯服务器的请求。\n</p></li><li id=\"f96f6e5b8f7c7\"><p id=\"f96f6e5c8f5sx\">虚拟主机使用临时域名去验证导致被系统拦截，适用于万网的虚拟主机。</p></li><li id=\"1abbbbc1bcrh4\"><p id=\"1aeeb2a0bcpf1\">PHP文件结束符后包含换行或其他字符。</p></li><li id=\"f96f6e618fbub\"><p id=\"f96f6e628fnf0\">使用了其他的调试验证方法。</p></li><li id=\"13fc9750bcc3n\"><p id=\"13fc7040bc5a0\">程序Gzip加密异常。\n</p></li></ul><h4 id=\"bJiYs\"><b>解决方案</b></h4><p id=\"7cd2cbc28fdsp\">常见原因对应建议处理办法如下：</p><ul id=\"9ed17e9cd4zka\"><li id=\"9ed17e91d4417\"><p id=\"7cd2f2d18f2dc\"><b>非正常编辑文件，如记事本、在线编辑等</b></p><p id=\"7cd2f2d48fmwb\">建议使用多功能编辑器去除bom。</p></li><li id=\"d64bc3d0d42b8\"><p id=\"d64bc3d1d4h7e\"><b>ECS实例安装了安全狗或者云安全中心</b></p><p id=\"7cd340f48f9ov\">建议卸载安全狗，或者提示云安全中心设置白名单。</p></li><li id=\"d5675740d4odf\"><p id=\"d5675741d4inp\"><b>虚拟主机使用临时域名去验证</b></p><p id=\"7cd340fa8frlp\">建议使用已经接入阿里云备案的正式域名来进行验证操作。</p></li><li id=\"d42401d0d4co0\"><p id=\"d42401d1d4cic\"><b>PHP文件结束符后包含换行或其他字符</b></p><p id=\"a4ddb690bcxjo\">建议去除多余的字符。</p></li><li id=\"d2fa27d0d43k9\"><p id=\"d2fa27d1d45x5\"><b>使用了其他的调试验证方法</b></p><p id=\"d2fa27d2d4uno\">执行<code data-tag=\"code\" class=\"code\">curl http://xxx/index.php/api/xx</code>命令，进行调试验证，模拟微信请求API，并对此进行分析。</p></li><li id=\"d2fa27d3d4b8o\"><p id=\"d2fa27d4d4cej\"><b>程序Gzip加密异常</b></p><p id=\"d2fa27d5d4cgl\">建议临时取消程序Gzip功能，进行测试排查。</p></li></ul></section></div></div><div id=\"7b22dfc4d48xl\" outputclass=\"collapse\" class=\"collapse\"><h4 data-tag=\"expandable-title\" id=\"f10891908bp7f\" class=\"expandable-title\"><b>Liunx系统的ECS实例中文字显示乱码怎么办？</b></h4><div id=\"7b22dfc2d41mb\" data-tag=\"expandable-content\" class=\"expandable-content\"><section id=\"37752cb0beh5n\" class=\"section\"><h4 id=\"84679da1d48y6\"><b>问题现象</b></h4><p id=\"f108dfb38ba96\">通过第三方SSH客户端远程连接Linux系统的阿里云Linux系统的ECS实例时，发现中文字体显示乱码。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6172082761/p519950.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></section><section id=\"398966b0be1u4\" class=\"section\"><h4 id=\"84679da6d4054\"><b>问题原因</b></h4><p id=\"f108dfb58b2h8\">造成该问题的可能原因如下：</p><ul id=\"f108dfb68bsuy\"><li id=\"f10906c08bh44\"><p id=\"f10906c18b0db\">Liunx系统未安装中文字体：Liunx系统语言默认不支持中文显示，需要单独安装中文语言包使系统支持中文显示，请参考<a title=\"\" class=\"xref\" href=\"#f1092dd48btvt\">方案一：在Linux系统中安装中文语言包</a>进行修复。</p></li><li id=\"f10906c28bzvv\"><p id=\"f10906c38bdro\">第三方SSH客户端工具字符集设置问题，请参考<a title=\"\" class=\"xref\" href=\"#f109a3088bef2\">方案二：修改第三方SSH客户端工具字符集设置</a>进行修复。</p></li></ul></section><section id=\"3f3fa6a0be6ue\" class=\"section\"><h4 id=\"84679daed4782\"><b>解决方案</b></h4><p id=\"54d17ad1be4lo\">根据实际情况，选择对应方案进行操作。</p><section id=\"4f232fb0be3hf\" class=\"section\"><p data-tag=\"h3\" id=\"f1092dd48btvt\" class=\"h3\"><b>方案一：在Linux系统的ECS实例中安装中文语言包</b></p><p data-spm-anchor-id=\"a2c9r.14518950.0.i8.45c17962UXYBiA\" id=\"f10954e08bwst\">下列操作以CentOS 7.8操作系统为例，其它版本的CentOS系统或者其他发行版本（如Redhat、Debian、Ubuntu等）对应的配置和命令行请参阅相应的官方文档。</p><div type=\"note\" id=\"0c4f4ee18bd0i\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-spm-anchor-id=\"a2c9r.14518950.0.i8.45c17962UXYBiA\" id=\"09a3b6e08b887\">CentOS 6与CentOS 8操作系统版本结束了生命周期（EOL），按照社区规则，CentOS 6/8的源地址内容已移除。当您在CentOS 6/8系统内继续使用默认配置的源地址时会发生报错。建议您先切换CentOS 6/8的源地址，然后再进行操作。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-the-centos-6-source-address\">CentOS 6 EOL如何切换源？</a>和<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-centos-8-repository-addresses\">CentOS 8 EOL如何切换源？</a>。</p></div></div><ol id=\"f10954e48bznd\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i3.c5545e3b7heQhu\" id=\"f10954e58brgb\"><p id=\"f10954e68bku9\">远程连接Linux实例。</p><p id=\"9e091230behkv\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"f10954e78brs7\"><p id=\"f10954e88bqol\">执行以下命令，查询当前系统使用的语言。</p><pre id=\"l994cg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>echo $LANG</code></pre><div id=\"f479dda0be9fk\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"003010b3bebsn\"><li id=\"003010b0bemj1\"><p id=\"ea59d930beswf\">如果为英文，请继续执行步骤3。</p></li><li id=\"003010b1bes6l\"><p id=\"da793650be3p7\">如果为中文，说明该Linux系统的ECS实例已安装中文语言包，排除因Liunx系统未安装中文字体导致文字显示乱码的原因，请参考<a title=\"\" class=\"xref\" href=\"#f109a3088bef2\">方案二：修改第三方SSH客户端工具字符集设置</a>继续执行操作。</p></li></ul></div></div></li><li id=\"f1097bf18b3t3\"><p id=\"f1097bf28b503\">执行以下命令，查看当前系统是否安装中文语言包。 </p><pre id=\"f100a2528bru5\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>locale -a | grep \"zh_CN\"</code></pre><p id=\"f1097bf38bg7x\"> 系统显示类似如下，zh表示中文，CN表示中国，gb18030、gb2312、gbk、utf8为字符集。 </p><pre id=\"f100a2538bwtz\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>zh_CN\nzh_CN.gb18030\nzh_CN.gb2312\nzh_CN.gbk\nzh_CN.utf8</code></pre><p id=\"f1097bf48b8by\"> 若未安装中文语言包，请执行以下命令安装。 </p><pre id=\"f100a2548bucx\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sudo yum groupinstall \"fonts\"</code></pre></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i14.1d3b5e3bnrScYp\" id=\"f1097bf68be9t\"><p id=\"f1097bf78bjww\">执行以下命令，编辑<code data-tag=\"code\" class=\"code\">/etc/locale.conf</code>配置文件。 </p><pre id=\"f100a2558b9q9\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/locale.conf</code></pre><ol id=\"f1097bf88b8ok\"><li id=\"f1097bf98bt3w\"><p id=\"84679dced4pjj\">按<code data-tag=\"code\" class=\"code\">i</code>键切换至编辑模式，将<code data-tag=\"code\" class=\"code\">LANG=en_US.UTF-8</code>修改为<code data-tag=\"code\" class=\"code\">LANG=zh_CN.UTF-8</code>，将当前系统语言修改为中文。</p></li><li id=\"f1097bfb8b7kg\"><p id=\"84679dd0d4hqh\">修改完成后，按下<code data-tag=\"code\" class=\"code\">Esc</code>键后，输入<code data-tag=\"code\" class=\"code\">:wq</code>并回车，保存并关闭配置文件。</p></li></ol></li><li id=\"f109a3008bwe0\"><p id=\"f109a3018bs8h\">执行以下命令，使配置生效。</p><pre id=\"f100a2578bczj\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>source /etc/locale.conf</code></pre></li><li id=\"f109a3038bhex\"><p id=\"f109a3048bvr8\">执行以下命令，重启服务器。</p><pre id=\"f100a2588bxjk\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>reboot</code></pre></li><li id=\"f109a3068b6f5\"><p id=\"f109a3078bosg\">（可选）若重启服务器后，当前系统语言仍显示为英文，请执行以下命令，编辑<code data-tag=\"code\" class=\"code\">/etc/profile.d/lang.sh</code>配置文件。</p><pre id=\"13bvze\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/profile.d/lang.sh</code></pre><ol id=\"54d3cf51be5nd\"><li id=\"54269f61bephd\"><p id=\"54269f60be3ao\">按<code data-tag=\"code\" class=\"code\">i</code>键切换至编辑模式，将<code data-tag=\"code\" class=\"code\">zh*) LANG=en_US.UTF-8</code>修改为<code data-tag=\"code\" class=\"code\">zh*) LANG=zh_CN.UTF-8</code>，修改之后的内容如下图所示。<img width=\"422\" alt=\"Dingtalk_20210709104253.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6172082761/p519951.png\" id=\"87e508b18br85\" class=\"image break\"></p></li><li id=\"87840961beeem\"><p id=\"904b59e0beywi\">修改完成后，按下<code data-tag=\"code\" class=\"code\">Esc</code>键后，输入<code data-tag=\"code\" class=\"code\">:wq</code>并回车，保存并关闭配置文件。</p></li><li id=\"bd57a380be56t\"><p id=\"c0340f80bemqr\">执行以下命令，重启服务器。</p><pre id=\"30cepd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>reboot</code></pre></li></ol></li></ol></section><section id=\"41ccba20befkc\" class=\"section\"><p data-tag=\"h3\" id=\"f109a3088bef2\" class=\"h3\"><b>方案二：修改第三方SSH客户端工具字符集设置</b></p><p id=\"f109a3098bkt9\">以下操作以XShell客户端为例，介绍如何修改XShell客户端工具字符集设置。</p><ol id=\"000b98d1beld3\"><li id=\"e9aea6e0beurr\"><p id=\"e9ae7fd0beqvx\">打开XShell客户端。</p></li><li id=\"a21f5be18bumy\"><p id=\"a21f5be08b5ft\">在XShell客户端页面，将<b data-tag=\"uicontrol\" id=\"a94e5079bec8i\" class=\"uicontrol\">默认语言</b>设置为<b data-tag=\"uicontrol\" id=\"a94e507bbeinf\" class=\"uicontrol\">Unicode (UTF-8)</b>。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6172082761/p519952.png\" id=\"13d577618baoo\" width=\"550\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></li><li id=\"1613f5b18bqon\"><p id=\"1613f5b08b59t\">重新登录实例，若不再出现以上错误，则表示问题已修复。</p></li></ol></section></section></div></div></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/faq-3", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span>常见问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>常见问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-01 18:26:23</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"concept-2623851\"><p id=\"shortdesc-rtj-0at-e8r\" data-tag=\"shortdesc\" class=\"shortdesc\">本文汇总了使用云服务器ECS时的常用问题。</p><div data-tag=\"conbody\" id=\"conbody-10k-03y-zua\" class=\"conbody\"><section data-tag=\"section\" id=\"section-gjd-y7b-w74\" data-type=\"section\" class=\"section\"><h2 data-tag=\"title\" id=\"title-6l8-tsv-jxc\" class=\"title\">产品FAQ</h2><table id=\"table-qa7-x6u-ir1\" tablewidth=\"710\" tablecolswidth=\"355 355\" class=\"table\"><colgroup colwidth=\"1*\" style=\"width:50.00%\"></colgroup><colgroup colwidth=\"1*\" style=\"width:50.00%\"></colgroup><tbody class=\"tbody\"><tr id=\"row-tx6-tt0-e4c\"><td id=\"entry-2di-ffb-mfy\" rowspan=\"1\" colspan=\"1\"><ul data-tag=\"ul\" id=\"ul-gy0-lb2-9wf\" class=\"ul\"><li data-tag=\"li\" id=\"li-lta-zbl-mb2\" class=\"li\"><p id=\"f8f68104fdjkc\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/instance-faq#concept-gqy-fyx-wgb\">实例FAQ</a></p></li><li data-tag=\"li\" id=\"li-34k-tk9-kcm\" class=\"li\"><p id=\"f8f68105fd4dh\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/faq-about-image-lifecycle#concept-q1j-bty-dhb\">镜像生命周期问题</a></p></li><li data-tag=\"li\" id=\"li-x0r-r0b-iej\" class=\"li\"><p id=\"f8f68106fdlwg\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/faq-4#concept-40551-zh\">块存储FAQ</a></p></li><li data-tag=\"li\" id=\"li-ney-cxi-zaa\" class=\"li\"><p id=\"f8f68107fdivb\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/snapshot-faq#concept-j5z-vrr-lgb\">快照FAQ</a></p></li><li data-tag=\"li\" id=\"li-r9h-ij4-qt3\" class=\"li\"><p id=\"f8f6a810fdpso\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/product-overview/billing-faq#concept-827517\">计费FAQ</a></p></li></ul></td><td id=\"entry-z4e-mog-0qw\" rowspan=\"1\" colspan=\"1\"><ul data-tag=\"ul\" id=\"ul-iy4-t6c-axq\" class=\"ul\"><li data-tag=\"li\" id=\"li-7m8-66l-aa9\" class=\"li\"><p id=\"f8f6a811fd6vg\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/security-faq#concept-mhp-prm-lgb\">安全FAQ</a></p></li><li data-tag=\"li\" id=\"li-q2z-yzt-5l2\" class=\"li\"><p id=\"f8f6cf20fd9p8\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/network-faq#concept-40637-zh\">网络FAQ</a></p></li><li data-tag=\"li\" id=\"li-fop-4hw-9jp\" class=\"li\"><p id=\"f8f6cf21fdxu6\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/o-and-m-and-monitoring-faq#concept-2362606\">运维与监控FAQ</a></p></li><li data-tag=\"li\" id=\"li-6u1-5tb-li6\" class=\"li\"><p id=\"f8f6cf22fdxoa\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/developer-reference/api-faq#concept-761256\">API FAQ</a></p></li><li data-tag=\"li\" id=\"li-lfi-shn-b2z\" class=\"li\"><p id=\"f8f6cf23fdid9\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/cloud-migration-tool-faq#ServerMigrationFAQ\">迁云工具FAQ</a></p></li></ul></td></tr></tbody></table></section><section data-tag=\"section\" id=\"section-7su-tpd-u6i\" data-type=\"section\" props=\"china\" data-cond-props=\"china\" class=\"section\"><h2 data-tag=\"title\" id=\"title-rkf-rn9-84r\" class=\"title\">最新发布</h2><ul data-tag=\"ul\" id=\"ul-qqw-z0y-m04\" class=\"ul\"><li data-tag=\"li\" id=\"li-qx0-qh3-yxl\" class=\"li\"><p id=\"f8f74450fd5ym\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/186241.htm\">使用ping命令测试ECS实例时ping不通的排查方法</a></p></li><li data-tag=\"li\" id=\"li-6m8-654-926\" class=\"li\"><p id=\"f8f74451fdyo4\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/188420.htm\">如何在Linux实例中自定义配置DNS</a></p></li><li data-tag=\"li\" id=\"li-qyy-k5y-u3b\" class=\"li\"><p id=\"f8f74452fduy1\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41400.htm\">如何迁移Linux实例系统盘中的数据</a></p></li><li data-tag=\"li\" id=\"li-31t-h1r-q3l\" class=\"li\"><p id=\"f8f74453fdvel\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41332.htm\">Linux系统的ECS中没有禁ping却ping不通的解决方法</a></p></li><li data-tag=\"li\" id=\"li-a8z-rp1-kba\" class=\"li\"><p id=\"f8f74454fdaz1\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40900.htm\">当IIS搭建的网站显示“500 - 内部服务器错误”时如何查看真实报错信息</a></p></li></ul></section><section data-tag=\"section\" id=\"section-rei-thg-mmi\" data-type=\"section\" props=\"china\" data-cond-props=\"china\" class=\"section\"><h2 data-tag=\"title\" id=\"title-y98-0hw-03v\" class=\"title\">远程连接问题</h2><ul data-tag=\"ul\" id=\"ul-w80-o1z-tw2\" class=\"ul\"><li data-tag=\"li\" id=\"li-odn-g9r-dm5\" class=\"li\"><p id=\"f8f8a3e0fd72r\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/140763.htm\">无法远程连接Windows实例的处理方法</a></p></li><li data-tag=\"li\" id=\"li-wc2-7fb-92x\" class=\"li\"><p id=\"f8f8a3e1fdg5g\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41470.htm\">无法通过SSH远程登录Linux实例时的排查指引</a></p></li><li data-tag=\"li\" id=\"li-uwv-h4y-82b\" class=\"li\"><p id=\"f8f8a3e2fd3nf\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40857.htm\">如何查看和修改Windows实例远程桌面的默认端口</a></p></li><li data-tag=\"li\" id=\"li-0v1-rkl-zc9\" class=\"li\"><p id=\"f8f8a3e3fdgp0\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40873.htm\">如何查询ECS实例中的远程登录日志</a></p></li><li data-tag=\"li\" id=\"li-sg4-fbi-5lj\" class=\"li\"><p id=\"f8f8a3e4fdesv\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40886.htm\">Windows实例如何限制用户的远程桌面会话数</a></p></li><li data-tag=\"li\" id=\"li-tfd-del-ghu\" class=\"li\"><p id=\"f8f8a3e5fda08\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40880.htm\">Windows 2008与2012实例无法启用远程协助中的“允许远程协助连接这台计算机”选项</a></p></li><li data-tag=\"li\" id=\"li-ar9-z61-rvz\" class=\"li\"><p id=\"f8f8caf0fdjmy\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40860.htm\">Windows Server实例远程连接数以及License授权服务器的相关说明</a></p></li><li data-tag=\"li\" id=\"li-th8-pa7-myu\" class=\"li\"><p id=\"f8f8caf1fds03\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41482.htm\">使用SSH命令登录Linux系统的ECS实例时出现报错</a></p></li><li data-tag=\"li\" id=\"li-v5p-w84-1nh\" class=\"li\"><p id=\"f8f8caf2fd6wn\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40859.htm\">Windows服务器远程桌面提示“没有远程桌面授权服务器可以提供许可证”错误</a></p></li><li data-tag=\"li\" id=\"li-kx1-a5m-osx\" class=\"li\"><p id=\"f8f8caf3fdxat\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40861.htm\">远程连接Windows系统的ECS实例时提示协议错误</a></p></li><li data-tag=\"li\" id=\"li-d99-9n2-0u7\" class=\"li\"><p id=\"f8f8caf4fdo5w\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40865.htm\">启用密码保护共享导致Windows系统远程访问出现“凭据无法工作”错误</a></p></li><li data-tag=\"li\" id=\"li-syc-szk-0k0\" class=\"li\"><p id=\"f8f8caf5fdfbk\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40871.htm\">远程桌面连接ECS实例时报\"连接被拒绝，因为没有授权此用户账户进行远程登录\"错误</a></p></li><li data-tag=\"li\" id=\"li-qix-cm4-pes\" class=\"li\"><p id=\"f8f8caf6fd10c\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41471.htm\">使用SSH登录ECS实例时提示“Host key verification failed”错误</a></p></li><li data-tag=\"li\" id=\"li-bam-9my-ddf\" class=\"li\"><p id=\"f8f8caf7fd9tu\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41487.htm\">使用root用户通过SSH登录Linux实例时报“Permission denied, please try again”的错误</a></p></li><li data-tag=\"li\" id=\"li-ydq-uu5-r7s\" class=\"li\"><p id=\"f8f8caf8fda57\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41489.htm\">SSH登录Linux实例时出现\"Disconnected:No supported authentication methods available\"错误</a></p></li><li data-tag=\"li\" id=\"li-imc-sip-z8d\" class=\"li\"><p id=\"f8f8f200fdbj9\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41485.htm\">SSH登录ECS实例提示“ssh_exchange_identification: read: Connection reset by peer”错误</a></p></li><li data-tag=\"li\" id=\"li-et1-x4b-ua5\" class=\"li\"><p id=\"f8f8f201fdvve\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41491.htm\">使用SSH登录Linux系统的ECS实例时提示“requirement \"uid &gt;= 1000\" not met by user \"root\"”错误</a></p></li><li data-tag=\"li\" id=\"li-euj-eo6-uhu\" class=\"li\"><p id=\"f8f8f202fdrkj\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41481.htm\">Linux实例中由于SELinux服务开启导致SSH远程连接异常</a></p></li><li data-tag=\"li\" id=\"li-u9p-o40-aoe\" class=\"li\"><p id=\"f8f8f203fd5bm\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41474.htm\">SSH服务启动时报“main process exited, code=exited”错误</a></p></li><li data-tag=\"li\" id=\"li-2r4-41m-g0r\" class=\"li\"><p id=\"f8f8f204fdccn\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41478.htm\">启动SSH服务时出现“error while loading shared libraries”错误</a></p></li></ul></section><section data-tag=\"section\" id=\"section-sdq-w89-b2g\" data-type=\"section\" props=\"china\" data-cond-props=\"china\" class=\"section\"><h2 data-tag=\"title\" id=\"title-6h9-ne5-wuz\" class=\"title\">ECS网络问题</h2><ul data-tag=\"ul\" id=\"ul-6ni-bd9-hc1\" class=\"ul\"><li data-tag=\"li\" id=\"li-vgs-0ze-ja7\" class=\"li\"><p id=\"f8fa78a0fdabw\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40726.htm\">Windows实例ping外网地址提示“一般故障”</a></p></li><li id=\"2193c690fen57\"><p id=\"21939f80ferlt\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41332.htm\">Linux系统的ECS中没有禁ping却ping不通的解决方法</a></p></li><li data-tag=\"li\" id=\"li-99i-tgk-pe4\" class=\"li\"><p id=\"f8fa78a1fdflm\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/186241.htm\">使用ping命令测试ECS实例时ping不通的排查方法</a></p></li><li data-tag=\"li\" id=\"li-rzt-uh0-758\" class=\"li\"><p id=\"f8fa9fb0fdeca\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/188420.htm\">如何在Linux实例中自定义配置DNS</a></p></li><li data-tag=\"li\" id=\"li-mhd-pbm-gku\" class=\"li\"><p id=\"f8fa9fb1fdvfi\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40573.htm\">使用ping命令丢包或不通时的链路测试方法</a></p></li><li data-tag=\"li\" id=\"li-wbo-62r-8qy\" class=\"li\"><p id=\"f8fa9fb2fdaqq\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-if-i-cannot-access-a-website-hosted-on-an-instance#721238a065esc\">无法访问ECS实例中运行网站的快速排查方法</a></p></li><li data-tag=\"li\" id=\"li-xki-h83-jbf\" class=\"li\"><p id=\"f8fa9fb3fdc70\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/59367.htm\">检查TCP 80端口是否正常工作</a></p></li><li data-tag=\"li\" id=\"li-jj8-umo-71j\" class=\"li\"><p id=\"f8fa9fb4fdmhr\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40572.htm\">能够ping通服务器的同时端口不通的排查方法</a></p></li><li data-tag=\"li\" id=\"li-c6s-4po-l5n\" class=\"li\"><p id=\"f8fa9fb5fdjqm\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/best-practices-for-testing-network-performance#task-2200011\">网络性能测试方法</a></p></li><li data-tag=\"li\" id=\"li-7ku-qjc-jus\" class=\"li\"><p id=\"f8fa9fb6fd0ax\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40564.htm\">网络异常时如何抓取数据包</a></p></li><li data-tag=\"li\" id=\"li-uvt-rfq-0hx\" class=\"li\"><p id=\"f8fa9fb7fd289\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41303.htm\">Linux系统的ECS实例内部无法正常解析域名</a></p></li><li data-tag=\"li\" id=\"li-dbx-jyq-p7q\" class=\"li\"><p id=\"f8fa9fb8fdlrs\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/73607.htm\">无法访问实例绑定的弹性网卡</a></p></li><li data-tag=\"li\" id=\"li-xm0-eie-ibh\" class=\"li\"><p id=\"f8fa9fb9fd3rv\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/52997.htm\">Linux实例网站访问丢包延时高的排查方法</a></p></li><li data-tag=\"li\" id=\"li-g9x-dch-w58\" class=\"li\"><p id=\"f8fa9fbafd8e0\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/52866.htm\">Windows实例网络访问丢包延时高的排查方法</a></p></li><li data-tag=\"li\" id=\"li-rdl-iwv-tdz\" class=\"li\"><p id=\"f8fa9fbbfd988\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/73247.htm\">Linux实例使用ping命令测试实例的IP地址间歇性丢包</a></p></li><li data-tag=\"li\" id=\"li-baq-xsd-sv5\" class=\"li\"><p id=\"f8fa9fbcfdloz\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/72010.htm\">ECS资源监控中网络流量显示无数据</a></p></li><li data-tag=\"li\" id=\"li-r7t-zo1-8yl\" class=\"li\"><p id=\"f8fac6c0fdm56\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/94181.htm\">检查与修复CentOS 7实例和Windows实例IP地址缺失问题</a></p></li><li data-tag=\"li\" id=\"li-r9y-ysk-ehx\" class=\"li\"><p id=\"f8fac6c1fd9vc\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41531.htm\">Linux系统的ECS实例中通过netstat命令查看和检查系统端口信息</a></p></li><li data-tag=\"li\" id=\"li-w3k-8zn-i59\" class=\"li\"><p id=\"f8fac6c2fdh6w\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40726.htm\">Windows实例ping外网地址提示“一般故障”</a></p></li></ul></section><section data-tag=\"section\" id=\"section-u5n-oce-xfb\" data-type=\"section\" props=\"china\" data-cond-props=\"china\" class=\"section\"><h2 data-tag=\"title\" id=\"title-3qp-qb2-klh\" class=\"title\">建站问题</h2><ul data-tag=\"ul\" id=\"ul-lef-q4o-m1i\" class=\"ul\"><li data-tag=\"li\" id=\"li-asp-n2a-vi3\" class=\"li\"><p id=\"f8fb8a10fdprv\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/163918.htm\">ECS实例无法登录宝塔面板控制台</a></p></li><li data-tag=\"li\" id=\"li-h83-s3b-ef7\" class=\"li\"><p id=\"f8fb8a11fd6o0\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40914.htm\">在外网无法连接和访问Windows实例中的FTP服务</a></p></li><li data-tag=\"li\" id=\"li-xe8-ocv-8rz\" class=\"li\"><p id=\"f8fb8a12fdp72\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/manually-build-an-ftp-site-on-a-centos-7-instance#concept-ww3-123-ffb\">手动搭建FTP站点（CentOS 7）</a></p></li><li data-tag=\"li\" id=\"li-nq6-zy4-rzf\" class=\"li\"><p id=\"f8fb8a13fdv58\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/manually-build-an-ftp-site-on-a-windows-instance#concept-kmr-213-ffb\">手动搭建FTP站点（Windows）</a></p></li><li data-tag=\"li\" id=\"li-65i-1bz-u2r\" class=\"li\"><p id=\"f8fb8a14fdeh1\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41104.htm\">无法连接ECS实例中自建的MySQL服务器</a></p></li><li data-tag=\"li\" id=\"li-gzj-ten-2sw\" class=\"li\"><p id=\"f8fb8a15fd9ws\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40590.htm\">Mac OS实例如何通过FTP工具上传文件</a></p></li><li data-tag=\"li\" id=\"li-100-mey-zmy\" class=\"li\"><p id=\"f8fb8a16fdyv6\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40635.htm\">访问ECS服务器的网站提示“由于你访问的URL可能对网站造成安全威胁，您的访问被阻断”</a></p></li><li data-tag=\"li\" id=\"li-wpu-ra1-2wu\" class=\"li\"><p id=\"f8fb8a17fdjbj\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40920.htm\">访问Windows实例创建的FTP站点时提示“534 Policy requires SSL”报错</a></p></li><li data-tag=\"li\" id=\"li-j0m-9io-62c\" class=\"li\"><p id=\"f8fb8a18fdu0h\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41122.htm\">访问Web站点提示“No input file specified”报错</a></p></li><li data-tag=\"li\" id=\"li-8h0-7hg-u7f\" class=\"li\"><p id=\"f8fb8a19fdsqn\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40900.htm\">IIS搭建的网站显示“500 - 内部服务器错误”时如何查看真实报错信息</a></p></li></ul></section><section data-tag=\"section\" id=\"section-bqs-oix-4d4\" data-type=\"section\" props=\"china\" data-cond-props=\"china\" class=\"section\"><h2 data-tag=\"title\" id=\"title-ect-e4h-jou\" class=\"title\">磁盘/CPU/内存/带宽问题</h2><ul data-tag=\"ul\" id=\"ul-a4d-xwb-e08\" class=\"ul\"><li data-tag=\"li\" id=\"li-k1n-c3c-z3h\" class=\"li\"><p id=\"f8fc9b80fdmbk\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/52366.htm\">Windows实例负载的查询及分析</a></p></li><li data-tag=\"li\" id=\"li-zgl-kvr-0jv\" class=\"li\"><p id=\"f8fc9b81fdu4a\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41225.htm\">Linux实例CPU负载的查询和案例分析</a></p></li><li data-tag=\"li\" id=\"li-4pw-t7g-jf5\" class=\"li\"><p id=\"f8fcc290fdfdd\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40995.htm\">如何配置Windows实例的虚拟内存</a></p></li><li data-tag=\"li\" id=\"li-tnx-885-x7i\" class=\"li\"><p id=\"f8fcc291fdkjz\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40634.htm\">入网带宽和出网带宽</a></p></li><li data-tag=\"li\" id=\"li-mwm-u2o-h6l\" class=\"li\"><p id=\"f8fcc292fdksd\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41339.htm\">Linux实例网络流量负载情况的查询和案例分析</a></p></li><li data-tag=\"li\" id=\"li-3t0-c2m-qgk\" class=\"li\"><p id=\"f8fcc293fdxzz\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41569.htm\">Linux实例中如何查看物理CPU和内存信息</a></p></li><li data-tag=\"li\" id=\"li-max-twd-0o3\" class=\"li\"><p id=\"f8fcc294fd5u0\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/52871.htm\">Linux实例系统负载的查询及分析</a></p></li><li data-tag=\"li\" id=\"li-9g2-t1n-6xx\" class=\"li\"><p id=\"f8fcc295fd75n\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/42531.htm\">Linux实例磁盘空间满和inode满的问题排查方法</a></p></li><li data-tag=\"li\" id=\"li-iud-l6e-2uw\" class=\"li\"><p id=\"f8fcc296fdmm3\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41079.htm\">Windows实例内存分析工具的介绍</a></p></li><li data-tag=\"li\" id=\"li-q5p-tm8-ssh\" class=\"li\"><p id=\"f8fcc297fdvh9\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41224.htm\">Linux实例IO负载情况的查询和案例分析</a></p></li><li data-tag=\"li\" id=\"li-88k-oce-gxk\" class=\"li\"><p id=\"f8fcc298fdrzu\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/52870.htm\">Linux实例df和du命令查看磁盘空间大小不同或为负数</a></p></li><li data-tag=\"li\" id=\"li-for-95d-8w2\" class=\"li\"><p id=\"f8fcc299fdd1w\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41013.htm\">开启Windows实例的内核转储（Kernel Memory Dump）功能</a></p></li><li data-tag=\"li\" id=\"li-sy7-ap9-b35\" class=\"li\"><p id=\"f8fcc29afdpxm\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/72719.htm\">Linux实例的挂载NAS提示“mount: can't find /root/nas in /etc/fstab”报错</a></p></li></ul></section><section data-tag=\"section\" id=\"section-bsj-gq7-f8b\" data-type=\"section\" class=\"section\"><h2 data-tag=\"title\" id=\"title-p5f-5id-13s\" class=\"title\">镜像/快照问题</h2><ul data-tag=\"ul\" id=\"ul-2p4-j4g-knp\" class=\"ul\"><li data-tag=\"li\" id=\"li-o2i-yxp-e02\" class=\"li\"><p id=\"f8fce9abfdk8g\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/replace-the-operating-system-of-an-instance-1#concept-n4k-x3j-ydb\">更换操作系统（系统盘）</a></p></li><li data-tag=\"li\" id=\"li-naq-sd6-g69\" class=\"li\"><p id=\"f8fce9acfdye9\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-custom-image-from-a-snapshot-1#concept-gpg-t5l-xdb\">使用快照创建自定义镜像</a></p></li><li data-tag=\"li\" id=\"li-ne0-idj-v39\" class=\"li\"><p id=\"f8fd10b0fdt3a\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-an-ecs-instance-by-using-a-custom-image#task-w5v-sgv-xdb\">使用自定义镜像创建实例</a></p></li><li data-tag=\"li\" id=\"li-ibp-8r4-opo\" props=\"china\" data-cond-props=\"china\" class=\"li\"><p id=\"f8fd10b3fdnx9\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40586.htm\">历史Linux镜像创建的实例暴漏安全漏洞</a></p></li></ul></section><section data-tag=\"section\" id=\"section-ln4-wva-8gn\" data-type=\"section\" props=\"china\" data-cond-props=\"china\" class=\"section\"><h2 data-tag=\"title\" id=\"title-jkx-g47-6iu\" class=\"title\">安全组及其他安全问题</h2><ul data-tag=\"ul\" id=\"ul-3bv-yho-jvw\" class=\"ul\"><li data-tag=\"li\" id=\"li-v31-hgz-9b3\" class=\"li\"><p id=\"f8fdd400fdvrv\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/163521.htm\">ECS实例的安全组规则未生效</a></p></li><li data-tag=\"li\" id=\"li-51w-yft-y3j\" class=\"li\"><p id=\"f8fdd401fdzns\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40994.htm\">实例感染木马病毒后的解决方法</a></p></li><li data-tag=\"li\" id=\"li-qar-i67-0n7\" class=\"li\"><p id=\"f8fdd402fdghf\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40858.htm\">如何配置Windows实例远程连接的防火墙</a></p></li><li data-tag=\"li\" id=\"li-wxw-xda-owt\" class=\"li\"><p id=\"f8fdd403fdhy7\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41213.htm\">Linux实例中如何禁止IP或者网段访问服务</a></p></li><li data-tag=\"li\" id=\"li-shb-1k1-q31\" class=\"li\"><p id=\"f8fdd404fdxc8\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/52086.htm\">Linux实例启用SSH服务后设置对应的安全组策略</a></p></li><li data-tag=\"li\" id=\"li-p0m-ifg-nv2\" class=\"li\"><p id=\"f8fdd405fdact\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41317.htm\">CentOS 7实例如何配置默认防火墙Firewall</a></p></li><li data-tag=\"li\" id=\"li-3i2-gnh-o26\" class=\"li\"><p id=\"f8fdd406fdwo6\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41340.htm\">Linux实例中TCP/UDP端口测试及验证方法</a></p></li><li data-tag=\"li\" id=\"li-4am-7dr-dw5\" class=\"li\"><p id=\"f8fdd407fdqfl\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/50054.htm\">Windows实例中安全审计日志</a></p></li><li data-tag=\"li\" id=\"li-z3f-uws-tz2\" class=\"li\"><p id=\"f8fdd408fdzuj\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40596.htm\">删除实例的默认安全组规则导致无法ping通实例</a></p></li><li data-tag=\"li\" id=\"li-wkl-n49-hkb\" class=\"li\"><p id=\"f8fdfb10fd42r\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40630.htm\">实例存在对外的DDoS攻击行为导致其被锁定</a></p></li><li data-tag=\"li\" id=\"li-oux-mkf-tsw\" class=\"li\"><p id=\"f8fdfb11fd8t8\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41025.htm\">如何给Windows实例增加安全加固</a></p></li><li data-tag=\"li\" id=\"li-suk-091-518\" class=\"li\"><p id=\"f8fdfb12fdmfc\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41026.htm\">本地客户端提交代码至实例的SVN服务端时被云安全中心拦截</a></p></li><li data-tag=\"li\" id=\"li-9zl-xcc-4pe\" class=\"li\"><p id=\"f8fdfb13fd26x\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41475.htm\">病毒引发SSH服务运行异常系统提示“fatal: mm_request_send: write: Broken pipe”报错</a></p></li></ul></section><section data-tag=\"section\" id=\"section-1x8-sl3-gve\" data-type=\"section\" props=\"china\" data-cond-props=\"china\" class=\"section\"><h2 data-tag=\"title\" id=\"title-ozj-wxz-5w3\" class=\"title\">与操作系统相关的问题</h2><ul data-tag=\"ul\" id=\"ul-gni-1kg-akg\" class=\"ul\"><li data-tag=\"li\" id=\"li-m56-4pu-hm0\" class=\"li\"><p id=\"f8ff5aa0fd2k3\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/136317.htm\">ECS实例系统启动失败时报“UNEXPECTED INCONSISTENCY; RUN fsck MANUALLY.”的错误</a></p></li><li data-tag=\"li\" id=\"li-og1-o4c-z7t\" class=\"li\"><p id=\"f8ff5aa1fdtno\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/42539.htm\">访问实例异常时的问题排查和指引</a></p></li><li data-tag=\"li\" id=\"li-4wc-mwm-t90\" class=\"li\"><p id=\"f8ff5aa2fdamp\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/59360.htm\">避免无法启动Linux实例升级内核系统</a></p></li><li data-tag=\"li\" id=\"li-4ak-y52-13h\" class=\"li\"><p id=\"f8ff5aa3fdnfs\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41334.htm\">Linux实例常用内核网络参数介绍与常见问题处理</a></p></li><li data-tag=\"li\" id=\"li-u84-0be-iwk\" class=\"li\"><p id=\"f8ff5aa4fdk3a\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41044.htm\">如何使用Windows事件查看器查看实例运行日志</a></p></li><li data-tag=\"li\" id=\"li-plw-609-t9o\" class=\"li\"><p id=\"f8ff81b0fdsd1\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41053.htm\">Windows Update补丁更新失败</a></p></li><li data-tag=\"li\" id=\"li-8j6-5bx-e23\" class=\"li\"><p id=\"f8ff81b1fdjcz\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41177.htm\">如何通过工具自动更新Linux实例中的软件源</a></p></li><li data-tag=\"li\" id=\"li-ynt-uuy-ht8\" class=\"li\"><p id=\"f8ff81b2fdo9o\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41056.htm\">如何使用KMS域名激活VPC网络中的Windows实例</a></p></li><li data-tag=\"li\" id=\"li-9m9-7dz-zh4\" class=\"li\"><p id=\"f8ff81b3fdxus\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41460.htm\">Linux实例的/etc/fstab文件配置错误导致系统启动异常</a></p></li><li data-tag=\"li\" id=\"li-9ia-vw4-mmf\" class=\"li\"><p id=\"f8ff81b4fdj5c\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41464.htm\">Linux实例中设置从阿里云默认内核启动</a></p></li><li data-tag=\"li\" id=\"li-aio-1l7-o9c\" class=\"li\"><p id=\"f8ff81b5fdueg\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41531.htm\">Linux实例中netstat命令查看和检查系统端口信息</a></p></li><li data-tag=\"li\" id=\"li-qf0-13e-9w9\" class=\"li\"><p id=\"f8ff81b6fd5cr\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41050.htm\">Windows实例激活失败</a></p></li><li data-tag=\"li\" id=\"li-0zr-2ky-wah\" class=\"li\"><p id=\"f8ff81b7fdd1w\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41205.htm\">Linux实例中软件源配置说明及常见问题</a></p></li><li data-tag=\"li\" id=\"li-7js-yxb-ezk\" class=\"li\"><p id=\"f8ff81b8fdmcu\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41462.htm\">进入CentOS实例单用户模式的配置方法</a></p></li><li data-tag=\"li\" id=\"li-66x-o2a-unb\" class=\"li\"><p id=\"f8ff81b9fddq9\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41211.htm\">在Linux实例获取用户登录记录</a></p></li><li data-tag=\"li\" id=\"li-mgv-oex-nxn\" class=\"li\"><p id=\"f8ff81bafdvub\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40846.htm\">修改Windows实例的SID用于搭建域环境</a></p></li><li data-tag=\"li\" id=\"li-1sz-1i3-vvc\" class=\"li\"><p id=\"f8ff81bbfdgb0\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/38203.htm\">Windows Server 2012 R2/2016/2019无法安装.NET Framework 3.5.1或语言包</a></p></li><li data-tag=\"li\" id=\"li-b45-5ft-xj2\" class=\"li\"><p id=\"f8ff81bcfdufl\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41541.htm\">Linux实例message日志中提示“entered promiscuous mode”和“left promiscuous mode”信息</a></p></li><li data-tag=\"li\" id=\"li-zxr-pkl-8cv\" class=\"li\"><p id=\"f8ff81bdfd58l\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/169554.htm\">ECS实例升级Systemd至systemd-219-71.el7版本后重启系统会进入救援模式</a></p></li></ul></section><section data-tag=\"section\" id=\"section-mmf-f3g-4i6\" data-type=\"section\" class=\"section\"><h2 data-tag=\"title\" id=\"title-qgb-l51-q76\" class=\"title\">资费/资源升降配问题</h2><ul data-tag=\"ul\" id=\"ul-g9p-i3j-eu6\" class=\"ul\"><li data-tag=\"li\" id=\"li-lr7-4ly-3om\" class=\"li\"><p id=\"f8ffcfd4fdfc5\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/product-overview/billing-overview#concept-isb-scd-5db\">计费概述</a></p></li><li data-tag=\"li\" id=\"li-93v-uib-0p8\" class=\"li\"><p id=\"f8ffcfd5fdubq\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/product-overview/pay-as-you-go-1#Pay-As-You-Go\">按量付费</a></p></li><li data-tag=\"li\" id=\"li-egs-ltc-ct2\" class=\"li\"><p id=\"f8ffcfd6fdgvl\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-of-instance-configuration-changes#concept-anb-bbf-5db\">升降配方式概述</a></p></li></ul></section><section data-tag=\"section\" id=\"section-gmc-soi-ntc\" data-type=\"section\" props=\"china\" data-cond-props=\"china\" class=\"section\"><h2 data-tag=\"title\" id=\"title-9p1-jpx-q4p\" class=\"title\">API/SDK使用问题</h2><ul data-tag=\"ul\" id=\"ul-pgs-kd9-rbc\" class=\"ul\"><li data-tag=\"li\" id=\"li-pej-n2w-wyu\" class=\"li\"><p id=\"f9004501fd1di\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40626.htm\">使用CreateInstance API时创建的实例没有公网IP</a></p></li><li data-tag=\"li\" id=\"li-jpw-9cw-0br\" class=\"li\"><p id=\"f9004502fdcb1\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/85534.htm\">Linux实例无法安装阿里云开发者工具套件（SDK）</a></p></li><li data-tag=\"li\" id=\"li-a8d-z1v-uwd\" class=\"li\"><p id=\"f9004503fd23e\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41585.htm\">阿里云CLI参数的输入格式</a></p></li><li data-tag=\"li\" id=\"li-xx7-vcw-fnz\" class=\"li\"><p id=\"f9004504fdp8k\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40606.htm\">通过API或SDK查询安全组规则无法显示所有的规则</a></p></li><li data-tag=\"li\" id=\"li-9br-gu0-g3u\" class=\"li\"><p id=\"f9006c10fdxo1\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40605.htm\">diskCategory相关问题导致ECS API创建实例报错</a></p></li><li data-tag=\"li\" id=\"li-2vj-c41-40p\" class=\"li\"><p id=\"f9006c11fdxi0\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40644.htm\">实例通过API绑定公网IP时提示“The IP is already in use”报错</a></p></li></ul></section><section data-tag=\"section\" id=\"section-x7r-fxy-haf\" data-type=\"section\" props=\"china\" data-cond-props=\"china\" class=\"section\"><h2 data-tag=\"title\" id=\"title-hki-n1h-xp4\" class=\"title\">数据迁移/上云咨询问题</h2><ul data-tag=\"ul\" id=\"ul-oui-06g-odb\" class=\"ul\"><li data-tag=\"li\" id=\"li-9sn-8dr-cuc\" class=\"li\"><p id=\"f9009320fdqe3\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/159174.htm\">如何将云服务器ECS中的数据备份到本地</a></p></li><li data-tag=\"li\" id=\"li-if3-33x-8oo\" class=\"li\"><p id=\"f9009321fdktj\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/41400.htm\">如何迁移Linux实例系统盘中的数据</a></p></li></ul></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/query-and-case-analysis-linux-io-load", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></span>\n <span>如何查看Linux系统I/O负载情况？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>如何查看Linux系统I/O负载情况？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 15:56:38</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"56bdba20b05ji\"><p data-tag=\"shortdesc\" id=\"84198a60b99xy\" class=\"shortdesc\">本文介绍如何使用iostat、iotop工具查看I/O负载情况。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"31cfaf70b914g\" class=\"section\"><h2 id=\"f9c9e120b9y8i\"><b>查看磁盘I/O负载</b></h2><section id=\"dc22ccd0cf8ci\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"dc22ccd2cfpa5\" class=\"section\"><h4 id=\"THCej\" data-spm-anchor-id=\"a2c4g.11186623.0.i0.6df53334HB2Rio\" jc=\"start\" style=\"text-align:start\"><b>使用iostat从系统纬度查看磁盘IO负载</b></h4><p data-tag=\"h4\" id=\"2dacabc0cfsip\" class=\"h4\">iostat是一款Linux系统中监控I/O性能的工具，可以从系统纬度查看磁盘I/O负载情况。</p><ol id=\"27f114a0cfcjm\"><li id=\"27f0ed90cfrjt\"><p id=\"dc22ccd3cf3ba\">执行如下命令，安装iostat。</p><pre id=\"b5s3rx\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install sysstat</code></pre></li><li id=\"3c988e61cf87o\"><p id=\"3c988e60cfgd3\">执行如下命令，查看I/O负载。</p><pre data-tag=\"codeblock\" id=\"5cf4dba0cfvmt\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>iostat -d -k 3 5</code></pre><div id=\"d899b0a0cft0w\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"4827e642cfbye\"><li id=\"4827e640cf62j\"><p id=\"d899b0a2cf978\">-d：显示磁盘的使用情况。</p></li><li id=\"491fb3c0cfvh1\"><p id=\"d899b0a4cf2aw\">-k：以KB为单位显示。</p></li><li id=\"4a186ba0cfmo8\"><p id=\"d899b0a6cfzq8\">3：统计时间间隔。</p></li><li id=\"4b178c20cf5fr\"><p id=\"d899b0a8cf0qv\">5：统计次数。</p></li></ul></div></div><p id=\"f027f6a0cf7ln\">显示结果如下。</p><img id=\"f085ce13cfjcy\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5100538761/p576937.png\" alt=\"IO负载\" placement=\"break\" class=\"image break\"><p data-tag=\"h4\" id=\"f085ce14cfc35\" class=\"h4\">显示结果参数说明如下，更多参数说明，请参见<a class=\"\" target=\"_blank\" href=\"http://sebastien.godard.pagesperso-orange.fr/man_iostat.html\">iostat manual page</a>。</p><ul id=\"f085ce15cfu6i\"><li id=\"f085ce16cfk01\"><p id=\"f085ce17cfaya\">Device<b>：</b>磁盘名称。</p></li><li id=\"f085ce18cfsg5\"><p id=\"f085ce19cfwg9\">tps：每秒钟发送到的I/O请求数。</p></li><li id=\"f085ce1acfv0d\"><p id=\"f085ce1bcf4oj\">Blk_read/s：每秒读取的block数。</p></li><li id=\"f085ce1ccf9ob\"><p id=\"f085ce1dcfyny\">Blk_wrtn/s：每秒写入的block数。</p></li><li id=\"f085ce1ecfr5h\"><p id=\"f085ce1fcf7mi\">Blk_read：读入的block总数。</p></li><li id=\"f085ce20cfu5o\"><p id=\"f085ce21cf8kn\">Blk_wrtn：写入的block总数。</p></li></ul></li></ol></section><section id=\"dc22ccd5cf80k\" class=\"section\"><h2 id=\"dc22ccd4cf516\"><b>使用iotop从进程纬度查看磁盘IO负载</b></h2><p id=\"017c50f0cfu8u\">iotop是一个用来监视磁盘I/O使用状况的top类工具，可以从进程纬度查看磁盘IO负载。</p><ol id=\"360e5fd0cf3oo\"><li id=\"360e5fd1cfpyc\"><p id=\"360e5fd2cf7eg\">执行如下命令，安装iotop。</p><pre id=\"360e5fd3cfazg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install iotop</code></pre></li><li id=\"360e5fd4cf2h5\"><p id=\"360e5fd5cfxsz\">执行如下命令，查看I/O负载。</p><pre id=\"75c541c0cf9qz\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>iotop -k -n 5 -d 3</code></pre><div id=\"9affe580cfph0\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"434cc412cfmwh\"><li id=\"434cc410cf8tl\"><p id=\"7e093172cftkc\">-b：记录到日志。</p></li><li id=\"443d1780cfo48\"><p id=\"7e093174cftgm\">-k：以KB为单位显示。</p></li><li id=\"4554f020cf5ea\"><p id=\"7e093176cfey1\">-n：统计次数。</p></li><li id=\"467924d0cf4ei\"><p id=\"7e093178cflo0\">-d：统计时间间隔。</p></li></ul></div></div><p id=\"bd6d8690cfzvb\">显示结果如下。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5100538761/p519167.png\" class=\"image break\"><p id=\"dc22ccd6cfj1r\">显示结果参数说明如下，更多参数说明，可执行<code data-tag=\"code\" class=\"code\">iotop -h</code>查询。</p><ul id=\"cddd9832cfyiq\"><li id=\"cddd9833cfd95\"><p id=\"cddd9834cffsb\">DISK READ：该进程读I/O带宽。</p></li><li id=\"cddd9835cfwjo\"><p id=\"cddd9836cfsq9\">DISK WRITE：该进程写I/O带宽。</p></li><li id=\"cddd9837cfzn9\"><p id=\"cddd9838cfzav\">SWAPIN：磁盘的交换使用率。</p></li><li id=\"cddd9839cfxgm\"><p id=\"cddd983acfwyd\">IO：该进程的 I/O 利用率，包含磁盘和交换。</p></li></ul></li></ol></section></section></section><section id=\"14309320b94lh\" class=\"section\"><h2 data-tag=\"h4\" id=\"56c6e1e2b0gqo\" class=\"h4\"><b>kjournald进程占用</b>I/O<b>资源高问题</b></h2><section id=\"abc5d5c0bespa\" class=\"section\"><h3 data-tag=\"h5\" id=\"56c6e1e3b0wig\" class=\"h5\"><b>问题描述</b></h3><p id=\"56c6e1e4b0u7j\">使用iotop排查分析，发现kjournald进程占用了大量I/O资源。</p></section><section id=\"ad61f990be9yd\" class=\"section\"><h3 data-tag=\"h5\" id=\"56c6e1e6b00j7\" class=\"h5\"><b>问题原因</b></h3><p id=\"13503020b9odv\">该问题通常是由于<code data-tag=\"code\" class=\"code\">.ext3</code>文件系统设置的Journal size太小导致。</p><p id=\"56c6e1e7b0whb\">kjournald进程是ext3文件系统进行I/O数据操作的内核进程，它在向磁盘内写入和读取数据时占用CPU和内存资源。当循环的向ext3文件系统写数据时，会使Journal size不断增大，到达设置的Journal size时，就会出现该问题。</p></section><section id=\"afdcbd90be9tg\" class=\"section\"><h3 data-tag=\"h5\" id=\"56c6e1e9b0w2p\" class=\"h5\"><b>解决方案</b></h3><ol id=\"da4c8bc2b9svp\"><li id=\"da4c8bc0b94ie\"><p id=\"a52e90b1b3w3h\">远程连接Linux系统的ECS实例。</p><p id=\"8517b0c0b9uur\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"82928c80b9yzt\"><p id=\"56c6e1eab0wm3\">执行如下命令，查看相应分区的Journal size大小。</p><pre data-tag=\"codeblock\" id=\"56bdba23b0lqe\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>dumpe2fs /dev/xvda1 | grep Journal</code></pre><div type=\"note\" id=\"8d810d51b9pwf\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"8dbe1650b95k7\">/dev/xvda1请替换为实际的分区。</p></div></div><p id=\"936a60a0b9mqg\">系统显示类似如下，表示<code data-tag=\"code\" class=\"code\">/dev/xvda1</code>分区的Journal size为128M。</p><pre data-tag=\"codeblock\" id=\"56bdba24b09a0\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>dumpe2fs 1.42.9 (28-Dec-2013)\nJournal inode: 8\nJournal backup: inode blocks\nJournal features: journal_incompat_revoke\nJournal size: 128M\nJournal length: 32768\nJournal sequence: 0x00010ffb\nJournal start: 10953</code></pre></li><li id=\"8d352cb1b9wcj\"><p id=\"8d352cb0b9uve\">执行如下命令，修改Journal size大小。</p><pre id=\"wt6mnr\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>mke2fs -J size=400 /dev/xvda1 </code></pre><div id=\"f6543a00b9nok\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"f3649420b9tir\">请根据业务需要，修改size大小，/dev/xvda1请替换为实际的分区。</p></div></div></li></ol></section></section><section id=\"b33c3640b9hi0\" class=\"section\"><h2 id=\"ac7aeef0b9pib\"><b>I/O性能优化：</b>通过4K对齐提高I/O性能</h2><p id=\"b83dd6c0b92lm\">4K对齐指将符合4K扇区定义格式化过的硬盘，按照4K扇区的规则写入数据。4K对齐可以使簇与扇区相对应，保证了磁盘读写效率，以提高I/O性能。</p><p id=\"56c708f3b0f8q\">本操作介绍如何通过以下脚本对磁盘进行格式化并自动配置4K对齐。</p><div type=\"warning\" id=\"56c708f4b0vk1\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"56c708f6b08pj\">运行此脚本会自动格式化所有数据盘，如果非新购数据盘，请在操作前，确认已对相关数据盘进行数据备份。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol id=\"56c708f7b0qy5\"><li id=\"56c73000b0eyg\"><p id=\"56c73001b08ai\">使用root用户远程连接Linux系统的ECS实例。</p><p id=\"be8fc502b9aum\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"be190e61b94qk\"><p id=\"be190e60b9du5\">下载<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://onekb.oss-cn-zhangjiakou.aliyuncs.com/50443667/fa6a03ae-3424-4485-ac82-a7d2b166b249.zip\">auto_fdisk.zip</a>压缩包后解压，将解压后脚本并上传到目标服务器。 </p></li><li id=\"56c73002b0xqb\"><p id=\"56c73003b0gn8\">依次执行如下命令，为脚本添加执行权限，然后运行脚本。 </p><pre data-tag=\"codeblock\" id=\"56bdba25b0bvk\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chmod +x ./auto_fdisk.sh\n./auto_fdisk.sh</code></pre></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/query-and-case-analysis-of-linux-network-traffic-load", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></span>\n <span>如何查看Linux系统网络流量负载情况？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>如何查看Linux系统网络流量负载情况？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:24:37</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"c21e8c00b0dz7\"><p data-tag=\"shortdesc\" id=\"c22a24c5b0pqx\" class=\"shortdesc\">Linux系统中有各种查看网络流量的工具，比如sar、iftop、nethogs等，它们可以从不同的纬度来分析系统中流量信息，本文介绍如何使用sar、iftop、nethogs查看Linux系统ECS实例中网络流量负载情况。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"d0733380b519v\" class=\"section\"><h2 id=\"n49mj\">操作场景</h2><p id=\"c22a99f1b0xjg\">在您使用Linux系统的ECS实例过程中，可能会遇到实例带宽过高的情况，您可以按照以下步骤排查定位具体问题。</p><ol id=\"c22a99f2b02aa\"><li data-spm-anchor-id=\"a2c4g.11186623.2.i6.3fe97d03cdRTT7\" id=\"c22a99f3b0wce\"><p id=\"c22a99f4b0izn\">找到影响带宽使用率过高的具体进程。</p><p id=\"2c6df440b5dky\">您可以使用sar、iftop、nethogs等工具定位具体进程。更多信息，请参见<a title=\"\" class=\"xref\" href=\"#0bb788d0b5bh1\">sar工具的使用</a>、<a title=\"\" class=\"xref\" href=\"#d8ee5310b5r4k\">iftop工具的使用</a>或<a title=\"\" class=\"xref\" href=\"#fa995f10b5jyd\">Nethogs工具的使用</a>。</p></li><li id=\"c22a99f5b0ifm\"><p id=\"c22a99f7b0rgx\">排查影响带宽使用率过高的进程是否正常，并分类进行处理。</p><ul id=\"c22a99f8b0q2i\"><li data-spm-anchor-id=\"a2c4g.11186623.2.i8.3fe97d03cdRTT7\" id=\"c22a99f9b0ffg\"><p id=\"c22a99fab07zm\">对于正常进程：您需要对服务器的带宽进行升级。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/modify-the-bandwidth-configurations-of-subscription-instances\">包年包月实例修改带宽</a>或<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/modify-the-bandwidth-configurations-of-pay-as-you-go-instances\">按量付费实例修改带宽</a>。</p></li><li data-spm-anchor-id=\"a2c4g.11186623.2.i2.3fe97d03cdRTT7\" id=\"c22ac100b0ivs\"><p id=\"c22ac101b02nj\">对于异常进程：您可以手动对进程进行查杀，也可以使用第三方安全工具进行查杀。</p></li></ul></li></ol></section><section id=\"0bb788d0b5bh1\" class=\"section\"><h2 data-tag=\"h3\" id=\"c22ac104b0ndz\" class=\"h3\"><b>sar工具的使用</b></h2><p id=\"1f1ff2e0b5bk0\">sar（System Activity Reporter系统活动情况报告）是目前Linux上最为全面的系统性能分析工具之一，可以从多方面对系统的活动进行报告。sar可以从网络接口层面来分析数据包的收发情况、错误信息等。</p><h3 id=\"5231fc00b5ljs\"><b>sar命令</b></h3><p id=\"52af4250b54rf\">使用sar来监控网络流量的常用命令如下所示。</p><pre data-tag=\"codeblock\" id=\"c21e8c01b04ul\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sar -n DEV [interval] [count]</code></pre><div type=\"note\" id=\"c22ae810b0vm2\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"c22ae812b062l\">[interval]表示统计间隔，[count]表示统计次数。</p></div></div><h3 data-tag=\"h4\" id=\"c22ae813b06ta\" class=\"h4\"><b>使用示例</b></h3><p id=\"c22ae814b0kef\">执行如下命令，使用sar每1秒统计一次网络接口的活动状况，连续统计5次。</p><pre data-tag=\"codeblock\" id=\"c21e8c02b0w1k\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sar -n DEV 1 5</code></pre><p id=\"c22ae815b0ofi\">命令执行后会列出每个网卡5次的平均数据取值，根据实际情况来确定带宽跑满的网卡名称，对于ECS实例来说，通常内网网卡为eth0，外网网卡为eth1。</p><p id=\"abe8e740b58sd\">系统显示类似如下，确认是eth1通过流量较大，然后执行以下步骤检查具体问题。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8471227761/p519209.png\" class=\"image break\"><p data-tag=\"h4\" id=\"c22ae817b0mda\" class=\"h4\"><b>显示结果主要字段说明</b></p><ul id=\"c22ae818b0qrv\"><li id=\"c22b0f20b0aan\"><p id=\"c22b0f21b02a4\">IFACE：网络接口名称。</p></li><li id=\"c22b0f22b0ual\"><p id=\"c22b0f23b00s2\">rxpck/s、txpck/s：每秒接收或发送的数据包数量。</p></li><li id=\"c22b0f24b0pag\"><p id=\"c22b0f25b0lsh\">rxkB/s、txkB/s：每秒接收或发送的字节数，以kB/s为单位。</p></li><li id=\"c22b0f26b0yh1\"><p id=\"c22b0f27b0duq\">rxcmp/s、txcmp/s：每秒接收或发送的压缩过的数据包数量。</p></li><li id=\"c22b0f28b0xlt\"><p id=\"c22b3630b08f2\">rxmcst/s：每秒接收到的多播数据包。</p></li></ul></section><section id=\"d8ee5310b5r4k\" class=\"section\"><h2 data-tag=\"h3\" id=\"c22b3631b09yi\" class=\"h3\"><b>iftop工具的使用</b></h2><p id=\"21a5bdf0b56t3\"><span style=\"color:rgb(24, 24, 24)\">iftop是Linux系统中一个免费的网卡实时流量监控工具，可以监控包括指定网卡的实时流量、端口连接信息、反向解析IP等信息。</span></p><h3 id=\"27730850b5wx3\"><span style=\"color:rgb(24, 24, 24)\"><b>iftop命令</b></span></h3><p id=\"c22b3632b0pjt\">iftop常用命令如下。</p><pre data-tag=\"codeblock\" id=\"c21e8c03b0bx7\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>iftop [-i interface]</code></pre><p id=\"3fe96460b5gmv\">interface表示网络接口名，比如eth0、eth1等。如果不通过-i参数指定接口名，则默认检测第一块网卡的使用情况。</p><h3 data-tag=\"h4\" id=\"c22b3633b0suh\" class=\"h4\"><b>使用示例</b></h3><ol id=\"c22b3634b08i1\"><li id=\"c22b5d40b0hm3\"><p id=\"a52e90b1b3w3h\"><span style=\"color:rgb(24, 24, 24)\">远程连接</span>Linux系统的<span style=\"color:rgb(24, 24, 24)\">ECS实例。</span></p><p class=\"itemgroup info\" id=\"info-d6f-lre-3tc\"><span style=\"color:rgb(24, 24, 24)\">具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a><span style=\"color:rgb(24, 24, 24)\">。</span></p></li><li id=\"c22b5d42b0lol\"><p id=\"c22b5d43b0qlx\">执行如下命令，安装iftop流量监控工具。 </p><pre data-tag=\"codeblock\" id=\"c21e8c04b0qal\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install iftop -y</code></pre></li><li id=\"c22b8452b0v2i\"><p id=\"c22b8453b0xf4\">执行如下命令，查看详细端口流量占用情况。 </p><pre data-tag=\"codeblock\" id=\"c21e8c05b0x7t\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>iftop -i eth0 -P</code></pre><div type=\"note\" id=\"c22b8454b0m3s\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"c22b8455b0v5a\" class=\"p\">-P参数会显示请求端口。\n</p></div></div><p id=\"c22b8456b0qsm\">系统显示类型如下，58690端口占用流量最大。 <img id=\"a5a41100b5ho2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2103577761/p573470.png\" alt=\"2023-02-26_18-15-54\" placement=\"break\" class=\"image break\"></p></li><li id=\"c22b8457b0mci\"><p id=\"c22bab60b086l\">执行如下命令，查看端口对应的进程。 </p><pre data-tag=\"codeblock\" id=\"c21e8c06b0gjc\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -tunlp |grep [$Port]</code></pre><div type=\"note\" id=\"c22bab61b0rh8\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"c22bab62b0bff\" class=\"p\">[$Port]为上一步查看的端口。\n</p></div></div><p id=\"c22bab63b0rmk\">系统显示类型如下。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9471227761/p519211.png\" class=\"image break\"></p></li><li id=\"c22bab64b0kw5\"><p id=\"c22bab65b0q8i\">确认对应服务后，您可以通过停止服务或使用iptables服务来对指定地址进行处理。</p><p id=\"f2e79e40b5i5l\">例如屏蔽IP地址或限速，以保证服务器带宽能够正常使用。</p></li></ol><p data-tag=\"h4\" id=\"c22bab66b0q8k\" class=\"h4\"></p><p id=\"a0834fc0b5gr1\"><b>显示结果主要字段说明</b></p><img id=\"7adc69c0b5wvl\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4073647761/p573471.png\" alt=\"2023-02-26_19-30-35\" placement=\"break\" class=\"image break\"><ul id=\"c22bab68b0m0v\"><li id=\"c22bab69b0b3i\"><p id=\"c22bab6ab0vd4\">第①部分：带宽使用情况。</p></li><li id=\"c22bd270b0g5m\"><p id=\"c22bd271b0seu\">第②部分：外部连接列表，即记录了哪些IP正在和本机的网络连接。</p><ul id=\"6c431f81b5p0i\"><li id=\"c22bd272b0xt1\"><p id=\"c22bd273b0fhf\">右侧部分是实时流量信息，分别是该访问IP连接到本机2秒、10秒和40秒的平均流量。</p></li><li id=\"71b614e0b5zqj\"><p id=\"71b5edd0b5mvr\"><code data-tag=\"code\" class=\"code\">=&gt;</code><span style=\"color:rgb(24, 24, 24)\">表示发送数据，</span><code data-tag=\"codeph\" class=\"codeph\">&lt;=</code><span style=\"color:rgb(24, 24, 24)\">表示接收数据。</span></p></li></ul></li><li id=\"c22bd275b0lqh\"><p id=\"c22bd276b0565\">第③部分。 </p><ul id=\"c22bd277b0vun\"><li id=\"c22bd278b054s\"><p id=\"c22bd279b0hq1\">第一列：TX表示发送流量，RX表示接收流量，TOTAL表示总流量。</p></li><li id=\"c22bd27ab0c65\"><p id=\"c22bd27bb0wl2\">第二列cum：表示第一列各种情况的总流量。</p></li><li id=\"c22bd27cb075l\"><p id=\"c22bd27db0o79\">第三列peak：表示第一列各种情况的流量峰值。</p></li><li data-spm-anchor-id=\"\" id=\"c22bd27eb0xrz\"><p id=\"c22bf980b0jl9\">第四列rates：表示第一列各种情况2秒、10秒、40秒内的平均流量。</p></li></ul></li></ul><p data-tag=\"h4\" id=\"c22c2093b006g\" class=\"h4\"><b>常见操作命令参数说明</b></p><p id=\"c22c2094b0iv9\">进入iftop界面后，可以通过按下相应的字母快捷按键，来对显示结果进行调整。</p><ul id=\"c22c2095b0j3y\"><li id=\"c22c2096b0u4w\"><p id=\"c22c2097b0103\">h：切换是否显示帮助。</p></li><li id=\"c22c2098b085y\"><p id=\"c22c47a0b03vx\">n：切换显示本机的IP或主机名。</p></li><li id=\"c22c47a1b0d4t\"><p id=\"c22c47a2b0oei\">s：切换是否显示本机的host信息。</p></li><li id=\"c22c47a3b07hs\"><p id=\"c22c47a4b05pg\">d：切换是否显示远端目标主机的host信息。</p></li><li id=\"c22c47a5b0lvg\"><p id=\"c22c47a6b07at\">t：切换显示格式为2行、1行、只显示发送流量或只显示接收流量。</p></li><li id=\"c22c47a7b0d9j\"><p id=\"c22c47a8b0mud\">N：切换显示端口号或端口服务名称。</p></li><li id=\"c22c47a9b0po5\"><p id=\"c22c47aab0zok\">S：切换是否显示本机的端口信息。</p></li><li id=\"c22c47abb0b20\"><p id=\"c22c47acb0itd\">D：切换是否显示远端目标主机的端口信息。</p></li><li id=\"c22c47adb0h0h\"><p id=\"c22c6eb0b0ekq\">p：切换是否显示端口信息。</p></li><li id=\"c22c6eb1b05wz\"><p id=\"c22c6eb2b0mj2\">P：切换暂停或继续显示。</p></li><li id=\"c22c6eb3b0yzl\"><p id=\"c22c6eb4b0gfb\">b：切换是否显示平均流量图形条。</p></li><li id=\"c22c6eb5b041t\"><p id=\"c22c6eb6b0f64\">B：切换计算2秒或10秒或40秒内的平均流量。</p></li><li id=\"c22c6eb7b0xt5\"><p id=\"c22c6eb8b0nym\">T：切换是否显示每个连接的总流量。</p></li><li id=\"c22c95c0b0nlr\"><p id=\"c22c95c1b0cvk\">l：打开屏幕过滤功能，输入要过滤的字符。比如输入相应IP地址，回车后，屏幕就只显示这个IP相关的流量信息。</p></li><li id=\"c22c95c2b0uov\"><p id=\"c22c95c3b0119\">L：切换显示画面上边的刻度，刻度不同，流量图形条会有变化。</p></li><li id=\"c22c95c4b01kc\"><p id=\"c22c95c5b0bx3\">j或k：向上或向下滚动屏幕显示的连接记录。</p></li><li id=\"c22c95c6b0fdx\"><p id=\"c22c95c7b02p9\">1或2或3：根据右侧显示的三列流量数据进行排序。</p></li><li id=\"c22c95c8b00kt\"><p id=\"c22c95c9b0es1\">&lt;：根据左边的本机名或IP排序。</p></li><li id=\"c22c95cab0a29\"><p id=\"c22c95cbb0911\">&gt;：根据远端目标主机的主机名或IP排序。</p></li><li id=\"c22cbcd0b0ce9\"><p id=\"c22cbcd1b0isu\">o：切换是否固定只显示当前的连接。</p></li><li id=\"c22cbcd2b09an\"><p id=\"c22cbcd3b03pz\">f：编辑过滤代码。</p></li><li id=\"c22cbcd4b0nu8\"><p id=\"c22cbcd5b0qld\">!：调用Shell命令。</p></li><li data-spm-anchor-id=\"\" id=\"c22cbcd6b0cgm\"><p id=\"c22cbcd7b0479\">q：退出。</p></li></ul></section><section id=\"fa995f10b5jyd\" class=\"section\"><h2 data-tag=\"h3\" id=\"c22cbcd8b0192\" class=\"h3\"><b>Nethogs工具的使用</b></h2><p id=\"c22cbcd9b0naj\">Nethogs是一款开源的网络流量监控工具，可用于显示每个进程的带宽占用情况。这样可以更直观定位异常流量的来源。Nethogs支持IPv4和IPv6协议，支持本地网卡及PPP连接。Nethogs工具的安装方法请参阅其官方帮助文档，本文不再详述。安装完毕，直接输入nethogs启动工具即可。不带任何参数时，Nethogs默认监控eth0。用户可以通过ifconfig等指令核实具体哪个网络接口（eth1、eth0）对应公网网卡。</p><h3 id=\"ab09ad01b5r63\">Nethogs命令</h3><p id=\"ba9bbab0b5q8l\">常见用法如下。</p><pre data-tag=\"codeblock\" id=\"b31b4212b592x\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>nethogs [-i interface]</code></pre><p id=\"b31b4213b52u9\">interface表示网络接口名，比如eth0、eth1等。如果不通过-i参数指定接口名，则默认检测第一块网卡的使用情况。</p><h3 data-tag=\"h4\" id=\"c22cbcdab08vn\" class=\"h4\"><b>使用示例</b></h3><ol id=\"c22cbcdbb0u26\"><li id=\"c22cbcdcb0wgm\"><p id=\"251c65c1b581k\"><span style=\"color:rgb(24, 24, 24)\">远程连接</span>Linux系统的<span style=\"color:rgb(24, 24, 24)\">ECS实例。</span></p><p id=\"c22ce3e0b0267\"><span style=\"color:rgb(24, 24, 24)\">具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a><span style=\"color:rgb(24, 24, 24)\">。</span></p></li><li id=\"c22ce3e1b0mzi\"><p id=\"c22ce3e2b03wb\">执行如下命令，安装nethogs流量监控工具。 \n</p><pre data-tag=\"codeblock\" id=\"c21e8c07b0bya\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install nethogs -y</code></pre></li><li id=\"c22ce3e7b0ujt\"><p id=\"c22ce3e8b08ra\">执行如下命令，查看网卡上进程级的流量信息。</p><pre data-tag=\"codeblock\" id=\"c21e8c08b0rag\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>nethogs eth1</code></pre><div type=\"note\" id=\"c22d0af0b0i95\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"c22d0af1b0mj7\" class=\"p\">nethogs默认的监控间隔是1秒，您可以通过-d参数来设定监控间隔。例如执行如下<code data-tag=\"codeph\" class=\"codeph\">nethogs eth1 -d 5</code>命令，设定监控间隔为5秒。 \n</p></div></div><p id=\"c22d0af2b0keu\">系统显示类似如下。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9471227761/p519213.png\" alt=\"5\" class=\"image break\"></p></li><li id=\"c22d0af3b0wqx\"><p id=\"c22d0af4b089g\">若确定进程是恶意程序，可以通过执行如下命令，终止进程。 </p><pre data-tag=\"codeblock\" id=\"c21e8c09b0sok\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>kill -TERM [$Port1]</code></pre><div type=\"note\" id=\"c22d0af5b0kht\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"c22d0af6b04kq\" class=\"p\">如果是Web服务程序，您可以使用iftop等工具来查询具体IP来源，然后分析Web访问日志是否为正常流量。日志分析可以使用logwatch或awstats等工具进行。\n</p></div></div><p id=\"c22d0af7b0rky\"></p></li></ol><p data-tag=\"h4\" id=\"c22d0af8b0vdv\" class=\"h4\"><b>显示结果说明</b></p><p id=\"c22d0af9b0ugf\">在nethogs监控界面，按<b>s</b>可以按照Sent列进行排序，按<b>r</b>可以按照Received列进行排序，按<b>m</b>可以切换不同的统计单位显示，例如kb/s、kb、b、mb。监控界面信息说明如下所示。</p><ul data-spm-anchor-id=\"\" id=\"c22d0afab0ype\"><li id=\"c22d3200b0v3j\"><p id=\"c22d3201b06k8\">PID列表示相应流量关联程序的进程号。</p></li><li id=\"c22d3202b03nm\"><p id=\"c22d3203b0xi3\">USER列表示相应进程的所属用户。</p></li><li id=\"c22d3204b0rmq\"><p id=\"c22d3205b0um2\">PROGRAM列表示程序的具体执行路径。</p></li><li id=\"c22d3206b0igb\"><p id=\"c22d3207b0hw2\">DEV列当前监控的网络接口名称。</p></li><li id=\"c22d3208b0q5z\"><p id=\"c22d8020b03bn\">Sent列表示相应进程已经发送的数据流量。</p></li><li id=\"c22d8021b0nsc\"><p id=\"c22d8022b0ff5\">Received列表示程序已经接收的数据流量。</p></li></ul></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/query-and-case-analysis-linux-cpu-load", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></span>\n <span>Linux系统的ECS实例CPU使用率或CPU负载较高问题的排查及解决方案</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例CPU使用率或CPU负载较高问题的排查及解决方案</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-09-13 18:04:31</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"a0f98230a0hn2\"><p data-tag=\"shortdesc\" id=\"a10960b6a0g73\" class=\"shortdesc\">本文主要介绍当Linux系统ECS实例CPU使用率或CPU负载较高时，如何排查分析及常见案例说明。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"ca83b6b0a0av3\" class=\"section\"><h2 id=\"n49mj\">操作场景</h2><p id=\"a51e02a0bc5yv\">在您使用ECS实例过程中，可能会遇到实例CPU使用率或CPU负载持续较高的情况，您可以按照以下步骤排查定位具体问题。</p><ol id=\"a109aedaa0sya\"><li id=\"a109d5e0a0rvx\"><p id=\"a109d5e1a0mc4\">找到影响CPU使用率或CPU负载过高的具体进程。</p></li><li id=\"a109d5e2a02e8\"><p id=\"eb6a4f00bc9fi\">排查影响CPU使用率或CPU负载过高的进程是否正常，并分类进行处理。</p><ul id=\"a109d5e5a0357\"><li data-spm-anchor-id=\"a2c4g.11186623.2.i5.6dd14c07ryhnb3\" id=\"a109d5e6a0el4\"><p id=\"a109d5e7a0us7\">对于正常进程：您需要对程序进行优化或者升配实例规格。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/upgrade-the-instance-types-of-subscription-instances\">包年包月实例升配规格</a>或<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-the-instance-type-of-a-pay-as-you-go-instance\">按量付费实例变配规格</a>。</p></li><li data-spm-anchor-id=\"a2c4g.11186623.2.i6.6dd14c07ryhnb3\" id=\"a109d5e8a0awc\"><p id=\"a109d5e9a0mt7\">对于异常进程：您可以手动对进程进行查杀，也可以使用第三方安全工具去查杀。</p></li></ul></li></ol></section><section id=\"cfb25010a0i3v\" class=\"section\"><h2 data-tag=\"h3\" id=\"a109fcf1a0p3k\" class=\"h3\"><b>CPU负载的查询分析</b></h2><p data-spm-anchor-id=\"a2c9r.12641768.0.i20.17445480Sa2Gpt\" id=\"a109fcf2a032v\">在Linux系统中，查看进程的常用命令如下所示。本文主要介绍vmstat和top常用命令的使用。</p><ul id=\"a109fcf3a068g\"><li data-spm-anchor-id=\"a2c9r.12641768.0.i20.17445480Sa2Gpt\" id=\"a109fcf4a0sy8\"><p id=\"a109fcf5a0v35\">vmstat</p></li><li id=\"a109fcf6a01d8\"><p id=\"a109fcf7a0jev\">top</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i20.17445480Sa2Gpt\" id=\"a109fcf8a0fqn\"><p id=\"a109fcf9a0r2j\">ps -aux</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i20.17445480Sa2Gpt\" id=\"a109fcfaa0zd6\"><p id=\"a109fcfba00b9\">ps -ef</p></li></ul><section id=\"e5618450behmg\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"c6ae1da0a0m96\" class=\"section\"><h3 data-tag=\"h4\" id=\"a109fcfda0d00\" class=\"h4\"><b>vmstat命令的使用</b></h3><p id=\"a109fcfea0rlq\">vmstat（VirtualMeomoryStatistics，虚拟内存统计），通过vmstat命令，从系统维度查看操作系统的虚拟内存、进程、CPU等的整体情况。</p><h4 id=\"619b3250bczfc\"><b>vmstat命令</b></h4><p id=\"52af4250b54rf\">常用vmstat命令如下所示。</p><pre id=\"9mqnld\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vmstat [-n] [delay [count]] </code></pre><div type=\"note\" id=\"c22ae810b0vm2\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"4f649c12bcad9\"><li id=\"4f649c10bc6ot\"><p id=\"c22ae812b062l\">[-n]：只在开始时显示一次各字段名称。</p></li><li id=\"50b29fe1bcqnv\"><p id=\"50b29fe0bcn0t\">[delay]：刷新时间间隔。如果不指定，只显示一条结果。</p></li><li id=\"5723f271bcrw4\"><p id=\"5723f270bc8e0\">[count]：刷新次数。如果不指定刷新次数，但指定了刷新时间间隔，这时刷新次数为无穷。</p></li></ul></div></div><h4 id=\"8c9436e0bccdg\">使用示例</h4><p id=\"c22ae814b0kef\">执行如下命令，使用vmstat每1秒统计一次各进程的CPU使用情况，连续统计4次。</p><pre id=\"a0f98231a02yt\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vmstat -n 1 4</code></pre><p id=\"a109fcffa00hp\">返回示例类似如下。</p><pre id=\"a0f98232a0xxg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----\n r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st\n 1  0      0 2684984 310452 2364304    0    0     5    17   19   35  4  2 94  0  0\n 0  0      0 2687504 310452 2362268    0    0     0   252 1942 4326  5  2 93  0  0\n 0  0      0 2687356 310460 2362252    0    0     0    68 1891 4449  3  2 95  0  0\n 0  0      0 2687252 310460 2362256    0    0     0     0 1906 4616  4  1 95  0  0</code></pre><p data-tag=\"h4\" id=\"c22ae817b0mda\" class=\"h4\"><b>显示结果主要字段说明</b></p><ul id=\"0e5379f0bcb8l\"><li id=\"0e5379f1bc42g\"><p id=\"0e5379f2bccln\">r：表示系统中CPU等待处理的线程。一个CPU每次只能处理一个线程，所以该数值越大，通常表示系统运行越慢。</p></li><li id=\"0e5379f3bct9f\"><p id=\"0e5379f4bckew\">us：用户模式消耗的CPU时间百分比。该值较高时，说明用户进程消耗的CPU时间比较多。如果该值长期超过50%，则需要对程序算法或代码等进行优化。</p></li><li id=\"0e5379f5bcerq\"><p id=\"0e5379f6bco34\">sy：内核模式消耗的CPU时间百分比。</p></li><li id=\"0e5379f7bcrt0\"><p id=\"0e5379f8bcrd0\">wa：I/O等待消耗的CPU时间百分比。该值较高时，说明IO等待比较严重，这可能是磁盘大量作随机访问造成的，也可能是磁盘性能出现了瓶颈。</p></li><li id=\"0e5379f9bc5xv\"><p id=\"0e5379fabcn0u\">id：处于空闲状态的CPU时间百分比。如果该值持续为0，同时sy是us的两倍，则通常说明系统面临CPU资源短缺。</p></li></ul></section><section id=\"c11773a0a0j8l\" class=\"section\"><h3 data-tag=\"h4\" id=\"a10a4b16a0v4x\" class=\"h4\"><b>top</b>命令的使用</h3><p id=\"09448870bclce\">top命令是Linux系统中常用的性能分析工具，可以实时显示系统中各进程的资源占用情况。</p><h4 id=\"3e89ec50bc7mt\">top命令</h4><pre id=\"a0f98233a0e8g\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>top [-n] [-d] </code></pre><ul id=\"d676e5e0bcit9\"><div id=\"ac3167f0bcawn\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"d676e5e2bcpm8\">[-n]：刷新次数。如果不指定刷新次数，但指定了刷新时间间隔，这时刷新次数为无穷。</p><p id=\"d676e5e4bca30\">[-d] ：刷新时间间隔。</p></div></div></ul><h4 id=\"ba0c76d1bc9ii\">使用示例</h4><ol id=\"c22b3634b08i1\"><li id=\"c22b5d40b0hm3\"><p id=\"a52e90b1b3w3h\">远程连接Linux系统的ECS实例。</p><p class=\"itemgroup info\" id=\"info-d6f-lre-3tc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"44a3b381bdmdl\"><p id=\"ba0c76d2bcp9x\">执行如下命令，查看系统中各进程的资源占用情况。</p><p id=\"60d542d0bd0ih\">如下命令表示：每2秒统计一次各进程相关信息，统计5次后停止。</p><pre id=\"c273cd00bcr2j\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>top -n 5 -d 2</code></pre><p id=\"7dcc1df0bd4hi\">系统显示类似如下。 </p><pre id=\"a0f98234a0tkz\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>top - 17:27:13 up 27 days,  3:13,  1 user,  load average: 0.02, 0.03, 0.05\nTasks:  94 total,   1 running,  93 sleeping,   0 stopped,   0 zombie\n%Cpu(s):  0.3 us,  0.1 sy,  0.0 ni, 99.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.1 st\nKiB Mem:   1016656 total,   946628 used,    70028 free,   169536 buffers\nKiB Swap:        0 total,        0 used,        0 free.   448644 cached Mem\nPID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND\n1 root        20   0   41412   3824   2308 S  0.0  0.4   0:19.01 systemd\n2 root        20   0       0      0      0 S  0.0  0.0   0:00.04 kthreadd</code></pre><p data-tag=\"h4\" id=\"1991bde0bcov3\" class=\"h4\"><b>显示结果主要字段说明</b></p><p id=\"a10a7226a02hp\">针对CPU使用率和CPU负载问题，您只需关注回显的第一行和第三行信息，详细说明如下。 \n</p><ul id=\"a10a7227a0t0o\"><li id=\"a10a7228a08lm\"><p id=\"a10a7229a0gln\">第一行：显示的内容<code data-tag=\"code\" class=\"code\">17:27:13 up 27 days, 3:13, 1 user, load average: 0.02, 0.03, 0.05</code>，依次为系统当前时间、系统到目前为止已运行的时间、当前登录系统的用户数量、系统负载。</p></li><li id=\"a10a722aa09la\"><p id=\"a10a722ba0ge0\">第三行：显示当前CPU资源的总体使用情况，下方会显示各个进程的资源占用情况。</p></li></ul></li><li id=\"d111b6a1bd59e\"><p id=\"d111b6a0bdgg1\">在top命令执行过程中，可以使用一些交互命令。</p><ul id=\"c93286c1bdxb0\"><li id=\"c8a3db51bd2ol\"><p id=\"c8a3db50bdedz\">通过<b data-tag=\"uicontrol\" id=\"1ff93ff8b9x8f\" class=\"uicontrol\">P</b>键，可以对CPU使用率进行倒序排列，方便定位系统中占用CPU较高的进程。</p></li><li id=\"d64feaf0bduum\"><p id=\"d6821e80bd2ke\">通过<b data-tag=\"uicontrol\" id=\"1ff93ffcb94cl\" class=\"uicontrol\">M</b>键，您可以对系统内存使用情况进行排序。如果有多核CPU，数字键1可以显示每核CPU的负载状况。</p></li></ul></li><li id=\"dc185351bds2j\"><p id=\"dc185350bdsps\">执行<code data-tag=\"code\" class=\"code\">ll /proc/PID/exe</code>命令，可以查看每个进程ID对应的程序文件。 </p></li><li id=\"eb0b3ad1bd76y\"><p id=\"eb0b3ad0bdaoo\">终止CPU消耗较大的进程。</p><ol id=\"f7f1b081bdoea\"><li id=\"f742abd1bdyy6\"><p id=\"07dfe7f0bdizc\">先写入小写字母<b data-tag=\"uicontrol\" id=\"1ff9670cb9e2a\" class=\"uicontrol\">k</b>。</p></li><li id=\"08678e81bdwzz\"><p id=\"08678e80bdm56\">输入想要终止的进程PID，按Enter键。</p><p id=\"25c5b6f0bdhr7\">默认为输出结果的第一个PID，如下图所示，假如想要终止PID为23的进程，输入23后按Enter键。 </p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0057605761/p519169.png\" class=\"image break\"></li><li id=\"425ac300bd2kc\"><p id=\"431141c0bdhpr\">操作成功后，界面会出现类似<code data-tag=\"code\" class=\"code\">Send pid 23 signal [15/sigterm]</code>的提示信息，按Enter键确认即可。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0057605761/p519170.png\" class=\"image break\"></li></ol></li></ol></section></section></section><section id=\"b43d9300a0r4f\" class=\"section\"><h2 data-tag=\"h3\" id=\"a10a9938a0zrl\" class=\"h3\"><b>常见CPU资源过高案例分析</b></h2><section id=\"a3d1c720a0645\" class=\"section\"><h3 data-tag=\"h4\" id=\"a10ae756a0md4\" class=\"h4\"><b>案例一：CPU使用率较低但负载较高</b></h3><section id=\"fadf8c30bd15l\" class=\"section\"><h4 id=\"h4-u95EEu9898u63CFu8FF0\"><b>问题现象</b></h4><p id=\"a10ae757a0b6d\">当前Linux系统没有业务程序运行。通过top命令观察，发现CPU使用率不高，但是CPU负载（load average）却非常高，如下图所示。</p><img src=\"//img.alicdn.com/tfscom/TB1Axu8KFXXXXacXpXXXXXXXXXX.png#alt=&amp;height=88&amp;width=585\" width=\"585\" height=\"NaN\" class=\"image break\"></section><section id=\"fcc4c6f0bdtbb\" class=\"section\"><h4 id=\"138a9770bcaf9\"><b>问题原因</b></h4><p id=\"16adf780bcutv\">该问题可能是因为僵尸（zombie）进程过多导致。</p><p id=\"a4d03a50bcobz\">load average是对CPU负载进行评估的，其值越高说明其任务队列越长，处于等待执行的任务越多。</p></section><section id=\"ff28a790bduo5\" class=\"section\"><h4 id=\"h4-u5904u7406u529Eu6CD5\"><b>解决方案</b></h4><p id=\"8cd83600bcxqb\">您可以通过<code data-tag=\"code\" class=\"code\">ps -axjf</code>命令查看是否存在<b data-tag=\"uicontrol\" id=\"1ff9b521b99of\" class=\"uicontrol\">D+</b>状态进程，该状态是指不可中断的睡眠状态。</p><p id=\"af8243d0bclkf\">处于该状态的进程无法终止，也无法自行退出，只能通过恢复其依赖的资源或者重启系统来解决。</p><img src=\"//img.alicdn.com/tfscom/TB1klOOKFXXXXbmaXXXXXXXXXXX.png#alt=&amp;height=122&amp;width=659\" width=\"659\" height=\"NaN\" class=\"image break\"></section></section><section id=\"f54d43a0a0w5u\" class=\"section\"><h3 data-tag=\"h4\" id=\"a10b0e63a0cvj\" class=\"h4\"><b>案例二：kswapd0进程占用CPU较高</b></h3><section id=\"d020d0b0a02c6\" class=\"section\"><h4 id=\"a0f98236a0kef\"><b>问题现象</b></h4><p id=\"a10b0e66a0t3x\">ECS实例运行卡顿，使用<code data-tag=\"code\" class=\"code\">top</code>命令查看，kswapd0进程占用了99% CPU。<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0057605761/p519171.png\" class=\"image break\"></p></section><section id=\"b6408fc0bdtql\" class=\"section\"><h4 id=\"c774a2d0bc52k\">问题原因</h4><p id=\"c8458761bc2jt\">出现该问题可能是系统此时在持续进行换页操作，导致占用大量CPU资源。</p><p id=\"aa017650bcbx8\">kswapd0是虚拟内存管理中负责换页的进程，当ECS实例物理内存不足时，kswapd0会执行换页操作，换页操作会消耗大量的CPU资源。</p></section><section id=\"b2cdcbd0a0dsj\" class=\"section\"><h4 id=\"a0f98237a08th\"><b>解决方案</b></h4><p id=\"65d75121bdlxw\">您可以通过修改vm.swappiness内核参数来控制交换空间的大小，来解决kswapd0进程占用CPU较高的问题。</p><ol id=\"afba43b0bd8c9\"><li data-spm-anchor-id=\"a2c9r.12641768.0.i0.47d05e3b5ENw6f\" id=\"29a12c24bd0t0\"><p id=\"29a12c25bd1gk\">登录Linux实例。</p><p id=\"3f210f10bdrml\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"b12370a1bdt3v\"><p id=\"b12370a0bdnn3\">查看swappiness参数。</p><pre id=\"1scnrd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /proc/sys/vm/swappiness</code></pre><p id=\"3e492b00bdf0n\">系统显示类似如下，表示当物理内存低于60%（100-40）时使用swap空间。</p><div type=\"note\" id=\"000b5f11bd8wg\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"058bc1f0bd2d3\">swappiness参数越低，表示Linux系统尽量少用swap分区，多用物理内存；swappiness参数值越高，表示使内核更多的去使用swap空间。</p></div></div><img id=\"848312c0bdvah\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8159238761/p580340.png\" alt=\"查看swap\" placement=\"break\" class=\"image break\"></li><li id=\"c01e9581bd5ax\"><p id=\"c01e9580bdthg\">根据业务需要，修改swappiness参数。</p><ol id=\"51506cd1bdlct\"><li id=\"50c1c160bdivq\"><p id=\"50c19a50bdv5t\">打开内核参数配置文件sysctl.conf。</p><pre id=\"6ad3wv\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vi /etc/sysctl.conf</code></pre></li><li id=\"8b635e51bd07c\"><p id=\"b021f440bdzlx\">根据业务需要，修改swappiness参数值。</p><p id=\"18af8c70bdvg5\">如在sysctl.conf文件中，修改<code data-tag=\"code\" class=\"code\">vm.swappiness = 10</code>。</p></li><li id=\"3b8f2920bevp0\"><p id=\"48da5410bexbp\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\"><b>:wq</b></code>保存修改。</p></li><li id=\"b6ae48e0bdldz\"><p id=\"b6ae21d0bdfsd\">重新加载sysctl配置文件，使配置生效。</p><pre id=\"rygzsn\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sysctl -p</code></pre><p id=\"7042ad50bdg2n\">若该问题还未解决，建议您升配实例规格。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/upgrade-the-instance-types-of-subscription-instances\">包年包月实例升配规格</a>或<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-the-instance-type-of-a-pay-as-you-go-instance\">按量付费实例变配规格</a>。</p></li></ol></li></ol></section></section><section id=\"a11351f0bd5qa\" class=\"section\"><h3 id=\"99e34340bdfbh\"><b>案例三：CPU使用率过高100%问题排查</b></h3><section id=\"1f7e5820bep18\" class=\"section\"><h4 id=\"19a9fc91bd8gq\"><b>问题现象</b></h4><p id=\"bd717a12bd5l0\">使用ECS实例的过程中，如果遇到CPU使用率高达100%等异常情况，且无法通过top、htop等命令查询到消耗CPU资源的具体进程。</p></section><section id=\"2143fcf0behkk\" class=\"section\"><h4 id=\"1ce30780bdroz\"><b>问题原因</b></h4><p id=\"ef508170bdc4i\">该问题可能是病毒导致。</p></section><section id=\"25799050behy0\" class=\"section\"><h4 id=\"1ea88540bdczf\"><b>解决方案</b></h4><ol id=\"13438a02bd27n\"><li id=\"13438a00bd162\"><p id=\"1111b5e1bdc7a\">查看云监控监控数据。</p><ol id=\"9928ec91bdd9z\"><li id=\"98f72e30bd6y2\"><p id=\"98f70720bd73i\">登录<a class=\"\" target=\"_blank\" href=\"https://cloudmonitornext.console.aliyun.com/newOverview\">云监控管理控制台</a>。</p></li><li id=\"9ca67a91bd6ww\"><p id=\"9ca67a90bdnov\">在左侧导航栏，单击<b data-tag=\"uicontrol\" id=\"ba9ac880bd88q\" class=\"uicontrol\">主机监控</b><b>。</b></p></li><li id=\"afd55e11bddpt\"><p id=\"afd55e10bdngu\">找到异常主机，单击操作列的<b data-tag=\"uicontrol\" id=\"ccb26fa0bd8j3\" class=\"uicontrol\">监控图表</b>。</p></li><li id=\"d634d2c1bdr18\"><p id=\"d634d2c0bdtr7\">在<b data-tag=\"uicontrol\" id=\"dbf15440bdg7j\" class=\"uicontrol\">操作系统监控</b>页签下，查看该主机的<b data-tag=\"uicontrol\" id=\"e5441be0bdzp5\" class=\"uicontrol\">CPU使用率</b>并记录具体时间点。</p></li></ol></li><li id=\"f7dd4f11bd1c2\"><p id=\"265998e0bdxls\">查看Linux实例的命令修改记录。</p><ol id=\"0890f961bdkfy\"><li id=\"07ea3210bdq5j\"><p id=\"07ea0b00bddhw\">登录Linux实例。</p><p id=\"15b65ec0bdvbo\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"0ba3deb1bdnd8\"><p id=\"0edb14e0bdrk9\">执行如下命令，查看当前Linux系统命令最近是否被修改过。</p><pre id=\"ladytx\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>stat /usr/bin/top</code></pre><p id=\"23e7e020bdiqo\">系统显示类似如下，系统命令有被修改。查看更改时间是否和云监控中CPU使用率出现100%的时间点吻合。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8159238761/p519468.png\" alt=\"CommandChanges\" width=\"500\" class=\"image break\"></li></ol></li><li id=\"164ea720bdm96\"><p id=\"164e8010bdaz7\">分别执行如下命令，查看<code data-tag=\"code\" class=\"code\">ps</code>或<code data-tag=\"code\" class=\"code\">top</code>命令是否被修改过。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"9f4d7d40be79c\" class=\"pre codeblock language-plaintext\"><code>rpm -Vf /bin/ps\nrpm -Vf /usr/bin/top</code></pre><ul id=\"23c2ca81benkq\"><li id=\"ff2be0d0beu3q\"><p id=\"27350de0be5li\">正常情况下，系统无返回修改信息。</p></li><li id=\"2be57690beffn\"><p id=\"2e1d8c40be7wp\">系统异常情况下，显示类似如下，表示<code data-tag=\"code\" class=\"code\">ps</code>和<code data-tag=\"code\" class=\"code\">top</code>命令被修改过。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8159238761/p519469.png\" alt=\"CommandQuery\" width=\"500\" class=\"image break\"></li></ul></li><li id=\"21c23f90belvl\"><p id=\"21c21880bejs1\">执行如下命令，查看当前实例是否连接到异常域名。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"8a26cbf0bex68\" class=\"pre codeblock language-plaintext\"><code>iftop -i [$Device] -n -P</code></pre><div type=\"note\" id=\"a4e4a701be2g7\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"a7a65f10bedlw\">[$Device]请替换为当前系统使用的网卡，如eth0。</p></div></div><p id=\"a35af9c0bew6i\">系统显示类似如下，若您没有连接过crypto-pool.fr，则crypto-pool.fr是异常域名。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8159238761/p519470.png\" width=\"500\" class=\"image break\"></li><li id=\"275c3141bde6m\"><p id=\"275c3140bdsvz\">综合以上表现，top、ps命令被修改，并且连接到异常域名，判断您的ECS实例已被病毒入侵，可以参考以下方案。</p><ol id=\"fb601651be45a\"><li id=\"fac1da80bexmk\"><p id=\"fac1b370bejja\">备份ECS实例数据，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></li><li id=\"0e8ed2c0bew80\"><p id=\"0e8eabb0be8xp\">重新初始化系统盘，然后使用云安全中心对ECS实例进行安全加固。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/re-initialize-a-system-disk\">重新初始化系统盘</a>和<a title=\"\" class=\"xref\" href=\"/zh/security-center/product-overview/what-is-security-center\">什么是云安全中心</a>。</p></li></ol></li></ol></section></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-error-error-net-ipv6-conf-all-disable-ipv6-is-an-unknown-key-is-returned-when-you-run-the-sysctl-p-command-on-a-linux-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></span>\n <span>在Linux系统的ECS实例中，执行sysctl -p命令时提示“error: \"net.ipv6.conf.all.disable_ipv6\" is an unknown key ”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在Linux系统的ECS实例中，执行sysctl -p命令时提示“error: \"net.ipv6.conf.all.disable_ipv6\" is an unknown key ”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:29:06</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"a9cef730cb6s8\"><p data-tag=\"shortdesc\" id=\"a9d3d930cbwi1\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中，执行<code data-tag=\"code\" class=\"code\">sysctl -p</code>命令时提示“error: \"net.ipv6.conf.all.disable_ipv6\" is an unknown key ”错误的原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"ecbfce70cb2ft\" class=\"section\"><h2 id=\"a9d3d931cbagb\">问题现象</h2><p id=\"a9d3d932cbe7j\">在Linux系统的ECS实例中，执行<code data-tag=\"code\" class=\"code\">sysctl -p</code>命令时提示如下错误。</p><pre data-tag=\"codeblock\" id=\"a9cef731cberu\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>error: \"net.ipv6.conf.all.disable_ipv6\" is an unknown key</code></pre></section><section id=\"28c84e60cb91u\" class=\"section\"><h2 id=\"ef68a750cb84p\">问题原因</h2><p id=\"4117d660ceubm\">出现该问题可能有以下原因：</p><ul id=\"7402cf82cee45\"><li id=\"7402cf80ceafp\"><p id=\"6420cd10cetmy\">禁用IPv6时：ECS实例中内核参数文件<code data-tag=\"code\" class=\"code\">sysctl.conf</code>未删除或注释IPv6参数配置。</p></li><li id=\"7d1b4d40ceqlv\"><p id=\"eeddf380cbt7c\">启用IPv6时：ECS实例中内核参数文件<code data-tag=\"code\" class=\"code\">sysctl.conf</code>未启用IPv6参数配置或缺少IPv6模块。</p></li></ul></section><section id=\"9d045170cbdnv\" class=\"section\"><h2 id=\"a9d3d935cbm6m\">解决方案</h2><p id=\"a3aeca41ceu0u\">您可以根据业务需要，修改内核参数配置文件<code data-tag=\"code\" class=\"code\">sysctl.conf</code>以解决该问题。</p><ol id=\"43b85d02cb6zd\"><li id=\"43b85d00cbnhg\"><p id=\"423e6731cbtvg\">远程连接ECS实例。</p><p id=\"663cba60cb6b6\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"65503781cb7f3\"><p id=\"65503780cbxu7\">根据业务需要，修改内核参数配置文件<code data-tag=\"code\" class=\"code\">sysctl.conf</code>。</p><ul id=\"76256bf1ceao3\"><li id=\"6a6db240cej00\"><p id=\"795687a0ceomq\">禁用IPv6。</p><ol id=\"7ae983b1ceduo\"><li id=\"779f13a1ce6me\"><p id=\"779f13a0ce01q\">执行如下命令，打开并编辑内核参数配置文件<code data-tag=\"code\" class=\"code\">sysctl.conf</code>。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"8cfad850ce64a\" class=\"pre codeblock language-plaintext\"><code>vim /etc/sysctl.conf</code></pre></li><li id=\"ecb84cc1cem15\"><p id=\"7c5dd430ce6mw\">按<code data-tag=\"code\" class=\"code\">i</code>进入编辑模式。</p></li><li id=\"83601c21cejf0\"><p id=\"83601c20cejgg\">在IPv6参数前加<code data-tag=\"code\" class=\"code\">#</code>注释掉该配置或直接删除该配置。</p><pre id=\"ktrafq\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>#net.ipv6.conf.all.disable_ipv6 = 1</code></pre></li><li id=\"7f5b35b1ceewq\"><p id=\"822ad070cemb6\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>退出编辑模式。</p></li></ol></li><li id=\"0a17d4c1cemfu\"><p id=\"c7fac840ce9bs\">启用IPv6。</p><ol id=\"c5d920c1cepef\"><li id=\"c7fac841ce5uj\"><p id=\"06098300ce788\">执行如下命令，打开并编辑内核参数配置文件<code data-tag=\"code\" class=\"code\">sysctl.conf</code>。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"4ea91060ce4zl\" class=\"pre codeblock language-plaintext\"><code>vim /etc/sysctl.conf</code></pre></li><li id=\"076c9571ce5ns\"><p id=\"076c9570ce9x4\">按<code data-tag=\"code\" class=\"code\">i</code>进入编辑模式。</p></li><li id=\"4da36565ces80\"><p id=\"4da36566ceyyj\">修改内核参数，启用IPv6配置。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"4da36567cedgq\" class=\"pre codeblock language-plaintext\"><code>net.ipv6.conf.all.disable_ipv6 = 0</code></pre></li><li id=\"4da36568cesxs\"><p id=\"4da36569ce75c\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>退出编辑模式。</p></li><li id=\"9c867d61cey9z\"><p id=\"9c867d60cetfn\">执行如下命令，加载IPv6模块。</p><pre id=\"k4g3dm\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>modprobe ipv6</code></pre></li></ol></li></ul></li><li id=\"7ff61dc1cbyos\"><p id=\"7ff61dc0cb11u\">重新执行<code data-tag=\"codeph\" class=\"codeph\">sysctl -p</code>命令，如果没有返回错误信息，说明该问题已解决。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/excessive-disk-space-occupied-by-temporary-files-in-windows", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></span>\n <span>Windows系统的ECS实例，C盘空间不断减小该怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows系统的ECS实例，C盘空间不断减小该怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-14 17:28:22</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"2ce748a0bbijo\"><p data-tag=\"shortdesc\" id=\"4c954f50bb4yo\" class=\"shortdesc\"><span style=\"color:rgb(51, 51, 51)\">本文介绍Windows系统的ECS实例，</span><code data-tag=\"codeph\" class=\"codeph\">C:\\windows\\logs\\cbs</code>和<code data-tag=\"codeph\" class=\"codeph\">C:\\windows\\temp</code>中文件持续增长导致<span style=\"color:rgb(51, 51, 51)\">C盘空间会不断减小的问题原因</span><span style=\"color:rgb(51, 51, 51)\">和</span><span style=\"color:rgb(51, 51, 51)\">解决方案。</span></p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"9a159ca0bb268\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"2cef37e8bbkv5\">Windows系统的ECS实例，出现C盘空间不断减小的情况，导致系统不能正常操作。</p></section><section id=\"5e49c5d0bbjzs\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"2cef5ef1bbvyg\">C盘空间不断减小可能是因为<code data-tag=\"codeph\" class=\"codeph\">C:\\windows\\logs\\cbs</code>目录下CbsPersist_xxxx.log文件持续增长，同时<code data-tag=\"codeph\" class=\"codeph\">C:\\windows\\temp</code>下不停出现cab_XXXX_X文件，导致C盘空间不断减小。</p><div type=\"note\" id=\"2cef5ef2bb1sg\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"2cef5ef4bb2nm\">您可以使用<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://windirstat.net\">WinDirStat</a>或<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://spacesniffer.en.softonic.com/\">SpaceSniffer</a>等工具对磁盘目录的大小进行分析，确认问题原因。</p></div></div><ul id=\"16933082bbfos\"><li id=\"16933080bbk4y\"><p id=\"15afae50bbusm\"><code data-tag=\"code\" class=\"code\">C:\\windows\\logs\\cbs</code>目录下存在大量以CbsPersist_xxxx.log开头的CBS.log文件，CBS.log是Windows中的日志文件，用于记录Windows系统的日志信息，如Windows update更新日志、Windows的错误报告等。CBS.log在一定大小、一段时间后会自动传输到一个CbsPersist_xxxx.log，一段时间后CbsPersist_xxxx.log会自动压缩成一个小的cab。</p><p id=\"feef8660bbrqp\">例如下图中，<code data-tag=\"code\" class=\"code\">C:\\windows\\logs\\cbs</code>中存在修改时间为2015/12/9的一个2.1 GB的CbsPersist_20151211070234.log文件。该文件是创建镜像时，安装Windows补丁所记录的日志文件。</p><img id=\"505cb590bbhb1\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5833908761/p577510.png\" alt=\"CBS\" placement=\"break\" class=\"image break\"></li><li id=\"213ef870bbhjq\"><p id=\"213ed160bba67\"><code data-tag=\"code\" class=\"code\">C:\\windows\\temp</code>目录下的cab_XXXX_X文件是安装程序，是CbsPersist_xxxx.log压缩时的临时存储文件。</p><p id=\"2e7c6060bbl2r\">例如下图中，<code data-tag=\"code\" class=\"code\">C:\\windows\\temp</code>中存在修改时间为2015/12/11的cab_XXXX_X文件，此文件是Windows系统压缩CbsPersist_20151211070234.log文件时所产生的临时文件。</p><img id=\"53603190bbhq0\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5833908761/p577511.png\" alt=\"CAB\" placement=\"break\" class=\"image break\"></li></ul></section><section id=\"fbbd9570bb3u3\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"3608ca70bbbq6\">建议您删除CbsPersist_xxxx.log、cab_XXXX_X文件或配置虚拟内存以解决该问题。</p><ul id=\"2cef8605bbhkx\"><li id=\"2cef8606bbad0\"><p id=\"2cefad10bb99u\">如果您使用该镜像所创建操作系统内存较小，并且没有配置虚拟内存，则可能会因为缺少虚拟内存而打包失败，造成产生过多临时文件。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/troubleshooting-windows-low-virtual-memory-problem\">如何处理Windows Server 2003/2008系统的ECS实例虚拟内存不足问题？</a>。</p></li><li id=\"2cefad11bb0ij\"><p id=\"2cefad12bb1tt\">登录ECS实例，手动删除文件CbsPersist_xxxx.log、cab_XXXX_X文件。</p></li></ul></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/troubleshooting-and-solving-the-problem-of-high-bandwidth-usage-in-windows-instances", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></span>\n <span>Windows实例中带宽使用率较高问题的排查及解决方法</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例中带宽使用率较高问题的排查及解决方法</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:52:35</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"856527608ftpc\"><p id=\"856f12708fist\" data-tag=\"shortdesc\" class=\"shortdesc\">本文主要介绍Windows实例中带宽使用率较高问题的排查及解决方法。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"42a7ff70b5sok\" class=\"section\"><h2 id=\"n49mj\">问题现象</h2><p id=\"efcac0a08f203\">Windows系统的ECS实例中带宽使用率较高。</p></section><section id=\"44754560b5ept\" class=\"section\"><h2 id=\"e9bdfc408f4da\">问题原因</h2><p id=\"494dcf80b5xu6\">带宽使用率较高可能有以下原因。</p><ul id=\"0a666db08fbl5\"><li id=\"0a666db18fxuk\"><p id=\"0a666db28f4bx\">您的正常应用业务访问频繁，占用较高带宽。</p></li><li id=\"0a666db38fheb\"><p id=\"0a666db48fnfi\">恶意病毒、木马引起的网络流量。</p><p id=\"5b90cc60b51gt\">有时第三方恶意程序可能会利用操作系统的svchost.exe或者Tcpsvcs.exe来伪装，引起高带宽的占用。</p></li><li id=\"0a666db58ff0o\"><p id=\"0a666db68f91v\">Windows自身服务可能会占用较高网络流量，例如更新服务。</p></li></ul></section><section id=\"61e85560b5tfh\" class=\"section\"><h2 id=\"eba50bc08f9ig\">解决方案</h2><section id=\"99d5a7c0b5958\" class=\"section\"><h3 id=\"856f87a58fnos\" data-tag=\"h3\" class=\"h3\"><b>步骤一：定位问题</b></h3><p id=\"856f87a68fde1\">微软有多个工具可以定位带宽使用率过高的问题，例如任务管理器、资源监视器（Resource Monitor）、性能监视器（Performance Monitor）、Process Explorer、Xperf（Windows Server 2008 以后），抓取系统Full Memory Dump进行检查。在流量大的情况下，您还可以使用Wireshark抓取一段时间的网络包，分析流量使用情况。</p><div type=\"note\" id=\"348eaa318f0il\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"34b370408f76p\">Windows Server 2008以上系统，通常使用系统自带的资源监视器监控带宽。</p></div></div><ol id=\"856f87aa8f7tb\"><li id=\"856f87ab8fgg4\"><p id=\"856f87ac8fy4f\">在桌面底部单击<b data-tag=\"uicontrol\" id=\"326f0367b5cno\" class=\"uicontrol\">开始</b>菜单，选择<b data-tag=\"uicontrol\" id=\"326f2a70b53u1\" class=\"uicontrol\">运行</b>。</p></li><li id=\"856faeb08f0m4\"><p id=\"856faeb18fdgv\">在<b data-tag=\"uicontrol\" id=\"02810120b5oe7\" class=\"uicontrol\">运行</b>框中输入<code data-tag=\"code\" class=\"code\">perfmon -res</code>，单击<b data-tag=\"uicontrol\" id=\"326f2a75b55qj\" class=\"uicontrol\">确定</b>。</p><p id=\"4e6b5c00b6m4i\"> <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6108623761/p518501.png\" alt=\"1\" class=\"image break\"></p></li><li id=\"856faeb28fmib\"><p id=\"856faeb38fcae\">在<b data-tag=\"uicontrol\" id=\"1f0088f0b6nj6\" class=\"uicontrol\">资源监视器</b>页面中，查看各进程是否有带宽使用率过高的现象。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5108623761/p518502.png\" alt=\"2\" class=\"image break\"></p></li><li id=\"856faeb48ff68\"><p id=\"856faeb58fnmk\">针对占用资源较高的进程，查看对应的进程ID和进程的程序名。</p></li><li id=\"856faeb68fq2o\"><p id=\"856faeb78fut5\">定位进程ID后，结合任务管理器判断程序是否异常并定位程序的具体位置。 \n</p><ol id=\"856faeb88fqce\"><li id=\"856faeb98fdfj\"><p id=\"856faeba8fa5x\">定位异常进程前，需要在任务管理器中依次单击<b data-tag=\"uicontrol\" id=\"326f5188b5qzi\" class=\"uicontrol\">查看(V)</b><b data-tag=\"uicontrol\" id=\"326f518ab5bwm\" class=\"uicontrol\">&gt; </b><b data-tag=\"uicontrol\" id=\"326f518cb5so8\" class=\"uicontrol\">选择列(S)...</b>。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5108623761/p518503.png\" alt=\"3\" class=\"image break\"></p></li><li id=\"856faebb8fy5h\"><p id=\"856faebc8f0oq\">在弹出的框中选择<b data-tag=\"uicontrol\" id=\"326f7894b5tfu\" class=\"uicontrol\">PID（进程标识符）</b>，单击<b data-tag=\"uicontrol\" id=\"326f7896b50z7\" class=\"uicontrol\">确定</b>。</p><p id=\"4bbbf370b6unw\"> <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5108623761/p518504.png\" alt=\"4\" class=\"image break\"></p></li><li id=\"856faebd8f797\" data-spm-anchor-id=\"a2c9r.12641768.0.i3.27af5e3bBRlSHu\"><p id=\"856faebe8fedu\">在任务管理器的进程页面中，将会增加PID这一项。单击<b data-tag=\"uicontrol\" id=\"326f9fa0b5tss\" class=\"uicontrol\">PID</b>，通过排序，找到之前资源监视器查看到的异常进程。右键单击进程名称，选择打开文件位置，查看进程是否为恶意程序。</p></li></ol></li></ol></section><section id=\"957e5b90b5p3e\" class=\"section\"><h3 id=\"923c28e1b59zn\" data-tag=\"h3\" class=\"h3\"><b>步骤二：分析处理</b></h3><p id=\"923c28e2b5ewj\">判断影响CPU使用率过高的进程属于正常进程或是异常进程，并按照下述相应步骤处理。</p><table id=\"923c28e3b5woc\" tablewidth=\"709\" tablecolswidth=\"99 610\" class=\"table\"><colgroup colwidth=\"0.28*\" style=\"width:13.96%\"></colgroup><colgroup colwidth=\"1.72*\" style=\"width:86.04%\"></colgroup><tbody class=\"tbody\"><tr id=\"923c28e4b52ty\"><td id=\"923c28e5b5lw9\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"923c28e6b5grh\"><b>可能原因</b></p></td><td id=\"923c28e7b5w8a\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"923c28e8b52a0\"><b>具体操作</b></p></td></tr><tr id=\"923c28e9b5ljt\"><td id=\"923c28eab5i9i\" rowspan=\"1\" colspan=\"1\"><p id=\"923c28ebb5bwn\">正常进程</p></td><td id=\"923c28ecb5evs\" rowspan=\"1\" colspan=\"1\"><p id=\"923c28edb5cy4\">一般情况下，当频繁访问业务，或由于Windows自身服务（更新服务等）都可能会占用较高网络流量和CPU 。</p><div id=\"923c28eeb524b\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"923c28efb5tdz\"><li id=\"923c28f0b5u7d\"><p id=\"923c28f1b5in7\">Windows Server 2008或Windows Server 2012实例建议内存配置在2 GiB或者2 GiB以上。</p></li><li id=\"923c28f2b5tp4\"><p id=\"923c28f3b5qnh\">在使用Windows Server 2012的1 vCPU 1 GiB规格的实例时，若Windows Update服务自动更新，实例的CPU使用率的带宽使用率也会突然升高，这是正常现象。</p></li></ul></div></div><ul id=\"923c28f4b560y\"><li id=\"923c28f5b51vz\"><p id=\"923c28f6b501e\">检查后台是否有执行Windows Update的行为。</p></li><li id=\"923c28f7b5o65\"><p id=\"923c28f8b5v89\">建议在服务器上安装杀毒软件进行杀毒。如有安装杀毒软件，请检查CPU使用率较高时，杀毒软件是否在后台执行扫描操作。如果可能，请升级杀毒软件到最新版本，或者删除杀毒软件。</p></li><li id=\"923c28f9b5u4t\"><p id=\"923c28fab5m5g\">检查该ECS内应用程序是否有大量的磁盘访问、网络访问行为或高计算需求。通过尝试增配实例规格的方式，使用更多核数或内存的规格来解决资源瓶颈问题。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-of-instance-configuration-changes\">升降配方式概述</a>。</p></li><li id=\"923c28fbb5q4e\"><p id=\"923c28fcb52mq\">若自身ECS实例配置较高，再去升级配置已无太大意义。架构方面也并非是ECS实例配置越高就越好。此时，您需要尝试进行应用分离，通过不同的服务器去承载不同的应用，同时对相关程序进行优化。</p><p id=\"923c28fdb55is\">比如数据库完全通过RDS来承载，减轻ECS实例本身的资源消耗和ECS实例内部大量的调用。而程序优化方面，您可以根据自身的配置状况进行调整，具体的操作有调整连接数、缓存配置、Web和数据库调用时的各项参数等。</p></li></ul></td></tr><tr id=\"923c28feb5q6s\"><td id=\"923c28ffb5bhz\" rowspan=\"1\" colspan=\"1\"><p id=\"923c2900b5dj4\">异常进程</p></td><td id=\"923c2901b5oye\" rowspan=\"1\" colspan=\"1\"><p id=\"923c4ff0b5hid\">对于CPU异常使用率过高的情况，可能是被恶意病毒、木马入侵导致的。有时三方恶意程序可能会利用操作系统的svchost.exe或者Tcpsvcs.exe来伪装，引起高CPU的占用。您需要手动对异常进程进行查杀。</p><div id=\"923c4ff1b5c07\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"923c4ff2b51qq\">若您无法判断进程是否为病毒或木马，建议将进程名称在网上进行搜索后确认。另外，建议您进行进程删除操作前，创建快照完成备份。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a></p></div></div><ul id=\"923c4ff3b5gqp\"><li id=\"923c4ff4b5qvn\"><p id=\"923c4ff5b5h9u\">使用商业版杀毒软件，或使用微软免费安全工具<a class=\"\" target=\"_blank\" href=\"https://www.microsoft.com/security/scanner/zh-cn/default.aspx\">Microsoft Safety Scanner</a>，在安全模式下进行扫描杀毒。</p></li><li id=\"923c4ff6b54t2\"><p id=\"923c4ff7b50v8\">运行Windows Update来安装最新的微软安全补丁。</p></li><li id=\"923c4ff8b5ezn\"><p id=\"923c4ff9b54xf\">使用MSconfig禁用所有非微软自带服务驱动，检查问题是否再次发生，具体操作，请参见<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://support.microsoft.com/zh-cn/help/929135/how-to-perform-a-clean-boot-in-windows\">如何在Windows系统中执行干净启动</a>。</p></li><li id=\"923c4ffab54av\"><p id=\"923c4ffbb55e4\">若服务器或站点遭受DDoS攻击或CC攻击等，短期内产生大量的访问需求。您可以登录<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://yundun.console.aliyun.com/\">云安全中心</a>，查看云安全中心中的防护DDoS攻击是否调整好阈值，并核实是否开启CC防护。如果攻击没有触发到阈值，云安全中心没有清洗，可以联系售后协助开起清理。</p></li></ul></td></tr></tbody></table></section></section><section id=\"69ad02f0b5dx7\" class=\"section\"><h2 id=\"856ffcdd8ff89\" data-tag=\"h3\" class=\"h3\"><b>示例说明</b></h2><section id=\"2afe3040b57f1\" class=\"section\"><h3 id=\"856ffcde8fwug\" data-tag=\"h4\" class=\"h4\"><b>问题现象</b></h3><p id=\"856ffcdf8fezj\">Windows实例出现网络流量较大的情况，即服务器网络带宽占用较高，如下图所示。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5108623761/p518505.png\" height=\"328\" width=\"600\" class=\"image break\"></section><section id=\"3042c2a0b5kai\" class=\"section\"><section id=\"6cb5b931b6wtg\" docid=\"3924988\" class=\"section\"><h3 id=\"e9bdfc408f4da\">问题原因</h3><p id=\"494dcf80b5xu6\">带宽使用率较高可能有以下原因。</p><ul id=\"0a666db08fbl5\"><li id=\"0a666db18fxuk\"><p id=\"0a666db28f4bx\">您的正常应用业务访问频繁，占用较高带宽。</p></li><li id=\"0a666db38fheb\"><p id=\"0a666db48fnfi\">恶意病毒、木马引起的网络流量。</p><p id=\"5b90cc60b51gt\">有时第三方恶意程序可能会利用操作系统的svchost.exe或者Tcpsvcs.exe来伪装，引起高带宽的占用。</p></li><li id=\"0a666db58ff0o\"><p id=\"0a666db68f91v\">Windows自身服务可能会占用较高网络流量，例如更新服务。</p></li></ul></section></section><section id=\"4b54b120b5ylj\" class=\"section\"><h3 id=\"857023e68f5qm\" data-tag=\"h4\" class=\"h4\"><b>解决方案</b></h3><p id=\"857023e78fo70\">通过如下2种方法分析为何占用高流量。</p><ul id=\"857023e88fm6r\"><li id=\"857023e98fq1f\"><p id=\"857023ea8fvh1\">使用Windows自带工具资源监视器（Resource Monitor）监控实时流量。</p></li><li id=\"857023eb8f4s4\"><p id=\"857023ec8f2fj\">在流量大的情况下，使用Wireshark工具抓取一段时间的网络包，分析流量使用情况。</p></li></ul><section id=\"515a4990b5zuc\" class=\"section\"><h4 id=\"857023ed8frwh\" data-tag=\"h5\" class=\"h5\"><b>资源监视器</b></h4><p id=\"857023ee8f2vy\">以Windows Server 2008 R2和Windows Server 2012 R2为例，说明如何使用资源监视器监控实时网络流量。</p><ol id=\"857023ef8fdpw\"><li id=\"857023f08fnwm\"><p id=\"857023f18f0yk\">远程连接ECS登实例。</p><p id=\"70c5f2d0b693n\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"857023f28fxpe\"><p id=\"857023f38f7wk\">右键单击任务栏空白处，选择<b data-tag=\"uicontrol\" id=\"32712649b55gc\" class=\"uicontrol\">启动任务管理器</b>。</p></li><li id=\"85704af08fgks\"><p id=\"85704af18f3l0\">单击<b data-tag=\"uicontrol\" id=\"32714d53b575c\" class=\"uicontrol\">性能</b>，再单击<b data-tag=\"uicontrol\" id=\"32714d55b5h9t\" class=\"uicontrol\">资源监视器(R)...</b>。</p></li><li id=\"85704af28f3f3\"><p id=\"85704af38fxor\">在资源监视器窗口中，单击<b data-tag=\"uicontrol\" id=\"32714d59b5qx0\" class=\"uicontrol\">网络</b>。</p></li><li id=\"85704af48fj7b\"><p id=\"85704af58fxwj\">通过资源监视器窗口的<b data-tag=\"uicontrol\" id=\"bbd68760b64fs\" class=\"uicontrol\">网络活动的进程</b>、<b data-tag=\"uicontrol\" id=\"bd73e3b0b6461\" class=\"uicontrol\">网络活动</b>、<b data-tag=\"uicontrol\" id=\"bf2eb310b69hk\" class=\"uicontrol\">TCP连接</b>、<b data-tag=\"uicontrol\" id=\"c0fe42f0b65lr\" class=\"uicontrol\">侦听端口</b>等信息，可以实时分析实例当前的网络流量情况，找到占用流量高的进程进行分析。 \n</p><ul id=\"85704af68f4cq\"><li id=\"85704af78f5q8\"><p id=\"85704af88fcny\">Windows Server 2008 R2</p><p id=\"529ecc80b6q7z\"> <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5108623761/p518506.png\" height=\"326\" width=\"600\" class=\"image break\"></p></li><li id=\"85704af98fp0k\"><p id=\"85704afa8fiy7\">Windows Server 2012 R2</p><p id=\"546eaa80b62zd\"> <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5108623761/p518507.png\" height=\"654\" width=\"600\" class=\"image break\"></p></li></ul></li><li id=\"893f5e91b5ump\"><p id=\"893f5e90b5vwo\">分析处理。</p><ul id=\"bd0f8521b6v3h\"><li id=\"bcdae091b68on\"><p id=\"bcdae090b6ise\">如果该进程是正常业务进程，确实因为客户端访问量大造成带宽占用高，请酌情考虑升级带宽。</p></li><li id=\"85704afe8fffd\"><p id=\"85704aff8frya\">如果该进程是名称可疑进程，请尝试直接杀死进程，或者使用专业杀毒软件进行杀毒后观察实例情况。</p></li></ul></li></ol></section><section id=\"4e4122b0b57gw\" class=\"section\"><h4 id=\"85704b008fjcq\" data-tag=\"h5\" class=\"h5\"><b>Wireshark</b></h4><p id=\"85704b018fkow\" data-spm-anchor-id=\"a2c9r.12641768.0.i1.6b93KsH2KsH2wr\">Wireshark是常用的网络分析工具，您可以在Windows实例上从<a class=\"\" target=\"_blank\" href=\"https://www.wireshark.org/download.html\">Wireshark官网</a>下载并安装软件。</p><p id=\"85704b028fvh2\">执行如下步骤，使用Wireshark分析网络流量。</p><ol id=\"85704b038f2i7\"><li id=\"85704b048f9iq\" data-spm-anchor-id=\"a2c9r.12641768.0.i3.6b93KsH2KsH2wr\"><p id=\"85704b058fwhb\">远程连接ECS登实例。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"857072008fop8\"><p id=\"857072018fbtv\">启动Wireshark，在工具栏中依次选择<b data-tag=\"uicontrol\" id=\"3271e990b5zzg\" class=\"uicontrol\">Statistics</b><b data-tag=\"uicontrol\" id=\"3271e992b5r2b\" class=\"uicontrol\">&gt;</b><b data-tag=\"uicontrol\" id=\"3271e994b5vuo\" class=\"uicontrol\">Conversations</b>。</p></li><li id=\"857072028fujp\" data-spm-anchor-id=\"a2c9r.12641768.0.i8.6b93KsH2KsH2wr\"><p id=\"857072038faak\">在Conversations页面上，您可以看到所有网络通信，从链路层、IP层、TCP层分别给出了流量的具体情况和通信两端的流量情况。通过抓取一段时间的网络包可以分析究竟是哪些连接、端口占用了较高的流量。</p><p id=\"754af310b5vm9\"> <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5108623761/p518508.png\" height=\"316\" width=\"600\" class=\"image break\"></p></li></ol></section></section></section><p id=\"6e725d50b6ryo\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-cpu-utilization-is-high-on-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></span>\n <span>Windows系统ECS实例中CPU使用率较高问题的排查及解决方案</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows系统ECS实例中CPU使用率较高问题的排查及解决方案</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-20 09:55:27</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"4be3d0a086t6n\"><p id=\"4bf13e20867av\" data-tag=\"shortdesc\" class=\"shortdesc\">本文主要介绍Windows系统ECS实例中CPU使用率较高问题的排查及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"dde62120bedht\" class=\"section\"><h2 id=\"e40dcb708dkpv\"><b>问题现象</b></h2><p id=\"eb9cc3008dalb\">Windows系统ECS实例中CPU使用率较高，即CPU使用率≥80%。</p></section><section id=\"e0d8ad30ben85\" class=\"section\"><h2 id=\"e9bdfc408f4da\" data-spm-anchor-id=\"a2c4g.11186623.0.i1.497757dbIWdlja\" jc=\"start\" style=\"text-align:start\"><b>问题原因</b></h2><p id=\"d59fa4588dagw\">CPU使用率较高可能有以下原因。</p><ul id=\"dc36ce628d39l\"><li id=\"dc36ce608d1ko\"><p id=\"dbb1bfe08d9wu\">ECS实例遭到病毒木马入侵。</p></li><li id=\"dd690cd18deva\"><p id=\"dd690cd08ddzp\">ECS实例中第三方杀毒软件运行。</p></li><li id=\"de313ed18dem5\"><p id=\"de313ed08d2v3\">ECS实例中应用程序异常、驱动异常、高I/O使用率或高中断处理的应用程序。</p></li></ul></section><section id=\"e601c850bervt\" class=\"section\"><h2 id=\"n49mj\">解决方案</h2><section id=\"3638c170be7to\" class=\"section\"><h3 id=\"4bf1b35686z30\" data-tag=\"h3\" class=\"h3\"><b>步骤一：定位问题</b></h3><p id=\"4bf1b35786ejg\">通过微软工具（任务管理器、资源监视器等）抓取系统Full Memory Dump，来定位CPU使用率过高的问题。在流量大的情况下，您还可以使用Wireshark抓取一段时间的网络包，分析流量使用情况。</p><p id=\"665ea720bemvc\">本文以资源监视器为例，介绍如何定位CPU使用率较高的问题。其他常见工具，请参见<a title=\"\" class=\"xref\" href=\"#218e9320beuwv\">常见工具</a>。</p><div id=\"799fac118da4f\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"79cb28e08ddiq\">Windows Server 2008以上系统，通常使用系统自带的资源监视器监控CPU。</p></div></div><ol id=\"4bf1b35b86d6p\"><li id=\"4bf1b35c86hdr\"><p id=\"4bf1b35d86jvz\">通过VNC方式连接ECS实例。</p><p id=\"577da8108df6f\">具体信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">ECS实例连接方式概述</a>。</p></li><li id=\"8a3a02008d37c\"><p id=\"8a39daf08dv89\">在桌面底部单击<b data-tag=\"uicontrol\" id=\"45183d77beqk8\" class=\"uicontrol\">开始</b>菜单，选择<b data-tag=\"uicontrol\" id=\"45183d79be286\" class=\"uicontrol\">运行</b>。</p></li><li id=\"4bf1b35e8606t\"><p id=\"4bf1b35f86519\">在<b data-tag=\"uicontrol\" id=\"fcf8fe70bejxr\" class=\"uicontrol\">运行</b>框中输入<code data-tag=\"code\" class=\"code\">perfmon -res</code>，单击<b data-tag=\"uicontrol\" id=\"45183d7ebesg9\" class=\"uicontrol\">确定</b>。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7253992761/p519006.png\" alt=\"1\" class=\"image break\"></li><li id=\"4bf1b36086rm4\"><p id=\"4bf1b3618661y\">在<b data-tag=\"uicontrol\" id=\"08978ad0bezbu\" class=\"uicontrol\">资源监视器</b>页面中，查看各进程是否有CPU使用率过高的现象。</p><img width=\"500\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7253992761/p519007.png\" alt=\"2\" class=\"image break\"></li><li id=\"4bf1da60865j7\"><p id=\"4bf1da61861pu\">针对占用CPU资源较高的进程，查看对应的进程ID和进程的程序名。</p></li><li id=\"4bf1da62862xh\"><p id=\"4bf1da6386nxi\">定位进程ID后，结合任务管理器判断程序是否异常并定位程序的具体位置。 \n</p><ol id=\"4bf1da6486l4k\"><li id=\"4bf1da65864bc\"><p id=\"4bf1da6686z1x\">定位异常进程前，需要在任务管理器中依次单击<b data-tag=\"uicontrol\" id=\"4518648cbexwd\" class=\"uicontrol\">查看(V) &gt; 选择列(S)...</b>。 </p><img width=\"500\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7253992761/p519008.png\" alt=\"3\" class=\"image break\"></li><li id=\"4bf1da6786lmb\"><p id=\"4bf1da6886s9w\">在弹出的框中选择<b data-tag=\"uicontrol\" id=\"45188b91beh07\" class=\"uicontrol\">PID（进程标识符）</b>，单击<b data-tag=\"uicontrol\" id=\"45188b93beenk\" class=\"uicontrol\">确定</b>。 </p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7253992761/p519009.png\" alt=\"4\" class=\"image break\"></li><li id=\"4bf1da6986jtl\"><p id=\"4bf1da6a86n4p\">在任务管理器的进程页面中，单击<b data-tag=\"uicontrol\" id=\"45188b98beu1e\" class=\"uicontrol\">PID</b>，通过排序，找到之前资源监视器查看到的异常进程。右键单击进程名称，选择<b data-tag=\"uicontrol\" id=\"45188b9aberyb\" class=\"uicontrol\">打开文件位置</b>，查看进程是否为恶意程序。</p></li></ol></li></ol></section><section id=\"806a2220beg4v\" class=\"section\"><h3 id=\"4bf1da6d86a96\" data-tag=\"h3\" class=\"h3\"><b>步骤二：分析处理</b></h3><p id=\"4bf2017186kgx\">判断影响CPU使用率过高的进程属于正常进程或是异常进程，并按照下述相应步骤处理。</p><table id=\"6e5563c08d8kz\" class=\"table\"><colgroup colwidth=\"0.29*\" style=\"width:14.50%\"></colgroup><colgroup colwidth=\"1.71*\" style=\"width:85.50%\"></colgroup><tbody class=\"tbody\"><tr id=\"6e5563c58dm52\"><td id=\"6e5563c28dekk\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"6e5563c18dojv\"><b>可能原因</b></p></td><td id=\"6e5563c48dntd\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"6e5563c38dhbk\"><b>具体操作</b></p></td></tr><tr id=\"6e5563ca8dr7c\" style=\"height:366px\"><td id=\"6e5563c78dbqa\" rowspan=\"1\" colspan=\"1\"><p id=\"7c2130608dm2h\">正常进程</p></td><td id=\"6e5563c98dos7\" rowspan=\"1\" colspan=\"1\"><p id=\"a7f4abe18dtmh\">一般情况下，当频繁访问业务，或由于Windows自身服务（更新服务等）都可能会占用较高网络流量和CPU 。</p><div id=\"a7f4abe28dyu3\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"e4a5eef28dslf\"><li id=\"e4a5eef08dhqc\"><p id=\"a7f4abe38d0ze\">Windows Server 2008或Windows Server 2012实例建议内存配置在2 GiB或者2 GiB以上。</p></li><li id=\"e577e4f18dtke\"><p id=\"e0cf44708dpxc\">在使用Windows Server 2012的1 vCPU 1 GiB规格的实例时，Windows Update服务会自动更新，实例的CPU使用率也会突然升高，这是正常现象。</p></li></ul></div></div><ul id=\"8ad8bc908d9e7\"><li id=\"8ad8bc918d6de\"><p id=\"8ad8bc928d1s5\">检查后台是否有执行Windows Update的行为。</p></li><li id=\"8ad8bc938dkd0\"><p id=\"8ad8bc948dz11\">建议在服务器上安装杀毒软件进行杀毒。如有安装杀毒软件，请检查CPU使用率较高时，杀毒软件是否在后台执行扫描操作。如果可能，请升级杀毒软件到最新版本，或者删除杀毒软件。</p></li><li id=\"8ad8bc958dfcv\"><p id=\"8ad8bc968dxdi\">检查该ECS内应用程序是否有大量的磁盘访问、网络访问行为或高计算需求。通过尝试增配实例规格的方式，使用更多核数或内存的规格来解决资源瓶颈问题。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-of-instance-configuration-changes\">升降配方式概述</a>。</p></li><li id=\"8ad8bc978dxdl\"><p id=\"8ad8bc988dnth\">若自身服务器配置较高，再去升级配置已无太大意义。架构方面也并非是服务器配置越高就越好。此时，您需要尝试进行应用分离，通过不同的服务器去承载不同的应用，同时对相关程序进行优化。</p><p id=\"8ad8bc998db0q\">比如数据库完全通过RDS来承载，减轻服务器本身的资源消耗和服务器内部大量的调用。而程序优化方面，您可以根据自身的配置状况进行调整，具体的操作有调整连接数、缓存配置、Web和数据库调用时的各项参数等。</p></li></ul></td></tr><tr id=\"71acf3308dzbz\"><td id=\"71acf3328d7zz\" rowspan=\"1\" colspan=\"1\"><p id=\"7d894be08d5rn\">异常进程</p></td><td id=\"71acf3348dbhi\" rowspan=\"1\" colspan=\"1\"><p id=\"a35840618d2yc\">对于CPU异常使用率过高的情况，可能是被恶意病毒、木马入侵导致的。有时三方恶意程序可能会利用操作系统的svchost.exe或者Tcpsvcs.exe来伪装，引起高CPU的占用。您需要手动对异常进程进行查杀。</p><div id=\"a35840628da3e\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"a35840638d8qk\">若您无法判断进程是否为病毒或木马，建议将进程名称在网上进行搜索后确认。另外，建议您进行进程删除操作前，创建快照完成备份。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ul id=\"964674f08df89\"><li id=\"964674f18d0i4\"><p id=\"964674f28dvqc\">使用商业版杀毒软件，或使用微软免费安全工具<a class=\"\" target=\"_blank\" href=\"https://www.microsoft.com/security/scanner/zh-cn/default.aspx\">Microsoft Safety Scanner</a>，在安全模式下进行扫描杀毒。</p></li><li id=\"964674f38dg9g\"><p id=\"964674f48d8hp\">运行Windows Update来安装最新的微软安全补丁。</p></li><li id=\"964674f58dvek\"><p id=\"964674f68di9z\">使用MSconfig禁用所有非微软自带服务驱动，检查问题是否再次发生，具体操作请参考<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://support.microsoft.com/zh-cn/help/929135/how-to-perform-a-clean-boot-in-windows\">如何在Windows系统中执行干净启动</a>。</p></li><li id=\"964674f78d9ry\"><p id=\"964674f88dwei\">若服务器或站点遭受DDoS攻击或CC攻击等，短期内产生大量的访问需求。您可以登录<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://yundun.console.aliyun.com/\">云安全中心</a>，查看云安全中心中的防护DDoS攻击是否调整好阈值，并核实是否开启CC防护。如果攻击没有触发到阈值，云安全中心没有清洗，可以联系售后协助开起清理。</p></li></ul></td></tr></tbody></table></section></section><section id=\"218e9320beuwv\" class=\"section\"><h2 id=\"4bf312e686njc\" data-tag=\"h3\" class=\"h3\"><b>常见工具</b></h2><p id=\"h2-windows-\">以下是关于Windows系统中定位CPU使用率过高问题工具的简要说明。</p><section id=\"70b024a0be7bg\" class=\"section\"><h3 id=\"4bf312e88603b\" data-tag=\"h4\" class=\"h4\"><b>任务管理器</b></h3><p id=\"4bf312eb86sbf\">任务管理器可以直观查看应用程序列表，定位占用CPU较高的应用程序，如下是任务管理器页面。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7253992761/p519010.png\" width=\"512\" height=\"364\" class=\"image break\"></p><p id=\"4bf312ed86n71\">在性能页面检查CPU使用率时，右键单击CPU使用率图示，单击<b data-tag=\"uicontrol\" id=\"4519c41cbezct\" class=\"uicontrol\">将图形更改为 &gt; 逻辑处理器</b>。</p><p id=\"eff9e5208d7un\">如下图显示了4个逻辑CPU的使用率。 </p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7253992761/p519011.png\" width=\"514\" height=\"423\" class=\"image break\"><p id=\"4bf312ef86bym\">当单个进程的CPU使用率飙升至接近100%时，而其它进程的CPU使用率变化不大，则可能是网络I/O处理造成的。</p></section><section id=\"65f8c3f0be44c\" class=\"section\"><h3 id=\"4bf312f086qmq\" data-tag=\"h4\" class=\"h4\"><b>资源监视器</b></h3><p id=\"4bf312f186hxr\">资源监视器可以直观查看CPU使用率，还可以通过句柄和模块搜索对应的进程。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7253992761/p519012.png\" width=\"501\" height=\"354\" class=\"image break\"></section><section id=\"68aac490bebhq\" class=\"section\"><h3 id=\"4bf312f486w96\" data-tag=\"h4\" class=\"h4\"><b>Process Explorer</b></h3><p id=\"4bf339f286iqr\">Process Explorer是一款Microsoft Sysinternals工具，通过配置正确的Symbols，检查对应应用程序的线程调用的Call Stack，用以定位可能的问题驱动。下载Process Explorer工具，请参见<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://docs.microsoft.com/zh-cn/sysinternals/downloads/process-explorer\">Process Explorer</a>。</p><p id=\"4bf339f886sxw\">如下图是Process Explorer工具使用页面。 </p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7253992761/p519013.png\" width=\"567\" height=\"169\" class=\"image break\"></section><section id=\"6b4852d0beaps\" class=\"section\"><h3 id=\"4bf339fa865sv\" data-tag=\"h4\" class=\"h4\"><b>性能监视器</b></h3><p id=\"4bf339fd86e3o\">性能监视器（Performance Monitor）是Microsoft专业收集各个组件性能计数器的工具。对于系统CPU资源消耗，有多个Counter来检查。</p><p id=\"4bf339ff86906\">Performance有如下三个核心参数。</p><ul id=\"4bf33a00863fn\"><li id=\"4bf33a01866o7\"><p id=\"4bf33a0286c3e\"><code data-tag=\"code\" class=\"code\">\\Processor(_Total)\\% Processor Time</code>：CPU执行行非空闲线程的时间百分比。<code data-tag=\"code\" class=\"code\">\\Processor(_Total)\\% Processor Time</code>=<code data-tag=\"code\" class=\"code\">\\Processor(*)\\% User Time</code>+<code data-tag=\"code\" class=\"code\">\\Processor(*)\\% Privileged Time</code></p></li><li id=\"4bf33a0386oa7\"><p id=\"4bf33a0486s17\"><code data-tag=\"code\" class=\"code\">\\Processor(*)\\% User Time</code>：表示处理器用于执行程序代码的时间消耗，可以确定哪个应用程序或函数调用消耗了较多的时间。</p><p id=\"0fbc3091bemkx\">高<code data-tag=\"code\" class=\"code\">User Time</code>情况如下图所示。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7253992761/p519015.png\" class=\"image break\"></li><li id=\"4bf33a0586xai\"><p id=\"4bf33a0686c7f\"><code data-tag=\"code\" class=\"code\">\\Processor(*)\\% Privileged Time</code>：应用程序在内核中执行系统调用（例如驱动、IRP，上下文切换等）操作的时间。如果操作系统花费多余30%的时间在<code data-tag=\"code\" class=\"code\">Privileged Time</code>，如下图所示，则说明实例正在进行高I/O吞吐相关的操作。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7253992761/p519014.png\" width=\"304\" height=\"374\" class=\"image break\"><p id=\"4bf3610386ngz\">当<code data-tag=\"code\" class=\"code\">% Privileged Time</code>很高时，需要进一步检查<code data-tag=\"code\" class=\"code\">% DPC Time</code>、<code data-tag=\"code\" class=\"code\">% Interrupt Time</code>以及<code data-tag=\"code\" class=\"code\">Context Switches/sec</code>的情况。 </p><ul id=\"2e99cd11befgr\"><li id=\"4bf3610586bgq\"><p id=\"4bf3610686xz3\">高<code data-tag=\"code\" class=\"code\">% DPC Time</code>、<code data-tag=\"code\" class=\"code\">% Interrupt Time</code>表示未知设备出现大量的操作或者很差的性能问题。更多详情，请参见<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://blogs.technet.microsoft.com/perfguide/2010/09/28/choose-your-own-adventure-high-deferred-procedure-calls-dpcs-or-high-interrupts/\">Choose Your Own Adventure: High Deferred Procedure Calls (DPCs) or High Interrupts</a>和<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://docs.microsoft.com/zh-cn/windows-hardware/test/wpt/xperf-command-line-reference\">Windows IT Pro Magazine: Examining xPerf</a>。</p></li><li id=\"4bf38813862jp\"><p id=\"4bf3881486lks\"><code data-tag=\"code\" class=\"code\">Context Switch</code>值很高时，说明内核在CPU上对进程或线程进行切换。更多详情，请参见<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://blogs.technet.microsoft.com/clinth/2009/10/28/the-case-of-the-2-million-context-switches/\">The Case of the 2 Million Context Switches</a>和<a class=\"\" target=\"_blank\" href=\"https://blogs.technet.com/markrussinovich/archive/2008/04/07/3031251.aspx\">Mark Russinovich’s The Case of the System Process CPU Spikes</a>。</p><p id=\"a660a490beq5x\"><code data-tag=\"code\" class=\"code\">Context Switches/sec</code>值很高表示有大量的线程处于Ready状态，需要减少线程的数量解决问题。</p></li></ul></li></ul></section></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/why-can-t-the-ecs-instance-access-the-public-network-environment", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/network-and-security-group-issues/\">网络与安全组问题</a></span>\n <span>为什么Windows系统的ECS实例配置辅助私网IP后，无法从ECS实例中访问公网环境？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>为什么Windows系统的ECS实例配置辅助私网IP后，无法从ECS实例中访问公网环境？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-03 10:10:39</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2351722\"><p id=\"2e265a4203c4v\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍Windows系统的ECS实例配置辅助私网IP后，无法从ECS实例中访问公网环境的问题原因和解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"53f8aa2003sfw\" class=\"section\"><h2 data-tag=\"p\" id=\"2e265a4103kg8\" class=\"p\"><b>问题现象</b></h2><p id=\"4aadf8d003toh\">Windows系统的ECS实例配置辅助私网IP后，无法从ECS实例中访问公网环境。</p></section><section id=\"55f404f003h18\" class=\"section\"><h2 id=\"40bc3210033l3\"><b>问题原因</b></h2><p id=\"5e12925003lyy\">Windows Server 2008之后的操作系统，微软将出网IP策略调整为选择与下一跳IP的前缀匹配（<b>matching prefix</b>）最长的IP。</p><p jc=\"left\" id=\"9338875019rcz\" style=\"text-align:left\">假设当前ECS实例使用的是windows Server 2008之后的版本，且实例的私网IP地址和网关的配置如下，因辅助私网IP地址（192.168.1.68）与下一跳IP地址（网关：192.168.1.127）的前缀匹配长于主私网IP（192.168.1.14）与下一跳IP地址（网关：192.168.1.127）的前缀匹配，那么辅助私网IP的优先级高于主私网IP，出网流量将由辅助私网IP发送。</p><table id=\"d8c39fa416ixa\" tablewidth=\"993\" tablecolswidth=\"331 331 331\" class=\"table\"><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><tbody class=\"tbody\"><tr id=\"d8c39fa516yxf\"><td id=\"d8c39fa616dmq\" rowspan=\"1\" colspan=\"2\"><p id=\"d8c5746116ffg\">私网IP地址</p></td><td id=\"d8c39faa168ct\" rowspan=\"1\" colspan=\"1\"><p id=\"d8c5746416l15\">二进制地址</p></td></tr><tr id=\"d8c39fac16j7h\"><td id=\"d8c39fad162o8\" rowspan=\"1\" colspan=\"1\"><p id=\"d8c57465165pw\">主私网IP</p></td><td id=\"d8c39faf16tpk\" rowspan=\"1\" colspan=\"1\"><p id=\"d8c5746616j1z\">192.168.1.14</p></td><td id=\"d8c39fb1160me\" rowspan=\"1\" colspan=\"1\"><p id=\"d8c5746716v1r\">11000000 10101000 00000001 00001110</p></td></tr><tr id=\"d8c39fb316hlh\"><td id=\"d8c39fb416qup\" rowspan=\"1\" colspan=\"1\"><p id=\"d8c5746816dwh\">辅助私网IP</p></td><td id=\"d8c39fb616wlo\" rowspan=\"1\" colspan=\"1\"><p id=\"d8c5746916hm4\">192.168.1.68</p></td><td id=\"d8c39fb8160uf\" rowspan=\"1\" colspan=\"1\"><p id=\"d8c5746a16bjl\">11000000 10101000 00000001 01000100</p></td></tr><tr id=\"d8c39fba16zrn\"><td id=\"d8c39fbb16z3f\" rowspan=\"1\" colspan=\"1\"><p id=\"d8c5746b169jo\">网关</p></td><td id=\"d8c39fbd16l06\" rowspan=\"1\" colspan=\"1\"><p id=\"d8c59b7016vvu\">192.168.1.127 </p></td><td id=\"d8c39fbf16w4d\" rowspan=\"1\" colspan=\"1\"><p id=\"d8c59b7116fgr\">11000000 10101000 00000001 01111111</p></td></tr></tbody></table></section><section id=\"722e6de003gnz\" class=\"section\"><h2 id=\"430ab5f003oxb\"><b>解决方案</b></h2><p id=\"771d8d4003cse\">您可以通过<b>Netsh</b>命令设置辅助私网IP，将skipassource设置为true以解决该问题。</p><ol id=\"cf1deee103ucr\"><li id=\"cf1dc7d003wck\"><p id=\"ccb3307003wkg\">远程连接Windows实例。</p><p id=\"e44f0b0003g2a\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"05cc0061165yf\"><p id=\"62442e8016krw\">在Windows PowerShell中，执行<code data-tag=\"code\" class=\"code\">ipconfig</code>命令，查看私网IP地址和网关。</p><p id=\"611c68a016oye\">如果主私网IP与下一跳IP的前缀匹配短于辅助私网IP与下一跳IP的前缀匹配，请继续执行下一步。</p><div type=\"note\" id=\"b5279b4116cl1\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"b5279b40165jj\">具体前缀匹配规则说明，请参见<a title=\"\" class=\"xref\" href=\"#55f404f003h18\">问题原因</a>。</p></div></div><img id=\"974620c0163yx\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9681308861/p687930.png\" alt=\"image.png\" placement=\"break\" class=\"image break\"><p id=\"be89738016646\"></p></li><li id=\"02c3d3910377o\"><p id=\"02c3d39003dd1\">在Windows PowerShell中，执行如下命令，将skipassource设置为true。</p><pre id=\"nbgonh\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>Netsh int ipv4 add address &lt;Interface&gt; &lt;IP Addr&gt; [&lt;Netmask&gt;] [skipassource=true]</code></pre><p id=\"1a31e76003dkb\">参数说明如下：</p><table id=\"table-zqd-q42-6nv\" tablewidth=\"648\" tablecolswidth=\"216 216 216\" class=\"table\"><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><colgroup colwidth=\"1*\" style=\"width:33.33%\"></colgroup><tbody class=\"tbody\"><tr id=\"row-9xn-222-5ix\"><td id=\"concept-40637-zh-entry-bmu-zoe-t83\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"25356c4003dt8\"><b>辅助私网IP信息</b></p></td><td id=\"concept-40637-zh-entry-g9r-59k-b6k\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"25356c4103eqq\"><b>说明</b></p></td><td id=\"concept-40637-zh-entry-cyd-xdc-1y4\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"2535935003t0h\"><b>示例</b></p></td></tr><tr id=\"row-f5m-rgq-nmg\"><td id=\"entry-0k2-opd-97u\" rowspan=\"1\" colspan=\"1\"><p id=\"25359351038gt\">&lt;Interface&gt;</p></td><td id=\"entry-5t2-dvh-uyg\" rowspan=\"1\" colspan=\"1\"><p id=\"2535935203oq5\">辅助私网IP的网络接口</p></td><td id=\"entry-vcr-tur-0ug\" rowspan=\"1\" colspan=\"1\"><p id=\"2535935303562\"><code data-tag=\"codeph\" class=\"ph codeph\" id=\"codeph-2de-263-onb\">'以太网'</code></p></td></tr><tr id=\"row-hxi-fz4-fhi\"><td id=\"entry-un5-k0v-86u\" rowspan=\"1\" colspan=\"1\"><p id=\"2535ba6003goo\">&lt;IP Addr&gt;</p></td><td id=\"entry-3oq-94g-z5o\" rowspan=\"1\" colspan=\"1\"><p id=\"2535ba610356l\">辅助私网IP地址</p></td><td id=\"entry-zi9-uk5-bla\" rowspan=\"1\" colspan=\"1\"><p id=\"2535ba62032mg\"><code data-tag=\"codeph\" class=\"ph codeph\" id=\"codeph-94p-1yl-hfk\">192.168.0.100</code></p></td></tr><tr id=\"row-p45-2yb-2ce\"><td id=\"entry-xwh-bbk-07p\" rowspan=\"1\" colspan=\"1\"><p id=\"2535ba6303ddh\">&lt;Netmask&gt;</p></td><td id=\"entry-zf0-emx-7aw\" rowspan=\"1\" colspan=\"1\"><p id=\"2535ba6403k6t\">辅助私网IP的掩码</p></td><td id=\"entry-ayx-soi-vjl\" rowspan=\"1\" colspan=\"1\"><p id=\"2535ba6503aic\"><code data-tag=\"codeph\" class=\"ph codeph\" id=\"codeph-10k-tr9-vlt\">255.255.255.0</code></p></td></tr></tbody></table><p id=\"2f992eb003mcj\">示例说明如下：</p><pre id=\"q4y6ca\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>Netsh int ipv4 add address '以太网' 192.168.0.100 255.255.255.0 skipassource=true</code></pre></li><li id=\"3236bcf103g4s\"><p id=\"3236bcf003fh8\">从ECS实例中访问外网，如果可以正常访问，说明问题已解决。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/check-whether-tcp-port-80-is-available", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/network-and-security-group-issues/\">网络与安全组问题</a></span>\n <span>无法访问ECS实例中的服务的排查方法</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>无法访问ECS实例中的服务的排查方法</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-06 10:45:30</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"dfeaf9b087lsq\"><p id=\"7f2f13d0021rk\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍无法访问ECS实例中的服务的排查方法。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"d6dd658087rcy\" class=\"section\"><h2 id=\"NxfMT\">操作场景</h2><p id=\"2ee8ff8002zin\">无法访问ECS实例中的服务可能有以下原因：</p><table id=\"1a473610fdttr\" tablewidth=\"690\" tablecolswidth=\"327 363\" class=\"table\"><colgroup colwidth=\"0.95*\" style=\"width:47.39%\"></colgroup><colgroup colwidth=\"1.05*\" style=\"width:52.61%\"></colgroup><tbody class=\"tbody\"><tr id=\"1a473615fdsen\"><td id=\"1a473612fdyj8\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"3afb836002n7q\"><b>可能原因</b></p></td><td id=\"1a473614fdw2p\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"3afb836102ww0\"><b>排查方案</b></p></td></tr><tr id=\"1a475d2cfds11\"><td id=\"1a475d29fdmb3\" rowspan=\"1\" colspan=\"1\"><p id=\"3afb836402udw\">ECS实例的安全组未开放相应端口</p></td><td id=\"1a475d2bfdx7w\" rowspan=\"1\" colspan=\"1\"><p id=\"3afb836502168\"><a title=\"\" class=\"xref\" href=\"#8be1b210fdltu\">检查ECS实例安全组规则</a></p></td></tr><tr id=\"d1c0c5d002xx4\"><td id=\"d1c0c5d102qlk\" rowspan=\"1\" colspan=\"1\"><p id=\"d42a99e0022pa\">ECS实例中，该服务未启动/开启或服务对应端口未被监听</p></td><td id=\"d1c0ece102iw5\" rowspan=\"1\" colspan=\"1\"><p id=\"d1c0ece2023cb\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/check-whether-tcp-port-80-is-available#5fcf041002iku\">检查服务状态及端口监听状态</a></p></td></tr><tr id=\"1a475d31fdo85\"><td id=\"1a475d2efd4ml\" rowspan=\"1\" colspan=\"1\"><p id=\"3afb836602vyn\">ECS实例内防火墙设置错误</p></td><td id=\"1a475d30fdyg3\" rowspan=\"1\" colspan=\"1\"><p id=\"3afb83670290p\"><a title=\"\" class=\"xref\" href=\"#d960101002x90\">检查ECS防火墙设置</a></p></td></tr></tbody></table><p id=\"e135b92002o7m\">本文以排查无法访问ECS实例中的Nginx服务（默认端口为80）为例，排查其他服务时，请替换命令中的服务名和对应的端口。</p></section><section id=\"8be1b210fdltu\" class=\"section\"><h2 id=\"777394a0fdvtr\"><b>检查ECS实例安全组规则</b></h2><ol id=\"d5046940fdgck\"><li data-tag=\"step\" id=\"746b88b0022lk\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></li><li data-tag=\"step\" id=\"746b88b102cae\" class=\"step\"><span data-tag=\"cmd\" id=\"cmd-9ro-yc5-vx4\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-kq7-suy-h2g\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-puq-bs2-grd\" class=\"uicontrol\">实例与镜像</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-fk3-i03-vyq\" class=\"uicontrol\">实例</b></span>。</span></li><li data-tag=\"step\" id=\"746b88b2029ix\" class=\"step\"><span data-tag=\"cmd\" id=\"cmd-acu-560-w33\" class=\"cmd\">在顶部菜单栏左上角处，选择地域。 </span></li><li id=\"d6875fc0fd6a6\"><p id=\"7488d4b1020d5\">在ECS实例列表页面，单击目标ECS实例ID。</p></li><li id=\"02457e81fdqed\"><p id=\"7488d4b2020ma\">在ECS实例详情页面，单击<b id=\"label-securityGroup\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">安全组</b>页签。</p></li><li id=\"1dbff2d1fdq3h\"><p id=\"7488fbc0022th\">在<b id=\"ecs.group.list.lb.title\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">安全组列表</b>页签下，单击安全组ID。</p></li><li id=\"d503b081fdb4j\"><p id=\"7488fbc102gj5\">在安全组规则页面，查看入方向规则是否开放80端口。</p><img id=\"c462f5e0029y8\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678358.png\" alt=\"2023-06-04_16-56-00..png\" placement=\"break\" class=\"image break\"><ul id=\"156b48c102kj9\"><li id=\"c5a93820fdiot\"><p id=\"748949e002hhu\">未开放80端口，请添加入方向为80的安全组规则。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。</p></li><li id=\"142e5bf002vmx\"><p id=\"1460416002rsn\">已开放80端口，请执行<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/check-whether-tcp-port-80-is-available#5fcf041002iku\">检查服务状态及端口监听状态</a>。</p></li></ul></li></ol></section><section id=\"5fcf041002iku\" class=\"section\"><h2 id=\"3671438002ris\"><b>检查服务状态及端口监听状态</b></h2><section id=\"6c4022b002vtq\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"6c4022b202pes\" class=\"section\"><h2 id=\"6c4022b102lyn\">Linux实例</h2><p id=\"6be35ab002ko7\">本操作以CentOS 7.9为例，其他版本的Linux系统操作可能有所差异。</p><ol id=\"7d122a7102pje\"><li id=\"7d12036002wu9\"><p id=\"6c4022b3027vx\">远程连接Linux实例。</p><p id=\"8c56b46002wtl\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"82b5f3d002yct\"><p id=\"82b46d3002h4o\">执行如下命令，查看Nginx服务状态。</p><pre id=\"gp3dbg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl status nginx</code></pre><ul id=\"0381e82102hj4\"><li id=\"02cca1e002jbq\"><p id=\"02cc7ad002ruw\">如果返回类似如下信息，则说明Nginx已经启动。</p><img id=\"27851d5002syv\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678359.png\" alt=\"2023-06-04_17-06-23..png\" placement=\"break\" class=\"image break\"></li><li id=\"04c7878002o5m\"><p id=\"04c739600296a\">如果未开启，请执行如下命令，启动Nginx命令。</p><pre id=\"grkhre\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl start nginx</code></pre></li></ul></li><li id=\"e91ba2f002b06\"><p id=\"83d773f0028lq\">执行如下命令，查看端口是否正常被监听。</p><pre id=\"qx91md\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -an | grep 80</code></pre><ul id=\"92dd4731028ut\"><li id=\"925356b002or6\"><p id=\"92532fa002ej9\">如果返回如下信息，则说明80端口被正常监听，请执行<a title=\"\" class=\"xref\" href=\"#d960101002x90\">检查ECS防火墙设置</a>。</p><img id=\"e48c1340021w5\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678360.png\" alt=\"2023-06-04_17-11-27..png\" placement=\"break\" class=\"image break\"></li><li id=\"02c2c16002431\"><p id=\"036bf9b002s1e\">如果返回的不是以上信息，表示80端口未处于监听状态。说明该端口可能被其他端口占用，您需要修改该端口。具体操作，请参见<a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40744.htm?spm=a2c4g.59367.0.0.6d925988qxCQD9\">如何修改Nginx服务端口监听地址</a>。</p></li></ul></li></ol></section><section id=\"6c4022b50200e\" class=\"section\"><h2 id=\"6c4022b402h49\">Windows实例</h2><p id=\"1cd850b0023tu\">本操作以Windows Server 2012为例，其他版本的Windows Server系统操作类似。</p><ol id=\"8750156202cwq\"><li id=\"87501560026pc\"><p id=\"85e3660002p71\">远程连接Windows实例。</p><p id=\"9a82f08002yn4\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"8540ead10222c\"><p id=\"3ecc06d002l58\">选择<b data-tag=\"uicontrol\" id=\"2dc55160fdgla\" class=\"uicontrol\">开始</b>&gt;<b data-tag=\"uicontrol\" id=\"2fdbae40fdaj1\" class=\"uicontrol\">运行</b>，输入<code data-tag=\"code\" class=\"code\">service.msc</code>，单击<b data-tag=\"uicontrol\" id=\"45d79470fddgw\" class=\"uicontrol\">确定</b>，打开<b data-tag=\"uicontrol\" id=\"4ee0f700fdc5x\" class=\"uicontrol\">服务</b>。</p></li><li id=\"496be7e102ysi\"><p id=\"496be7e002imf\">查看nginx状态。</p><ol id=\"d1583e0102xi9\"><li id=\"d083fe110209k\"><p id=\"d083fe100287k\">如果nginx无状态，请右键单击该nginx服务，然后单击<b data-tag=\"uicontrol\" id=\"131b1c9002msg\" class=\"uicontrol\">启动(S)</b>。</p><img id=\"202d0f1002577\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678375.png\" alt=\"2023-06-04_19-14-19..png\" placement=\"break\" class=\"image break\"></li><li id=\"d99305f102ddq\"><p id=\"d99305f002k6w\">如果nginx状态为<b data-tag=\"uicontrol\" id=\"17babc60025ik\" class=\"uicontrol\">正在运行</b>，请继续执行步骤<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/check-whether-tcp-port-80-is-available#3fe97b3c02n7c\">4</a>。</p></li></ol></li><li id=\"3fe97b3c02n7c\"><p id=\"3feb77040216b\">在Windows PowerShell中执行如下命令，查看端口是否正常被监听。</p><pre id=\"3fe97b3e02jtd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -ano | findstr \"80\"</code></pre><ul id=\"3fe97b3f02kah\"><li id=\"3fe97b4002ma0\"><p id=\"3feb770502cbn\">如果返回如下信息，则说明80端口被正常监听，请执行<a title=\"\" class=\"xref\" href=\"#d960101002x90\">检查ECS防火墙设置</a>。</p><img id=\"8fb9ff7002pph\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678369.png\" alt=\"2023-06-04_17-36-44..png\" placement=\"break\" class=\"image break\"></li><li id=\"3fe97b440214g\"><p id=\"c2265f70024dx\">如果返回的不是以上信息，表示80端口未处于监听状态。说明该端口可能被其他端口占用，您需要修改该端口。具体操作，请参见<a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/40744.htm?spm=a2c4g.59367.0.0.6d925988qxCQD9\">如何修改Nginx服务端口监听地址</a>。</p></li></ul></li></ol></section></section></section><section id=\"d960101002x90\" class=\"section\"><h2 id=\"a2951da00266g\"><b>检查ECS防火墙设置</b></h2><section id=\"e07da83002986\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"e07dcf4102dnw\" class=\"section\"><h2 id=\"e07dcf4002iej\">Linux实例</h2><p id=\"94bb979002po6\">本操作以CentOS 7.9为例，其他版本的Linux系统操作可能有所差异。</p><ol id=\"f388fe2202wx7\"><li id=\"ff3a9d5102fo4\" docid=\"3925206\"><p id=\"6c4022b3027vx\">远程连接Linux实例。</p><p id=\"8c56b46002wtl\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"0a42dd210251q\"><p id=\"14004d7002kn2\">执行如下命令，查看防火墙状态。</p><pre id=\"liuqdb\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl status firewalld</code></pre><ul id=\"f732d5d102lr0\"><li id=\"f624e84002htq\"><p id=\"f624c13002h46\">如果回显中出现<code data-tag=\"code\" class=\"code\">Active: inactive (dead)</code>信息，说明防火墙为关闭状态，无需再进行任何操作。</p></li><li id=\"1783ff80026wm\"><p id=\"1a86b83002m7s\">如果回显中出现<code data-tag=\"code\" class=\"code\">Active: active (running)</code>信息，说明防火墙已开启，请继续执行步骤<a title=\"\" class=\"xref\" href=\"#8611ce6002zy8\">3</a>。</p></li></ul></li><li id=\"8611ce6002zy8\"><p id=\"39985d0002ipd\">执行如下命令，查看防火墙中已开放的端口。</p><pre id=\"gqzneg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>firewall-cmd --list-all</code></pre><ul id=\"c3ee602102dbq\"><li id=\"c3af826002uvo\"><p id=\"c3af5b5002pis\">如果回显中出现<b data-tag=\"uicontrol\" id=\"e14b501002mp9\" class=\"uicontrol\">ports: 80/tcp</b>信息，说明防火墙规则中已放行80端口，无需再进行任何操作。</p><img id=\"d8f7a8f002xd8\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678376.png\" alt=\"2023-06-04_19-33-53..png\" placement=\"break\" class=\"image break\"></li><li id=\"fa943e6002wq0\"><p id=\"0084c83002tmb\">如果回显中没有<b data-tag=\"uicontrol\" id=\"19c8747302ddh\" class=\"uicontrol\">ports: 80/tcp</b>信息，请执行如下命令，放行80端口。</p><pre id=\"hcq8ll\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>firewall-cmd --zone=public --add-port=80/tcp --permanent</code></pre><p id=\"24755fc002s0q\">若返回结果为<code data-tag=\"code\" class=\"code\">success</code>，表示已经放行TCP 80端口。</p></li></ul></li></ol></section><section id=\"e07dcf4402yxv\" class=\"section\"><h2 id=\"e07dcf4302eqn\">Windows实例</h2><p id=\"1fea72b0029u6\">本操作以Windows Server 2012为例，其他版本的Windows Server系统操作类似。</p><ol id=\"126429a202wsp\"><li id=\"12aa817302lgt\" docid=\"3925206\"><p id=\"85e3660002p71\">远程连接Windows实例。</p><p id=\"9a82f08002yn4\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"fd4b4b81fdf7e\"><p id=\"34a9cc2002er2\">单击左下角的<img id=\"f6ec8f30fdfog\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0378725861/p675579.png\" alt=\"服务器管理..png\" placement=\"inline\" width=\"30\" class=\"image inline\">图标，打开服务器管理。</p></li><li id=\"0c7679b0fd2z8\"><p id=\"34a9cc2102i63\">选择右上角的<b data-tag=\"uicontrol\" id=\"4b05cb90fdbpv\" class=\"uicontrol\">工具</b>(T)&gt;<b data-tag=\"uicontrol\" id=\"4649ca20fd5gx\" class=\"uicontrol\">高级安全 Windows防火墙</b>。</p><img id=\"55b4c7d0fde1d\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0378725861/p675580.png\" alt=\"2023-05-28_20-21-16..png\" placement=\"break\" class=\"image break\"></li><li id=\"4bc01ae0fdrn8\"><p id=\"34a9cc2302jao\">查看防火墙状态。</p><ol id=\"832ea87102hwz\"><li id=\"8302414002bqd\"><p id=\"cabd98e1024l7\">如果防火墙处于关闭状态，无需进行任何操作。</p><img id=\"fab67b2002cgf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678371.png\" alt=\"2023-06-04_18-49-00..png\" placement=\"break\" class=\"image break\"></li><li id=\"918fd74002t7y\"><p id=\"918f8920028ky\">如果防火墙状态为已启用，请继续以下操作。</p><ol id=\"211f179102j2v\"><li id=\"4474c42002pkl\"><p id=\"4474760002onc\">在<b data-tag=\"uicontrol\" id=\"ea6c94cefdgex\" class=\"uicontrol\">高级安全 Windows防火墙</b>页面，单击<b data-tag=\"uicontrol\" id=\"2fc565b002qjw\" class=\"uicontrol\">入站规则</b>。</p></li><li id=\"32642c71027hv\"><p id=\"32642c7002aox\">查看<b data-tag=\"uicontrol\" id=\"64a725c002j4s\" class=\"uicontrol\">Windows 远程管理-兼容模式(HTTP-In)</b>的状态。</p><ul id=\"b1ea7941fd0u1\"><li id=\"b1be8740fd9er\"><p id=\"34a9cc2402s1f\">如果协议已启动，无需进行任何操作。</p></li><li id=\"0890c921fd9r1\"><p id=\"34a9cc26029gb\">如果该规则未启用，请右键单击该规则，然后单击<b data-tag=\"uicontrol\" id=\"e08a635002g20\" class=\"uicontrol\">启用规则(E)</b>。</p><img id=\"e601ec9002910\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678373.png\" alt=\"2023-06-04_18-58-43..png\" placement=\"break\" class=\"image break\"></li></ul></li></ol></li></ol></li></ol></section></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/when-you-ping-the-internet-address-of-a-windows-instance-the-system-prompts-general-fault", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/network-and-security-group-issues/\">网络与安全组问题</a></span>\n <span>Windows系统的ECS实例ping外网地址提示“一般故障”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows系统的ECS实例ping外网地址提示“一般故障”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 15:52:42</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"f644c85086w6t\"><p data-tag=\"shortdesc\" id=\"f64c697086k0t\" class=\"shortdesc\">本文介绍Windows系统的ECS实例ping外网地址提示“一般故障”的错误原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"0b835b90fdta2\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"f64c69748617c\">Windows系统的ECS实例ping外网地址时提示“一般故障”错误。</p></section><section id=\"1ef143e0fd0or\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"f64c6975864mr\">出现该问题可能有以下原因：</p><table id=\"d3884d30ffh0h\" tablewidth=\"1018\" tablecolswidth=\"509 509\" class=\"table\"><colgroup colwidth=\"1*\" style=\"width:50.00%\"></colgroup><colgroup colwidth=\"1*\" style=\"width:50.00%\"></colgroup><tbody class=\"tbody\"><tr id=\"d3884d31ff8u4\"><td id=\"d3884d32ffju4\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"d3884d33ffvvj\"><b>可能原因</b></p></td><td id=\"d3884d34ffmay\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"d3884d35ffo3a\"><b>排查方案</b></p></td></tr><tr id=\"d3884d36ffivc\"><td id=\"d3884d37ff3no\" rowspan=\"1\" colspan=\"1\"><p id=\"df065940ffwph\">ECS实例中安装了第三方杀毒或安全防护软件</p></td><td id=\"d3884d39ffmsf\" rowspan=\"1\" colspan=\"1\"><p id=\"d3887440ff8ww\"><a title=\"\" class=\"xref\" href=\"#5b21be30fd89r\">检查第三方杀毒软件或安全防火软件</a></p></td></tr><tr id=\"d3887441ffh1k\"><td id=\"d3887442ff1ru\" rowspan=\"1\" colspan=\"1\"><p id=\"5cb83c50ffjsa\">ECS实例内操作系统TCP/IP协议栈损坏，例如注册表损坏。</p></td><td id=\"d3887444ffqcw\" rowspan=\"1\" colspan=\"1\"><p id=\"d3887445ff78f\"><a title=\"\" class=\"xref\" href=\"#705dd6d0fdpnt\">检查网卡配置信息</a></p></td></tr><tr id=\"d3887446ffd2w\"><td id=\"d3887447fflpi\" rowspan=\"1\" colspan=\"1\"><p id=\"60318490fffxu\">ECS实例内组策略中设置了错误的IP安全策略。</p></td><td id=\"d3887449ffvmi\" rowspan=\"1\" colspan=\"1\"><p id=\"d388744afffd4\"><a title=\"\" class=\"xref\" href=\"#8c6d5070fdipv\">检查IP安全策略</a></p></td></tr></tbody></table></section><h2 id=\"AywdZ\">解决方案</h2><section id=\"5b21be30fd89r\" class=\"section\"><h3 data-tag=\"h3\" id=\"f64cb799866el\" class=\"h3\"><b>检查第三方杀毒软件或安全防火软件</b></h3><p id=\"f64cb79a86v4z\">如果安装了第三方杀毒或安全防护软件，请尝试卸载第三方软件。然后重新ping外网地址，不再出现“一般故障”错误时，表示该问题已解决。</p></section><section id=\"705dd6d0fdpnt\" class=\"section\"><h3 data-tag=\"h3\" id=\"f64cb79b86n30\" class=\"h3\"><b>检查网卡配置信息</b></h3><p id=\"f64cb79c868ch\">执行<code data-tag=\"code\" class=\"code\">ipconfig /all</code>或<code data-tag=\"code\" class=\"code\">route print</code>命令检查IP配置，查看路由配置是否存在问题。</p><ul id=\"9efd91b2fdcpd\"><li id=\"9efd91b0fd7vh\"><p id=\"f0826790fdmud\">如果回显中显示了所有网卡信息，如下图所示，说明路由配置没有问题。</p><img id=\"3c554340fdw31\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1164235861/p675582.png\" alt=\"2023-05-28_21-38-01..png\" placement=\"break\" width=\"600\" class=\"image break\"></li><li id=\"a0655f10fdltj\"><p id=\"9b2e1320fd15o\">如果路由配置存在问题，可以尝试重置TCP/IP协议栈。更多信息，请参考以下文档。</p><ul id=\"641ef651fd4v9\"><li id=\"f64cb79e86jcw\"><p id=\"f64cb79f86asr\"><a class=\"\" target=\"_blank\" href=\"https://support.microsoft.com/zh-cn/kb/299357\">如何通过使用NetShell实用程序重置TCP/IP</a></p></li><li id=\"f64cb7a0868if\"><p id=\"f64cdea086ag9\"><a class=\"\" target=\"_blank\" href=\"https://support.microsoft.com/en-us/kb/2033448\">Winsock分层服务提供程序可能会导致SQL Server的网络或服务器稳定性问题</a></p></li></ul></li></ul></section><section id=\"8c6d5070fdipv\" class=\"section\"><h3 data-tag=\"h3\" id=\"f64cdea1860fm\" class=\"h3\"><b>检查IP安全策略</b></h3><ol id=\"f64cdea286rmy\"><li id=\"f64cdea386hgj\"><p id=\"f64cdea486zau\">远程连接ECS实例。</p><p id=\"b7a71640fdor2\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"f6669fe1fdo5g\"><p id=\"f6669fe0fd2w0\">选择<b data-tag=\"uicontrol\" id=\"2dc55160fdgla\" class=\"uicontrol\">开始</b>&gt;<b data-tag=\"uicontrol\" id=\"2fdbae40fdaj1\" class=\"uicontrol\">运行</b>，输入<code data-tag=\"code\" class=\"code\">secpol.msc</code>，单击<b data-tag=\"uicontrol\" id=\"45d79470fddgw\" class=\"uicontrol\">确定</b>，打开<b data-tag=\"uicontrol\" id=\"4ee0f700fdc5x\" class=\"uicontrol\">本地安全设置</b>。</p></li><li id=\"f64cdea586y7o\"><p id=\"f64cdea6868c3\">单击<b data-tag=\"uicontrol\" id=\"6a32d4b0fdssd\" class=\"uicontrol\">IP 安全策略，在本地计算机</b>，右键单击已存在的策略，如<b data-tag=\"uicontrol\" id=\"0f78b4d0fdnz7\" class=\"uicontrol\">safe</b>，再单击<b data-tag=\"uicontrol\" id=\"ab26e370ffkei\" class=\"uicontrol\">属性</b>。在<b data-tag=\"uicontrol\" id=\"17ca1200fd74p\" class=\"uicontrol\">safe 属性</b>界面查看安全策略。</p><p id=\"21362e00fdkp2\">如下图所示，可以看到IP安全策略为指派状态，并且策略为先pass（放行），然后deny（拒绝）。<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6775271861/p518592.png\" class=\"image break\"></p></li><li id=\"f64cdea786wcz\"><p id=\"f64cdea886t7k\">右键单击<b data-tag=\"uicontrol\" id=\"a6ae2c90ff2wd\" class=\"uicontrol\">safe</b>，然后单击<b data-tag=\"uicontrol\" id=\"a4710dd0ffxwq\" class=\"uicontrol\">不指派(U)</b>。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6775271861/p518593.png\" class=\"image break\"></li><li id=\"f64cdea986hfr\"><p id=\"f64cdeaa86b6b\">选择<b data-tag=\"uicontrol\" id=\"9e9ce5a0ffuy8\" class=\"uicontrol\">开始</b>&gt;<b data-tag=\"uicontrol\" id=\"a0bb31c0ffefl\" class=\"uicontrol\">管理工具</b>&gt;<b data-tag=\"uicontrol\" id=\"a2c5ced0ffk7m\" class=\"uicontrol\">路由和远程访问</b>，单击<b data-tag=\"uicontrol\" id=\"9ff1ea80fd08q\" class=\"uicontrol\">禁用本地路由和远程访问（S）</b>。<img alt=\"20150415161454.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1164235861/p518594.png\" class=\"image break\"></p></li><li id=\"f64cdeab86zde\"><p id=\"090135d0fdpzw\">查看<b data-tag=\"uicontrol\" id=\"13300590fdl4u\" class=\"uicontrol\">Routing and Remote Accesss</b>服务状态。</p></li><li id=\"084315f0fdaqh\"><p id=\"0842c7d0fdfb6\">选择<b data-tag=\"uicontrol\" id=\"d5fd8490fdci0\" class=\"uicontrol\">开始</b>&gt;<b data-tag=\"uicontrol\" id=\"db898030fd23x\" class=\"uicontrol\">运行</b>，输入<b data-tag=\"uicontrol\" id=\"b77537d0ffv99\" class=\"uicontrol\">services.msc</b>，单击<b data-tag=\"uicontrol\" id=\"b2efdd80fdmi3\" class=\"uicontrol\">确定</b>。</p></li><li id=\"19025901fdg77\"><p id=\"19025900fdf8c\">在服务列表中找到<b data-tag=\"uicontrol\" id=\"f18e8e20fd5bi\" class=\"uicontrol\">Routing and Remote Accesss</b>服务，查看该服务状态。</p><ol id=\"20cdbd51fd1jt\"><li id=\"209c2601fd8bu\"><p id=\"209c2600fdjfa\">若该服务处于禁用状态，表示正常。</p></li><li id=\"2cf96e81fduh3\"><p id=\"2cf96e80fd3ra\">若该服务处于启用状态，右键单击该服务，然后单击<b data-tag=\"uicontrol\" id=\"66f13ab0ffo14\" class=\"uicontrol\">禁用</b>。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5775271861/p518595.png\" class=\"image break\"></li></ol></li><li id=\"572eca61fd4b5\"><p id=\"572eca60fdany\">重新ping外网地址，不再出现“一般故障”错误时，表示该问题已解决。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/troubleshooting-for-ping-attempts-to-pass-the-server-and-port-disconnection", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/network-and-security-group-issues/\">网络与安全组问题</a></span>\n <span>无法ping通ECS实例公网IP的排查方法</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>无法ping通ECS实例公网IP的排查方法</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-08-22 17:36:03</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"1a9835e0858zm\"><p id=\"1aa68dc0859y3\" data-tag=\"shortdesc\" class=\"shortdesc\">无法ping通ECS实例的原因较多，您可以参考本文进行排查。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"ac14ff10fdpec\" class=\"section\"><h2 id=\"n49mj\"><b>问题现象</b></h2><p id=\"f75154b01b28f\">本地客户端无法ping通目标ECS实例公网IP，例如：</p><ul id=\"39a93d42fd0ot\"><li id=\"39a93d40fd2ia\"><p id=\"f75154b11bm8j\">本地客户端为Linux系统，ping目标ECS实例公网IP时无响应，如下所示：</p><img id=\"379c5640fdahg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4868625861/p675574.png\" alt=\"2023-05-28_16-53-11..png\" placement=\"break\" class=\"image break\"></li><li id=\"3b3eaa50fdour\"><p id=\"f7517bc01bv8h\">本地客户端为Windows系统，ping目标ECS实例公网IP时提示<b data-tag=\"uicontrol\" id=\"8721a810fdxro\" class=\"uicontrol\">请求超时</b>错误，如下所示：</p><img id=\"45b72d40fdqeq\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4868625861/p675575.png\" alt=\"2023-05-28_16-52-16..png\" placement=\"break\" class=\"image break\"></li></ul></section><section id=\"ad6573e0fd6sj\" class=\"section\"><h2 id=\"a1bd2380fd93g\"><b>问题原因</b></h2><p id=\"f7517bc21b164\">在确保本地网络正常的情况下（即您可以正常访问其他网站或可以ping通其他网站），无法ping通目标ECS实例公网IP可能有以下原因：</p><table id=\"1a473610fdttr\" tablewidth=\"690\" tablecolswidth=\"293 397\" class=\"table\"><colgroup colwidth=\"0.85*\" style=\"width:42.46%\"></colgroup><colgroup colwidth=\"1.15*\" style=\"width:57.54%\"></colgroup><tbody class=\"tbody\"><tr id=\"1a473615fdsen\"><td id=\"1a473612fdyj8\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"f7517bc31b2cm\"><b>可能原因</b></p></td><td id=\"1a473614fdw2p\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"f7517bc41be9n\"><b>排查方案</b></p></td></tr><tr id=\"1a475d22fd5b5\"><td id=\"1a473617fdtys\" rowspan=\"1\" colspan=\"1\"><p id=\"f7517bc51bn2x\">ECS实例未处于<b id=\"ecs-namespace-dashboard.common-status-working\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">运行中</b>状态</p></td><td id=\"1a475d21fdwu7\" rowspan=\"1\" colspan=\"1\"><p id=\"f7517bc61byky\"><a title=\"\" class=\"xref\" href=\"#3a45884004dvv\">检查ECS实例状态</a></p></td></tr><tr id=\"1a475d2cfds11\"><td id=\"1a475d29fdmb3\" rowspan=\"1\" colspan=\"1\"><p id=\"f7517bc71bn7w\">ECS实例的安全组错误</p></td><td id=\"1a475d2bfdx7w\" rowspan=\"1\" colspan=\"1\"><p id=\"f7517bc81bh88\"><a title=\"\" class=\"xref\" href=\"#8be1b210fdltu\">检查ECS实例安全组规则</a></p></td></tr><tr id=\"1a475d31fdo85\"><td id=\"1a475d2efd4ml\" rowspan=\"1\" colspan=\"1\"><p id=\"f7517bc91b08h\">ECS实例防火墙配置错误</p></td><td id=\"1a475d30fdyg3\" rowspan=\"1\" colspan=\"1\"><p id=\"f751a2d01bxgd\"><a title=\"\" class=\"xref\" href=\"#8dd65620fdblr\">检查ECS实例防火墙配置</a></p></td></tr><tr id=\"1a478432fdtto\"><td id=\"1a475d33fd5ct\" rowspan=\"1\" colspan=\"1\"><p id=\"f751a2d11bjeo\">ECS实例CPU使用率或带宽使用率过高</p></td><td id=\"1a478431fdnk2\" rowspan=\"1\" colspan=\"1\"><p id=\"f751a2d21bfxc\"><a title=\"\" class=\"xref\" href=\"#a1b97700fdjb7\">查看ECS实例CPU使用率或带宽使用率</a></p></td></tr><tr id=\"1a478437fdexq\"><td id=\"1a478434fd15f\" rowspan=\"1\" colspan=\"1\"><p id=\"f751a2d31ba47\">ECS实例存在黑洞</p></td><td id=\"1a478436fdjby\" rowspan=\"1\" colspan=\"1\"><p id=\"f751c9e01b8zr\"><a title=\"\" class=\"xref\" href=\"#4bdeb480fd5x0\">查看是否存在黑洞</a></p></td></tr><tr id=\"1a47843cfdf8l\"><td id=\"1a478439fdb44\" rowspan=\"1\" colspan=\"1\"><p id=\"f751c9e11b3q2\">ECS实例被恶意入侵</p></td><td id=\"1a47843bfdgro\" rowspan=\"1\" colspan=\"1\"><p id=\"f751c9e21bnii\"><a title=\"\" class=\"xref\" href=\"#6f4b5990fdwzo\">检查云安全中心是否存在安全告警</a></p></td></tr><tr id=\"944fc030fdqdn\"><td id=\"944fc032fd799\" rowspan=\"1\" colspan=\"1\"><p id=\"f751c9e31basw\">ECS实例为中国香港或海外实例</p></td><td id=\"944fc034fdrxx\" rowspan=\"1\" colspan=\"1\"><p id=\"f751c9e41bc4h\"><a title=\"\" class=\"xref\" href=\"#6ac825f0fddfb\">检查您的实例是否为中国香港或海外实例</a></p></td></tr><tr id=\"8ec969e0fd48q\"><td id=\"8ec990f1fd0dj\" rowspan=\"1\" colspan=\"1\"><p id=\"f751c9e51b02w\">某个客户端ping不通</p></td><td id=\"8ec990f3fdcax\" rowspan=\"1\" colspan=\"1\"><p id=\"f751c9e61b6ke\"><a title=\"\" class=\"xref\" href=\"#bbdb7550fd3tg\">检查是否为某个客户端环境ping不通</a></p></td></tr><tr id=\"9cb49a70ff19f\"><td id=\"9cb49a71ffo1l\" rowspan=\"1\" colspan=\"1\"><p id=\"f751c9e71b8rc\">域名未备案或域名解析异常</p></td><td id=\"9cb49a73ff1gs\" rowspan=\"1\" colspan=\"1\"><p id=\"f751f0f01b97m\"><a title=\"\" class=\"xref\" href=\"#ce612020ffsma\">检查域名是否备案或域名解析配置</a></p></td></tr></tbody></table></section><section id=\"3a45884004dvv\" class=\"section\"><h2 id=\"fd656960fdv4m\" jc=\"start\" style=\"text-align:start\">检查ECS实例状态</h2><p jc=\"start\" id=\"f751f0f11bnpx\" style=\"text-align:start\">只有当ECS实例状态为<b data-tag=\"uicontrol\" id=\"ebc88a00fdct3\" data-isbold=\"true\" class=\"uicontrol\">运行中</b>时，才能对外提供业务访问。检查步骤如下：</p><ol id=\"78eba092fd02v\"><li data-tag=\"step\" id=\"7920ba51fdu8e\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"f751f0f21ba9l\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com/\">ECS管理控制台</a>。</p></li><li data-tag=\"step\" id=\"828f2042fd5i9\" class=\"step\"><p id=\"f751f0f31b14w\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"uicontrol-puq-bs2-grd\" class=\"uicontrol\">实例与镜像</b><b>&gt;</b><b data-tag=\"uicontrol\" id=\"uicontrol-fk3-i03-vyq\" class=\"uicontrol\">实例</b>。</p></li><li data-tag=\"step\" id=\"88f21af2fdujt\" class=\"step\"><p id=\"f751f0f41b8i9\">在顶部菜单栏左上角处，选择地域。</p></li><li id=\"89a872a0fd7bg\"><p id=\"f751f0f51bya2\">在实例列表页面，检查目标实例的状态。</p><ul id=\"a7f31df1fdroq\"><li id=\"a7c668a1fdoax\"><p id=\"f75218001bp58\">目标实例不是<b data-tag=\"uicontrol\" id=\"ebc88a01fdssw\" data-isbold=\"true\" class=\"uicontrol\">运行中</b>状态，请根据实例状态，选择对应的解决方案。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/instance-lifecycle\">实例的生命周期</a>。</p></li><li id=\"e638e3b1fdx9k\"><p id=\"f75218021bu20\">目标实例是<b data-tag=\"uicontrol\" id=\"ebc88a02fdopg\" data-isbold=\"true\" class=\"uicontrol\">运行中</b>状态，请执行<a title=\"\" class=\"xref\" href=\"#8be1b210fdltu\">检查ECS实例安全组规则</a>。</p></li></ul></li></ol></section><section id=\"8be1b210fdltu\" class=\"section\"><h2 id=\"777394a0fdvtr\"><b>检查ECS实例安全组规则</b></h2><p id=\"f75218031bkkx\">ECS实例的安全组中默认包含开放ICMP协议的规则，即允许ping通ECS实例，若该规则被删除，则无法ping通ECS实例。您可以通过以下步骤进行排查：</p><ol id=\"d5046940fdgck\"><li data-tag=\"step\" id=\"f72fea001bd31\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"f72fea011bi2w\" class=\"step\"><p id=\"cc0c75a0379qu\"><span data-tag=\"cmd\" id=\"cmd-9ro-yc5-vx4\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-kq7-suy-h2g\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-puq-bs2-grd\" class=\"uicontrol\">实例与镜像</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-fk3-i03-vyq\" class=\"uicontrol\">实例</b></span>。</span></p></li><li data-tag=\"step\" id=\"f72fea021blv3\" class=\"step\"><p id=\"cc0dfc4237gix\"><span data-tag=\"cmd\" id=\"cmd-acu-560-w33\" class=\"cmd\">在页面左侧顶部，选择目标资源所在的地域。<img data-tag=\"image\" id=\"image-3wz-243-ym2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0777199861/p680076.png\" width=\"500\" alt=\"地域\" placement=\"break\" class=\"image break\"> </span></p></li><li id=\"d6875fc0fd6a6\"><p id=\"f7523f121bszc\">在ECS实例列表页面，单击目标ECS实例ID。</p></li><li id=\"02457e81fdqed\"><p id=\"f7523f131b52x\">在ECS实例详情页面，单击<b id=\"label-securityGroup\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">安全组</b>页签。</p></li><li id=\"1dbff2d1fdq3h\"><p id=\"f7523f141bb8x\">在<b id=\"ecs.group.list.lb.title\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">安全组列表</b>页签下，单击安全组ID。</p></li><li id=\"d503b081fdb4j\"><p id=\"f7523f151bfl2\">在安全组规则页面，查看入方向规则是否存在ICMP协议的安全组规则。</p><img id=\"d7ad3ac0fdun9\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4868625861/p675577.png\" alt=\"ICMP协议..png\" placement=\"break\" class=\"image break\"><ul id=\"7c9ad3a1fdxfz\"><li id=\"7c0f3571fd9pm\"><p id=\"f75266201bljk\">不存在ICMP协议的安全组规则，请添加以下入方向安全组规则。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。</p><p id=\"f75266211b0go\"><b id=\"ecs.sgRule.table.column.Policy\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">授权策略</b>选择<b data-tag=\"uicontrol\" id=\"341d6f10fd6g3\" class=\"uicontrol\">允许</b>，<b id=\"ecs.sgRule.table.column.Priority\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">优先级</b>保持默认，<b id=\"ecs.sgrule.list.lb.ipProtocol\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">协议类型</b>选择<b id=\"ecs.sgrule.cons.lb.rule-type-icmp.ipv4\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">全部ICMP（IPv4）</b>，<b id=\"ecs.sgrule.list.lb.portRange\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">端口范围</b>为<code data-tag=\"codeph\" class=\"codeph\">-1/-1</code>，<b id=\"ecs.sgrule.list.lb.target\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">授权对象</b>：建议仅允许特定的IP访问。</p></li><li id=\"c5a93820fdiot\"><p id=\"f75266221b08u\">存在ICMP协议的安全组规则，请执行<a title=\"\" class=\"xref\" href=\"#8dd65620fdblr\">检查ECS实例防火墙配置</a>。</p></li></ul></li></ol></section><section id=\"8dd65620fdblr\" class=\"section\"><h2 id=\"8dd65621fdab7\"><b>检查ECS实例防火墙配置</b></h2><p id=\"f75266231bzii\">请根据ECS实例操作系统，选择相应的检查方式。</p><section id=\"d12f7a30fd940\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"d12f7a32fduwm\" class=\"section\"><h2 id=\"d12f7a31fdc8z\">检查Linux系统内核参数和防火墙配置</h2><p id=\"f75266241budu\">Linux系统是否允许ping由内核参数<code data-tag=\"code\" class=\"code\">icmp_echo_ignore_all</code>和防火墙设置共同决定，任何一个禁止，都会无法ping通。</p><section id=\"6d760180fdbiq\" class=\"section\"><h3 id=\"d12f7a33fdq9s\"><b>检查Linux系统内核参数</b></h3><ol id=\"61954462fdikz\"><li id=\"61954460fdk0j\"><p id=\"f75266251bwxl\">使用VNC远程连接ECS实例。</p><p id=\"f7528d301btzp\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"6cd7f521fdtsb\"><p id=\"f7528d311bc80\">执行如下命令，查看内核参数<code data-tag=\"code\" class=\"code\">icmp_echo_ignore_all</code>值。</p><pre id=\"4g0nau\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>cat /proc/sys/net/ipv4/icmp_echo_ignore_all</code></pre><ul id=\"9233dc81fdjil\"><li id=\"917b13d1fd65c\"><p id=\"f7528d321bcet\">若回结果为0，表示允许所有的ICMP请求，请执行<a title=\"\" class=\"xref\" href=\"#bc280850fdfb3\">检查Linux防火墙配置</a>。</p></li><li id=\"a138ec70fdfuc\"><p id=\"f7528d331bbou\">若返回结果为1，表示禁止所有的ICMP请求，请执行步骤<a title=\"\" class=\"xref\" href=\"#09be4741fdgii\">3</a>。</p></li></ul></li><li id=\"09be4741fdgii\"><p id=\"f7528d341b942\">执行如下命令，修改内核参数<code data-tag=\"code\" class=\"code\">icmp_echo_ignore_all</code>值为0允许所有ICMP请求。</p><ol id=\"33a4fb01fdw1q\"><li id=\"31590f30fdfmj\"><p id=\"f7528d351b4na\">临时允许\n</p><pre id=\"dbr7fi\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>echo 0 &gt;/proc/sys/net/ipv4/icmp_echo_ignore_all</code></pre></li><li id=\"368f97d1fdj6v\"><p id=\"f752b4401bt5r\">永久允许\n</p><pre id=\"rcsmbq\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>echo net.ipv4.icmp_echo_ignore_all=0 &gt;&gt; /etc/sysctl.conf\nsysctl -p</code></pre></li></ol></li></ol></section><section id=\"bc280850fdfb3\" class=\"section\"><h3 id=\"f0f44260fd8nf\"><b>检查Linux防火墙配置</b></h3><ol id=\"89b413f0fdubd\"><li id=\"89b413f1fdg76\"><p id=\"f752b4411bieu\">使用VNC远程连接ECS实例。</p><p id=\"f752b4421beej\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"89b413f4fdv2m\"><p jc=\"start\" id=\"f752b4431bybz\" style=\"text-align:start\">执行以下命令，查看防火墙规则。\n</p><pre id=\"89b413f6fdxka\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>iptables -L</code></pre><ul id=\"89b413f7fdjvg\"><li id=\"89b413f8fdkpl\"><p id=\"f752b4441btyd\">若返回如下结果，表示ICMP对应规则未被禁止，请执行<a title=\"\" class=\"xref\" href=\"#a1b97700fdjb7\">检查ECS实例CPU使用率或带宽使用率</a>。</p><pre id=\"89b413fafdzci\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>Chain INPUT (policy ACCEPT)\ntarget     prot opt source               destination         \nACCEPT     icmp --  anywhere             anywhere             icmp echo-request        \nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination  \nACCEPT     icmp --  anywhere             anywhere             icmp echo-reque</code></pre></li><li id=\"89b413fbfdqkf\"><p id=\"f752b4451bfws\">若返回结果ICMP对应规则被禁止，请执行以下命令，启用对应规则。</p><pre id=\"4bf4ow\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>#Chain INPUT\niptables -A INPUT -p icmp --icmp-type echo-request -j ACCEPT\n#Chain OUTPUT\niptables -A OUTPUT -p icmp --icmp-type echo-reply -j ACCEPT</code></pre></li></ul></li></ol></section></section><section id=\"d12f7a35fdbph\" class=\"section\"><h2 id=\"d12f7a34fdyax\">检查Windows防火墙配置</h2><p id=\"f752b4461bvb1\">本操作以Windows Server 2012为例，其他版本的Windows Server系统操作类似。</p><ol id=\"fc77cee0fdew0\"><li id=\"fc77cee1fdd6x\"><p id=\"f752b4471bygl\">使用VNC远程连接ECS实例。</p><p id=\"f752b4481bycp\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"fd4b4b81fdf7e\"><p id=\"f752db501b8z8\">单击左下角的<img id=\"f6ec8f30fdfog\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0378725861/p675579.png\" alt=\"服务器管理..png\" placement=\"inline\" width=\"30\" class=\"image inline\">图标，打开服务器管理。</p></li><li id=\"0c7679b0fd2z8\"><p id=\"f752db511bgda\">选择右上角的<b data-tag=\"uicontrol\" id=\"4b05cb90fdbpv\" class=\"uicontrol\">工具</b>&gt;<b data-tag=\"uicontrol\" id=\"4649ca20fd5gx\" class=\"uicontrol\">高级安全 Windows防火墙</b>。</p><img id=\"55b4c7d0fde1d\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0378725861/p675580.png\" alt=\"2023-05-28_20-21-16..png\" placement=\"break\" class=\"image break\"></li><li id=\"4bc01ae0fdrn8\"><p id=\"f752db531bt5k\">在<b data-tag=\"uicontrol\" id=\"ea6c94cefdgex\" class=\"uicontrol\">高级安全 Windows防火墙</b>页面，分别查看<b data-tag=\"uicontrol\" id=\"e0a9f120fd704\" class=\"uicontrol\">入站规则</b>和<b data-tag=\"uicontrol\" id=\"e3d9ad40fd4e9\" class=\"uicontrol\">出站规则</b>中ICMP相关协议是否被禁止。</p><ul id=\"b1ea7941fd0u1\"><li id=\"b1be8740fd9er\"><p id=\"f752db541bggq\">如果ICMP相关协议被禁止，如下图所示，请开启该规则。</p><img id=\"1f692ca0fdrgk\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0378725861/p675581.png\" alt=\"2023-05-28_20-31-12..png\" placement=\"break\" class=\"image break\"></li><li id=\"0890c921fd9r1\"><p id=\"f752db561b5ja\">如果ICMP相关协议未禁止，请执行<a title=\"\" class=\"xref\" href=\"#a1b97700fdjb7\">检查ECS实例CPU使用率或带宽使用率</a>。</p></li></ul></li></ol></section></section></section><section id=\"a1b97700fdjb7\" class=\"section\"><h2 id=\"a1b97701fdnq0\"><b>检查ECS实例CPU使用率或带宽使用率</b></h2><p id=\"f75302601b36x\">检查外网相关资源使用率，如公网带宽使用率达到100%等。</p><ul id=\"eda775b2d8ixe\"><li id=\"eda775b3d8gzz\"><p id=\"f75302611b6py\">突发性能实例性能约束模式，当CPU使用率达到100%时可能导致无法ping通或ping丢包，具体信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-5\">突发性能实例概述</a>。</p></li><li id=\"eda79cc0d8xx5\"><p id=\"f75302621b2eu\">EIP或固定公网IP资源被占满时，可能会导致ping操作被限速丢弃而无法ping通。</p></li></ul></section><section id=\"4bdeb480fd5x0\" class=\"section\"><h2 id=\"3f736240fd02o\"><b>检查是否存在黑洞</b></h2><p id=\"f75302631bykk\">请检查是否收到黑洞通知，黑洞期间无法远程连接、无法ping通ECS实例。</p><p id=\"f75302641bkwi\">更多信息，请参见<a title=\"\" class=\"xref\" href=\"/document_detail/40032.html\">阿里云黑洞策略</a>。</p></section><section id=\"6f4b5990fdwzo\" class=\"section\"><h2 id=\"6f4b5991fdehj\"><b>检查云安全中心是否存在安全告警</b></h2><p id=\"f75302651b4q2\">请检查云安全中心是否有异常的安全告警通知，被恶意入侵也会有可能导致ECS实例无法ping通。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/security-center/product-overview/what-is-security-center\">什么是云安全中心</a>。</p></section><section id=\"6ac825f0fddfb\" class=\"section\"><h2 id=\"6d538130fdqpo\"><b>检查您的实例是否为中国香港或海外实例</b></h2><p id=\"f75302661bafi\">在中国内地ECS实例访问中国香港或海外ECS实例时，链路质量会有可能受到运营商线路影响，建议过一段时间再次尝试。</p></section><section id=\"bbdb7550fd3tg\" class=\"section\"><h2 id=\"88a1bff0fdpbm\"><b>检查是否为某个客户端环境ping不通</b></h2><p id=\"f75302671barg\">如果只有某个客户端环境ping不通，其他客户端环境可以ping通。建议在客户端和ECS实例中进行链路测试的。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-the-ping-command-packet-loss-or-not-the-link-test-method\">使用ping命令丢包或不通时的链路测试方法</a>。</p></section><section id=\"ce612020ffsma\" class=\"section\"><h2 id=\"b8486320ff5kt\"><b>检查域名是否备案或域名解析配置</b></h2><p id=\"f75302681btkm\">如果可以ping通公网IP，但是ping不通域名，可能是域名没有备案或者域名解析异常导致。</p><p id=\"f75302691by8k\">根据工信部要求，域名解析至<span data-tag=\"ph\" class=\"ph\" id=\"ph-2e5-wob-u0e\">中国内地</span>服务器必须先完成网站备案，才能正常开通网站访问。因此，网站在未取得备案号之前不允许开通访问，即未备案成功的网站均不能对外开通Web服务，否则将被阿里云监测系统识别并阻断网站服务。</p><ul id=\"dffaa122ff5n8\"><li id=\"dffaa120ff07s\"><p id=\"f753026a1blnq\">如果域名未备案，请先进行备案。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/icp-filing/product-overview/what-is-an-icp-filing\">什么是ICP备案</a>。</p></li><li id=\"94290881ffkek\"><p id=\"f75329701bktf\">如果域名已备案，请检查域名解析是否失效。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/document_detail/39834.html\">解析生效测试方法</a><span data-tag=\"ph\" id=\"494d49a020sk3\" props=\"china\" data-cond-props=\"china\" class=\"ph\">和<a title=\"\" class=\"xref\" href=\"/zh/dws/troubleshoot-dns-resolution-issues\">域名解析不生效的排查思路</a></span>。</p></li></ul><p id=\"f75329711blyf\" props=\"china\" data-cond-props=\"china\">更多域名或网站无法访问排查方法，请参见<a title=\"\" class=\"xref\" href=\"/zh/icp-filing/support/domain-name-or-website-can-t-access-how-to-troubleshoot\">域名或网站无法访问如何排查？</a>。</p></section><section id=\"9fa14890fd6rt\" class=\"section\"><h2 id=\"uW67j\">相关文档</h2><ul id=\"248015f285iu4\"><li id=\"248015f385f77\"><p id=\"f75329721bbx0\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/troubleshooting-guidelines-when-you-cannot-remotely-log-on-to-a-linux-instance-through-ssh\">无法连接Linux实例的排查方法</a></p></li><li id=\"24803d0285b22\"><p id=\"f75329751bpvd\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/solution-to-failure-in-remote-connection-to-windows-instance\">无法远程连接Windows实例的排查方法</a></p></li><li id=\"24803d0485cnw\"><p id=\"f75329761b87o\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/check-whether-tcp-port-80-is-available\">无法访问ECS实例中的服务的排查方法</a></p></li><li id=\"4947d8211bj99\"><p id=\"4947d8201b58u\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/when-you-ping-the-internet-address-of-a-windows-instance-the-system-prompts-general-fault\">Windows系统的ECS实例ping外网地址提示“一般故障”错误怎么办？</a></p></li><li id=\"4da147301budq\" props=\"china\" data-cond-props=\"china\"><p id=\"4da120201bulx\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/why-can-t-the-ecs-instance-access-the-public-network-environment\">为什么Windows系统的ECS实例配置辅助私网IP后，无法从ECS实例中访问公网环境？</a></p></li></ul></section><p id=\"181145c01bzln\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/troubleshoot-the-issue-that-an-instance-can-be-pinged-but-the-required-port-cannot", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/network-and-security-group-issues/\">网络与安全组问题</a></span>\n <span>能ping通ECS实例但端口不通的排查方法</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>能ping通ECS实例但端口不通的排查方法</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-08-25 16:47:25</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2485227\"><p id=\"52dd113841uw0\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍如何进行排查能ping通ECS实例但端口不通的问题。</p><div data-tag=\"body\" class=\"body\"><section id=\"af5efd2041dkg\" class=\"section\"><h2 id=\"789b5db041qov\"><b>操作场景</b></h2><p id=\"a222030041zxf\">通过客户端访问目标ECS实例时，如果能ping通ECS实例但业务端口无法访问，则可能是链路中相关节点对相应端口做了拦截所致。您可以参考以下步骤进行排查处理。</p><ol id=\"b2d0562241kkz\"><li id=\"b2d05620410sb\"><p id=\"b00b90d041qjr\"><a title=\"\" class=\"xref\" href=\"#8be1b210fdltu\">步骤一：检查ECS实例安全组规则</a></p></li><li id=\"c155aec141cmv\"><p id=\"c155aec041xp3\"><a title=\"\" class=\"xref\" href=\"#5fcf041002iku\">步骤二：检查端口监听状态及相关服务</a></p></li><li id=\"c71d53d041fme\"><p id=\"c71d2cc041ln4\"><a title=\"\" class=\"xref\" href=\"#d960101002x90\">步骤三：检查ECS防火墙设置</a></p></li><li id=\"ce7c13a041lty\"><p id=\"ce7bec9041u83\"><a title=\"\" class=\"xref\" href=\"#f8e6c44041cbf\">步骤四：通过探测工具进行检查</a></p></li></ol></section><section id=\"8be1b210fdltu\" class=\"section\"><h2 id=\"777394a0fdvtr\"><b>步骤一：检查ECS实例安全组规则</b></h2><p id=\"0c36d6404114n\">目标ECS实例端口不通时，可能是安全组规则中未放行该端口（如80端口），您可以参考以下步骤，检查ECS实例安全组规则。</p><ol id=\"d5046940fdgck\"><li data-tag=\"step\" id=\"f52a1c50417uo\" platform=\"public\" props=\"china intl\" data-cond-platform=\"public\" data-cond-props=\"china intl\" class=\"step\"><p id=\"cc0c2783376qv\"><span data-tag=\"cmd\" id=\"cmd-v8d-qrp-q0i\" class=\"cmd\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</span></p></li><li data-tag=\"step\" id=\"f52a1c5141pvx\" class=\"step\"><p id=\"cc0c75a0379qu\"><span data-tag=\"cmd\" id=\"cmd-9ro-yc5-vx4\" class=\"cmd\">在左侧导航栏，选择<span data-tag=\"menucascade\" id=\"menucascade-kq7-suy-h2g\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-puq-bs2-grd\" class=\"uicontrol\">实例与镜像</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-fk3-i03-vyq\" class=\"uicontrol\">实例</b></span>。</span></p></li><li data-tag=\"step\" id=\"f52a1c52417vj\" class=\"step\"><p id=\"cc0dfc4237gix\"><span data-tag=\"cmd\" id=\"cmd-acu-560-w33\" class=\"cmd\">在页面左侧顶部，选择目标资源所在的地域。<img data-tag=\"image\" id=\"image-3wz-243-ym2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0777199861/p680076.png\" width=\"500\" alt=\"地域\" placement=\"break\" class=\"image break\"> </span></p></li><li id=\"d6875fc0fd6a6\"><p id=\"f52eb03141q0n\">在ECS实例列表页面，单击目标ECS实例ID。</p></li><li id=\"02457e81fdqed\"><p id=\"f52eb03241zqe\">在ECS实例详情页面，单击<b id=\"label-securityGroup\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">安全组</b>页签。</p></li><li id=\"1dbff2d1fdq3h\"><p id=\"f52eb03341ixp\">在<b id=\"ecs.group.list.lb.title\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">安全组列表</b>页签下，单击安全组ID。</p></li><li id=\"d503b081fdb4j\"><p id=\"f52eb03441hkr\">在安全组规则页面，查看入方向规则是否开放目标端口（如80）。</p><img id=\"c462f5e0029y8\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678358.png\" alt=\"2023-06-04_16-56-00..png\" placement=\"break\" width=\"800\" class=\"image break\"><ul id=\"156b48c102kj9\"><li id=\"c5a93820fdiot\"><p id=\"f52ed74141y38\">未开放目标端口，请添加入方向为目标端口的安全组规则。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。</p></li><li id=\"142e5bf002vmx\"><p id=\"f52ed74241cf1\">已开放目标端口，请执行<a title=\"\" class=\"xref\" href=\"#d960101002x90\">步骤三：检查ECS防火墙设置</a>。</p></li></ul></li></ol></section><section id=\"5fcf041002iku\" class=\"section\"><h2 id=\"3671438002ris\"><b>步骤二：检查</b>端口监听状态及相关<b>服务</b></h2><p id=\"176d91604144d\">目标ECS实例端口不通时，可能该服务端口未被正常监听（服务未启动），您可以参考以下步骤，检查ECS实例安全组规则。</p><section id=\"6c4022b002vtq\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"6c4022b202pes\" class=\"section\"><h2 id=\"6c4022b102lyn\">Linux实例</h2><p id=\"f52ed74341tld\">本操作以CentOS 7.9为例，其他版本的Linux系统操作可能有所差异。</p><ol id=\"7d122a7102pje\"><li id=\"7d12036002wu9\"><p id=\"f52ed74441nwg\">远程连接Linux实例。</p><p id=\"f52ed74541wzw\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"84947a1141g0x\"><p id=\"84947a1041cvo\">执行如下命令，查看端口是否正常被监听。</p><pre id=\"8bfeab9241p19\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>netstat -an | grep [$Port]    # [$Port]请替换为实际的端口号</code></pre><ul id=\"8bfeab93413kj\"><li id=\"8bfeab9441sr9\"><p id=\"8bfeab9541vuf\">如果返回如下信息，则说明80端口被正常监听，请继续执行<a title=\"\" class=\"xref\" href=\"#d960101002x90\">步骤三：检查ECS防火墙设置</a>。</p><img id=\"8bfeab9741sgz\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678360.png\" alt=\"2023-06-04_17-11-27..png\" placement=\"break\" class=\"image break\"></li><li id=\"8bfeab9841e3y\"><p id=\"8bfeab99413k1\">如果返回的不是以上信息，表示80端口未处于监听状态（服务未启动）。您需要重启该服务，若服务重启还是未解决问题，请继续执行<a title=\"\" class=\"xref\" href=\"#d960101002x90\">步骤三：检查ECS防火墙设置</a>。</p></li></ul></li></ol></section><section id=\"6c4022b50200e\" class=\"section\"><h2 id=\"6c4022b402h49\">Windows实例</h2><p id=\"f52efe57411ti\">本操作以Windows Server 2012为例，其他版本的Windows Server系统操作类似。</p><ol id=\"8750156202cwq\"><li id=\"87501560026pc\"><p id=\"f52f2560417uh\">远程连接Windows实例。</p><p id=\"f52f256141047\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"cac8957141zlv\"><p id=\"cac8957041xmw\">在Windows PowerShell中执行如下命令，查看端口是否正常被监听。</p><pre id=\"3fe97b3e02jtd\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>netstat -ano | findstr \"[$Port]\"   # [$Port]请替换为实际的端口号</code></pre><ul id=\"3fe97b3f02kah\"><li id=\"3fe97b4002ma0\"><p id=\"f52f4c714148j\">如果返回如下信息，则说明80端口被正常监听，请继续执行<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/check-whether-tcp-port-80-is-available#d960101002x90\">检查ECS防火墙设置</a>。</p><img id=\"8fb9ff7002pph\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678369.png\" alt=\"2023-06-04_17-36-44..png\" placement=\"break\" class=\"image break\"></li><li id=\"3fe97b440214g\"><p id=\"f52f4c73416a9\">如果返回的不是以上信息，表示80端口未处于监听状态（服务未启动）。您需要重启该服务，若服务重启还是未解决问题，请继续执行<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/check-whether-tcp-port-80-is-available#d960101002x90\">检查ECS防火墙设置</a>。</p></li></ul></li></ol></section></section></section><section id=\"d960101002x90\" class=\"section\"><h2 id=\"a2951da00266g\"><b>步骤三：检查ECS防火墙设置</b></h2><p id=\"5b99f5e041c2c\">目标ECS实例端口不通时，可能是ECS防火墙拦截了该端口，您可以参考以下步骤，检查ECS实例防火墙设置。</p><section id=\"e07da83002986\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"e07dcf4102dnw\" class=\"section\"><h2 id=\"e07dcf4002iej\">Linux实例</h2><p id=\"f52f4c7541lcc\">本操作以CentOS 7.9为例，其他版本的Linux系统操作可能有所差异。</p><ol id=\"f388fe2202wx7\"><li id=\"f52a1c5341rrb\" docid=\"3925206\"><p id=\"6c4022b3027vx\">远程连接Linux实例。</p><p id=\"8c56b46002wtl\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"0a42dd210251q\"><p id=\"f52f4c7841tu1\">执行如下命令，查看防火墙状态。</p><pre id=\"liuqdb\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>systemctl status firewalld</code></pre><ul id=\"f732d5d102lr0\"><li id=\"f624e84002htq\"><p id=\"f52f738041azd\">如果回显中出现<code data-tag=\"code\" class=\"code\">Active: inactive (dead)</code>信息，说明防火墙为关闭状态，无需再进行任何操作。</p></li><li id=\"1783ff80026wm\"><p id=\"f52f738141pd7\">如果回显中出现<code data-tag=\"code\" class=\"code\">Active: active (running)</code>信息，说明防火墙已开启，请继续执行步骤<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/check-whether-tcp-port-80-is-available#8611ce6002zy8\">3</a>。</p></li></ul></li><li id=\"8611ce6002zy8\"><p id=\"f52f738241vnp\">执行如下命令，查看防火墙中已开放的端口。</p><pre id=\"gqzneg\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>firewall-cmd --list-all</code></pre><ul id=\"c3ee602102dbq\"><li id=\"c3af826002uvo\"><p id=\"f52f7383415gl\">如果回显中出现<b data-tag=\"uicontrol\" id=\"e14b501002mp9\" class=\"uicontrol\">ports: 80/tcp</b>信息，说明防火墙规则中已放行80端口，无需再进行任何操作。</p><img id=\"d8f7a8f002xd8\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678376.png\" alt=\"2023-06-04_19-33-53..png\" placement=\"break\" class=\"image break\"></li><li id=\"fa943e6002wq0\"><p id=\"f52f738541ykp\">如果回显中没有<b data-tag=\"uicontrol\" id=\"19c8747302ddh\" class=\"uicontrol\">ports: 80/tcp</b>信息，请执行如下命令，放行80端口。</p><pre id=\"hcq8ll\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>firewall-cmd --zone=public --add-port=80/tcp --permanent</code></pre><p id=\"f52f9a9041as5\">若返回结果为<code data-tag=\"code\" class=\"code\">success</code>，表示已经放行TCP 80端口。</p></li></ul></li></ol></section><section id=\"e07dcf4402yxv\" class=\"section\"><h2 id=\"e07dcf4302eqn\">Windows实例</h2><p id=\"f52f9a91413c8\">本操作以Windows Server 2012为例，其他版本的Windows Server系统操作类似。</p><ol id=\"126429a202wsp\"><li id=\"f52a1c5441zvs\" docid=\"3925206\"><p id=\"85e3660002p71\">远程连接Windows实例。</p><p id=\"9a82f08002yn4\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"fd4b4b81fdf7e\"><p id=\"f52f9a9441eot\">单击左下角的<img id=\"f6ec8f30fdfog\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0378725861/p675579.png\" alt=\"服务器管理..png\" placement=\"inline\" width=\"30\" class=\"image inline\">图标，打开服务器管理。</p></li><li id=\"0c7679b0fd2z8\"><p id=\"f52f9a9541ndf\">选择右上角的<b data-tag=\"uicontrol\" id=\"4b05cb90fdbpv\" class=\"uicontrol\">工具(T)</b>&gt;<b data-tag=\"uicontrol\" id=\"4649ca20fd5gx\" class=\"uicontrol\">高级安全 Windows防火墙</b>。</p><img id=\"55b4c7d0fde1d\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0378725861/p675580.png\" alt=\"2023-05-28_20-21-16..png\" placement=\"break\" class=\"image break\"></li><li id=\"4bc01ae0fdrn8\"><p id=\"f52fc1a041fbe\">查看防火墙状态。</p><ol id=\"832ea87102hwz\"><li id=\"8302414002bqd\"><p id=\"f52fc1a14192h\">如果防火墙处于关闭状态，无需进行任何操作。</p><img id=\"fab67b2002cgf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678371.png\" alt=\"2023-06-04_18-49-00..png\" placement=\"break\" class=\"image break\"></li><li id=\"918fd74002t7y\"><p id=\"f52fc1a341kxk\">如果防火墙状态为已启用，请继续以下操作。</p><ol id=\"211f179102j2v\"><li id=\"4474c42002pkl\"><p id=\"f52fc1a441o8s\">在<b data-tag=\"uicontrol\" id=\"ea6c94cefdgex\" class=\"uicontrol\">高级安全 Windows防火墙</b>页面，单击<b data-tag=\"uicontrol\" id=\"2fc565b002qjw\" class=\"uicontrol\">入站规则</b>。</p></li><li id=\"32642c71027hv\"><p id=\"f52fc1a541nfw\">查看<b data-tag=\"uicontrol\" id=\"64a725c002j4s\" class=\"uicontrol\">Windows 远程管理-兼容模式(HTTP-In)</b>的状态。</p><ul id=\"b1ea7941fd0u1\"><li id=\"b1be8740fd9er\"><p id=\"f52fe8b041q0d\">如果协议已启动，无需进行任何操作。</p></li><li id=\"0890c921fd9r1\"><p id=\"f52fe8b141o6o\">如果该规则未启用，请右键单击该规则，然后单击<b data-tag=\"uicontrol\" id=\"e08a635002g20\" class=\"uicontrol\">启用规则(E)</b>。</p><img id=\"e601ec9002910\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6288785861/p678373.png\" alt=\"2023-06-04_18-58-43..png\" placement=\"break\" class=\"image break\"></li></ul></li></ol></li></ol></li></ol></section></section></section><section id=\"f8e6c44041cbf\" class=\"section\"><h2 id=\"eb01f16041d10\"><b>步骤四：通过探测工具进行检查</b></h2><p id=\"0823622041w81\">本地客户端无法访问端口可能是链路中的相关节点拦截了端口所致，请利用端口可用性探测工具进行测试，验证是否有节点拦截了端口。</p><section id=\"e26b72e041cu1\" class=\"section\"><h3 id=\"a6b0ece041wgc\"><b>使用端口可用性探测工具</b></h3><section id=\"e040172041jns\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"e040172241f1o\" class=\"section\"><h2 id=\"e040172141j55\">本地客户端为Linux系统</h2><p id=\"cf165d0041ppk\">Linux系统中，通常可以通过traceroute来进行端口可用性探测。traceroute用于跟踪Internet协议（IP）数据包传送到目标地址时经过的路，通过发送TCP数据包向目标端口进行探测，以检测从数据包源到目标服务器的整个链路上相应端口的连通性情况。</p><section id=\"729ed5b041iio\" class=\"section\"><h3 id=\"eb1e39b141xhb\"><b>安装</b>traceroute</h3><pre id=\"wyfcvx\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>sudo yum install -y traceroute</code></pre></section><section id=\"74f744a04160s\" class=\"section\"><h3 id=\"254cfb2041p7a\">traceroute命令</h3><p id=\"2cebaa2041f3z\">常用traceroute命令格式如下所示。</p><pre data-tag=\"codeblock\" outputclass=\"language-shell\" id=\"30c6c17041sya\" class=\"pre codeblock language-shell\"><code>traceroute [-n] -T -p &lt;目标端口号&gt; &lt;Host&gt;</code></pre><ul id=\"219c242085kby\"><div id=\"4c3e017041wif\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"82d4e0f242ian\"><li id=\"82d4e0f042zzn\"><p id=\"485f67b041197\">-n：直接使用IP地址而非主机名称（禁用DNS反查）。</p></li><li id=\"848ace5142m53\"><p id=\"848ace50423y5\">-T：通过TCP探测。</p></li><li id=\"8575074042ezm\"><p id=\"8574e03042k5g\">-p：设置探测的端口号。</p></li><li id=\"8653a770424k7\"><p id=\"8653806042bau\">&lt;目标端口号&gt;：需要探测的端口号，比如80。</p></li><li id=\"8799bc0042e2j\"><p id=\"879994f0425pk\">&lt;Host&gt;：需要探测的目标服务器地址，比如<code data-tag=\"code\" class=\"code\">192.168.XXX.XXX</code>。</p></li></ul></div></div></ul></section><section id=\"ed0a11e0414ud\" class=\"section\"><h3 id=\"tsmkn\">测试示例</h3><p id=\"89c8667041e9f\">traceroute的示例命令和返回结果如下：</p><pre id=\"v5x6dt\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>[test@centos~]# traceroute -n -T -p 22 223.5.XXX.XXX\ntraceroute to 223.5.XXX.XXX (223.5.XXX.XXX), 30 hops max, 60 byte packets\n 1 5X.X.X.X 0.431 ms 0.538 ms 0.702 ms\n 2 10.88.XXX.XXX 0.997 ms 1.030 ms 10.88.XXX.XXX 1.309 ms\n 3 58.96.XXX.XXX 0.393 ms 0.390 ms 58.96.XXX.XXX 0.423 ms\n 4 202.123.XXX.XXX 1.110 ms 202.123.XXX.XXX 0.440 ms 0.440 ms\n 5 63.218.XXX.XXX 1.744 ms 63.218.XXX.XXX 1.076 ms 1.232 ms\n 6 63.223.XXX.XXX 1.832 ms 63.223.XXX.XXX 1.663 ms 63.223.XXX.XXX 1.616 ms\n 7 63.223.XXX.XXX 2.776 ms 63.223.XXX.XXX 1.585 ms 1.606 ms\n 8 * * 202.97.XXX.XXX 2.537 ms\n 9 202.97.XXX.XXX 6.856 ms * *\n10 * * *\n11 * * *\n12 * * 119.147.XXX.XXX 8.738 ms\n13 119.147.XXX.XXX 8.248 ms 8.231 ms *\n14 * 42.120.XXX.XXX 32.305 ms 42.120.XXX.XXX 29.877 ms\n15 42.120.XXX.XXX 11.950 ms 42.120.XXX.XXX 23.853 ms 42.120.XXX.XXX 29.831 ms\n16 42.120.XXX.XXX 11.007 ms 42.120.XXX.XXX 13.615 ms 42.120.XXX.XXX 11.956 ms\n17 42.120.XXX.XXX 21.578 ms 42.120.XXX.XXX 13.236 ms *\n18 * * 223.5.XXX.XXX 12.070 ms !X</code></pre></section></section><section id=\"e040172541box\" class=\"section\"><h2 id=\"e040172441gq2\">本地客户端为Windows系统</h2><p id=\"17f27170412hm\">在Windows系统中，您可通过tracetcp进行端口可用性探测。tracetcp同样通过发送TCP数据包进行链路探测，以分析链路是否存在中间节点对目标端口做了阻断。</p><section id=\"fc444d8041b6f\" class=\"section\"><h3 id=\"016a29c041utt\">安装tracetcp</h3><ol id=\"5b0f61c241o0u\"><li id=\"5b0f61c041swc\"><p id=\"5d7fc5804126k\">在<a class=\"\" target=\"_blank\" href=\"https://www.winpcap.org/\">WinPcap官网</a>下载并安装WinPcap library。</p></li><li id=\"b45821e141ozv\"><p id=\"b45821e041w0u\">在<a class=\"from-extensions-error\" target=\"_blank\" href=\"http://simulatedsimian.github.io/tracetcp_download.html\">tracetcp官网</a>下载tracetcp。</p></li><li id=\"cb1c612141f6j\"><p id=\"e4d6d5f041z52\">将下载的tracetcp解压到<code data-tag=\"code\" class=\"code\">C:\\Windows</code>目录下。 </p><div type=\"important\" id=\"f0195fa041m1x\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"f05c5c1041kxj\">如果解压到非系统目录，则需要手动修改系统环境变量，以确保指令可以直接调用。</p></div></div></li></ol></section><section id=\"f2b09a60410d1\" class=\"section\"><h3 id=\"fd74691041bx2\"><b>使用方法</b></h3><p id=\"82fd7ad141i5z\">在Windows PowerShell或cmd命令行中输入tracetcp命令，常用tracetcp命令格式如下所示。</p><pre id=\"1gaggv\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>tracetcp &lt;IP&gt;:&lt;Port&gt;</code></pre><ul id=\"5c66a5d0850ez\"><div id=\"d17c8ac041kmk\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"99b09fd2427g2\"><li id=\"99b09fd0420hf\"><p id=\"cf3755b041yrb\">&lt;IP&gt;：指目标服务器的IP地址或者域名。</p></li><li id=\"9b27af7142o0s\"><p id=\"9b27af7042q0e\">&lt;Port&gt;：指需要探测的目标端口。</p></li></ul><p id=\"cf3755b2410bn\">关于更多tracetcp参数说明，您可以通过<code data-tag=\"code\" class=\"code\">tracetcp -?</code>命令查看帮助。</p></div></div></ul></section><section id=\"780264f041m16\" class=\"section\"><h3 id=\"f47c80c141xij\">测试示例</h3><p id=\"f47c80c241cce\">tracetcp的示例命令和返回结果如下：</p><pre id=\"sw18go\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>C:\\ &gt;tracetcp www.aliyun.com:80\nTracing route to 140.205.63.8 on port 80\nOver a maximum of 30 hops.\n1 3 ms 4 ms 3 ms 10.102.XXX.XXX\n2 13 ms 3 ms 4 ms 10.102.XXX.XXX\n3 3 ms 3 ms 2 ms 140.205.XXX.XXX\n4 4 ms 3 ms 3 ms 180.163.XXX.XXX\n5 5 ms 4 ms 7 ms 101.95.XXX.XXX\n6 6 ms 5 ms 7 ms 124.74.XXX.XXX\n7 8 ms 8 ms 8 ms 124.74.XXX.XXX\n8 10 ms 10 ms 8 ms 114.80.XXX.XXX\n9 9 ms 9 ms 11 ms 42.120.XXX.XXX\n10 * * * Request timed out.\n11 Destination Reached in 8 ms. Connection established to 140.205.XXX.XXX\nTrace Complete.</code></pre></section></section></section></section><section id=\"e706ccf041xhp\" class=\"section\"><h3 id=\"1aa8fec485qbw\" data-tag=\"h4\" class=\"h4\"><b>探测结果的案例分析</b></h3><p id=\"9f6d5fc041mf5\">当相关端口在某一跳被阻断，则之后各跳均不会有返回数据，据此就可以判断出异常节点。您可以根据相应节点信息，在<a class=\"\" target=\"_blank\" href=\"https://ip.taobao.com/ipSearch\">淘宝IP地址库</a>查询归属运营商进行问题反馈。</p><section id=\"a63cb0d041w0o\" class=\"section\"><h4 id=\"ef5989b0419rm\"><b>案例一：</b></h4><p id=\"ef5989b141mc4\"><b>探测结果</b>：目标端口在第3跳之后就没有数据返回，说明相应端口在该节点被阻断。</p><p id=\"67c3cd2041x8h\"><b>探测结果分析</b>：经查询该节点为内网IP，所以推断是本地网络相关安全策略所致，需要联系本地网络管理部门做进一步排查分析。</p><pre outputclass=\"language-shell\" data-tag=\"codeblock\" id=\"hg2yus\" class=\"pre codeblock language-shell\"><code>C:\\&amp;gt;tracetcp www.aliyun.com:135\nTracing route to 115.102.XXX.XXX on port 135\nOver a maximum of 30 hops.\n1       3 ms    3 ms    3 ms    10.102.XXX.XXX\n2       4 ms    3 ms    3 ms    10.102.XXX.XXX\n3       3 ms    3 ms    3 ms    140.205.XXX.XXX\n4       *       *       *       Request timed out.\n5       *       *       *       Request timed out.\n6       *       *       *       Request timed out.\n7       *       *       *       Request timed out.\n8       *       *       *       Request timed out.\n9       *       *       *       Request timed out.\n10      *       *       *       Request timed out.\n11      *       *       *       Request timed out.\n12      *       *       *       Request timed out.\nTrace Complete.</code></pre></section><section id=\"af00a5f041dlk\" class=\"section\"><h4 id=\"ab6c82b141git\"><b>案例二</b></h4><p id=\"1af9e741414bw\"><b>探测结果</b>：探测结果如下，目标端口在第11跳之后就没有数据返回，说明相应端口在该节点被阻断。</p><p id=\"7e470bc041z10\"><b>探测结果分析</b>：经查询该节点归属北京移动，需要您自行向运营商反馈。</p><pre outputclass=\"language-shell\" data-tag=\"codeblock\" id=\"392ctk\" class=\"pre codeblock language-shell\"><code>[root@mycentos ~]# traceroute -T -p 135 www.baidu.com\ntraceroute to www.baidu.com (111.13.XXX.XXX), 30 hops max, 60 byte packets\n 1  * * *\n 2  111.13.XXX.XXX (111.13.XXX.XXX)  4.115 ms  4.397 ms  4.679 ms\n 3  112.15.XXX.XXX (112.15.XXX.XXX)  901.921 ms  902.762 ms  902.338 ms\n 4  200.35.XXX.XXX (200.35.XXX.XXX)  2.187 ms  1.392 ms  2.266 ms\n 5  * * *\n 6  58.200.XXX.XXX (58.200X.XXX.XXX)  1.688 ms  1.465 ms  1.475 ms\n 7  63.128.XXX.XXX (63.128.XXX.XXX)  27.729 ms  27.708 ms  27.636 ms\n 8  * * *\n 9  * * *\n10  200.38.XXX.XXX (200.38.XXX.XXX)  28.922 ms 200.38.XXX.XXX (200.38.XXX.XXX)   29.030 ms  28.916 ms\n11  204.35.XXX.XXX (204.35.XXX.XXX)  29.169 ms  28.893 ms 204.35.XXX.XXX (204.35.XXX.XXX)  30.986 ms\n12  * * *\n13  * * *\n14  * * *\n15  * * *\n16  * * *\n17  * * *\n18  * * *\n19  * * *\n20  * * *</code></pre></section></section></section><p id=\"f5c97eb041y7z\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/troubleshooting-windows-low-virtual-memory-problem", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/instance-high-load-problem/\">实例负载高问题</a></span>\n <span>如何处理Windows Server 2003/2008系统的ECS实例虚拟内存不足问题？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>如何处理Windows Server 2003/2008系统的ECS实例虚拟内存不足问题？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 15:56:20</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"073e88c087wob\"><p data-tag=\"shortdesc\" id=\"074b0be087zj0\" class=\"shortdesc\">本文介绍Windows Server 2003/2008系统的ECS实例虚拟内存不足导致的问题及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"ace3c000b54d1\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p data-spm-anchor-id=\"a2c9r.12641768.0.i9.1f225ZUD5ZUDvz\" id=\"074b32f3879yn\">一般而言，Windows Server 2003/2008系统的ECS实例缺少虚拟内存时会引起很多问题，包含但不限于如下现象：</p><ul id=\"074b32f487j51\"><li data-spm-anchor-id=\"a2c9r.12641768.0.i9.1f225ZUD5ZUDvz\" id=\"074b32f5872mh\"><p id=\"074b32f687tso\">操作系统运行缓慢，甚至出现宕机，远程桌面连接实例时出现蓝色背景界面。</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i9.1f225ZUD5ZUDvz\" id=\"074b32f787uh8\"><p id=\"074b5a0087ys2\">VNC连接实例时输入用户名、密码后，无法登录到操作系统，卡在<b data-tag=\"uicontrol\" id=\"59fdeb60b6340\" class=\"uicontrol\">欢迎</b>界面。</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i9.1f225ZUD5ZUDvz\" id=\"074b5a0187kc9\"><p id=\"074b5a0287yx5\">无法使用远程桌面连接实例，提示<b data-tag=\"uicontrol\" id=\"a7a80b00b6vgf\" class=\"uicontrol\">页面文件太小，无法完成操作</b>错误信息。</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i9.1f225ZUD5ZUDvz\" id=\"074b5a0387s2n\"><p id=\"074b5a0487k3o\">安装服务失败，例如安装IIS、.NET Framework、FTP提示<b data-tag=\"uicontrol\" id=\"b6a293a0b63wu\" class=\"uicontrol\">资源不足</b>，或者安装进程卡住。</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i9.1f225ZUD5ZUDvz\" id=\"074b5a0587h7c\"><p id=\"074b5a0687h84\">安装三方服务，例如MySQL服务安装失败，或者安装完毕后无法启动。</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i9.1f225ZUD5ZUDvz\" id=\"074b5a0787kdt\"><p id=\"074b5a08872uk\">Windows Update无法更新。</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i9.1f225ZUD5ZUDvz\" id=\"074b5a098759i\"><p id=\"074b5a0a87t41\">系统提示<b data-tag=\"uicontrol\" id=\"bc9910e0b6tp7\" class=\"uicontrol\">虚拟内存不足</b>错误信息，应用程序由于内存分配出现异常关闭的情况。</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i9.1f225ZUD5ZUDvz\" id=\"074b811087nqf\"><p id=\"074b811187a8s\">打开服务器管理器时，提示<b data-tag=\"uicontrol\" id=\"c6adf000b6y61\" class=\"uicontrol\">MMC在一个管理单元检测到错误，请卸载此管理单元</b>。</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i9.1f225ZUD5ZUDvz\" id=\"074b811287fs8\"><p id=\"074b811387zu7\">服务器管理器控制台打开后自动关闭，提示<b data-tag=\"uicontrol\" id=\"8b443530b60t0\" class=\"uicontrol\">Microsoft管理控制台已停止工作</b>。</p></li></ul><p id=\"074b811487f5f\">上述问题具体的报错图请参见<a title=\"\" class=\"xref\" href=\"#efe58730b58it\">常见虚拟内存不足问题现象</a>。</p></section><section id=\"b0407f90b5hoa\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p data-spm-anchor-id=\"a2c9r.12641768.0.i29.1f225ZUD5ZUDvz\" id=\"074bcf30875r9\">出现系统虚拟内存耗尽的可能有以下原因。</p><ul id=\"074bcf31873pm\"><li data-spm-anchor-id=\"a2c9r.12641768.0.i29.1f225ZUD5ZUDvz\" id=\"074bcf3287lfw\"><p id=\"074bcf3387765\">系统物理内存资源不足。</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i29.1f225ZUD5ZUDvz\" id=\"074bcf3487jd3\"><p id=\"074bcf3587rpj\">系统未配置Paging File（页面文件）或者页面文件配置较小。</p></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i29.1f225ZUD5ZUDvz\" id=\"074bcf3687lqq\"><p id=\"074bcf3787b2l\">系统存在内存泄露，即包含其他各类可能的核心资源泄露。 \n</p></li></ul><div id=\"6f176730b8emi\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"07bbe000b61pg\">在Windows操作系统中，内核以及应用程序是通过虚拟内存来进行内存管理和使用。由于物理内存是有限的资源，Windows引入了Paging File（页面文件）实现虚拟内存。以32位操作系统为例，每个进程有自己2 GiB专用的用户态虚拟地址空间。当现有的所有进程正在使用的内存超出了可用的物理内存时，操作系统将页（4 KiB）的一个或多个虚拟地址空间移动到计算机的硬盘，而后释放物理内存用于其他用途。在Windows系统中，这些被移动出物理内存的页（paged out）存储在一个或多个文件（Pagefile.sys页面文件）分区的根目录中。</p><p data-spm-anchor-id=\"a2c9r.12641768.0.i8.1f225ZUD5ZUDvz\" id=\"07bbe001b6fa7\">相比于Linux系统，Windows系统由于图形化界面操作相对容易而受到许多用户的青睐，在购买ECS实例时，需要至少1 GiB内存才能选择Windows系统，1 GiB内存对于系统运行来说是足够了，但是在配置环境、安装更多软件后就会出现内存不足的情况。</p></div></div></section><section id=\"e58c8070b6nn4\" class=\"section\"><h2 id=\"n49mj\">解决方案</h2><section id=\"f7691a60b6ldk\" class=\"section\"><h3 data-tag=\"h3\" id=\"074c1d5887sr1\" class=\"h3\"><b>步骤一：检查内存不足问题</b></h3><p id=\"074c1d5987vy7\">出现操作系统虚拟内存不足问题时，您可以通过检查系统日志或任务管理器查看。</p><section id=\"f37746c0b6f1g\" class=\"section\"><h4 data-tag=\"h4\" id=\"074c1d5a87xmw\" class=\"h4\"><b>方法一：检查系统日志</b></h4><ol id=\"074c1d5b87m39\"><li id=\"074c446087uqd\"><p id=\"074c446187ih0\">远程连接Windows Server 2003/2008系统的ECS实例。</p><p id=\"02de82a0b6jmc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"61be5760b65uq\"><p id=\"61be3050b60b9\">打开运行窗口，输入<b data-tag=\"uicontrol\" id=\"1e9a6cc0b64ah\" class=\"uicontrol\">eventvwr.exe</b>，单击<b data-tag=\"uicontrol\" id=\"1d250ad0b6xma\" class=\"uicontrol\">确定</b>。</p><img id=\"2661e400b6b08\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p573622.png\" alt=\"eventvwr\" placement=\"break\" class=\"image break\"></li><li id=\"169c1c21b6z48\"><p id=\"169c1c20b6s0v\">在<b data-tag=\"uicontrol\" id=\"35768450b6ken\" class=\"uicontrol\">事件查看器</b>页面，选择<b data-tag=\"uicontrol\" id=\"458b0870b6ojr\" class=\"uicontrol\">Windows日志&gt;系统</b>。</p></li><li id=\"480927d1b63vp\"><p id=\"480927d0b66e6\">在系统日志中找到<b data-tag=\"uicontrol\" id=\"5989e620b6ls2\" class=\"uicontrol\">事件2004，Resource-Exhaustion-Detector</b>的系统事件。 </p><img id=\"4eb03af0b6202\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p573631.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li><li id=\"074c446287dqz\"><p id=\"074c446387pax\">单击该事件，即可查看虚拟内存不足事件的具体信息。</p><p id=\"76c527d0b6o83\">具体信息如下所示，表示<b data-tag=\"uicontrol\" id=\"66bb7920b6cza\" class=\"uicontrol\">mysqld.exe</b>占用虚拟内存较多，</p></li></ol></section><section id=\"f083d050b6oz1\" class=\"section\"><h4 data-tag=\"h4\" id=\"074c446487joz\" class=\"h4\"><b>方法二：检查任务管理器</b></h4><ol id=\"f0ed20d0b6s2l\"><li id=\"f0ed20d1b6lzp\"><p id=\"f0ed20d2b6obh\">远程连接Windows Server 2003/2008系统的ECS实例。</p><p id=\"f0ed20d3b6ke9\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"fbecd521b65su\"><p id=\"fbecd520b6wmi\">右键单击任务栏，选择<b data-tag=\"uicontrol\" id=\"3a3dbe70b6cra\" class=\"uicontrol\">启动任务管理器(k)</b>。</p></li><li id=\"f1c5cd91b6nu0\"><p id=\"f1c5cd90b6jg7\">在<b data-tag=\"uicontrol\" id=\"b5517700b6sce\" class=\"uicontrol\">Windows 任务管理器</b>页面，单击<b data-tag=\"uicontrol\" id=\"b250e130b63o8\" class=\"uicontrol\">性能</b>，查看已提交内存与虚拟内存的比例。</p><p id=\"c485d450b646m\">如下图所示，提交(MB)=已提交虚拟内存/虚拟内存上限，即图中<b data-tag=\"uicontrol\" id=\"f811c860b6qd1\" class=\"uicontrol\">3790/4093</b>，已经超过<b data-tag=\"uicontrol\" id=\"faba0500b6pto\" class=\"uicontrol\">80%</b>，根据微软官方文档说明，系统内存不足，需要增加更多的内存。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519020.png\" class=\"image break\"></li></ol></section></section><section id=\"f9a80de0b62tk\" class=\"section\"><h3 data-tag=\"h3\" id=\"d000b6a0b6h7f\" class=\"h3\">步骤二：处理内存不足问题</h3><p id=\"074c6b7187ogg\">出现内存不足问题时，请尝试以下方案解决问题：</p><ul id=\"074c6b7287and\"><li id=\"074c6b7387ccu\"><p id=\"074c6b7487013\">方法一：由于默认系统没有配置Paging File，请您手动配置Paging File。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-configure-the-virtual-memory-of-a-windows-instance\">如何配置Windows系统的虚拟内存</a>。</p></li><li id=\"074c928087cu4\"><p id=\"074c928187ncz\">方法二：如果配置Paging File后，仍然出现内存不足情况，有以下2种可能。 \n</p><ul id=\"074c928287ig2\"><li id=\"074c928387ozx\"><p id=\"074c9284876uq\">应用程序对内存要求高，请升级实例规格，调高ECS的物理内存，同时相应的增加Paging file。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-of-instance-configuration-changes\">升降配方式概述</a>。</p></li><li id=\"074c928587fee\"><p id=\"074cb99087hea\">请排查请是否有内存泄露，具体操作，请参见如下微软官方博客的排查方法。 \n</p><ul id=\"074cb991879ln\"><li id=\"074cb992873ai\"><p id=\"074cb993875bk\"><a class=\"\" target=\"_blank\" href=\"https://learn.microsoft.com/en-us/archive/blogs/apgceps/47\">检查系统页面交换文件的使用</a></p></li><li id=\"074cb99487hdi\"><p id=\"074cb99587gyk\"><a class=\"\" target=\"_blank\" href=\"https://learn.microsoft.com/zh-cn/archive/blogs/apgceps/32\">内存问题排错概要 – 第一部分</a></p></li><li id=\"074ce0a0877b1\"><p id=\"074ce0a187yao\"><a class=\"\" target=\"_blank\" href=\"https://learn.microsoft.com/zh-cn/archive/blogs/apgceps/31\">内存问题排错概览 – 第二部分</a></p></li></ul></li></ul></li></ul></section></section><section id=\"efe58730b58it\" class=\"section\"><h2 id=\"8Yczx\">常见虚拟内存不足问题现象</h2><p id=\"074d07b087wl1\">虚拟内存不足引起的各类异常情况，如下所示。</p><ul id=\"074d07b187ich\"><li id=\"074d07b287s3j\"><p id=\"074d07b387rcr\">远程登录显示蓝屏。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519021.png\" class=\"image break\"></li><li id=\"074d07b48771i\"><p id=\"074d07b58790e\">远程登录提示页面文件太小。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519022.png\" class=\"image break\"></li><li id=\"074d07b6873tt\"><p id=\"074d07b787ewv\">控制台连接管理终端登录服务器卡在<b data-tag=\"uicontrol\" id=\"24cfe670b8j4w\" class=\"uicontrol\">欢迎</b>页面。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519023.png\" class=\"image break\"></p></li><li id=\"074d07b887sl0\"><p id=\"074d2ec087i5m\">安装IIS提示<b data-tag=\"uicontrol\" id=\"c3a44690b6c77\" class=\"uicontrol\">系统资源不足</b>。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519024.png\" class=\"image break\"></li><li id=\"074d2ec1879na\"><p id=\"074d2ec287cne\">安装.NET Framework、FTP时提示<b data-tag=\"uicontrol\" id=\"c60f7a30b6q9k\" class=\"uicontrol\">系统资源不足</b>。</p><img height=\"434\" width=\"640\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519025.png\" class=\"image break\"></li><li id=\"074d2ec38703w\"><p id=\"074d2ec487g0o\">Windows 2008一键安装MySQL安装包时错误以及安装完成后MySQL无法启动。 <img height=\"340\" width=\"635\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519026.png\" class=\"image break\"></p></li><li id=\"074d2ec5876bz\"><p id=\"074d2ec687cjh\">其他方法安装MySQL卡住。</p><img height=\"493\" width=\"660\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519027.png\" class=\"image break\"></li><li id=\"074d55d0878qf\"><p id=\"074d55d187anh\">安装WAMP后，启动wampmysqld服务时，提示<b data-tag=\"uicontrol\" id=\"e04bf040b60ch\" class=\"uicontrol\">在本地计算机无法启动wampmysqld服务</b>。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519028.png\" class=\"image break\"></li><li id=\"074d55d287s78\"><p id=\"074d55d387n5a\">添加角色时，提示<b data-tag=\"uicontrol\" id=\"ec39fc30b6mt9\" class=\"uicontrol\">页面文件太小，无法完成操作</b>。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519029.png\" class=\"image break\"></p></li><li id=\"074d55d487ig4\"><p id=\"074d55d587r6e\">打开<b data-tag=\"uicontrol\" id=\"8dd0a0e0b6g6u\" class=\"uicontrol\">服务器管理器</b>后自动关闭，提示<b data-tag=\"uicontrol\" id=\"eea58021b6yz7\" class=\"uicontrol\">Microsoft管理控制台已停止工作</b>。</p><img height=\"351\" width=\"558\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519030.png\" class=\"image break\"></li><li id=\"074d55d687xvz\"><p id=\"074d55d787g7d\">打开<b data-tag=\"uicontrol\" id=\"90916e90b69ti\" class=\"uicontrol\">服务器管理器</b>时，提示<b data-tag=\"uicontrol\" id=\"eea58022b6pla\" class=\"uicontrol\">MMC在一个管理单元检测到错误，请卸载此管理单元</b>。</p><img height=\"284\" width=\"573\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519031.png\" class=\"image break\"></li><li id=\"074d7ce087qdv\"><p id=\"074d7ce187n5e\">启动Tomcat时提示<b data-tag=\"uicontrol\" id=\"0f0a7dc0b6m31\" class=\"uicontrol\">Windows-虚拟内存不足</b>。</p><img height=\"151\" width=\"408\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519032.png\" class=\"image break\"></li><li id=\"074d7ce2875rn\"><p id=\"074d7ce387kir\">使用VNC远程连接实例时，提示“<b data-tag=\"uicontrol\" id=\"53e22750b6f62\" class=\"uicontrol\">您的系统虚拟内存不足</b>”错误信息。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519033.png\" class=\"image break\"></p></li><li id=\"074d7ce487ngb\"><p id=\"074d7ce587n33\">安装SQL Server 2008安装卡住。</p><img height=\"445\" width=\"592\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6176747761/p519034.png\" class=\"image break\"></li></ul></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-operating-system-issues/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span>Windows操作系统问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows操作系统问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 16:45:05</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/windows-system-prompt-can-not-find-how-to-deal-with-server-manager-lnk\">Windows系统提示找不到“Server Manager.lnk”如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/how-do-i-view-and-change-the-default-port-for-remote-desktop-on-a-windows-instance\">如何查看和修改Windows实例远程桌面的默认端口？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-windows-updates-cannot-be-installed-on-an-instance\">Windows Update补丁更新失败如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-instances-cannot-access-the-ad-domains-of-each-other-or-instances-cannot-be-added-to-the-same-ad-domain-at-the-same-time\">实例之间无法互相访问AD域或同时加入AD域怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-i-am-prompted-with-the-812-error-code-when-i-connect-to-a-vpn-from-a-windows-server-2008-instance\">Windows Server 2008连接VPN出现812错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-system-error-58-occurs-while-i-access-the-shared-directory-of-a-nas-file-system-on-a-windows-operating-system\">Windows系统挂载NAS共享目录时报错“发生系统错误 58”如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-interface-that-appears-on-your-logon-to-a-windows-instance-is-abnormal\">远程登录Windows系统后界面显示异常如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/windows-server-2008-r2-termdd-blue-hold-problems-how-to-deal-with\">Windows Server 2008 R2出现termdd蓝屏问题，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-a-large-number-of-small-files-in-a-windows-ntfs-file-system-cause-space-statistic-exceptions\">Windows NTFS文件系统中大量小文件导致空间统计异常如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-ip-address-of-a-windows-instance-is-unexpectedly-modified\">Windows系统的IP地址被异常修改如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-network-interfaces-are-missing-from-a-window-instance\">登录Windows实例内部发现网卡丢失如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/windows-instance-of-terminal-server-configuration-defect-in-can-t-remote-login\">Windows实例的终端服务器配置异常导致无法远程登录如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-windows-operating-system-of-an-instance-cannot-be-activated-because-the-file-type-of-slmgr-vbs-is-changed\">slmgr.vbs文件类型变化导致无法激活Windows系统如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-8000ffff-windows-update-encountered-an-unknown-error-error-message-appears-when-i-install-windows-updates-on-a-windows-server-2008-instance\">Windows 2008实例更新补丁出现“8000FFFFwindows update 遇到未知的错误”报错如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/there-was-a-0-update-or-install-windows-instance-role-x80073712-error-how-to-deal-with\">Windows实例更新或安装角色时出现“0x80073712（组件存储已损坏）”错误，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-environment-variables-that-are-configured-for-a-windows-server-instance-do-not-take-effect\">Windows Server配置环境变量不生效如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/server-manager-is-collecting-inventory-data-the-wizard-will-be-available-after-data-collection-finishes\">Windows实例在添加角色和功能时提示“服务器管理器正在收集清单数据。在数据收集完成后，将可以使用向导”，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-errors-are-reported-when-i-update-a-windows-operating-system\">更新Windows系统时提示错误，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-dotnet-framework-3-5-1-or-a-language-pack-cannot-be-installed-on-a-windows-instance\">Windows实例无法安装.NET Framework 3.5.1或语言包如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-a-service-cannot-be-manually-started-on-a-windows-instance\">Windows实例服务列表中无法手动启动服务，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-windows-operating-system-of-an-instance-cannot-be-activated-due-to-corrupted-instance-components\">Windows系统组件损坏导致系统激活失败如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/group-policy-opening-errors-caused-by-group-policy-file-configuration-exceptions\">Windows系统组策略文件配置异常导致组策略打开报错，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-a-message-similar-to-windows-explorer-is-stopped-is-displayed-when-i-use-a-self-managed-account-to-log-on-to-a-windows-instance\">使用自建账号登录Windows实例后提示“Windows资源管理器已停止工作”，如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-when-the-system-update-process-of-a-windows-instance-is-stuck-at-0\">Windows系统的ECS实例更新系统时，一直卡在0%该如何处理？</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/linux-operating-system/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span>Linux操作系统问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux操作系统问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-06 13:39:11</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/common-kernel-network-parameters-of-ecs-linux-instances-and-faq\">Linux系统常用内核网络参数介绍与常见问题处理</a></li>\n <li><a href=\"/zh/ecs/support/the-yum-command-fails-with-the-http-error-404-not-found-trying-other-mirror-prompt\">在Linux实例中执行yum命令失败，提示“HTTP Error 404 -Not Found Trying other mirror”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/error-unpacking-of-archive-failed-on-file-or-usr-or-bin-or-xxxx-cpio-open-failed-error-is-reported-during-yum-installation\">在Linux实例中执行yum命令失败，提示“error: unpacking of archive failed on file /usr/bin/xxxx: cpio: open Failed”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/how-do-i-fix-the-su-faild-to-execute-or-bin-or-bash-permission-denied-error-when-i-switch-users-by-running-the-su-command\">Linux实例使用su命令切换用户时，提示“su: failed to execute /bin/bash: Permission denied”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/linux-instance-that-executes-the-crontab-e-command-prompt-errors-in-crontab-file-can-t-install-error\">Linux实例中执行“crontab -e”命令时提示“errors in crontab file, can't install”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/when-you-run-the-ethtool-command-the-system-prompts-cannot-get-device-ring-settings-operation-not-supported\">在CentOS 6.5系统的ECS实例中，执行ethtool -g eth0命令，提示“Cannot get device ring settings: Operation not supported”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/in-linux-instance-apache-ab-pressure-test-the-prompt-apr-pollset-poll-the-timeout-specified-has-expired-error\">在Linux实例的Apache中进行ab压力测试时，提示“apr_pollset_poll: The timeout specified has expired”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/in-linux-when-accessing-the-or-tmp-directory-the-system-prompts-bash-cd-or-tmp-insufficient-permission\">Linux实例中访问/tmp目录提示“bash: cd: /tmp: 权限不够“错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/linux-system-of-ecs-instance-how-to-configure-the-crontab-timing-tasks-and-common-problems\">Linux系统的ECS实例中，如何配置crontab定时任务及常见问题</a></li>\n <li><a href=\"/zh/ecs/support/debian-8-system-of-ecs-example-execute-apt-get-the-update-command-prompt-404-not-found-error\">Debian 8系统的ECS实例中，执行“apt-get update”命令提示“404 Not Found”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/ubuntu-instances-of-ecs-perform-an-apt-get-the-update-command-prompt-no-pubkey-error\">Ubuntu系统的ECS实例中，执行apt-get update命令时提示“NO_PUBKEY”错误怎么办</a></li>\n <li><a href=\"/zh/ecs/support/linux-the-kernel-prompts-tcp-time-wait-bucket-table-overflow-error\">为什么Linux系统的ECS实例中出现大量“TCP: time wait bucket table overflow”错误？</a></li>\n <li><a href=\"/zh/ecs/support/linux-instances-of-ecs-the-average-user-to-use-the-su-command-switch-root-tip-su-authentication-failure-error\">Linux系统的ECS实例中，普通用户使用su命令切换root用户时提示“su: Authentication failure”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/initialize-the-cloud-disk-in-the-mount-centos-7-system-when-the-site-command-jam-phenomenon-how-to-deal-with\">初始化云盘时，在CentOS 7系统mount本地盘时出现命令卡住现象，如何处理？</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/remote-desktop-connection-issue/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span>远程桌面（RDP）连接问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>远程桌面（RDP）连接问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-20 11:13:08</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-your-credentials-don-t-work-appears-when-i-remotely-log-on-to-a-windows-instance\">远程登录Windows实例提示“您的凭据不工作”如何处理？</a></li>\n <li><a href=\"/zh/ecs/support/how-to-handle-an-authentication-error-when-connecting-to-a-windows-instance-remotely\">通过远程桌面连接Windows实例时出现“出现身份验证错误，要求的函数不受支持”如何解决?</a></li>\n <li><a href=\"/zh/ecs/support/the-error-message-no-remote-desktop-authorization-server-can-provide-a-license-is-prompted-for-remote-login-to-a-windows-instance\">通过远程桌面连接Windows实例提示“没有远程桌面授权服务器可以提供许可证”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-that-indicates-lack-of-terminal-server-user-access-permissions-appears-when-i-connect-to-a-windows-instance-by-using-remote-desktop\">通过远程桌面连接Windows实例提示“远程桌面用户组没有该权限”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/the-connection-was-denied-because-the-user-account-is-not-authorized-for-remote-login\">通过远程桌面连接Windows实例提示\"连接被拒绝，因为没有授权此用户账户进行远程登录\"错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/because-of-a-protocol-error-this-session-will-be-disconnected-please-try-connecting-to-the-remote-computer-again\">通过远程桌面连接Windows实例提示“由于协议错误，会话将被中断，请重新连接到远程计算机”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-no-remote-desktop-license-server-is-specified-appears-when-i-connect-to-a-windows-server-2008-r2-instance-by-using-remote-desktop\">通过远程桌面连接Windows Server 2008 R2系统的ECS实例时，提示“未指定远程桌面授权服务器”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/an-authentication-error-has-occurred-the-local-security-authority-cannot-be-contacted\">通过远程桌面连接Windows实例提示“发生身份验证错误，无法连接到本地安全机构”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-i-am-prompted-with-the-0x112f-error-code-when-i-connect-to-a-windows-instance-over-rdp\">通过远程桌面连接Windows实例出现报错代码“0x112f”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/remote-desktop-service-certification-due-to-remote-login-windows-instance-how-to-resolve-the-failure\">远程桌面服务认证到期导致远程登录Windows实例失败如何解决？</a></li>\n <li><a href=\"/zh/ecs/support/windows-server-2012-instances-of-ecs-system-can-t-allow-a-single-user-to-connect-multiple-remote-desktop-session\">Windows Server 2012系统的ECS实例无法允许单个用户连接多个远程桌面会话怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/after-installing-software-on-windows-instances-of-ecs-execute-the-command-from-the-command-line-tools-prompt-command-not-found-error\">在Windows系统的ECS实例上安装软件后，通过命令行工具执行命令时提示“command not found”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-allow-remote-assistance-connections-to-this-computer-option-in-remote-assistance-cannot-be-selected-for-an-instance-that-runs-windows-server-2008-or-2012\">Windows Server 2008与2012系统的ECS实例无法启用远程协助中的“允许远程协助连接这台计算机”选项怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/to-sign-in-remotely-you-need-the-right-to-sign-in-through-remote-desktop-services\">通过远程桌面连接Windows实例提示“要远程登录，你需要具有通过远程桌面服务进行登录的权限。”信息如何解决?</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-i-cannot-stay-connected-to-a-windows-instance-by-using-remote-desktop\">通过远程桌面连接Windows实例无法长时间保持连接如何解决？</a></li>\n <li><a href=\"/zh/ecs/support/winodws-via-remote-desktop-connection-system-of-ecs-instance-how-to-copy-and-paste-text-solve\">通过远程桌面连接Winodws系统的ECS实例时，无法进行文本复制粘贴如何解决？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-i-am-prompted-with-a-remote-desktop-disconnected-error-when-i-connect-to-a-windows-instance-by-using-remote-desktop\">通过远程桌面连接Windows系统的ECS实例时，提示“远程桌面连接已断开”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-i-can-log-on-to-a-windows-instance-by-using-vnc-but-cannot-use-remote-desktop-to-connect-to-the-windows-instance-with-the-same-account-and-password\">使用相同的账号和密码，通过VNC登录Windows实例成功，通过远程桌面连接Windows实例却失败怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/an-authentication-error-has-occurred-the-requested-security-package-does-not-exist\">通过远程桌面连接Windows系统的ECS实例提示“发生身份验证错误。要求的安全包不存在”错误怎么办?</a></li>\n <li><a href=\"/zh/ecs/support/windows-instance-of-rpc-component-abnormal-how-to-solve\">Windows实例的RPC组件异常如何解决？</a></li>\n <li><a href=\"/zh/ecs/support/there-is-a-problem-with-your-license-for-remote-desktop-and-the-session-will-end-in-60-minutes\">通过远程桌面连接Windows系统的ECS实例提示“你的远程桌面许可证出现问题，您的会话将在60分钟后断开连接。”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/windows-instance-via-remote-desktop-connection-prompt-remote-connection-need-computer-network-level-authentication\">通过远程桌面连接Windows实例提示“远程连接计算机需要网络级别身份验证”怎么办?</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-remote-desktop-cannot-verify-the-identity-of-the-remote-computer-appears-when-i-connect-to-a-window-instance-from-a-mac-device\">通过Mac系统的远程桌面连接Windows实例，提示“远程桌面连接无法验证您希望连接的计算机的身份”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-the-terminal-server-has-exceeded-the-maximum-number-of-allowed-connections-appears-when-i-connect-to-a-windows-instance-by-using-remote-desktop\">通过远程桌面连接Windows系统的ECS实例时，提示“终端服务器超出了最大允许连接数”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/windows-instance-via-remote-desktop-connection-failure-but-not-error-message\">通过远程桌面连接Windows实例失败但没有错误提示怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-the-system-cannot-find-the-file-specified-appears-when-i-connect-to-a-windows-instance-by-using-remote-desktop\">通过远程桌面连接Windows实例提示“系统找不到指定的文件”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/why-can-t-i-log-on-to-a-windows-instance-using\">为什么使用默认的端口（3389）无法登录Windows实例？</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/through-vnc-or-workbench-instance-remote-connection-problems", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span>通过VNC/Workbench远程连接实例的问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过VNC/Workbench远程连接实例的问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-11 10:10:18</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2288926\"><div data-tag=\"body\" class=\"body\"><section id=\"f4e62a90966uh\" class=\"section\"><h2 id=\"68d0687092bb7\">Workbench远程连接问题（Linux）</h2><div id=\"cd2ecb44197ox\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"da664720196a6\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>通过Workbench远程连接Linux实例时提示连接超时，怎么办？</b></h4><div id=\"cd2ecb42196ge\" data-tag=\"expandable-content\" class=\"expandable-content\"><h4 id=\"e7edb7c219d6z\"><b>问题现象</b></h4><p id=\"e7f001b01939y\">通过Workbench工具远程连接Linux实例时提示“登录主机：i-m5e****73a (47.*.*.157:3389) 失败，原因：链接超时！”错误。<img placement=\"break\" alt=\"远程连接失败\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8688515761/p554144.png\" id=\"e7edb7c4198ga\" class=\"image break\"></p><h4 id=\"e7edb7c519h56\"><b>问题原因</b></h4><p id=\"e7f001b119mqu\">该问题通常是由以下原因导致：</p><ul id=\"e7edb7c719srs\"><li id=\"e7edb7c819kwg\"><p id=\"e7f001b2199lq\">Linux实例的安全规则中，禁止了通过Workbench工具连接目标Linux实例。</p></li><li id=\"e7edb7ca1927g\"><p id=\"e7f001b3199pc\">SSH进程使用的默认端口不是22端口。</p></li><li id=\"e7edb7cc196bs\"><p id=\"e7f001b4193ph\">Linux实例内的防火墙设置未允许Workbench工具连接目标Linux实例。</p></li></ul><h4 id=\"e7edb7ce19qb3\"><b>解决方案</b></h4><p id=\"e7f001b519pcj\">请参考以下步骤进行排查：</p><ol id=\"e7edb7d0195jb\"><li id=\"e7edb7d119eem\"><p id=\"e7f001b619axm\">查看目标Linux实例的SSH进程配置的访问端口。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/configure-the-corresponding-security-group-policy-after-enabling-the-ssh-service-for-linux-instances#5c57c291demny\">检查SSH服务</a>。</p><ul id=\"e7edb7d3196j1\"><li id=\"e7edb7d419ykl\"><p id=\"e7f028c019eev\">不是22端口</p><p id=\"e7f028c119w06\">在Workbench工具中通过修改后的SSH端口重试远程连接。</p></li><li id=\"e7edb7d719qjg\"><p id=\"e7f028c219mag\">是22端口</p><p id=\"e7f028c319kvz\">请继续下一步检查。</p></li></ul></li><li id=\"e7edb7da198a2\"><p id=\"e7f028c4194z3\">查看目标Linux实例的安全组设置，检查SSH服务的端口是否放开。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/view-security-group-rules\">查询安全组规则</a>。</p><div type=\"note\" id=\"e7edb7dc19kaz\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"e7edb7dd19w7a\"><li id=\"e7edb7de19kn2\"><p id=\"e7f028c519f7o\">此处的端口范围以SSH默认的端口22为例。如果您修改过SSH默认端口，此处应当为您修改后的端口号。</p></li><li id=\"e7edb7e019ztl\"><p id=\"e7f028c619p7u\">授权对象如果不是0.0.0.0/0，则需要同时对您需要访问的ECS实例的IP地址进行授权，此处47.96.60.0/24和118.31.243.0/24为例。</p></li></ul></div></div><table id=\"e7edb7e219dw2\" tablewidth=\"708\" tablecolswidth=\"92 85 72 105 354\" class=\"table\"><colgroup colwidth=\"0.65*\" style=\"width:12.99%\"></colgroup><colgroup colwidth=\"0.6*\" style=\"width:12.01%\"></colgroup><colgroup colwidth=\"0.51*\" style=\"width:10.17%\"></colgroup><colgroup colwidth=\"0.74*\" style=\"width:14.83%\"></colgroup><colgroup colwidth=\"2.51*\" style=\"width:50.00%\"></colgroup><tbody class=\"tbody\"><tr id=\"e7edb7e319wtn\"><td id=\"e7edb7e419t3y\" rowspan=\"1\" colspan=\"1\"><p id=\"e7f028c719hid\">规则方向</p></td><td id=\"e7edb7e619760\" rowspan=\"1\" colspan=\"1\"><p id=\"e7f028c819ql3\">授权策略</p></td><td id=\"e7edb7e819xyd\" rowspan=\"1\" colspan=\"1\"><p id=\"e7f028c919qyx\">优先级</p></td><td id=\"e7edb7ea19gig\" rowspan=\"1\" colspan=\"1\"><p id=\"e7f028ca19s3q\">端口范围</p></td><td id=\"e7edb7ec19v8b\" rowspan=\"1\" colspan=\"1\"><p id=\"e7f028cb19l0t\">授权对象</p></td></tr><tr id=\"e7edb7ee19aau\"><td id=\"e7edb7ef19vbl\" rowspan=\"1\" colspan=\"1\"><p id=\"e7f028cc1966w\">入方向</p></td><td id=\"e7edb7f119qsv\" rowspan=\"1\" colspan=\"1\"><p id=\"e7f028cd1962z\">允许</p></td><td id=\"e7edb7f319mjm\" rowspan=\"1\" colspan=\"1\"><p id=\"e7f028ce19dm8\">1</p></td><td id=\"e7edb7f519uv2\" rowspan=\"1\" colspan=\"1\"><p id=\"e7f028cf195az\">目的：22/22</p></td><td id=\"e7edb7f7199zb\" rowspan=\"1\" colspan=\"1\"><ul id=\"e7edb7f8195bf\"><li id=\"e7edb7f919da7\"><p id=\"e7f028d019mx0\">源：47.96.60.0/24和118.31.243.0/24</p></li><li id=\"e7edb7fb19qvy\"><p id=\"e7f04fd019c4e\">源：0.0.0.0/0</p></li></ul></td></tr></tbody></table><ul id=\"e7edb7fd198lk\"><li id=\"e7edb7fe1934o\"><p id=\"e7f04fd119fjv\">未放开</p><p id=\"e7f04fd219ama\">请参见上述表格，添加允许Workbench访问的安全组规则。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Linux实例</a>。</p></li><li id=\"e7edb8011982u\"><p id=\"e7f04fd31910i\">已放开</p><p id=\"e7f04fd4195bp\">请继续下一步检查。</p></li></ul></li><li id=\"e7edb80419xkg\"><p id=\"e7f04fd519386\">检查Linux实例中是否开启防火墙，且不允许Workbench工具连接SSH端口。检查步骤如下：</p><ol id=\"e7edb80619f2u\"><li id=\"e7edb80719qxh\"><p id=\"e7f04fd619hru\">通过阿里云VNC方式登录Linux实例。具体操作请，参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"e7edb80919h8b\"><p id=\"e7f04fd7190kh\">检查防火墙状态。</p><ul id=\"e7edb80b19ds3\"><li id=\"e7edb80c19kj1\"><p id=\"e7f04fd819rc7\">已开启，请关闭防火墙，然后重新通过Workbench工具尝试远程连接。</p></li><li id=\"e7edb80e1939l\"><p id=\"e7f04fd919ssf\">未开启，请继续执行下一步排查。</p></li></ul></li><li id=\"e7edb81019imu\"><p id=\"e7f04fda19gz0\">如果您仍然无法通过Workbench工具远程连接，建议您选择阿里云VNC工具进行远程连接。</p></li></ol></li></ol></div></div><div id=\"f50c2d6419et2\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"f6ff23c019x1b\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>通过Workbench远程连接Linux实例失败时提示拒绝连接，怎么办？</b></h4><div id=\"f50c2d6219ibh\" data-tag=\"expandable-content\" class=\"expandable-content\"><h4 id=\"c9b1f4f296vg2\"><b>问题现象</b></h4><p id=\"0316629019emo\">通过Workbench远程连接Linux实例失败，提示“登录实例失败：DefaultConnectFuture[root@/xxx.xxx.xx.xxx:22]: Failed (AnnotatedConnectException) to execyte: Connection refused: /xxx.xxx.xx.xxx:22”的错误。<img id=\"70a10f30a14af\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0169415761/p554032.jpg\" alt=\"拒绝连接\" placement=\"break\" class=\"image break\"></p><h4 id=\"c9b1f4f496ryh\"><b>问题原因</b></h4><p id=\"031662911945o\">Linux实例未开启终端连接（SSH）或远程桌面（RDP）对应的远程服务。</p><h4 id=\"c9b1f4f696xhw\"><b>解决方案</b></h4><p id=\"03166292195wi\">请排查以下问题：</p><ul id=\"c9b1f4f896odk\"><li id=\"c9b1f4f996ad2\"><p id=\"031689a019zqc\">Linux实例是否开启了终端连接（SSH）或远程桌面（RDP）对应的远程服务。若未开启需开启对应的远程服务。</p></li><li id=\"c9b1f4fb96lqk\"><p id=\"031689a1193gc\">Linux实例是否开放了连接端口。若未开放，需开放对应的连接端口，终端连接（SSH）一般开放22端口，远程桌面（RDP）开放3389端口。</p></li></ul></div></div><div id=\"0c0c643419scu\" outputclass=\"collapse\" class=\"collapse\"><h4 data-spm-anchor-id=\"a2c4g.11186623.0.i1.42f466259Pf8z5\" id=\"119e052019y78\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>通过Workbench远程连接Linux实例提示用户名或密码不正确，怎么办？</b></h4><div id=\"0c0c6432193mv\" data-tag=\"expandable-content\" class=\"expandable-content\"><h4 id=\"d7da397296c8n\"><b>问题现象</b></h4><p id=\"1c843e00198t8\">通过Workbench工具远程连接Linux实例时提示“登录实例失败，原因：用户名或密码不正确”的错误。</p><h4 id=\"d7da3975962f0\"><b>问题原因</b></h4><p id=\"1c843e0119irn\">导致此问题的常见原因如下：</p><ul id=\"d9b180e1a1sus\"><li id=\"d7da397a96oze\"><p id=\"1c843e02193a4\">复制粘贴或手动输入了错误的账号或密码。</p></li><li id=\"d7da397c96y8a\"><p id=\"1c843e0319c73\">Linux实例的SSH配置不允许root用户登录。</p></li></ul><h4 id=\"d7da397e969j4\"><b>解决方案</b></h4><p id=\"1c843e0419tfy\">请参考以下步骤进行排查：</p><ol id=\"ab2a5742a1x5y\"><li id=\"ab2a5740a1pb4\"><p id=\"1c843e0519j0q\">如果确认您输入用户名和密码是正确的，可以通过重置实例密码的操作设置新密码，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/reset-the-logon-password-of-an-instance\">重置实例登录密码</a>。</p></li><li id=\"b6faf351a1k7i\"><p id=\"1c843e0619ksk\">如果确认您输入的root用户名和密码是正确的，则可能是SSH配置中未设置允许root用户登录。您可以通过以下任意一种方式进行处理：</p><ul id=\"77518971a1miy\"><li id=\"76b6a901a1l3h\"><p id=\"1c843e0719u4x\">使用非root用户登录。</p></li><li id=\"8342c9b0a1o6w\"><p id=\"1c843e0819co1\">通过阿里云VNC工具登录root用户。</p><p id=\"1c843e09196c5\">关于如何使用阿里云VNC工具的操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p><div type=\"note\" id=\"8342c9b3a1qrv\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"1c843e0a19jqd\">如果您希望以后都可以使用root用户登录SSH，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key#section-m1n-unh-gr1\">为Linux实例开启root用户远程登录</a>。</p></div></div></li></ul></li></ol></div></div></section><section id=\"f799836096lr6\" class=\"section\"><h2 id=\"b48e878096l85\">Workbench远程连接问题（Windows）</h2><div id=\"269d62e219dfw\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"301df14019rrr\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>通过Workbench远程连接Windows实例提示连接超时，怎么办？</b></h4><div id=\"269d62e019b2t\" data-tag=\"expandable-content\" class=\"expandable-content\"><h4 id=\"5b70164196avk\"><b>问题现象</b></h4><p id=\"2d795e201924h\">通过Workbench工具远程连接Windows实例时提示“登录主机：i-m5e****73a (47.*.*.157:3389) 失败，原因：链接超时！”错误。<img placement=\"break\" alt=\"链接超时\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8688515761/p554152.png\" id=\"84320780a1mmv\" class=\"image break\"></p><h4 id=\"d4f0ea1096yvr\"><b>问题原因</b></h4><p id=\"2d79853019mdj\">导致此问题的常见原因如下：</p><ul id=\"ee548c5296b3a\"><li id=\"ee548c5096yp8\"><p id=\"2d79ac4019dqz\">Windows实例的安全组设置不允许Workbench工具连接目标Windows实例。</p></li><li id=\"f3507cf196yrd\"><p id=\"2d79d35019mx5\">远程桌面RDP端口不是默认的3389端口。</p></li><li id=\"fac6e37196zvl\"><p id=\"2d79d351191sg\">Windows实例内的防火墙设置未允许Workbench工具连接目标Windows实例。</p></li><li id=\"03f5a85196rl8\"><p id=\"2d79d35219hny\">第三方安全管理软件限制用户远程登录。</p></li></ul><h4 id=\"0adf382096vtd\"><b>解决方案</b></h4><p id=\"2d79d35319owg\">请参考以下步骤进行排查：</p><ol id=\"1b309e3196bx9\"><li id=\"1b30772096yl9\"><p id=\"2d79d35419iab\">查看目标Windows实例的RDP端口。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/how-do-i-view-and-change-the-default-port-for-remote-desktop-on-a-windows-instance#75b88a50b3wl1\">查看ECS Windows远程桌面端口</a>。</p><ul id=\"4c0142d19650b\"><li id=\"4b51c8f196iwh\"><p id=\"2d79fa6019d3m\">不是3389端口</p><p id=\"2d79fa611992w\">在Workbench工具中通过修改后的RDP端口重试远程连接。</p></li><li id=\"547c963196lg6\"><p id=\"2d79fa6219o4r\">是3389端口</p><p id=\"2d79fa6319ebo\">请继续下一步检查。</p></li></ul></li><li id=\"4a2cf801962t9\"><p id=\"2d7a217019tsh\">查看目标Windows实例的安全组设置，检查SSH服务的端口是否放开。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/view-security-group-rules\">查询安全组规则</a>。</p><div id=\"a7399df096bsu\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"a9a594e096un4\"><li id=\"a9a594e196vmy\"><p id=\"2d7a217119eha\">此处的端口范围以RDP默认的端口3389为例。如果您修改过RDP默认端口，此处应当为您修改后的端口号。</p></li><li id=\"a9a594e3961z9\"><p id=\"2d7a2172192ni\">授权对象如果不是0.0.0.0/0，则需要同时对您需要访问的ECS实例的IP地址进行授权，此处47.96.60.0/24和118.31.243.0/24为例。</p></li></ul></div></div><table id=\"bbc5ee9096ci4\" tablewidth=\"707\" tablecolswidth=\"98 85 76 153 295\" class=\"table\"><colgroup colwidth=\"0.7*\" style=\"width:13.86%\"></colgroup><colgroup colwidth=\"0.6*\" style=\"width:12.02%\"></colgroup><colgroup colwidth=\"0.54*\" style=\"width:10.75%\"></colgroup><colgroup colwidth=\"1.09*\" style=\"width:21.64%\"></colgroup><colgroup colwidth=\"2.09*\" style=\"width:41.73%\"></colgroup><tbody class=\"tbody\"><tr id=\"bbc5ee9b965i2\"><td id=\"bbc5ee9296grm\" rowspan=\"1\" colspan=\"1\"><p id=\"2d7a217319asp\">规则方向</p></td><td id=\"bbc5ee94962d7\" rowspan=\"1\" colspan=\"1\"><p id=\"2d7a217419nk5\">授权策略</p></td><td id=\"bbc5ee9696li9\" rowspan=\"1\" colspan=\"1\"><p id=\"2d7a217519zp9\">优先级</p></td><td id=\"bbc5ee989628d\" rowspan=\"1\" colspan=\"1\"><p id=\"2d7a217619msy\">端口范围</p></td><td id=\"bbc5ee9a96bsd\" rowspan=\"1\" colspan=\"1\"><p id=\"2d7a217719f3n\">授权对象</p></td></tr><tr id=\"bbc615a696y5p\"><td id=\"bbc5ee9d960wc\" rowspan=\"1\" colspan=\"1\"><p id=\"2d7a217819bp2\">入方向</p></td><td id=\"bbc5ee9f96va0\" rowspan=\"1\" colspan=\"1\"><p id=\"2d7a217919yr1\">允许</p></td><td id=\"bbc615a196n0q\" rowspan=\"1\" colspan=\"1\"><p id=\"2d7a217a199bq\">1</p></td><td id=\"bbc615a396smj\" rowspan=\"1\" colspan=\"1\"><p id=\"2d7a488019h6z\">目的：3389/3389</p></td><td id=\"bbc615a596wkx\" rowspan=\"1\" colspan=\"1\"><ul id=\"fc87b0d296ax6\"><li id=\"fc87b0d096s0z\"><p id=\"2d7a488119bms\">源：47.96.60.0/24和118.31.243.0/24</p></li><li id=\"0088036196fxc\"><p id=\"2d7a488219ywm\">源：0.0.0.0/0</p></li></ul></td></tr></tbody></table><ul id=\"0cf9e55196s6u\"><li id=\"0af69b40964ub\"><p id=\"2d7a488319uau\">未放开</p><p id=\"2d7a488419kod\">请参见上述表格，添加允许Workbench访问的安全组规则。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"462eabd196pu1\"><p id=\"2d7a488519ocx\">已放开</p><p id=\"2d7a488619s9o\">请继续下一步检查。</p></li></ul></li><li id=\"0a049a2196ebu\"><p id=\"2d7a488719pyi\">检查Windows实例中是否开启防火墙，且不允许Workbench工具连接RDP端口。检查步骤如下：</p><ol id=\"b208afe196znc\"><li id=\"891b16419645e\"><p id=\"2d7a488819o3z\">通过阿里云VNC方式登录Windows实例。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"b366e05096og9\"><p id=\"2d7a488919k7n\">检查防火墙状态。</p><ul id=\"2ba8cdb196nwr\"><li id=\"2acb660196dgn\"><p id=\"2d7a6f9019t11\">已开启，请关闭防火墙，然后通过Workbench工具重试远程连接。</p></li><li id=\"87a31c41969y0\"><p id=\"2d7a6f9119w6n\">未开启，请继续下一步检查。</p></li></ul></li></ol></li><li id=\"33efa39196581\"><p id=\"2d7a6f92197ym\">检查Windows实例中是否安装第三方安全管理软件，例如安全狗等，并且通过该软件限制用户远程登录。</p><ul id=\"35901ab196sy7\"><li id=\"347d994196bkc\"><p id=\"2d7a6f9319dei\">第三方安全管理软件限制了远程登录</p><p id=\"2d7a6f9419lq6\">请暂时关闭第三方安全管理软件对远程登录的限制，然后通过Workbench工具尝试远程连接。</p></li><li id=\"3d8e9cf1966xq\"><p id=\"2d7a6f95194re\">未通过第三方安全管理软件限制远程登录</p><p id=\"2d7a6f9619qhw\">Windows实例中可能存在其他限制远程登录的系统设置，建议您选择阿里云VNC工具进行远程连接。具体操作。请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li></ul></li></ol><p id=\"2d7a6f9719kvu\"></p></div></div><div id=\"391a347419i3o\" outputclass=\"collapse\" class=\"collapse\"><h4 data-spm-anchor-id=\"a2c4g.11186623.0.i1.42f466259Pf8z5\" id=\"40268e801981y\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>通过Workbench远程连接Windows实例提示用户名或密码不正确，怎么办？</b></h4><div id=\"391a3472195ho\" data-tag=\"expandable-content\" class=\"expandable-content\"><h4 id=\"e39f039196qux\"><b>问题现象</b></h4><p id=\"3d1b234019nyk\">通过Workbench工具远程连接Windows实例时提示“登录实例失败，原因：用户名或密码不正确”错误。</p><h4 id=\"e39f039496wk0\"><b>问题原因</b></h4><p id=\"3d1b234119atm\">导致此问题的常见原因如下：</p><ul id=\"0dcf6d31a1ofa\"><li id=\"e39f039996lbr\"><p id=\"3d1b234219623\">复制粘贴或手动输入了错误的账号或密码。</p></li><li id=\"e39f039b96ft8\"><p id=\"3d1b234319qx6\">远程登录用户不属于Remote Desktop Users组。</p></li><li id=\"2730d5c196qfw\"><p id=\"3d1b4a5019xrc\">Windows实例的本地安全策略中被添加了拒绝用户远程登录的策略。</p></li></ul><h4 id=\"e39f039d96oq6\"><b>解决方案</b></h4><p id=\"3d1b4a51194xn\">请参考以下步骤进行排查：</p><ol id=\"539805c296m3l\"><li id=\"539805c096rj2\"><p id=\"3d1b4a521945b\">检查您输入的用户名是否为Administrator。</p><ul id=\"5d79c6f196nls\"><li id=\"5cee28c196m2e\"><p id=\"3d1b4a5319laz\">非Administrator用户</p><p id=\"3d1b4a5419e4s\">Windows系统中远程桌面RDP默认的用户名为Administrator，如果您未修改过该用户名称，请尝试通过该用户名进行远程登录。</p></li><li id=\"70c448c196kjp\"><p id=\"3d1b4a5519uhx\">是Administrator用户</p><p id=\"3d1b4a5619ky5\">请继续下一步检查。</p></li></ul></li><li id=\"5b91a60196l5p\"><p id=\"3d1b4a5719x9t\">请确认您在Workbench中输入了正确的用户名和密码。</p><ul id=\"8b7a349196mso\"><li id=\"89c6df4196x2s\"><p id=\"3d1b4a5819c4a\">输入错误</p><p id=\"3d1b4a5919txu\">手动输入用户名和密码时可能存在输入错误的情况，请检查您输入的用户名和密码，确认拼写正确。</p><div id=\"e44427c196kne\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3d1b4a5a1972a\">用户名Administrator拼写错误属于远程连接失败的常见原因之一。</p></div></div></li><li id=\"931d024196wmg\"><p id=\"3d1b4a5b19p3x\">忘记密码</p><p id=\"3d1b4a5c19bii\">请重置实例密码，然后使用新密码重新登录Windows实例。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/reset-the-logon-password-of-an-instance\">重置实例登录密码</a>。</p></li><li id=\"91375251968l1\"><p id=\"3d1b4a5d19ein\">用户名和密码正确</p><p id=\"3d1b4a5e19687\">请继续下一步检查。</p></li></ul></li><li id=\"885ffc41966kx\"><p id=\"3d1b4a5f194uc\">如果您曾经修改过Windows实例中的本地安全策略，请检查本地安全策略中是否添加了拒绝用户远程登录的策略。检查方法，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-that-indicates-lack-of-terminal-server-user-access-permissions-appears-when-i-connect-to-a-windows-instance-by-using-remote-desktop\">通过远程桌面连接Windows实例提示“远程桌面用户组没有该权限”错误怎么办？</a>中的<b>本地安全策略问题的解决方法</b>章节。</p><div id=\"2461773196uxk\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3d1b7160190e0\">请先通过阿里云VNC方式登录Windows实例，然后再进行检查。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></div></div><ul id=\"41b120b1965m0\"><li id=\"221675c1961aj\"><p id=\"3d1b716119jc7\">存在拒绝用户远程登录的策略</p><p id=\"3d1b7162196zu\">在本地安全策略中移除被拒绝远程桌面登录的用户，然后重试远程连接。</p></li><li id=\"4e5cb041965ed\"><p id=\"3d1b71631945h\">未修改过本地安全策略或者不存在拒绝用户远程登录的策略</p><p id=\"3d1b716419e5l\">请继续下一步检查。</p></li></ul></li><li id=\"1a3b32f19602w\"><p id=\"3d1b716519k6v\">如果您使用非Administrator用户进行远程连接，请检查该用户是否属于Remote Desktop Users组。检查方法请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-that-indicates-lack-of-terminal-server-user-access-permissions-appears-when-i-connect-to-a-windows-instance-by-using-remote-desktop\">通过远程桌面连接Windows实例提示“远程桌面用户组没有该权限”错误怎么办？</a>中的<b>普通用户未附加远程登录权限的解决方法</b>章节。</p><ul id=\"749c8f0196ao6\"><li id=\"73a44c51968cx\"><p id=\"3d1b71661916x\">不属于Remote Desktop Users组</p><p id=\"3d1b716719dg1\">将远程连接用户添加到Remote Desktop Users组，然后重试远程连接。</p></li><li id=\"f952b5d096z7t\"><p id=\"3d1b716819qf4\">属于Remote Desktop Users组</p><p id=\"3d1b716919cmo\">Windows实例中可能存在其他限制远程登录的系统设置，建议您选择阿里云VNC工具进行远程连接。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li></ul></li></ol></div></div></section><section id=\"705d692095lw1\" class=\"section\"><h2 id=\"0c0b5d60927hj\"><b>通过VNC远程连接问题</b></h2><div id=\"61c14f3419ct5\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"6662ead019eb6\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>连接到控制台VNC后出现黑屏，怎么办？</b></h4><div id=\"61c14f3219kqk\" data-tag=\"expandable-content\" class=\"expandable-content\"><p id=\"61c14f331933i\">连接到控制台VNC后出现黑屏，说明系统处于休眠状态。根据操作系统不同，执行不同的操作：</p><ul id=\"5d2892529669n\"><li id=\"5d289250960uo\"><p id=\"65046c4019us4\">如果是Linux实例，您可以按任意键激活该实例，进入登录界面。</p></li><li id=\"62abb4509632e\"><p id=\"65046c4119zqj\">如果是Windows实例出现持续黑屏，您可以在界面左上角单击<b>发送远程命令 &gt; CTRL+ALT+DELETE</b>，进入登录界面。</p></li></ul></div></div><div id=\"7981c8c419a6h\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"7c3a320019uqp\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>控制台VNC无法访问了，怎么办？</b></h4><div id=\"7981c8c219030\" data-tag=\"expandable-content\" class=\"expandable-content\"><p id=\"7ff39080194vj\">您可以通过浏览器进入控制台VNC界面排查问题。例如使用Chrome，在键盘上按F12键显示开发者工具，然后分析Console中显示的信息。</p></div></div><div id=\"837193b019h03\" outputclass=\"collapse\" class=\"collapse\"><h4 id=\"86eb9f4019k5u\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>使用IE8.0，为什么无法使用控制台VNC？</b></h4><div id=\"83716ca21961a\" data-tag=\"expandable-content\" class=\"expandable-content\"><p id=\"83716ca3193jx\">仅支持IE10及以上版本的IE浏览器中使用控制台VNC，请下载最新版本的IE浏览器。</p><p id=\"8a5704d019dji\">建议使用Chrome浏览器，阿里云的控制台对Chrome浏览器的兼容性更好。</p></div></div><div id=\"917f7264191qe\" outputclass=\"collapse\" class=\"collapse\"><h4 class=\"expandable-title sectiontitle title\" data-tag=\"expandable-title\" id=\"95457b10190by\" data-spm-anchor-id=\"a2c4g.11186623.0.i0.21ea559a9PIOje\"><b>使用Firefox浏览器打开控制台VNC会报错安全连接失败，怎么办？</b></h4><div id=\"917f726219sq0\" data-tag=\"expandable-content\" class=\"expandable-content\"><p id=\"917f726319uav\">可能您使用的Firefox版本没有共用的加密算法。</p><p id=\"9d07b7a019su2\">建议使用Chrome浏览器，阿里云的控制台对Chrome浏览器的兼容性更好。</p></div></div><div id=\"9f615f1419naa\" outputclass=\"collapse\" class=\"collapse\"><h4 class=\"expandable-title sectiontitle title\" data-tag=\"expandable-title\" id=\"a226e7b019wpo\" data-spm-anchor-id=\"a2c4g.11186623.0.i0.77cd559akA9Y5O\"><b>使用VNC登录Windows实例后出现两个光标，怎么办？</b></h4><div id=\"9f615f1219fbz\" data-tag=\"expandable-content\" class=\"expandable-content\"><p id=\"aa34d34019vsr\">如果您使用VNC登录Windows实例（实例规格族为g7、c7、r7）后出现两个光标，请按以下步骤修改鼠标相关设置：</p><ol id=\"9522726296xku\"><li id=\"9522726096cu3\"><p id=\"aa34d341198jw\">修改控制面板中的鼠标设置。</p><ol id=\"fdb8bd2196hbi\"><li id=\"fd152a2196pc8\"><p id=\"aa34d34219hfz\">打开控制面板，将查看方式切换为<b>小图标</b>，然后单击<b>鼠标</b>。<img placement=\"break\" alt=\"p267011\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3603493761/p551446.png\" id=\"0c7fd9b096wpi\" class=\"image break\"></p></li><li id=\"0f29c40196zyf\"><p id=\"aa34fa5019u2v\">在<b>鼠标属性</b>对话框中，单击<b>指针选项</b>页签，取消选中<b>提高指针精确度</b>，然后单击<b>确定</b>。<img placement=\"break\" alt=\"p267015\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3603493761/p551447.png\" id=\"2280f00096j4s\" class=\"image break\"></p></li></ol></li><li id=\"159e990196hps\"><p id=\"aa34fa51198ay\">修改注册表中的鼠标设置。</p><div id=\"32f1ec0196loc\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"aa34fa5219huo\">如果用户登录窗口未出现两个光标，则无需修改注册表配置，请跳过本步骤。</p></div></div><ol id=\"2e92b091965gs\"><li id=\"2d72738196gjx\"><p id=\"aa34fa5319pzm\">打开注册表编辑器。</p></li><li id=\"3df326f096q4y\"><p id=\"aa34fa5419x9z\">在左侧导航栏，单击<b>HKEY_USERS</b>，然后在顶部菜单栏选择<b>编辑 &gt; 查找</b>。<img placement=\"break\" alt=\"p267020\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3603493761/p551448.png\" id=\"54fafee0961uj\" class=\"image break\"></p></li><li id=\"45bdef0096cb6\"><p id=\"aa34fa55191n8\">搜索关键字MouseSpeed，然后单击<b>查找下一个</b>。<img placement=\"break\" alt=\"p267023\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3603493761/p551450.png\" id=\"67c469d09671c\" class=\"image break\"></p></li><li id=\"5c7eabd196agb\"><p id=\"aa34fa5619coz\">双击注册表项<b>MouseSpeed</b>，将<b>数值数据</b>修改为<b>0</b>，然后单击<b>确定</b>。<img placement=\"break\" alt=\"p267024\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3603493761/p551452.png\" id=\"769411e0961b3\" class=\"image break\"></p></li></ol></li><li id=\"fc8fcd8196j5y\"><p id=\"aa34fa5719oby\">重新使用VNC登录Windows实例。</p></li></ol></div></div></section><p id=\"1aad17a092bhz\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/alibaba-cloud-linux-issues/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span>Alibaba Cloud Linux问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-14 17:52:37</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"help-kb-list\">\n<ul class=\"kb-list-clearfix\">\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/what-do-i-do-if-the-integrity-unable-to-open-file-error-messages-appear-in-the-kernel-logs-of-an-alibaba-cloud-linux-2-instance\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统的ECS实例内核日志存在“integrity: Unable to open file”信息，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/what-do-i-do-if-the-buffer-i-or-o-write-performance-of-an-ext4-file-system-on-an-alibaba-cloud-linux-2-instance-is-not-as-expected\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统的ECS实例中ext4文件系统的Buffer I/O写性能不符合预期，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/what-do-i-do-if-the-tcp-congestion-control-algorithm-bbr-affects-network-performance-in-alibaba-cloud-linux\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统中TCP拥塞控制算法BBR对网络性能有影响，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/alibaba-cloud-linux-instances-of-ecs-to-remove-pod-2-system-how-to-deal-with\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统的ECS实例无法正常删除Pod，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/what-do-i-do-if-a-memory-leak-occurs-on-the-intel-sgx-driver-of-an-alibaba-cloud-linux-2-ecs-instance-in-specific-cases\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统的ECS实例中SGX驱动在特定情况下存在内存泄露问题，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/what-do-i-do-if-i-cannot-upgrade-the-kernel-of-an-alibaba-cloud-linux-2-ecs-instance\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统的ECS实例升级内核失败，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/what-do-i-do-if-the-return-value-of-the-send-q-parameter-is-0-after-the-ss-command-is-run-on-an-alibaba-cloud-linux-2-ecs-instance\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统的ECS实例执行ss命令时返回的Send-Q字段值为0，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/what-do-i-do-if-the-yum-commands-cannot-be-run-on-an-alibaba-cloud-linux-2-ecs-instance-that-resides-in-the-classic-network\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统的经典网络ECS实例无法执行yum命令，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/fix-the-cve-2021-22555-vulnerability-in-an-alibaba-cloud-linux-2-instance\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统的CVE-2021-22555安全漏洞内核热补丁修复方案</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/what-do-i-do-if-the-local-time-of-an-alibaba-cloud-linux-2-instance-falls-behind-the-time-of-the-ntp-server-after-i-start-or-restart-the-instance\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2镜像的ECS实例启动或重启后系统时间同步存在延迟，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/what-do-i-do-if-a-large-number-of-processes-cannot-be-created-on-an-alibaba-cloud-linux-2-ecs-instance\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统的ECS实例创建大量进程失败，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/what-do-i-do-if-i-cannot-query-or-configure-the-routing-information-of-an-alibaba-cloud-linux-2-instance\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux 2系统的ECS实例无法查询和配置路由信息，如何处理？</a></li>\n <li class=\"kb-list-item\"><a href=\"/zh/ecs/support/fix-the-cve-2021-33909-vulnerability-in-an-alibaba-cloud-linux-instance\"><span class=\"kb-list-circle\"></span>Alibaba Cloud Linux系统的CVE-2021-33909安全漏洞内核热补丁修复方案</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/unable-to-log-on-to-taobao-how-to-deal-with-on-ecs-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>在ECS实例上无法登录淘宝如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在ECS实例上无法登录淘宝如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-20 18:00:34</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main role=\"main\"><article role=\"article\" aria-labelledby=\"title_2qv_wl0_lf3\"><div class=\"body taskbody\" data-tag=\"taskbody\" id=\"taskbody-6ym-2aa-ea2\"><p id=\"shortdesc-dg2-o7u-4ei\" class=\"shortdesc\" data-tag=\"shortdesc\">本文介绍在ECS实例上无法登录淘宝的解决方案。</p><section class=\"section\" data-tag=\"section\" id=\"section-o62-2aa-033\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-ayy-4u2-l62\">问题一：无法登录淘宝网账号</h2><h3 class=\"p h3\" data-tag=\"p\" id=\"p-jw3-52j-8di\">问题描述</h3><p class=\"p\" data-tag=\"p\" id=\"p-y9a-h6e-zu2\">在ECS实例上通过浏览器登录淘宝网时出现提示如下信息，导致一直无法登录淘宝网账号：</p><ul class=\"ul\" data-tag=\"ul\" id=\"ul-jpm-3ju-e8w\"><li class=\"li\" data-tag=\"li\" id=\"li-oyf-7mo-wdp\">提示系统繁忙，输入多次验证码后依旧无法登录。</li><li class=\"li\" data-tag=\"li\" id=\"li-w2z-z2x-5nz\">提示需要检查是否使用了代理软件或VPN。</li></ul><h3 class=\"p h3\" data-tag=\"p\" id=\"p-vll-77n-wvm\">问题原因</h3><p class=\"p\" data-tag=\"p\" id=\"p-us2-v2c-v6h\">淘宝网对外部访问的一些API存在限制导致该问题。</p><h3 class=\"p h3\" data-tag=\"p\" id=\"p-eah-20i-93w\">解决方案</h3><p class=\"p\" data-tag=\"p\" id=\"p-r76-ahw-9q3\">建议您使用本地的电脑访问淘宝网。如果您需要使用服务端访问淘宝或淘宝开放平台API，建议您使用<a class=\"xref\" target=\"_blank\" href=\"https://cloud.tmall.com/productDetail.html?code=ecs\">聚石塔服务器</a>访问。</p></section><section class=\"section\" data-tag=\"section\" id=\"section-75h-48g-3sz\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-3ix-xu7-r07\">问题二：无法访问手机淘宝</h2><h3 class=\"p h3\" data-tag=\"p\" id=\"p-oav-dg9-ur5\">问题描述</h3><p class=\"p\" data-tag=\"p\" id=\"p-4ys-y0w-yui\">在ECS实例上，无法通过浏览器访问<a class=\"xref\" target=\"_blank\" href=\"https://m.taobao.com\">手机淘宝</a>。</p><h3 class=\"p h3\" data-tag=\"p\" id=\"p-9r7-5k8-vtv\">问题原因</h3><p class=\"p\" data-tag=\"p\" id=\"p-1l8-ka9-1er\"><a class=\"xref\" target=\"_blank\" href=\"https://m.taobao.com\">手机淘宝</a>主要提供给移动设备（例如手机）访问，移动设备上会有相应的安全策略，属于淘宝网对IP端的限制，因此，阿里云无法保证ECS实例（属于PC端）一定可以访问成功。</p><h3 class=\"p h3\" data-tag=\"p\" id=\"p-18h-h4y-d2k\">解决方案</h3><p class=\"p\" data-tag=\"p\" id=\"p-s8a-72y-bbt\">在ECS实例上尝试重新访问或使用移动设备（例如手机）访问<a class=\"xref\" target=\"_blank\" href=\"https://m.taobao.com\">手机淘宝</a>。</p></section></div></article></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/troubleshooting-guidelines-when-you-cannot-remotely-log-on-to-a-linux-instance-through-ssh", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span>无法连接Linux实例的排查方法</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>无法连接Linux实例的排查方法</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-11 10:07:33</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"33d5185087od9\"><p id=\"33e2fb00875g5\" data-tag=\"shortdesc\" class=\"shortdesc\">本文主要介绍无法远程登录Linux实例的排查方法。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"e545bf40878u6\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"33e2fb02873dn\">下图为SSH远程登录的关联因素示意图，由此可见，SSH远程登录失败的可能原因较多。如PAM安全框架、安全组、SSH配置等。请您根据实际情况，通过相应的排查方法，排查并解决无法远程连接Linux实例的问题。</p><ul id=\"0ce97f40a0og6\"><li id=\"0ce97f41a042k\"><p id=\"0ce97f42a0gbt\"><a title=\"\" class=\"xref\" href=\"#1c7d23708br9f\">快速登录Linux实例</a></p></li><li id=\"0ce97f43a0a5j\"><p id=\"0ce97f44a080q\"><a title=\"\" class=\"xref\" href=\"#e454ebd474yaj\">没有明确的报错信息</a></p></li><li id=\"0ce97f45a0go2\"><p id=\"0ce97f46a0ohb\"><a title=\"\" class=\"xref\" href=\"#0b2ba7509557s\">存在明确的报错信息</a></p></li></ul><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3443032761/p519293.png\" width=\"556\" height=\"341\" class=\"image break\"></section><section id=\"1c7d23708br9f\" class=\"section\"><h2 id=\"1c7d23718bbq8\"><b>快速登录Linux实例</b></h2><p id=\"5df5e06095nbt\">如果您遇到紧急情况，需要尽快登录<b>Linux</b>实例，请参见以下操作步骤，先检查ECS实例的状态，然后通过云助手向<b>Linux</b>实例发送命令或通过VNC登录实例，具体步骤如下：</p><section id=\"b4b9f5408bnrb\" class=\"section\"><h3 id=\"3512a0418bgdi\"><b>步骤一：检查ECS实例状态</b></h3><p id=\"5df5e06195wmi\">无论何种原因导致无法远程登录ECS实例，请先检查实例的状态。只有当ECS实例为<b>运行中</b>状态时，才能对外提供业务访问。检查步骤如下：</p><ol id=\"a580d2708beuj\"><li id=\"a580d2718bzof\"><p id=\"5df5e062953pb\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"a580d2738b5jj\"><p id=\"5df5e063950pm\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"c919dca9fasiz\" class=\"uicontrol\">实例与镜像 &gt; 实例</b>。</p></li><li class=\"li step stepexpand\" id=\"a580d2758bvyl\"><p id=\"5df5e0649599h\">在顶部菜单栏左上角处，选择地域。</p></li><li class=\"li step stepexpand\" id=\"a580d2778b2e7\"><p id=\"5df5e06595gtd\">在<b data-tag=\"uicontrol\" id=\"c91a03b3fajbo\" class=\"uicontrol\">实例列表</b>页面，单击目标实例ID，查看目标实例的<b data-tag=\"uicontrol\" id=\"c91a03b5famg7\" class=\"uicontrol\">状态</b>与<b data-tag=\"uicontrol\" id=\"c91a03b7fatkq\" class=\"uicontrol\">健康状况</b>，并选择合适的登录方式。</p><ul id=\"ee0f46a18bsmu\"><li id=\"ed71f5318bv9o\"><p id=\"5df5e0669554v\">如果ECS实例生命周期状态和实例健康状况为下表所示，您可以继续<a title=\"\" class=\"xref\" href=\"#8aefb950a0943\">步骤二：通过VNC登录ECS实例</a>操作。</p><table id=\"25bd6d208bz2h\" tablewidth=\"708\" tablecolswidth=\"202 304 202\" class=\"table\"><colgroup colwidth=\"0.86*\" style=\"width:28.53%\"></colgroup><colgroup colwidth=\"1.29*\" style=\"width:42.94%\"></colgroup><colgroup colwidth=\"0.86*\" style=\"width:28.53%\"></colgroup><tbody class=\"tbody\"><tr id=\"25bd6d218bzll\"><td id=\"25bd6d228bzly\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"5df5e067953rh\"><b>实例生命周期状态</b></p></td><td id=\"25bd6d248bja6\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"5df5e06895m31\"><b>实例健康状况</b></p></td><td id=\"25bd6d268b46f\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"5df5e06995fud\"><b>登录方式</b></p></td></tr><tr id=\"25bd6d288b7hm\"><td id=\"25bd6d298b2in\" rowspan=\"1\" colspan=\"1\"><p id=\"5df5e06a95k6w\">启动中（Starting）</p></td><td id=\"25bd6d2b8bn4p\" rowspan=\"1\" colspan=\"1\"><p id=\"5df5e06b95dt8\">初始化中（Initializing）</p></td><td id=\"25bd6d2d8blzb\" rowspan=\"1\" colspan=\"1\"><p id=\"5df5e06c9583a\">VNC</p></td></tr><tr id=\"25bd6d2f8bpaa\"><td id=\"25bd6d308bt9k\" rowspan=\"2\" colspan=\"1\"><p id=\"5df5e06d95wl4\">运行中（Running）</p></td><td id=\"25bd6d328bq9u\" rowspan=\"1\" colspan=\"1\"><p id=\"5df5e06e95u54\">初始化中（Initializing）</p></td><td id=\"25bd6d348b6bh\" rowspan=\"1\" colspan=\"1\"><p id=\"5df6077095dm4\">VNC</p></td></tr><tr id=\"25bd6d368bnip\"><td id=\"25bd6d398bkg5\" rowspan=\"1\" colspan=\"1\"><p id=\"5df607739514m\">无异常（OK）/操作系统运行存在异常（Impaired）</p></td><td id=\"25bd6d3b8bj8c\" rowspan=\"1\" colspan=\"1\"><p id=\"5df6077495dxf\">VNC和Workbench</p></td></tr><tr id=\"25bd6d3d8b7y8\"><td id=\"25bd6d3e8bfkq\" rowspan=\"1\" colspan=\"1\"><p id=\"5df6077595y8v\">关机中（Stopping）</p></td><td id=\"25bd6d408bcnc\" rowspan=\"1\" colspan=\"1\"><p id=\"5df6077695zbx\">数据不足（InsufficientData）</p></td><td id=\"25bd6d428bvb7\" rowspan=\"1\" colspan=\"1\"><p id=\"5df607779513x\">VNC</p></td></tr><tr id=\"25bd6d448blgn\"><td id=\"25bd6d458b1ts\" rowspan=\"1\" colspan=\"1\"><p id=\"5df6077895ysb\">已关机（Stopped）</p></td><td id=\"25bd6d478bnie\" rowspan=\"1\" colspan=\"1\"><p id=\"5df6077995wr8\">InsufficientData</p></td><td id=\"25bd6d498b2lv\" rowspan=\"1\" colspan=\"1\"><p id=\"5df6077a95o8y\">无法登录</p></td></tr></tbody></table></li><li id=\"176bceb18bq44\"><p id=\"5df6077b95nlj\">ECS实例生命周期状态为除上表所示的其他状态时，您可以根据实例的状态，选择对应的解决方案。</p><p id=\"5df6077c95xmz\">更多ECS实例生命周期状态，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/instance-lifecycle\">实例的生命周期</a>。</p></li></ul></li></ol></section><section id=\"8aefb950a0943\" class=\"section\"><h3 id=\"8059c350a055f\"><b>步骤二：通过VNC登录ECS实例</b></h3><p id=\"8059c351a051n\">如果云助手无法使用或者无法满足您的使用需求，您还可以通过阿里云VNC工具进行远程登录，使用方法如下：</p><ol id=\"8059c352a0hne\"><li id=\"8059c353a08gb\"><p id=\"8059c354a0eji\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"8059c355a0npm\"><p id=\"8059c356a04ub\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"c91b8a55faiw1\" class=\"uicontrol\">实例与镜像 &gt; 实例</b>。</p></li><li class=\"li step stepexpand\" id=\"8059c357a0yml\"><p id=\"8059c358a0ypa\">在顶部菜单栏左上角处，选择地域。</p></li><li class=\"li step stepexpand\" id=\"8059c359a09cm\"><p id=\"8059c35aa07q4\">在<b data-tag=\"uicontrol\" id=\"c91b8a5bfan2s\" class=\"uicontrol\">实例列表</b>页面，找到需要连接的实例，单击该实例对应<b data-tag=\"uicontrol\" id=\"c91b8a5dfabm0\" class=\"uicontrol\">操作</b>列下的<b data-tag=\"uicontrol\" id=\"c91b8a5ffaf85\" class=\"uicontrol\">远程连接</b>。</p></li><li id=\"8059c35ba0q5v\"><p id=\"8059c35ca09cq\">在弹出的<b id=\"0cf794b01412v\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">远程连接</b>对话框中，单击<b id=\"ecs.rc.remote.connection-collapse-expend\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">展开其他登录方式</b>，然后单击<b id=\"ecs.rc.remote.connection-vnc-title\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">通过VNC远程连接</b>对应的<b id=\"ecs.rc.remote.connection-action-login\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">立即登录</b>。</p></li><li id=\"8059c35fa0vzu\"><p id=\"8059c360a06l4\">登录实例操作系统。</p><ol id=\"36c165711b5k4\"><li id=\"d2f7dd1014jf5\"><p id=\"35aa29101bge8\">输入登录用户（例如root、ecs-user），然后按<code data-tag=\"code\" class=\"code\">Enter</code>键。</p></li><li id=\"d4f8680114uzj\"><p id=\"35aa29111bq2w\">输入实例登录密码，然后按<code data-tag=\"code\" class=\"code\">Enter</code>键。</p><div type=\"note\" id=\"3c35ba601bv36\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3c81b7801bhce\">登录Linux实例时界面不会显示密码的输入过程。</p></div></div></li></ol></li></ol></section><section id=\"d09e6ea08b8s2\" class=\"section\"><h3 id=\"4a010e118bmsa\"><b>步骤三：通过云助手向Linux实例发送命令</b></h3><p id=\"5df6077d95wbr\">您可以尝试通过阿里云云助手向Linux实例发送命令，云助手的使用步骤如下：</p><ol id=\"87054bc08bay7\"><li id=\"87054bc18bgu6\"><p id=\"5df6077e95f1s\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"87054bc38b6zd\"><p id=\"5df6077f9511f\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"c91bd873fawkh\" class=\"uicontrol\">实例与镜像 &gt; 实例</b>。</p></li><li class=\"li step stepexpand\" id=\"a4e96d138b0a4\"><p id=\"5df62e8095nbk\">在顶部菜单栏左上角处，选择地域。</p></li><li class=\"li step stepexpand\" id=\"bb0e5f118b2fl\" props=\"china\" data-cond-props=\"china\"><p id=\"5df62e8195dif\">在<b data-tag=\"uicontrol\" id=\"c91bd879fa1dq\" class=\"uicontrol\">实例列表</b>页面，找到待操作的实例，在<b data-tag=\"uicontrol\" id=\"c91bd87bfa0nf\" class=\"uicontrol\">操作</b>中，选择<img placement=\"inline\" alt=\"image\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0881493761/p551505.png\" id=\"079ad2d096kev\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"c91bd87efa2b3\" class=\"uicontrol\"> &gt; 远程连接 &gt; 发送命令</b>。</p></li><li id=\"d32d45801bmfs\"><p id=\"d32d1e701btxd\">输入您需要执行的命令，单击<b data-tag=\"uicontrol\" id=\"d664a2c01bk96\" class=\"uicontrol\">执行</b>，即可在未登录Linux实例的情况下执行命令。</p><p id=\"5df655909540u\">更多有关云助手的信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-10\">云助手概述</a>。</p><img placement=\"break\" alt=\"发送命令\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0881493761/p551513.png\" id=\"a68dbdd0960j9\" class=\"image break\"></li></ol></section></section><section id=\"e454ebd474yaj\" class=\"section website-filter\" data-website=\"cn\"><h2 id=\"e455d638741lc\" data-tag=\"h3\" class=\"h3\"><b>没有明确的报错信息</b></h2><p id=\"d3b11721959dr\">在远程连接失败时，如果您没有收到系统返回的报错信息，并且ECS实例是<b data-tag=\"uicontrol\" id=\"4f50e7701bma2\" class=\"uicontrol\">运行中</b>状态，然后再根据以下步骤进行排查：</p><section id=\"c5e469b095uvb\" class=\"section\"><h3 id=\"c5e469b195jm1\" data-tag=\"h5\" class=\"h5\"><b>步骤一：使用阿里云Workbench工具测试远程登录</b></h3><p id=\"c5e469b295g0u\">通过阿里云提供的Workbench工具进行远程登录，Workbench工具在远程登录出现异常时会返回具体的错误信息及解决方案。测试步骤如下：</p><ol id=\"c5e469b395mc0\"><li id=\"c5e469b495njr\"><p id=\"c5e469b595ffm\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"c5e469b695gj4\"><p id=\"c5e469b795hb0\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"c91c2693fags6\" class=\"uicontrol\">实例与镜像 &gt; 实例</b>。</p></li><li class=\"li step stepexpand\" id=\"c5e469b895vtc\"><p id=\"c5e469b995zyf\">在顶部菜单栏左上角处，选择地域。</p></li><li class=\"li step stepexpand\" id=\"c5e469ba95jeg\"><p id=\"c5e469bb95rf1\">在<b data-tag=\"uicontrol\" id=\"c91c2699fas1j\" class=\"uicontrol\">实例列表</b>页面，找到需要连接的实例，单击该实例对应<b data-tag=\"uicontrol\" id=\"c91c269bfa23v\" class=\"uicontrol\">操作</b>列下的<b data-tag=\"uicontrol\" id=\"c91c269dfaz1c\" class=\"uicontrol\">远程连接</b>。</p></li><li id=\"c5e469bc95ald\"><p id=\"c5e469bd95soi\">在弹出的<b data-tag=\"uicontrol\" id=\"c91c26a1fajo0\" class=\"uicontrol\">连接与命令</b>对话框中，单击<b data-tag=\"uicontrol\" id=\"c91c4da0faklm\" class=\"uicontrol\">通过Workbench远程连接</b>对应的<b data-tag=\"uicontrol\" id=\"c91c4da2fa9pe\" class=\"uicontrol\">立即登录</b>。 </p></li><li id=\"c5e469cc95n05\"><p id=\"c5e469cd95sq7\">测试是否可以远程登录。</p><p id=\"f34c2cd01c4px\">Workbench工具将自动填充登录目标实例所需的基本信息，请确认基本信息的正确性并输入登录的用户名和认证信息。并根据以下结果进行处理：通过Workbench远程登录Linux实例的具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password-or-key\">通过Workbench远程登录Linux实例</a>。</p><ul id=\"c5e469ce95s24\"><li id=\"c5e469cf954mk\"><p id=\"c5e469d095orr\">如仍然无法登录，Workbench工具会返回错误提示和解决方案，请根据系统提示进行处理。处理完毕后重新使用Workbench工具进行远程登录测试。为了便于您解决问题，列举Workbench工具使用时常见的异常问题： <a title=\"\" class=\"xref\" href=\"/zh/ecs/support/through-vnc-or-workbench-instance-remote-connection-problems#f4e62a90966uh\">Workbench远程连接问题（Linux）</a></p></li><li id=\"c5e469d695j6w\"><p id=\"c5e469d795mh9\">如可以通过Workbench工具正常登录，说明目标实例上的SSH服务正常运行，即排除SSH服务端异常的可能性，继续执行<a title=\"\" class=\"xref\" href=\"#6f9ed9a095f25\">步骤二：检查网络</a>进行排查。</p></li></ul></li></ol></section><section id=\"6f9ed9a095f25\" class=\"section\"><h3 id=\"5edcd77095ni7\"><b>步骤二：检查网络</b></h3><p id=\"9a0ea67395d2t\">无法正常远程连接Linux实例时，需要先检查网络是否正常。</p><ol id=\"232233f0950jf\" data-spm-anchor-id=\"a2c4g.11186623.0.i55.3e8d69b0QFmYp6\"><li id=\"2322821195qu6\" data-spm-anchor-id=\"a2c4g.11186623.0.i50.3e8d69b0QFmYp6\"><p id=\"2322821095mkh\">用其他网络环境中，不同网段或不同运营商的电脑连接对比测试，判断是本地网络问题还是服务器端的问题。</p><ul id=\"26a69fc195ijo\"><li id=\"268f202095ifv\"><p id=\"268ef91095x1e\">如果是本地网络问题或运营商问题，请联系本地IT人员或运营商解决。</p></li><li id=\"297cca3195epc\"><p id=\"297cca3095pqm\">如果是网卡驱动存在异常，请重新安装。</p></li></ul></li><li id=\"2322a92995t5w\" data-spm-anchor-id=\"\"><p id=\"23228212959x0\">在本地客户端使用ping命令测试与实例的网络连通性。</p><ul id=\"2322a92895io1\" data-spm-anchor-id=\"a2c4g.11186623.0.i53.3e8d69b0QFmYp6\"><li id=\"2322a92195pev\" data-spm-anchor-id=\"\"><p id=\"2322a92095te7\">网络异常时，请进行抓取数据包进行分析，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-capture-data-packets-when-a-network-exception-occurs\">网络异常时如何抓取数据包</a>。</p></li><li id=\"2322a92395dei\" data-spm-anchor-id=\"\"><p id=\"2322a922951kq\">当出现ping丢包或ping不通时，可以通过<code data-tag=\"code\" class=\"code\">tracert</code>或<code data-tag=\"code\" class=\"code\">mtr</code>等工具进行链路测试来判断问题根源。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-the-ping-command-packet-loss-or-not-the-link-test-method\">使用ping命令丢包或不通时的链路测试方法</a>。</p></li><li id=\"2322a92595knb\" data-spm-anchor-id=\"\"><p id=\"2322a92495dex\">如果出现间歇性丢包，ECS实例的网络一直处于不稳定状态时，可能是病毒导致。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-the-ping-command-to-test-intermittent-packet-loss-of-the-ip-address-of-an-ecs-instance\">使用ping命令测试ECS实例的IP地址间歇性丢包</a></p></li><li id=\"2322a92795bkk\" data-spm-anchor-id=\"a2c4g.11186623.0.i52.3e8d69b0QFmYp6\"><p id=\"2322a92695vhv\">系统内核没有禁ping的情况下，使用ping命令测试ECS服务器，发现网络不通，可能是服务器系统内部防火墙对客户端进行了drop策略。</p><p id=\"b3cc8bc095o6s\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/solution-to-linux-ecs-instances-that-do-not-allow-ping-but-cannot-ping\">Linux系统的ECS中没有禁ping却ping不通的解决方法</a>。</p></li></ul></li></ol></section><section id=\"edeb253086lj3\" class=\"section\"><h3 id=\"e456245374wyu\" data-tag=\"h4\" class=\"h4\"><b>步骤三：检查端口和安全组</b></h3><p id=\"a43572c096non\">检查安全组配置是否允许远程连接的端口。</p><ol id=\"ada6b70186kz9\"><li id=\"abf0c9a086xva\"><p id=\"d06be3e096yc7\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"dae1f5d196620\"><p id=\"dae1f5d096nfy\">在顶部菜单栏左上角处，选择地域。</p></li><li id=\"e456245a746eb\" data-spm-anchor-id=\"a2c9r.14518950.0.i1.310f5e3bFdBaav\"><p id=\"0792129495c85\">在<b data-tag=\"uicontrol\" id=\"c91cc2d5fanl3\" class=\"uicontrol\">实例列表</b>页面，单击对应的实例ID。</p></li><li id=\"e456245c741ul\" data-spm-anchor-id=\"a2c9r.14518950.0.i1.310f5e3bFdBaav\"><p id=\"0792129595t6s\">单击<b data-tag=\"uicontrol\" id=\"c91cc2d9facqo\" class=\"uicontrol\">安全组</b>页签，在<b data-tag=\"uicontrol\" id=\"c91cc2dbfaib9\" class=\"uicontrol\">安全组列表</b>区域，单击<b data-tag=\"uicontrol\" id=\"c91ce9e1fahhz\" class=\"uicontrol\">操作</b>列的<b data-tag=\"uicontrol\" id=\"3fec20c01bj97\" class=\"uicontrol\"><span data-tag=\"ph\" id=\"51a665a01b03c\" props=\"china\" data-cond-props=\"china\" class=\"ph\">管理规则</span></b><span data-tag=\"ph\" id=\"4810efb01bc5w\" class=\"ph\"></span>。 </p></li><li id=\"e456245e74lek\"><p id=\"0792129795rn8\">选择安全组规则方向。</p></li><li id=\"e456246074tue\"><p id=\"0792129895a1h\">在<b data-tag=\"uicontrol\" id=\"c91d10f7fayyv\" class=\"uicontrol\">安全组规则</b>页面，您可以选择以下任意一种方式添加安全组规则，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。 \n</p><ul id=\"e4562462742xj\"><li id=\"e456246374cnh\"><p id=\"0792129995xhp\">方式一：快速添加安全组规则 \n</p><ul id=\"e4564b6174xv8\"><li id=\"e4564b6274rw4\"><p id=\"0792129a95ni5\"><b data-tag=\"uicontrol\" id=\"c91d1100fanui\" class=\"uicontrol\">授权策略</b><b>：</b>允许</p></li><li id=\"e4564b647412i\"><p id=\"0792129b958im\"><b data-tag=\"uicontrol\" id=\"c91d1105fa3z6\" class=\"uicontrol\">端口范围</b><b>：</b>SSH（22）</p></li><li id=\"e4564b6674uj3\"><p id=\"0792129c9504t\"><b data-tag=\"uicontrol\" id=\"c91d3803fa3dd\" class=\"uicontrol\">授权对象</b><b>：</b>0.0.0.0/0（代表所有IP访问）</p></li></ul></li><li id=\"e4564b69749ol\"><p id=\"0792129d95c3g\">方式二：手动添加安全组规则 \n</p><ul id=\"e4564b6b749io\"><li id=\"e4564b6c74zy0\"><p id=\"0792129e95wvx\"><b data-tag=\"uicontrol\" id=\"c91d380bfavy6\" class=\"uicontrol\">授权策略</b><b>：</b>允许</p></li><li id=\"e4564b6e749b6\"><p id=\"0792129f95fl4\"><b data-tag=\"uicontrol\" id=\"c91d3810fahnx\" class=\"uicontrol\">优先级</b><b>：</b>1（代表安全规则中优先级最高，数字越小优先级越高）</p></li><li id=\"e4564b7074hcv\"><p id=\"079212a095u53\"><b data-tag=\"uicontrol\" id=\"c91d3815fa0hm\" class=\"uicontrol\">协议类型</b><b>：</b>自定义（TCP）</p></li><li id=\"e4564b7274fr6\"><p id=\"079212a195dmw\"><b data-tag=\"uicontrol\" id=\"c91d5f10fa5kl\" class=\"uicontrol\">端口范围</b><b>：</b>SSH（22）</p></li><li id=\"e4564b7474mcr\" data-spm-anchor-id=\"a2c9r.14518950.0.i5.673aiQGniQGnTN\"><p id=\"079239a095kxn\"><b data-tag=\"uicontrol\" id=\"c91d5f15faswu\" class=\"uicontrol\">授权对象</b><b>：</b>0.0.0.0/0（代表所有IP访问，也可根据需要，自定义设置授权对象）</p></li></ul></li></ul></li><li id=\"e456727574qt7\"><p id=\"079239a395g5x\">使用以下命令，进行端口测试，判断端口是否正常。</p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"e43b224174cxd\" class=\"pre codeblock language-javascript\"><code>telnet [$IP] [$Port]</code></pre><div id=\"e4567277748k2\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><section id=\"e4567278742od\" class=\"section\"><ul id=\"e456727a74sk9\"><li id=\"e456727b74o6z\"><p id=\"079239a495x97\">[$IP]指Linux实例的IP地址。</p></li><li id=\"e456727d74ihf\"><p id=\"079239a5957du\">[$Port]指Linux实例的RDP端口号。</p></li></ul></section></div></div><p id=\"079239a695kyy\">系统显示类似如下，比如执行<code data-tag=\"code\" class=\"code\">telnet 192.168.0.1 22</code>命令，正常情况下返回结果类似如下。 </p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"e43b224274brz\" class=\"pre codeblock language-javascript\"><code>Trying 192.168.0.1 ...\nConnected to 192.168.0.1.\nEscape character is '^]'</code></pre><p id=\"079239a795ewp\">如果端口测试失败，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/troubleshooting-for-ping-attempts-to-pass-the-server-and-port-disconnection\">使用ping命令正常但端口不通时的端口可用性探测说明</a>进行排查。 </p></li></ol></section><section id=\"c5e780f0862e5\" class=\"section\"><h3 id=\"0afba9c095ti7\" data-tag=\"h4\" class=\"h4\"><b>步骤四：检查CPU负载、带宽及内存使用情况</b></h3><p id=\"0c33185095uol\">无法正常远程连接Linux实例时，可能是因为CPU负载、带宽不足或内存不足导致。</p><ol id=\"e456e7a4740vv\"><li id=\"e456e7a574j7f\"><p id=\"08e6374195d53\">根据是否存在CPU负载过高情况，选择相应操作。</p><ul id=\"c507e3a186j4p\"><li id=\"c3f932c086wmp\"><p id=\"23d2154095kpp\">存在CPU负载过高情况。</p><p id=\"3c562cf0959bf\">若应用程序有大量的磁盘访问、网络访问行为、高计算需求，CPU负载过高是正常结果。建议您升配实例规格来解决资源瓶颈问题，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-of-instance-configuration-changes\">升降配方式概述</a>。</p><div id=\"668e0bc095mn1\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"5e6a755095zge\">CPU负载过高的解决方法，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/query-and-case-analysis-linux-cpu-load\">Linux系统CPU负载的查询和案例分析</a>。</p></div></div></li><li id=\"61051d6095bmq\"><p id=\"4653504095gqk\">不存在CPU负载过高情况，请继续下一步排查。</p></li></ul></li><li id=\"e456e7b174waj\" data-spm-anchor-id=\"a2c9r.12641779.0.i1.40d8kG22kG22UK\"><p id=\"08e6374795w9z\">排查是否存在公网带宽不足问题。 </p><p id=\"08e6374895e36\">无法远程连接可能是公网带宽不足导致的，具体排查方法如下。</p><ol id=\"e4570eb0749p5\" start=\"1\"><li id=\"e4575cd0740cd\"><p id=\"08e6374995mj2\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"abed14c386o4t\"><p id=\"08e6374a955g7\">在顶部菜单栏左上角处，选择地域。</p></li><li id=\"abed14c586j2g\" data-spm-anchor-id=\"a2c9r.14518950.0.i1.310f5e3bFdBaav\"><p id=\"08e6374b9578f\">在<b data-tag=\"uicontrol\" id=\"c91dad3efacjq\" class=\"uicontrol\">实例列表</b>页面，单击对应的实例ID，在<b data-tag=\"uicontrol\" id=\"c91dad40faj7b\" class=\"uicontrol\">基本信息</b>区域，查看<b data-tag=\"uicontrol\" id=\"c91dad42fadw0\" class=\"uicontrol\">当前使用带宽</b>。</p><p id=\"08e6374c95qda\">如果服务器带宽为0 Mbps，说明购买实例时没有购买公网带宽，您可以通过升级带宽解决，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-of-instance-configuration-changes#ChangeBandwidth\">修改公网带宽</a>。</p></li></ol></li><li id=\"e4575cd874doz\" data-spm-anchor-id=\"a2c9r.12641779.0.i1.40d8kG22kG22UK\"><p id=\"08e65e5095btw\">排查是否存在内存不足问题。</p><p id=\"08e65e5195a96\">远程连接Linux实例后，不能正常显示桌面并直接退出，也没有错误信息提示。这种情况可能是服务器内存不足导致，需要检查服务器的内存使用情况。具体操作如下。 </p><ol id=\"4759711186bsn\"><li id=\"3d34173086bdf\"><p id=\"08e65e5295r1n\">使用VNC方式登录Linux实例。</p><p id=\"08e65e5395zdz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"e45783e574lju\"><p id=\"08e65e549535a\">查看内存使用情况，如果存在内存不足情况，建议您升配实例规格来解决资源瓶颈问题，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-of-instance-configuration-changes\">升降配方式概述</a>。</p><p id=\"83d0ab009579b\">查看内存的操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-view-physical-cpu-and-memory-information-for-ecs-instances-in-linux\">Linux系统的ECS实例中如何查看物理CPU和内存信息</a>。</p></li></ol></li></ol></section></section><section id=\"0b2ba7509557s\" class=\"section\"><h2 id=\"08b995e095htu\" data-tag=\"h3\" class=\"h3\"><b>存在明确的报错信息</b></h2><p id=\"18f0e44095dn9\">远程登录失败时，系统通常会返回报错信息。您可以根据报错信息，快速定位问题原因及解决方案。</p><section id=\"df7beb00958w9\" class=\"section\"><h3 data-tag=\"h4\" id=\"4ca60b3095png\" class=\"h4\"><b>PAM安全框架</b></h3><p id=\"4ca60b31955q8\">Linux系统的PAM安全框架可以加载相关安全模块，对云服务器的账户策略、登录策略等进行访问控制。如果相关配置存在异常，或触发了相关策略，就可能会导致SSH登录失败。根据不同报错信息，可参见如下常见案例进行解决：</p><ul id=\"7e510a42958q7\"><li id=\"7e510a40952wl\"><p id=\"7d913cb095u8i\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/you-cannot-log-on-to-the-ecs-instance-of-the-linux-by-using-the-correct-password\">使用正确的密码无法登录Linux系统的ECS实例</a></p></li><li id=\"9d1922f195ioc\"><p id=\"9d1922f095qsm\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-when-i-cannot-log-on-to-a-linux-instance-after-the-pam-authentication-module-is-enabled\">使用SSH登录Linux系统的ECS实例时提示“requirement \"uid &gt;= 1000\" not met by user \"root\"”错误</a></p></li><li id=\"b153f831959uo\"><p id=\"b153f83095sx0\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/multiple-consecutive-incorrect-password-accesses-to-linux-instances-through-ssh\">SSH登录Linux实例时多次连续错误输入密码导致用户锁定</a></p></li><li id=\"c6de09c195457\"><p id=\"c6de09c09589x\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/what-do-i-do-if-i-cannot-log-on-to-a-linux-instance-and-the-login-module-is-unknown-error-is-reported\">登录Linux实例失败并报“login: Module is unknown”错误如何处理</a></p></li></ul></section><section id=\"7245bce09544k\" class=\"section\"><h3 data-tag=\"h4\" id=\"4ca60b3b95zu3\" class=\"h4\"><b>Linux实例系统环境配置</b></h3><p id=\"4ca60b3c95wk7\">Linux内的系统环境，例如中毒、账户配置、环境变量配置等，如果出现异常，也可能会导致SSH登录失败。根据不同报错信息，可参见如下常见案例进行解决：</p><ul id=\"00e49f319581y\"><li id=\"f2efc6c095gdx\"><p id=\"f2ef9fb09529d\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-ssh-exchange-identification-read-connection-reset-by-peer-error-is-displayed-when-you-log-on-to-an-ecs-instance-through-ssh\">SSH登录ECS实例提示“ssh_exchange_identification: read: Connection reset by peer”错误</a></p></li><li id=\"026ee8b1951nr\"><p id=\"026ee8b095bm7\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-system-prompts-fatal-mm-request-send-write-broken-pipe-error-when-the-ssh-service-runs-abnormally-caused-by-viruses\">病毒引发SSH服务运行异常系统提示“fatal: mm_request_send: write: Broken pipe”错误</a></p></li><li id=\"14d96ac095avs\"><p id=\"14d943b095jy6\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/main-process-exited-code-exited-error-when-ssh-service-is-started\">SSH服务启动时报“main process exited, code=exited”错误</a></p></li><li id=\"28b6ddc0956aa\"><p id=\"28b6b6b095m5n\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/a-system-exception-occurs-on-linux-instances-after-ssh-logon-due-to-ulimit\">Linux实例由于Ulimit限制原因导致SSH登录后系统异常</a></p></li><li id=\"40942e2195ymt\"><p id=\"40942e20957eb\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/an-error-is-reported-when-you-log-on-to-an-ecs-instance-of-the-linux-system-by-using-ssh-commands\">使用SSH命令登录Linux系统的ECS实例时出现报错</a></p></li><li id=\"5b92bbb195at4\"><p id=\"5b92bbb095ufk\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/an-ssh-remote-connection-exception-occurs-in-a-linux-instance-because-the-selinux-service-is-enabled\">Linux实例中由于SELinux服务开启导致SSH远程连接异常</a></p></li></ul></section><section id=\"7858c2d095me8\" class=\"section\"><h3 data-tag=\"h4\" id=\"4ca60b4a958yw\" class=\"h4\"><b>SSH服务及参数配置</b></h3><p id=\"4ca60b4b95cxe\">SSH服务的默认配置文件为<code data-tag=\"code\" class=\"code\">/etc/ssh/sshd_config</code>。配置文件中的相关参数配置异常，或启用了相关特性或策略，也可能会导致SSH登录失败。根据不同报错信息，可参见如下常见案例进行解决：</p><ul id=\"c32bbab295h9n\"><li id=\"c32bbab0953no\"><p id=\"c0c3463095s38\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-disconnected-no-supported-authentication-methods-available-error-occurs-when-you-log-on-to-a-linux-instance-by-ssh\">SSH登录Linux实例时出现\"Disconnected:No supported authentication methods available\"错误</a></p></li><li id=\"d41764f195gvf\"><p id=\"d41764f095020\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-user-root-not-allowed-because-not-listed-in-error-occurs-when-you-log-on-to-a-linux-instance-by-using-ssh-commands\">使用SSH命令登录Linux实例时出现“User root not allowed because not listed in”错误</a></p></li><li id=\"e3b95120955n3\"><p id=\"e3b92a10953rb\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-if-the-permission-denied-please-try-again-error-message-appears-when-i-log-on-to-a-linux-instance-as-the-root-user-by-using-ssh\">使用root用户通过SSH登录Linux实例时报“Permission denied, please try again”的错误</a></p></li><li id=\"f2bbf01195wix\"><p id=\"f2bbf01095u7i\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-too-many-authentication-failures-for-root-error-occurs-when-you-log-on-to-an-instance-through-ssh\">使用SSH登录实例时出现“Too many authentication failures for root”错误</a></p></li><li id=\"0977cae095eva\"><p id=\"0977a3d095akq\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-error-while-loading-shared-libraries-error-occurs-when-you-start-the-ssh-service\">启动SSH服务时出现“error while loading shared libraries”错误</a></p></li><li id=\"1cb5064195776\"><p id=\"1cb506409568r\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/in-linux-ecs-instances-the-following-error-fatal-cannot-bind-any-address-occurs-when-the-ssh-service-is-started\">在Linux系统的ECS实例中SSH服务启动时出现如下错误“fatal: Cannot bind any address”</a></p></li><li id=\"2e4b215195drp\"><p id=\"2e4b215095ri9\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-bad-configuration-options-error-occurs-when-the-ssh-service-is-started\">启动SSH服务时出现“Bad configuration options”错误</a></p></li><li id=\"4889e15195sip\"><p id=\"4889e15095qga\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/using-usedns-to-enable-ssh-slows-down-ssh-logon-or-data-transfer\">SSH启用UseDNS导致SSH登录或数据传输速度变慢</a></p></li></ul></section><section id=\"78f92c1095bab\" class=\"section\"><h3 data-tag=\"h4\" id=\"4ca60b5f950ls\" class=\"h4\"><b>SSH服务关联目录或文件配置</b></h3><p id=\"4ca60b60950ep\">SSH服务基于安全性考虑，在运行时，会对相关目录或文件的权限配置、属组等进行检查。过高或过低的权限配置，都可能会引发服务运行异常，进而导致客户端登录失败。根据不同报错信息，可参见如下常见案例进行解决：</p><ul id=\"859133a295foi\"><li id=\"859133a095fp8\"><p id=\"84afd45095t27\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-no-supported-key-exchange-algorithms-error-occurs-when-you-log-on-to-a-linux-instance-by-using-ssh-commands\">使用SSH命令登录Linux实例时出现“No supported key exchange algorithms”错误</a></p></li><li id=\"90b07de095h7y\"><p id=\"90b056d095cwv\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-system-prompts-must-be-owned-by-root-and-not-group-or-word-writable-error-when-the-ssh-service-starts\">SSH服务启动时系统提示“must be owned by root and not group or word-writable”错误</a></p></li></ul></section><section id=\"1495e73095zan\" class=\"section\"><h3 data-tag=\"h4\" id=\"4ca60b6695ojj\" class=\"h4\"><b>SSH服务密钥配置</b></h3><p id=\"4ca60b6795p5c\">SSH服务采用非对称加密技术，对所传输的数据进行加密。客户端及服务端会交换和校验相关密钥信息的有效性。根据不同报错信息，可参见如下常见案例进行解决：</p><p id=\"fe52bed095db8\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-system-prompts-host-key-verification-failed-when-logging-on-to-the-ecs-instance-over-ssh\">使用SSH登录ECS实例时提示“Host key verification failed”错误</a></p></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/has-access-to-the-cdn-website-after-migrating-to-windows-instance-access-to-the-site-prompt-connection-is-rejected-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>已接入CDN的网站迁移至Windows实例后，访问该站点提示连接被拒绝，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>已接入CDN的网站迁移至Windows实例后，访问该站点提示连接被拒绝，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-17 16:42:29</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"ba4ae64096vh1\"><p data-tag=\"shortdesc\" id=\"ba51eb2896oij\" class=\"shortdesc\">本文介绍已接入CDN的网站迁移至Windows实例后，访问该站点提示连接被拒绝问题的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"WdhpW\">问题描述</h2><p id=\"ba51eb29966xe\">已接入CDN的网站迁移至Windows实例之后，该Windows实例上的所有站点均无法正常访问，访问时提示连接被拒绝。</p><p id=\"041e3e30d7nfp\">经过排查，发现该场景存在如下特征：</p><ul id=\"ba51eb2a96mlc\"><li id=\"ba51eb2b96ogf\"><p id=\"ba51eb2c96yf3\">该Windows实例的443端口正常开启，并且该Windows实例的负载和带宽无明显变化。</p></li><li id=\"ba51eb2d962tx\"><p id=\"ba5212309684v\">该Windows实例使用宝塔（BT）面板搭建网站。 \n</p><div type=\"note\" id=\"c5094ff1adaf2\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"ca9a2d90adozc\">宝塔（BT）面板默认采用Apache提供Web服务。</p></div></div></li><li id=\"ba521234963vr\"><p id=\"ba52123596rbc\">Apache的<code data-tag=\"code\" class=\"code\">error_log</code>中存在如下错误信息。 </p><pre id=\"ba4ae641965w4\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Server ran out of threads to serve requests. Consider raising the ThreadsPerChild setting</code></pre><img id=\"f0cd0f30d257t\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4002211861/p618975.png\" alt=\"问题描述 xin\" placement=\"break\" width=\"750\" class=\"image break\"></li></ul><h2 id=\"nSbej\">问题原因</h2><p id=\"ba52123796jpz\">通过Apache的<code data-tag=\"code\" class=\"code\">error_log</code>信息可以判断，该Windows实例上没有线程来处理访问请求，导致该问题。</p><div type=\"note\" id=\"1fbaa0c0adypz\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"1c2dd080ad0j1\">Windows操作系统中Apache程序使用<code data-tag=\"code\" class=\"code\">mpm_winnt</code>模块，该模块默认的线程数为64。当Web请求数超过该线程数时，Apache将无法正常提供服务。更多信息，请参见<a class=\"\" target=\"_blank\" href=\"https://httpd.apache.org/docs/2.4/mod/mpm_winnt.html\">Apache MPM模块</a>。</p></div></div><h2 id=\"WffKj\">解决方案</h2><div type=\"note\" id=\"291a5f10d24vp\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"299868b0d2ic2\">本文操作步骤以Windows Server 2012 R2数据中心版64位中文版为例，实际操作以您实际的操作系统为准。</p></div></div><ol id=\"3315bf91d236e\"><li id=\"259023b1d2vi0\"><p id=\"259023b0d2cdo\">远程连接Windows实例。</p><p id=\"18252140d26y0\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"3b1468e1d2okk\"><p id=\"f21d39e0admu8\">启用MPM模块配置文件。</p><div type=\"important\" id=\"9ad24c21d2r74\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"9f5451d0d2mn5\">在默认情况下，MPM模块配置文件并没有启用，您需要执行如下操作进行启用。</p></div></div><ol id=\"8f7c1361d2pqu\"><li id=\"837687d1d252z\"><p id=\"837687d0d2iz7\">打开资源管理器，找到<code data-tag=\"code\" class=\"code\">httpd-mpm.conf</code>配置文件并记录存放位置。</p><p id=\"d03cc430d2tib\">在您的<code data-tag=\"code\" class=\"code\">Apace安装目录\\conf\\extra</code>目录中，可以找到主要用于MPM模块的<code data-tag=\"code\" class=\"code\">httpd-mpm.conf</code>配置文件。以该文件存放于<code data-tag=\"code\" class=\"code\">C:\\Program Files\\BtSoft\\apache\\conf\\extra</code>路径为例，示例如下。<img id=\"ac5cb1f0d235c\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4002211861/p619000.png\" alt=\"extra目录 xin\" placement=\"break\" class=\"image break\"></p></li><li id=\"baef5101d208a\"><p id=\"baef5100d2opd\">在<code data-tag=\"code\" class=\"code\">httpd.conf</code>主配置文件中，执行如下操作，启用<code data-tag=\"code\" class=\"code\">Include conf/extra/httpd-mpm.conf</code>配置。</p><div type=\"note\" id=\"bb0a4a40dcqdr\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"bb0a2330dcszt\"><code data-tag=\"code\" class=\"code\">httpd.conf</code>主配置文件存放于<code data-tag=\"code\" class=\"code\">Apace安装目录\\conf</code>目录中，本操作以<code data-tag=\"code\" class=\"code\">httpd.conf</code>主配置文件存放于<code data-tag=\"code\" class=\"code\">C:\\Program Files\\BtSoft\\apache\\conf</code>路径为例。</p></div></div><ol id=\"a1554001d22zj\"><li id=\"a0882c01d2qvs\"><p id=\"a0882c00d2tib\">找到待修改的代码，内容如下。</p><pre id=\"c4titd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code># Server-pool management (MPM specific)\n# Include conf/extra/httpd-mpm.conf</code></pre></li><li id=\"ac7d15c0d2xbh\"><p id=\"13cd1a50d2c7u\">删除<code data-tag=\"code\" class=\"code\"># Include conf/extra/httpd-mpm.conf</code>代码中的<code data-tag=\"code\" class=\"code\">#</code>来启用<code data-tag=\"code\" class=\"code\">Include conf/extra/httpd-mpm.conf</code>配置，修改后的代码如下。</p><pre id=\"onudll\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code># Server-pool management (MPM specific)\nInclude conf/extra/httpd-mpm.conf</code></pre><img id=\"be2dbdb0d28ao\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4002211861/p619022.png\" alt=\"修改MPM配置文件 xin\" placement=\"break\" class=\"image break\"></li></ol></li><li id=\"ba52394596xbj\"><p id=\"ba523946963dg\">在<code data-tag=\"code\" class=\"code\">conf/extra/httpd-mpm.conf</code>配置文件中，查看<code data-tag=\"code\" class=\"code\">ThreadsPerChild</code>参数值是否为<code data-tag=\"code\" class=\"code\">64</code>。 \n</p><div type=\"note\" id=\"565645d1ad864\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"59332700ad458\">Windows操作系统中Apache的<code data-tag=\"code\" class=\"code\">ThreadsPerChild</code>参数默认值为<code data-tag=\"code\" class=\"code\">64</code>。</p></div></div><p id=\"ba52394b96yc4\">如果<code data-tag=\"code\" class=\"code\">ThreadsPerChild</code>参数值为<code data-tag=\"code\" class=\"code\">64</code>，则您需要修改如下代码，将<code data-tag=\"code\" class=\"code\">ThreadsPerChild</code>参数值修改为<code data-tag=\"code\" class=\"code\">512</code>，然后保存配置。</p><div type=\"important\" id=\"80944810d2f16\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"837ebdd0d2n9w\"><code data-tag=\"code\" class=\"code\">512</code>仅为示例值，并非推荐值。您需要根据Windows实例的负载和访问情况进行调整。更多该参数的信息，请参见<a class=\"\" target=\"_blank\" href=\"https://httpd.apache.org/docs/2.4/mod/mpm_common.html#threadsperchild\">Apache MPM通用指令</a>。</p></div></div><pre id=\"ba4eb6d09675u\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>&lt;IfModule mpm_winnt_module&gt;\nThreadsPerChild 512 \nMaxRequestsPerChild 0\n&lt;/IfModule&gt;</code></pre><img id=\"cb21ab70d2128\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4002211861/p619066.png\" alt=\"修改ThreadsPerChild参数 xin\" placement=\"break\" class=\"image break\"></li></ol></li><li id=\"ba52605096s8q\"><p id=\"ba52605196wvx\">重新启动Apache服务。</p><ol id=\"2d54fb81d2gk5\"><li id=\"873e14f1d2nag\"><p id=\"487f05e0d2jt0\">在桌面左下角，选择<img id=\"c7a48820d1d1j\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615324.png\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"dbd6d1e0d11kc\" class=\"uicontrol\"> &gt; 服务器管理器</b>。</p></li><li id=\"4991fc80d24x4\"><p id=\"4cdba940d2dzy\">在<b data-tag=\"uicontrol\" id=\"98f2b480d2h7v\" class=\"uicontrol\">服务器管理器</b>页面的左侧导航栏中，单击<b data-tag=\"uicontrol\" id=\"9b31cf10d21ee\" class=\"uicontrol\">本地服务器</b>。</p></li><li id=\"474a7d80d2kqt\"><p id=\"474a5670d2p27\">在<b data-tag=\"uicontrol\" id=\"9d818b70d2scq\" class=\"uicontrol\">服务</b>区域中找到Apache，单击鼠标右键，然后单击<b data-tag=\"uicontrol\" id=\"bd144720d2o56\" class=\"uicontrol\">重新启动服务</b>。<img id=\"b1375790d2rp0\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4002211861/p619078.png\" alt=\"Apache 重启服务\" placement=\"break\" class=\"image break\"></p></li></ol></li><li id=\"ba52605296w7j\"><p id=\"ba526053961qc\">重新访问该网站。</p><p id=\"3519c590d2d6x\">如果成功访问该网站，则问题解决。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-no-input-file-specified-error-is-returned-when-i-access-websites-deployed-on-an-ecs-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>访问部署在ECS实例上的Web站点，提示“No input file specified”错误，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>访问部署在ECS实例上的Web站点，提示“No input file specified”错误，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-05-05 09:53:02</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"ac1e0de09679e\"><p data-tag=\"shortdesc\" id=\"ac264b4896cv3\" class=\"shortdesc\">本文介绍访问部署在ECS实例上的Web站点，提示“No input file specified”错误的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"AREhk\">问题描述</h2><p id=\"ac264b4d96q9z\">访问部署在ECS实例上的Web站点时，提示“No input file specified”错误，如图所示。<img id=\"eaed19b0d2q1n\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3174422861/p618443.png\" alt=\"问题现象 xin\" placement=\"break\" class=\"image break\"></p><h2 id=\"ac264b4e96d3u\"><b>问题原因</b></h2><p id=\"fd4217f0d22su\">该问题通常是Web服务器无法找到指定的PHP文件或脚本导致。无法找到PHP文件或脚本的可能原因如下：</p><ul id=\"07a85a62ddjrp\"><li id=\"07a85a60ddh1g\"><p id=\"2d9fa860e125y\">Web站点目录下存在<code data-tag=\"code\" class=\"code\">.user.ini</code>隐藏配置文件，且该文件中的<code data-tag=\"code\" class=\"code\">open_basedir</code>配置所指定的目录列表未包含该Web站点目录，导致Web服务器无法找到该文件。您需要添加正确的Web站点目录，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#859eaa70e1fx5\">在.user.ini隐藏配置文件中手动添加Web站点目录</a>。</p></li><li id=\"112a00a1e11d0\"><p id=\"112a00a0e1v7r\">Web站点配置文件中伪静态规则书写错误，导致Web服务器读取该文件失败。您需要修改Web站点配置文件中错误的规则，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#08ac34e0e1y0z\">在Web站点的配置文件修改伪静态规则配置（Apache）</a>。</p></li><li id=\"9e1e2471e2r1l\"><p id=\"9e1e2470e2zm0\">Web站点配置文件中运行模式相关配置错误，导致Web服务器读取该文件失败。您需要修改Web站点配置文件指定PHP程序的运行模式，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#d15d9110e2eul\">在Web站点配置文件指定PHP程序运行模式（IIS和Nginx）</a>。</p></li></ul><h2 id=\"ac1e0de296vkx\">解决方案</h2><h3 id=\"859eaa70e1fx5\">在<code data-tag=\"code\" class=\"code\">.user.ini</code>隐藏配置文件中手动添加Web站点目录</h3><p id=\"0760e5a0e1dth\">您需要检查Web站点目录下是否存在<code data-tag=\"code\" class=\"code\">.user.ini</code>隐藏配置文件，如果存在，再检查该文件中的<code data-tag=\"code\" class=\"code\">open_basedir</code>配置所指定的目录列表是否包含了该Web站点目录。如果未包含，您需要手动添加该Web站点目录。</p><p id=\"107b1110e1swn\">以Web站点目录是<code data-tag=\"code\" class=\"code\">/www/wwwroot/www.abc.com</code>为例，您需要确保<code data-tag=\"code\" class=\"code\">.user.ini</code>文件中的<code data-tag=\"code\" class=\"code\">open_basedir</code>指令包含该Web站点目录，即您需要将<code data-tag=\"code\" class=\"code\">.user.ini</code>隐藏配置文件中的<code data-tag=\"code\" class=\"code\">open_basedir</code>配置修改为<code data-tag=\"code\" class=\"code\">open_basedir=/www/wwwroot/www.abc.com/:/tmp/ </code>，配置示例如图所示。<img id=\"107a26b1e1pvl\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3174422861/p636333.png\" alt=\"image\" placement=\"break\" class=\"image break\"></p><h3 id=\"08ac34e0e1y0z\"><b>在Web站点配置文件修改伪静态规则配置（Apache）</b></h3><p id=\"f3d98a00e2jqn\">您需要检查Web站点目录下是否存在<code data-tag=\"code\" class=\"code\">.htaccess</code>隐藏配置文件，如果存在，再检查该文件中的<code data-tag=\"code\" class=\"code\">RewriteRule</code>规则是否书写正确。如果错误，您需要手动修改该规则。</p><p id=\"2c59b530e3wo8\">以伪静态规则<code data-tag=\"code\" class=\"code\">RewriteRule ^(.*)$ /index.php?/$1 [L]</code>中的<code data-tag=\"code\" class=\"code\">index.php</code>缺少半角问号（?）为例，您需要修改该规则，操作步骤如下。</p><ol id=\"fce647f0e20x8\"><li id=\"fce66f00e2m12\"><p id=\"fce78070e2urq\">远程连接ECS实例。</p><p id=\"fce78071e23qz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"fce66f03e2vn8\"><p id=\"fce78072e2pto\">打开<code data-tag=\"code\" class=\"code\">.htaccess</code>文件，在配置文件中找到<code data-tag=\"code\" class=\"code\">RewriteRule</code>所在行，然后在<code data-tag=\"code\" class=\"code\">index.php</code>参数后添加半角问号（?），修改后的配置如图所示。</p><div type=\"note\" id=\"fce66f05e2yx1\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"fce78073e266f\"><code data-tag=\"code\" class=\"code\">.htaccess</code>文件为Apache用户配置文件（伪静态），一般在当前网站的根目录下，具体路径以您的实际环境为准。</p></div></div><pre id=\"fce66f07e2pya\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>RewriteRule ^(.*)$ /index.php?/$1 [L]</code></pre><img id=\"fce66f09e2jgt\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6523211861/p618907.png\" alt=\"Apache 修改\" placement=\"break\" class=\"image break\"></li><li id=\"fce66f0ae247i\"><p id=\"fce78075e28sl\">重新访问该网站。</p><p id=\"fce78076e2s0h\">如果成功访问该网站，则问题解决。</p></li></ol><h3 id=\"d15d9110e2eul\"><b>在Web站点配置文件指定PHP程序运行模式（IIS和</b>Nginx<b>）</b></h3><p id=\"17c43240e3yg6\">您需要修改Web站点配置文件中运行模式相关的配置，来指定PHP程序的运行模式。本文介绍为IIS和Nginx指定PHP程序运行模式为CGI的操作步骤。</p><h4 data-tag=\"h3\" id=\"ac26725496i5i\" class=\"h3\"><b>IIS配置</b></h4><ol id=\"7d28b282adpfx\"><li id=\"7d28b280advb4\"><p id=\"7ba742a1adxhh\">远程连接Windows实例。</p><p id=\"a2a95ff0adwx3\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"81155600aduo8\"><p id=\"cc432a20aes51\">修改<code data-tag=\"code\" class=\"code\">php.ini</code>文件。</p><ol id=\"4f6949a1e1urm\"><li id=\"4e832f60e1p6z\"><p id=\"4e830850e18y5\">打开<code data-tag=\"code\" class=\"code\">php.ini</code>文件。</p><div type=\"note\" id=\"6ecabc20e1r13\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"6eca9510e1l6k\">后续操作以<code data-tag=\"code\" class=\"code\">php.ini</code>文件所在路径为<code data-tag=\"code\" class=\"code\">C:\\php\\54</code>为例，<code data-tag=\"code\" class=\"code\">php.ini</code>文件所在路径以您部署时选择的实际路径为准。</p></div></div></li><li id=\"59cb5e60e1hus\"><p id=\"59cb3750e11xd\">注释代码。</p><p id=\"883e3ce0e1jmo\">找到<code data-tag=\"code\" class=\"code\">php.ini</code>文件的<code data-tag=\"code\" class=\"code\">doc_root</code>字段所在行，然后在开头位置添加半角分号（;）来注释整行内容，注释后的代码示例如图所示。<img id=\"0089d4c0e1fvx\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3174422861/p636270.png\" alt=\"注释doc_root所在行\" placement=\"break\" class=\"image break\"></p></li><li id=\"606d5de0e1qa7\"><p id=\"606d36d0e1d84\">修改代码。</p><p id=\"25d4f340e1ytg\">找到<code data-tag=\"code\" class=\"code\">php.ini</code>文件中的<code data-tag=\"code\" class=\"code\">;cgi.force_redirect = 1</code>代码，然后删除该代码中的半角分号（;），再将参数值从<code data-tag=\"code\" class=\"code\">1</code>修改为<code data-tag=\"code\" class=\"code\">0</code>，即该代码被修改为<code data-tag=\"code\" class=\"code\">cgi.force_redirect = 0</code>，修改后的代码示例如图所示。<img id=\"5fff3d50e1uth\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3174422861/p636274.png\" alt=\"修改cgi\" placement=\"break\" class=\"image break\"></p></li></ol></li><li id=\"ce3e0081d2wlo\"><p id=\"ce3e0080d2e9l\">重启IIS。</p><div type=\"note\" id=\"855d8230d7sin\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"8ce99390d7bf7\">本文操作步骤以Windows Server 2012 R2数据中心版64位中文版为例，实际操作以您实际的操作系统为准。</p></div></div><ol id=\"adb8c3b1d7m1b\"><li id=\"ad382200d7fvh\"><p id=\"b2976850d7nsa\">在桌面左下角，单击<img id=\"ee528430d773t\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6523211861/p627553.png\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，然后右上角的搜索框中输入<code data-tag=\"code\" class=\"code\">iisreset</code><b>。</b><img id=\"fb696340d7cyl\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6523211861/p627557.png\" alt=\"重启IIS\" placement=\"break\" class=\"image break\"></p></li><li id=\"b3405280d7gfe\"><p id=\"b3402b70d7zfi\">单击<b data-tag=\"uicontrol\" id=\"ec24ed10ad17i\" class=\"uicontrol\">iisreset</b><b>。</b></p><p id=\"bc78b452d79eo\">IIS重启程序运行完毕，则表示IIS重启成功。</p></li></ol></li><li id=\"9b5fa6c1d7xs4\"><p id=\"9b5fa6c0d78ci\">重新访问该网站。</p><p id=\"11886970d2yau\">如果成功访问该网站，则问题解决。</p></li></ol><h4 data-tag=\"h3\" id=\"ac267268962qf\" class=\"h3\"><b>Nginx配置</b></h4><ol id=\"ac26726996i4j\"><li id=\"ac26726a96b30\"><p id=\"ac26726b964wu\">远程连接ECS实例。</p><p id=\"18252140d26y0\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"0d2741b0d2wdm\"><p id=\"0d271aa0d2d4b\">打开<code data-tag=\"code\" class=\"code\">/etc/php5/cgi/php.ini</code>文件，检查配置并确保<code data-tag=\"code\" class=\"code\">cgi.fix_pathinfo = 1</code>。</p><div type=\"note\" id=\"945615e0e2vir\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"94fd2b50e222y\">php.ini文件所在路径以您部署时选择的实际路径为准。</p></div></div><img id=\"51b7faf0e1bdf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3174422861/p636315.png\" alt=\"Nginx cgi\" placement=\"break\" class=\"image break\"></li><li id=\"1f40e431e1bhg\"><p id=\"b1067a90e1aiu\">打开<code data-tag=\"code\" class=\"code\">fastcgi.conf</code>配置文件，检查并确保文件中已保存如下配置。</p><pre id=\"gp9gis\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\nfastcgi_param DOCUMENT_ROOT $document_root;</code></pre><p id=\"e9ff2270e1gv9\">如果<code data-tag=\"code\" class=\"code\">fastcgi.conf</code>配置文件中代码配置错误，则您需要修改代码后保存配置，修改后的代码示例如图所示。<img id=\"73dfc3f0e1bcm\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3174422861/p636319.png\" alt=\"Nginx fastcgi\" placement=\"break\" class=\"image break\"></p></li><li id=\"ac26727096vfw\"><p id=\"ac267271963qq\">执行如下命令，重启Nginx服务。 </p><pre id=\"ac1e0dea96pve\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>service nginx restart</code></pre></li><li id=\"2daaa980d2jn3\"><p id=\"2daa8270d2qyr\">重新访问该网站。</p><p id=\"7a0b7bf0d8pt1\">如果成功访问该网站，则问题解决。</p></li></ol><p id=\"ab2906c0e1y64\"></p><p id=\"be784ae3e1oiy\">如果以上方法都没有解决问题，可以尝试查看Web服务器的错误日志，了解具体的错误信息并进行排查。</p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-err-connetcion-timed-out-error-appears-when-i-enter-https-or-or-domain-name-of-a-website-that-is-hosted-on-an-ecs-instance-in-a-browser-to-access-the-website", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>使用浏览器通过https://网站域名方式访问在ECS实例上部署的网站时，提示“ERR_CONNETCION_TIMED_OUT”错误，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用浏览器通过https://网站域名方式访问在ECS实例上部署的网站时，提示“ERR_CONNETCION_TIMED_OUT”错误，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-16 10:38:10</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"79d5e47096eyd\"><p data-tag=\"shortdesc\" id=\"cbcd19b0bd1zd\" class=\"shortdesc\">您在本地设备或ECS实例上使用浏览器访问部署在ECS实例上的网站时，可能会出现通过<code data-tag=\"code\" class=\"code\">http://网站域名</code>访问网站正常，但通过<code data-tag=\"code\" class=\"code\">https://网站域名</code> 访问却提示“ERR_CONNETCION_TIMED_OUT”的情况，本文介绍该场景下的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"95593af0ad1bg\">在本地设备或ECS实例上使用浏览器访问部署在ECS实例上的网站时，您可以使用浏览器正常访问非加密网站地址（<code data-tag=\"code\" class=\"code\">http://网站域名</code>），但无法访问HTTPS加密网站地址（<code data-tag=\"code\" class=\"code\">https://网站域名</code>）并提示“ERR_CONNETCION_TIMED_OUT”。</p><div type=\"note\" id=\"ac80ad01addpc\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"ac80ad00ad208\">该问题所在场景下，网站配置文件中没有设置<code data-tag=\"code\" class=\"code\">http</code>跳转<code data-tag=\"code\" class=\"code\">https</code>功能。</p></div></div><p id=\"d9cb2140bd14r\">具体现象如下：</p><ol id=\"e3506a92bdl78\"><li id=\"e3506a90bd9od\"><p id=\"e1943ba0bdylp\">使用浏览器通过<code data-tag=\"code\" class=\"code\">http://网站域名</code>访问网站正常，如图所示。<img id=\"4eb9dd10bd8gv\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5929628761/p580288.jpg\" alt=\"访问正常\" placement=\"break\" class=\"image break\"></p></li><li id=\"0b247de1bdmhr\"><p id=\"0b247de0bdu96\">使用浏览器通过<code data-tag=\"code\" class=\"code\">https://网站域名</code>访问网站失败，提示<code data-tag=\"code\" class=\"code\">ERR_CONNETCION_TIMED_OUT</code>，如图所示。<img id=\"cca674a0bdf35\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5929628761/p580277.jpg\" alt=\"访问异常\" placement=\"break\" class=\"image break\"></p></li></ol><h2 id=\"4rM4I\">问题原因</h2><p id=\"dbb5b441a9pev\">使用浏览器通过<code data-tag=\"code\" class=\"code\">http://网站域名</code>访问网站时，默认访问服务端的80端口，而通过<code data-tag=\"code\" class=\"code\">https://网站域名</code>访问网站时，默认访问服务端的443端口。因此，当网站配置文件中没有设置<code data-tag=\"code\" class=\"code\">http</code>跳转<code data-tag=\"code\" class=\"code\">https</code>功能而服务端的HTTPS服务已经正常启动时，如果ECS实例的安全组中缺少允许入方向的443端口访问规则，则可能会导致该问题。</p><h2 id=\"AywdZ\">解决方案</h2><p id=\"6fd7ca30ad78e\">您需要在ECS控制台上为ECS实例所在安全组添加入方向的443端口，然后再重新使用网站域名访问该网站。</p><ol id=\"355051f2bdmyo\"><li id=\"355051f0bd5q4\"><p id=\"2c0b9410bdi3d\">添加安全组则。</p><p id=\"5a7571e0bdbnj\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。<img id=\"6fd7ca32adqwz\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6230546761/p562251.jpg\" alt=\"添加出方向的443规则\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"3ac9d701bdhls\"><p id=\"3ac9d700bdezn\">重新通过<code data-tag=\"code\" class=\"code\">https://网站域名</code>访问网站。</p><p id=\"49ba7490bdp5g\">成功访问该网站，问题解决。<img id=\"93d985c0bdm3y\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5929628761/p580301.jpg\" alt=\"https成功访问\" placement=\"break\" class=\"image break\"></p></li></ol></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/solution-to-failure-in-remote-connection-to-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span>无法远程连接Windows实例的排查方法</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>无法远程连接Windows实例的排查方法</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-11 10:07:05</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"e43b224074txn\"><p id=\"e454ebd074chl\" data-tag=\"shortdesc\" class=\"shortdesc\">本文主要介绍无法远程连接Windows实例的处理方法。</p><div data-tag=\"conbody\" class=\"conbody\"><p id=\"230a3da085d24\">无法远程连接Windows实例的原因较多，请您根据实际情况，通过相应的排查方法，排查并解决无法远程连接Windows实例的问题。</p><ul id=\"79cc9ec28blr1\"><li id=\"79cc9ec08b4p8\"><p id=\"775843608bew1\"><a title=\"\" class=\"xref\" href=\"#1c7d23708br9f\">快速登录Windows实例</a></p></li><li id=\"812d5a608b3qv\"><p id=\"812d33508bs3n\"><a title=\"\" class=\"xref\" href=\"#e454ebd474yaj\">没有明确的报错信息</a></p></li><li id=\"8ac5b6818bszq\"><p id=\"8ac5b6808b6fv\"><a title=\"\" class=\"xref\" href=\"#96a5bf2085j84\">存在明确的报错信息</a></p></li></ul><section id=\"1c7d23708br9f\" class=\"section\"><h2 id=\"1c7d23718bbq8\"><b>快速登录Windows实例</b></h2><p id=\"3512c7508bvfd\">如果您遇到紧急情况，需要尽快登录Windows实例，请参见以下操作步骤，先检查ECS实例的状态，然后通过云助手向Windows实例发送命令或通过VNC登录实例，具体步骤如下：</p><section id=\"b4b9f5408bnrb\" class=\"section\"><h3 id=\"3512a0418bgdi\"><b>步骤一：检查ECS实例状态</b></h3><p id=\"99bedf938bs5j\">无论何种原因导致无法远程登录ECS实例，请先检查实例的状态。只有当ECS实例为<b>运行中</b>状态时，才能对外提供业务访问。检查步骤如下：</p><ol id=\"a580d2708beuj\"><li id=\"a580d2718bzof\"><p id=\"a580d2728bsyr\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"a580d2738b5jj\"><p id=\"a580d2748buxk\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"8adf5fc00axt0\" class=\"uicontrol\">实例与镜像 &gt; 实例</b>。</p></li><li class=\"li step stepexpand\" id=\"a580d2758bvyl\"><p id=\"a580d2768bb31\">在顶部菜单栏左上角处，选择地域。</p></li><li class=\"li step stepexpand\" id=\"a580d2778b2e7\"><p id=\"a580d2788b8rs\">在<b data-tag=\"uicontrol\" id=\"8adf86d40aelj\" class=\"uicontrol\">实例列表</b>页面，单击目标实例ID，查看目标实例的<b data-tag=\"uicontrol\" id=\"8adf86d60a3y3\" class=\"uicontrol\">状态</b>与<b data-tag=\"uicontrol\" id=\"8adf86d80ac1v\" class=\"uicontrol\">健康状况</b>，并选择合适的登录方式。</p><ul id=\"ee0f46a18bsmu\"><li id=\"ed71f5318bv9o\"><p id=\"ed71f5308bte8\">ECS实例生命周期状态和实例健康状况为下表所示，您可以继续<a title=\"\" class=\"xref\" href=\"#a36325501b4cb\">步骤二：通过VNC登录ECS实例</a>操作。</p><table id=\"25bd6d208bz2h\" tablewidth=\"708\" tablecolswidth=\"202 304 202\" class=\"table\"><colgroup colwidth=\"0.86*\" style=\"width:28.53%\"></colgroup><colgroup colwidth=\"1.29*\" style=\"width:42.94%\"></colgroup><colgroup colwidth=\"0.86*\" style=\"width:28.53%\"></colgroup><tbody class=\"tbody\"><tr id=\"25bd6d218bzll\"><td id=\"25bd6d228bzly\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"25bd6d238bs44\"><b>实例生命周期状态</b></p></td><td id=\"25bd6d248bja6\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"25bd6d258b65d\"><b>实例健康状况</b></p></td><td id=\"25bd6d268b46f\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"25bd6d278bxw4\"><b>登录方式</b></p></td></tr><tr id=\"25bd6d288b7hm\"><td id=\"25bd6d298b2in\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d2a8brqt\">启动中（Starting）</p></td><td id=\"25bd6d2b8bn4p\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d2c8bdhq\">初始化中（Initializing）</p></td><td id=\"25bd6d2d8blzb\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d2e8bfy6\">VNC</p></td></tr><tr id=\"25bd6d2f8bpaa\"><td id=\"25bd6d308bt9k\" rowspan=\"2\" colspan=\"1\"><p id=\"25bd6d318bkew\">运行中（Running）</p></td><td id=\"25bd6d328bq9u\" rowspan=\"1\" colspan=\"1\"><p id=\"7ff573a08bcuy\">初始化中（Initializing）</p></td><td id=\"25bd6d348b6bh\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d358b1t3\">VNC</p></td></tr><tr id=\"25bd6d368bnip\"><td id=\"25bd6d398bkg5\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d3a8b8p7\">无异常（OK）/操作系统运行存在异常（Impaired）</p></td><td id=\"25bd6d3b8bj8c\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d3c8brki\">VNC和WorkBench</p></td></tr><tr id=\"25bd6d3d8b7y8\"><td id=\"25bd6d3e8bfkq\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d3f8bsl3\">关机中（Stopping）</p></td><td id=\"25bd6d408bcnc\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d418bzu6\">数据不足（InsufficientData）</p></td><td id=\"25bd6d428bvb7\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d438byl4\">VNC</p></td></tr><tr id=\"25bd6d448blgn\"><td id=\"25bd6d458b1ts\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d468bqr0\">已关机（Stopped）</p></td><td id=\"25bd6d478bnie\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d488bxd0\">InsufficientData</p></td><td id=\"25bd6d498b2lv\" rowspan=\"1\" colspan=\"1\"><p id=\"25bd6d4a8bcav\">无法登录</p></td></tr></tbody></table></li><li id=\"176bceb18bq44\"><p id=\"176bceb08bd2l\">ECS实例生命周期状态为除上表所示的其他状态时，您可以根据实例的状态，选择对应的解决方案。</p><p id=\"3e4bbe008b8bf\">更多ECS实例生命周期状态，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/instance-lifecycle\">实例的生命周期</a>。</p></li></ul></li></ol></section><section id=\"a36325501b4cb\" class=\"section\"><h3 id=\"60b855018bxlz\"><b>步骤二：通过VNC登录ECS实例</b></h3><p id=\"33d408801bsmk\">如果云助手无法使用或者无法满足您的使用需求，您还可以通过阿里云VNC工具进行远程登录，使用方法如下：</p><ol id=\"25fd2ab28bdfm\"><li id=\"25fd2ab08botx\"><p id=\"33d42f901b5pc\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"2a974c438be96\"><p id=\"33d42f911bm3u\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"8ae15b930a098\" class=\"uicontrol\">实例与镜像 &gt; 实例</b>。</p></li><li class=\"li step stepexpand\" id=\"2a974c458byn2\"><p id=\"33d42f921bqmt\">在顶部菜单栏左上角处，选择地域。</p></li><li class=\"li step stepexpand\" id=\"32dd37c18bm79\"><p id=\"33d42f931bn4s\">在<b data-tag=\"uicontrol\" id=\"8ae15b990ajmg\" class=\"uicontrol\">实例列表</b>页面，找到需要连接的实例，单击该实例对应<b data-tag=\"uicontrol\" id=\"8ae15b9b0a079\" class=\"uicontrol\">操作</b>列下的<b data-tag=\"uicontrol\" id=\"8ae15b9d0agwn\" class=\"uicontrol\">远程连接</b>。</p></li><li id=\"32dd37c38b7c8\"><p id=\"33d42f941bb3n\">在弹出的<b id=\"0cf794b01412v\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">远程连接</b>对话框中，单击<b id=\"ecs.rc.remote.connection-collapse-expend\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">展开其他登录方式</b>，然后单击<b id=\"ecs.rc.remote.connection-vnc-title\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">通过VNC远程连接</b>对应的<b id=\"ecs.rc.remote.connection-action-login\" data-tag=\"uicontrol\" data-isbold=\"true\" class=\"uicontrol\">立即登录</b>。</p></li><li id=\"709144d08bmwt\"><p id=\"cc8def001bior\">登录实例操作系统。</p><ol id=\"cda049611bk3b\"><li id=\"d838a97014djp\"><p id=\"d144e7601b9hr\">在页面左上角，单击<span data-tag=\"menucascade\" id=\"4f58cec014rwb\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"uicontrol-9x6-994-6jp\" class=\"uicontrol\">发送远程命令</b> &gt; <b data-tag=\"uicontrol\" id=\"uicontrol-a2e-94e-hu8\" class=\"uicontrol\">CTRL+ALT+DELETE</b></span>。</p><div data-tag=\"info\" id=\"info-04w-hhf-9ur\" class=\"info\"><img data-tag=\"image\" id=\"image-3iz-tiu-n6u\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5248132161/p171354.png\" alt=\"window按键\" placement=\"break\" class=\"image break\"></div></li><li id=\"e3053fd014291\"><p id=\"d1450e711bv1j\">选择用户账户，输入实例登录密码，然后按Enter键。</p><div id=\"294e42c0140ly\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"d1450e721b698\">Windows实例默认账户为Administrator。</p></div></div></li></ol></li></ol></section><section id=\"d09e6ea08b8s2\" class=\"section\"><h3 id=\"4a010e118bmsa\"><b>步骤三：通过云助手向Windows实例发送命令</b></h3><p id=\"7e8febd38bcl0\">您可以尝试通过阿里云云助手向Windows实例发送命令，云助手的使用步骤如下：</p><ol id=\"87054bc08bay7\"><li id=\"87054bc18bgu6\"><p id=\"87054bc28byl1\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"87054bc38b6zd\"><p id=\"a4e96d128bx6e\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"8ae10d760ai8g\" class=\"uicontrol\">实例与镜像 &gt; 实例</b>。</p></li><li class=\"li step stepexpand\" id=\"a4e96d138b0a4\"><p id=\"a4e96d148bt8y\">在顶部菜单栏左上角处，选择地域。</p></li><li class=\"li step stepexpand\" id=\"bb0e5f118b2fl\" props=\"china\" data-cond-props=\"china\"><p id=\"06ff06101b8fd\">在<b data-tag=\"uicontrol\" id=\"c91bd879fa1dq\" class=\"uicontrol\">实例列表</b>页面，找到待操作的实例，在<b data-tag=\"uicontrol\" id=\"c91bd87bfa0nf\" class=\"uicontrol\">操作</b>中，选择<img placement=\"inline\" alt=\"image\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0881493761/p551505.png\" id=\"079ad2d096kev\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"c91bd87efa2b3\" class=\"uicontrol\"> &gt; 远程连接 &gt; 发送命令</b>。</p></li><li class=\"li step stepexpand\" id=\"a4e96d158bsa0\"><p id=\"f7e5aad11bnt3\">输入您需要执行的命令，单击<b data-tag=\"uicontrol\" id=\"8ae1348f0a542\" class=\"uicontrol\">执行</b>，即可在未登录Windows实例的情况下执行命令。</p><p id=\"f7e5aad21buq9\">更多有关云助手的信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-10\">云助手概述</a>。</p><img id=\"b3b8f8a08b85m\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4604178861/p542569.png\" alt=\"重启ECS实例\" placement=\"break\" class=\"image break\"></li></ol></section></section><section id=\"e454ebd474yaj\" class=\"section website-filter\" data-website=\"cn\"><h2 id=\"e455d638741lc\" data-tag=\"h3\" class=\"h3\"><b>没有明确的报错信息</b></h2><p id=\"e455d639748xb\">在远程连接失败时，如果您没有收到系统返回的报错信息，并且ECS实例是<b>运行中</b>的状态，然后再根据以下步骤进行排查：</p><ol id=\"3c4a8a128b5p3\"><li id=\"3c4a8a108bit9\"><p id=\"749889208bxsn\"><a title=\"\" class=\"xref\" href=\"#980b280086rwz\">步骤一：使用阿里云Workbench工具测试远程登录</a></p></li><li id=\"3d6aa0118b92r\"><p id=\"3d6aa0108bhse\"><a title=\"\" class=\"xref\" href=\"#c91c89b086xa7\">步骤二：检查是否有收到黑洞通知</a></p></li><li id=\"43fb61808b3x6\"><p id=\"43fb3a708by8i\"><a title=\"\" class=\"xref\" href=\"#edeb253086lj3\">步骤三：检查端口及安全组</a></p></li><li id=\"496b22908b6fz\"><p id=\"496afb808bmxk\"><a title=\"\" class=\"xref\" href=\"#acf0f860867xn\">步骤四：本地公网IP被云安全中心拦截</a></p></li><li id=\"4f0576118bti2\"><p id=\"4f0576108bn25\"><a title=\"\" class=\"xref\" href=\"#3d7eb9c18b7ul\">步骤五：检查防火墙配置</a></p></li><li id=\"5453f3808b8tq\"><p id=\"5453cc708bhj1\"><a title=\"\" class=\"xref\" href=\"#b7d2eb8086mwz\">步骤六：检查远程桌面服务</a></p></li><li id=\"5a8afc308b92w\"><p id=\"5a8ad5208b6ep\"><a title=\"\" class=\"xref\" href=\"#5e896f708bhyn\">步骤七：检查远程终端服务配置</a></p></li><li id=\"624dd5008b387\"><p id=\"624dadf08bfhm\"><a title=\"\" class=\"xref\" href=\"#c061edf086pl1\">步骤八：检查网络</a></p></li><li id=\"678dd3808b7ex\"><p id=\"678dac708bj07\"><a title=\"\" class=\"xref\" href=\"#c5e780f0862e5\">步骤九：检查CPU负载、带宽及内存使用情况</a></p></li><li id=\"6d66b6a08biyy\"><p id=\"6d668f908b0uz\"><a title=\"\" class=\"xref\" href=\"#d055f1c086tfr\">步骤十：检查系统的安全策略设置</a></p></li><li id=\"7539e3218b6f0\"><p id=\"7539e3208bvov\"><a title=\"\" class=\"xref\" href=\"#40a2bcb08576z\">步骤十一：检查杀毒软件</a></p></li><li id=\"7b0ea7908bg2q\"><p id=\"7b0e80808bhdg\"><a title=\"\" class=\"xref\" href=\"#64691ac080alr\">步骤十二：Windows注册表配置异常</a></p></li><li id=\"82ccc5718b6ou\"><p id=\"82ccc5708boew\"><a title=\"\" class=\"xref\" href=\"#af553c8085vg7\">步骤十三：Windows RDP自签证书到期</a></p></li></ol><section id=\"980b280086rwz\" class=\"section\"><h3 id=\"e455d63a74sip\" data-tag=\"h4\" class=\"h4\"><b>步骤一：使用阿里云Workbench工具测试远程登录</b></h3><p id=\"e455d63b74wdm\" data-spm-anchor-id=\"a2c9r.14518950.0.i2.68815e3bhqWD6h\">通过阿里云提供的Workbench工具进行远程登录，Workbench工具在远程登录出现异常时会返回具体的错误信息及解决方案。测试步骤如下：</p><ol id=\"e455fd40743cp\"><li id=\"e455fd4174jc8\"><p id=\"e455fd4274wsi\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"1db6d26186nbs\"><p id=\"1dd8b240865l7\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"8ae1d0ce0abok\" class=\"uicontrol\">实例与镜像 &gt; 实例</b>。</p></li><li class=\"li step stepexpand\" id=\"step-eh8-qtw-qsv\"><p id=\"1dd8b24186y1d\">在顶部菜单栏左上角处，选择地域。</p></li><li class=\"li step stepexpand\" id=\"step-vvh-f9x-djt\"><p id=\"1dd8b24286ou2\">在<b data-tag=\"uicontrol\" id=\"8ae1d0d40a0oc\" class=\"uicontrol\">实例列表</b>页面，找到需要连接的实例，单击该实例对应<b data-tag=\"uicontrol\" id=\"8ae1d0d60aahk\" class=\"uicontrol\">操作</b>列下的<b data-tag=\"uicontrol\" id=\"8ae1d0d80avbl\" class=\"uicontrol\">远程连接</b>。</p></li><li id=\"e455fd43740u9\"><p id=\"e455fd4474lgq\">在弹出的<b data-tag=\"uicontrol\" id=\"8ae1f7d40a6b6\" class=\"uicontrol\">远程</b><b data-tag=\"uicontrol\" id=\"8ae1f7d60a5jf\" class=\"uicontrol\">与命令</b>对话框中，单击<b data-tag=\"uicontrol\" id=\"8ae1f7d80a5ka\" class=\"uicontrol\">Workbench远程连接</b>对应的<b data-tag=\"uicontrol\" id=\"8ae1f7da0agfb\" class=\"uicontrol\">立即登录</b>。 </p></li><li id=\"e455fd4574uwo\"><p id=\"e455fd46746h1\">Workbench工具将自动填充登录目标实例所需的基本信息，请确认基本信息的正确性并输入登录的用户名和认证信息。并根据以下结果进行处理： </p><ul id=\"e455fd4774beo\"><li id=\"e455fd4874a4x\"><p id=\"e455fd49742ds\">如仍然无法登录，Workbench工具会返回错误提示和解决方案，请根据系统提示进行处理。处理完毕后重新使用Workbench工具进行远程登录测试。为了便于您解决问题，以下列举Workbench工具使用时常见的异常问题： \n<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/through-vnc-or-workbench-instance-remote-connection-problems#f799836096lr6\">Workbench远程连接问题（Windows）</a>。</p></li><li id=\"e455fd5074c4z\" data-spm-anchor-id=\"a2c9r.14518950.0.i3.68815e3bntbSoW\"><p id=\"e455fd5174f5b\">如可以通过Workbench工具正常登录，但无法通过本地服务器远程登录，说明远程连接的端口及服务正常，您可以自行排查。</p></li></ul></li></ol></section><section id=\"c91c89b086xa7\" class=\"section\"><h3 id=\"e456245174u5b\" data-tag=\"h4\" class=\"h4\"><b>步骤二：检查是否有收到黑洞通知</b></h3><p id=\"e456245274d3j\">请检查是否有收到黑洞通知，黑洞期间无法支持公网访问服务器。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/document_detail/40032.html\">阿里云黑洞策略</a>。</p></section><section id=\"edeb253086lj3\" class=\"section\"><h3 id=\"e456245374wyu\" data-tag=\"h4\" class=\"h4\"><b>步骤三：检查端口及安全组</b></h3><p id=\"e456245474r01\">检查安全组规则是否有限制，具体操作如下：</p><ol id=\"ada6b70186kz9\"><li id=\"abf0c9a086xva\"><p id=\"aac6054086kqf\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"e4562458747go\"><p id=\"e456245974ywk\">在顶部菜单栏左上角处，选择地域。</p></li><li id=\"e456245a746eb\" data-spm-anchor-id=\"a2c9r.14518950.0.i1.310f5e3bFdBaav\"><p id=\"e456245b74xe6\">在<b data-tag=\"uicontrol\" id=\"8ae245fd0ar76\" class=\"uicontrol\">实例列表</b>页面，单击对应的实例ID。</p></li><li id=\"e456245c741ul\" data-spm-anchor-id=\"a2c9r.14518950.0.i1.310f5e3bFdBaav\"><p id=\"e456245d74cxi\">在<b data-tag=\"uicontrol\" id=\"8ae246030akns\" class=\"uicontrol\">实例详情</b>页面，单击<b data-tag=\"uicontrol\" id=\"8ae26d010a1t7\" class=\"uicontrol\">安全组</b>页签，在<b data-tag=\"uicontrol\" id=\"8ae26d030a84s\" class=\"uicontrol\">安全组列表</b>区域，单击<b data-tag=\"uicontrol\" id=\"c91ce9e1fahhz\" class=\"uicontrol\">操作</b>列的<b data-tag=\"uicontrol\" id=\"3fec20c01bj97\" class=\"uicontrol\"><span data-tag=\"ph\" id=\"51a665a01b03c\" props=\"china\" data-cond-props=\"china\" class=\"ph\">管理规则</span></b><span data-tag=\"ph\" id=\"4810efb01bc5w\" class=\"ph\"></span>。</p></li><li id=\"e456245e74lek\"><p id=\"e456245f74s1z\">选择安全组规则方向。</p></li><li id=\"e456246074tue\"><p id=\"e456246174fnl\">在<b data-tag=\"uicontrol\" id=\"adc2ac901b3by\" class=\"uicontrol\">安全组规则</b>页面，您可以选择以下任意一种方式添加安全组规则，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。\n</p><ul id=\"e4562462742xj\"><li id=\"e456246374cnh\"><p id=\"e4564b60748kz\">方式一：快速添加安全组规则 \n</p><ul id=\"e4564b6174xv8\"><li id=\"e4564b6274rw4\"><p id=\"e4564b6374v8g\"><b data-tag=\"uicontrol\" id=\"af6b7a901b018\" class=\"uicontrol\">授权策略</b><b>：</b>允许</p></li><li id=\"e4564b647412i\"><p id=\"e4564b65741qk\"><b data-tag=\"uicontrol\" id=\"b15ebf101bgi6\" class=\"uicontrol\">端口范围</b><b>：</b>RDP（3389）</p></li><li id=\"e4564b6674uj3\"><p id=\"e4564b67743g5\"><b data-tag=\"uicontrol\" id=\"b3f632d01bisq\" class=\"uicontrol\">授权对象</b><b>：</b>0.0.0.0/0（代表所有IP访问）</p></li></ul></li><li id=\"e4564b69749ol\"><p id=\"e4564b6a74ul2\">方式二：手动添加安全组规则 \n</p><ul id=\"e4564b6b749io\"><li id=\"e4564b6c74zy0\"><p id=\"e4564b6d74ix0\"><b data-tag=\"uicontrol\" id=\"b6bdde501bl2g\" class=\"uicontrol\">授权策略</b><b>：</b>允许</p></li><li id=\"e4564b6e749b6\"><p id=\"e4564b6f74x83\"><b data-tag=\"uicontrol\" id=\"b88b4b501bx1r\" class=\"uicontrol\">优先级</b><b>：</b>1（代表安全规则中优先级最高，数字越小优先级越高）</p></li><li id=\"e4564b7074hcv\"><p id=\"e4564b7174d1x\"><b data-tag=\"uicontrol\" id=\"baa551b01bsqj\" class=\"uicontrol\">协议类型</b><b>：</b>自定义（TCP）</p></li><li id=\"e4564b7274fr6\"><p id=\"e4564b737445h\"><b data-tag=\"uicontrol\" id=\"bcd243d01b5mb\" class=\"uicontrol\">端口范围</b><b>：</b>如果自定义远程端口为33899，则设置为33899</p></li><li id=\"e4564b7474mcr\" data-spm-anchor-id=\"a2c9r.14518950.0.i5.673aiQGniQGnTN\"><p id=\"e456727074wz0\"><b data-tag=\"uicontrol\" id=\"be7f09701bzf6\" class=\"uicontrol\">授权对象</b><b>：</b>0.0.0.0/0（代表所有IP访问）</p></li></ul></li></ul></li><li id=\"e456727374yj5\" data-spm-anchor-id=\"a2c9r.12641779.0.i4.40d85e3bwEi3CJ\"><p id=\"e456727474hdq\">通过<code data-tag=\"code\" class=\"code\">IP:端口</code>的方式进行远程桌面连接。连接方式类似如下。</p><img placement=\"break\" alt=\"远程桌面\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8482822761/p540464.png\" id=\"6aba9aa087b5g\" class=\"image break\"></li><li id=\"e456727574qt7\"><p id=\"894c757086szy\">使用以下命令，进行端口测试，判断端口是否正常。</p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"e43b224174cxd\" class=\"pre codeblock language-javascript\"><code>telnet [$IP] [$Port]</code></pre><div id=\"e4567277748k2\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><section id=\"e4567278742od\" class=\"section\"><ul id=\"e456727a74sk9\"><li id=\"e456727b74o6z\"><p id=\"e456727c742dn\">[$IP]指Windows实例的IP地址。</p></li><li id=\"e456727d74ihf\"><p id=\"e456727e74auz\">[$Port]指Windows实例的RDP端口号。</p></li></ul></section></div></div><p id=\"e456727f7415l\">系统显示类似如下，比如执行<code data-tag=\"code\" class=\"code\">telnet 192.168.0.1 4389</code>命令，正常情况下返回结果类似如下。 </p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"e43b224274brz\" class=\"pre codeblock language-javascript\"><code>Trying 192.168.0.1 ...\nConnected to 192.168.0.1  4389.\nEscape character is '^]'</code></pre><p id=\"8ad2522086on7\">如果端口测试失败，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/troubleshooting-for-ping-attempts-to-pass-the-server-and-port-disconnection\">使用ping命令正常但端口不通时的端口可用性探测说明</a>进行排查。 </p></li></ol></section><section id=\"acf0f860867xn\" class=\"section\"><h3 id=\"e456728174f3k\" data-tag=\"h4\" class=\"h4\"><b>步骤四：本地公网IP被云安全中心拦截</b></h3><p id=\"e456728274gvj\" data-spm-anchor-id=\"a2c9r.14518950.0.i32.35095e3bOGbcgv\">如果在一个本地客户端网络连接ECS服务器时多次输入错误的登录信息，会导致此IP远程登录ECS的请求被拦截。您可以在云安全中心的<b>设置</b>中，添加本地IP至白名单，这样就不会对本地IP远程登录此服务器进行拦截，具体操作如下：</p><ol id=\"ol-hya-c50-38s\" class=\"ol\" data-spm-anchor-id=\"a2c4g.11186623.2.i10.62ea39faS9jcE2\"><li id=\"li-tax-4o7-s2z\" class=\"li\" data-spm-anchor-id=\"a2c4g.11186623.2.i9.62ea39faS9jcE2\"><p id=\"e456728374cwc\">登录<a class=\"\" target=\"_blank\" href=\"https://yundun.console.aliyun.com/?p=sas\">云安全中心控制台</a>。</p></li><li id=\"li-58w-xyc-srr\" class=\"li\" data-spm-anchor-id=\"a2c4g.11186623.2.i11.62ea39faS9jcE2\"><p id=\"aae86c4086xv3\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"8ae330510aekp\" class=\"uicontrol\">系统配置 &gt; 功能设置</b>。</p></li><li id=\"li-r77-nk3-r3l\" class=\"li\"><p id=\"b4dc55e086bba\">在<b data-tag=\"uicontrol\" id=\"8ae330550alm3\" class=\"uicontrol\">设置</b>页签的<b data-tag=\"uicontrol\" id=\"8ae330570ak12\" class=\"uicontrol\">其它配置</b>子页签，单击<b data-tag=\"uicontrol\" id=\"8ae330590aa3g\" class=\"uicontrol\">安全管控</b>区域的<b data-tag=\"uicontrol\" id=\"8ae3305b0admt\" class=\"uicontrol\">配置</b>，跳转至<b data-tag=\"uicontrol\" id=\"8ae3305d0aqb4\" class=\"uicontrol\">安全管控</b>控制台。</p></li><li id=\"fd74838186ftx\"><p id=\"fd74838086s62\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"9d9ac7801b77z\" class=\"uicontrol\">白名单管理 &gt; IP白名单</b>。</p></li><li id=\"0a9ac151863g6\"><p id=\"0a9ac15086yl9\">在<b data-tag=\"uicontrol\" id=\"a051f8401bhsj\" class=\"uicontrol\">IP白名单</b>页面，单击<b data-tag=\"uicontrol\" id=\"a2b822d01bmfx\" class=\"uicontrol\">添加</b>。</p><p id=\"0ea5260086teo\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/security-center/user-guide/enable-features-on-the-other-settings-tab#section-hma-ab3-i7i\">安全管控</a>。</p></li></ol></section><h3 id=\"3d7eb9c18b7ul\" data-tag=\"h4\" class=\"h4\"><b>步骤五：检查防火墙配置</b></h3><div type=\"note\" id=\"3d7eb9c28brmx\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3d7eb9c38ba2i\">只有在已授权可关闭防火墙的情况下，才能进行该项排查。请确认防火墙是否已关闭，如果没有关闭，则通过调整防火墙配置策略修复，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-configure-a-firewall-for-remote-connection-to-a-windows-instance\">如何配置Windows实例远程连接的防火墙</a>。</p></div></div><ol id=\"3d7eb9c48bdpd\"><li id=\"3d7eb9c58bbzp\"><p id=\"3d7eb9c68b4d3\">使用VNC方式登录Windows实例。</p><p id=\"3d7eb9c78by3v\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"3d7eb9c88bpo7\"><p id=\"3d7eb9c98bbn3\">在菜单栏选择<b data-tag=\"uicontrol\" id=\"c3e5c9d01bjcc\" class=\"uicontrol\">开始&gt;控制面板</b>。</p></li><li id=\"3d7eb9ca8b9af\"><p id=\"3d7eb9cb8bbvw\"><b data-tag=\"uicontrol\" id=\"c73b36601b951\" class=\"uicontrol\">查看方式</b>选择<b data-tag=\"uicontrol\" id=\"c5285bf01bbpi\" class=\"uicontrol\">小图标</b>，单击<b data-tag=\"uicontrol\" id=\"c8ce0b601bqd5\" class=\"uicontrol\">Windows 防火墙</b>。</p><img id=\"3d7eb9cd8bz8m\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9643212761/p519622.png\" class=\"image break\"></li><li id=\"3d7eb9ce8bdcn\"><p id=\"3d7eb9cf8bmll\">在<b data-tag=\"uicontrol\" id=\"8ae37e750aft0\" class=\"uicontrol\">Windows防火墙</b>界面，单击<b data-tag=\"uicontrol\" id=\"8ae37e770aw9w\" class=\"uicontrol\">高级设置</b>。</p></li><li id=\"3d7eb9d08bzyr\"><p id=\"3d7eb9d18btk2\">启用防火墙配置。</p><ol id=\"3d7eb9d28bwgp\"><li id=\"3d7eb9d38bymq\"><p id=\"3d7eb9d48bpim\">在<b data-tag=\"uicontrol\" id=\"8ae37e7e0a6m3\" class=\"uicontrol\">高级安全 Windows 防火墙</b><b>，</b>单击<b data-tag=\"uicontrol\" id=\"8ae37e810anar\" class=\"uicontrol\">Windows防火墙属性</b>。</p><img id=\"3d7eb9d68bl2b\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8643212761/p519624.png\" class=\"image break\"></li><li id=\"3d7eb9d78blc6\"><p id=\"3d7eb9d88bqcf\">选择<b data-tag=\"uicontrol\" id=\"8ae37e870awql\" class=\"uicontrol\">启用（推荐）</b>，单击<b data-tag=\"uicontrol\" id=\"8ae37e8a0apsc\" class=\"uicontrol\">应</b><b data-tag=\"uicontrol\" id=\"8ae37e8d0aqh6\" class=\"uicontrol\">用(</b><b data-tag=\"uicontrol\" id=\"8ae3a5800a841\" class=\"uicontrol\">A)</b>。 </p><p id=\"3d7eb9d98bnxd\">建议将<b data-tag=\"uicontrol\" id=\"2e329e301brax\" class=\"uicontrol\">域配置文件</b>、<b data-tag=\"uicontrol\" id=\"30396ab01bjlu\" class=\"uicontrol\">专用配置文件</b>、<b data-tag=\"uicontrol\" id=\"31c848101bwi9\" class=\"uicontrol\">公用配置文件</b>选项卡下的防火墙全部启用。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8643212761/p519625.png\" id=\"3d7eb9db8bcsm\" class=\"image break\"></li></ol></li><li id=\"3d7eb9dc8b038\"><p id=\"3d7eb9dd8bbms\">在<b data-tag=\"uicontrol\" id=\"8ae3a58a0aiof\" class=\"uicontrol\">高级安全 Windows 防火墙</b>，单击<b data-tag=\"uicontrol\" id=\"8ae3a58c0astr\" class=\"uicontrol\">入站规则</b>，在右侧拉至最下方，右键单击<b data-tag=\"uicontrol\" id=\"8ae3a58e0aylt\" class=\"uicontrol\">远程桌面-用户模</b><b data-tag=\"uicontrol\" id=\"8ae3a5900apor\" class=\"uicontrol\">式(</b><b data-tag=\"uicontrol\" id=\"8ae3a5920ab35\" class=\"uicontrol\">TCP-In)</b>，选择<b>启动规则(E)</b>。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8643212761/p519623.png\" id=\"3d7eb9de8bdw4\" class=\"image break\"></p></li></ol><p id=\"3d7eb9df8bo3w\" data-spm-anchor-id=\"a2c9r.12641779.0.i12.6d5dxMTKxMTKdB\">更多关于防火墙的设置信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-configure-a-firewall-for-remote-connection-to-a-windows-instance\">设置Windows实例远程连接防火墙</a>。</p><section id=\"b7d2eb8086mwz\" class=\"section\"><h3 id=\"e456998374qif\" data-tag=\"h4\" class=\"h4\"><b>步骤六：检查远程桌面服务</b></h3><p id=\"e456998474k39\">您可以查看Windows服务器的系统是否开启了远程桌面服务。具体操作如下：</p><ol id=\"e456998574kr5\"><li id=\"e456998674ez1\"><p id=\"e456998774j9j\">使用VNC方式登录Windows实例。</p><p id=\"8b018b3086jql\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"e45699887480q\"><p id=\"e456998974zbm\">右键单击开始菜单，单击<b data-tag=\"uicontrol\" id=\"8ae3f3a40ar3w\" class=\"uicontrol\">系统</b>。</p></li><li id=\"dba74de186lk0\"><p id=\"dba74de086v21\">在<b data-tag=\"uicontrol\" id=\"8ae3f3a80awp9\" class=\"uicontrol\">系统</b>界面，单击<b data-tag=\"uicontrol\" id=\"8ae3f3aa0aq1f\" class=\"uicontrol\">远程设置</b>。</p><img placement=\"break\" alt=\"远程设置\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p540024.png\" id=\"baf6829086r7r\" class=\"image break\"></li><li id=\"e456998a74ozr\"><p id=\"e456998b74gip\">在<b data-tag=\"uicontrol\" id=\"8ae41ab10ach0\" class=\"uicontrol\">远程桌面</b>区域，选中<b data-tag=\"uicontrol\" id=\"8ae41ab30am2p\" class=\"uicontrol\">允许远程连接到此</b><b data-tag=\"uicontrol\" id=\"8ae41ab60amw5\" class=\"uicontrol\">计算</b><b data-tag=\"uicontrol\" id=\"8ae41ab90a1bl\" class=\"uicontrol\">机(</b><b data-tag=\"uicontrol\" id=\"8ae41abc0a46o\" class=\"uicontrol\">L)</b>，单击<b data-tag=\"uicontrol\" id=\"8ae41abe0a5k3\" class=\"uicontrol\">确定</b>。 </p><img placement=\"break\" alt=\"设置远程\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p540023.png\" id=\"b58a43f186r1d\" class=\"image break\"></li><li id=\"e456998c74rtb\"><p id=\"6e4893b0863cf\">启动<b data-tag=\"uicontrol\" id=\"8ae441c40a4mx\" class=\"uicontrol\">Remote Desktop Services</b>服务。</p><p id=\"6bd71e8086ngt\">在<b data-tag=\"uicontrol\" id=\"8ae441c70atze\" class=\"uicontrol\">开始</b>菜单中，选择<b data-tag=\"uicontrol\" id=\"8ae441ca0azf7\" class=\"uicontrol\">管理工具&gt;组件服务&gt;服务（本地）</b>，在右侧的菜单窗口中找到<b data-tag=\"uicontrol\" id=\"270fd5f01bgtx\" class=\"uicontrol\">Remote Desktop Services</b>服务，检查是否启动，如果没有启动，则需启动。</p><img placement=\"break\" alt=\"启动\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p540028.png\" id=\"677f0f008644c\" class=\"image break\"></li><li id=\"e456998e74nc3\"><p id=\"e456998f74cls\">加载远程桌面服务所依赖的驱动和服务。</p><p id=\"860f4ed086thc\">为了提高系统安全性，有时错误地将远程桌面服务所依赖的某些关键服务禁用，导致远程桌面服务异常。可通过以下操作进行检查。 \n</p><ol id=\"ff94782186yjk\"><li id=\"e456c09274qlo\" data-spm-anchor-id=\"a2c9r.12641779.0.i1.6d5dxMTKxMTKdB\"><p id=\"e456c0937432k\">右键单击开始菜单，单击<b data-tag=\"uicontrol\" id=\"8ae468d30ar7p\" class=\"uicontrol\">运行</b>，输入<code data-tag=\"code\" class=\"code\">msconfig</code>，单击<b data-tag=\"uicontrol\" id=\"245b64501bxu3\" class=\"uicontrol\">确定</b>。</p><img placement=\"break\" alt=\"msconfig\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p540030.png\" id=\"297e9a3086e6d\" class=\"image break\"></li><li id=\"e456c09474jkf\" data-spm-anchor-id=\"a2c9r.12641779.0.i5.6d5dxMTKxMTKdB\"><p id=\"e456c09574i4z\">在<b data-tag=\"uicontrol\" id=\"8ae468db0ay1h\" class=\"uicontrol\">系统配置</b>对话框中，单击<b data-tag=\"uicontrol\" id=\"8ae468dd0aur4\" class=\"uicontrol\">常规</b>页签，选中<b data-tag=\"uicontrol\" id=\"8ae468df0ab1u\" class=\"uicontrol\">正常</b><b data-tag=\"uicontrol\" id=\"8ae468e20af5z\" class=\"uicontrol\">启</b><b data-tag=\"uicontrol\" id=\"8ae468e50arz5\" class=\"uicontrol\">动(</b><b data-tag=\"uicontrol\" id=\"8ae468e80abqv\" class=\"uicontrol\">N)</b>，单击<b data-tag=\"uicontrol\" id=\"8ae468ea0a5c9\" class=\"uicontrol\">确定</b>。 <img src=\"data:image/png;base64,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\" alt=\"正常启动\" placement=\"break\" id=\"74c4c640861zh\" class=\"image break\"></p></li><li id=\"a96bee50869ip\"><p id=\"a96bc74086omg\">重启ECS实例。</p><p id=\"b50571a086oly\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li></ol></li></ol></section><section id=\"5e896f708bhyn\" class=\"section\"><h3 id=\"4efabd218bg2f\" data-tag=\"h4\" class=\"h4\"><b>步骤七：检查远程终端服务配置</b></h3><p id=\"4efabd228b2zs\">无法连接Windows实例的远程桌面可能是由于以下远程终端服务的配置异常。</p><div type=\"note\" id=\"4efabd238b4y7\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"4efabd248bq1x\">本示例以Windows Server 2008为例，其他Windows Server版本操作类似。</p></div></div><section id=\"4efabd258bzpc\" class=\"section\"><h4 id=\"4efabd268bqy5\" data-tag=\"h5\" class=\"h5\"><b>异常一：服务器侧自签名证书损坏</b></h4><p id=\"4efabd278b02i\">本地客户端如果是Windows 7以上版本的系统，会尝试与云服务器ECS建立TLS连接。若云服务器ECS侧用于TLS连接的自签名证书损坏，则会导致远程连接失败。</p><ol id=\"4efabd288bjrd\"><li id=\"4efabd298buog\"><p id=\"4efabd2a8b0up\">使用VNC方式登录Windows实例。</p><p id=\"4efabd2b8bvan\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"4efabd2c8bjg2\"><p id=\"4efabd2d8bzt4\">选择<b data-tag=\"uicontrol\" id=\"8ae616800arta\" class=\"uicontrol\">开始&gt;管理工具&gt;远程桌面服务&gt;远程桌面会话主机配置</b>。 </p><img id=\"4efabd2f8b36t\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p540228.png\" alt=\"远程桌面会话主机配置\" placement=\"break\" class=\"image break\"></li><li id=\"4efabd308br4m\"><p id=\"4efabd318b30c\">在连接区域，右键单击<b data-tag=\"uicontrol\" id=\"17e2cba01bm74\" class=\"uicontrol\">RDP-Tcp</b>，然后单击<b data-tag=\"uicontrol\" id=\"8ae616870as6u\" class=\"uicontrol\">属性</b>。</p></li><li id=\"4efabd328bgge\"><p id=\"4efabd338b9qk\">在<b data-tag=\"uicontrol\" id=\"1e1010501bqs1\" class=\"uicontrol\">RDP-Tcp属性</b>窗口，将<b data-tag=\"uicontrol\" id=\"19d28db01bu2d\" class=\"uicontrol\">安全层</b>修改成<b data-tag=\"uicontrol\" id=\"1b77b2301btrk\" class=\"uicontrol\">RDP安全层</b>，单击<b data-tag=\"uicontrol\" id=\"8ae63d910aqmc\" class=\"uicontrol\">确定</b>。</p><img id=\"4efabd358b3wx\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p540231.png\" alt=\"RDP 安全层\" placement=\"break\" class=\"image break\"></li><li id=\"4efabd368bpcq\"><p id=\"4efabd378busy\">在操作区域，单击<b data-tag=\"uicontrol\" id=\"8ae664a10al9w\" class=\"uicontrol\">禁用连接</b>，再单击<b data-tag=\"uicontrol\" id=\"8ae664a30abiv\" class=\"uicontrol\">启用连接</b>。 </p><img id=\"4efabd398b711\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p540264.png\" alt=\"禁用连接\" placement=\"break\" class=\"image break\"><img id=\"4efabd3b8b7lz\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p540271.png\" alt=\"启用连接\" placement=\"break\" class=\"image break\"></li></ol></section><section id=\"4efabd3c8bzki\" class=\"section\"><h4 id=\"4efabd3d8b9tg\" data-tag=\"h5\" class=\"h5\"><b>异常二：远程桌面会话主机配置连接被禁用</b></h4><p id=\"4efabd3e8bqs9\">使用<code data-tag=\"code\" class=\"code\">netstat</code>命令查询，发现端口未正常监听。</p><p id=\"4efabd3f8b0tt\">使用VNC方式登录Windows实例后，发现远程桌面RDP连接属性配置文件被禁用，重新启用<b data-tag=\"uicontrol\" id=\"8ae664af0asg3\" class=\"uicontrol\">RDP-Tcp连接</b>即可<b>，</b>具体操作，请参见<a title=\"\" class=\"xref\" href=\"#4efabd268bqy5\">异常一：服务器侧自签名证书损坏</a>。</p><img id=\"4efabd418bbq9\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p540271.png\" alt=\"启用连接\" placement=\"break\" class=\"image break\"></section><section id=\"4efabd428bsjo\" class=\"section\"><p id=\"4efabd438bele\" data-tag=\"h5\" class=\"h5\"><b>异常三：终端服务器角色配置</b></p><p id=\"4efabd448bek4\">在使用远程桌面访问Windows实例时，可能会出现如下提示。 <img id=\"4efabd458b522\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8643212761/p519631.png\" class=\"image break\"></p><p id=\"4efabd468b0cl\">这种情况一般是由于在服务器上安装配置了<b data-tag=\"uicontrol\" id=\"8ae664bb0ak8q\" class=\"uicontrol\">终端服务器</b>，但是没有配置有效的访问授权导致的，可参考以下三种解决方案处理：</p><ul id=\"4efabd478bpfm\"><li id=\"4efabd488b3wu\"><p id=\"4efabd498bu0q\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-error-message-no-remote-desktop-authorization-server-can-provide-a-license-is-prompted-for-remote-login-to-a-windows-instance\">Windows服务器远程桌面提示“没有远程桌面授权服务器可以提供许可证”错误</a></p></li><li id=\"4efabd4a8bupf\"><p id=\"4efabd4b8bytw\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-that-indicates-lack-of-terminal-server-user-access-permissions-appears-when-i-connect-to-a-windows-instance-by-using-remote-desktop\">远程登录Windows实例报“远程桌面用户组没有该权限”错误</a></p></li><li id=\"4efabd4c8bb1w\"><p id=\"4efabd4d8b7kv\">如果是安装了终端服务器角色导致的，需要登录服务器鼠标右键单击<b data-tag=\"uicontrol\" id=\"8ae68bba0az1c\" class=\"uicontrol\">计算机</b>，选择<b data-tag=\"uicontrol\" id=\"8ae68bbc0ata7\" class=\"uicontrol\">角色&gt;删除角色服务</b>。</p></li></ul></section></section><section id=\"c061edf086pl1\" class=\"section\"><h3 id=\"e456c09774eii\" data-tag=\"h4\" class=\"h4\"><b>步骤八：检查网络</b></h3><p id=\"e456c09874ykm\">无法正常远程连接Windows实例时，需要先检查网络是否正常。</p><ol id=\"e456c09974axv\"><li id=\"e456c09a743ad\"><p id=\"7bd5436086l64\">使用其他网络环境中（不同网段或不同运营商）的电脑连接对比测试，判断是本地网络问题还是服务器端的问题。</p><ul id=\"cf7d6a1186x08\"><li id=\"ced9d71186vsj\"><p id=\"ced9d710868cc\">如果是本地网络问题或运营商问题，请联系本地IT人员或运营商解决。</p></li><li id=\"d1c66fb086tik\"><p id=\"d1c648a086jsx\">如果是网卡驱动存在异常，则重新安装。排除本地网络故障后进行下一步检查。</p></li></ul></li><li id=\"e456c09c74r03\"><p id=\"e456c09d74bzn\">在本地客户端使用<code data-tag=\"code\" class=\"code\">ping</code>命令测试与实例的网络连通性。 \n</p><ul id=\"e456c09e74rp5\"><li id=\"e456c09f74r5w\"><p id=\"e456c0a074q97\">网络异常时，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-capture-data-packets-when-a-network-exception-occurs\">网络异常时如何抓取数据包</a>进行排查。</p></li><li id=\"e456c0a174s1i\"><p id=\"e456c0a274smh\">当出现ping丢包或ping不通时，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-the-ping-command-packet-loss-or-not-the-link-test-method\">使用ping命令丢包或不通时的链路测试方法</a>进行排查。</p></li><li id=\"e456c0a374t97\"><p id=\"e456c0a474rb6\">如果出现间歇性丢包，ECS实例的网络一直处于不稳定状态时，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-the-ping-command-to-test-intermittent-packet-loss-of-the-ip-address-of-an-ecs-instance\">使用ping命令测试ECS实例的IP地址间歇性丢包</a>进行解决。</p></li></ul></li><li id=\"e456e7a174kay\"><p id=\"e456e7a274dki\">在实例中使用ping命令测试与客户端的连通性，提示<b data-tag=\"uicontrol\" id=\"8ae6b2c70ayae\" class=\"uicontrol\">一般故障</b>错误时，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/when-you-ping-the-internet-address-of-a-windows-instance-the-system-prompts-general-fault\">Windows实例ping外网地址提示“一般故障”</a>进行解决。</p></li></ol></section><section id=\"c5e780f0862e5\" class=\"section\"><h3 id=\"e456e7a374u57\" data-tag=\"h4\" class=\"h4\"><b>步骤九：检查CPU负载、带宽及内存使用情况</b></h3><p id=\"6052f1c0866vc\">无法正常远程连接Windows实例时，可能是因为CPU负载、带宽不足或内存不足导致。</p><ol id=\"e456e7a4740vv\"><li id=\"e456e7a574j7f\"><p id=\"8f2befa086i3m\">根据是否存在CPU负载过高情况，选择相应操作。</p><ul id=\"c507e3a186j4p\"><li id=\"c3f932c086wmp\"><p id=\"c3f90bb086c7r\">不存在CPU负载过高情况，请继续执行步骤2继续排查。</p></li><li id=\"c90f893086tp1\"><p id=\"c90f622086xm8\">如果CPU负载过高情况，请参考本步骤解决问题。\n</p><ul id=\"e456e7a774eo2\"><li id=\"e456e7a874fcz\"><p id=\"e456e7a974ro8\">检查CPU负载过高时，通过实例详情页面的终端登录实例，检查后台是否正在执行Windows Update操作。若存在Windows Update操作，则CPU负载过高是正常结果，请继续等待执行完成。</p></li><li id=\"e456e7ac743os\"><p id=\"e456e7ad7448o\">若应用程序有大量的磁盘访问、网络访问行为、高计算需求，CPU负载过高是正常结果。建议您升配实例规格来解决资源瓶颈问题，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-of-instance-configuration-changes\">升降配方式概述</a>。</p><div type=\"note\" id=\"5888f79086m2f\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"5ad5a6b0867tz\">CPU负载过高的解决方法，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-if-cpu-utilization-is-high-on-a-windows-instance\">Windows系统ECS实例的CPU使用率较高的解决方法</a>。</p></div></div></li></ul></li></ul></li><li id=\"e456e7b174waj\" data-spm-anchor-id=\"a2c9r.12641779.0.i1.40d8kG22kG22UK\"><p id=\"e456e7b274wkc\">排查是否存在公网带宽不足问题。 </p><p id=\"082ef3d086dwu\">无法远程连接可能是公网带宽不足导致的，具体排查方法如下。</p><ol id=\"e4570eb0749p5\" start=\"1\"><li id=\"e4575cd0740cd\"><p id=\"abed14c286vbz\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com\">ECS管理控制台</a>。</p></li><li id=\"abed14c386o4t\"><p id=\"abed14c486yba\">在顶部菜单栏左上角处，选择地域。</p></li><li id=\"abed14c586j2g\" data-spm-anchor-id=\"a2c9r.14518950.0.i1.310f5e3bFdBaav\"><p id=\"abed14c686tnf\">在<b data-tag=\"uicontrol\" id=\"8ae6d9dc0a4sj\" class=\"uicontrol\">实例列表</b>页面，单击对应的实例ID，在<b data-tag=\"uicontrol\" id=\"8ae6d9de0aw3y\" class=\"uicontrol\">基本信息</b>区域，查看<b data-tag=\"uicontrol\" id=\"8ae6d9e00a1it\" class=\"uicontrol\">当前使用带宽</b>。</p><p id=\"1bd0fe808770c\">如果服务器带宽为0 Mbps，说明购买实例时没有购买公网带宽，您可以通过升级带宽解决，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-of-instance-configuration-changes#ChangeBandwidth\">修改公网带宽</a>。</p></li></ol></li><li id=\"e4575cd874doz\" data-spm-anchor-id=\"a2c9r.12641779.0.i1.40d8kG22kG22UK\"><p id=\"e4575cd974tnu\">排查是否存在内存不足问题。</p><p id=\"146ace7086ksv\">远程连接Windows实例后，不能正常显示桌面并直接退出，也没有错误信息提示。这种情况可能是服务器内存不足导致，需要检查服务器的内存使用情况。具体操作如下。 </p><ol id=\"4759711186bsn\"><li id=\"3d34173086bdf\"><p id=\"3d34173186shp\">使用VNC方式登录Windows实例。</p><p id=\"3d34173286mpx\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"e45783e574lju\"><p id=\"e45783e874gi5\">选择<b data-tag=\"uicontrol\" id=\"0e79e3f01b43e\" class=\"uicontrol\">开始&gt;管理工具&gt;事件查看器</b>，查看是否存在内存资源不足的警告日志信息。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/troubleshooting-windows-low-virtual-memory-problem\">Windows 虚拟内存不足问题的处理</a>。</p></li></ol></li></ol></section><section id=\"d055f1c086tfr\" class=\"section\"><h3 id=\"e457aafe74jvm\" data-tag=\"h4\" class=\"h4\"><b>步骤十：检查系统的安全策略设置</b></h3><p id=\"e457aaff74ydx\" data-spm-anchor-id=\"a2c9r.12641779.0.i10.6d5dhZW1hZW17b\">您可以查看Windows服务器上是否有阻止远程桌面连接的相关安全策略。具体操作如下。</p><ol id=\"9eae55a1865fq\"><li id=\"9cc65bc086nf2\"><p id=\"98168f5186x5u\">使用VNC方式登录Windows实例。</p><p id=\"98168f5286idz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"e457ab0374ji7\"><p id=\"e457ab0474v2q\">选择<b data-tag=\"uicontrol\" id=\"8ae700f20arta\" class=\"uicontrol\">开始&gt;控制面板&gt;管理工具</b>，双击<b data-tag=\"uicontrol\" id=\"8ae727f00aags\" class=\"uicontrol\">本地安全策略</b>。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9643212761/p519626.png\" class=\"image break\"></p></li><li id=\"e457ab05747y2\"><p id=\"e457ab0674cgu\">在<b data-tag=\"uicontrol\" id=\"8ae727f50asxc\" class=\"uicontrol\">本地安全策略</b>界面中，单击<b data-tag=\"uicontrol\" id=\"8ae727f70an3h\" class=\"uicontrol\">IP安全策略，在本地计算机</b>，根据是否存在相关的安全策略，选择相应操作。</p><ol id=\"10f7143186un1\"><li id=\"1070cd3086t4u\"><p id=\"22cfb68086dfa\">存在相关安全策略，删除或重新编辑该安全策略</p><ul id=\"773a2021868w0\"><li id=\"76859d3186qjr\"><p id=\"76859d3086oo0\">删除安全策略：右键单击相关策略，选择<b data-tag=\"uicontrol\" id=\"8ae728000a5ol\" class=\"uicontrol\">删</b><b data-tag=\"uicontrol\" id=\"8ae728030aw1s\" class=\"uicontrol\">除(</b><b data-tag=\"uicontrol\" id=\"8ae728060a49l\" class=\"uicontrol\">D)</b>，在弹出的对话框，单击<b data-tag=\"uicontrol\" id=\"8ae728090ahdu\" class=\"uicontrol\">是</b>。</p><img id=\"9cf2585086c9b\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p540173.png\" alt=\"删除安全策略\" placement=\"break\" class=\"image break\"></li><li id=\"7a4ae2918661n\"><p id=\"7a4ae290863ak\">双击打开该IP的安全策略，重新配置以允许远程桌面连接，然后再使用远程桌面连接。</p></li></ul></li><li id=\"24676d8086g9l\"><p id=\"2467467086hif\">不存在相关安全策略，执行<a title=\"\" class=\"xref\" href=\"#d055f1c086tfr\">步骤十：检查系统的安全策略设置</a>继续排查。</p></li></ol></li></ol></section><section id=\"40a2bcb08576z\" class=\"section\"><h3 id=\"e457f918746y6\" data-tag=\"h4\" class=\"h4\"><b>步骤十一：检查杀毒软件</b></h3><p id=\"e457f91974h66\">使用远程桌面无法连接ECS实例可能是由于第三方杀毒软件设置导致，可通过以下方法进行解决。此处列举两个安全狗配置导致远程访问失败的解决案例。</p><ul id=\"e457f91a7448a\"><li id=\"e457f91b7463g\"><p id=\"e457f91c74i2d\">如果杀毒软件在后台执行，可通过VNC方式登录实例，将杀毒软件升级至最新版本或者直接删除。关于如何使用VNC登录实例，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"e457f91d74es5\" data-spm-anchor-id=\"a2c9r.12641779.0.i21.ebf85e3bceUODA\"><p id=\"e457f91e74iih\">请使用商业版杀毒软件，或者使用Microsoft Safety Scanner微软免费安全工具，在安全模式下扫描杀毒。关于更多安全扫描程序信息，请参见<a class=\"\" target=\"_blank\" href=\"https://www.microsoft.com/security/scanner/zh-cn/default.aspx\">安全扫描程序</a>。</p></li></ul><section id=\"6eb23e20856b0\" class=\"section\"><h4 id=\"e457f91f748gu\" data-tag=\"h5\" class=\"h5\"><b>案例一：安全狗黑名单拦截</b></h4><p id=\"e457f92074598\">如果安装了安全狗后，出现以下情况，请确认防护软件中是否做了安全设置或对应的拦截。</p><ul id=\"e457f921741jr\"><li id=\"e457f92274npq\"><p id=\"e457f92374qvx\">客户端本地无法远程桌面连接Windows实例，但其他区域可以远程连接。</p></li><li id=\"e457f92474t2b\"><p id=\"e4582020749uj\">无法ping通服务器IP地址，并且通过<code data-tag=\"code\" class=\"code\">tracert</code>命令跟踪路由，发现无法到达服务器。</p></li><li id=\"e4582021747hf\"><p id=\"e458202274vz5\">云安全中心未拦截本地公网IP地址。</p></li></ul><p id=\"e458202374ti9\">打开<b data-tag=\"uicontrol\" id=\"8ae776190a68t\" class=\"uicontrol\">服务器安全狗</b>，选择<b data-tag=\"uicontrol\" id=\"8ae7761b0asgn\" class=\"uicontrol\">网络防火墙</b>，单击<b data-tag=\"uicontrol\" id=\"8ae7761d0ad5s\" class=\"uicontrol\">超级</b><b data-tag=\"uicontrol\" id=\"8ae776200acxq\" class=\"uicontrol\">黑白名</b><b data-tag=\"uicontrol\" id=\"8ae776220ap4q\" class=\"uicontrol\">单</b><b>右侧</b>的<img id=\"2652de508592d\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p539775.png\" alt=\"设置图标\" placement=\"inline\" class=\"image inline\">图标，如果<b data-tag=\"uicontrol\" id=\"8ae776260azi7\" class=\"uicontrol\">超级黑名单</b>中存在ECS实例公网IP，需将此黑名单规则删除，然后将公网IP添加到<b data-tag=\"uicontrol\" id=\"8ae776280avvd\" class=\"uicontrol\">超级白名单</b>。</p><img id=\"22cc76b085rxx\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p539774.png\" alt=\"服务器安全狗\" placement=\"break\" class=\"image break\"><div type=\"note\" id=\"55f674a1858gi\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"589cb570856if\">如果云安全中心的阈值设置过低，则可能拦截实例公网IP。建议把清洗阈值调高，避免出现拦截实例公网IP的情况发生，更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/anti-ddos-origin-basic\">DDoS基础防护</a>。</p></div></div></section><section id=\"72f00ee085yd8\" class=\"section\"><p id=\"e458202874n2k\" data-tag=\"h5\" class=\"h5\"><b>案例二：安全狗程序异常</b></p><p id=\"e4582029747aj\">使用VNC登录到Windows实例后，在系统桌面右下角，安全狗弹出错误提示，系统显示类似如下。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9643212761/p519633.png\" id=\"f07304a1857id\" class=\"image break\"><p id=\"eb51639085o37\">该问题可能是由于安全狗软件出现异常导致，您可以通过Windows系统卸载安全狗软件后，重启ECS实例，即可恢复网络。</p></section></section><section id=\"64691ac080alr\" class=\"section\"><h3 id=\"884b2c8086pv3\"><b>步骤十二：</b>Windows注册表配置异常</h3><p id=\"180e36c18b2cu\">Windows注册表相关配置异常，可能导致RDP连接被阻断，您可以参考以下步骤来修复。</p><ol id=\"bf25d9d285iz4\"><li id=\"bf25d9d085kx7\"><p id=\"8d03b261809at\">使用VNC连接ECS实例。</p><p id=\"c2f77b4085ozd\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"c4ebd130856ue\"><p id=\"c4ebaa2085oiv\">在<b data-tag=\"uicontrol\" id=\"8ae7c4330abcv\" class=\"uicontrol\">运行</b>框中输入<b data-tag=\"uicontrol\" id=\"8ae7c4350aqtf\" class=\"uicontrol\">regedit</b>，单击<b data-tag=\"uicontrol\" id=\"8ae7c4380ab9k\" class=\"uicontrol\">确定</b>，打开注册表编辑器。</p><img id=\"b6961ea0850wv\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p539737.png\" alt=\"输入regedit\" placement=\"break\" class=\"image break\"></li><li id=\"c8dae5b185hwp\"><p id=\"c8dae5b085rqm\">在注册表编辑器中，分别修改以下参数配置。</p><ul id=\"ae51010185na6\"><li id=\"ae146d31854au\"><p id=\"ae146d3085de3\">将<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\WinStations\\RDP-Tcp</code>中的<code data-tag=\"code\" class=\"code\"><i>fEnableWinStation</i></code> 参数值修改为1。</p><img id=\"e8e5578085033\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p539744.png\" alt=\"fEnableWinStation\" placement=\"break\" class=\"image break\"></li><li id=\"e489c59185l28\"><p id=\"e489c590852qi\">将<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server</code>中的<code data-tag=\"code\" class=\"code\"><i>fDenyTSConnections</i></code>参数值修改为0。</p><img id=\"ecb460e0851we\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2902222761/p539745.png\" alt=\"fDenyTSConnections\" placement=\"break\" class=\"image break\"></li></ul></li></ol></section><section id=\"af553c8085vg7\" class=\"section\"><h3 id=\"8d038b5d8026k\"><b>步骤十三：</b>Windows RDP自签证书到期</h3><p id=\"4494d5a28b79z\">RDP自签证书过期，可能会导致无法远程登录，您可以参考以下步骤来修复。</p><ol id=\"11469702859ol\"><li id=\"11469700853eb\"><p id=\"abcb396180hnt\">使用VNC方式登录Windows实例。</p><p id=\"17bc084085hjb\">具体操作，请参见通过密码认证登录Windows实例。</p></li><li id=\"2343d85185p3w\"><p id=\"20ea09d285mkg\">以管理员身份运行Windows PowerShell。</p></li><li id=\"18de1a1185w3j\"><p id=\"18de1a10859rq\">在Windows PowerShell对话框，执行如下命令。</p><pre height=\"64.98958587646484\" id=\"9pp3hh\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Remove-Item -Path 'Cert:\\LocalMachine\\Remote Desktop\\*' -Force -ErrorAction SilentlyContinue\nRestart-Service TermService -Force</code></pre></li></ol></section></section><section id=\"96a5bf2085j84\" class=\"section\"><h2 id=\"9b7a2a91852kl\" data-tag=\"h3\" class=\"h3\"><b>存在明确的报错信息</b></h2><ul id=\"9b7a2a9285ypg\"><li id=\"9b7a2a9385w1m\"><p id=\"9b7a2a9485co1\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/because-of-a-protocol-error-this-session-will-be-disconnected-please-try-connecting-to-the-remote-computer-again\">远程连接Windows系统的ECS实例时提示协议错误</a></p></li><li id=\"9b7a2a9785dnj\"><p id=\"9b7a2a9885v63\">授权相关：\n</p><ul id=\"9b7a2a9985enf\"><li id=\"9b7a2a9a85c2w\"><p id=\"9b7a2a9b855ob\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-your-credentials-don-t-work-appears-when-i-remotely-log-on-to-a-windows-instance\">启用密码保护共享导致Windows系统远程访问出现“凭据无法工作”错误</a></p></li><li id=\"9b7a2a9c85lab\"><p id=\"9b7a2a9d85u1q\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-connection-was-denied-because-the-user-account-is-not-authorized-for-remote-login\">远程桌面连接ECS实例时报“连接被拒绝，因为没有授权此用户账户进行远程登录”错误</a></p></li><li id=\"9b7a2a9e85le0\"><p id=\"9b7a2a9f85q74\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-no-remote-desktop-license-server-is-specified-appears-when-i-connect-to-a-windows-server-2008-r2-instance-by-using-remote-desktop\">Windows系统实例中未指定远程桌面授权服务器解决方法</a></p></li><li id=\"9b7a2aa0854ri\"><p id=\"9b7a2aa185lsr\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/to-log-on-to-this-remote-computer-you-must-be-granted-the-permission-to-log-on-through-terminal-services\">Windows 2008系统的ECS实例远程登录时提示“要登录到此远程计算机，您必须被授予允许通过终端服务登录的权限”</a> </p></li></ul></li><li id=\"9b7a2aa3850g0\"><p id=\"9b7a2aa485u71\">桌面无法显示： \n</p><p id=\"9b7a2aa785zag\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/desktop-failure-or-exception-displayed-after-remote-logon-of-an-ecs-instance-running-windows\">Windows系统的ECS实例远程登录后无法显示桌面或显示异常</a></p></li><li id=\"9b7a2aa88529a\"><p id=\"9b7a2aa9857ur\">连接数相关： \n</p><ul id=\"9b7a51a0850bl\"><li id=\"9b7a51a185iem\"><p id=\"9b7a51a285d6v\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-if-the-error-message-the-terminal-server-has-exceeded-the-maximum-number-of-allowed-connections-appears-when-i-connect-to-a-windows-instance-by-using-remote-desktop\">Windows系统实例远程连接提示“终端服务器超出了最大允许连接”</a></p></li><li id=\"9b7a51a385lie\"><p id=\"9b7a51a485ayj\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/remote-connections-to-windows-server-instances-and-license-authorized-servers\">Windows Server实例远程连接数以及License授权服务器的相关说明</a></p></li></ul></li><li id=\"9b7a51a585ukh\"><p id=\"9b7a51a685pha\">用户名和密码相关：\n</p><p id=\"9b7a51a985m7l\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/when-you-remotely-log-on-to-the-windows-server-2008-r2-system-the-system-prompts-an-unknown-username-or-password-error\">远程登录Windows Server 2008 R2系统时提示未知的用户名或密码错</a></p></li></ul></section><section id=\"9ef3e80085lxk\" class=\"section\"><h2 id=\"9ef3e801851t8\" data-spm-anchor-id=\"a2c9r.14518950.0.i12.178a5e3bukc1VU\">相关文档</h2><ul id=\"9ef3e80285g92\"><li id=\"9ef3e80385svh\"><p id=\"9ef3e80485j2k\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/what-do-i-do-if-i-cannot-connect-to-an-ecs-instance\">无法远程连接ECS实例的排查流程</a></p></li><li id=\"9ef3e80585w4f\"><p id=\"9ef3e80685ko4\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/troubleshooting-guidelines-when-you-cannot-remotely-log-on-to-a-linux-instance-through-ssh\">无法通过SSH远程登录Linux实例时的排查指引</a></p></li></ul></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/ssh-remote-connection-problems/", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span>SSH远程连接问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>SSH远程连接问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-20 11:13:07</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div class=\"directory\">\n<ul>\n <li><a href=\"/zh/ecs/support/login-using-sftp-linux-instance-prompt-received-unexpected-end-of-file-from-sftp-server-error\">使用SFTP登录Linux实例时，提示“Received unexpected end-of-file from SFTP server”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-if-the-permission-denied-please-try-again-error-message-appears-when-i-log-on-to-a-linux-instance-as-the-root-user-by-using-ssh\">通过SSH客户端登录Linux实例时提示“Permission denied, please try again”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/the-ssh-exchange-identification-read-connection-reset-by-peer-error-is-displayed-when-you-log-on-to-an-ecs-instance-through-ssh\">使用SSH客户端登录Linux实例提示“ssh_exchange_identification: read: Connection reset by peer”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/the-user-root-not-allowed-because-not-listed-in-error-occurs-when-you-log-on-to-a-linux-instance-by-using-ssh-commands\">使用第三方SSH客户端登录Linux实例时，提示“Access denied”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/the-system-prompts-host-key-verification-failed-when-logging-on-to-the-ecs-instance-over-ssh\">使用SSH远程连接Linux系统的ECS实例时，提示“Host key verification failed”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/the-no-supported-key-exchange-algorithms-error-occurs-when-you-log-on-to-a-linux-instance-by-using-ssh-commands\">无法远程连接Linux系统的ECS实例，提示“error: Unable to load host key: /etc/ssh/ssh_host_rsa_key”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/configure-linux-to-keep-the-process-running-after-the-ssh-client-is-disconnected\">Linux系统下如何保持进程在SSH客户端断开后仍继续运行？</a></li>\n <li><a href=\"/zh/ecs/support/the-disconnected-no-supported-authentication-methods-available-error-occurs-when-you-log-on-to-a-linux-instance-by-ssh\">使用第三方SSH客户端远程连接Linux实例时，提示“No supported authentication methods available (server sent: publickey,gssapi-keyex,gssapi-with-mic)”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/remote-connection-to-a-linux-instance\">远程连接Linux实例时卡顿怎么办</a></li>\n <li><a href=\"/zh/ecs/support/the-error-while-loading-shared-libraries-error-occurs-when-you-start-the-ssh-service\">Linux系统的ECS实例中，启动SSH服务时提示“error while loading shared libraries”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/what-do-i-do-when-i-cannot-log-on-to-a-linux-instance-after-the-pam-authentication-module-is-enabled\">启用PAM认证模块后，无法登录Linux实例的解决方案</a></li>\n <li><a href=\"/zh/ecs/support/the-too-many-authentication-failures-for-root-error-occurs-when-you-log-on-to-an-instance-through-ssh\">使用第三方SSH客户端远程连接Linux实例时，提示“Too many authentication failures”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/in-linux-ecs-instances-the-following-error-fatal-cannot-bind-any-address-occurs-when-the-ssh-service-is-started\">Linux系统的ECS实例中，启动SSH服务时提示“fatal: Cannot bind any address”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/main-process-exited-code-exited-error-when-ssh-service-is-started\">Linux系统的ECS实例中，启动SSH服务时未遇到任何错误信息，但是ssh服务未启动该怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/the-bad-configuration-options-error-occurs-when-the-ssh-service-is-started\">Linux系统的ECS实例中，启动SSH服务时提示“Bad configuration options”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/multiple-consecutive-incorrect-password-accesses-to-linux-instances-through-ssh\">使用SSH客户端远程连接Linux系统的ECS实例时，提示“Maximum amount of failed attempts was reached”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/the-system-prompts-fatal-mm-request-send-write-broken-pipe-error-when-the-ssh-service-runs-abnormally-caused-by-viruses\">在Linux系统的ECS实例执行SSH命令时，提示“fatal: mm_request_send: write: Broken pipe”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/the-ssh-service-cannot-be-started-due-to-port-occupation\">Linux系统的ECS实例中，启动SSH服务提示“Failed to start OpenSSh server daemon”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/an-error-is-reported-when-you-log-on-to-an-ecs-instance-of-the-linux-system-by-using-ssh-commands\">使用SSH远程连接Linux系统的ECS实例时，提示“This account is currently not available.”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/the-system-prompts-must-be-owned-by-root-and-not-group-or-word-writable-error-when-the-ssh-service-starts\">Linux系统的ECS实例中，启动SSH服务时提示“must be owned by root and not group or world-writable”错误怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/using-usedns-to-enable-ssh-slows-down-ssh-logon-or-data-transfer\">Linux实例中，SSH登录或数据传输速度都很慢怎么办？</a></li>\n <li><a href=\"/zh/ecs/support/a-system-exception-occurs-on-linux-instances-after-ssh-logon-due-to-ulimit\">使用SSH远程连接Linux系统的ECS实例时，提示“could not set limit for ‘nofile’: Operation not permitted”错误怎么办？</a></li>\n </ul>\n</div>\n\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-domain-name-of-a-website-is-resolved-to-different-ip-addresses-on-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>Windows实例内部自定义域名解析与本地网络域名解析不一致导致无法访问网站如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例内部自定义域名解析与本地网络域名解析不一致导致无法访问网站如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-23 16:22:02</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"eebdd46096ocg\"><p data-tag=\"shortdesc\" id=\"eec3c7d896hii\" class=\"shortdesc\">本文介绍Windows实例内部自定义域名解析与本地网络域名解析不一致导致无法访问网站的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"EmYTN\">问题描述</h2><p id=\"87408e40a7t0q\">在Windows实例内部通过浏览器无法访问某网站，但在其他设备上可以正常访问，排查发现Windows实例内部自定义域名解析与本地网络域名解析不一致，具体说明如下：</p><ol id=\"87408e41a7nmb\"><li id=\"87408e42a7pda\"><p id=\"87408e43a7v9y\">在Windows实例内访问失败，如图所示，但是使用本地电脑可以正常访问该网站。</p><img id=\"87408e45a7dej\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3148285761/p557226.jpg\" alt=\"20230207182245\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"87408e46a7quy\"><p id=\"87408e47a7101\">登录Windows实例，然后在Windows实例内部的命令提示符中执行<code data-tag=\"code\" class=\"code\">ping 网站域名</code>和<code data-tag=\"code\" class=\"code\">nslookup 网站域名</code>命令，发现在Windows实例内部自定义域名解析与本地网络域名解析不一致，如图所示：</p><img id=\"87408e49a72tw\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3148285761/p557232.jpg\" alt=\"20230207182813\" placement=\"break\" width=\"750\" class=\"image break\"></li></ol><h2 id=\"MJZYP\">问题原因</h2><p id=\"8d4ed940a7fyl\">Windows实例内部和本地域名解析的IP地址不一致的可能原因如下：</p><ul id=\"c9205560ac8ny\"><li id=\"c9205561ac7qh\"><p id=\"c9205562acllg\">Windows操作系统中存在DNS（Domain Name Server，简称DNS）解析缓存。此时，您需要刷新DNS解析缓存后重新访问网站，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#db8d4870ac962\">刷新DNS解析缓存</a>。</p></li><li id=\"c9205563achnc\"><p id=\"c9205564acglw\">Windows操作系统的hosts文件中已存在该网站绑定的配置。此时，您需要删除hosts文件中绑定的配置后重新访问网站，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#db8d4885aceic\">删除hosts文件配置</a>。</p></li><li id=\"c9205565acnms\"><p id=\"c9205566ac3l7\">专有网络VPC类型的Windows实例内针对该域名配置了PrivateZone记录。此时，您需要修改Windows实例的相关记录后重新访问网站，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#db8d4894acxvv\">修改PrivateZone记录</a>。</p></li></ul><h2 id=\"ZnfSy\">解决方案</h2><div type=\"note\" id=\"99755a50a7ogq\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"99755a51a7aj5\">本文操作以Windows Server 2019 数据中心版 64位中文版操作系统为例，其他版本的Windows操作系统可参考本文操作步骤进行修改。</p></div></div><h3 id=\"db8d4870ac962\"><b>刷新DNS解析缓存</b></h3><ol id=\"db8d4871acm4d\"><li id=\"db8d4872aci1f\"><p id=\"db8d4873acixe\">远程连接Windows实例。</p><p id=\"db8d4874acs6d\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"db8d4875ac2bc\"><p id=\"db8d4876acz0w\">清空Windows操作系统中的DNS解析缓存。</p><ol id=\"db8d4877acqxg\"><li id=\"db8d4878aca2q\"><p id=\"db8d4879ac5vv\">在搜索栏输入<code data-tag=\"code\" class=\"code\">cmd</code>，然后单击<b data-tag=\"uicontrol\" id=\"3a644526a21pv\" class=\"uicontrol\">命令提示符</b>。</p><img placement=\"break\" alt=\"20230120131443\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2148285761/p552165.jpg\" id=\"db8d487bach1l\" class=\"image break\"></li><li id=\"db8d487cacgtc\"><p id=\"db8d487dac7ud\">在命令提示符中，执行<code data-tag=\"code\" class=\"code\">ipconfig /flushdns</code>命令，清空DNS解析缓存。<img id=\"db8d487eaczvu\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7588285761/p557393.jpg\" alt=\"刷新DNS的命令\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"db8d487facgip\"><p id=\"db8d4880acqsn\">在命令提示符中，执行<code data-tag=\"code\" class=\"code\">ping 网站域名</code>命令，查看域名解析是否正常。 </p><p id=\"db8d4881acb5d\">如图所示，域名解析恢复正常。<img id=\"db8d4882acbja\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9309485761/p557397.jpg\" alt=\"验证域名解析恢复正常\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"db8d4883ac0d4\"><p id=\"db8d4884ac2u5\">重新使用浏览器访问网站。</p></li></ol><h3 id=\"db8d4885aceic\"><b>删除hosts文件配置</b></h3><ol id=\"db8d4886acam9\"><li id=\"db8d4887acn8k\"><p id=\"db8d4888acinj\">远程连接Windows实例。</p><p id=\"db8d4889acyuz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"db8d488aacpv7\"><p id=\"db8d488bacncw\">清除Windows操作系统的hosts文件中该网站绑定的配置。</p><p id=\"db8d488cac8ch\">打开<code data-tag=\"code\" class=\"code\">C:\\Windows\\System32\\drivers\\etc\\hosts</code>文件，查看是否存在该网站的配置，如果存在，如图所示，则您需要删除该配置后保存文件。 <img id=\"db8d488dac6sc\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6588285761/p557396.jpg\" alt=\"hosts文件新\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"db8d488eacuyo\"><p id=\"db8d488fac9s4\">在命令提示符中，执行<code data-tag=\"code\" class=\"code\">ping 网站域名</code>命令，查看域名解析是否正常。 </p><p id=\"db8d4890ac7h3\">如图所示，域名解析恢复正常。<img id=\"db8d4891acn9t\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9309485761/p557397.jpg\" alt=\"验证域名解析恢复正常\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"db8d4892acf38\"><p id=\"db8d4893ac85h\">重新使用浏览器访问网站。</p></li></ol><h3 id=\"db8d4894acxvv\"><b>修改</b><b>PrivateZone记录</b></h3><ol id=\"db8d4895acssn\"><li id=\"db8d4896acahr\"><p id=\"db8d4897accno\">登录<a class=\"\" target=\"_blank\" href=\"https://dns.console.aliyun.com/\">云解析控制台</a>。</p></li><li id=\"db8d4898ac65y\"><p id=\"db8d4899acf5u\">在左侧导航栏，单击<b data-tag=\"uicontrol\" id=\"0d446b90acsb6\" class=\"uicontrol\"><b>PrivateZone</b></b>。</p></li><li id=\"db8d489aaczwt\"><p id=\"db8d489bac37v\">在<b data-tag=\"uicontrol\" id=\"0d446b90acsb6\" class=\"uicontrol\"><b>PrivateZone</b></b>页面，单击<b data-tag=\"uicontrol\" id=\"1f335500ac5i1\" class=\"uicontrol\">权威Zone</b>页签。</p></li><li id=\"db8d489cacq6d\"><p id=\"db8d489dacuor\">在PrivateZone列表中，单击目标PrivateZone的ID。</p><p id=\"db8d489eac61e\">在<b data-tag=\"uicontrol\" id=\"1811f6e0acjud\" class=\"uicontrol\">详情信息</b>页面，查看<b data-tag=\"uicontrol\" id=\"1c3e8990ac5q3\" class=\"uicontrol\">已关联VPC</b>信息，然后检查该信息是否与Windows实例所在的VPC信息一致。查看Windows实例的VPC信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/view-instance-information\">查看实例信息</a>。<img id=\"db8d489facp9l\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2342536761/p561254.jpg\" alt=\"查看VPC关联信息\" placement=\"break\" width=\"750\" class=\"image break\"></p><p id=\"db8d48a4acpmd\">如果关联的VPC信息与Windows实例所在的VPC信息不一致，则您需要在云解析控制台上将VPC信息修改为Windows实例所在的VPC信息，操作如下：</p><ol id=\"4537fd81ac1pg\"><li id=\"db8d48a6acvjy\"><p id=\"db8d48a7ac0b9\">在PrivateZone列表中，单击目标PrivateZone<b data-tag=\"uicontrol\" id=\"28ae7a40acwfn\" class=\"uicontrol\">操作</b>列中的<b data-tag=\"uicontrol\" id=\"2aebe720acj17\" class=\"uicontrol\">关联VPC</b>。<img id=\"db8d48a8ac1d9\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2342536761/p561278.jpg\" alt=\"单击关联VPC\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"db8d48a9acuig\"><p id=\"db8d48aaacf7i\">在<b data-tag=\"uicontrol\" id=\"bab1eee0ac23c\" class=\"uicontrol\">关联VPC</b>面板中，添加Windows实例所在的VPC信息，然后单击<b data-tag=\"uicontrol\" id=\"cf0443c0acnjf\" class=\"uicontrol\">确认</b>。<img id=\"db8d48abacaow\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2342536761/p561286.jpg\" alt=\"关联VPC面板\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"6163e781acj95\"><p id=\"6163e780acsnr\">在PrivateZone列表中，单击目标PrivateZone的名称。</p><p id=\"db8d48aeacdvw\">在<b data-tag=\"uicontrol\" id=\"81026830aclx0\" class=\"uicontrol\">解析设置</b>页面，查看主机解析记录信息，然后检查已设置的解析记录信息与业务使用情况是否一致。<img id=\"db8d48afacwo2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2342536761/p561296.jpg\" alt=\"查看解析记录\" placement=\"break\" width=\"750\" class=\"image break\"></p><p id=\"db8d48b2acdih\">如果已设置的解析记录信息与业务使用情况不一致，则您需要修改解析记录，操作如下：</p><ol id=\"8939cf91aca8u\"><li id=\"8886fa51acud7\"><p id=\"8bb752b0ac43p\">在<b data-tag=\"uicontrol\" id=\"81026830aclx0\" class=\"uicontrol\">解析设置</b>页面，单击目标记录的操作列中的<b data-tag=\"uicontrol\" id=\"98b0e060acs6a\" class=\"uicontrol\">修改</b>。</p></li><li id=\"8cfec6d1ac97m\"><p id=\"8fabe570ac5g9\">在<b data-tag=\"uicontrol\" id=\"eb6d9a00ac78d\" class=\"uicontrol\">修改记录</b>页面，根据实际情况修改解析记录，然后单击<b data-tag=\"uicontrol\" id=\"f2789480acztg\" class=\"uicontrol\">确定</b>。<img id=\"8fabe571acnqo\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2342536761/p561302.jpg\" alt=\"修改记录\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"db8d48bbacdcf\"><p id=\"db8d48bcacj0y\">重新使用浏览器访问网站。</p><div type=\"important\" id=\"db8d48bdacdzy\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"db8d48beac0qp\">Windows实例操作系统内每隔1分钟自动读取并更新PrivateZone记录，您无需再执行其他操作。</p></div></div></li></ol><p id=\"b6422190ac45j\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/access-windows-instance-using-iis-deployment-sites-appear-500-19-don-t-allow-absolute-physical-path-in-xxx-xxx-error-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>访问Windows实例上使用IIS部署的网站时，出现“500.19-xxx中不允许绝对物理路径xxx”报错，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>访问Windows实例上使用IIS部署的网站时，出现“500.19-xxx中不允许绝对物理路径xxx”报错，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-08 16:08:58</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"831fd27096pim\"><p data-tag=\"shortdesc\" id=\"8324b47896pq1\" class=\"shortdesc\">本文介绍访问Windows实例上使用IIS（Internet Information Services）部署的网站时，出现“500.19-xxx中不允许绝对物理路径xxx”报错的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"se-knowledge\" class=\"section\"><h2 id=\"tztrA\">问题描述</h2><p id=\"8324b47c96vcz\">访问Windows实例上使用IIS部署的网站时，出现“500.19-xxx中不允许绝对物理路径xxx”报错，报错示例如下。</p><pre id=\"831fd27196zol\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>HTTP 错误 500.19 - Internal Server Error web.config 文件的 system.webServer/httpErrors 节中不允许绝对物理路径“C:\\inetpub\\custerr”，请改用相对路径。</code></pre><p id=\"0010e6e0b6ewo\">报错示例如下图所示。<img id=\"1e2dcb70b601m\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4307747761/p573653.png\" alt=\"问题描述\" placement=\"break\" width=\"750\" class=\"image break\"></p><h2 id=\"mNrWn\">问题原因</h2><p id=\"66ff2010adp48\">该问题可能是ApplicationHost.config或Web.config文件中存在格式不正确或无法识别的XML元素导致。</p><h2 id=\"beYmk\">解决方案</h2><p>您需要将IIS无法识别的XML元素，从ApplicationHost.config或Web.config文件中删除，操作步骤如下：</p><div type=\"note\" id=\"fca55df1adf79\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3ef401c0adl6x\">本文操作以Windows Server 2019 数据中心版 64位中文版操作系统为例，具体操作以您的实际的操作系统为准。</p></div></div><ol id=\"50d7c7a2adfjn\"><li id=\"50d7c7a0adbn9\"><p id=\"8324db86962oc\">远程连接Windows实例。</p><p id=\"597c26d0adc3w\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"3fd5e701adkg7\"><p id=\"4f7a84c0adpbb\">在桌面左下角，选择<b data-tag=\"uicontrol\" id=\"24916940adk3f\" class=\"uicontrol\"><img id=\"1cb6c2b0adhxe\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2126027661/p510213.png\" alt=\"开始 \" placement=\"inline\" width=\"25\" class=\"image inline\"><b> &gt; 服务器管理器</b></b>。</p><p id=\"22997ef0adiiw\">进入<b data-tag=\"uicontrol\" id=\"2e2609f0adrqc\" class=\"uicontrol\"><b>服务器管理器</b></b>页面。</p><img id=\"31317531ad01m\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4605256761/p562603.jpg\" alt=\"打开服务器管理器\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"11466351advt2\"><p id=\"109f5cd2ad6on\">打开网站的物理目录。</p><ol id=\"812fe051b7drb\"><li id=\"80a098a0b7yd5\"><p id=\"80a07190b769a\">在<b data-tag=\"uicontrol\" id=\"05fe8d32ady4a\" class=\"uicontrol\"><b>服务器管理器</b></b>页面，选择<b data-tag=\"uicontrol\" id=\"05fe8d33adufn\" class=\"uicontrol\"><b>工具 &gt; Internet Information Services（IIS）管理器</b></b>。</p><p id=\"f3efbcf2b7jxw\">进入<b data-tag=\"uicontrol\" id=\"34c2c430adv10\" class=\"uicontrol\"><b>Internet Information Services（IIS）管理器</b></b>页面。<img id=\"f3efbcf3b7pe8\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6745456761/p562754.jpg\" alt=\"进入IIS\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"881aa8a1b7sbs\"><p id=\"881aa8a0b7iw5\">在<b data-tag=\"uicontrol\" id=\"05fe8d34adzap\" class=\"uicontrol\"><b>Internet Information Services（IIS）管理器</b></b>页面的左侧导航栏找到目标网站，然后在<b data-tag=\"uicontrol\" id=\"7ba4c480b7b94\" class=\"uicontrol\">操作</b>区域单击<b data-tag=\"uicontrol\" id=\"7df28510b7k1x\" class=\"uicontrol\">浏览</b>。<img id=\"50977f30b78to\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3845557761/p574154.png\" alt=\"选择目标网站\" placement=\"break\" class=\"image break\"></p><p id=\"91efdc20b7t96\">进入该网站的物理目录。<img id=\"cd2a0f90b7vha\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3845557761/p574159.png\" alt=\"网站物理目录\" placement=\"break\" class=\"image break\"></p></li></ol></li><li id=\"9e4e5d20b7io0\"><p id=\"9e4e3610b7rpx\">打开站点目录下的web.config配置文件后，删除配置文件中的<code data-tag=\"code\" class=\"code\">httpErrors</code>内容，然后保存并关闭web.config配置文件。</p><p id=\"2b369950b7jj5\">待删除的<code data-tag=\"code\" class=\"code\">httpErrors</code>内容示例如下：</p><pre id=\"1sbebw\" data-tag=\"codeblock\" outputclass=\"language-java\" class=\"pre codeblock language-java\"><code>&lt;httpErrors&gt;            &lt;remove statusCode=\"500\" subStatusCode=\"-1\" /&gt;         </code></pre></li><li id=\"3504e401adjfl\"><p id=\"3504e400adh10\">重启IIS。</p><ol id=\"48d844e1adi1r\"><li id=\"484e2d51adevs\"><p id=\"484e2d50adw5i\">在桌面左下角，单击<img id=\"c43366b0ado8o\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553311.jpg\" alt=\"搜索图标 \" placement=\"inline\" width=\"25\" class=\"image inline\">图标，然后在搜索框输入<code data-tag=\"code\" class=\"code\">iisreset</code>。<img id=\"f667e110ad80t\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6745456761/p562815.jpg\" alt=\"重启IIS\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"d7ed7330adwuc\"><p id=\"d7ed4c20ad1li\">在<b data-tag=\"uicontrol\" id=\"ea143580adfi8\" class=\"uicontrol\"><b>最佳匹配</b></b>区域，单击<b data-tag=\"uicontrol\" id=\"ec24ed10ad17i\" class=\"uicontrol\"><b>iisreset</b></b><b>。</b></p><p id=\"f833a060adhhh\">IIS重启程序运行完毕，则表示IIS重启成功。<img id=\"43b24190adq7g\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6745456761/p562818.jpg\" alt=\"IIS重启程序运行框\" placement=\"break\" class=\"image break\"></p></li></ol></li><li id=\"3a2636f0ad89q\"><p id=\"3a260fe0adzgv\">重新访问网站。</p><p id=\"411ac340adr4x\">正常访问，该问题解决。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/unable-to-connect-to-build-on-the-windows-instance-vsftp-sites-on-linux-instance-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>在Windows实例上无法连接搭建在Linux实例上的VSFTP站点，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在Windows实例上无法连接搭建在Linux实例上的VSFTP站点，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-05-06 17:05:29</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"99f8f9409609r\"><p data-tag=\"shortdesc\" id=\"afb10d30bdzfw\" class=\"shortdesc\">本文介绍在Windows实例上，无法连接搭建在Linux实例上VSFTP（Very Secure FTP）服务问题的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"99ff3ad59617t\">问题描述</h2><p id=\"5f1e4250ad75v\">在Windows操作系统资源管理器的文件夹路径中，通过输入<code data-tag=\"code\" class=\"code\">ftp://<i>FTP站点所在的ECS实例公网IP地址</i>:21</code>方式，访问搭建在Linux实例上的VSFTP服务，出现无法连接或无法登录FTP站点的情况。报错示例如下：</p><img id=\"bbafcf60ad8ml\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7761728761/p562540.png\" alt=\"问题描述新\" placement=\"break\" width=\"750\" class=\"image break\"><p id=\"5f1e4252advh7\">此时，使用抓包工具（例如Wireshark）抓取数据包，根据抓包数据包分析发现FTP站点所在的Linux服务器返回地址是<code data-tag=\"code\" class=\"code\">0.0.0.0</code>，如图所示。</p><img id=\"7b316240ad1u2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7761728761/p562545.png\" alt=\"抓包数据新\" placement=\"break\" width=\"750\" class=\"image break\"><h2 id=\"99ff3ad796pp3\">问题原因</h2><p id=\"794eefd0e5dm4\">Windows操作系统资源管理器连接FTP时的默认连接模式为被动模式，因此在Linux实例上搭建VSFTP时需要开启被动模式。由于VSFTP默认监听IPv6地址，无法将FTP站点所在的Linux实例的IPv4地址通过被动模式返回给客户端（即返回地址会变成<code data-tag=\"code\" class=\"code\">0.0.0.0</code>），导致VSFTP的<code data-tag=\"code\" class=\"code\">vsftpd.conf</code>文件中的<code data-tag=\"code\" class=\"code\">pasv_address</code>配置无法生效，出现该问题。</p><div type=\"note\" id=\"f0884141e5bll\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"79e403e0e5h49\">FTP（File Transfer Protocol）是一种文件传输协议，工作模式支持主动模式和被动模式，更多工作模式信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/build-an-ftp-site-on-an-instance-that-runs-alibaba-cloud-linux\">搭建FTP站点（Alibaba Cloud Linux 3）</a>。</p></div></div><h2 id=\"99ff3ad996jar\">解决方案</h2><p id=\"99ff3ae496zdf\">在Linux实例上关闭IPv6功能并重启服务后即可重新连接FTP服务，操作步骤如下：</p><ol id=\"8b316212ad40m\"><li id=\"8b316210ad7cj\"><p id=\"8a2967f0adod4\">远程连接Linux实例。</p><p id=\"9157a1e0adj1r\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"99ff3ae6961jp\"><p id=\"99ff3ae7961nd\">执行<code data-tag=\"code\" class=\"code\">vim vsftpd.conf</code>命令，修改<code data-tag=\"code\" class=\"code\">vsftpd.conf</code>文件，将<code data-tag=\"code\" class=\"code\">listen_ipv6=YES</code>参数替换为<code data-tag=\"code\" class=\"code\">listen_ipv6=NO</code>。</p><img id=\"ce60a1e0ad5pt\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7761728761/p562560.jpg\" alt=\"修改vsftpd\" placement=\"break\" class=\"image break\"></li><li id=\"99ff3ae896vp0\"><p id=\"99ff3ae9961pj\">执行如下命令，重启FTP服务。</p><pre id=\"ksz4yn\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>systemctl restart vsftpd</code></pre></li><li id=\"207b2811adpzy\"><p id=\"207b2810adnmt\">执行如下命令，查看FTP服务状态，确保FTP服务处于运行状态。</p><pre id=\"baxmvc\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>systemctl status vsftpd</code></pre><p id=\"f14ca270d9f64\">当FTP服务状态为<b data-tag=\"uicontrol\" id=\"0f63baa0d9jxw\" class=\"uicontrol\">running</b>状态时，表示FTP服务已启动成功并正常运行。</p><img id=\"9237d340adww1\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7761728761/p562562.jpg\" alt=\"重启服务新\" placement=\"break\" class=\"image break\"></li><li id=\"641ba041adsue\"><p id=\"641ba040add1m\">重新访问FTP。</p><p id=\"8ccc83e0bdayg\">如果成功访问FTP，该问题解决。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-operations-are-slow-on-a-windows-server-2003-instance-after-i-connect-to-the-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>远程连接Windows Server 2003实例后在服务器上执行操作时速度缓慢，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>远程连接Windows Server 2003实例后在服务器上执行操作时速度缓慢，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-01 18:22:35</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"8e3cabb096e9d\"><p data-tag=\"shortdesc\" id=\"8e451027967mq\" class=\"shortdesc\">远程连接Windows Server 2003实例时，使用VNC登录服务器正常，但是使用其他远程连接方式登录服务器时，打开程序和浏览网站速度缓慢，本文介绍该场景下的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 data-spm-anchor-id=\"a2c9r.14518950.0.i6.aa555e3b7TeAFv\" id=\"iAj6g\">问题描述</h2><p id=\"7405a320ad7hd\">远程连接Windows Server 2003实例时，使用VNC登录服务器正常，但是使用其他远程连接方式登录服务器时，打开程序和浏览网站速度缓慢。</p><h2 id=\"4rM4I\">问题原因</h2><p id=\"8e45102996u7y\">网卡的<code data-tag=\"code\" class=\"code\">Offload.Tx.LSO</code>参数为开启状态导致该问题。</p><h2 id=\"AywdZ\">解决方案</h2><p id=\"4c9abc71ad5u4\">您可以根据实际情况选择如下任意一种方案处理该问题，具体如下：</p><h3 id=\"6983dbf0ad1vd\"><b>方案一：更换操作系统</b></h3><p id=\"5ab7f2d0b741o\"><span style=\"color:rgb(24, 24, 24)\">阿里云不再支持Windows Server 2003系统镜像。因此，</span>建议您使用Windows Server 2012及以上版本的Windows操作系统，避免出现该问题。更换实例操作系统的具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/replace-the-operating-system-of-an-instance\">更换操作系统（系统盘）</a>。</p><div type=\"warning\" id=\"566bd041adf9t\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"54445c60ady5h\">更换操作系统的本质是更换系统盘。更换操作系统后，原来旧的系统盘会被释放，会清除系统盘上的所有数据，请在更换操作系统前为系统盘创建快照备份数据，再执行操作，创建快照的更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/snapshot-overview\">快照概述</a>。</p></div></div><h3 id=\"73a230f1adylv\"><b>方案二：将网卡的</b><code data-tag=\"code\" class=\"code\"><b>Offload.Tx.LSO</b></code><b>参数</b>更改为<code data-tag=\"code\" class=\"code\"><b>Disabled</b></code></h3><p id=\"292b89e0adhuz\">您需要将网卡的<code data-tag=\"code\" class=\"code\">Offload.Tx.LSO</code>参数更改为<code data-tag=\"code\" class=\"code\">Disabled</code>，操作步骤如下：</p><ol id=\"96f5f6d1admxi\"><li id=\"3f676be1accs6\"><p id=\"944ef2b0adou8\">远程连接ECS实例。</p><p id=\"944f19c0adr1o\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"698cc021adx0a\"><p id=\"c2dcac31adnx4\">打开控制面板，然后选择<b data-tag=\"uicontrol\" id=\"ec4df4c0adt28\" class=\"uicontrol\">网络和lnternet</b>。</p></li><li id=\"e8d23b81adj3j\"><p id=\"e8d23b80adteq\">单击<b data-tag=\"uicontrol\" id=\"04a94ec0ad0yb\" class=\"uicontrol\">查看网络状态和任务</b>，然后在左侧导航栏单击<b data-tag=\"uicontrol\" id=\"01e1ca50ad1gk\" class=\"uicontrol\">更改适配器设置</b>。</p></li><li id=\"8e45373896qd7\"><p id=\"8e45373996xyd\">选择对应的网卡，单击鼠标右键，然后选择<b data-tag=\"uicontrol\" id=\"7efac8c0ad2i8\" class=\"uicontrol\">属性</b> &gt; <b>配置</b>。 </p><img height=\"523\" width=\"446\" alt=\"{7A01EC2D-6CA4-48EC-BF2A-A9D22AF179DC}_20200521114013.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8656546761/p519880.png\" class=\"image break\"></li><li data-spm-anchor-id=\"a2c9r.12641742.0.i5.20achEdShEdSrg\" id=\"8e455e40965nm\"><p id=\"8e455e4196a9i\">单击<b data-tag=\"uicontrol\" id=\"b678b350adgo5\" class=\"uicontrol\">高级</b>页签，配置<code data-tag=\"code\" class=\"code\">Offload.Tx.LSO</code>参数。</p><p id=\"0db608e0b95ex\">您需要先在<b data-tag=\"uicontrol\" id=\"ce997550ad0a7\" class=\"uicontrol\">属性</b>列表中选择<b data-tag=\"uicontrol\" id=\"d28fb5c0ad2wa\" class=\"uicontrol\">Offload.Tx.LS</b>，然后将<b data-tag=\"uicontrol\" id=\"d4fb1070adlfk\" class=\"uicontrol\">值</b>选择为<b data-tag=\"uicontrol\" id=\"12f88290ad6z3\" class=\"uicontrol\">Disabled</b>。 </p><img height=\"546\" width=\"495\" alt=\"{18E36C9A-EDF0-4233-936B-EF294270EFA7}_20200522150546.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8656546761/p519881.png\" class=\"image break\"></li><li id=\"18fbd111ad7mx\"><p id=\"19865dd0ad2bb\">单击<b data-tag=\"uicontrol\" id=\"1d879ac0adqle\" class=\"uicontrol\">确定</b><b>，</b>保存配置。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-instance-access-iis-to-create-website-prompt-bad-request-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>Windows实例访问使用IIS创建的网站提示“Bad Request (Invalid Hostname)”错误如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例访问使用IIS创建的网站提示“Bad Request (Invalid Hostname)”错误如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 18:07:17</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"a2e277c096a6i\"><p data-tag=\"shortdesc\" id=\"a2e95597966mi\" class=\"shortdesc\">本文介绍在Windows实例上访问使用IIS（Internet Information Services）创建的网站，提示“Bad Request (Invalid Hostname)”错误的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"h2-u95EEu9898u73B0u8C611\">问题描述</h2><p id=\"175d8f50ad1zk\">在Windows实例上访问使用IIS创建的网站时，提示“Bad Request (Invalid Hostname)”错误，如图所示。<img id=\"c8f82c70ad93g\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4605256761/p562579.jpg\" alt=\"问题描述\" placement=\"break\" class=\"image break\"></p><h2 id=\"h2-u95EEu9898u539Fu56E02\">问题原因</h2><p id=\"ebf53c40adpcg\">被访问的网站未在IIS中绑定域名或者在IIS中已绑定的域名存在冲突导致该问题。</p><h2 id=\"h2-u89E3u51B3u65B9u68483\">解决方案</h2><div type=\"note\" id=\"0ff23a70ad0is\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"0dd722a0adcaq\">本文操作以Windows Server 2019 数据中心版 64位中文版操作系统为例，其它版本的Windows操作系统可参考本文操作步骤进行修改。</p></div></div><ol id=\"38b6c842adp9j\"><li id=\"38b6c840adxky\"><p id=\"34d659c0adx31\">远程连接Windows实例。</p><p id=\"42654470ade1k\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"3fd5e701adkg7\"><p id=\"3fd5e700adi7l\">打开IIS。</p><ol id=\"f8e256c1addcm\"><li id=\"f86c6371ad8mn\"><p id=\"f86c6370ad57w\">在桌面左下角，选择<b data-tag=\"uicontrol\" id=\"15280a50adme9\" class=\"uicontrol\"><img id=\"05bc9770adru6\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4605256761/p562602.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"> &gt; 服务器管理器</b>。<img id=\"79af0e60ado0d\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4605256761/p562603.jpg\" alt=\"打开服务器管理器\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"11466351advt2\"><p id=\"11466350ad16v\">在服务器管理器页面，选择<b data-tag=\"uicontrol\" id=\"67bb2670ad6cr\" class=\"uicontrol\">工具 &gt; Internet Information Services（IIS）管理器</b>。</p><p id=\"6e24b0d0adtsp\">进入<b data-tag=\"uicontrol\" id=\"679b13f0adn1y\" class=\"uicontrol\">Internet Information Services（IIS）管理器</b>页面。<img id=\"d07fad20adtut\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4605256761/p562612.jpg\" alt=\"选择IIS\" placement=\"break\" class=\"image break\"></p></li></ol></li><li id=\"6a4d4301adui7\"><p id=\"6a4d4300adv54\">在<b data-tag=\"uicontrol\" id=\"679b13f1ad618\" class=\"uicontrol\">Internet Information Services（IIS）管理器</b>页面的左侧导航栏右键单击目标网站，然后单击<b data-tag=\"uicontrol\" id=\"683039f0adfu2\" class=\"uicontrol\">编辑绑定</b>。<img id=\"6e587590ad12z\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3605256761/p562615.jpg\" alt=\"编辑绑定\" placement=\"break\" class=\"image break\"></p></li><li id=\"6349fb91ad6uq\"><p id=\"6349fb90adkzz\">在<b data-tag=\"uicontrol\" id=\"9f502a30adw5e\" class=\"uicontrol\">网站绑定</b>页面，绑定域名或者检查已绑定的域名信息是否正确。</p><ul id=\"c624f5f1adrjx\"><li id=\"c5677251adcd2\"><p id=\"c5677250ad93c\">添加域名。</p><ol id=\"e2d0e561adl07\"><li id=\"e1e748b1ads2g\"><p id=\"e7a80ff0adn0n\">在<b data-tag=\"uicontrol\" id=\"679b13f2adpqy\" class=\"uicontrol\">网站绑定</b>页面，单击<b data-tag=\"uicontrol\" id=\"edc43da0adz35\" class=\"uicontrol\">添加</b>。<img id=\"0fc07f40ad4sn\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4605256761/p562620.jpg\" alt=\"添加域名\" placement=\"break\" class=\"image break\"></p></li><li id=\"eec13b41adtqo\"><p id=\"eec13b40adke4\">在<b data-tag=\"uicontrol\" id=\"2c5d5380adiyp\" class=\"uicontrol\">添加网站绑定</b>页面，根据页面参数设置网站域名信息，然后单击<b data-tag=\"uicontrol\" id=\"2ec0e600adubq\" class=\"uicontrol\">确定</b>。<img id=\"580949d0adwl7\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4605256761/p562623.jpg\" alt=\"添加网站绑定\" placement=\"break\" class=\"image break\"></p></li></ol></li><li id=\"dc2c26c0ad1oh\"><p id=\"dc2bffb0adzk0\">查看或修改已绑定域名。</p><ol id=\"73f23760ad70v\"><li id=\"7372ce31adki7\"><p id=\"7211dea0adxq4\">在<b data-tag=\"uicontrol\" id=\"679b13f3ad058\" class=\"uicontrol\">网站绑定</b>页面，双击已绑定的网站。</p></li><li id=\"8b3591b1ad90h\"><p id=\"8b3591b0aday4\">在<b data-tag=\"uicontrol\" id=\"9b123cf0adx9t\" class=\"uicontrol\">编辑网站</b>绑定页面，查看网站信息。</p><p id=\"a43ce320ad200\">如果您查看域名信息后，需要修改域名，您可以在当前页面直接修改，然后单击<b data-tag=\"uicontrol\" id=\"c6cfe680adeaz\" class=\"uicontrol\">确定</b>。<img id=\"e47d8e80adqip\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4605256761/p562629.jpg\" alt=\"查看绑定\" placement=\"break\" class=\"image break\"></p></li></ol></li></ul></li><li id=\"eb9b9bd1adg89\"><p id=\"eb9b9bd0adjuw\">重新访问网站。</p><p id=\"fd3e3a00admrh\">网站访问成功，该问题解决。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/migrated-to-a-new-server-in-php-website-using-a-browser-to-access-hint-information-such-as-do-not-support-the-mysql-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>迁移到新服务器上的PHP网站，使用浏览器访问时提示“不支持MySQL”等信息，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>迁移到新服务器上的PHP网站，使用浏览器访问时提示“不支持MySQL”等信息，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-05-11 17:22:33</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"630fa960960dx\"><p data-tag=\"shortdesc\" id=\"63154eb696g2q\" class=\"shortdesc\">本文介绍迁移到新服务器上的PHP网站，使用浏览器访问时提示“不支持MySQL”等信息的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"emcCa\">问题描述</h2><p id=\"a6fe4e60ebc2p\">PHP网站（该网站需使用PHP执行程序代码）迁移到新服务器后，在使用浏览器访问时提示如下任意一种信息。</p><ul id=\"2df09ad2ackgx\"><li id=\"2df09ad0acciz\"><p id=\"a76e7550eb1rn\">系统不支持MySQL。</p></li><li id=\"3b288be1acuyy\"><p id=\"a76e7551eby6z\">PHP不支持MySQL扩展。</p></li><li id=\"4d59ae71acrqx\"><p id=\"a76e7552ebzun\">其他类似错误信息，示例如下。</p><img id=\"3cc194b0eboji\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2512433861/p667768.jpeg\" alt=\"其他错误..jpeg\" placement=\"break\" width=\"750\" class=\"image break\"></li></ul><h2 id=\"tpxJM\">问题原因</h2><p id=\"5b176390ebl01\">因为MySQL扩展功能自PHP 5.5.0版本开始被废弃，并且从PHP 7.0.0版本开始被移除，当网站迁移到新服务器时一般会迁移到PHP 7.0.0及以上版本，由于网站迁移后的新服务器的PHP版本过高，网站程序无法再连接MySQL，导致该问题。</p><p id=\"63154eb896ktm\">您可以使用<code data-tag=\"code\" class=\"code\">php -v</code>命令，查看当前服务器的PHP版本，如图所示。<img id=\"fdd76750e4wyf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2512433861/p638593.jpeg\" alt=\"查看PHP版本..jpeg\" placement=\"break\" class=\"image break\"></p><h2 id=\"rptcQ\">解决方案</h2><p id=\"b3508870ebxyu\">您可以在新服务器上安装并运行5.5.0以下版本的PHP源码包，来为网站提供MySQL扩展功能。</p><div type=\"note\" id=\"85be1520a9r88\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"b3faab20eb84u\">本文操作步骤以在CentOS 7.9操作系统为例，具体操作以您实际的操作系统版本为准。</p></div></div><ol id=\"c0648952e4q6e\"><li id=\"c0648950e4zav\"><p id=\"b3faab21eb50a\">登录迁移后的ECS实例。</p><p id=\"b3faab22ebxph\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"f2042bd1e4v3h\"><p id=\"b3faab23ebxpj\">执行如下命令，安装PHP依赖的软件包。</p><pre id=\"iachgq\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>yum install -y gcc gcc-c++ libxml2 libxml2-devel autoconf libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel zlib zlib-devel glibc glibc-devel glib2 glib2-devel curl curl-devel libxslt-devel openssl-devel</code></pre></li><li id=\"cae76c81e4lcg\"><p id=\"b3faab24eba70\">执行如下命令，从PHP官网下载PHP 5.5.0及以下版本的源码包。</p><div type=\"note\" id=\"22b60fc1e46oz\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"b3faab25eba53\">后续操作均以下载PHP 5.4.45版本的源码包为例，具体版本号以您实际源码包版本为准。</p></div></div><pre id=\"irthea\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>wget https://www.php.net/distributions/php-5.4.45.tar.gz</code></pre></li><li id=\"dfc73451e4yrs\"><p id=\"b3faab26ebgq9\">安装PHP。</p><ol id=\"0d7d2b71e4ijo\"><li id=\"0d2aecc0e4tsx\"><p id=\"b3faab27ebowe\">执行如下命令，解压下载的源码包。</p><pre id=\"il87ho\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>tar -zxvf php-5.4.45.tar.gz</code></pre></li><li id=\"18e4a240e4taw\"><p id=\"b3fad230eb1ys\">执行如下命令，进入源码包目录。</p><pre id=\"o779qo\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>cd php-5.4.45</code></pre></li><li id=\"4a3c9f51e4ecp\"><p id=\"b3fad231eb3s4\">执行如下命令，安装PHP源码包。</p><pre id=\"ytemaw\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>./configure --prefix=/usr/local/php5.4.45 --with-curl --with-freetype-dir --with-gd --with-gettext --with-iconv-dir --with-kerberos --with-libdir=lib64 --with-libxml-dir --with-mysql --with-mysqli --with-openssl --with-pcre-regex --with-pdo-mysql --with-pdo-sqlite --with-pear --with-png-dir --with-xmlrpc --with-xsl --with-zlib --enable-fpm --enable-bcmath --enable-libxml --enable-inline-optimization --enable-gd-native-ttf --enable-mbregex --enable-mbstring --enable-opcache --enable-pcntl --enable-sockets --enable-sysvsem --enable-xml --enable-zip</code></pre><ul id=\"85146771e4nx2\"><li id=\"828f1c21e4fqi\"><p id=\"b3fad232ebhtj\">如果回显显示<code data-tag=\"code\" class=\"code\">Thank you for using PHP</code>，则表示PHP源码包配置成功，如图所示。<img id=\"c9c8c0a0e4rej\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2512433861/p638575.png\" alt=\"安装PHP..png\" placement=\"break\" class=\"image break\"></p></li><li id=\"801ff0e1e44d6\"><p id=\"b3fad233ebtyr\">如果安装过程中缺少某个软件包，会出现相关的报错，您可以根据报错提示安装缺失的软件包，然后再重新安装PHP源码包。</p></li></ul></li><li id=\"df2c8580e4nxl\"><p id=\"b3fad234ebg1g\">执行如下命令，编译并安装PHP。</p><pre id=\"p370da\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>make &amp;&amp; make install</code></pre><p id=\"b3fad235ebwal\">等待PHP安装完成即可。</p></li></ol></li><li id=\"e590b8b0e4yh2\"><p id=\"b3fad236ebo8x\">配置PHP运行版本为5.4.45版本。</p><ol id=\"355bd0a1e4qwt\"><li id=\"35235b80e4vn5\"><p id=\"b3fad237eb3dq\">执行如下命令，进入PHP的安装目录。</p><pre id=\"4g9gse\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>cd /usr/local/php5.4.45/etc</code></pre></li><li id=\"4303c190e4u4n\"><p id=\"b3fad238ebodp\">执行如下命令，把默认的配置文件复制为<code data-tag=\"code\" class=\"code\">php-fpm.conf</code>。</p><pre id=\"14g2in\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>cp php-fpm.conf.default php-fpm.conf</code></pre></li><li id=\"4d4b7080e4ueu\"><p id=\"b3fad239ebcyi\">执行如下命令，启动PHP服务。</p><pre id=\"h3pced\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>/usr/local/php5.4.45/sbin/php-fpm </code></pre></li></ol></li><li id=\"0be1caf1e441s\"><p id=\"b3fad23aeb66v\">重新访问网站。</p><p id=\"b3fad23bebajw\">如果访问成功，该问题解决。</p></li></ol><h2 id=\"FtyZG\">相关文档</h2><ul id=\"63154ec496gf9\"><li id=\"63154ec596zt4\"><p id=\"63154ec696vym\"><a class=\"\" target=\"_blank\" href=\"https://www.php.net/manual/zh/book.mysql.php\">原始的MySQL API </a></p></li><li id=\"63154ec796z9f\"><p id=\"63154ec896lmv\"><a class=\"\" target=\"_blank\" href=\"https://www.php.net/manual/zh/function.mysql-query.php\">mysql_query</a></p></li></ul></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-a-message-similar-to-windows-explorer-is-stopped-is-displayed-when-i-use-a-self-managed-account-to-log-on-to-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>使用自建账号登录Windows实例后提示“Windows资源管理器已停止工作”，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用自建账号登录Windows实例后提示“Windows资源管理器已停止工作”，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-06 10:05:25</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"acceb900a6nkk\"><p data-tag=\"shortdesc\" id=\"acd3e924a6fia\" class=\"shortdesc\"><span style=\"color:rgb(24, 24, 24)\">本文介绍</span>使用自建账号登录Windows实例后提示“Windows资源管理器已停止工作”<span style=\"color:rgb(24, 24, 24)\">的问题原因及解决方案。</span></p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\" data-spm-anchor-id=\"a2c9r.14518950.0.i2.aa555e3bhohsU5\">问题描述</h2><p id=\"acd3e928a64et\">使用自建账号登录Windows实例后，提示“Windows资源管理器已停止工作”，如下图所示。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7048578761/p519874.png\" alt=\"{54BF175F-4894-4B96-82B7-360D661527D0}_20200527154847.jpg\" height=\"182\" width=\"400\" class=\"image break\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"acd3e92aa6g4j\">Windows资源管理器中存在第三方组件，导致explorer.exe进程异常。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7048578761/p519875.png\" alt=\"{5A3CAFAE-1375-4B2F-81FA-21F5BBFB3F21}_20200527170226.jpg\" height=\"353\" width=\"500\" class=\"image break\"><h2 id=\"AywdZ\">解决方案</h2><ol id=\"acd3e936a6z92\"><li id=\"acd3e937a6vk7\"><p id=\"acd3e938a6g6n\">下载<a class=\"\" target=\"_blank\" href=\"https://docs.microsoft.com/en-us/sysinternals/downloads/autoruns\">Autoruns工具</a>，并根据提示安装Autoruns工具。 \n </p><div type=\"note\" id=\"acd3e939a6f88\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"acd41030a6m5n\" class=\"p\">Autoruns工具还可以用于分析explorer.exe进程占用CPU或者内存高的情况。\n</p></div></div></li><li id=\"acd41032a6h9v\"><p id=\"acd41033a62zn\">打开Autoruns工具，单击<b>Explorer</b>，将加载在Windows资源管理器中的第三方组件取消勾选。 </p><img id=\"3ba69e30d1hbj\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2829050861/p615315.png\" alt=\"image\" placement=\"break\" width=\"700\" class=\"image break\"></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-when-the-system-update-process-of-a-windows-instance-is-stuck-at-0", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows系统的ECS实例更新系统时，一直卡在0%该如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows系统的ECS实例更新系统时，一直卡在0%该如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-08-10 10:49:27</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2459639\"><p id=\"b5c7608430rip\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍Windows系统的ECS实例更新系统时，一直卡在0%的问题原因和解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"1402263030pbk\" class=\"section\"><h2 data-tag=\"p\" id=\"b5c76083300oo\" class=\"p\"><b>问题现象</b></h2><p id=\"18c63df130gl1\">Windows系统的ECS实例更新系统时，一直卡在0%。通过实例健康诊断时提示“该实例的防火墙服务（对应的进程名称为mpssvc）目前不处于运行中，会导致Windows系统更新失败”。</p></section><section id=\"1573dea0303ew\" class=\"section\"><h2 id=\"07123aa030475\"><b>问题原因</b></h2><p id=\"16d7f2c031svz\">该问题可能是由于Windows防火墙服务（mpssvc）未运行，导致Windows更新失败。</p></section><section id=\"169ca7303053k\" class=\"section\"><h2 id=\"08a50fa0300oy\"><b>解决方案</b></h2><p id=\"1c57a98032h3c\">您可以通过修改注册表并启动防火墙服务，来解决上述问题。</p><ol id=\"3953286231xxg\"><li id=\"3953286031d1n\"><p id=\"7666e68130p5c\">远程连接Windows实例。</p><p id=\"44419ea031ykt\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"2c49cbf031ugy\"><p id=\"2c49a4e031d65\">查看Windows防火墙状态。</p><ol id=\"6249a63131uv8\"><li id=\"621e2961319ek\"><p id=\"621e2960315sk\">单击右下角的<img id=\"6ed85ef0318sg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3723690961/p701353.png\" alt=\"image.png\" placement=\"inline\" class=\"image inline\">图标，然后选择<span data-tag=\"menucascade\" id=\"a580d54031jla\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"a580fc5031ojh\" class=\"uicontrol\">Windows 系统</b> &gt; <b data-tag=\"uicontrol\" id=\"aca4d600315vz\" class=\"uicontrol\">控制面板</b></span>。</p></li><li id=\"951b720031tzj\"><p id=\"951b4af0317dp\">在控制面板页面，选择<span data-tag=\"menucascade\" id=\"10f5e08031eay\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"10f62ea031226\" class=\"uicontrol\">系统和安全</b> &gt; <b data-tag=\"uicontrol\" id=\"1e2cc02031d5j\" class=\"uicontrol\">允许应用通过 Windows 防火墙</b></span>。</p><p id=\"3a4e22d031sfn\">如果弹出提示<b data-tag=\"uicontrol\" id=\"4179769031de2\" class=\"uicontrol\">Windows 防火墙无法更改某些设置。错误代码 0x80070422</b>，说明该问题是由于防火墙服务未运行导致。</p><img id=\"c96a246031zh8\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3723690961/p701373.png\" alt=\"image.png\" placement=\"break\" width=\"800\" class=\"image break\"></li></ol></li><li id=\"14e0c13031o0y\"><p id=\"14e09a2031v8o\">修改防火墙服务注册表。</p><ol id=\"74a2d84131lq5\"><li id=\"61075041319hh\"><p id=\"61075040317dk\">选择<span data-tag=\"menucascade\" id=\"a0a4077032wtr\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"a0a42e80325w4\" class=\"uicontrol\">开始</b> &gt; <b data-tag=\"uicontrol\" id=\"a3b761f032kan\" class=\"uicontrol\">运行</b></span>，输入<b data-tag=\"uicontrol\" id=\"677fae2030k0l\" class=\"uicontrol\">regedit</b>，打开注册表编辑器。</p></li><li id=\"6f5f5dc030c0h\"><p id=\"b2e793f131itu\">在注册表路径中输入<b data-tag=\"uicontrol\" id=\"54d28850309gz\" class=\"uicontrol\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\mpssvc</b>，按<code data-tag=\"code\" class=\"code\">Enter</code>键，然后查找<b data-tag=\"uicontrol\" id=\"1d876a5031212\" class=\"uicontrol\">Start</b>。</p></li><li id=\"76ecef5131i76\"><p id=\"76ecef50319tu\">右键单击<b data-tag=\"uicontrol\" id=\"e43425b031fcc\" class=\"uicontrol\">Start</b>，然后单击<b data-tag=\"uicontrol\" id=\"1b1d2ab030kig\" class=\"uicontrol\">修改(M)...</b>。</p><img id=\"a15e1bb03173g\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3723690961/p701378.png\" alt=\"image.png\" placement=\"break\" class=\"image break\"></li><li id=\"a4c75e61318cm\"><p id=\"abfb8bc031bh2\">在弹出的对话框中，<b data-tag=\"uicontrol\" id=\"6aefe3c030oh0\" class=\"uicontrol\">基数</b>选择<b data-tag=\"uicontrol\" id=\"6ccb0c6030xsc\" class=\"uicontrol\">十进制(D)</b>，<b data-tag=\"uicontrol\" id=\"6f93a24030gz4\" class=\"uicontrol\">数值数据(V)</b>设置2，单击<b data-tag=\"uicontrol\" id=\"bb4df86031buc\" class=\"uicontrol\">确定</b>。</p><img id=\"c1f6aea031pay\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1730831961/p701380.png\" alt=\"image.png\" placement=\"break\" class=\"image break\"></li></ol></li><li id=\"a39b3a7031jlt\"><p id=\"a39b1360317t8\">启动防火墙服务。</p><ol id=\"d050154131k1a\"><li id=\"cf91592131j4f\"><p id=\"d5ef23b031yt8\">选择<span data-tag=\"menucascade\" id=\"3dde9ea032xny\" class=\"menucascade\"><b data-tag=\"uicontrol\" id=\"3ddec5b0325x9\" class=\"uicontrol\">开始</b> &gt; <b data-tag=\"uicontrol\" id=\"3ddec5b1322eb\" class=\"uicontrol\">运行</b></span>，输入<b data-tag=\"uicontrol\" id=\"e43425b231gie\" class=\"uicontrol\">services.msc</b>，单击<b data-tag=\"uicontrol\" id=\"f5401b7031qq6\" class=\"uicontrol\">确定</b>。</p></li><li id=\"f62a2d51316n4\"><p id=\"f62a2d5031pv0\">在<b data-tag=\"uicontrol\" id=\"fd193b6031cuc\" class=\"uicontrol\">服务</b>页面，找到<b data-tag=\"uicontrol\" id=\"13315c20313hw\" class=\"uicontrol\">Windows Defender Firewall</b>服务，启动该服务。</p></li></ol></li><li id=\"1931765131f44\"><p id=\"193176503101c\">重启实例，使以上修改生效。</p><p id=\"42ade27031oyd\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p><div data-tag=\"note\" id=\"f8fcc24332qd7\" type=\"warning\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong>重启实例会造成您的实例停止工作，可能导致业务中断，建议您在非业务高峰期时执行该操作。</div></div></li><li id=\"250d59d131icv\"><p id=\"250d59d031ecy\">重新更新Windows系统，如果可以正常更新，说明该问题已解决。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/why-can-t-i-log-on-to-a-windows-instance-using", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>为什么使用默认的端口（3389）无法登录Windows实例？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>为什么使用默认的端口（3389）无法登录Windows实例？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-08-03 13:08:32</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2459368\"><p id=\"9e200bf530s9d\" data-tag=\"shortdesc\" class=\"shortdesc\"><span style=\"color:rgb(24, 24, 24)\">本文介绍</span>使用默认的端口（3389）无法登录Windows实例<span style=\"color:rgb(24, 24, 24)\">的可能原因和解决方案</span><span style=\"color:rgb(24, 24, 24)\">。</span></p><div data-tag=\"body\" class=\"body\"><section id=\"6502cfa030kl9\" class=\"section\"><h2 data-tag=\"p\" id=\"9e200bf430qat\" class=\"p\"><b>问题现象</b></h2><p id=\"a3cf8cc030txh\">通过远程桌面或Workbench等工具使用默认的端口（3389）无法登录Windows操作系统的ECS实例。</p></section><section id=\"a1b86c90305oz\" class=\"section\"><h2 id=\"5bacfac030aod\"><b>问题原因</b></h2><p id=\"0250f86130iam\">该问题可能是由于Windows实例默认的远程桌面服务端口（3389）被修改导致。</p><div type=\"note\" id=\"7fa0c8d130kfb\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"7fe6846030yst\">Windows实例远程桌面的默认端口为3389，基于安全性考虑，部分用户有修改默认端口的需求以减少通过远程桌面恶意攻击和扫描ECS实例的次数。</p></div></div></section><section id=\"a303ff6030ujz\" class=\"section\"><h2 id=\"5d127e3030gs9\"><b>解决方案</b></h2><ol id=\"40cce9523019l\"><li id=\"40cce9503041g\"><p id=\"3cb209e130lli\">以VNC方式登录Windows实例。</p><p id=\"4a04aee030kg2\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"4912fbe130wtl\"><p id=\"62ffa44030ycq\">选择<span data-tag=\"menucascade\" id=\"6c1effd030p20\" class=\"menucascade\"></span>，输入<b data-tag=\"uicontrol\" id=\"677fae2030k0l\" class=\"uicontrol\">regedit</b>，打开注册表编辑器。</p></li><li id=\"6f5f5dc030c0h\"><p id=\"ee9a2ac0305be\">在注册表路径中输入<b data-tag=\"uicontrol\" id=\"54d28850309gz\" class=\"uicontrol\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\WinStations\\RDP-Tcp</b>，按<code data-tag=\"code\" class=\"code\">Enter</code>键，然后查找<b data-tag=\"uicontrol\" id=\"2ac5c310303gg\" class=\"uicontrol\">PortNumber</b>的值。</p><p id=\"4dafc01030siu\">如下图所示，<b data-tag=\"uicontrol\" id=\"48541a7030s29\" class=\"uicontrol\">PortNumber</b>的值为3388，表示该ECS实例远程桌面服务端口为3388。</p><ul id=\"99571ef130t7j\"><li id=\"98bd9e1030hob\"><p id=\"98bd7700309uc\">如果该端口为您所需要的端口，登录实例时，端口请设置为<b data-tag=\"uicontrol\" id=\"48541a7130ml6\" class=\"uicontrol\">PortNumber</b>值。</p></li><li id=\"d20661c030n56\"><p id=\"d2063ab0307c1\">如果该端口不是您所需要的端口，请继续执行步骤<a title=\"\" class=\"xref\" href=\"#8cffc9e130p5x\">4</a>。</p><img id=\"49d0630030y9x\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4992880961/p700829.png\" alt=\"image.png\" placement=\"break\" width=\"800\" class=\"image break\"></li></ul></li><li id=\"8cffc9e130p5x\"><p id=\"8cffc9e030ewk\">修改远程桌面服务端口。</p><ol id=\"0fcfa48130xmk\"><li id=\"0f53e4d030fxr\"><p id=\"0f53bdc030ky1\">右键单击<b data-tag=\"uicontrol\" id=\"48541a7230heq\" class=\"uicontrol\">PortNumber</b>，然后单击<b data-tag=\"uicontrol\" id=\"1b1d2ab030kig\" class=\"uicontrol\">修改(M)...</b>。</p><img id=\"2af8284030vve\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4992880961/p700838.png\" alt=\"image.png\" placement=\"break\" class=\"image break\"></li><li id=\"1f26a50130mrp\"><p id=\"1f26a50030zd3\">在弹出的对话框中，<b data-tag=\"uicontrol\" id=\"6aefe3c030oh0\" class=\"uicontrol\">基数</b>选择<b data-tag=\"uicontrol\" id=\"6ccb0c6030xsc\" class=\"uicontrol\">十进制(D)</b>，<b data-tag=\"uicontrol\" id=\"6f93a24030gz4\" class=\"uicontrol\">数值数据(V)</b>设置为您需要的端口号（如3389）。</p><img id=\"910445b030h1q\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4992880961/p700846.png\" alt=\"image.png\" placement=\"break\" class=\"image break\"></li><li id=\"7a0101a130rty\"><p id=\"7a0101a0309ru\">单击<b data-tag=\"uicontrol\" id=\"7ff55c0030jji\" class=\"uicontrol\">确定</b>。</p></li></ol></li><li id=\"92fe680030kc9\"><p id=\"47bcbab030y8v\">重启该实例，使修改生效。</p><p id=\"9a66288030dvh\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li><li id=\"a84ef30130o3a\"><p id=\"a84ef300304pj\">重新登录该实例。</p><p id=\"0e0b1bb030kte\">登录端口设置为步骤<a title=\"\" class=\"xref\" href=\"#8cffc9e130p5x\">4</a>中设置的端口，如果可以正常登录，表示该问题已解决。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-error-message-the-system-cannot-find-the-file-specified-appears-when-i-connect-to-a-windows-instance-by-using-remote-desktop", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例提示“系统找不到指定的文件”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例提示“系统找不到指定的文件”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:41:59</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"3e564c70a1y2n\"><p id=\"3e59a7d7a1xhw\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例提示“系统找不到指定的文件”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"a1819110a10z1\" class=\"section\"><h2 id=\"hXWse\">问题描述</h2><p id=\"3e59a7dba1cn4\">使用本地电脑远程连接Windows系统的ECS实例时，提示以下错误。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3539225761/p519793.png\" alt=\"{0F9B4756-BE62-4996-B144-5742F8A4D165}_20200731112958.jpg\" width=\"430\" height=\"186\" placement=\"break\" class=\"image break\"></section><section id=\"a34dc590a1ow2\" class=\"section\"><h2 id=\"serHA\">问题原因</h2><p id=\"3e59a7dea1fr5\">通过远程桌面连接Windows系统的ECS实例时系统指定了初始化程序，但是相关程序无法启动。</p></section><section id=\"a971e280a1ko7\" class=\"section\"><h2 id=\"3e59a7dfa1b00\">解决方案</h2><p data-spm-anchor-id=\"a2c9r.12641779.0.i4.120aDgcgDgcg8K\" id=\"c06b8140a1yt2\">下列操作以Windows Server 2008 R2 64位操作系统为例，其它版本的操作系统的配置可能有所差异，具体情况请参考相应操作系统的官方文档。</p><ol id=\"52264a90a1l4x\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i9.61ac5e3bxgDHR6\" id=\"52264a91a160k\"><p id=\"52264a92a1bs8\">通过VNC连接Windows实例。</p><p id=\"52264a93a1pwb\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"3e59cee5a1ryo\"><p id=\"3e59cee6a13wd\">依次选择<b data-tag=\"uicontrol\" id=\"6ae31384a3bzx\" class=\"uicontrol\">开始 &gt; 管理工具 &gt; 远程桌面服务</b>，然后单击<b data-tag=\"uicontrol\" id=\"6ae31386a3g39\" class=\"uicontrol\">远程桌面会话主机配置</b>。<img width=\"600\" placement=\"break\" alt=\"124\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3539225761/p554407.png\" id=\"583b2ed0a1t43\" class=\"image break\"></p></li><li id=\"3e59cee7a10jf\"><p id=\"3e59cee8a1ucn\">进入<b data-tag=\"uicontrol\" id=\"6ae33a84a3i9e\" class=\"uicontrol\">RD 会话主机配置</b>区域，双击<b data-tag=\"uicontrol\" id=\"6ae33a86a3834\" class=\"uicontrol\">RDP-Tcp</b><b>。</b></p></li><li id=\"3e59cee9a1uuj\"><p id=\"3e59ceeaa1z22\">进入<b data-tag=\"uicontrol\" id=\"6ae33a8ba3efy\" class=\"uicontrol\">RDP-Tcp 属性</b>页面，单击<b data-tag=\"uicontrol\" id=\"6ae33a8da3yyf\" class=\"uicontrol\">环境</b>，选中<b data-tag=\"uicontrol\" id=\"6ae33a8fa37jd\" class=\"uicontrol\">不允许启动初始程序；始终显示桌面</b>，单击<b data-tag=\"uicontrol\" id=\"6ae33a91a3htj\" class=\"uicontrol\">确定</b>保存配置。<img width=\"600\" placement=\"break\" alt=\"126\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3539225761/p554408.png\" id=\"12983a70a1d7s\" class=\"image break\"></p></li><li id=\"3e59ceeba1u2x\"><p id=\"3e59ceeca15qv\">确认使用远程桌面连接Windows实例成功并且无报错信息。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-instance-via-remote-desktop-connection-failure-but-not-error-message", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例失败但没有错误提示怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例失败但没有错误提示怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-09 14:05:33</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"0e713d20a10bk\"><p data-tag=\"shortdesc\" id=\"0e755bd7a16h2\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例失败，但没有错误提示的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"911e7490a1o92\" class=\"section\"><h2 id=\"exXXW\">问题描述</h2><p id=\"0e755bd8a18nc\">使用本地电脑通过远程桌面连接工具登录Windows系统的ECS实例失败，但没有错误提示。</p></section><section id=\"92b9d510a196f\" class=\"section\"><h2 id=\"zNPHa\">问题原因</h2><p id=\"0e755bd9a13ia\">可能是由于Windows系统的ECS实例未开启远程桌面连接权限，导致通过远程桌面连接Windows ECS实例失败。</p></section><section id=\"95c5b580a19wj\" class=\"section\"><h2 id=\"pRFhT\">解决方案</h2><p data-spm-anchor-id=\"a2c9r.12641779.0.i4.120aDgcgDgcg8K\" id=\"wcDHG\">下列操作以Windows Server 2012 R2 64位操作系统为例，其它版本的操作系统的配置可能有所差异，具体情况请参考相应操作系统的官方文档。</p><ol id=\"0e755be4a14a1\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i9.61ac5e3bxgDHR6\" id=\"0e755be5a1gz7\"><p id=\"8ce939e1a1a0i\">通过VNC连接Windows实例。</p><p id=\"8ce939e2a1ws7\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"dfd540e1a1o4y\"><p id=\"dfd540e2a1fwy\">单击<img id=\"dfd540e3a16bz\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530260.png\" alt=\"win2012开始图标\" placement=\"inline\" width=\"25\" height=\"25\" class=\"image inline\">图标，右键单击<b data-tag=\"uicontrol\" id=\"ab5d13c2a3hvt\" class=\"uicontrol\">这台电脑</b>，然后单击<b data-tag=\"uicontrol\" id=\"ab5d13c4a38jx\" class=\"uicontrol\">属性</b>。 <img placement=\"break\" alt=\"win2012开始\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530290.png\" id=\"dfd540e4a1o3m\" width=\"400\" class=\"image break\"></p></li><li id=\"dfd540e5a1c0x\"><p id=\"dfd540e6a1ves\">在<b data-tag=\"uicontrol\" id=\"ab5d13c9a3j4b\" class=\"uicontrol\">控制面板主页</b>上，单击<b data-tag=\"uicontrol\" id=\"ab5d13cba3bi4\" class=\"uicontrol\">远程设置</b>。</p><img width=\"700\" placement=\"break\" alt=\"win2012远程设置\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530325.png\" id=\"4af03741a77ro\" class=\"image break\"></li><li id=\"dfd540e8a1tdf\"><p id=\"dfd540e9a1boc\">在<b data-tag=\"uicontrol\" id=\"ab5d13d0a3kkr\" class=\"uicontrol\">远程</b>页签下，选中<b data-tag=\"uicontrol\" id=\"ab5d13d2a3cwz\" class=\"uicontrol\">允许远程连接到此计算机 </b>，单击<b data-tag=\"uicontrol\" id=\"ab5d13d4a313j\" class=\"uicontrol\">应用</b>，然后单击<b data-tag=\"uicontrol\" id=\"ab5d13d6a3p4z\" class=\"uicontrol\">确定</b>。<img width=\"400\" placement=\"break\" alt=\"123\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9642225761/p554369.png\" id=\"ee9933b0a1atj\" class=\"image break\"></p></li><li id=\"0e7582e4a153h\"><p id=\"0e7582e5a1mbo\">配置完成后，您可以重新尝试远程连接该服务器。</p></li></ol></section><section id=\"97722d00a17n8\" class=\"section\"><h2 data-spm-anchor-id=\"a2c9r.12641779.0.i4.120aDgcgDgcg8K\" id=\"KZTyN\">相关文档</h2><p data-spm-anchor-id=\"a2c9r.12641779.0.i4.120aDgcgDgcg8K\" id=\"0e7582e6a1yol\">若您遇到其他无法远程连接Windows实例的情况，可参见以下文档进行处理：</p><ul id=\"0e7582e7a1ybi\"><li data-spm-anchor-id=\"a2c9r.12641779.0.i4.120aDgcgDgcg8K\" id=\"0e7582e8a173q\"><p id=\"0e7582e9a1d6w\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/windows-instance-via-remote-desktop-connection-prompt-remote-connection-need-computer-network-level-authentication\">通过远程桌面连接Windows实例提示“远程连接计算机需要网络级别身份验证”怎么办?</a></p></li><li data-spm-anchor-id=\"a2c9r.12641779.0.i4.120aDgcgDgcg8K\" id=\"0e7582eaa1h7d\"><p id=\"0e7582eba1r0x\"><a title=\"\" class=\"xref\" href=\"/zh/simple-application-server/support/the-error-message-an-authentication-error-has-occurred-the-function-requested-is-not-supported-appears\">远程连接Windows服务器提示“身份验证错误，要求的函数不受支持”的错误</a></p></li><li data-spm-anchor-id=\"a2c9r.12641779.0.i4.120aDgcgDgcg8K\" id=\"0e7582eca1l25\"><p id=\"0e7582eda1pbe\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-start-network-interface-controller-in-windows\">远程连接Windows服务器失败且无法Ping该服务器的公网IP地址</a></p></li><li data-spm-anchor-id=\"a2c9r.12641779.0.i4.120aDgcgDgcg8K\" id=\"0e7582eea1hlm\"><p id=\"0e7582efa1bkz\"><a title=\"\" class=\"xref\" href=\"/zh/simple-application-server/support/a-timeout-error-occurs-when-i-connect-to-a-server-deployed-outside-the-chinese-mainland\">远程连接非中国内地的轻量应用服务器提示连接超时</a></p></li></ul></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-system-prompts-host-key-verification-failed-when-logging-on-to-the-ecs-instance-over-ssh", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>使用SSH远程连接Linux系统的ECS实例时，提示“Host key verification failed”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用SSH远程连接Linux系统的ECS实例时，提示“Host key verification failed”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-04 09:54:00</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"796b24b0654iw\"><p data-tag=\"shortdesc\" id=\"7973621165qa5\" class=\"shortdesc\">本文介绍使用SSH远程连接Linux系统的ECS实例时，提示“Host key verification failed”的错误原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"40df47c0cc2i0\" class=\"section\"><h2 id=\"h2-u95EEu9898u63CFu8FF01\">问题现象</h2><ul id=\"7973621665rt4\"><li id=\"7973621765fy1\"><p id=\"79736218655vl\">本地客户端为Linux环境或macOS环境，使用SSH方式无法正常连接Linux系统的ECS实例时，提示如下错误信息。 </p><pre id=\"796b24b165ipd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n@ WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED! @\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nIT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!\nSomeone could be eavesdropping on you right now (man-in-the-middle attack)!\nIt is also possible that the RSA host key has just been changed.\nThe fingerprint for the RSA key sent by the remote host is\nae:6e:68:4c:97:a6:91:81:11:38:8d:64:ff:92:13:50.\nPlease contact your system administrator.\nAdd correct host key in /root/.ssh/known_hosts to get rid of this message.\nOffending key in /root/.ssh/known_hosts:70\nRSA host key for x.x.x.x has changed and you have requested strict checking.\nHost key verification failed.</code></pre></li><li id=\"7973621a65g0n\"><p id=\"7973621b65m5n\">本地客户端为Windows环境，使用常见的SSH客户端（如Putty或MobaXterm）连接Linux系统的ECS实例时，提示类似“The host key does not match the one Putty has cached for this server”或“remote server identification has changed”错误信息。 </p><img id=\"9f1c3050ccl67\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1085500861/p610464.png\" alt=\"windows\" placement=\"break\" class=\"image break\"><img id=\"aaaab720ccpqu\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1085500861/p610465.png\" alt=\"moba\" placement=\"break\" class=\"image break\"></li></ul></section><section id=\"d3ce8ce0cc9bx\" class=\"section\"><h2 id=\"h2-u95EEu9898u539Fu56E02\">问题原因</h2><p id=\"7973621e65grs\">该ECS实例可能进行过重装系统、账户信息变更等操作，导致ECS实例SSH公钥变更，造成本地客户端保存的公钥指纹与服务器端不一致，出现该提示信息。</p></section><section id=\"fb769c40ccgkn\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"7973892a65kyl\">您可以根据本地客户端环境不同，选择合适的方案。</p><section id=\"2e63ca30ccxz0\" class=\"section\"><h3 data-tag=\"h3\" id=\"7973fe5065f6c\" class=\"h3\"><b>本地客户端为Windows环境</b></h3><p id=\"c9527590ccvza\">本文以SSH客户端Putty和MobaXterm进行介绍，不同SSH客户端操作有所差异，请根据实际的客户端进行操作。</p><p id=\"498812c0ccu8m\">客户端为Putty时，单击<b data-tag=\"uicontrol\" id=\"c14e24a0cdjmf\" class=\"uicontrol\">Accept</b>，Putty会自动更新密钥指纹信息，即可成功登录实例。</p><img id=\"bf25efc0cc7bb\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1085500861/p610480.png\" alt=\"Putty\" placement=\"break\" class=\"image break\"><p id=\"7974256965j4f\">客户端为MobaXterm时，单击<code data-tag=\"code\" class=\"code\">Accept the new server hostkey and carry on connecting</code>，MobaXterm会自动更新密钥指纹信息，即可成功登录实例。</p><img id=\"ab4bff30cc044\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1085500861/p610479.png\" alt=\"MobaXterm\" placement=\"break\" class=\"image break\"></section><section id=\"31955b10cc5ca\" class=\"section\"><h3 data-tag=\"h3\" id=\"7974256b65pm0\" class=\"h3\"><b>本地客户端为Linux或macOS环境</b></h3><ol id=\"8db13861ccm8s\"><li id=\"3d884901cczgy\"><p id=\"3d884900cchbr\">在本地客户端中，执行如下命令，进入对应账号的<code data-tag=\"code\" class=\"code\">known_hosts</code>文件。 </p><pre id=\"796b24b365oy1\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim ~/.ssh/known_hosts</code></pre></li><li id=\"7974257165udq\"><p id=\"7974257265qer\">按<code data-tag=\"code\" class=\"code\"><b>i</b></code>键进入编辑模式。</p></li><li id=\"79742573653ke\"><p id=\"79742574651sl\">删除ECS实例IP对应的条目，如下图所示。</p><img id=\"d96e6930ccf1u\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1085500861/p610478.png\" alt=\"known_hosts\" placement=\"break\" class=\"image break\"></li><li id=\"7974257565wp8\"><p id=\"7974257665xlq\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存并退出。</p></li><li id=\"7974257765bp7\"><p id=\"7974257865stt\">重新连接Linux实例，确保可以正常连接。</p></li></ol></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-no-supported-key-exchange-algorithms-error-occurs-when-you-log-on-to-a-linux-instance-by-using-ssh-commands", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>无法远程连接Linux系统的ECS实例，提示“error: Unable to load host key: /etc/ssh/ssh_host_rsa_key”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>无法远程连接Linux系统的ECS实例，提示“error: Unable to load host key: /etc/ssh/ssh_host_rsa_key”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:41:36</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"d929d740abck1\"><p data-tag=\"shortdesc\" id=\"d9337434abeqc\" class=\"shortdesc\">本文主要介绍远程连接Linux系统的ECS实例，提示“error: Unable to load host key: /etc/ssh/ssh_host_rsa_key”错误的原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"3ca008d0cdng0\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"d9337438abg6h\">使用SSH方式无法连接Linux系统的ECS实例，通过VNC登录实例后，执行<code data-tag=\"code\" class=\"code\">cat var/log/secure</code>或<code data-tag=\"code\" class=\"code\">cat var/log/message</code>查看<code data-tag=\"code\" class=\"code\">secure</code>或<code data-tag=\"code\" class=\"code\">message</code>日志，出现类似如下错误信息。</p><pre id=\"ou78xu\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>error: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nerror: @ WARNING: UNPROTECTED PRIVATE KEY FILE! @\nerror: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nerror: Permissions 0777 for '/etc/ssh/ssh_host_rsa_key' are too open.\nerror: It is required that your private key files are NOT accessible by others.\nerror: This private key will be ignored.\nerror: Unable to load host key \"/etc/ssh/ssh_host_rsa_key\": bad permissions\n error: Unable to load host key: /etc/ssh/ssh_host_rsa_key</code></pre><pre id=\"c5rrdx\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>error: Unable to load host key \"/etc/ssh/ssh_host_rsa_key\": invalid format\nerror: Unable to load host key \"/etc/ssh/ssh_host_rsa_key\": invalid format\nerror: Unable to load host key: /etc/ssh/ssh_host_rsa_key\nerror: Unable to load host key \"/etc/ssh/ssh_host_ecdsa_key\": invalid format\nerror: Unable to load host key \"/etc/ssh/ssh_host_ecdsa_key\": invalid format\nerror: Unable to load host key: /etc/ssh/ssh_host_ecdsa_key</code></pre></section><section id=\"8f06b330cdu7g\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"d9339b4dabhoi\">该问题可能的由于ECS实例中SSH服务相关的密钥文件异常，导致sshd守护进程不能加载到正确的SSH密钥。常见密钥文件异常情况如下：</p><ul id=\"d933c253abemh\"><li id=\"d933c254abis5\"><p id=\"845c4ad0cdkge\">相关密钥文件权限配置异常，导致无法正常读取。</p><p id=\"a7a22370cdhqg\">例如，私钥文件默认权限是600，如果配置成777等其他权限，导致其他用户也有读取或修改权限。此时，SSH服务会认为该配置存在安全风险，导致连接失败。</p></li><li id=\"83ffabe1cdtdi\"><p id=\"83ffabe0cdl28\">相关密钥文件异常，例如文件损坏、被删除或篡改等。</p></li></ul></section><section id=\"c30d3c30cdijh\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"9036f5d0cdtnf\">您可以通过修改SSH服务相关的密钥权限或修复密钥文件来解决此问题。</p><ol id=\"1b0e5362cdugw\"><li id=\"1b0e5360cdt26\"><p id=\"19fc2010cdad2\">以VNC方式远程连接ECS实例。</p><p id=\"558a9780cbi7p\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"1f711140cd86m\"><p id=\"1f70ea30cdgj6\">执行如下命令，查看SSH服务的公钥与密钥文件。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"c55c09f4cbleu\" class=\"pre codeblock language-plaintext\"><code>ls -l /etc/ssh</code></pre><ul id=\"cb6b70f1cb4gy\"><li id=\"c9937ca1cb5rc\"><p id=\"c55c09f5cbk87\">如果系统显示如下信息，说明公钥与密钥文件丢失，请执行步骤<a title=\"\" class=\"xref\" href=\"#dc7fe480cdpv5\">4</a>。</p><img id=\"63a83940cd0qe\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0525500861/p611419.png\" alt=\"密钥文件丢失\" placement=\"break\" class=\"image break\"></li><li id=\"d16633f1cbeb5\"><p id=\"d16633f0cb3lf\">如果系统显示如下信息，公钥与密钥文件权限为777，并且文件大小为0，说明文件存在异常，请执行步骤<a title=\"\" class=\"xref\" href=\"#687e5261cdnzb\">3</a>。</p><div type=\"note\" id=\"5b1890e1ceuqx\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"5b1890e0ce9hv\">权限异常并非是777时才是异常，当权限超过默认权限时，都会出现报错。</p></div></div><img id=\"c8caaf70cdl1u\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0525500861/p611409.png\" alt=\"查看密钥权限\" placement=\"break\" class=\"image break\"></li></ul></li><li id=\"687e5261cdnzb\"><p id=\"687e5260cdkyz\">执行如下命令，恢复相关密钥文件的默认权限。 </p><div id=\"d003bfb0cegns\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"cd3cfe90cepel\">不同Linux发行版本中，密钥权限可能不同，你可以参考相同Linux发行版本中密钥权限进行修改。</p></div></div><pre id=\"af6cvz\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>cd /etc/ssh/\nsudo chmod 600 ssh_host_*\nsudo chmod 644 *.pub</code></pre></li><li id=\"dc7fe480cdpv5\"><p id=\"dc7fbd70cde4m\">执行如下命令，重启SSH服务。</p><p id=\"fbac47d0cdxzc\">重启SSH服务时，将会自动生成相关密钥文件。</p><pre id=\"71u6sd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sudo systemctl restart sshd.service </code></pre></li><li id=\"95feaff1cbshz\"><p id=\"95feaff0cbtc5\">执行如下命令，确认已生成密钥相关文件。</p><pre id=\"849egx\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls -l /etc/ssh</code></pre><img id=\"606e0af0cd7my\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0525500861/p611439.png\" alt=\"查看密钥\" placement=\"break\" class=\"image break\"></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-system-prompts-must-be-owned-by-root-and-not-group-or-word-writable-error-when-the-ssh-service-starts", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>Linux系统的ECS实例中，启动SSH服务时提示“must be owned by root and not group or world-writable”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例中，启动SSH服务时提示“must be owned by root and not group or world-writable”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:27:45</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"a2104b10c6o4i\"><p data-tag=\"shortdesc\" id=\"a216dac1c6uuj\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中，启动SSH服务时提示“must be owned by root and not group or world-writable”错误的错误原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"cf41a8e0c6gux\" class=\"section\"><h2 id=\"KSazG\">问题现象</h2><p id=\"a216dac6c6kat\">Linux系统的ECS实例中，启动SSH服务时提示“must be owned by root and not group or world-writable”错误。</p><img id=\"4d2941f0c6fhk\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8624929761/p606076.png\" alt=\"启动ssh失败\" placement=\"break\" class=\"image break\"></section><section id=\"7b98ec20c6jnv\" class=\"section\"><h2 id=\"dPGQQ\">问题原因</h2><p id=\"a216dac7c66jn\">SSH服务基于安全性考虑，对服务相关的目录或文件的权限配置、属组等都有要求。如<code data-tag=\"code\" class=\"code\">/var/empty/sshd</code>Owner属性与Group属性为root用户和root用户组，当<code data-tag=\"code\" class=\"code\">/var/empty/sshd</code>Owner属性与Group属性为其他时，则会出现异常。</p></section><section id=\"b4976060c6mi8\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p data-tag=\"h3\" id=\"a21728e0c651k\" class=\"h3\">您可以修改<code data-tag=\"code\" class=\"code\">/var/empty/sshd</code>目录的Owner属性与Group属性，以解决此问题。</p><ol id=\"a21728e1c6wsc\"><li id=\"a21728e2c6x9t\"><p id=\"c5463011c6xzd\">使用VNC远程连接ECS实例。 </p><p id=\"c7dd0790c60od\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"f0ffb390c6mvt\"><p id=\"f0ff8c80c6eg1\">执行如下命令，查看<code data-tag=\"codeph\" class=\"codeph\">/var/empty/sshd</code>目录权限配置。 </p><pre data-tag=\"codeblock\" id=\"a2104b11c6ued\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ll -d /var/empty/</code></pre><p id=\"a21728e4c6xwx\">系统显示类似如下，表示<code data-tag=\"codeph\" class=\"codeph\">/var/empty/sshd</code>目录Owner属性与Group属性为Linux和Linux，需要修改为root用户和root用户组。 </p><img id=\"663ce810c6uwu\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8624929761/p606079.png\" alt=\"下载\" placement=\"break\" class=\"image break\"></li><li id=\"a21728e6c6lvz\"><p id=\"a21728e7c6lzr\">依次执行如下命令，恢复默认配置。 \n</p><div type=\"important\" id=\"ad97a050c9iwq\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"ad977940c9xkl\">以下chmod命令适用于CentOS 7，并非所有Linux发行版本中/var/empty/sshd目录都是711权限，您可以参考相同发行版本的实例目录权限进行配置。</p></div></div><pre data-tag=\"codeblock\" id=\"a2104b13c6zbh\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chown -R root:root /var/empty/sshd\nchmod -R 711 /var/empty/sshd</code></pre></li><li id=\"a2174ff4c69oq\"><p id=\"a2174ff5c6lz0\">执行如下命令，重启SSH服务。 \n</p><pre data-tag=\"codeblock\" id=\"a2104b14c6pxj\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart sshd.service</code></pre></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/using-usedns-to-enable-ssh-slows-down-ssh-logon-or-data-transfer", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>Linux实例中，SSH登录或数据传输速度都很慢怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux实例中，SSH登录或数据传输速度都很慢怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:28:20</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"299a2740bd9x8\"><p data-tag=\"shortdesc\" id=\"29a0de03bdf9w\" class=\"shortdesc\">本文介绍Linux系统的ECS实例中，SSH登录或数据传输速度都很慢的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"fc820150bdo5u\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"29a0de08bdvzu\">在Linux系统的ECS实例中，通过外网或内网使用SSH服务登录或数据传输时，速度很慢。</p></section><section id=\"fdf2a850bd5dt\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"29a10511bdu7a\">该问题可能是ECS实例中，SSH服务配置文件<code data-tag=\"codeph\" class=\"codeph\">/etc/ssh/sshd_config</code>中启用了UseDNS特性导致。</p><ul id=\"0fd1da50bd9qs\"><div id=\"25e259f0bd5mi\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"0fd1da52bdbqm\">UseDNS特性是SSH服务的安全增强特性，默认未开启。开启后，服务端会先根据客户端IP进行DNS PTR反向查询，得到客户端主机名。再根据得到的客户端主机名进行DNS正向A记录查询，最后比对得到的IP与原始IP是否一致，用于防止客户端欺骗。</p><p id=\"0fd1da54bdw6p\">通常情况下，客户端使用的是动态IP，没有相应的PTR记录。所以，该特性开启后，不仅无法用于信息比对，反而由于相关查询操作增加了操作延迟，最终导致客户端连接速度变慢。</p></div></div></ul></section><section id=\"0a4b35e0bdjdf\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><ol id=\"29a12c23bd0tr\"><li data-spm-anchor-id=\"a2c9r.12641768.0.i0.47d05e3b5ENw6f\" id=\"29a12c24bd0t0\"><p id=\"29a12c25bd1gk\">登录Linux实例。</p><p id=\"3f210f10bdrml\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"83b17ca1bd2w3\"><p id=\"83b17ca2bdsji\">执行如下命令，查看sshd_config文件。 </p><pre data-tag=\"codeblock\" id=\"83a8ca11bdy9n\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/ssh/sshd_config</code></pre><p id=\"83b17ca3bd45i\"> 系统显示类似如下，表示开启了UseDNS特性。 </p><pre data-tag=\"codeblock\" id=\"83a8ca12bds9s\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>UseDNS yes</code></pre></li><li id=\"6144000485t3e\"><p id=\"cf46f99097n4k\">修改SSH服务配置文件。</p><ol id=\"d496fda1972v6\"><li id=\"d42eed0197e1n\"><p id=\"d735282097dh0\">打开SSH配置文件。</p><pre id=\"zdrxtw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vi /etc/ssh/sshd_config</code></pre></li><li id=\"d967717097zr0\"><p id=\"dfcd043097xj8\">根据业务需要，在该行配置前加<code data-tag=\"code\" class=\"code\">#</code>注释掉该配置或将<code data-tag=\"code\" class=\"code\">yes</code>修改为<code data-tag=\"code\" class=\"code\">no</code>禁用UseDNS特性。</p><pre data-tag=\"codeblock\" id=\"83a8ca13bdj92\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code># UseDNS no</code></pre></li><li id=\"6144271185czd\"><p id=\"9518115dbdg01\">按Esc键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存修改。</p></li><li id=\"e9d97ee197kai\"><p id=\"4a875291bdx7f\">执行如下命令，重启SSH服务。 </p><pre id=\"6138b563850ez\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart sshd.service</code></pre></li></ol></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-ssh-service-cannot-be-started-due-to-port-occupation", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>Linux系统的ECS实例中，启动SSH服务提示“Failed to start OpenSSh server daemon”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例中，启动SSH服务提示“Failed to start OpenSSh server daemon”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:51:57</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"4c5f2160cal4n\"><p data-tag=\"shortdesc\" id=\"4c647895cab8g\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中，启动SSH服务提示“Failed to start OpenSSh server daemon”错误的原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"6dba9dc0cbuwk\" class=\"section\"><h2 id=\"4c649fa0cag11\">问题现象</h2><p id=\"fbc700e0cbl49\">在Linux系统的ECS实例中，SSH服务（sshd.service）无法启动，运行<code data-tag=\"code\" class=\"code\">systemctl status sshd.service</code>查看SSH服务提示“Failed to start OpenSSh server daemon”错误。</p><img id=\"200c8ee0cbcvc\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6672600861/p610185.png\" alt=\"sshd状态\" placement=\"break\" class=\"image break\"></section><section id=\"70083740cbubu\" class=\"section\"><h2 id=\"4c649fa2ca3ax\">问题原因</h2><p id=\"26546070cbio9\">该问题可能是因为SSH服务端口（22）被占用导致。</p></section><section id=\"8cc3b710cb8qe\" class=\"section\"><h2 id=\"4c649fa4caqq9\">解决方案</h2><p id=\"a6783871cb9ie\">您可以通过根据业务需要，修改占用22端口服务的端口号或修改SSH服务端口来解决此问题。</p><ol id=\"46d99272cbgqp\"><li id=\"46d99270cbs5w\"><p id=\"44851b21cbri6\">以VNC方式远程连接ECS实例。</p><p id=\"55238fc0cbvg2\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"53254ec1cbf35\"><p id=\"53254ec0cbr7p\">执行如下命令，以测试模式运行SSH服务。</p><pre id=\"ey1niy\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>/sbin/sshd -d</code></pre><p id=\"db472940cbsno\">显示信息如下，表示22端口被占用，导致SSH服务无法启动。</p><img id=\"d9d48670cbayz\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6672600861/p610186.png\" alt=\"端口被占用\" placement=\"break\" class=\"image break\"></li><li id=\"f4bc7ec1cbihs\"><p id=\"f4bc7ec0cbq5v\">执行如下命令，查看22端口被占用情况。</p><pre id=\"r8tgll\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>ss -tunlp | grep 22</code></pre><p id=\"2dd4e3a0cbj4p\">显示信息如下，表示22端口被Nginx服务占用。</p><div type=\"important\" id=\"8fadf6f0ce35k\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"8fadcfe0cexi2\">本文中22端口被Nginx服务占用仅为示例说明，请以实际为准。</p></div></div><img id=\"61252e40cbe28\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4910610861/p610187.png\" alt=\"Ngnix占用22\" placement=\"break\" class=\"image break\"></li><li id=\"63485c61cbemk\"><p id=\"63485c60cbrqs\">您可以根据需要，选择合适的方案来解决此问题。</p><ul id=\"3e8479d1cbr92\"><li id=\"3e356f70cbqyv\"><p id=\"3e354860cb2fi\">修改Nginx服务端口号。</p><ol id=\"8dae21a1cbagj\"><li id=\"8d19f7f0cbopo\"><p id=\"8d19d0e0cb3uc\">执行如下命令，打开nginx.conf配置文件。</p><pre id=\"lxpzpr\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>vim /etc/nginx/nginx.conf</code></pre></li><li id=\"ca151541cbml8\"><p id=\"ca151540cb0cz\">将Nginx占用的端口号修改为80。</p><img id=\"821a1530cbw08\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5580320861/p610189.png\" alt=\"修改Ngnix占用端口\" placement=\"break\" class=\"image break\"></li><li id=\"7df12c01cbevq\"><p id=\"92d93130cbtyg\">按下<code data-tag=\"code\" class=\"code\">Esc</code>键后，输入<code data-tag=\"code\" class=\"code\">:wq</code>并按<code data-tag=\"code\" class=\"code\">Enter</code>键以保存关闭配置文件。</p></li><li id=\"bd0f2950cb45n\"><p id=\"cd4bf5f0cb9iw\">执行以下命令，重启Nginx服务。</p><pre id=\"4bldcw\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>systemctl restart nginx </code></pre></li><li id=\"bf58aeb0cbgbm\"><p id=\"c2ee7fa0cbzfy\">执行以下命令，重启SSH服务。</p><pre id=\"rufxax\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>systemctl restart sshd.service </code></pre></li></ol></li><li id=\"871c00a1cb82p\"><p id=\"871c00a0cbs47\">修改SSH服务端口号。</p><ol id=\"018376d1cb47k\"><li id=\"7885ece1cbeix\"><p id=\"7885ece2cbah2\">执行如下命令，打开ssh_config配置文件。</p><pre id=\"7885ece3cbq8t\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>vim /etc/ssh/sshd_config</code></pre></li><li id=\"02de9a08cb8le\"><p id=\"9e64e6f0cb1es\">修改SSH服务的端口号，例如修改为2222。</p><img id=\"c8ffbb60cboqm\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5580320861/p610190.png\" alt=\"修改SSH占用端口\" placement=\"break\" class=\"image break\"></li><li id=\"9c44ed20cbsqn\"><p id=\"9c449f00cb53t\">按下<code data-tag=\"code\" class=\"code\">Esc</code>键后，输入<code data-tag=\"code\" class=\"code\">:wq</code>并按<code data-tag=\"code\" class=\"code\">Enter</code>键以保存关闭配置文件。</p></li><li id=\"ea283241cbu21\"><p id=\"ed7b7bf0cb0fw\">执行以下命令，重启SSH服务。</p><pre id=\"e7fd14e0cbl1w\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>systemctl restart sshd.service </code></pre></li></ol></li></ul></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/remote-connection-to-a-linux-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>远程连接Linux实例时卡顿怎么办</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>远程连接Linux实例时卡顿怎么办</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:31:16</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"83dd201096d04\"><p id=\"83e3afc79605g\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍使用SSH远程连接Linux实例时出现卡顿的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"6025182096rx3\" class=\"section\"><h2 id=\"XbeWY\" data-spm-anchor-id=\"a2c9r.14518950.0.i10.6fc414376iZYwJ\">问题描述</h2><p id=\"83e3afc896kav\">使用SSH连接Linux实例时耗时较长，在输入用户名密码后，会卡顿一段时间，才进入系统。在卡顿期间使用<code data-tag=\"code\" class=\"code\">Ctrl+C</code>命令可以跳过卡顿，正常进入实例。</p></section><section id=\"763549a096cho\" class=\"section\"><h2 id=\"tayMx\" data-spm-anchor-id=\"a2c9r.14518950.0.i11.6fc414376iZYwJ\">问题原因</h2><p id=\"83e3afc996yyc\" data-spm-anchor-id=\"a2c9r.14518950.0.i13.6fc414376iZYwJ\">可能是由于全局环境变量配置文件（<code data-tag=\"code\" class=\"code\">/etc/profile</code>）或个人环境变量配置文件（如<code data-tag=\"code\" class=\"code\">/root/.bash_profile</code>、<code data-tag=\"code\" class=\"code\">/root/.bashrc</code>、<code data-tag=\"code\" class=\"code\">$HOME/.bash_profile</code>、<code data-tag=\"code\" class=\"code\">$HOME/.bashrc</code>）中存在异常，导致读取环境变量耗时较长。</p></section><section id=\"e079b99096yoz\" class=\"section\"><h2 id=\"EFTFF\">解决方案</h2><p id=\"fc9f501196kcc\">修改新增的环境变量配置文件以解决使用ssh连接Linux实例卡顿的问题。</p><ol id=\"83e3d6db96s61\"><li id=\"83e3d6dc96wax\"><p id=\"9331ad9096eyw\">远程连接ECS实例。</p><p id=\"9331ad9196rcj\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"929daaf196gqh\"><p id=\"929daaf096z9a\">检查是否更新或者编辑过以下文件。 </p><p id=\"296a07609641b\">若更新过，请继续执行下一步。\n</p><ul id=\"83e3d6de96c2a\"><li id=\"4f19f843a2nb6\"><p id=\"4f19f844a2jdu\">$HOME/.bash_profile</p></li><li id=\"924cb411a3n76\"><p id=\"961e5580a3kll\">$HOME/.bashrc</p></li><li id=\"4f19f845a2xtc\"><p id=\"4f19f846a2zo1\">/root/.bash_profile</p></li><li id=\"4f19f847a2k50\"><p id=\"4f19f848a2yoz\">/root/.bashrc</p></li><li id=\"4f19f849a2476\"><p id=\"4f19f84aa265y\">/etc/profile</p><div type=\"note\" id=\"c60a1861a34mh\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"c8907520a3tl1\">$HOME表示当前用户家目录。</p></div></div></li></ul></li><li id=\"4f19f84ba2zk9\"><p id=\"4f19f84ca2wf4\">将更新过的环境变量注释。</p><ol id=\"4f19f84da2ugr\"><li id=\"4f19f84ea29ox\"><p id=\"4f19f84fa2b4o\">执行如下命令，打开环境变量配置文件。</p><pre id=\"4f19f850a2nl3\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>vi /root/.bashrc</code></pre></li><li id=\"4f19f851a2y7m\"><p id=\"4f19f852a2ubh\">在更新的内容前加<b data-tag=\"uicontrol\" id=\"4f19f853a2pdz\" class=\"uicontrol\">#</b>，将更新过的内容注释。</p><img placement=\"break\" alt=\"环境变量\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1926235761/p555160.png\" id=\"4f19f855a20ze\" class=\"image break\"></li><li id=\"4f19f856a2hvc\"><p id=\"4f19f857a2mgi\">编辑完成后，按<code data-tag=\"code\" class=\"code\">Esc</code>键，并输入<code data-tag=\"code\" class=\"code\">:wq</code>后按下<code data-tag=\"code\" class=\"code\">Enter</code>键，保存并退出。</p></li><li id=\"4f19f858a2939\"><p id=\"4f19f859a24ul\">执行如下命令，使环境变量生效。</p><pre id=\"4f19f85aa2tki\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>source /root/.bashrc</code></pre></li></ol></li><li id=\"4f1a1f50a2b64\"><p id=\"4f1a1f51a2ywp\">重新远程连接实例进行测试，确保卡顿问题已经消除。 </p></li><li id=\"4f1a1f52a2zmo\"><p id=\"4f1a1f53a293d\">重新修改ECS实例内的环境变量配置文件，确保修改内容正确性。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/configure-linux-to-keep-the-process-running-after-the-ssh-client-is-disconnected", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>Linux系统下如何保持进程在SSH客户端断开后仍继续运行？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统下如何保持进程在SSH客户端断开后仍继续运行？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-07 11:51:44</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"868bf6f096n89\"><p data-tag=\"shortdesc\" id=\"8693e63796wtc\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例内，当断开SSH客户端后，如何保持进程继续运行的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"0f25608096rzs\" class=\"section\"><h2 id=\"noPMw\">使用场景</h2><p id=\"86940d40964wj\">在Linux系统中，在执行一些运行时间比较长的任务时，必须等待执行完毕才能断开SSH连接或关闭客户端软件，否则可能会导致执行中断。本文介绍两种保障程序在您退出登录后持续运行的方法。</p></section><section id=\"14cfe0a096ux1\" class=\"section\"><h2 data-tag=\"h3\" id=\"86940d499691a\" class=\"h3\"><b>方法一：使用nohup执行命令</b></h2><p id=\"8694345096j6l\">nohup，可以使运行的命令忽略SIGHUP信号。因此，即使退出登录，程序仍旧会继续执行。通常情况下，在nohup命令尾部加上<b data-tag=\"uicontrol\" id=\"4b60e186a2vnc\" class=\"uicontrol\">&amp;</b>字符，才能将命令放至后台执行。具体示例如下所示。</p><div type=\"note\" id=\"8694345196b5d\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"8694345396gzr\">nohup通常用于执行无干预的自动化程序或脚本，无法完成带有交互的操作。</p></div></div><ol id=\"8694345496y2b\"><li id=\"86943455961ph\"><p id=\"869434569646u\">执行如下命令，每秒输出一行信息。 </p><pre id=\"868c1e0096g73\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>bash hello.sh</code></pre><p id=\"8694345796qzh\"> 系统显示类似如下。</p><p id=\"5407a780965nx\"> <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2868104761/p519373.png\" class=\"image break\"></p></li><li id=\"86943458967oa\"><p id=\"8694345996se5\">使用nohup执行命令。</p><p id=\"c6dc5f20962e1\">在命令头尾分别加上nohup和&amp;，可以看到nohup输出了一行信息，再Enter键就跳回了Shell命令行，此时命令已经在后台执行了，nohup将命令的输出重定向至当前目录的nohup.out文件中。同时，nohup会将对应程序的PID输出，PID可用于需要中断进程时结束进程。 </p><div id=\"1506232196qil\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"1a7bb090962i5\">在命令中也可以使用重定向将程序的输出改为自己想要的文件名，如下所示，则程序的输出就会写到hello.log文件中。 </p><pre id=\"868c1e0396giv\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>nohup bash hello.sh &gt;hello.log &amp;</code></pre></div></div><pre id=\"868c1e0196uv8\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>nohup bash hello.sh &amp;</code></pre><p id=\"8694345a96r8e\"> 系统显示类似如下。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2868104761/p519374.png\" class=\"image break\"></li><li id=\"8694345b96i7g\"><p id=\"8694345c96bhe\">执行如下命令，可以持续的查看nohup.out的输出，达到监控程序的效果。 </p><pre id=\"868c1e0296p44\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>tail -f nohup.out</code></pre></li><li id=\"86945b62960bf\"><p id=\"86945b6396q2w\">执行如下命令，结束进程。 </p><pre id=\"868c1e049606c\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>kill -TRM [$PID]</code></pre><div type=\"note\" id=\"86945b64965kt\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"86945b6596s2f\">[$PID]为之前nohup命令输出的值。\n</p></div></div></li></ol></section><section id=\"a1407bd096eso\" class=\"section\"><h2 data-tag=\"h3\" id=\"86945b6796syi\" class=\"h3\"><b>方法二：使用screen执行命令</b></h2><p id=\"714a82f09636a\">GNU Screen一款由GNU计划开发的用于命令行终端切换的软件，可以当做窗口管理器的命令行界面版本。只要Screen本身没有被终止，在其内部运行的会话都可以恢复，特别适合执行一些运行时间长的任务。</p><ol id=\"cd436bc296ujg\"><li id=\"cd436bc0962qz\"><p id=\"cc087ac096xno\">安装screen工具。</p><p id=\"d79553e096vyo\">Linux系统默认没有screen工具，需要先进行安装。</p><ul id=\"e5608441967n4\"><li id=\"e4a4ae5196a1w\"><p id=\"e4a4ae50965ut\">CentOS系列系统安装命令如下所示。 </p><div id=\"18163c909630a\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"13f5b7d096exf\">CentOS 6与CentOS 8操作系统版本结束了生命周期（EOL），按照社区规则，CentOS 6/8的源地址内容已移除。当您在CentOS 6/8系统内继续使用默认配置的源地址时会发生报错。建议您先切换CentOS 6/8的源地址，然后再进行操作。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-the-centos-6-source-address\">CentOS 6 EOL如何切换源？</a>和<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-centos-8-repository-addresses\">CentOS 8 EOL如何切换源？</a></p></div></div><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"uqnaza\" class=\"pre codeblock language-javascript\"><code>yum install screen</code></pre></li><li id=\"f0c8e57096l8r\"><p id=\"f0c8be6096urv\">Ubuntu系列系统安装</p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"h17mmi\" class=\"pre codeblock language-javascript\"><code>sudo  apt-get  install screen</code></pre></li></ul></li><li id=\"86948270963ft\"><p id=\"8694827996auh\">执行如下命令，创建screen窗口。 </p><pre id=\"868c1e0796ip9\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>screen -S [$Name]</code></pre></li><li id=\"8694a98096wbb\"><p id=\"8694a98196ddu\">执行如下命令，列出screen窗口。 </p><pre id=\"868c1e08963js\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>screen -ls</code></pre><p id=\"8694a98296a4q\"> 系统显示类似如下。</p><p id=\"5cbe4ed0962rk\"> <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2868104761/p519375.png\" class=\"image break\"></p></li><li id=\"8694a983969zz\"><p id=\"8694a9849611f\">当需要运行脚本、执行程序时，在命令前添加screen即可。</p></li><li id=\"8694a98596q5w\"><p id=\"8694a98696t6b\">同时按<b>Ctrl</b>+<b>a</b>+<b>d</b>键，就可以退出SSH登录，但不会影响screen程序的运行。</p></li><li id=\"8694a98796adw\"><p id=\"8694a98896eiv\">需要继续工作时，登录实例，然后执行如下命令，恢复会话即可。 </p><pre id=\"868c1e09962y6\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>screen -r -d</code></pre></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/login-using-sftp-linux-instance-prompt-received-unexpected-end-of-file-from-sftp-server-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>使用SFTP登录Linux实例时，提示“Received unexpected end-of-file from SFTP server”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用SFTP登录Linux实例时，提示“Received unexpected end-of-file from SFTP server”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:24:51</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"576d101096niq\"><p id=\"5772403796mab\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍使用SFTP工具Linux实例时，提示<b data-tag=\"uicontrol\" id=\"515b4271a2g64\" class=\"uicontrol\">“Received unexpected end-of-file from SFTP server”</b>错误时的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"66eace40962lt\" class=\"section\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"5772403896a9a\">使用SFTP工具登录Linux实例时，提示<b data-tag=\"uicontrol\" id=\"515b6980a2umu\" class=\"uicontrol\">“</b><b data-tag=\"uicontrol\" id=\"515b6983a29em\" class=\"uicontrol\">Received unexpected end-of-file from SFTP server</b><b data-tag=\"uicontrol\" id=\"515b6985a2mh4\" class=\"uicontrol\">”</b>错误。</p></section><section id=\"65ad453096o02\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"5772674096a9v\">该问题一般是由于ECS实例内的SSH配置文件（/etc/ssh/sshd_config）中没有开启SFTP所致。</p></section><section id=\"63f8de7096uke\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"25528920a0x6k\">您可以在SSH配置文件中（/etc/ssh/sshd_config）开启SFTP功能以解决该问题，具体步骤如下。</p><ol id=\"57726741968w2\"><li id=\"5772674296w8u\"><p id=\"57726743968xv\">远程连接ECS实例。</p><p id=\"2943b98096wz4\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"8df2ad6096wqg\"><p id=\"8df2865096ko5\">执行如下命令，打开SSH配置文件。 </p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"576d101196i06\" class=\"pre codeblock language-javascript\"><code>vi /etc/ssh/sshd_config</code></pre></li><li id=\"57726745963gl\"><p id=\"5772674696vf7\">找到如下配置所在行，删除前面的<b data-tag=\"uicontrol\" id=\"515bb7a3a23ll\" class=\"uicontrol\">#</b>，取消注释该行配置，开启SFTP功能。 </p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"576d1012960mt\" class=\"pre codeblock language-javascript\"><code>#Subsystem  sftp   /usr/libexec/openssh/sftp-server</code></pre></li><li id=\"57728e509613b\"><p id=\"57728e51966hs\">执行如下命令，重启SSH服务。</p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"576d101396tkv\" class=\"pre codeblock language-javascript\"><code>systemctl restart sshd.service</code></pre></li><li id=\"5e16375196rxa\"><p id=\"5f473d4096ywr\">重新登录该ECS实例，确认可以正常登录。 </p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/in-linux-ecs-instances-the-following-error-fatal-cannot-bind-any-address-occurs-when-the-ssh-service-is-started", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>Linux系统的ECS实例中，启动SSH服务时提示“fatal: Cannot bind any address”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例中，启动SSH服务时提示“fatal: Cannot bind any address”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-30 20:38:40</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"75ca57406520n\"><p data-tag=\"shortdesc\" id=\"75d3a61065yy6\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中，启动SSH服务时提示“fatal: Cannot bind any address”错误的原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"a4d70cc0cbk6u\" class=\"section\"><h2 id=\"mMtcd\">问题现象</h2><p id=\"75ca574165w2q\">在Linux系统的ECS实例中启动SSH服务时，命令行或Secure日志出现类似如下错误信息。</p><pre id=\"75ca574265wok\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>FAILED.\nfatal: Cannot bind any address.\naddress family must be specified before ListenAddress.</code></pre></section><section id=\"bf24f5b0cbc0h\" class=\"section\"><h2 id=\"YnnGn\">问题原因</h2><p id=\"7cff84c0cbusu\">该问题可能是因为ECS实例中SSH服务的配置文件<code data-tag=\"code\" class=\"code\">/etc/ssh/sshd_config</code>中AddressFamily配置为inet6，但ECS实例没有启用IPv6或IPv6协议配置错误，导致出现该问题。</p></section><section id=\"d16f7730cb387\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><ol id=\"d31e4761cbwhi\"><li id=\"cfee1610cbjn6\"><p id=\"44851b21cbri6\">以VNC方式远程连接ECS实例。</p><p id=\"92efe950cbsuv\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"75d3cd2565uzb\"><p id=\"75d3cd2665sos\">执行如下命令，查看<code data-tag=\"code\" class=\"code\">/etc/ssh/sshd_config</code>配置文件。</p><pre id=\"nc1mwz\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/ssh/sshd_config</code></pre><p id=\"e83e5a40cbn5h\">当返回信息包含如下内容时，说明配置了IPv6协议族。</p><pre id=\"75ca574365lr0\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>AddressFamily inet6</code></pre><div type=\"note\" id=\"3037cc50cbphb\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3037f360cbgyg\">AddressFamily参数值说明如下。 \n</p><ul id=\"3037f361cbuyg\"><li id=\"3037f362cbryy\"><p id=\"3037f363cbzpk\"><code data-tag=\"code\" class=\"code\">inet</code>：使用IPv4协议族，为默认值。</p></li><li id=\"3037f364cbymc\"><p id=\"3037f365cbt6i\"><code data-tag=\"code\" class=\"code\">inet6</code>：使用IPv6协议族。</p></li><li id=\"3037f366cbvb4\"><p id=\"3037f367cbn5m\"><code data-tag=\"code\" class=\"code\">any</code>：同时启用IPv4和IPv6协议族。</p></li></ul></div></div></li><li id=\"75d3f433655uc\"><p id=\"75d3f43465thw\">修改AddressFamily参数值。</p><div type=\"important\" id=\"9cc47a20cetyu\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"a48c34f0ce9x8\">修改时，请确保AddressFamily参数在ListenAddress之前配置，方能生效。</p></div></div><ol id=\"49d23601cbia9\"><li id=\"494b2bb1cbra3\"><p id=\"494b2bb0cbttl\">执行如下命令，打开<code data-tag=\"code\" class=\"code\">/etc/ssh/sshd_config</code>配置文件。</p><pre id=\"i0f9yc\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/ssh/sshd_config</code></pre></li><li id=\"5574e111cb8ns\"><p id=\"5574e110cbozq\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"69667851cbp4k\"><p id=\"69667850cb8qp\">将AddressFamily设置为<code data-tag=\"code\" class=\"code\">inet</code>，或在AddressFamily前加#注释该配置，如下所示。</p><pre id=\"75ca574465qtr\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code># AddressFamily inet6  #注释该配置</code></pre><pre id=\"7c9ab4d0cd96q\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>AddressFamily inet4    #使用IPv4协议簇</code></pre></li><li id=\"985f28a1cbhsv\"><p id=\"985f28a0cbr9p\">按下<code data-tag=\"code\" class=\"code\">Esc</code>键后，输入<code data-tag=\"code\" class=\"code\">:wq</code>并按<code data-tag=\"code\" class=\"code\">Enter</code>键以保存关闭配置文件。</p></li></ol></li><li id=\"c2a9e141cbe62\"><p id=\"c2a9e140cby70\">执行以下命令，重启SSH服务。</p><pre id=\"frd9sp\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart sshd.service </code></pre></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-too-many-authentication-failures-for-root-error-occurs-when-you-log-on-to-an-instance-through-ssh", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>使用第三方SSH客户端远程连接Linux实例时，提示“Too many authentication failures”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用第三方SSH客户端远程连接Linux实例时，提示“Too many authentication failures”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-14 10:09:32</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"13b46cb0bd32p\"><p data-tag=\"shortdesc\" id=\"13bad552bdm57\" class=\"shortdesc\">本文介绍使用第三方SSH客户端远程连接Linux实例时，提示“Too many authentication failures”错误的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><p id=\"13bad556bdqa2\"> </p><section id=\"36da1320bdc1n\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"9a855d30bdq5y\">使用第三方SSH客户端远程连接Linux实例时，连接失败，提示“Too many authentication failures”。</p><img id=\"1aa88e60bd7uq\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5185148761/p580089.png\" alt=\"2023-03-08_14-18-25\" placement=\"break\" class=\"image break\"></section><section id=\"3a41cf30bdxm8\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"83b10776bdzz7\">ECS实例内SSH远程登录配置文件（/etc/ssh/sshd_config）中配置了密码重试策略，多次连续输入错误密码后，提示该错误。</p><div type=\"note\" id=\"13bafc63bdnty\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"13bb2371bdlnt\">该配置不会导致相关账号被锁定，只会断开相应会话。您可以再次输入密码尝试登录。</p></div></div></section><section id=\"7d9654d0bd21d\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"888d7da0bdvpo\">如果您多次输入密码，还是不能登录，建议您重置密码后，重新登录。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/reset-the-logon-password-of-an-instance\">重置实例登录密码</a>。</p><p id=\"32c4ee20bdg0a\">密码重试策略可以提高ECS实例的安全性，建议您基于安全性和易用性权衡后，确定是否需要修改相关配置。如果您需要修改密码重试策略，请参考以下步骤。</p><ol id=\"c1bdd751bd5l6\"><li id=\"83b1559bbd698\"><p id=\"614363c585v20\">以VNC方式登录ECS实例。</p><p id=\"95451f1097rpc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"83b17ca1bd2w3\"><p id=\"83b17ca2bdsji\">执行如下命令，查看sshd_config文件中是否包含类似如下配置。</p><pre data-tag=\"codeblock\" id=\"83a8ca11bdy9n\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/ssh/sshd_config</code></pre><p id=\"83b17ca3bd45i\"> 系统显示类似如下，表示连续6次输入密码错误后，会断开SSH连接。</p><pre data-tag=\"codeblock\" id=\"13b46cb2bdpwz\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>MaxAuthTries 6</code></pre><div id=\"079db830bduxg\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"03dfece0bdcya\">MaxAuthTries参数默认未启用。该参数用于限制用户在每次SSH登录时，能够连续错误输入密码的次数。超过错误输入次数则会断开SSH连接，并显示相关错误信息。</p></div></div></li><li id=\"6144000485t3e\"><p id=\"cf46f99097n4k\">修改用户登录控制参数。</p><ol id=\"d496fda1972v6\"><li id=\"d42eed0197e1n\"><p id=\"d735282097dh0\">打开SSH配置文件。</p><pre id=\"zdrxtw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vi /etc/ssh/sshd_config</code></pre></li><li id=\"d967717097zr0\"><p id=\"dfcd043097xj8\">根据业务需要，修改密码重试策略。</p><p id=\"cf218cf0bdvq3\">如下所示，在策略配置前添加<code data-tag=\"code\" class=\"code\"><b>#</b></code>，取消密码重试策略。</p><pre data-tag=\"codeblock\" id=\"83a8ca13bdj92\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code># MaxAuthTries 6</code></pre></li><li id=\"6144271185czd\"><p id=\"9518115dbdg01\">按Esc键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存修改。</p></li></ol></li><li id=\"13bb719bbdqbi\"><p id=\"13bb98a0bd2l8\">执行如下命令，重启SSH服务。 </p><pre id=\"5kwtms\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart sshd.service</code></pre></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-error-while-loading-shared-libraries-error-occurs-when-you-start-the-ssh-service", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>Linux系统的ECS实例中，启动SSH服务时提示“error while loading shared libraries”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例中，启动SSH服务时提示“error while loading shared libraries”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:27:11</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"501475d0a63sc\"><p data-tag=\"shortdesc\" id=\"501d2864a6b0j\" class=\"shortdesc\">本文介绍Linux系统的ECS实例，启动SSH服务时提示“<b data-tag=\"uicontrol\" id=\"f5849a40a65zn\" class=\"uicontrol\">error while loading shared libraries</b>”错误时的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"23776bf0a6g0l\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"501d2869a6kn4\">Linux系统的ECS实例启动SSH服务时，提示类似如下的错误信息。</p><pre id=\"df81ci\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>error while loading shared libraries： libcrypto.so.10: cannot open shared object file: No such file or directory.</code></pre><p id=\"330b8760a635c\">执行<code data-tag=\"code\" class=\"code\">cat /var/log/secure</code>查看secure日志，出现类似如下的错误信息。</p><pre id=\"yzalfe\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>PAM unable to dlopen(/usr/lib64/security/pam_tally.so): /usr/lib64/security/pam_tally.so: cannot open shared object file: No such file or directory.</code></pre></section><section id=\"259c6ed0a60aw\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"501d4f75a6h0a\">SSH服务的运行依赖相关系统库文件，当相关库文件异常（如相关库文件丢失或权限配置异常）会导致SSH服务启动异常。</p></section><h2 id=\"AywdZ\">解决方案</h2><p id=\"501d7684a69mt\">您可以通过修复libcrypto.so.10库文件或回滚云盘修复该问题。</p><section id=\"f4cedea0c6gwj\" class=\"section\"><h3 data-tag=\"h3\" id=\"501d7686a6lop\" class=\"h3\"><b>方案一：修复</b>libcrypto.so.10库文件</h3><p id=\"951eb061c9k27\">您可以通过查看其他正常实例（A实例）中的库文件信息来对照修复该异常实例（B实例）。</p><ol id=\"501d7687a6v45\"><li id=\"501d9d90a6cme\"><p id=\"501d9d91a6dwu\">登录正常实例（A实例），执行如下命令，查看libcrypto.so.10库文件的信息。 </p><pre data-tag=\"codeblock\" id=\"501475d1a6f3b\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ll /usr/lib64/libcrypto.so.10</code></pre><p id=\"501d9d92a6t7r\">系统显示类似如下，libcrypto.so.10库文件是libcrypto.so.1.0.1e库文件的软连接。 </p><pre data-tag=\"codeblock\" id=\"501475d2a6cgm\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>lrwxrwxrwx. 1 root root 19 Jan 8 12:40 /usr/lib64/libcrypto.so.10 -&gt; libcrypto.so.1.0.1e</code></pre></li><li id=\"501d9d94a6wrw\"><p id=\"501d9d95a6pij\">执行如下命令，查看libcrypto.so.1.0.1e库文件的信息。 </p><pre data-tag=\"codeblock\" id=\"501475d3a66ga\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ll /usr/lib64/libcrypto.so.1.0.1e</code></pre><p id=\"501d9d96a681d\"> 系统显示类似如下。 </p><pre data-tag=\"codeblock\" id=\"501475d4a6jf3\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>-rwxr-xr-x. 1 root root 1965856 Jan 8 03:22 /usr/lib64/libcrypto.so.1.0.1e</code></pre><p id=\"b2204080c6q2d\">记录正常库文件的路径、权限、属组等信息。\n</p></li><li id=\"501debb5a6x9v\"><p id=\"519623b0c6ag9\">以VNC方式远程连接该异常ECS实例（B实例）。 </p><p id=\"a7895cf0c6j3q\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"501debb7a6hr9\"><p id=\"501debb8a647f\">执行如下命令，查找libcrypto.so.1.0.1e库文件。 </p><pre data-tag=\"codeblock\" id=\"501475d5a6v5g\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>find / -name libcrypto.so.1.0.1e</code></pre><p id=\"eeab7a70c6aj7\">根据该ECS实例中是否存在libcrypto.so.1.0.1e库文件，有以下两种解决方案。</p><ul id=\"f06dc3e1c6ry5\"><li id=\"ef802f91c6rqj\"><p id=\"ef802f90c6fp7\">存在libcrypto.so.1.0.1e库文件。</p><p id=\"63c5cf90c6rig\">执行如下命令，将找到的文件拷贝到正常目录。 </p><pre data-tag=\"codeblock\" id=\"501475d6a670q\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cp [$File] /usr/lib64/libcrypto.so.1.0.1e</code></pre><div type=\"note\" id=\"501e12c3a6wuf\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"501e12c4a68gn\" class=\"p\">[$File]为上一步找到的libcrypto.so.1.0.1e库文件绝对路径。\n</p></div></div></li><li id=\"1943b6d1c60ye\"><p id=\"1943b6d0c63jn\">不存在libcrypto.so.1.0.1e库文件。</p><p id=\"803c7e30c63oh\">通过FTP软件将其他正常实例上的libcrypto.so.1.0.1e库文件上传到目标实例的<code data-tag=\"code\" class=\"code\">/usr/lib64</code>目录。 </p></li></ul></li><li id=\"501e12c6a60co\"><p id=\"501e12c7a633n\">依次执行如下命令，修改文件权限、所有者和所属组。 </p><pre data-tag=\"codeblock\" id=\"501475d7a69s0\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chmod 755 /usr/lib64/libcrypto.so.1.0.1e\nchown root:root /usr/lib64/libcrypto.so.1.0.1e</code></pre></li><li id=\"501e12c9a66z7\"><p id=\"501e12caa6kou\">执行如下命令，创建软链接。 </p><pre data-tag=\"codeblock\" id=\"501475d8a6vn5\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ln -s /usr/lib64/libcrypto.so.1.0.1e /usr/lib64/libcrypto.so.10</code></pre></li><li id=\"501e12cca6svl\"><p id=\"501e12cda6em6\">执行如下命令，启动SSH服务。 </p><pre data-tag=\"codeblock\" id=\"501475d9a6odq\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl start sshd.service</code></pre></li></ol></section><section id=\"0024c940c6ugk\" class=\"section\"><h3 data-tag=\"h3\" id=\"501e60e7a6siu\" class=\"h3\"><b>方案二：通过回滚云盘恢复</b></h3><p id=\"501e60e8a6o2f\">如果通过<a title=\"\" class=\"xref\" href=\"#f4cedea0c6gwj\">方案一：修复libcrypto.so.10库文件</a>未修复，如果您为系统盘创建过快照，则您可以通过回滚系统盘历史快照的方式来进行修复。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/roll-back-a-disk-by-using-a-snapshot\">使用快照回滚云盘</a>。</p><div type=\"important\" id=\"501e60e9a64mo\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><ul id=\"72d7cd42c6xvg\"><li id=\"72d7cd40c65xc\"><p id=\"501eaf01a6zqv\">快照回滚会导致回滚之后的数据丢失，请务必确认后再操作。</p></li><li id=\"501eaf02a6qx8\"><p id=\"501eaf03a67c4\">建议按时间从近到远的顺序逐一尝试回滚快照，直至SSH服务能正常运行。如果回滚后还是无法正常运行SSH服务，则说明相应时间点的系统已经出现异常。</p></li></ul></div></div></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-bad-configuration-options-error-occurs-when-the-ssh-service-is-started", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>Linux系统的ECS实例中，启动SSH服务时提示“Bad configuration options”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例中，启动SSH服务时提示“Bad configuration options”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:26:37</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"1fe28430c6ajv\"><p data-tag=\"shortdesc\" id=\"1fe93af7c67gw\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中，启动SSH服务时提示“Bad configuration options”错误的错误原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"61334000c6t95\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p data-spm-anchor-id=\"a2c4g.11186623.2.i3.72c58909qwjNAC\" id=\"1fe96203c69mh\">在Linux系统的ECS实例启动SSH服务，命令行或secure日志中可能会出现类似如下信息。</p><pre data-tag=\"codeblock\" id=\"1fe28431c69z4\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>/etc/ssh/sshd_config: line 2: Bad configuration options:\\\\ /etc/ssh/sshd_config: terminating, 1 bad configuration options</code></pre></section><section id=\"bb131000c6rxs\" class=\"section\"><h2 id=\"4rM4I\" data-spm-anchor-id=\"a2c9r.12641768.0.i3.596bcB5rcB5rIn\">问题原因</h2><p id=\"1fe96205c6g6h\">ECS实例内SSH服务对应的配置文件<code data-tag=\"code\" class=\"code\">/etc/ssh/sshd_config</code>存在文件编码、配置错误等异常，导致SSH服务启动失败。</p></section><section id=\"c5a42400c6dga\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"1fe98917c62vm\">您可以根据需要，选择合适的方案进行修复。</p><section id=\"a0b90a60c6ump\" class=\"section\"><h3 data-tag=\"h3\" id=\"1fe9b027c6oni\" class=\"h3\"><b>根据报错信息修改配置文件</b></h3><p id=\"1fe9b028c623z\">如果错误信息中明确指出了具体的错误配置，您可以根据错误信息，修改相应配置。</p><ol id=\"c6ad1312c6gd4\"><li id=\"c6ad1310c6mer\"><p id=\"c5463011c6xzd\">使用VNC远程连接ECS实例。 </p><p id=\"c7dd0790c60od\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"ca48b061c6bgf\"><p id=\"ca48b060c62pw\">执行如下命令，打开<code data-tag=\"codeph\" class=\"codeph\">sshd_config</code>文件。</p><pre id=\"apbmec\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/ssh/sshd_config</code></pre></li><li id=\"d527e460c67lb\"><p id=\"d527bd50c6p8g\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"e715e371c684l\"><p id=\"e715e370c69in\">根据错误提示，修改相应配置。</p><div type=\"note\" id=\"1c4945f0c63oq\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"1e8cf460c6kcu\">您在一台正常的ECS实例，对比<code data-tag=\"codeph\" class=\"codeph\">/etc/ssh/sshd_config</code>文件，进行修改。</p></div></div></li><li id=\"1ccd4191c9wya\"><p id=\"2021c3c0c99id\">以测试模式运行sshd。</p><pre id=\"xmbprh\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>/usr/sbin/sshd -t</code></pre><p id=\"497c28f0c91ye\">无返回信息时，说明sshd配置正确。</p></li><li id=\"092ba081c6svz\"><p id=\"186750d0c6rjd\">执行如下命令，重新启动SSH服务。 </p><pre data-tag=\"codeblock\" id=\"2e9eb960c6pqd\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>service sshd start</code></pre></li></ol></section><section id=\"86df4dc0c6vob\" class=\"section\"><h3 data-tag=\"h3\" id=\"1fe9d733c6rbk\" class=\"h3\"><b>将正常实例中的</b><code data-tag=\"codeph\" class=\"codeph\">sshd_config</code>文件上传到该异常实例进行修复</h3><p id=\"1fe9d734c6g9y\">如果错误较多，或者错误信息中没有明确的错误说明，可以将正常实例的<code data-tag=\"codeph\" class=\"codeph\">/etc/ssh/sshd_config</code>文件上传到目标异常实例进行修复。</p><ol id=\"1fe9d735c6dzo\"><li id=\"1fe9d736c6jz3\"><p id=\"1fe9d737c6gxr\">通过FTP等方式将正常实例上的<code data-tag=\"codeph\" class=\"codeph\">/etc/ssh/sshd_config</code>文件上传到目标实例。</p></li><li id=\"1fe9d738c6m9v\"><p id=\"1fe9d739c6sh8\">假设上传目录为<code data-tag=\"codeph\" class=\"codeph\">/tmp</code>，执行如下命令，将文件拷贝到正常目录。 </p><pre data-tag=\"codeblock\" id=\"1fe28432c6mar\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cp /tmp/sshd_config /etc/ssh/sshd_config</code></pre></li><li id=\"1fe9fe40c6q3t\"><p id=\"1fe9fe41c6cqu\">执行如下命令，修改文件权限、所有者和所属组。 </p><pre data-tag=\"codeblock\" id=\"1fe28433c6nh7\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chmod 600 /etc/ssh/sshd_config\nchown root:root /etc/ssh/sshd_config</code></pre><div id=\"e4606ee0c6wtc\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"1fe9fe44c6u4c\">如果无法上传外部正常配置文件，也可以对照正常配置文件，直接手工编辑、撰写配置文件。</p></div></div></li><li id=\"1fe9fe45c6w29\"><p id=\"1fe9fe46c6xcl\">执行如下命令，重新启动SSH服务。 </p><pre data-tag=\"codeblock\" id=\"1fe28434c6v0t\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>service sshd start</code></pre></li></ol></section><section id=\"22370610c6fik\" class=\"section\"><h3 data-tag=\"h3\" id=\"1fe9fe49c6uux\" class=\"h3\"><b>重新安装SSH服务</b></h3><p id=\"1fe9fe4ac6kv1\">如果上述操作不便实施，也可以参阅如下步骤，通过重装SSH服务来进行问题修复。</p><ol id=\"1fe9fe4bc6ryg\"><li id=\"b28af191c6os4\"><p id=\"519623b0c6ag9\">使用VNC远程连接ECS实例。 </p><p id=\"60c5beb0c6pfk\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"23f57ef0c6s1y\"><p id=\"23f557e0c61cp\">执行如下命令，卸载SSH服务。 </p><pre data-tag=\"codeblock\" id=\"1fe28435c6c5k\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>rpm -e openssh-server</code></pre></li><li id=\"1fea2551c6hii\"><p id=\"1fea2552c6yfh\">执行如下命令，安装SSH服务。 </p><pre data-tag=\"codeblock\" id=\"1fe28436c619p\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install openssh-server</code></pre></li><li id=\"1fea2554c664d\"><p id=\"1fea2555c6ph5\">执行如下命令，启动SSH服务。 </p><pre data-tag=\"codeblock\" id=\"1fe28437c6xip\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl start sshd.service</code></pre></li></ol></section><section id=\"3570a280c6eja\" class=\"section\"><h3 data-tag=\"h3\" id=\"1fea2558c6zkx\" class=\"h3\"><b>通过回滚系统盘恢复</b></h3><p id=\"1fea2559c66vp\">如果以上方案都无法修复，您可以通过回滚系统盘历史快照的方式来进行修复。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/roll-back-a-disk-by-using-a-snapshot\">使用快照回滚云盘</a>。</p><div type=\"important\" id=\"1fea4c60c6k7e\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><ul id=\"cf597e02c68t8\"><li id=\"cf597e00c606h\"><p id=\"1fea4c65c6nez\">快照回滚会导致回滚点之后的数据丢失，请务必确认后再操作。</p></li><li id=\"1fea4c66c6f2t\"><p id=\"1fea4c67c64tn\">建议按时间从近到远的顺序逐一尝试回滚快照，直至SSH服务能正常运行。如果回滚后还是无法正常运行SSH服务，则说明相应时间点的系统已经出现异常。</p></li></ul></div></div></section></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-user-root-not-allowed-because-not-listed-in-error-occurs-when-you-log-on-to-a-linux-instance-by-using-ssh-commands", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>使用第三方SSH客户端登录Linux实例时，提示“Access denied”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用第三方SSH客户端登录Linux实例时，提示“Access denied”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-14 10:19:20</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"83a8ca10bdjs3\"><p data-tag=\"shortdesc\" id=\"e20596b0bdofd\" class=\"shortdesc\">本文介绍使用第三方SSH客户端登录Linux实例时，提示“Access denied”错误的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"f019b6f0bdn8h\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p data-spm-anchor-id=\"a2c4g.11186623.2.i3.72c58909qwjNAC\" id=\"83b0e062bdvro\">第三方SSH客户端登录Linux实例时，提示“Access denied”错误。执行<code data-tag=\"code\" class=\"code\">cat /var/log/secure</code>查看登录日志，发现会出现类似如下信息。</p><pre id=\"upo9ed\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Permission denied, please try again.\nUser test from 192.168.xxx.xxx not allowed because not listed in AllowUsers.\nUser test from 192.168.xxx.xxx not allowed because listed in DenyUsers.\nUser root from 192.168.xxx.xxx not allowed because a group is listed in DenyGroups.\nUser test from 192.168.xxx.xxx not allowed because none of user's groups are listed in AllowGroups.</code></pre></section><section id=\"f22b58e0bdc3n\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"83b10776bdzz7\">该问题通常是由于ECS实例内SSH远程登录配置文件（/etc/ssh/sshd_config）中启用了用户登录控制参数，对可登录用户进行限制所致，用户登录控制参数说明如下。</p><ul id=\"83b10777bdiar\"><li data-spm-anchor-id=\"a2c4g.11186623.2.i7.72c58909qwjNAC\" id=\"83b10778bdiym\"><p id=\"83b10779bdbr9\">AllowUsers：允许登录的用户白名单，只有该参数标注的用户可以登录。</p></li><li id=\"83b1077abd0ql\"><p id=\"83b1077bbdhbr\">DenyUsers：拒绝登录的用户黑名单，该参数标注的用户都拒绝登录。</p></li><li id=\"83b12e80bdile\"><p id=\"83b12e81bdhjl\">AllowGroups：允许登录的用户组白名单，只有该参数标注的用户组可以登录。</p></li><li data-spm-anchor-id=\"a2c4g.11186623.2.i10.72c58909qwjNAC\" id=\"83b12e82bdc75\"><p id=\"83b12e83bdzve\">DenyGroups：拒绝登录的用户组黑名单，该参数标注的用户组都拒绝登录。</p></li></ul><p id=\"83b12e85bdemr\">拒绝策略优先级高于允许策略，具体说明如下。</p><ul id=\"83b12e86bddyx\"><li id=\"83b12e87bd39t\"><p id=\"83b12e88bdgur\">如果AllowUsers和DenyUsers参数包含了同一个用户，因拒绝策略优先，所以该用户无法登录。</p></li><li id=\"83b12e89bdfgu\"><p id=\"83b12e8abdvqg\">如果AllowUsers中的用户在DenyGroups用户组中，因拒绝策略优先，所以该用户无法登录。</p></li></ul></section><section id=\"6f919780bdlxc\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p data-spm-anchor-id=\"a2c9r.12641768.0.i2.5b155e3b2X1BM4\" id=\"83b15599bdbn9\">您可以修改SSH远程登录配置文件（/etc/ssh/sshd_config）中用户登录控制参数，以解决该问题。</p><ol id=\"83b1559abd51a\"><li id=\"83b1559bbd698\"><p id=\"614363c585v20\">以VNC方式登录ECS实例。</p><p id=\"95451f1097rpc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"83b17ca1bd2w3\"><p id=\"83b17ca2bdsji\">执行如下命令，查看sshd_config文件。 </p><pre data-tag=\"codeblock\" id=\"83a8ca11bdy9n\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/ssh/sshd_config</code></pre><p id=\"83b17ca3bd45i\"> 系统显示类似如下，表示拒绝test用户登录。 </p><pre data-tag=\"codeblock\" id=\"83a8ca12bds9s\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>AllowUsers root test\nDenyUsers test\nDenyGroups test\nAllowGroups root</code></pre></li><li id=\"6144000485t3e\"><p id=\"cf46f99097n4k\">修改用户登录控制参数。</p><ol id=\"d496fda1972v6\"><li id=\"d42eed0197e1n\"><p id=\"d735282097dh0\">打开SSH配置文件。</p><pre id=\"zdrxtw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vi /etc/ssh/sshd_config</code></pre></li><li id=\"d967717097zr0\"><p id=\"dfcd043097xj8\">根据业务需要，修改用户登录控制参数。</p><p id=\"cf218cf0bdvq3\">如下所示，在策略配置前添加<b>#</b>，取消用户访问控制，以确保相关用户能够正常登录。</p><pre data-tag=\"codeblock\" id=\"83a8ca13bdj92\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>#AllowUsers root test\n#DenyUsers test\n#DenyGroups test\n#AllowGroups root</code></pre></li><li id=\"6144271185czd\"><p id=\"9518115dbdg01\">按Esc键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存修改。</p></li></ol></li><li id=\"e9d97ee197kai\"><p id=\"4a875291bdx7f\">执行如下命令，重启SSH服务。 </p><pre id=\"6138b563850ez\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart sshd.service</code></pre></li><li id=\"ad1df621bdwjt\"><p id=\"4a875294bdehw\">重新登录Linux实例，确保可以正常登录。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-permission-denied-please-try-again-error-message-appears-when-i-log-on-to-a-linux-instance-as-the-root-user-by-using-ssh", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>通过SSH客户端登录Linux实例时提示“Permission denied, please try again”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过SSH客户端登录Linux实例时提示“Permission denied, please try again”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-21 14:05:18</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"6138b56085cml\"><p data-tag=\"shortdesc\" id=\"6142ee9085nuk\" class=\"shortdesc\">本文介绍通过SSH客户端登录Linux实例时，提示“Permission denied, please try again”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"e5bc677096kr3\" class=\"section\"><h2 id=\"n49mj\">问题描述</h2><p id=\"614315a685zub\">通过本地SSH客户端登录Linux系统的ECS实例时，即便输入了正确的密码，出现了类似如下的错误信息。</p><ul id=\"61433cb08558x\"><li id=\"61433cb185pqf\"><p id=\"61433cb285v7f\">Permission denied, please try again. </p></li><li id=\"61433cb585e2l\"><p id=\"61433cb685xtm\">SSH服务器拒绝了密码，请再试一次。</p></li></ul></section><section id=\"ea3df7f09661f\" class=\"section\"><h2 id=\"de5e1cd096278\"><b>问题原因</b></h2><p id=\"fda4663196d5l\">导致该问题可能有以下原因：</p><ul id=\"17c54882974pg\"><li id=\"17c548809789b\"><p id=\"15ed543097nkb\">ECS实例内禁用root用户登录：SSH服务对应配置文件<code data-tag=\"code\" class=\"code\">/etc/ssh/sshd_config</code>中的参数<code data-tag=\"code\" class=\"code\">PermitRootLogin</code>或<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>被设置为<code data-tag=\"code\" class=\"code\">no</code>。您可以参考<a title=\"\" class=\"xref\" href=\"#144ae4409775t\">禁止root用户登录引起问题的解决方法</a>解决。</p><ul id=\"2eb8e4b1e09m1\"><li id=\"2e342451e07mn\"><p id=\"2e342450e0ay5\"><code data-tag=\"code\" class=\"code\">PermitRootLogin</code>设置为<code data-tag=\"code\" class=\"code\">no</code>，表示禁用使用root用户登录。</p></li><li id=\"3fa79c30e07np\"><p id=\"3fa77520e0cvr\"><code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>设置为<code data-tag=\"code\" class=\"code\">no</code>，表示禁用使用密码方式登录，但是可以使用密钥方式登录。</p></li></ul></li><li id=\"2bf82e80970yf\"><p id=\"2bf8077097buv\">Linux系统启用了SELinux服务，导致root用户和普通用户无法登录。</p><p id=\"b57eb73097jfk\">执行<code data-tag=\"code\" class=\"code\">cat /var/log/secure</code>查看secure日志，若日志中包含<code data-tag=\"code\" class=\"code\">error: Could not get shadow infromation for root.</code>表示是启用了SELinux服务导致，您可以参考<a title=\"\" class=\"xref\" href=\"#17cc42d097g5i\">SELinux服务引起问题的解决方法</a>解决。</p></li></ul></section><section id=\"144ae4409775t\" class=\"section\"><h2 id=\"AywdZ\"><b> 禁止root用户登录引起问题的解决方法</b></h2><ol id=\"614363c385yye\" start=\"1\"><li id=\"614363c485wd9\"><p id=\"614363c585v20\">以VNC方式登录ECS实例。</p><p id=\"95451f1097rpc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"61438ad1853a1\"><p id=\"bbe434d097yzr\">查看<code data-tag=\"code\" class=\"code\">/etc/ssh/sshd_config</code>的参数<code data-tag=\"code\" class=\"code\">PermitRootLogin</code>或<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>配置。</p><pre id=\"6138b56285iv3\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/ssh/sshd_config</code></pre><p id=\"c59c750097zgi\">如下图所示，<code data-tag=\"code\" class=\"code\">PermitRootLogin</code>和<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>参数设置为<code data-tag=\"code\" class=\"code\">no</code>，表示禁止root用户登录，也禁止以密码方式登录。</p><img id=\"c91918a097jgv\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6064502861/p551883.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li><li id=\"6144000485t3e\"><p id=\"cf46f99097n4k\">根据业务需要，修改<code data-tag=\"code\" class=\"code\">PermitRootLogin</code>和<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>参数配置。</p><ol id=\"d496fda1972v6\"><li id=\"d42eed0197e1n\"><p id=\"d735282097dh0\">打开SSH配置文件。</p><pre id=\"zdrxtw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vi /etc/ssh/sshd_config</code></pre></li><li id=\"d967717097zr0\"><p id=\"dfcd043097xj8\">修改<code data-tag=\"code\" class=\"code\">PermitRootLogin</code>和<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>参数值配置。</p><ul id=\"e069f001e0srz\"><li id=\"df4c7211e0ea9\"><p id=\"df4c7210e005w\">如果需要root用户登录，请将<code data-tag=\"code\" class=\"code\">PermitRootLogin</code>参数值设置为<code data-tag=\"code\" class=\"code\">yes</code>。</p></li><li id=\"f38328a1e0g24\"><p id=\"f4543440e0t4q\">如果需要密码方式登录，请将<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>参数值设置为<code data-tag=\"code\" class=\"code\">yes</code>。</p><img id=\"e2a85ec097fks\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6064502861/p551885.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li></ul></li><li id=\"6144271185czd\"><p id=\"ea70199097pk4\">按Esc键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存修改。</p></li></ol></li><li id=\"e9d97ee197kai\"><p id=\"e9d97ee097ycl\">执行如下命令，重启SSH服务。 </p><pre id=\"6138b563850ez\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart sshd.service</code></pre></li></ol></section><section id=\"17cc42d097g5i\" class=\"section\"><h2 id=\"61444e20851bw\"><b>SELinux服务引起问题的解决方法</b></h2><p id=\"61444e2285h7s\">您可以根据实际情况，选择临时或永久关闭SELinux服务解决SSH连接异常问题。</p><section id=\"1dc705d097vz0\" class=\"section\"><h3 data-tag=\"h4\" id=\"61444e238570i\" class=\"h4\"><b>检查SELinux服务状态</b></h3><ol id=\"61444e2485x90\" start=\"1\"><li id=\"61444e2585h3t\"><p id=\"1996699197c9l\">以VNC方式登录ECS实例。</p><p id=\"1996699297h24\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"1b75b0e1971jy\"><p id=\"1b75b0e097wbs\">执行如下命令，查看当前SELinux服务状态。 </p><pre id=\"6138b56485h0x\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>/usr/sbin/sestatus -v </code></pre><p id=\"6144753085rew\"> 系统显示类似如下。 </p><pre id=\"6138b56585wra\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>SELinux status:       enabled</code></pre><div type=\"note\" id=\"1da05e1185asz\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"2019264085vqx\">SELinux status参数值说明如下：</p><ul id=\"3c9ddea185c52\"><li id=\"3c9db790857du\"><p id=\"2e37f4e085zno\"> enabled：SELinux服务处于开启状态。</p></li><li id=\"3c9db79185rk5\"><p id=\"31bcfcf085d69\"> disabled：SELinux服务处于关闭状态。</p></li></ul></div></div></li></ol></section><section id=\"221948f097bnp\" class=\"section\"><h3 data-tag=\"h4\" id=\"614475358535k\" class=\"h4\"><b>临时关闭SELinux服务</b></h3><div id=\"19ac461097n9h\" type=\"important\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"15eec8e097chl\"><b>临时关闭SELinux服务</b>重启后会失效。</p></div></div><ol id=\"4aa0e2e097t1i\" start=\"1\"><li id=\"4aa0e2e197kfe\"><p id=\"4aa0e2e297n4f\">以VNC方式登录ECS实例。</p><p id=\"4aa0e2e397s9y\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"4aa0e2e497o23\"><p id=\"4aa0e2e5974w6\">执行如下命令，临时关闭SELinux。</p><pre id=\"6138b56685adm\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>setenforce 0</code></pre></li></ol></section><section id=\"26a3b310973xp\" class=\"section\"><h3 id=\"fb315d74\"><b> 永久关闭SELinux服务</b></h3><ol id=\"53d5e95097z3n\" start=\"1\"><li id=\"53d5e95197dm8\"><p id=\"53d5e95297tqd\">以VNC方式登录ECS实例。</p><p id=\"53d5e95397rgy\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"53d5e95497lbf\"><p id=\"53d5e955976l7\">执行如下命令，永久关闭SELinux服务。</p><pre id=\"6138b56785yhn\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sed -i 's/SELINUX=enforcing/SELINUX=disabled/' /etc/selinux/config</code></pre><div id=\"2ae0e030979pp\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"1f879a3097vf6\">此命令只适用当前SELinux服务为<code data-tag=\"code\" class=\"code\">enforcing</code>状态时使用。</p></div></div></li><li id=\"82e3331097u2g\"><p id=\"82e30c0097xqf\">重启实例使设置生效，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li></ol></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-disconnected-no-supported-authentication-methods-available-error-occurs-when-you-log-on-to-a-linux-instance-by-ssh", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>使用第三方SSH客户端远程连接Linux实例时，提示“No supported authentication methods available (server sent: publickey,gssapi-keyex,gssapi-with-mic)”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用第三方SSH客户端远程连接Linux实例时，提示“No supported authentication methods available (server sent: publickey,gssapi-keyex,gssapi-with-mic)”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-30 18:14:15</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"69885ef065c1q\"><p data-tag=\"shortdesc\" id=\"698c2f8065qef\" class=\"shortdesc\">本文介绍使用第三方SSH客户端远程连接Linux实例时，提示“No supported authentication methods available (server sent: publickey,gssapi-keyex,gssapi-with-mic)”错误的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"8fc46190bd26n\" class=\"section\"><h2 id=\"h2-u95EEu9898u73B0u8C611\">问题现象</h2><p id=\"698c2f8465cpy\">当您使用第三方SSH客户端远程连接Linux系统的ECS实例时，输入了正确的账号和密码，但是还是出现类似以下错误信息。</p><pre id=\"zoo3lk\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Permission denied (publickey,gssapi-keyex,gssapi-with-mic)</code></pre><pre id=\"9ggfgg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sshd[10826]: Connection closed by XX.XX.XX.XX</code></pre><pre id=\"5cs8ha\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>No supported authentication methods available (server sent: publickey,gssapi-keyex,gssapi-with-mic)</code></pre><img id=\"17c35cb0bdkgi\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4012528761/p580000.png\" alt=\"putty fatal error\" placement=\"break\" class=\"image break\"></section><section id=\"8ca52030bdbjm\" class=\"section\"><h2 id=\"h2-u539Fu56E0u5206u67902\">问题原因</h2><p id=\"14399d81cbmow\">使用密码或密钥登录都可能出现该问题，具体说明如下：</p><ul id=\"433ef802cbupp\"><li id=\"433ef800cb9n3\"><p id=\"86681980bd311\"><b>使用密码登录出现该问题</b>：可能是ECS实例内禁止用户使用密码方式连接，您可以将<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>参数值修改为<code data-tag=\"code\" class=\"code\">yes</code>以解决此问题。具体操作，请参见<a title=\"\" class=\"xref\" href=\"#144ae4409775t\">方案一：允许使用密码方式登录</a>。</p></li><li id=\"46e01391cbyba\"><p id=\"b399a230cb1gd\"><b>使用密钥登录出现该问题</b>：可能是SSH密钥对的公钥未加入对应用户<code data-tag=\"code\" data-spm-anchor-id=\"a2c4g.11186623.0.i5.2f452adaUZjYoa\" class=\"code\">.ssh/authorized_keys</code>中，您可以重新上传公钥到<code data-tag=\"code\" data-spm-anchor-id=\"a2c4g.11186623.0.i10.2f452adaUZjYoa\" class=\"code\">authorized_keys</code>文件中以解决此问题。具体操作，请参见<a title=\"\" class=\"xref\" href=\"#1487c810cbqjt\">方案二：上传公钥到authorized_keys文件</a>。</p></li></ul></section><section id=\"144ae4409775t\" class=\"section\"><h2 id=\"89234c70bdy7y\">方案一：允许使用密码方式登录</h2><ol id=\"614363c385yye\" start=\"1\"><li id=\"614363c485wd9\"><p id=\"614363c585v20\">以VNC方式登录ECS实例。</p><p id=\"95451f1097rpc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"61438ad1853a1\"><p id=\"bbe434d097yzr\">查看<code data-tag=\"code\" class=\"code\">/etc/ssh/sshd_config</code>的参数<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>配置是否有误。</p><pre id=\"6138b56285iv3\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/ssh/sshd_config</code></pre><p id=\"c59c750097zgi\">如下图所示，<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>参数设置为<code data-tag=\"code\" class=\"code\">no</code>，表示禁止以密码方式登录，需要修改为<code data-tag=\"code\" class=\"code\">yes</code>。</p><img id=\"c91918a097jgv\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5922304761/p551883.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li><li id=\"6144000485t3e\"><p id=\"cf46f99097n4k\">修改<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>的参数<code data-tag=\"code\" class=\"code\">PasswordAuthentication</code>为<code data-tag=\"code\" class=\"code\">yes</code>。</p><ol id=\"d496fda1972v6\"><li id=\"d42eed0197e1n\"><p id=\"d735282097dh0\">打开SSH配置文件。</p><pre id=\"zdrxtw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vi /etc/ssh/sshd_config</code></pre></li><li id=\"d967717097zr0\"><p id=\"dfcd043097xj8\">将<code data-tag=\"code\" class=\"code\">PasswordAuthentication no</code>修改为<code data-tag=\"code\" class=\"code\">PasswordAuthentication yes</code>。</p><img id=\"e2a85ec097fks\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6922304761/p551885.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li><li id=\"6144271185czd\"><p id=\"ea70199097pk4\">按Esc键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存修改。</p></li></ol></li><li id=\"e9d97ee197kai\"><p id=\"e9d97ee097ycl\">执行如下命令，重启SSH服务。 </p><pre id=\"6138b563850ez\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart sshd.service</code></pre></li><li id=\"ad1df621bdwjt\"><p id=\"ad1df620bd12h\">重新远程连接Linux实例，确保可以正常连接。</p></li></ol></section><section id=\"1487c810cbqjt\" class=\"section\"><h2 id=\"14ee5211cbith\">方案二：复制公钥到<code data-tag=\"code\" data-spm-anchor-id=\"a2c4g.11186623.0.i10.2f452adaUZjYoa\" class=\"code\">authorized_keys</code>文件</h2><ol id=\"14ee5212cb6rq\" start=\"1\"><li id=\"14ee5213cbe1b\"><p id=\"14ee5214cbnza\">以VNC方式登录ECS实例。</p><p id=\"14ee5215cbfwl\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"2ae61991cbulv\"><p id=\"2ae61990cb11w\">执行如下命令，打开<code data-tag=\"code\" data-spm-anchor-id=\"a2c4g.11186623.0.i10.2f452adaUZjYoa\" class=\"code\">authorized_keys</code>文件。</p><pre data-tag=\"codeblock\" outputclass=\"language-plaintext\" id=\"80c82f11cbele\" class=\"pre codeblock language-plaintext\"><code>vim /home/user/.ssh/authorized_keys</code></pre><div id=\"046b0960cd8h2\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"00ddeb00cdxma\">/home/user请替换成实际的用户。</p></div></div></li><li id=\"fed6d061cdwoi\"><p id=\"fed6d060cd625\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"d2dd7d61cd6cz\"><p id=\"d2dd7d60cdxtu\">将本地保存的公钥粘贴到<code data-tag=\"code\" data-spm-anchor-id=\"a2c4g.11186623.0.i10.2f452adaUZjYoa\" class=\"code\">authorized_keys</code>文件中</p></li><li id=\"e61adfd1cduco\"><p id=\"e61adfd0cdg6a\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>退出编辑模式。</p></li><li id=\"a08c33f1cbp5m\"><p id=\"a08c33f0cb98h\">重新使用密钥登录ECS实例，确保不会再出现错误。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/an-error-is-reported-when-you-log-on-to-an-ecs-instance-of-the-linux-system-by-using-ssh-commands", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>使用SSH远程连接Linux系统的ECS实例时，提示“This account is currently not available.”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用SSH远程连接Linux系统的ECS实例时，提示“This account is currently not available.”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-14 10:12:09</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"b8914da0bd4hz\"><p data-tag=\"shortdesc\" id=\"b898a0a3bdxym\" class=\"shortdesc\">本文介绍使用SSH远程连接Linux实例时，提示“This account is currently not available.”错误的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"62324a80bd56y\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"b898a0a8bdlvm\">当使用SSH命令登录Linux系统的ECS实例，输入正确的用户名和密码也会连接失败，提示“This account is currently not available.”错误。</p><p data-spm-anchor-id=\"a2c4g.11186623.2.i3.72c58909qwjNAC\" id=\"83b0e062bdvro\">执行<code data-tag=\"code\" class=\"code\">cat /var/log/secure</code>查看登录日志，发现会出现类似如下信息。</p><pre id=\"1g33mw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Connection to 127.0.0.1 closed.\nReceived disconnect from 127.0.0.1: 11: disconnected by user.\npam_unix(sshd:session): session closed for user test.</code></pre></section><section id=\"6413b4b0bdquo\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"b89915d0bdzij\">该问题通常是由于ECS实例中用户配置文件（/etc/passwd）中，相应用户（如test）的默认Shell被修改，导致无法登录。</p></section><section id=\"66acfd30bdxyw\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"ff767410bd5ul\">您可以修改相应用户（如test）的Shell，以解决无法远程连接的问题。</p><ol id=\"dc489041bdk5c\"><li id=\"83b1559bbd698\"><p id=\"614363c585v20\">以VNC方式登录ECS实例。</p><p id=\"95451f1097rpc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"b8993ce0bd3lw\"><p id=\"b8993ce1bdnij\">执行如下命令，查看相应用户（如test）的默认Shell。 </p><pre data-tag=\"codeblock\" id=\"b89174b0bd6sa\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/passwd | grep username</code></pre><p id=\"b8993ce2bda7x\"> 系统显示类似如下，表示test用户的Shell被修改成<code data-tag=\"code\" class=\"code\">/sbin/nologin</code>（禁止登录）。 </p><pre data-tag=\"codeblock\" id=\"b89174b1bd3sd\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>test:x:1000:1000::/home/test:/sbin/nologin</code></pre></li><li id=\"63c222e0beapr\"><p id=\"63c222e1bezdo\">修改用户的Shell。</p><ol id=\"63c222e2ben8g\"><li id=\"63c222e3beuy1\"><p id=\"63c222e4be1je\">打开用户配置文件（/etc/passwd）。</p><pre id=\"63c222e5be38u\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vi /etc/passwd</code></pre></li><li id=\"63c222e6bebnl\"><p id=\"63c222e7bel9p\">将相应用户（如test）的默认Shell修改为bash，即将<code data-tag=\"codeph\" class=\"codeph\">/sbin/nologin</code>修改为<code data-tag=\"codeph\" class=\"codeph\">/bin/bash</code>，如下所示。</p><pre data-tag=\"codeblock\" id=\"63c222e8bexzy\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>test:x:1000:1000::/home/test:/sbin/nologin</code></pre></li><li id=\"63c222e9be42i\"><p id=\"63c222eaber7a\">按Esc键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存修改。</p></li></ol></li><li id=\"63c222ebbeiqc\"><p id=\"63c222ecbefcy\">重新使用该用户连接Linux实例，确保可以正常连接。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/a-system-exception-occurs-on-linux-instances-after-ssh-logon-due-to-ulimit", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>使用SSH远程连接Linux系统的ECS实例时，提示“could not set limit for ‘nofile’: Operation not permitted”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用SSH远程连接Linux系统的ECS实例时，提示“could not set limit for ‘nofile’: Operation not permitted”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:41:25</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"a7065030cbkuo\"><p data-tag=\"shortdesc\" id=\"a70e6687cbx99\" class=\"shortdesc\">本文使用SSH远程连接Linux系统的ECS实例时，提示“could not set limit for ‘nofile’: Operation not permitted”错误的原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"73165c70cbp0j\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p class=\"p1\" id=\"2eb35796cbs31\">使用SSH远程连接Linux系统的ECS实例时，提示以下错误信息。</p><pre data-tag=\"codeblock\" id=\"a7065031cbf63\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>-bash: fork: retry: Resource temporarily unavailable.\npam_limits(sshd:session)：could not sent limit for 'nofile':operaton not permitted.\nPermission denied.</code></pre></section><section id=\"d75bd160cb7fq\" class=\"section\"><h2 id=\"CEErG\">问题原因</h2><p id=\"c2d95e11cb6tb\">该问题可能是Linux内核中资源限制配置文件<code data-tag=\"code\" class=\"code\">/etc/security/limits.conf</code>中<code data-tag=\"codeph\" class=\"codeph\">nofile</code>值过大，超过内核可打开的文件数，导致无法使用SSH连接ECS实例。</p></section><section id=\"e3d2ead0cbo1l\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"e61fe811cb0nd\">您可以根据业务需要，修改<code data-tag=\"codeph\" class=\"codeph\">/etc/sysctl.conf</code>和<code data-tag=\"codeph\" class=\"codeph\">/etc/security/limits.conf</code>配置文件以解决此问题。</p><ol id=\"2eb3a5b3cb195\"><li id=\"2eb3a5b4cbm96\"><p id=\"44851b21cbri6\">以VNC方式远程连接ECS实例。</p><p id=\"92efe950cbsuv\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"0d1caf20ce4lh\"><p id=\"0d1c8810cej0n\">分别执行如下命令，查看<code data-tag=\"codeph\" class=\"codeph\">fs.file-max</code>和<code data-tag=\"codeph\" class=\"codeph\">fs.nr_open</code>参数值。 </p><ul id=\"5a3180b1cedn0\"><li id=\"599ba951cey5l\"><p id=\"599ba950cebxp\">当<code data-tag=\"codeph\" class=\"codeph\">fs.file-max</code>和<code data-tag=\"codeph\" class=\"codeph\">fs.nr_open</code>参数值小于65536，建议您继续步骤<a title=\"\" class=\"xref\" href=\"#0ea69470cbk20\">3</a>。</p></li><li id=\"9bb162d1cemlp\"><p id=\"9da320b0ceugq\">若<code data-tag=\"codeph\" class=\"codeph\">fs.file-max</code>和<code data-tag=\"codeph\" class=\"codeph\">fs.nr_open</code>参数值大于65536，建议您执行步骤<a title=\"\" class=\"xref\" href=\"#4e8ef131cbisu\">4</a>。</p><pre id=\"1rscgf\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /proc/sys/fs/file-max \ncat /proc/sys/fs/nr_open </code></pre></li></ul></li><li id=\"0ea69470cbk20\"><p id=\"0ea66d60cbltf\">修改<code data-tag=\"codeph\" class=\"codeph\">/etc/sysctl.conf</code>配置文件。</p><ol id=\"44ec5151cb3d7\"><li id=\"441a8261cb146\"><p id=\"441a8260cb0fm\">打开<code data-tag=\"codeph\" class=\"codeph\">/etc/sysctl.conf</code>配置文件。</p><pre id=\"bnfxqg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/sysctl.conf</code></pre></li><li id=\"4a3eed71cbc51\"><p id=\"4a3eed70cbw3o\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"4eef2f11cbyos\"><p id=\"4eef2f10cbdr9\">修改<code data-tag=\"codeph\" class=\"codeph\">fs.file-max</code>和<code data-tag=\"codeph\" class=\"codeph\">fs.nr_open</code>参数值。 </p><p id=\"1ecdc0c0cbjq3\">建议将<code data-tag=\"codeph\" class=\"codeph\">fs.file-max</code>和<code data-tag=\"codeph\" class=\"codeph\">fs.nr_open</code>参数值都修改为大于65536。</p><ul id=\"2eb3a5b9cb24j\"><div id=\"9a127460cb7tn\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"a92ce111cbog5\"><li id=\"a92cba00cbhv7\"><p id=\"2eb3ccc0cbt4l\"><code data-tag=\"code\" class=\"code\">fs.file-max</code>：系统内核级别所有进程可打开的文件数。</p></li><li id=\"aa8bd4d0cbzji\"><p id=\"2eb3ccc2cbotc\"><code data-tag=\"code\" class=\"code\">fs.nr_open</code>：系统内核级别单个进程可打开的文件数。</p></li></ul></div></div></ul><pre id=\"3b21ku\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>fs.file-max = 655360\nfs.nr_open = 655360</code></pre></li></ol></li><li id=\"4e8ef131cbisu\"><p id=\"4e8ef130cbgv0\">修改<code data-tag=\"codeph\" class=\"codeph\">/etc/security/limits.conf</code>配置文件。</p><ol id=\"4f818e92cbv2h\"><li id=\"4f818e93cbyxg\"><p id=\"4f818e94cbcbi\">打开<code data-tag=\"codeph\" class=\"codeph\">/etc/security/limits.conf</code>配置文件。</p><pre id=\"4f818e95cb70n\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/security/limits.conf</code></pre></li><li id=\"4f818e96cbono\"><p id=\"4f818e97cbhwa\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"4f818e98cbud0\"><p id=\"4f818e99cbwcb\">修改<code data-tag=\"codeph\" class=\"codeph\">* soft nofile</code>和<code data-tag=\"codeph\" class=\"codeph\">* hard nofile</code>参数值。 </p><p id=\"4f818e9acbbat\">例如，将<code data-tag=\"code\" class=\"code\">* soft nofile</code>和<code data-tag=\"code\" class=\"code\">* hard nofile</code>参数值都修改为大于65535。</p><pre id=\"4f818e9bcb8nh\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>* soft nofile 655350\n* hard nofile 655350</code></pre></li></ol></li><li id=\"2eb3ccc7cbuk3\"><p id=\"2eb3ccc8cbtsv\">重启ECS实例。</p><p id=\"c3607d80cbynz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/start-an-instance\">启动实例</a>。</p></li><li id=\"b4864e21cbcuz\"><p id=\"b4864e20cbh7m\">依次执行以下命令，确认<code data-tag=\"code\" class=\"code\">fs.file-max</code>和<code data-tag=\"code\" class=\"code\">fs.nr_open</code>值修改成功。 </p><pre data-tag=\"codeblock\" id=\"2eadb243cb0yk\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /proc/sys/fs/file-max\ncat /proc/sys/fs/nr_open</code></pre></li></ol></section><section id=\"1963f650cbtfz\" class=\"section\"><h2 id=\"BkRbm\">相关文档</h2><p id=\"a7101439cbebw\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/troubleshooting-guidelines-when-you-cannot-remotely-log-on-to-a-linux-instance-through-ssh\">无法连接Linux实例的排查方法</a></p></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/main-process-exited-code-exited-error-when-ssh-service-is-started", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>Linux系统的ECS实例中，启动SSH服务时未遇到任何错误信息，但是ssh服务未启动该怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例中，启动SSH服务时未遇到任何错误信息，但是ssh服务未启动该怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:26:03</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"918b3a90c6r2r\"><p data-tag=\"shortdesc\" id=\"9191a333c6pmv\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中，启动SSH服务时未遇到任何错误信息，但是ssh服务未启动的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"2727b370c6dpc\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"9191a338c6i0b\">在Linux系统的ECS实例中，使用service或systemctl命令启动SSH服务时，命令行没有返回任何报错信息，但服务没有正常运行。</p><p id=\"393aedc0c6d8u\">执行<code data-tag=\"code\" class=\"code\">cat /var/log/secure</code>查看secure日志，发现类似如下错误信息。</p><pre data-tag=\"codeblock\" id=\"918b3a91c6lim\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sshd.service: main process exited, code=exited, status=203/EXEC.\ninit: ssh main process (1843) terminated with status 255.</code></pre></section><section id=\"6193e880c63ah\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"9191ca41c6czq\">该问题通常是因为PATH环境变量配置异常，或SSH软件包相关文件被移除。</p></section><section id=\"6fc3ce20c6ybw\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"9191f157c6lyz\">请按照如下操作步骤，进行检查并解决问题。</p><ol id=\"dc3222f1c6mkp\"><li id=\"b28af191c6os4\"><p id=\"519623b0c6ag9\">使用VNC远程连接ECS实例。 </p><p id=\"60c5beb0c6pfk\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"91921862c6awg\"><p id=\"91921863c62m0\">执行如下命令，检查环境变量配置。 </p><pre data-tag=\"codeblock\" id=\"918b3a92c62pm\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>echo $PATH</code></pre><ul id=\"efa98121c68ba\"><li id=\"ec3a4b01c6qjy\"><p id=\"91921864c6ytw\">系统正常返回类似如下，该值为PAHT环境变量的默认值。 </p><pre data-tag=\"codeblock\" id=\"918b3a93c6b0p\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin</code></pre></li><li id=\"0c81d7c0c6lc7\"><p id=\"0c81b0b0c6jw2\">若返回其他信息，表示环境变量的默认值被改变，则需执行如下命令，重置环境变量。</p><pre data-tag=\"codeblock\" id=\"918b3a94c6y96\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>export PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin</code></pre></li></ul></li><li id=\"91923f73c6v10\"><p id=\"91923f74c6ak7\">执行如下命令，查找并确认sshd程序的路径。 </p><pre data-tag=\"codeblock\" id=\"918b3a95c6irc\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>find / -name sshd</code></pre><ul id=\"6344d761c6woa\"><li id=\"5e216191c6hbr\"><p id=\"91923f75c6q6o\">系统正常返回类似如下，包含sshd程序的默认路径。 </p><pre data-tag=\"codeblock\" id=\"918b3a96c6tgw\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>/usr/sbin/sshd</code></pre></li><li id=\"7d1bfbf1c67lm\"><p id=\"91923f76c60nt\">如果相应文件不存在，建议执行如下命令，重新安装SSH软件包。</p><pre id=\"6re9dy\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install -y openssh</code></pre></li></ul></li><li id=\"91926682c6577\"><p id=\"91926683c690m\">执行如下命令，重启SSH服务。 </p><pre data-tag=\"codeblock\" id=\"918b3a97c63zd\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart sshd.service</code></pre></li><li id=\"30fab3e0c9c97\"><p id=\"30fa8cd0c939t\">执行如下命令，查看SSH服务状态。</p><pre id=\"mz2rtq\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl status sshd.service</code></pre><p id=\"3f5ad140c9zj5\">返回如下所示时，表示SSH服务为运行中。</p><img id=\"65e2b580c9403\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5198889761/p608926.png\" alt=\"查看sshd状态\" placement=\"break\" class=\"image break\"></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-ssh-exchange-identification-read-connection-reset-by-peer-error-is-displayed-when-you-log-on-to-an-ecs-instance-through-ssh", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>使用SSH客户端登录Linux实例提示“ssh_exchange_identification: read: Connection reset by peer”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用SSH客户端登录Linux实例提示“ssh_exchange_identification: read: Connection reset by peer”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-07 13:56:58</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"711e827065u78\"><p data-tag=\"shortdesc\" id=\"71222bf065cym\" class=\"shortdesc\">本文介绍了使用SSH客户端登录Linux实例提示“ssh_exchange_identification: read: Connection reset by peer”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"2b10526097msn\" class=\"section\"><h2 id=\"ffswS\">问题描述</h2><p id=\"71222bf46505j\">通过SSH客户端登录Linux实例时，确认用户名和密码正确的情况下，遇到了如下错误信息。</p><pre id=\"711e8271657av\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ssh_exchange_identification: read: Connection reset by peer.\nsshd[11949]: refused connect from 192.168.0.0 (192.168.0.0).</code></pre></section><section id=\"4ece413097cgj\" class=\"section\"><h2 id=\"711e827265gfa\">问题原因</h2><p id=\"4fb60920973kx\">出现该问题可能有以下原因：</p><ul id=\"a46ab37197lsu\"><li id=\"71222bf6652ju\"><p id=\"71222bf7654tn\">ECS实例内的TCP Wrapper文件配置不正确：TCP Wrapper是Linux系统中的标准安全框架，用于控制应用程序的访问。其守护进程tcpd通过读取<code data-tag=\"code\" class=\"code\">/etc/hosts.allow</code>和<code data-tag=\"code\" class=\"code\">/etc/hosts.deny</code>两个文件中的相关配置，决定是否允许进行TCP连接。如果<code data-tag=\"code\" class=\"code\">/etc/hosts.allow</code>或<code data-tag=\"code\" class=\"code\">/etc/hosts.deny</code>文件配置错误，会导致SSH连接异常。您可以重新配置<code data-tag=\"code\" class=\"code\">/etc/hosts.allow</code>或<code data-tag=\"code\" class=\"code\">/etc/hosts.deny</code>文件解决该问题，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#32d99a3097uhn\">方法一：编辑TCP Wrapper文件</a>。</p></li><li id=\"85087f51a0850\"><p id=\"8354b4d0a097l\">ECS实例内liblz4.so.1文件丢失：liblz4.so.1文件是liblz4.so.1.7.5文件的软链接，该文件丢失会导致SSH连接异常。更多详情，请参见<a title=\"\" class=\"xref\" href=\"#c5fdd4b1a0915\">方法二：创建liblz4.so.1软链接</a>。</p></li><li id=\"71222bf8658sy\"><p id=\"71222bf965ac8\">本地公网IP被云安全中心拦截：请将本地公网IP添加到白名单，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#823e130097gyd\">方法三：在云安全中心添加白名单</a>。</p></li><li id=\"71222bfa658qt\"><p id=\"71222bfb65z1f\">本地网络连接异常：请检查本地网络，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#9b6ce9a0979kx\">方法四：检查本地网络</a>。 </p></li></ul></section><section id=\"5bf87d0097pqj\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><section id=\"32d99a3097uhn\" class=\"section\"><h3 id=\"7122530265a84\"><b>方法一：</b>编辑TCP Wrapper文件</h3><p id=\"4ce1007090op2\">参考以下步骤，通过修改配置文件动态设置访问策略，修改后无需重启服务器使配置生效。 本文以修改<code data-tag=\"code\" class=\"code\">/etc/hosts.deny</code>为例进行说明。</p><ol id=\"7122530365eqj\"><li id=\"71225304655k2\"><p id=\"71225305656k3\">通过VNC方式登录ECS实例。</p><p id=\"e37aa700974f7\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"71225306650df\"><p id=\"7122530765cpo\">执行如下命令，查看<code data-tag=\"code\" class=\"code\">/etc/hosts.allow</code>或<code data-tag=\"code\" class=\"code\">/etc/hosts.deny</code>文件中，是否包含类似<code data-tag=\"code\" class=\"code\">all:all:deny</code>或<code data-tag=\"code\" class=\"code\">sshd:IP地址:deny</code>配置。 </p><pre id=\"2b27514197q59\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/hosts.deny</code></pre><ul id=\"ade4f8e197m3w\"><li id=\"7122530965fxv\"><p id=\"b8b6e67097fn1\">如果不存在<code data-tag=\"code\" class=\"code\">all:all:deny</code>或<code data-tag=\"code\" class=\"code\">sshd:IP地址:deny</code>配置，说明不是TCP Wrapper导致，请执行其他方案进行排查。</p></li><li id=\"b727baf097w5j\"><p id=\"b72793e097mse\">如果存在<code data-tag=\"code\" class=\"code\">all:all:deny</code>或<code data-tag=\"code\" class=\"code\">sshd:IP地址:deny</code>配置，请继续执行下一步。</p></li></ul></li><li id=\"8c4f8f6097ydd\"><p id=\"8c4f6850973n6\">修改<code data-tag=\"code\" class=\"code\">/etc/hosts.deny</code>文件。</p><ol id=\"539cd4b197u7u\"><li id=\"5315f17197k8f\"><p id=\"5315f1709768w\">打开<code data-tag=\"code\" class=\"code\">/etc/hosts.deny</code>文件。</p></li><li id=\"5b1cff3197et6\"><p id=\"5b1cff3097uug\">在<code data-tag=\"code\" class=\"code\">all:all:deny</code>或<code data-tag=\"code\" class=\"code\">sshd:IP地址:deny</code>前加#号，注释掉该配置。</p><pre id=\"711e827465flo\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code># all:all:deny\n# sshd:IP地址:deny</code></pre></li><li class=\"li substep substepexpand\" id=\"substep-fv1-dxe-olh\"><p id=\"92ecde8097lv5\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，退出编辑模式。</p></li><li class=\"li substep substepexpand\" id=\"substep-69v-j45-dcg\" data-spm-anchor-id=\"a2c4g.11186623.0.i3.340456b5dAXbA7\"><p id=\"92ecde8197i30\">输入<code data-tag=\"code\" class=\"code\">:wq</code>，并按<code data-tag=\"code\" class=\"code\">Enter</code>键，保存并退出。</p></li></ol></li></ol></section><section id=\"c5fdd4b1a0915\" class=\"section\"><h2 id=\"eb905c70a0bl3\"><b>方法二：创建liblz4.so.1软链接</b></h2><ol id=\"ecfa73c1a0xqd\"><li id=\"e9c22c21a06mn\"><p id=\"e9c22c20a0ots\">通过VNC方式登录ECS实例。</p><p id=\"c5fdfbc1a0muv\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"c5fdfbc2a0njl\"><p id=\"c5fdfbc3a0uxl\">执行如下命令，查找liblz4.so.1.7.5文件。</p><pre id=\"c5fdfbc4a02tf\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>find / -name \"liblz4*\"</code></pre><p id=\"c5fdfbc5a01sc\">如果不存在liblz4.so.1.7.5文件，将其他正常ECS实例中的liblz4.so.1.7.5文件拷贝到该ECS实例<code data-tag=\"code\" class=\"code\">/usr/lib64/</code>中。</p></li><li id=\"c5fdfbc6a0mj8\"><p id=\"c5fdfbc7a0uv0\">执行以下命令，创建软链接。</p><pre id=\"c5fdfbc8a0f8k\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ln -s liblz4.so.1.7.5 liblz4.so.1</code></pre></li></ol></section><section id=\"823e130097gyd\" class=\"section\"><h3 id=\"7122531165w20\"><b>方法三：在云安全中心添加白名单</b></h3><p id=\"61f1080097qqm\">如果在一个本地客户端网络连接ECS服务器时多次输入错误的登录信息，会导致此IP远程登录ECS的请求被拦截。您可以在云安全中心的设置中，添加本地IP至白名单，这样就不会对本地IP远程登录此服务器进行拦截，具体操作如下： </p><ol data-spm-anchor-id=\"a2c4g.11186623.0.i4.366a7013FVyHX4\" class=\"ol\" id=\"ol-hya-c50-38s\"><li data-spm-anchor-id=\"\" class=\"li\" id=\"li-tax-4o7-s2z\"><p id=\"79ce7f70977so\">登录<a class=\"\" target=\"_blank\" href=\"https://yundun.console.aliyun.com/?p=sas\">云安全中心控制台</a>。</p></li><li data-spm-anchor-id=\"\" class=\"li\" id=\"li-58w-xyc-srr\"><p id=\"79ce7f7197s9q\">在左侧导航栏，选择<b>系统配置 &gt; 功能设置</b>。</p></li><li class=\"li\" id=\"li-r77-nk3-r3l\"><p id=\"79ce7f72976qb\">在<b>设置</b>页签的<b>其它配置</b>子页签，单击<b>安全管控</b>区域的<b>配置</b>，跳转至<b>安全管控</b>控制台。</p></li><li id=\"fd74838186ftx\"><p id=\"79ce7f7397yf5\">在左侧导航栏，选择<b>白名单管理 &gt; IP白名单</b>。</p></li><li id=\"0a9ac151863g6\"><p id=\"79ce7f7497ia9\">在<b>IP白名单</b>页面，单击<b>添加</b>。</p><p id=\"79ce7f7597vp7\">具体操作，请参见<a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/197302.htm#section-hma-ab3-i7i\">安全管控</a>。</p></li></ol></section><section id=\"9b6ce9a0979kx\" class=\"section\"><h3 id=\"71227a18658wu\"><b>方法四：检查本地网络</b></h3><p id=\"72518140901f5\">请使用其他网络环境测试网络是否连接正常，例如手机4G网络，查看是否可以正常登录。</p><p id=\"e962f37097thi\">若可以正常登录，说明是本地网络问题，请自行排查。</p></section></section><p id=\"c3c8cc40a0hx8\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/multiple-consecutive-incorrect-password-accesses-to-linux-instances-through-ssh", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>使用SSH客户端远程连接Linux系统的ECS实例时，提示“Maximum amount of failed attempts was reached”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用SSH客户端远程连接Linux系统的ECS实例时，提示“Maximum amount of failed attempts was reached”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-14 16:38:55</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"9d9e1990a3fo7\"><p data-tag=\"shortdesc\" id=\"9da76861a3p64\" class=\"shortdesc\">本文介绍使用SSH客户端远程连接Linux系统的ECS实例时，提示“Maximum amount of failed attempts was reached”错误的原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"3332cb40a3nmu\" class=\"section\"><h2 id=\"JrSre\">问题描述</h2><p id=\"72ad0c10cepkn\">使用SSH客户端远程连接Linux系统的ECS实例时，提示“Maximum amount of failed attempts was reached”错误。</p></section><section id=\"3f94ceb0a3gkr\" class=\"section\"><h2 id=\"DwxGX\">问题原因</h2><p id=\"9da76868a34lg\">连续多次输入错误密码，触发系统PAM认证模块策略限制，导致用户被锁定，无法远程连接ECS实例。</p><div type=\"note\" id=\"3e239c61a3fb5\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"402315e1a3wc8\">Linux系统中和SSH相关的PAM配置文件主要有以下三个，如果PAM认证对远程连接做了限制，例如设置<code data-tag=\"code\" class=\"code\">auth required pam_tally2.so deny=3 unlock_time=50</code>，表示普通用户和root用户连续三次输入错误密码，50秒后才能再次远程连接ECS实例。</p><ul id=\"402315e2a32mk\"><li id=\"402315e3a3vsl\"><p id=\"402315e4a3d0t\"><code data-tag=\"code\" class=\"code\">/etc/pam.d/login</code>：VNC对应的PAM配置文件。</p></li><li id=\"402315e5a31n0\"><p id=\"402315e6a3p4d\"><code data-tag=\"code\" class=\"code\">/etc/pam.d/sshd</code>：SSH服务对应的PAM配置文件。</p></li><li id=\"402315e7a3cm7\"><p id=\"402315e8a3xjj\"><code data-tag=\"code\" class=\"code\">/etc/pam.d/system-auth</code>：系统全局PAM配置文件。</p></li></ul></div></div></section><section id=\"accec080a7h40\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"ef35aa00ce65d\">您可以根据root用户是否被锁定，选择具体的方案进行修复。</p><ul id=\"1d8839d2cfbg1\"><li id=\"1d8839d0cfhf4\"><p id=\"1cbe0c00cfm6p\"><a title=\"\" class=\"xref\" href=\"#6f8e4310celht\">root用户未被锁定</a></p></li><li id=\"a5d2aaf1cf3qp\"><p id=\"a5d2aaf0cfmsx\"><a title=\"\" class=\"xref\" href=\"#21bb8340cfkra\">root用户被锁定</a></p></li></ul><section id=\"6f8e4310celht\" class=\"section\"><h3 id=\"97f22d01a7mik\"><b>root用户未被锁定</b></h3><p id=\"f1c79f81ce7b0\">本文以注释系统全局PAM配置文件（<code data-tag=\"code\" class=\"code\">/etc/pam.d/system-auth</code>）中PAM限制配置为例进行说明，修改<code data-tag=\"code\" class=\"code\">/etc/pam.d/sshd</code>或<code data-tag=\"code\" class=\"code\">/etc/pam.d/system-auth</code>方法类似。</p><ol id=\"a0e855b0a7vj3\"><li id=\"a76b95d0a3f40\"><p id=\"a76b6ec0a38iw\">使用root用户通过VNC方式连接实例。</p><p id=\"04f68a60cedp6\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"f8dc8c71ceoot\"><p id=\"f8dc8c70cet63\">执行如下命令，查看PAM配置文件中是否存在PAM认证限制。</p><pre data-tag=\"codeblock\" id=\"9d9e1991a3e95\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cat /etc/pam.d/system-auth</code></pre><p id=\"dc420cb0ceccf\">例如，系统返回如下时，表示普通用户和root用户连续三次输入错误密码，50秒后才能再次远程连接ECS实例。</p><img id=\"b3adc130cer6e\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7573810861/p613741.png\" alt=\"2023-03-30_21-17-03\" placement=\"break\" class=\"image break\"></li><li id=\"9da7dd93a33z8\"><p id=\"9da7dd94a33b6\">修改system-auth配置文件。</p><ol id=\"ec2f8b61ceuyj\"><li id=\"eb8e4251ce4hm\"><p id=\"eb8e4250cezvo\">执行如下命令，打开system-auth配置文件。</p><pre id=\"dqvfqq\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/pam.d/system-auth</code></pre></li><li id=\"f9cbbc81cez4i\"><p id=\"f9cbbc80ceg71\">按<code data-tag=\"code\" class=\"code\">i</code>进入编辑模式。</p></li><li id=\"154ce790ce402\"><p id=\"154cc080ce8z3\">根据业务需要，注释、修改或删除该配置。</p><p id=\"30891300cfya1\">本文以注释配置为例进行说明。</p><pre data-tag=\"codeblock\" id=\"3926e9e0ceae9\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>auth required pam_tally2.so deny=3 unlock_time=50            #原文代码：普通用户和root用户连续三次输入错误密码会被锁定，50秒后才能解锁。\n#auth required pam_tally2.so deny=3 unlock_time=50           #注释后                          </code></pre><div id=\"a2552ee0ce4cl\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"bc1521f2cejvl\"><li id=\"bc1521f0ced5r\"><p id=\"a2552ee1ce68e\">此处使用的是<code data-tag=\"code\" class=\"code\">pam_tally2</code>模块，如果不支持<code data-tag=\"code\" class=\"code\">pam_tally2</code>模块可以使用<code data-tag=\"code\" class=\"code\">pam_tally</code>模块。另外，不同的PAM版本，设置可能有所不同，具体使用方法，可以参照相关模块的使用规则。更多详情，请参见<a class=\"\" target=\"_blank\" href=\"https://github.com/linux-pam/linux-pam/blob/master/doc/sag/Linux-PAM_SAG.xml\">Linux PAM SAG</a>。</p></li><li id=\"bd48bff0ceul2\"><p id=\"a2552ee2ceqgi\"><code data-tag=\"code\" class=\"code\">pam_tally2</code>与<code data-tag=\"code\" class=\"code\">pam_tally</code>模块都可以用于账户锁定策略控制。两者的区别是前者增加了自动解锁时间的功能。</p></li><li id=\"be951610cevqw\"><p id=\"a2552ee3cef81\"><code data-tag=\"code\" class=\"code\">even_deny_root</code>指限制root用户。</p></li><li id=\"c011f210ceeua\"><p id=\"a2552ee4cej59\"><code data-tag=\"code\" class=\"code\">deny</code>指设置普通用户和root用户连续错误登录的最大次数，超过最大次数，则锁定该用户。</p></li><li id=\"c155e3c0cesrx\"><p id=\"a2552ee5cedng\"><code data-tag=\"code\" class=\"code\">unlock_time</code>指设定普通用户锁定后，多长时间后解锁，单位是秒。</p></li><li id=\"ccc5e610cez3e\"><p id=\"a2552ee6cen7u\"><code data-tag=\"code\" class=\"code\">root_unlock_time</code>指设定root用户锁定后，多长时间后解锁，单位是秒。</p></li></ul></div></div></li></ol></li><li id=\"9098ee31ceyj2\"><p id=\"9da82bb7a3kgg\">远程连接实例，不再出现该错误时，说明该问题已修复。</p></li></ol></section><section id=\"21bb8340cfkra\" class=\"section\"><h3 data-tag=\"h3\" id=\"9da82bb9a3zx1\" class=\"h3\"><b>root用户被锁定</b></h3><ol id=\"9da82bbaa3dkh\"><li id=\"9da82bbba3isj\"><p id=\"9da82bbca3dbg\">使用单用户模式远程连接实例。</p><p id=\"bc12e290cezgi\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/boot-a-linux-ecs-instance-into-single-user-mode\">Linux系统进入单用户模式</a>。</p></li><li id=\"753abf00cebfe\"><p id=\"753a97f0ceppp\">依次执行如下命令，解锁root用户。 </p><pre data-tag=\"codeblock\" id=\"9d9e40a0a3o3x\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>pam_tally2 -u root                          #查看root用户登录密码连续输入错误次数。\npam_tally2 -u root -r                       #清除root用户密码连续输入错误次数。\nauthconfig --disableldap --update           #更新PAM安全认证记录。</code></pre></li><li id=\"9da852c0a3laq\"><p id=\"9da852c1a3r3p\">重启实例。</p><p id=\"f94dc800cemrs\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li><li id=\"e60c9501celh0\"><p id=\"e60c9500cead2\">在对应的PAM配置文件中注释、修改或删除相应配置。</p><p id=\"43ebf440cfq0t\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"#6f8e4310celht\">方案一：root用户未被锁定时</a>。</p></li><li id=\"0fb2d040cfzds\"><p id=\"822759c0cfz2o\">远程连接实例，不再出现该错误时，说明该问题已修复。</p></li></ol></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-when-i-cannot-log-on-to-a-linux-instance-after-the-pam-authentication-module-is-enabled", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>启用PAM认证模块后，无法登录Linux实例的解决方案</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>启用PAM认证模块后，无法登录Linux实例的解决方案</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-08-10 10:58:48</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"e530cba0a3zj7\"><p data-tag=\"shortdesc\" id=\"e538bae7a3tt9\" class=\"shortdesc\">本文介绍在Linux操作系统内启用PAM认证模块后，出现无法登录Linux实例问题的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"e89657f034snm\" class=\"section\"><h2 id=\"cf15b6e031g2g\"><b>什么是</b>PAM</h2><p id=\"e23c35f03140n\">PAM （Pluggable Authentication Modules）是一个身份认证机制，可用于Linux系统中来实现用户身份验证，加强系统的安全。</p><p id=\"facbf32031lr2\">如果PAM模块配置错误，可能会导致用户无法通过身份认证，即使输入了正确的密码也无法登录Linux实例。这种情况下，建议您联系管理员检查PAM模块的配置，并根据需要进行相应的调整，以确保能够成功登录Linux实例。常见的与远程登录实例的服务有ssh和login，这两个服务在pam对应的配置文件如下：</p><ul id=\"1a1f3e6031jfh\" data-spm-anchor-id=\"a2c4g.41491.0.i1.41ac3baa8w7MXk\"><li id=\"1a1f3e61311gz\"><p id=\"1a1f3e6231af4\"><code data-tag=\"code\" class=\"code\">/etc/pam.d/login</code>：控制台（管理终端）对应的配置文件。例如密码验证、账户锁定和限制登录IP等。</p></li><li id=\"c036447331w2u\"><p id=\"c036447431wfo\"><code data-tag=\"code\" class=\"code\">/etc/pam.d/sshd</code>：SSH远程登录的认证信息。</p></li><li id=\"1a1f3e6531xep\"><p id=\"c036447631kt1\"><code data-tag=\"code\" class=\"code\">/etc/pam.d/system-auth</code>：系统级别的认证信息，例如密码策略、用户信息和访问控制等。</p></li></ul></section><section id=\"ec47ee40347hc\" class=\"section\"><h2 id=\"929b5390313k4\"><b>如何修改PAM配置</b></h2><div id=\"90ede2f0319b6\" type=\"important\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><ul id=\"0e114d9232i5d\"><li id=\"0e114d9032ckj\"><p id=\"90edbbe031un4\">仅root用户（管理员）支持修改PAM配置，若您为非root用户，请联系管理员检查并修改PAM配置。</p></li><li id=\"0efe45a132ttm\"><p id=\"0efe45a0323pk\">PAM配置通常是为了加强系统安全，在修改PAM配置之前，请谨慎评估是否需要修改，以及所做的更改不会破坏系统的正常功能或导致安全漏洞。</p></li></ul></div></div><ol id=\"acbbb62231jr4\"><li id=\"acbbb620317ld\"><p id=\"aba5642031d0j\">（可选）若root用户输入正确密码也无法登录，请先解锁root用户。否则，请跳过该步骤。</p><div id=\"c5347ec332uwm\" outputclass=\"collapse\" class=\"collapse\"><p id=\"c5347ec432twu\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>如何解锁root用户？</b></p><div id=\"c5347ec532su5\" data-tag=\"expandable-content\" class=\"expandable-content\"><ol id=\"c5347ec6324j8\" start=\"1\"><li id=\"c5347ec732kgu\"><p id=\"c5347ec832wjt\">使用单用户模式登录实例。</p><p id=\"c5347ec932izb\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/boot-a-linux-ecs-instance-into-single-user-mode\">Linux系统进入单用户模式</a>。</p></li><li id=\"c5347eca32e8z\"><p id=\"c5347ecb32anx\">依次执行如下命令，解锁root用户。</p><pre data-tag=\"codeblock\" outputclass=\"language-shell\" id=\"c5347ecc32mia\" class=\"pre codeblock language-shell\"><code>pam_tally2 -u root #查看root用户登录密码连续输入错误次数。\npam_tally2 -u root -r #清除root用户密码连续输入错误次数。\nauthconfig --disableldap --update #更新PAM安全认证记录。</code></pre></li><li id=\"c5347ecd328lv\"><p id=\"c5347ece325ta\">重启ECS实例，使修改生效。</p><p id=\"1606dd7034t23\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li></ol></div></div></li><li id=\"01aa3f7032hv7\"><p id=\"01aa186032e1b\">使用root用户登录Linux实例。</p><p id=\"0ecc6e8034kfq\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"ced004e031ra9\"><p id=\"cecfddd031tub\">执行以下命令，打开secure日志，查找包含pam字段的行，并确定与PAM设置相关联的模块名称。</p><pre id=\"q0f1hq\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>cat /var/log/secure</code></pre><p id=\"3108160032mig\">例如以下示例，模块名称为<i>pam_succeed_if</i>。</p><pre id=\"zhrfao\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>pam_succeed_if(sshd:auth): requirement \"uid &gt;= 1000\" not met by user \"root\".</code></pre></li><li id=\"d84c858031ykg\"><p id=\"d84c5e7031xia\">根据获取的模块名称，查找PAM配置文件是否存在相关配置。如存在，参考步骤<a title=\"\" class=\"xref\" href=\"#c51eb04031m2r\">5</a>修改。</p><ol id=\"4b73a7d132wpn\"><li id=\"4ad98ab132tno\"><p id=\"4bf02ad032ivp\">执行以下命令，获取以下3个PAM配置文件的配置信息。</p><pre id=\"9b8c4e5031ioo\" outputclass=\"language-shell\" data-tag=\"codeblock\" class=\"pre codeblock language-shell\"><code>cat /etc/pam.d/login\ncat /etc/pam.d/sshd\ncat /etc/pam.d/system-auth</code></pre></li><li id=\"5bb619c132xde\"><p id=\"c53230a032p1b\">使用grep命令，查找各配置文件中是否存在与secure日志相关的配置行。</p><pre id=\"vekogc\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>grep \"模块名称\" /etc/pam.d/login\ngrep \"模块名称\" /etc/pam.d/sshd\ngrep \"模块名称\" /etc/pam.d/system-auth</code></pre><p id=\"e6a4a8d032s09\">例如，查找包含模块名称<i>pam_succeed_if</i>的行，执行以下命令：</p><pre id=\"hypofl\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>grep \"pam_succeed_if\" /etc/pam.d/login\ngrep \"pam_succeed_if\" /etc/pam.d/sshd\ngrep \"pam_succeed_if\" /etc/pam.d/system-auth</code></pre><p id=\"d1f506d03223r\">若PAM配置文件存在相关配置，您将看到类似输出：</p><pre id=\"m4q3gp\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>/etc/pam.d/login:auth        requisite     pam_succeed_if.so uid &gt;= 1000 quiet_success\n/etc/pam.d/system-auth:auth        requisite     pam_succeed_if.so uid &gt;= 1000 quiet_success</code></pre></li></ol></li><li id=\"c51eb04031m2r\"><p id=\"c84ee19031qb0\">若PAM配置文件存在相关配置，打开对应的配置文件，根据实际需求修改与secure日志中相关的配置，解除限制。</p><div type=\"important\" id=\"0e8c971032j60\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"0e8c7000324pz\">所有包含secure中模块名称的PAM配置文件，均需要修改。</p></div></div><ol id=\"a7bac43132eer\"><li id=\"7178fef032j24\"><p id=\"7178d7e0328rm\">执行以下命令，打开某一个对应配置文件。</p><pre id=\"8ee40f90318s3\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>vim &lt;配置文件名称&gt;</code></pre></li><li id=\"5137dca031i3i\"><p id=\"5137b590313p8\">按<code data-tag=\"code\" class=\"code\">i</code>键，根据实际需求，注释或更改对应配置。PAM配置文件的语法信息，请参见<a class=\"\" target=\"_blank\" href=\"https://docs.oracle.com/cd/E24847_01/html/819-7061/pam-32.html#scrolltoc\">PAM 配置（参考）</a>。</p></li><li id=\"35cf1ec031z7p\"><p id=\"3617e79031141\">完成配置后，按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存。</p></li><li id=\"f74fb5b132dq7\"><p id=\"f74fb5b0324d0\">（可选）重复步骤a~c，修改其他配置文件。</p></li></ol></li><li id=\"3d745d7031qf3\"><p id=\"3de065b03143q\">重新登录ECS实例，如果可以正常登录，说明问题已修复。</p></li></ol></section><section id=\"f69b0ee034c6j\" class=\"section\"><h2 id=\"dc0db39031kww\">因PAM配置不当导致登录失败的常见错误日志和对应解决方案</h2><section id=\"e810b2a231ygn\" class=\"section\"><h3 id=\"6c38227031s2b\">secure<b>日志提示：“requirement \"uid &gt;= 1000\" not met by user \"root\"”</b></h3><ul id=\"7b1f231231jrm\"><li id=\"7b1f231031mw2\"><p id=\"799093d131zbc\"><b>问题原因</b></p><p id=\"c733749031e3a\">PAM配置文件中，设置了禁止UID小于1000的用户登录。</p><div type=\"note\" id=\"b9ab77d032pqm\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"b9ab50c032l7u\">系统用户（包括root）UID为0~999，该限制一般是禁止系统用户登录系统，增强系统的安全性。</p></div></div></li><li id=\"824d35f031v2u\"><p id=\"824d0ee03109q\"><b>解决方法</b></p><ul id=\"935eb7b131ls2\"><li id=\"92e011d131b4s\"><p id=\"92e011d031x6w\">方式一：使用其他用户登录ECS实例。</p></li><li id=\"96e371a131y24\"><p id=\"96e371a0313jm\">方式二：查看PAM配置文件中是否存在相关配置并修改，来解除限制。具体操作，请参见步骤<a title=\"\" class=\"xref\" href=\"#ced004e031ra9\">3</a>~<a title=\"\" class=\"xref\" href=\"#d84c858031ykg\">4</a>。</p><p id=\"5c04e990326er\">配置文件中，存在类似如下配置表示有该限制，您可以根据需要注释或删除该配置以解除该限制。</p><pre id=\"51355ab8311jj\" outputclass=\"language-shell\" data-tag=\"codeblock\" class=\"pre codeblock language-shell\"><code>auth required pam_succeed_if.so uid &gt;= 1000</code></pre></li></ul></li></ul></section><section id=\"e810b2a531mdz\" class=\"section\"><h3 id=\"f15633d031fch\">secure<b>日志提示：</b>Refused user xxx（用户名）for service sshd</h3><ul id=\"725ae792327q1\"><li id=\"725ae79032wrs\"><p id=\"5c8eb4d231xmc\"><b>问题原因</b></p><p id=\"5c8eb4d331ci3\">PAM配置文件中，设置了禁止xxx用户登录ECS实例。</p></li><li id=\"7926410032qxf\"><p id=\"5c8eb4d531vbo\"><b>解决方法</b></p><ul id=\"8df9d3d132mvl\"><li id=\"5c8eb4d731rth\"><p id=\"5c8eb4d831qgb\">方法一：使用其他用户登录ECS实例。</p></li><li id=\"5c8eb4d9316ns\"><p id=\"5c8eb4da313qg\">方法二：查看PAM配置文件中是否存在相关配置并修改，来解除限制。具体操作，请参见步骤<a title=\"\" class=\"xref\" href=\"#ced004e031ra9\">3</a>~<a title=\"\" class=\"xref\" href=\"#d84c858031ykg\">4</a>。</p><ul id=\"15861a81323h6\"><li id=\"14f3295032khj\"><p id=\"14f3024032nff\">配置文件中，存在类似如下配置表示有该限制：</p><pre id=\"3742b08032lay\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code># 设置了访问白名单，仅允许白名单用户允许登录\nauth required pam_listfile.so item=user sense=allow file=/etc/ssh/whitelist onerr=fail\n\n# 设置了访问黑名单，禁止黑名单用户登录\nauth required pam_listfile.so item=user sense=deny  file=/etc/ssh/blacklist onerr=fail</code></pre></li><li id=\"578708f032351\"><p id=\"5786e1e032rz4\">如何修改</p><p id=\"2864bb2032egp\">将允许登录的用户添加到白名单或移除黑名单，或注释该配置。</p><div id=\"d27099b4322w0\" outputclass=\"collapse\" class=\"collapse\"><p id=\"d27099b032xwn\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>如何添加/移除</b></p><div id=\"d27099b2323v3\" data-tag=\"expandable-content\" class=\"expandable-content\"><ol id=\"c470b6ea31322\"><li id=\"c470b6eb31c1b\"><p id=\"c470b6ec31m2y\">执行如下命令，打开<code data-tag=\"code\" class=\"code\">/etc/ssh/whitelist</code>配置文件。</p><pre data-tag=\"codeblock\" outputclass=\"language-shell\" id=\"c470b6ed31orh\" class=\"pre codeblock language-shell\"><code>vim /etc/ssh/whitelist</code></pre></li><li id=\"c470b6ee314az\"><p id=\"c470b6ef31dzy\">按<code data-tag=\"code\" class=\"code\">i</code>进入编辑模式。</p></li><li id=\"c470b6f0315rv\"><p id=\"c470b6f131xi0\">将允许的登录的用户添加到白名单中。</p><p id=\"c470b6f231jgk\">以下示例表示仅允许以下三个用户登录。</p><pre id=\"c470b6f331u97\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>root\necs-user\ntest</code></pre></li><li id=\"c470b6f431ymb\"><p id=\"c470b6f531q38\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>退出并保存配置文件。</p></li></ol></div></div></li></ul></li></ul></li></ul></section><section id=\"3eb8b14030jz7\" class=\"section\"><h3 id=\"f2a0d0b0312v5\"><b>登录Linux系统的ECS实例时，提示“Maximum amount of failed attempts was reached”</b></h3><ul id=\"689292b131tti\"><li id=\"e174c64031t32\"><p id=\"e1e8489131f6m\"><b>问题原因</b></p><p id=\"f385003130sa1\">连续多次输入错误密码，触发系统PAM认证模块策略限制，导致用户被锁定，无法登录Linux实例。</p></li><li id=\"ee10775031jm8\"><p id=\"ea0a0a4031bmj\"><b>解决方法</b></p><ol id=\"a0e855b0a7vj3\"><li id=\"a76b95d0a3f40\"><p id=\"f385756030wo5\">若root用户被锁定，请先解锁root用户。否则跳过该步骤。</p><div id=\"625788d33144a\" outputclass=\"collapse\" class=\"collapse\"><p id=\"625761c031t1h\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>如何解锁root用户？</b></p><div id=\"625788d131wts\" data-tag=\"expandable-content\" class=\"expandable-content\"><ol id=\"f5896b51313wh\" start=\"1\"><li id=\"f589444031xez\"><p id=\"f3164872315uh\">使用单用户模式登录实例。</p><p id=\"f316487331n4u\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/boot-a-linux-ecs-instance-into-single-user-mode\">Linux系统进入单用户模式</a>。</p></li><li id=\"f8aec730317lh\"><p id=\"f316487531369\">依次执行如下命令，解锁root用户。</p><pre data-tag=\"codeblock\" outputclass=\"language-shell\" id=\"f31648763177u\" class=\"pre codeblock language-shell\"><code>pam_tally2 -u root #查看root用户登录密码连续输入错误次数。\npam_tally2 -u root -r #清除root用户密码连续输入错误次数。\nauthconfig --disableldap --update #更新PAM安全认证记录。</code></pre></li><li id=\"fcdb32d031a4z\"><p id=\"f3164878310zv\">重启ECS实例，使修改生效。</p><p id=\"258f0aa3346jy\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li></ol></div></div></li><li id=\"4dfa859031d2g\"><p id=\"4dfa5e8031jea\">使用root用户登录Linux实例。</p><p id=\"1afbd3c034ujz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">使用VNC登录实例</a>。</p></li><li id=\"f8dc8c71ceoot\"><p id=\"f385756330gsx\">执行如下命令，查看PAM配置文件中是否存在认证限制。</p><pre data-tag=\"codeblock\" outputclass=\"language-shell\" id=\"f385756630nj2\" class=\"pre codeblock language-shell\"><code>cat /etc/pam.d/system-auth</code></pre><p id=\"f3859c7030pou\">例如，系统返回如下时，表示普通用户和root用户连续三次输入错误密码，50秒后才能再次登录Linux实例。</p><img id=\"ce6847a030k5a\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4315590961/p701158.png\" alt=\"image.png\" placement=\"break\" width=\"800\" class=\"image break\"></li><li id=\"9da7dd93a33z8\"><p id=\"f3859c7230as8\">解决问题。</p><ul id=\"426f8bc1311sa\"><li id=\"41d7b8903197a\"><p id=\"41d7918031my3\">方法一：等待PAM设置的冻结时长（例如50秒），待系统解冻账户后，再重新登录实例。</p></li><li id=\"478bae90318a6\"><p id=\"478b878031a91\">方法二：修改配置文件（下文<code data-tag=\"code\" class=\"code\">/etc/pam.d/system-auth</code>为例进行说明，其他配置文件修改方法类似）。</p><ol id=\"ec2f8b61ceuyj\"><li id=\"eb8e4251ce4hm\"><p id=\"f3859c7330w2y\">执行如下命令，打开<code data-tag=\"code\" class=\"code\">/etc/pam.d/system-auth</code>配置文件。</p><pre data-tag=\"codeblock\" outputclass=\"language-shell\" id=\"f3859c76302rk\" class=\"pre codeblock language-shell\"><code>vim /etc/pam.d/system-auth</code></pre></li><li id=\"f9cbbc81cez4i\"><p id=\"f3859c77300jr\">按<code data-tag=\"code\" class=\"code\">i</code>进入编辑模式。</p></li><li id=\"154ce790ce402\"><p id=\"f385c38030fsg\">根据业务需要，注释、修改或删除该配置。</p><p id=\"f385c38130x3z\">本文以注释配置为例进行说明。</p><pre data-tag=\"codeblock\" outputclass=\"language-shell\" id=\"f385c384309j3\" class=\"pre codeblock language-shell\"><code>auth required pam_tally2.so deny=3 unlock_time=50  #原文代码：普通用户和root用户连续三次输入错误密码会被锁定，50秒后才能解锁。\n#auth required pam_tally2.so deny=3 unlock_time=50 #注释后 </code></pre><div type=\"note\" id=\"5ebafc1030nbn\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"5f143fa030dnk\">此处使用的是<code data-tag=\"code\" class=\"code\">pam_tally2</code>模块，不同的PAM版本，设置可能有所不同，详情请参见<a class=\"\" target=\"_blank\" href=\"https://github.com/linux-pam/linux-pam/blob/master/doc/sag/Linux-PAM_SAG.xml\">Linux PAM SAG</a>。</p></div></div></li></ol></li></ul></li></ol></li></ul></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/fix-the-cve-2021-33909-vulnerability-in-an-alibaba-cloud-linux-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux系统的CVE-2021-33909安全漏洞内核热补丁修复方案</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-12 11:10:08</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"7d95ec6091rxu\"><p data-tag=\"shortdesc\" id=\"7d9e50d1914in\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2和Alibaba Cloud Linux 3系统的CVE-2021-33909安全漏洞内核热补丁修复方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"7d9e50d291uaq\">在符合如下条件的Alibaba Cloud Linux实例中，存在CVE-2021-33909安全漏洞，特定场景下会造成系统宕机，且出现如下调用栈信息。</p><ul id=\"15e01d22cevx2\"><li id=\"15e01d20cehhl\"><p id=\"1f019b90cenw3\">Alibaba Cloud Linux 2系统</p><ul id=\"2a78f0e1ceozh\"><li id=\"29ea6c80cenlz\"><p id=\"26f40fe0ce4ll\">镜像：Alibaba Cloud Linux 2.1903 LTS 64位。</p></li><li id=\"2d52ebe1cek73\"><p id=\"2d52ebe0ceitn\">内核：kernel-4.19.91-24.al7及之前的内核版本。</p></li></ul></li><li id=\"291e69f0cefdy\"><p id=\"291e69f1cez94\">Alibaba Cloud Linux 3系统</p><ul id=\"43a667f1cebuh\"><li id=\"4343ae80cera1\"><p id=\"291e69f3celv1\">镜像：Alibaba Cloud Linux 3.2104 64位。</p></li><li id=\"4645a3e1ce2ko\"><p id=\"4645a3e0ce2cl\">内核：kernel-5.10.60-7.al8（含）之前的内核版本。</p></li></ul></li></ul><pre id=\"7d961370910im\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>[  415.961724] BUG: unable to handle kernel paging request at ffffb807c2f1aff6\n[  415.963259] PGD 42f53b067 P4D 42f53b067 PUD 0\n[  415.964201] Oops: 0002 [#1] SMP PTI\n[  415.965026] CPU: 5 PID: 1537 Comm: seq_poc Kdump: loaded Tainted: G        W         4.19.91-23.al7.x86_64 #1\n[  415.967154] Hardware name: Red Hat KVM, BIOS 0.5.1 01/01/2011\n[  415.968353] RIP: 0010:__memcpy+0x12/0x20\n[  415.969187] Code: 48 c1 e2 20 48 09 c2 48 31 d3 e9 68 ff ff ff 90 90 90 90 90 90 90 90 90 66 66 90 66 90 48 89 f8 48 89 d1 48 c1 e9 03 83 e2 07 &lt;f3&gt; 48 a5 89 d1 f3 a4 c3 66 0f 1f 44 00 00 48 89 f8 48 89 d1 f3 a4\n[  415.973070] RSP: 0018:ffffb80802097dd8 EFLAGS: 00010202\n[  415.974159] RAX: ffffb807c2f1aff6 RBX: ffff8a85f9593450 RCX: 0000000000000001\n[  415.975638] RDX: 0000000000000002 RSI: ffffffff9b0c231c RDI: ffffb807c2f1aff6\n[  415.977097] RBP: ffffb80842f1b000 R08: ffffffff9b0c231c R09: 0000000000000001\n[  415.978563] R10: ffffe41e47d4fa80 R11: ffffe41e47d4fac0 R12: ffffffff9b0a9cc2\n[  415.980168] R13: ffff8a87a83eaa00 R14: ffffb80802097f10 R15: ffff8a87ad6de700\n[  415.981664] FS:  00007f9ef5d86740(0000) GS:ffff8a87afb40000(0000) knlGS:0000000000000000\n[  415.983464] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033\n[  415.984722] CR2: ffffb807c2f1aff6 CR3: 0000000279c40005 CR4: 00000000000606e0\n[  415.986253] Call Trace:\n[  415.986802]  prepend+0x23/0x30\n[  415.987517]  dentry_path+0x7e/0xa0\n[  415.988249]  seq_dentry+0x36/0xa0\n[  415.988954]  show_mountinfo+0x203/0x280\n[  415.989764]  seq_read+0x14a/0x3d0\n[  415.990514]  vfs_read+0x89/0x130\n[  415.991209]  ksys_read+0x4a/0xc0\n[  415.991898]  do_syscall_64+0x5b/0x1b0\n[  415.992661]  entry_SYSCALL_64_after_hwframe+0x44/0xa9\n[  415.993713] RIP: 0033:0x7f9ef5891a30\n[  415.994450] Code: 0b 31 c0 48 83 c4 08 e9 be fe ff ff 48 8d 3d c7 c3 09 00 e8 42 8c 02 00 66 90 83 3d 8d d5 2d 00 00 75 10 b8 00 00 00 00 0f 05 &lt;48&gt; 3d 01 f0 ff ff 73 31 c3 48 83 ec 08 e8 de cc 01 00 48 89 04 24\n[  415.998217] RSP: 002b:00007f9ef5d84f78 EFLAGS: 00000246 ORIG_RAX: 0000000000000000\n[  415.999792] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f9ef5891a30\n[  416.001249] RDX: 0000000000000400 RSI: 0000000000603240 RDI: 0000000000000003\n[  416.002794] RBP: 00007f9ef5d84ff0 R08: 0000000000603240 R09: 00007f9ef58fcc30\n[  416.004310] R10: 00007f9ef5d849e0 R11: 0000000000000246 R12: 0000000000400c00\n[  416.005786] R13: 00007ffcf5fdd070 R14: 0000000000000000 R15: 0000000000000000\n[  416.007255] Modules linked in: sunrpc intel_rapl_msr intel_rapl_common iosf_mbi sb_edac crct10dif_pclmul crc32_pclmul mousedev ghash_clmulni_intel pcbc aesni_intel psmouse i2c_piix4 crypto_simd cryptd pcspkr glue_helper ip_tables ata_generic pata_acpi cirrus drm_kms_helper syscopyarea sysfillrect sysimgblt fb_sys_fops ttm ata_piix uhci_hcd drm crc32c_intel libata serio_raw i2c_core floppy\n[  416.014226] CR2: ffffb807c2f1aff6\n[  416.014952] ---[ end trace 558647d5169dc4e0 ]---\n[  416.015915] RIP: 0010:__memcpy+0x12/0x20\n[  416.016733] Code: 48 c1 e2 20 48 09 c2 48 31 d3 e9 68 ff ff ff 90 90 90 90 90 90 90 90 90 66 66 90 66 90 48 89 f8 48 89 d1 48 c1 e9 03 83 e2 07 &lt;f3&gt; 48 a5 89 d1 f3 a4 c3 66 0f 1f 44 00 00 48 89 f8 48 89 d1 f3 a4\n[  416.024072] RSP: 0018:ffffb80802097dd8 EFLAGS: 00010202\n[  416.026964] RAX: ffffb807c2f1aff6 RBX: ffff8a85f9593450 RCX: 0000000000000001\n[  416.030291] RDX: 0000000000000002 RSI: ffffffff9b0c231c RDI: ffffb807c2f1aff6\n[  416.033583] RBP: ffffb80842f1b000 R08: ffffffff9b0c231c R09: 0000000000000001\n[  416.036819] R10: ffffe41e47d4fa80 R11: ffffe41e47d4fac0 R12: ffffffff9b0a9cc2\n[  416.040063] R13: ffff8a87a83eaa00 R14: ffffb80802097f10 R15: ffff8a87ad6de700\n[  416.043332] FS:  00007f9ef5d86740(0000) GS:ffff8a87afb40000(0000) knlGS:0000000000000000\n[  416.046754] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033\n[  416.049766] CR2: ffffb807c2f1aff6 CR3: 0000000279c40005 CR4: 00000000000606e0\n[  416.052964] Kernel panic - not syncing: Fatal exception</code></pre><h2 id=\"4rM4I\">问题原因</h2><p id=\"7d9e77e191bsp\">seq_buf_alloc函数的参数是size_t（unsigned long）类型为64位，其他内核函数在使用size_t（unsigned long）参数时，将该参数的类型修改为int类型，导致64位的数字被截断为32位，通过精心构造，该漏洞可实现代码任意执行。在主机内可以用于提权，容器内能够崩溃宿主机或者逃逸。更多说明，请参见<a class=\"\" target=\"_blank\" href=\"https://blog.qualys.com/vulnerabilities-threat-research/2021/07/20/sequoia-a-local-privilege-escalation-vulnerability-in-linuxs-filesystem-layer-cve-2021-33909\">官方文档说明</a>。</p><h2 id=\"AywdZ\">解决方案</h2><p data-spm-anchor-id=\"a2c9r.14518950.0.i4.45975e3brJkwrd\" id=\"7d9e9ef191jkx\">当遇到该问题时，您可以参考以下方案处理：</p><ol id=\"7d9e9ef291wq0\"><li id=\"7d9e9ef391hv2\"><p id=\"7d9e9ef4911k6\">登录ECS实例，详情请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"7d9e9ef591e5g\"><p id=\"7d9e9ef691gpp\">执行以下命令，确认系统内核版本适用此方案。 </p><pre id=\"7d96137191sig\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>uname -r</code></pre><p id=\"7d9ec60091dgv\"> 系统显示类似如下。 </p><ul id=\"7196a8f1cexm0\"><li id=\"6df454e1cenyu\"><p id=\"7886a160ceziy\">Alibaba Cloud Linux 2系统</p><pre id=\"dplgkp\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>4.19.91-21.al7.x86_64</code></pre></li><li id=\"791d8a30ceg8t\"><p id=\"79c82210ceety\">Alibaba Cloud Linux 3系统</p><pre id=\"7d96137291792\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>5.10.60-7.al8.x86_64</code></pre></li></ul></li><li id=\"7d9ec60291sga\"><p id=\"7d9ec603910nb\">请根据系统内核版本，选择以下对应的解决方法： \n</p><section id=\"da0cdac0cf7c7\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"da0d01d0cfw1u\" class=\"section\"><h2 id=\"da0cdac1cflku\">Alibaba Cloud Linux 2系统</h2><ul id=\"01ca7fe2cfj2y\"><li id=\"01ca7fe0cfwyt\"><p id=\"0557ec60cfxu1\">对于4.19.91-19.1.al7.x86_64（不含）版本</p><ol id=\"23b3d5c1cfnsn\"><li id=\"211a8d47cfa7v\"><p id=\"3ce1c200cffye\">更新操作系统版本至最新的内核版本。</p><pre id=\"4076cfa0cfkbw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum update kernel</code></pre></li><li id=\"211a8d44cfyxz\"><p id=\"211a8d45cfoz8\">重启服务器生效。 </p><pre id=\"211a8d46cfe7t\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>reboot</code></pre></li><li id=\"211a8d41cf3pm\"><p id=\"3a2931b0cfiir\">更新内核热补丁。</p><p id=\"211a8d42cfyh6\">若最新内核版本的操作系统同样存在该问题，请参见4.19.91-19.1.al7.x86_64（包含）到4.19.91-24.al7.x86_64（包含）之间版本的解决方案更新内核热补丁。 </p></li></ol></li><li id=\"0b3feab1cfg34\"><p id=\"104fff90cf5kr\">对于4.19.91-19.1.al7.x86_64（包含）到4.19.91-24.al7.x86_64（包含）之间的版本，可通过安装内核热补丁解决，安装命令如下。 </p><pre id=\"197b1af0cfp3r\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install -y kernel-hotfix-5956925-`uname -r | awk -F\"-\" '{print $NF}'`</code></pre></li></ul></section><section id=\"da0d01d3cfqeb\" class=\"section\"><h2 id=\"da0d01d2cflvi\">Alibaba Cloud Linux 3系统</h2><ul id=\"6f38b880cfuzn\"><li id=\"6f38b881cfhfo\"><p id=\"6f38b882cfk6n\">对于kernel-5.10.60-8.al8（不含）之前的版本</p><ol id=\"6f38b883cfl2z\"><li id=\"6f38b884cfndq\"><p id=\"6f38b885cfv76\">更新操作系统版本至最新的内核版本。</p><pre id=\"6f38b886cfz5n\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum update kernel</code></pre></li><li id=\"6f38b887cfkaf\"><p id=\"6f38b888cfann\">重启服务器生效。 </p><pre id=\"6f38b889cflr8\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>reboot</code></pre></li><li id=\"6f38b88acfrmz\"><p id=\"6f38b88bcf2my\">更新内核热补丁。</p><p id=\"6f38b88ccf7wl\">若最新内核版本的操作系统同样存在该问题，请参见kernel-5.10.60-7.al8（含）之前版本的解决方案更新内核热补丁。 </p></li></ol></li><li id=\"6f38b88dcfjep\"><p id=\"6f38b88ecfmky\">对于kernel-5.10.60-7.al8（含）之前的版本，可通过安装内核热补丁解决，安装命令如下。 </p><pre id=\"927a9980cf6iz\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install -y kernel-hotfix-5956925-`uname -r | awk -F\"-\" '{print $NF}'`</code></pre></li></ul></section></section></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-cannot-query-or-configure-the-routing-information-of-an-alibaba-cloud-linux-2-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统的ECS实例无法查询和配置路由信息，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-07 17:12:46</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"e71a4870c67mw\"><p data-tag=\"shortdesc\" id=\"e720b115c69ns\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2系统的ECS实例无法查询和配置路由信息的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"e720b116c6o39\">符合如下条件的ECS实例无法查询和配置路由信息：</p><ul data-spm-anchor-id=\"a2c4e.11153940.0.i6.69842881mAb5k0\" id=\"e720b117c6o5o\"><li data-spm-anchor-id=\"a2c4e.11153940.0.i9.69842881mAb5k0\" id=\"e720d820c61i0\"><p id=\"e720d821c6evy\">镜像：<code data-tag=\"codeph\" class=\"codeph\">aliyun-2.1903-x64-20G-alibase-20190507.vhd</code>及之前所有的版本。</p></li><li data-spm-anchor-id=\"a2c4e.11153940.0.i4.69842881mAb5k0\" id=\"e720d822c61fj\"><p id=\"e720d823c6iu0\">内核：<code data-tag=\"codeph\" class=\"codeph\">kernel-4.19.34-11.al7</code>及之前所有的内核版本。</p></li></ul><p id=\"e720d824c6uq9\">具体的问题现象如下：</p><ul id=\"e720d825c6kgr\"><li id=\"e720d826c6bn9\"><p id=\"e720ff30c62wx\">无法查询创建的路由表信息。操作示例如下： \n</p><div type=\"note\" id=\"e720ff31c6ic1\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"e720ff32c61gp\" class=\"p\">此处的示例信息仅供参考，现场以实际情况为准。\n</p></div></div><ol id=\"e720ff33c67u3\"><li id=\"e720ff34c6vc4\"><p id=\"e720ff35c6k53\">执行以下命令，创建路由表。 </p><pre data-tag=\"codeblock\" id=\"e71a4871c60si\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ip -4 route add default via 192.168.0.253 dev eth1 table 1001</code></pre></li><li id=\"e7212641c6f4a\"><p id=\"e7212642c67nq\">执行以下命令，查看创建的路由表信息。系统未返回创建的路由表信息。 </p><pre data-tag=\"codeblock\" id=\"e71a4872c6mg2\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ip route list table 1001</code></pre></li><li id=\"e7212644c6cvk\"><p id=\"e7212645c6q8d\">再次执行以下命令，尝试创建路由表。 </p><pre data-tag=\"codeblock\" id=\"e71a4873c6976\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ip -4 route add default via 192.168.0.253 dev eth1 table 1001</code></pre><p id=\"e7212646c6js0\"> 系统返回<code data-tag=\"codeph\" class=\"codeph\">File exists</code>的错误信息。 </p><pre data-tag=\"codeblock\" id=\"e71a4874c66k3\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>RTNETLINK answers: File exists</code></pre></li></ol></li><li id=\"e7214d52c6sqk\"><p id=\"e7214d53c6cey\">无法配置策略路由。执行以下命令，配置策略路由，系统返回<code data-tag=\"codeph\" class=\"codeph\">Operation not supported</code>的错误信息。 </p><pre data-tag=\"codeblock\" id=\"e71a4875c6jyw\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ip -4 rule add from 192.168.0.68 loopup 1001</code></pre></li></ul><h2 id=\"4rM4I\">问题原因</h2><p data-spm-anchor-id=\"a2c4e.11153940.0.i23.69842881mAb5k0\" id=\"e7214d55c6112\">策略路由依赖<code data-tag=\"codeph\" class=\"codeph\">CONFIG_IP_MULTIPLE_TABLES</code>模块，在<code data-tag=\"codeph\" class=\"codeph\">kernel-4.19.34-11.al7</code>及之前所有的内核版本中，未开启<code data-tag=\"codeph\" class=\"codeph\">CONFIG_IP_MULTIPLE_TABLES</code>模块。</p><h2 id=\"AywdZ\">解决方案</h2><p data-spm-anchor-id=\"a2c4e.11153940.0.i23.69842881mAb5k0\" id=\"e7217469c69my\">在<code data-tag=\"codeph\" class=\"codeph\">kernel-4.19.36-12.al7.x86_64</code>及之后的内核版本中，配置已启用策略路由所依赖的相关选项，可以解决上述问题。</p><pre data-tag=\"codeblock\" id=\"e71a4876c6n08\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>CONFIG_IP_MULTIPLE_TABLES=y\nCONFIG_IPV6_MULTIPLE_TABLES=y\nCONFIG_IPV6_SUBTREES=y\nCONFIG_FIB_RULES=y\n# CONFIG_NET_VRF is not set</code></pre><p data-spm-anchor-id=\"a2c4e.11153940.0.i23.69842881mAb5k0\" id=\"19257990ceu6k\">因此，请您升级ECS实例的内核至<code data-tag=\"codeph\" class=\"codeph\">kernel-4.19.36-12.al7.x86_64</code>或之后的版本。</p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-local-time-of-an-alibaba-cloud-linux-2-instance-falls-behind-the-time-of-the-ntp-server-after-i-start-or-restart-the-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2镜像的ECS实例启动或重启后系统时间同步存在延迟，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-07 17:14:14</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"b04b5e60c6vo8\"><p data-tag=\"shortdesc\" id=\"b0512ac3c6zex\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2镜像的ECS实例启动或重启后系统时间同步存在延迟的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"b0512ac7c6g7w\">符合如下条件的ECS实例启动或重启后，系统时间与NTP服务器时间一直相差8小时，执行<code data-tag=\"codeph\" data-spm-anchor-id=\"a2c4e.11153940.0.i9.6b82191f4pBjTA\" class=\"codeph\">hwclock -w</code>命令无法更改内核时间。</p><ul id=\"b05151d0c66y5\"><li id=\"b05151d1c6nmo\"><p id=\"b05151d2c6olm\">Alibaba Cloud Linux 2.1903的镜像版本。</p></li><li id=\"b05151d3c6q7z\"><p id=\"b05151d4c61vd\"><code data-tag=\"codeph\" data-spm-anchor-id=\"a2c4e.11153940.0.i7.6b82191f4pBjTA\" class=\"codeph\">kernel-4.19.24-10.al7.x86_64</code>及之前的内核版本。</p></li></ul><h2 id=\"4rM4I\">问题原因</h2><p data-spm-anchor-id=\"a2c4e.11153940.0.i13.6b82191f4pBjTA\" id=\"b05151d5c64v8\">硬件时钟RTC是正确的，同时也设置了<code data-tag=\"codeph\" class=\"codeph\">_set-local-rtc_</code>，但在启动低版本内核系统中没有将时间同步到Local Time（System Time）。</p><h2 id=\"AywdZ\">解决方案</h2><ol id=\"87ce0282d4j9p\"><li id=\"87ce0280d44pg\"><p id=\"866d12f1d44zl\">在内核中开启如下配置。</p><pre data-tag=\"codeblock\" id=\"b04b8570c6c7z\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code># Set system time from RTC on startup and resume\nCONFIG_RTC_HCTOSYS=y\n#  RTC used to set the system time\nCONFIG_RTC_HCTOSYS_DEVICE=\"rtc0\"</code></pre></li><li id=\"9c0a8570d4a6f\"><p id=\"b05178ebc6itc\">在<code data-tag=\"codeph\" class=\"codeph\">/etc/rc.d/rc.local</code>文件中增加<code data-tag=\"codeph\" class=\"codeph\">hwclock --hctosys</code>参数，使得系统在启动过程中同步时间。</p><pre data-tag=\"codeblock\" id=\"b04b8571c6jzb\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>echo \"hwclock --hctosys\" &gt;&gt;/etc/rc.d/rc.local\nchmod +x /etc/rc.d/rc.local</code></pre></li><li id=\"a6c6a110d49h5\"><p data-tag=\"h3\" id=\"b0519ff0c6ct2\" class=\"h3\">（可选）建议您升级内核至<code data-tag=\"codeph\" class=\"codeph\">kernel-4.19.34-11.al7.x86_64</code>及以上版本，彻底解决该问题。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-a-large-number-of-processes-cannot-be-created-on-an-alibaba-cloud-linux-2-ecs-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统的ECS实例创建大量进程失败，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-12 11:10:22</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"cbf212d0c6s91\"><p data-tag=\"shortdesc\" id=\"cbf8c993c6h2f\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2系统的ECS实例创建大量进程失败的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p class=\"from-extensions-error\" id=\"cbf8c997c6rh8\">Alibaba Cloud Linux 2系统的ECS实例中执行系统调用（fork/clone）时，进程创建失败，返回“<code data-tag=\"codeph\" class=\"codeph\">-1 EAGAIN (Resource temporarily unavailable)</code>”错误。一般有如下两种场景：</p><ul id=\"cbf8c998c603o\"><li id=\"cbf8f0a0c6449\"><p id=\"cbf8f0a1c6yi6\">场景一：通过Shell命令交互时，系统返回“<code data-tag=\"codeph\" class=\"codeph\">bash: fork: retry: No child processes</code>”错误。</p></li><li id=\"cbf8f0a2c6n4w\"><p id=\"cbf8f0a3c624l\">场景二：部分应用内创建进程或者线程失败，同时在系统的其他应用中却可以创建成功。</p></li></ul><h2 id=\"4rM4I\">问题原因</h2><p id=\"cbf8f0a4c6ega\">不同的场景，问题原因不同，请根据现场实际情况匹配对应的场景：</p><ul id=\"cbf8f0a5c6cao\"><li id=\"cbf8f0a6c62j2\"><p id=\"cbf8f0a7c6eo3\">场景一：系统用户创建的线程数达到最大值。通过<code data-tag=\"codeph\" class=\"codeph\">ulimit -u</code>命令可查看线程最大值。</p></li><li id=\"cbf8f0a8c6rf9\"><p id=\"cbf8f0a9c6a9g\">场景二：部分应用的运行用户所创建的进程数（nr_user_process）大于应用的进程数限制（app_limit），引发报错。</p></li></ul><h2 id=\"AywdZ\">解决方案</h2><h3 id=\"94fda440d4lxl\"><b>调整系统用户可创建的最大线程数</b></h3><ol id=\"cbf93ec7c6ek6\"><li id=\"cbf93ec8c66q2\"><p id=\"cbf93ec9c6j7v\">切换到root用户，查看进程创建失败用户的所有应用。</p></li><li id=\"cbf93ecac6n9o\"><p id=\"cbf93ecbc68tk\">通过<code data-tag=\"codeph\" class=\"codeph\">kill</code>命令强制关闭占用线程数较多的应用。</p><div type=\"warning\" id=\"2727b090celyi\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p data-tag=\"p\" id=\"cbf965d1c6a8y\" class=\"p\"> <code data-tag=\"codeph\" class=\"codeph\">kill</code>命令属于风险操作，确保操作前为ECS实例创建快照或者备份重要文件，确保数据安全。</p></div></div></li><li id=\"cbf93eccc6cuj\"><p id=\"cbf93ecdc623s\">调整系统用户可创建的最大线程数。 \n</p><pre data-tag=\"codeblock\" id=\"cbf239e0c6bf1\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ulimit -u &lt;$Num_Of_Process&gt;</code></pre><div type=\"note\" id=\"cbf965d3c6cuz\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"cbf965d4c6rwb\" class=\"p\">&lt;$Num_Of_Process&gt;指调整后的最大线程值，建议您合理规划ulimit资源。\n</p></div></div></li></ol><h3 id=\"cbf965d8c6bc6\"><b>调整某个进程的limit资源 \n</b></h3><ol id=\"cbf965d9c6vt4\"><li id=\"cbf965dac6wwx\"><p id=\"cbf98ce0c6dk3\">安装util-linux工具。 </p><pre data-tag=\"codeblock\" id=\"cbf239e1c6lj6\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install -y util-linux</code></pre><div type=\"note\" id=\"cbf98ce1c69w4\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"cbf98ce2c6uva\" class=\"p\">如果已安装该工具，可跳过本步骤。\n</p></div></div></li><li id=\"cbf98ce4c693o\"><p id=\"cbf98ce5c6r3h\">调整进程的limit资源。 </p><pre data-tag=\"codeblock\" id=\"cbf239e2c6hpg\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>prlimit --pid &lt;$PID&gt; --nproc=unlimited</code></pre><div type=\"note\" id=\"cbf98ce6c6s5a\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"cbf98ce7c6sdb\" class=\"p\">&lt;$PID&gt;指进程或线程创建失败的进程PID。\n</p></div></div></li></ol><p id=\"cbf98cebc6u5g\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/fix-the-cve-2021-22555-vulnerability-in-an-alibaba-cloud-linux-2-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统的CVE-2021-22555安全漏洞内核热补丁修复方案</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-04 14:35:24</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"87438600c6edp\"><p data-tag=\"shortdesc\" id=\"8749eea1c6eks\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2系统的CVE-2021-22555安全漏洞内核热补丁修复方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"8749eea2c6yon\">在符合如下条件的Alibaba Cloud Linux 2实例中，存在CVE-2021-22555安全漏洞，系统运行时出现系统宕机问题，且出现如下调用栈信息。</p><ul id=\"8749eea3c65g1\"><li id=\"8749eea4c6pg9\"><p id=\"8749eea5c640z\">镜像：Alibaba Cloud Linux 2.1903 LTS 64位。</p></li><li id=\"8749eea6c6j92\"><p id=\"874a15b0c6940\">内核：kernel-4.19.91-24.al7及之前的内核版本。</p></li></ul><pre data-tag=\"codeblock\" id=\"87438601c6601\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>[  104.019092] x_tables: ip6_tables: icmp6.0 match: invalid size 8 (kernel) != (user) 212\n[  104.020124] BUG: unable to handle kernel paging request at ffff9879000004b8\n[  104.020783] PGD 19a01067 P4D 19a01067 PUD 0 \n[  104.021177] Oops: 0000 [#1] SMP PTI\n[  104.021526] CPU: 0 PID: 94 Comm: kworker/u4:1 Kdump: loaded Tainted: G           O  K   4.19.91-23.al7.x86_64 #1\n[  104.022389] Hardware name: Alibaba Cloud Alibaba Cloud ECS, BIOS 8c24b4c 04/01/2014\n[  104.023081] Workqueue: netns cleanup_net\n[  104.023450] RIP: 0010:netdev_queue_release+0x55/0xa0\n[  104.023892] Code: 48 ab 74 0a c7 07 00 00 00 00 48 83 c7 04 40 f6 c6 02 74 0a 31 c0 48 83 c7 02 66 89 47 fe 83 e6 01 74 03 c6 07 00 49 8b 40 e8 &lt;48&gt; 8b 80 b8 04 00 00 65 ff 08 c3 49 8d 78 01 41 c6 00 00 40 b6 3f\n[  104.025531] RSP: 0018:ffffa538804d3cc8 EFLAGS: 00010246\n[  104.025982] RAX: ffff987900000000 RBX: ffff9879bb277a18 RCX: 0000000000000000\n[  104.026638] RDX: ffff9879bb8b30c0 RSI: 0000000000000000 RDI: ffff9879bb277a58\n[  104.027374] RBP: ffffffffb615b0e0 R08: ffff9879bb277a18 R09: ffffffffb5323ef3\n[  104.028052] R10: ffff9879bda273a0 R11: fffff43400d73100 R12: ffff9879bbf73a20\n[  104.029397] R13: ffff9879bb277a18 R14: 0000000000000000 R15: ffffa538804d3e38\n[  104.030741] FS:  0000000000000000(0000) GS:ffff9879bda00000(0000) knlGS:0000000000000000\n[  104.032082] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033\n[  104.033189] CR2: ffff9879000004b8 CR3: 000000001720a001 CR4: 00000000003606f0\n[  104.034463] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000\n[  104.035894] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400\n[  104.037090] Call Trace:\n[  104.038012]  kobject_put+0x81/0x1b0\n[  104.039167]  netdev_queue_update_kobjects+0xbd/0x140\n[  104.040359]  netdev_unregister_kobject+0x58/0x80\n[  104.041462]  rollback_registered_many+0x2d5/0x550\n[  104.042593]  ? netdev_run_todo+0x4d/0x2c0\n[  104.043678]  unregister_netdevice_many+0x17/0x70\n[  104.044853]  default_device_exit_batch+0x131/0x150\n[  104.045998]  ? do_wait_intr_irq+0xb0/0xb0\n[  104.047282]  cleanup_net+0x1a9/0x2a0\n[  104.048323]  process_one_work+0x15b/0x370\n[  104.049384]  worker_thread+0x49/0x3e0\n[  104.050406]  kthread+0xf8/0x130\n[  104.051396]  ? process_one_work+0x370/0x370\n[  104.052646]  ? kthread_park+0xb0/0xb0\n[  104.053970]  ret_from_fork+0x35/0x40\n[  104.055143] Modules linked in: tcp_diag inet_diag xt_NFQUEUE ip6_tables intel_rapl_msr intel_rapl_common iosf_mbi isst_if_common nfit crct10dif_pclmul crc32_pclmul ghash_clmulni_intel pcbc aesni_intel crypto_simd cryptd glue_helper kpatch_5902278(OK) psmouse mousedev pcspkr kpatch(O) pvpanic i2c_piix4 sunrpc ip_tables ata_generic pata_acpi cirrus drm_kms_helper syscopyarea sysfillrect sysimgblt fb_sys_fops ttm drm ata_piix crc32c_intel serio_raw uhci_hcd i2c_core libata floppy [last unloaded: kpatch_xfkpQ0nwgmO]\n[  104.064254] CR2: ffff9879000004b8\n[  104.065832] ---[ end trace 7a2c6cfbc71f5ecf ]---\n[  104.067687] RIP: 0010:netdev_queue_release+0x55/0xa0\n[  104.069192] Code: 48 ab 74 0a c7 07 00 00 00 00 48 83 c7 04 40 f6 c6 02 74 0a 31 c0 48 83 c7 02 66 89 47 fe 83 e6 01 74 03 c6 07 00 49 8b 40 e8 &lt;48&gt; 8b 80 b8 04 00 00 65 ff 08 c3 49 8d 78 01 41 c6 00 00 40 b6 3f\n[  104.073459] RSP: 0018:ffffa538804d3cc8 EFLAGS: 00010246\n[  104.075654] RAX: ffff987900000000 RBX: ffff9879bb277a18 RCX: 0000000000000000\n[  104.077569] RDX: ffff9879bb8b30c0 RSI: 0000000000000000 RDI: ffff9879bb277a58\n[  104.079289] RBP: ffffffffb615b0e0 R08: ffff9879bb277a18 R09: ffffffffb5323ef3\n[  104.081150] R10: ffff9879bda273a0 R11: fffff43400d73100 R12: ffff9879bbf73a20\n[  104.083570] R13: ffff9879bb277a18 R14: 0000000000000000 R15: ffffa538804d3e38\n[  104.085397] FS:  0000000000000000(0000) GS:ffff9879bda00000(0000) knlGS:0000000000000000\n[  104.087283] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033\n[  104.088899] CR2: ffff9879000004b8 CR3: 000000001720a001 CR4: 00000000003606f0\n[  104.090584] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000\n[  104.092251] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400\n[  104.093895] Kernel panic - not syncing: Fatal exception\n[  104.099305] Kernel Offset: 0x34000000 from 0xffffffff81000000 (relocation range: 0xffffffff80000000-0xffffffffbfffffff)</code></pre><h2 id=\"4rM4I\">问题原因</h2><p id=\"874a15b2c6c2r\">Linux内核的Netfilter模块在实现IPT_SO_SET_REPLACE或IP6T_SO_SET_REPLACE setsockopt时存在堆越界写入漏洞，该漏洞将允许本地用户通过用户名空间获取权限提升，该漏洞在KCTF中被用于攻击Kubernetes集群中的Pod容器，从而导致实现虚拟化逃逸。该漏洞已在Linux内核中存在15年。更多说明请参见<a class=\"\" target=\"_blank\" href=\"https://github.com/google/security-research/security/advisories/GHSA-xxx5-8mvq-3528\">Linux: Heap Out-Of-Bounds Write in xt_compat_target_from_user</a>。</p><h2 id=\"AywdZ\">解决方案</h2><p data-spm-anchor-id=\"a2c9r.14518950.0.i4.45975e3brJkwrd\" id=\"874a3cc5c609y\">当遇到该问题时，您可以参考以下方案处理。</p><ol id=\"874a3cc6c6h04\"><li id=\"874a3cc7c6pgi\"><p id=\"874a3cc8c6dyd\">登录ECS实例，详情请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"874a63d0c6p8u\"><p id=\"874a63d1c65pg\">执行以下命令，确认系统内核版本。 </p><pre data-tag=\"codeblock\" id=\"87438602c67hg\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>uname -r</code></pre><p id=\"874a63d2c64f6\"> 系统显示类似如下。 </p><pre data-tag=\"codeblock\" id=\"87438603c6t3m\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code> 4.19.91-21.al7.x86_64</code></pre></li><li id=\"874a63d4c6cz7\"><p id=\"874a63d5c67qj\">请根据系统内核版本，选择以下对应的解决方法： \n </p><ul id=\"874a63d6c60fg\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i11.24dc5e3bm0FMyr\" id=\"874a63d7c6lmc\"><p id=\"874a63d8c6rnh\">4.19.91-19.1.al7.x86_64（不含）之前的版本 \n </p><ol id=\"874a63d9c64jl\"><li id=\"874a63dac69it\"><p id=\"874a63dbc6x88\">更新操作系统版本至最新的内核版本。 </p><pre data-tag=\"codeblock\" id=\"87438604c6yei\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum update kernel</code></pre></li><li id=\"874a8ae1c6qps\"><p id=\"874a8ae2c6h28\">重启服务器生效。 </p><pre data-tag=\"codeblock\" id=\"87438605c6c3k\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>reboot</code></pre></li><li id=\"874a8ae4c6ir2\"><p id=\"874a8ae5c6zzh\">若最新内核版本的操作系统同样存在该问题，请参见4.19.91-19.1.al7.x86_64（包含）到4.19.91-24.al7.x86_64（包含）之间版本的解决方案更新内核热补丁。</p></li></ol></li><li id=\"874a8ae7c6pj8\"><p id=\"874a8ae8c6jt4\">对于4.19.91-19.1.al7.x86_64（包含）到4.19.91-24.al7.x86_64（包含）之间的版本，可通过安装内核热补丁解决，安装命令如下。 </p><pre data-tag=\"codeblock\" id=\"87438606c6v2e\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install -y kernel-hotfix-5928799-`uname -r | awk -F\"-\" '{print $NF}'`</code></pre></li></ul></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-system-prompts-fatal-mm-request-send-write-broken-pipe-error-when-the-ssh-service-runs-abnormally-caused-by-viruses", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/ssh-remote-connection-problems/\">SSH远程连接问题</a></span>\n <span>在Linux系统的ECS实例执行SSH命令时，提示“fatal: mm_request_send: write: Broken pipe”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在Linux系统的ECS实例执行SSH命令时，提示“fatal: mm_request_send: write: Broken pipe”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-01 17:54:03</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"ec482060a30iv\"><p data-tag=\"shortdesc\" id=\"ec4f7367a3wvl\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中执行SSH命令时，提示“<b data-tag=\"uicontrol\" id=\"c9ac26e0a3cnp\" class=\"uicontrol\">fatal: mm_request_send: write: Broken pipe</b>”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"2092d090a3aeg\" class=\"section\"><h2 id=\"pjdAF\">问题现象</h2><p id=\"ec4f9a73a3hpw\">在Linux系统的ECS实例中执行SSH命令时，提示“<b data-tag=\"uicontrol\" id=\"c7854f40a3sdx\" class=\"uicontrol\">fatal: mm_request_send: write: Broken pipe</b>”错误。</p></section><section id=\"1cefe040a3i7r\" class=\"section\"><h2 id=\"hBMtB\">问题原因</h2><p id=\"ec4f9a75a3dbj\">该问题可能是udev-fall等病毒导致SSH服务运行异常。</p></section><section id=\"e4e04360a3tr5\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"125253b1a31ji\">您可以通过临时处理方法（终止病毒进程）或彻底解决方法（使用快照回滚云盘方式）解决该问题。</p><section id=\"f6b84970a38v9\" class=\"section\"><h3 id=\"16f0c219\"><b>方法一：临时处理方法</b></h3><p id=\"ec4fc185a3k7g\">本文以udev-fall病毒为例，临时恢复SSH服务的正常运行。</p><ol id=\"ec4fc186a3ibb\"><li id=\"ec4fc187a3vyt\"><p id=\"ec4fc188a3nfi\">通过VNC连接Linux实例。</p><p id=\"3eeaf3f2a3j9l\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"41462201a3upw\"><p id=\"41462200a37dp\">执行如下命令，查看udev-fall病毒进程信息，并记录该进程ID。 </p><pre data-tag=\"codeblock\" id=\"ec482061a3p1f\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ps aux | grep udev-fall</code></pre></li><li id=\"ec4fc18aa32wu\"><p id=\"ec4fc18ba3ty6\">执行如下命令，结束udev-fall病毒进程。 </p><pre data-tag=\"codeblock\" id=\"ec482062a38w6\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>kill -9 [$PID]    # [$PID]表示上一步获取的udev-fall病毒进程ID。</code></pre></li><li id=\"ec4fe892a3hub\"><p id=\"ec4fe893a3ekp\">执行如下命令，取消udev-fall病毒程序的自动运行设置。 </p><pre data-tag=\"codeblock\" id=\"ec482063a3d76\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chkconfig udev-fall off</code></pre></li><li id=\"ec4fe895a3znx\"><p id=\"ec4fe896a3118\">执行如下命令，删除所有udev-fall病毒程序相关指令和启动配置。 </p><pre data-tag=\"codeblock\" id=\"ec482064a3sq4\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>for i in ` find / -name \"udev-fall\"`;\ndo echo '' &gt; $i &amp;&amp; rm -rf $i;\ndone</code></pre></li><li id=\"ec4fe898a3ocj\"><p id=\"ec4fe899a33am\">执行如下命令，重启SSH服务。 \n</p><pre data-tag=\"codeblock\" id=\"ec482065a3vwl\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart sshd.service</code></pre></li></ol></section><section id=\"04d6c9f0a3v01\" class=\"section\"><h3 data-tag=\"h3\" id=\"ec4fe89ea3jcw\" class=\"h3\"><b>方法二：</b><b>彻底解决方法</b></h3><p id=\"ec4fe89fa3tg9\">由于无法明确病毒或者恶意入侵者是否对系统做过其他篡改，是否隐藏了其他病毒文件，因此为了服务器的长期稳定运行，建议您通过回滚云盘快照的方式，将服务器恢复到正常状态。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/roll-back-a-disk-by-using-a-snapshot-1\">使用快照回滚云盘</a>。</p><div id=\"4d2f7d90a3yey\" type=\"important\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"46dfe3d0a3e7b\">回滚云盘是不可逆操作，从快照的创建日期到回滚云盘时这段时间内的数据会丢失。为避免误操作，建议您在回滚前为云盘创建一份快照备份数据。</p></div></div></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-yum-commands-cannot-be-run-on-an-alibaba-cloud-linux-2-ecs-instance-that-resides-in-the-classic-network", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统的经典网络ECS实例无法执行yum命令，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-07 11:41:11</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"2d2f784065ue9\"><p data-tag=\"shortdesc\" id=\"2d325e7165klr\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2系统的经典网络ECS实例无法执行yum命令的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"2d325e72658as\">符合如下条件的ECS实例执行<code data-tag=\"code\" class=\"code\">yum update</code>命令失败，返回仓库（repo）地址无效的提示。</p><ul id=\"2d325e73654ns\"><li id=\"2d325e7465tvv\"><p id=\"2d325e7565bt7\">镜像：<code data-tag=\"code\" class=\"code\">aliyun-2.1903-x64-20G-alibase-20190327.vhd</code>及之后所有版本。</p></li><li id=\"2d325e7665ihu\"><p id=\"2d325e7765rvk\">内核：<code data-tag=\"code\" class=\"code\">kernel-4.19.24-9.al7</code>及之后所有内核版本。</p></li><li id=\"2d325e7865hf7\"><p id=\"2d325e79659wo\">网络：经典网络。</p></li></ul><h2 id=\"4rM4I\">问题原因</h2><p id=\"2d325e7a65ogd\">Alibaba Cloud Linux 2系统的经典网络ECS实例非阿里云官方支持的场景，可能无法连接默认YUM仓库文件中的地址。</p><h2 id=\"AywdZ\">解决方案</h2><ol id=\"2d32858765uih\"><li data-spm-anchor-id=\"a2c4e.11153940.0.i10.2ac35231ZbeSmJ\" id=\"2d32858865ucn\"><p id=\"2d32858965e8c\">登录目标ECS实例。</p></li><li data-spm-anchor-id=\"a2c4e.11153940.0.i10.2ac35231ZbeSmJ\" id=\"2d32858a650nn\"><p id=\"2d32858b65ja2\">修改<code data-tag=\"code\" class=\"code\">/etc/yum.repos.d/aliyun-base.repo</code>配置文件，修改后的内容如下。 \n</p><div type=\"note\" id=\"2d32858c65x2t\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"2d32858d650b7\">如果该配置文件不存在，需先创建该文件。\n</p></div></div><pre id=\"2d2f784165ai2\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>[base]\nname=AliYun-$releasever - Base - mirrors.aliyun.com\nbaseurl=http://mirrors.aliyun.com/alinux/$releasever/os/$basearch/\ngpgcheck=1\ngpgkey=http://mirrors.aliyun.com/alinux/RPM-GPG-KEY-ALIYUN\n\n#released updates\n[updates]\nname=AliYun-$releasever - Updates - mirrors.aliyun.com\nbaseurl=http://mirrors.aliyun.com/alinux/$releasever/updates/$basearch/\ngpgcheck=1\ngpgkey=http://mirrors.aliyun.com/alinux/RPM-GPG-KEY-ALIYUN\n\n#additional packages that may be useful\n[extras]\nname=AliYun-$releasever - Extras - mirrors.aliyun.com\nbaseurl=http://mirrors.aliyun.com/alinux/$releasever/extras/$basearch/\ngpgcheck=1\ngpgkey=http://mirrors.aliyun.com/alinux/RPM-GPG-KEY-ALIYUN\n\n# plus packages provided by Aliyun Linux dev team\n[plus]\nname=AliYun-$releasever - Plus - mirrors.aliyun.com\nbaseurl=http://mirrors.aliyun.com/alinux/$releasever/plus/$basearch/\ngpgcheck=1\ngpgkey=http://mirrors.aliyun.com/alinux/RPM-GPG-KEY-ALIYUN</code></pre></li><li data-spm-anchor-id=\"a2c4e.11153940.0.i10.2ac35231ZbeSmJ\" id=\"2d32859065pnn\"><p id=\"2d328591651o7\">删除<code data-tag=\"code\" class=\"code\">/etc/yum.repos.d/</code>目录下的其他<code data-tag=\"code\" class=\"code\">.repo</code>的配置文件。例如：<code data-tag=\"code\" class=\"code\">/etc/yum.repos.d/epel.repo</code>。</p></li><li id=\"459daa30d4ohw\"><p data-spm-anchor-id=\"0.0.0.i24.af05cHEocHEo3e\" id=\"2d3285936534b\">（可选）经典网络的ECS实例非阿里云官方支持的场景，建议您更换ECS实例的网络类型为VPC网络，彻底解决该问题。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/vpc/use-cases/overview-3\">经典网络迁移至VPC网络</a>。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-return-value-of-the-send-q-parameter-is-0-after-the-ss-command-is-run-on-an-alibaba-cloud-linux-2-ecs-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统的ECS实例执行ss命令时返回的Send-Q字段值为0，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-07 17:14:29</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"2cf27da0c6s4s\"><p data-tag=\"shortdesc\" id=\"2cf89825c6tcs\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2系统的ECS实例执行ss命令时返回的Send-Q字段值为0的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p data-spm-anchor-id=\"a2c4e.11153940.0.i10.6aced114CAb5dY\" id=\"2cf89826c6p2s\">在符合如下条件的ECS实例中执行<code data-tag=\"codeph\" class=\"codeph\">ss -lnt</code>命令时，返回的Send-Q字段值为0。</p><ul id=\"2cf8bf30c6004\"><li data-spm-anchor-id=\"a2c4e.11153940.0.i10.6aced114CAb5dY\" id=\"2cf8bf31c6cr3\"><p id=\"2cf8bf32c6mxm\">镜像：<code data-tag=\"codeph\" class=\"codeph\">aliyun-2.1903-x64-20G-alibase-20190507.vhd</code>及之前的版本。</p></li><li data-spm-anchor-id=\"a2c4e.11153940.0.i10.6aced114CAb5dY\" id=\"2cf8bf33c6zdl\"><p id=\"2cf8bf34c6ota\">内核：<code data-tag=\"codeph\" class=\"codeph\">kernel-4.19.43-13.al7.x86_64</code>及之前的内核版本。</p></li></ul><p data-spm-anchor-id=\"a2c4e.11153940.0.i10.6aced114CAb5dY\" id=\"2cf8bf35c6767\">系统显示类似如下。</p><pre data-tag=\"codeblock\" id=\"2cf27da1c6r70\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code># ss -lnt\nState       Recv-Q Send-Q                            Local Address:Port                                           Peer Address:Port\nLISTEN      0      0                                             *:35107                                                     *:*\nLISTEN      0      0                                             *:38727                                                     *:*\nLISTEN      0      0                                             *:5355                                                      *:*\nLISTEN      0      0                                             *:111                                                       *:*</code></pre><p id=\"2cf8bf36c6x6e\">而查看ss命令的说明会发现，对于监听中（listening）的TCP socket，Send-Q字段表示该Socket的syn backlog最大值。在Linux系统中，该字段实际输出该listening socket全连接队列的最大容量，所以其值不应该为0。</p><pre data-tag=\"codeblock\" id=\"2cf27da2c6fx3\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Send-Q\n       Established:  The  count  of bytes not acknowledged by the remote host.  \n       Listening: Since Kernel 2.6.18 this column contains the maximum\n       size of the syn backlog.</code></pre><h2 id=\"4rM4I\">问题原因</h2><p id=\"73698790cdj8h\"><code data-tag=\"codeph\" class=\"codeph\">kernel-4.19.43-13.al7.x86_64</code>及之前的内核版本未集成tcp_diag模块，因此ss命令会回退到<code data-tag=\"codeph\" class=\"codeph\">/proc/net/tcp</code>模式，而<code data-tag=\"codeph\" class=\"codeph\">/proc/net/tcp</code>接口（不推荐使用）输出结果中listening TCP socket的tx_queue字段值均为0，从而导致<code data-tag=\"codeph\" class=\"codeph\">ss -lnt</code>命令输出的Send-Q字段值也为0。详情可参见<a class=\"\" target=\"_blank\" href=\"https://www.kernel.org/doc/Documentation/networking/proc_net_tcp.txt\">/proc/net/tcp接口介绍文档</a>。</p><p id=\"72fa7210cdbeq\"><code data-tag=\"codeph\" data-spm-anchor-id=\"a2c4e.11153940.0.i15.6aced114CAb5dY\" class=\"codeph\">ss -lnt</code>命令输出的Send-Q字段表示listening TCP socket全连接队列的最大容量。用户态network相关的工具套件有net-tools与iproute2两种，其中net-tools自2001年已经停止维护，取而代之的是iproute2套件。而ss命令正是iproute2套件的一部分，net-tools中与ss实现类似功能的则是netstat命令。ss命令与netstat命令获取网络信息的区别如下：</p><ul id=\"2cf8e641c6d37\"><li id=\"2cf8e642c6vqy\"><p id=\"2cf8e643c67xk\">netstat通过<code data-tag=\"codeph\" class=\"codeph\">/proc/net/tcp</code>接口获取TCP socket的相关统计信息。</p></li><li id=\"2cf8e644c6zp0\"><p id=\"2cf8e645c62wu\">ss默认使用socket接口与tcp_diag内核模块通讯，获取TCP socket的相关统计信息。当内核不支持tcp_diag内核模块时，会回退到<code data-tag=\"codeph\" class=\"codeph\">/proc/net/tcp</code>模式。</p></li></ul><h2 id=\"AywdZ\">解决方案</h2><p id=\"2cf93465c6tkk\">升级ECS实例的内核到<code data-tag=\"codeph\" class=\"codeph\">kernel-4.19.43-13.1.al7.x86_64</code>及之后的版本。</p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-cannot-upgrade-the-kernel-of-an-alibaba-cloud-linux-2-ecs-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统的ECS实例升级内核失败，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-07 17:12:39</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"ead6a9a0c6oju\"><p data-tag=\"shortdesc\" id=\"eadceb36c6p3g\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2系统的ECS实例升级内核失败的原因及解决办法。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"XbeWY\">问题描述</h2><p id=\"eadd1240c67jh\">在符合如下条件的Alibaba Cloud Linux 2实例升级内核时，提示grubby报错，具体报错信息如下所示。且内核升级后，grub启动项不能自动更新，新内核功能不生效。</p><ul data-spm-anchor-id=\"a2c4g.11186623.2.i0.3fde4c07YHGjZd\" id=\"eadd1241c6ziw\"><li data-spm-anchor-id=\"a2c4e.11153940.0.i5.655046d0UoNo9y\" id=\"eadd1242c67ab\"><p id=\"eadd1243c6bu7\">镜像：aliyun_2_1903_x64_20G_alibase_20200114.qboot.vhd镜像（以下简称qboot镜像）。</p></li><li data-spm-anchor-id=\"a2c4e.11153940.0.i5.655046d0UoNo9y\" id=\"eadd1244c6480\"><p id=\"eadd1245c6avm\">内核：4.19.81-17.al7.x86_64内核版本。</p></li></ul><pre data-tag=\"codeblock\" id=\"ead6a9a1c65fc\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>kernel-4.19.91-19.2.al7.x86_64.rpm                                                                                         |  14 MB  00:00:00\nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\nWarning: RPMDB altered outside of yum.\n  Installing : kernel-4.19.91-19.2.al7.x86_64                                                                              1/1\ngrubby fatal error: unable to find a suitable template\n\nBroadcast message from systemd-journald@iZbp1XXXXtbay7jZ (Fri 2020-07-31 15:38:45 CST):\n\ndracut[2183]: Failed to install module xen_blkfront</code></pre><h2 id=\"tayMx\">问题原因</h2><p data-lake-id=\"1ed9700011efe3b9b510fe714f83133e\" id=\"eadd3950c6gxv\">因为qboot镜像启动优化去除了initramfs过程，导致实例启动后出现以下情况：</p><ul data-lake-id=\"9931b6e247dd3f155aba63b675a94508\" id=\"eadd3951c65fu\"><li data-lake-id=\"b30d8a6b5e8bd17c3a9573dd083d7647\" id=\"eadd3952c683i\"><p id=\"eadd3953c6pze\"><code data-tag=\"codeph\" class=\"codeph\">/proc/mounts</code>中<code data-tag=\"codeph\" class=\"codeph\">/</code>根目录的挂载设备为<code data-tag=\"codeph\" class=\"codeph\">/dev/root</code>。</p></li><li data-lake-id=\"43da14a2b1b80ea7be754c6ac9865d99\" id=\"eadd3954c6m4l\"><p id=\"eadd3955c6sin\">系统没有正确创建软链接<code data-tag=\"codeph\" class=\"codeph\">/dev/root</code>。</p></li></ul><p id=\"eadd6060c6snh\">因此在内核升级过程中，grubby脚本无法正确识别根分区挂载的设备，即升级过程中无法正确更新grub配置信息。</p><h2 id=\"EFTFF\">解决方案</h2><h3 id=\"7db46300d5xko\"><b>方案一：临时修复</b></h3><ul data-lake-id=\"dcbd1484a926347cbe1db7d114a8483e\" id=\"eadd8772c6k7g\"><li id=\"5cfa1741d5it5\"><p data-tag=\"h4\" id=\"eadd8778c67tp\" class=\"h4\"><b>修复“grubby fatal error”问题</b></p></li><ul id=\"e5cedc72cegtc\"><li id=\"e5cedc70ceexm\"><p id=\"d90ae2e0ceimr\"><b>临时修复</b></p><p id=\"ef762cb0cetg3\">执行以下命令，创建<code data-tag=\"codeph\" class=\"codeph\">/dev/root</code>软链接。</p><pre id=\"x3dedg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ln -sf /dev/vda1 /dev/root</code></pre></li><li id=\"e8df50c1ceq9y\"><p id=\"e8df50c0ce0zk\"><b>持久修复</b></p><p id=\"030f91d0cev2t\">执行以下命令，新建udev rule自动创建<code data-tag=\"codeph\" class=\"codeph\">/dev/root</code>软链接。</p></li></ul></ul><pre data-tag=\"codeblock\" id=\"ead6d0b1c68lf\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sed -i '/ACTION==\"remove\"/a\\\\n# create symbol link for /dev/root\\nACTION!=\"remove\", SUBSYSTEM==\"block\", ENV{MAJOR}==\"254\", ENV{MINOR}==\"1\", SYMLINK+=\"root\"' /usr/lib/udev/rules.d/60-persistent-storage.rules</code></pre><li id=\"c7d6e950cdavm\"><p data-tag=\"h4\" id=\"eaddae81c6q5x\" class=\"h4\"><b>修复“dracut failure”问题</b></p><p data-lake-id=\"848cfd5b2309a9a5110156f36eab39ee\" id=\"eaddae82c66ca\">执行以下命令，删除不必要的dracut配置文件。</p><pre data-tag=\"codeblock\" id=\"ead6d0b2c6dzf\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>rm -rf /etc/dracut.conf.d/*</code></pre></li><h3 id=\"3d103ae0d52tv\"><b>方案二：升级镜像</b></h3><p id=\"eaddae84c6ubs\">该问题在aliyun_2_1903_x64_20G_qboot_alibase_20200904.vhd版本的qboot镜像中已修复，您使用新镜像即可。</p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-a-memory-leak-occurs-on-the-intel-sgx-driver-of-an-alibaba-cloud-linux-2-ecs-instance-in-specific-cases", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统的ECS实例中SGX驱动在特定情况下存在内存泄露问题，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-07 17:12:54</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"4f4e4460c6ao8\"><p data-tag=\"shortdesc\" id=\"4f5485f5c6s1m\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2系统的ECS实例中SGX驱动在特定情况下存在内存泄露问题的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"4f5485f6c6t69\">在符合如下条件的Alibaba Cloud Linux 2实例中，SGX驱动在特定情况下存在内存泄露问题，最终导致系统内存耗尽，绝大部分内存被SGX的测试进程APP给占用，出现类似如下提示。</p><ul id=\"4f5485f7c6er5\"><li id=\"4f5485f8c6s0r\"><p id=\"4f54ad00c6eha\">镜像：Alibaba Cloud Linux 2.1903 LTS 64位。</p></li><li id=\"4f54ad01c682d\"><p id=\"4f54ad02c6yfp\">内核：kernel-4.19.91-23.al7及之前的内核版本。</p></li><li id=\"4f54ad03c6pjc\"><p id=\"4f54ad04c6a1v\">ECS实例类型：c7t、r7t、g7t。</p></li></ul><pre data-tag=\"codeblock\" id=\"4f4e4461c650i\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>[   71.938733] systemd-journal invoked oom-killer: gfp_mask=0x6200ca(GFP_HIGHUSER_MOVABLE), nodemask=(null), order=0, oom_score_adj=0\n[   71.938735] systemd-journal cpuset=/ mems_allowed=0\n[   71.938738] CPU: 0 PID: 415 Comm: systemd-journal Not tainted 4.19.91-23.al7.x86_64 #1\n[   71.938738] Hardware name: Alibaba Cloud Alibaba Cloud ECS, BIOS 0.0.0 02/06/2015\n[   71.938739] Call Trace:\n[   71.938746]  dump_stack+0x66/0x8b\n[   71.938749]  dump_global_header+0x12/0x10f\n[   71.938750]  oom_kill_process+0x2cf/0x310\n[   71.938752]  out_of_memory+0xf7/0x4c0\n[   71.938754]  __alloc_pages_nodemask+0xf07/0xfd0\n[   71.938757]  ? blk_flush_plug_list+0xd7/0x220\n[   71.938759]  pagecache_get_page+0x8c/0x350\n[   71.938761]  filemap_fault+0x37e/0x6e0\n[   71.938764]  ext4_filemap_fault+0x2c/0x3b\n[   71.938766]  __do_fault+0x38/0x170\n[   71.938768]  do_fault+0x2eb/0x640\n[   71.938769]  __handle_mm_fault+0x621/0xa20\n[   71.938772]  ? apic_timer_interrupt+0xa/0x20\n[   71.938774]  handle_mm_fault+0x106/0x1c0\n[   71.938776]  __do_page_fault+0x1ba/0x480\n[   71.938778]  do_page_fault+0x32/0x140\n[   71.938780]  ? async_page_fault+0x8/0x30\n[   71.938781]  async_page_fault+0x1e/0x30\n[   71.938782] RIP: 0033:0x55a1ca49516f\n[   71.938786] Code: Bad RIP value.\n[   71.938787] RSP: 002b:00007ffcd58b22b0 EFLAGS: 00010246\n[   71.938788] RAX: 0000000000000000 RBX: 000055a1cbcc4400 RCX: a1fcdcf819d7e1e5\n[   71.938788] RDX: 00007f3d4d72a000 RSI: 000055a1cbcc2060 RDI: 000055a1cbcc4400\n[   71.938789] RBP: a1fcdcf819d7e1e5 R08: 00007ffcd58b23b0 R09: 00007ffcd58b23a8\n[   71.938790] R10: 000055a1ca49a935 R11: 00000000d1ba4319 R12: 000055a1cbcc4400\n[   71.938790] R13: 0000000000000011 R14: 000055a1cbcc2060 R15: a1fcdcf819d7e1e5\n[   71.938791] Task in / killed as a result of limit of host\n[   71.938792] Mem-Info:\n[   71.938795] active_anon:85 inactive_anon:410619 isolated_anon:0\n active_file:150 inactive_file:353 isolated_file:0\n unevictable:0 dirty:0 writeback:0 unstable:0\n slab_reclaimable:6038 slab_unreclaimable:17336\n mapped:98 shmem:403568 pagetables:1793 bounce:0\n free:12881 free_pcp:440 free_cma:0\n[   71.938797] Node 0 active_anon:340kB inactive_anon:1642476kB active_file:600kB inactive_file:1412kB unevictable:0kB isolated(anon):0kB isolated(file):0kB mapped:392kB dirty:0kB writeback:0kB shmem:1614272kB shmem_thp: 0kB shmem_pmdmapped: 0kB anon_thp: 2048kB writeback_tmp:0kB unstable:0kB all_unreclaimable? no\n[   71.938798] Node 0 DMA free:7408kB min:392kB low:488kB high:584kB active_anon:0kB inactive_anon:8312kB active_file:0kB inactive_file:0kB unevictable:0kB writepending:0kB present:15996kB managed:15908kB mlocked:0kB kernel_stack:0kB pagetables:16kB bounce:0kB free_pcp:0kB local_pcp:0kB free_cma:0kB\n[   71.938800] lowmem_reserve[]: 0 1761 1761 1761 1761\n[   71.938801] Node 0 DMA32 free:44116kB min:44660kB low:55824kB high:66988kB active_anon:340kB inactive_anon:1633492kB active_file:688kB inactive_file:1812kB unevictable:0kB writepending:0kB present:1914960kB managed:1826408kB  mlocked:0kB kernel_stack:2208kB pagetables:7156kB bounce:0kB free_pcp:1760kB local_pcp:1396kB free_cma:0kB\n[   71.938804] lowmem_reserve[]: 0 0 0 0 0\n[   71.938805] Node 0 DMA: 0*4kB 2*8kB (UM) 2*16kB (UE) 0*32kB 1*64kB (E) 3*128kB (UME) 3*256kB (UME) 2*512kB (ME) 3*1024kB (UME) 1*2048kB (E) 0*4096kB = 7408kB\n[   71.938810] Node 0 DMA32: 233*4kB (UMEH) 158*8kB (UMEH) 177*16kB (UMEH) 79*32kB (UEH) 34*64kB (UMEH) 16*128kB (UMEH) 6*256kB (E) 3*512kB (UE) 3*1024kB (ME) 3*2048kB (UME) 5*4096kB (M) = 44548kB\n[   71.938815] Node 0 hugepages_total=0 hugepages_free=0 hugepages_surp=0 hugepages_size=1048576kB\n[   71.938816] Node 0 hugepages_total=0 hugepages_free=0 hugepages_surp=0 hugepages_size=2048kB\n[   71.938816] 404127 total pagecache pages\n[   71.938817] 0 pages in swap cache\n[   71.938818] Swap cache stats: add 0, delete 0, find 0/0\n[   71.938818] Free swap  = 0kB\n[   71.938819] Total swap = 0kB\n[   71.938819] 482739 pages RAM\n[   71.938820] 0 pages HighMem/MovableOnly\n[   71.938820] 22160 pages reserved\n[   71.938820] 0 pages cma reserved\n[   71.938821] 0 pages hwpoisoned\n[   71.938821] Tasks state (memory values in pages):\n[   71.938822] [  pid  ]   uid  tgid total_vm      rss pgtables_bytes swapents oom_score_adj name\n[   71.938824] [    415]     0   415    11814       85   147456        0             0 systemd-journal\n[   71.938826] [    439]     0   439    11430      228   118784        0         -1000 systemd-udevd\n[   71.938827] [    550]     0   550    22654      218   212992        0             0 rngd\n[   71.938828] [    554]    81   554    15051      155   167936        0          -900 dbus-daemon\n[   71.938829] [    573]     0   573    48803      120   180224        0             0 gssproxy\n[   71.938830] [    585]     0   585     6598       91    98304        0             0 systemd-logind\n[   71.938831] [    587]     0   587     4456      115    61440        0             0 assist_daemon\n[   71.938832] [    597]    32   597    17316      135   188416        0             0 rpcbind\n[   71.938833] [    601]     0   601    31598      153   106496        0             0 crond\n[   71.938834] [    606]   997   606    29454      129   143360        0             0 chronyd\n[   71.938835] [    616]     0   616    27553       33    57344        0             0 agetty\n[   71.938836] [    819]     0   819    25740      516   221184        0             0 dhclient\n[   71.938837] [    887]     0   887   121900      708   430080        0             0 rsyslogd\n[   71.938838] [    953]     0   953    10512      391   102400        0             0 AliYunDunUpdate\n[   71.938839] [   1078]     0  1078    32317      732   274432        0             0 AliYunDun\n[   71.938840] [   1235]     0  1235    28237      261   266240        0         -1000 sshd\n[   71.938841] [   1283]     0  1283    39209      337   348160        0             0 sshd\n[   71.938842] [   1292]     0  1292    29086      317    90112        0             0 bash\n[   71.938843] [   1310]     0  1310    87597      530   311296        0          -900 abrt-dbus\n[   71.938844] [   1397]     0  1397    39209      347   348160        0             0 sshd\n[   71.938845] [   1399]     0  1399    29080      279    81920        0             0 bash\n[   71.938846] [   1430]     0  1430    27028       25    77824        0             0 dmesg\n[   71.938847] [   1431]     0  1431  8392985       92  3219456        0             0 app\n[   71.938848] [   1432]     0  1432    39209      339   356352        0             0 sshd\n[   71.938849] [   1434]     0  1434    29053      276    81920        0             0 bash\n[   71.938850] [   1470]     0  1470     2146       23    57344        0             0 systemd-cgroups\n[   71.938851] [   1471]     0  1471     2146       23    57344        0             0 systemd-cgroups\n[   71.938852] [   1472]     0  1472     2146       23    53248        0             0 systemd-cgroups\n[   71.938853] [   1473]     0  1473     2143       15    57344        0             0 systemd-cgroups\n[   71.938854] Out of memory: Kill process 1431 (app) score 1 or sacrifice child\n[   71.939026] Killed process 1431 (app) total-vm:33571940kB, anon-rss:320kB, file-rss:48kB, shmem-rss:0kB\n[   71.942922] oom_reaper: reaped process 1431 (app), now anon-rss:0kB, file-rss:0kB, shmem-rss:0kB</code></pre><h2 id=\"4rM4I\">问题原因</h2><p id=\"4f54ad05c6ar8\">Arch、X86、Kernel、CPU、SGX和encl.c中的sgx_encl_mm_release_deferred函数没有正确的处理Encl结构的引用计数，所以当持有EPC内存的进程fork后，会导致Encl的引用计数不归零，从而泄露加密内存（EPC）。在物理内存消耗殆尽后，会使用共享内存以交换出加密内存，并最终使普通内存也消耗殆尽。</p><h2 id=\"AywdZ\">解决方案</h2><p data-spm-anchor-id=\"a2c9r.14518950.0.i1.45975e3bbmjFRP\" id=\"4f54d415c6ey5\">当遇到该问题时，您可以参考以下方案处理。</p><ol id=\"fdefbaf1ceic6\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i1.45975e3bbmjFRP\" id=\"4f54d419c6t42\"><p id=\"4f54d41ac6ghw\">登录实例，执行以下命令，确认系统内核版本适用此方案。 </p><pre data-tag=\"codeblock\" id=\"4f4e4462c6h8y\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>uname -r</code></pre><p id=\"4f54fb20c668h\"> 系统显示类似如下。 </p><pre data-tag=\"codeblock\" id=\"4f4e4463c63ot\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code> 4.19.91-23.al7.x86_64</code></pre></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i1.45975e3bbmjFRP\" id=\"4f54fb22c6hz7\"><p id=\"4f54fb23c6v4w\">根据系统内核版本选择对应的解决方法。\n</p><ul id=\"4f54fb24c6fb1\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i1.45975e3bbmjFRP\" id=\"4f54fb25c6i45\"><p id=\"4f54fb26c6a1h\">对于4.19.91-23.al7.x86_64（不含）之前的版本： \n</p><ol id=\"4f54fb27c6oeh\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i1.49605e3bVu1eCR\" id=\"4f54fb28c6wsg\"><p id=\"4f54fb29c6ild\">更新操作系统版本至最新的内核版本。 </p><pre data-tag=\"codeblock\" id=\"4f4e4464c6tnw\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum update kernel</code></pre></li><li id=\"4f552231c6r1b\"><p id=\"4f552232c6i1k\">重启服务器生效。 </p><pre data-tag=\"codeblock\" id=\"4f4e4465c61zi\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>reboot</code></pre></li><li id=\"4f552234c6e8s\"><p id=\"4f552235c63hd\">更新内核热补丁。</p><p id=\"dbb56660cd5cf\">若最新内核版本的操作系统同样存在该问题，请参见4.19.91-23.al7.x86_64版本的解决方案更新内核热补丁。</p></li></ol></li><li id=\"139dfdd1cdlao\"><p id=\"139dfdd0cdhg6\">对于4.19.91-23.al7.x86_64版本，可通过安装内核热补丁解决，安装命令如下。 </p><pre data-tag=\"codeblock\" id=\"4f4e4466c6tqc\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install -y kernel-hotfix-5577959-`uname -r | awk -F\"-\" '{print $NF}'`</code></pre></li></ul></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/alibaba-cloud-linux-instances-of-ecs-to-remove-pod-2-system-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统的ECS实例无法正常删除Pod，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-31 16:33:14</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"1534fb9065vtl\"><p data-tag=\"shortdesc\" id=\"1539686165luj\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2系统的ECS实例无法正常删除Pod的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 data-spm-anchor-id=\"a2c9r.14518950.0.i8.34ee7962FgekBF\" id=\"XbeWY\">问题描述</h2><p data-spm-anchor-id=\"a2c9r.14518950.0.i13.45975e3beJiObN\" data-wording=\"true\" data-lake-id=\"uef04f1ab\" id=\"1539686265yw0\">在符合如下条件的Alibaba Cloud Linux 2系统的ECS实例中，出现无法正常删除Pod的情况，进程处于D状态（不可中断的睡眠状态）。</p><ul id=\"1539686365bv5\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i14.45975e3beJiObN\" data-wording=\"true\" data-lake-id=\"u2df04b86\" id=\"1539686465c7d\"><p id=\"15396865655xs\">镜像：Alibaba Cloud Linux 2.1903 LTS 64位</p></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i12.45975e3beJiObN\" data-wording=\"true\" data-lake-id=\"ua7c17314\" id=\"1539686665g7r\"><p id=\"15396867656b1\">内核：4.19.91-24.1.al7.x86_64及之前的内核版本</p></li></ul><p data-wording=\"true\" data-lake-id=\"u787a39a2\" id=\"1539686865u5k\">系统进程出现如下调用栈信息：</p><pre id=\"1534fb91656r5\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>[&lt;0&gt;] __refrigerator+0x75/0x160\n[&lt;0&gt;] do_exit+0x224/0xc60\n[&lt;0&gt;] do_group_exit+0x3a/0xa0\n[&lt;0&gt;] get_signal+0x156/0x8c0\n[&lt;0&gt;] do_signal+0x36/0x610\n[&lt;0&gt;] exit_to_usermode_loop+0x95/0x100\n[&lt;0&gt;] do_syscall_64+0x178/0x1a0\n[&lt;0&gt;] entry_SYSCALL_64_after_hwframe+0x44/0xa9</code></pre><h2 id=\"tayMx\">问题原因</h2><p class=\"ne-p\" id=\"1539686a653sy\">在进程coredump发生前任务所在cgroup已经被挂起，进程coredump发生后所有线程进入了exiting状态，cgroup遍历会忽略此任务，错过cgroup的恢复，从而导致进程无法退出，无法正常删除Pod。</p><h2 id=\"EFTFF\">解决方案</h2><p id=\"15398f7a65quz\">当遇到该问题时，您可以参考以下方案解决上述问题。</p><ol id=\"15398f7b655gw\"><li id=\"15398f7c65sax\"><p id=\"15398f7d65zn2\">登录ECS实例。</p><p id=\"f51c99d0cdrq9\">具体操作，请参见<a class=\"\" target=\"_blank\" href=\"https://kb.aliyun-inc.com/kb/71529\">连接方式概述</a>。</p></li><li id=\"15398f7e653pz\"><p id=\"1539b68065y0d\">执行以下命令，确认系统内核版本适用此方案。 </p><pre id=\"1534fb9265g7b\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>uname -r</code></pre><p id=\"1539b68165toy\"> 系统显示类似如下。 </p><pre id=\"1534fb93650k1\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>4.19.91-18.al7.x86_64</code></pre></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i0.69f87962jJ1mcM\" id=\"1539b68365xvb\"><p id=\"1539b68465c16\">更新内核版本。 \n</p><ol id=\"9ce39f5182v9t\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i1.69f87962jJ1mcM\" id=\"1539b68965pe2\"><p id=\"1539b68a65dr3\">更新操作系统版本至最新的内核版本。 </p><pre id=\"1534fb9465t7o\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum update kernel</code></pre></li><li id=\"1539b68c658uc\"><p id=\"1539b68d6596e\">重启服务器生效。 </p><pre id=\"1534fb9565r30\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>reboot</code></pre></li><li id=\"1539dd9165yye\"><p id=\"1539dd9265do4\">更新内核热补丁。</p><p id=\"e875f6d0cddny\">若最新内核版本的操作系统同样存在该问题，请执行以下命令，更新内核热补丁（内核热补丁名称为：cgroup:freeze: fix coredump &amp; unfreeze conflict）。</p><pre id=\"1xk0ym\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install -y kernel-hotfix-3915544-`uname -r | awk -F\"-\" '{print $NF}'`</code></pre></li></ol></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-buffer-i-or-o-write-performance-of-an-ext4-file-system-on-an-alibaba-cloud-linux-2-instance-is-not-as-expected", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统的ECS实例中ext4文件系统的Buffer I/O写性能不符合预期，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-31 16:31:25</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"cf260f506cgcp\"><p data-tag=\"shortdesc\" id=\"cf3440206c56c\" class=\"shortdesc\">本文介绍Alibaba Cloud Linux 2系统的ECS实例中ext4文件系统的Buffer I/O写性能不符合预期问题的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"cf3467326clw1\">在ext4文件系统中执行常规的缓存异步I/O（Buffer I/O）写操作时，可能会观察到性能表现不符合预期的情形。存在该问题的ECS实例有以下特征：</p><ul id=\"cf3467336c2sk\"><li data-spm-anchor-id=\"a2c4e.11153940.0.i5.655046d0UoNo9y\" id=\"cf3467346c7zd\"><p id=\"cf3467356czab\">镜像：<code data-tag=\"code\" class=\"code\">aliyun-2.1903-x64-20G-alibase-20190327.vhd</code>及之后所有的镜像版本。</p></li><li id=\"cf348e406cby5\"><p id=\"cf348e416cdxb\">内核：<code data-tag=\"code\" class=\"code\">kernel-4.19.24-9.al7</code>及之后所有的内核版本。</p></li><li id=\"cf348e426c3ka\"><p id=\"cf348e436c1ri\">通过<code data-tag=\"code\" class=\"code\">dioread_nolock</code>和<code data-tag=\"code\" class=\"code\">nodelalloc</code>两个选项挂载ext4文件系统。 \n</p><div type=\"note\" id=\"cf348e446cang\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"cf348e456crlu\">关于如何查看文件系统类型及挂载选项，请参见<a title=\"\" class=\"xref\" href=\"#eSnCY\">查看文件系统类型及挂载选项</a>。</p></div></div></li></ul><p id=\"cf34b5506cqbu\">验证性能表现不符合预期的典型场景如下：</p><div type=\"note\" id=\"cf34b5516cdkw\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"d8720b406cyhp\">关于ECS块存储的性能，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/block-storage-performance\">块存储性能</a>。</p></div></div><ul id=\"cf34dc606cqnz\"><li id=\"cf34dc616ci1b\"><p id=\"cf34dc626ct6h\">场景一：使用<code data-tag=\"code\" class=\"code\">cp</code>命令拷贝大文件到ext4文件系统中，耗时很久，每秒拷贝速度只能达到30MB/s左右。</p></li><li id=\"cf34dc636c386\"><p id=\"cf34dc646cij5\">场景二：使用类似如下不带同步标志（Sync Flag）的<code data-tag=\"code\" class=\"code\">dd</code>命令写文件到ext4文件系统中，耗时很久。 </p><pre id=\"cf2636606cffz\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>dd if=/dev/zero of=/mnt/badfile bs=10M count=1000</code></pre><p id=\"cf34dc656cttx\">且在终端中通过<code data-tag=\"code\" class=\"code\">iostat -xm 1</code>命令观察对应磁盘的写入速度时，wMB/s列的值只有30MB/s左右。系统显示类似如下。 </p><pre id=\"cf2636616ckov\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>avg-cpu:  %user   %nice %system %iowait  %steal   %idle\n           0.00    0.00   12.77    0.00    0.00   87.23\n\nDevice:         rrqm/s   wrqm/s     r/s     w/s    rMB/s    wMB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util\nvda               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00\nvdb               0.00  7194.00    0.00   57.00     0.00    28.05  1008.00     0.02   17.81    0.00   17.81   0.39   2.20</code></pre></li></ul><h2 id=\"4rM4I\">问题原因</h2><p class=\"from-extensions-error\" id=\"cf3503706c7zx\">从文件系统代码层面分析，该问题的根本原因是当文件系统以<code data-tag=\"code\" class=\"code\">dioread_nolock</code>和<code data-tag=\"code\" class=\"code\">nodelalloc</code>组合选项挂载时，产生了大量内核中被称为“unwritten extents”、大小为4KB的脏页（Dirty Page）；由于ext4文件系统处理逻辑的缺陷，这些4KB的脏页在写回的时候并不会被合并成若干个大页进行写回，而是直接以小页的形式被处理。从Perf工具观察内核写回页面缓存的过程，发现处理过程主要发生在ext4文件系统的<code data-tag=\"code\" class=\"code\">ext4_writepages()</code>函数内部，在查找和映射4KB脏页的逻辑中耗费了大量的时间，从而造成文件写入性能极低。</p><h2 id=\"AywdZ\">解决方案</h2><p id=\"cf35037b6cj1i\">该问题为已知问题，暂无固化解决方案。您可以参考以下步骤临时解决此问题：</p><ol id=\"cf35037c6cyp3\"><li data-spm-anchor-id=\"a2c4e.11153940.0.i11.2c2646d09lYjQD\" id=\"cf352a806cha4\"><p id=\"cf352a816c4yk\">参考以下命令，重新挂载ext4文件系统，取消同时使用<code data-tag=\"code\" class=\"code\">dioread_nolock</code>和<code data-tag=\"code\" class=\"code\">nodelalloc</code>的挂载选项组合。 </p><pre id=\"cf2636626c9rw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sudo mount -o remount,delalloc &lt;$Device&gt; &lt;$Mount_point&gt;</code></pre><div type=\"note\" id=\"cf352a826cfnm\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"0eaf8ac06c0lm\"><li id=\"0eaf8ac16crio\"><p id=\"0eaf8ac26c3si\">&lt;$Device&gt;：指挂载ext4文件系统的设备名。</p></li><li id=\"0eaf8ac36c12q\"><p id=\"0eaf8ac46csu5\">&lt;$Mount_point&gt;：指ext4文件系统的挂载点。</p></li></ul></div></div><p id=\"cf3551916cdlz\"> </p></li><li data-spm-anchor-id=\"a2c4e.11153940.0.i11.2c2646d09lYjQD\" id=\"cf3551926c23x\"><p id=\"cf3551936czan\">修改<code data-tag=\"code\" class=\"code\">/etc/fstab</code>文件，删除ext4文件系统的<code data-tag=\"code\" class=\"code\">nodelalloc</code>选项（默认为<code data-tag=\"code\" class=\"code\">delalloc</code>），以确保系统开机自动挂载。</p></li></ol><h2 id=\"eSnCY\">查看文件系统类型及挂载选项</h2><p id=\"cf3551946cqn9\">查看目录所在磁盘的文件系统类型及挂载选项，参考步骤如下：</p><ol start=\"1\" id=\"cf3551956c2w8\"><li id=\"cf3551966ckyb\"><p id=\"cf3551976ctsr\">登录ECS实例，参考以下命令，确认目录所在的磁盘分区。 </p><pre id=\"cf2636636c3fc\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>df &lt;$DIR&gt; | grep -v Filesystem | awk '{ print $1 }'</code></pre><div type=\"note\" id=\"cf3578a06cm5g\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"cf3578a16c0x1\">&lt;$DIR&gt;指写操作的目标目录。\n</p></div></div></li><li id=\"cf3578a36c188\"><p id=\"cf3578a46ctse\">参考以下命令，查看目标磁盘分区的文件系统类型以及挂载选项。 </p><pre id=\"cf2636646c103\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>mount | grep -w &lt;$Partition&gt; | grep ext4 | grep -w dioread_nolock | grep -w nodelalloc</code></pre><div type=\"note\" id=\"cf359fb06ccim\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"cf359fb16cd1w\">&lt;$Partition&gt;指上一步获取的磁盘分区名。\n</p></div></div></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-tcp-congestion-control-algorithm-bbr-affects-network-performance-in-alibaba-cloud-linux", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统中TCP拥塞控制算法BBR对网络性能有影响，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-07 17:14:21</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"333f49e065qol\"><p id=\"3342a54165dih\" data-tag=\"shortdesc\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2系统中TCP拥塞控制算法BBR（Bottleneck Bandwidth and RTT）对网络性能有影响的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"3342a542654we\">符合下列条件的ECS实例中，内核TCP拥塞控制算法默认为BBR算法。该算法会在CPU使用率高、网络数据包（PPS）高的情况下，对网络性能产生一定影响。例如，Redis数据库的性能降低。</p><ul id=\"3342a543651s6\"><li id=\"3342a544658js\"><p id=\"3342cc5065oki\">镜像：<code data-tag=\"code\" class=\"code\">aliyun_2_1903_64_20G_alibase_20190619.vhd</code>及之前所有的镜像版本。</p></li><li id=\"3342cc5165a50\"><p id=\"3342cc52651oa\">内核：<code data-tag=\"code\" class=\"code\">kernel-4.19.48-14.al7</code>及之前所有的内核版本。</p></li></ul><h2 id=\"4rM4I\">问题原因</h2><p id=\"722066c0cdp98\">Alibaba Cloud Linux 2系统的内核TCP拥塞控制目前支持Reno 、BBR、cubic三种算法，在不同网络场景下，控制性能会有差异。BBR算法估算当前连接的BW（吞吐）和RTT（时延）以调整拥塞窗口。BBR算法依赖于TCP连接的封装（pacing）功能，而TCP的封装实现有下列两种方式：</p><ul id=\"3342cc5565gh6\"><li id=\"3342cc5665tbe\"><p id=\"3342cc5765l2i\">若网卡设备使用qdisc的tc-fq（Fair Queue Traffic Policing）调度，则直接复用tc-fq调度中基于流的封装。</p></li><li id=\"3342cc5865ngn\"><p id=\"3342cc5965l57\">若网卡设备没有使用qdisc的tc-fq调度，则TCP改用其内部的封装方式。</p></li></ul><p id=\"26476930cd330\">TCP协议内部的封装方式依赖于Linux系统的高精度计时器（hrtimer），每个连接的高精度计时器会额外增加CPU消耗。在CPU使用率和网络PPS均高的情况下，BBR算法对网络性能的影响更加明显。在CPU空闲并且网络PPS低的情况下，影响不大。</p><h2 id=\"AywdZ\">解决方案</h2><p id=\"3342f36365yd1\">请参考下列TCP拥塞控制算法的建议，选择符合您业务实际情况的解决方式。</p><ul id=\"3342f36465kkw\"><li id=\"3342f365657c1\" data-spm-anchor-id=\"a2c4e.11153940.0.i15.5f221903VS0DY7\"><p id=\"3342f366656kn\">修改TCP拥塞控制算法。</p><p id=\"7bd9ea00cdpul\">如果ECS实例中的应用仅对内网提供服务，建议参考下列命令，修改TCP拥塞控制算法为cubic。因为内网环境带宽高、时延低。 </p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"333f49e165355\" class=\"pre codeblock language-javascript\"><code>sysctl -w net.ipv4.tcp_congestion_control=cubic\nsh -c \"echo 'net.ipv4.tcp_congestion_control=cubic'\" &gt;&gt; /etc/sysctl.d/50-aliyun.conf</code></pre></li><li id=\"3342f368650fe\"><p id=\"3342f36965vz1\">修改相应网卡的调度策略。</p><p id=\"99f4f9d0cdhz3\">如果ECS实例中的应用对外提供服务，建议继续使用BBR算法，但需要将相应网卡的调度策略修改为tc-fq。修改的命令如下。 </p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"333f49e265cul\" class=\"pre codeblock language-javascript\"><code>tc qdisc add dev &lt;$Dev&gt; root fq</code></pre><div id=\"3342f36a65euy\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"3342f36b653da\">&lt;$Dev&gt;指需要调整的网卡名称。\n</p></div></div></li><li id=\"33431a7065f1n\" data-spm-anchor-id=\"a2c4e.11153940.0.i14.5f221903VS0DY7\"><p id=\"33431a7165vc9\">使用BBR算法时，不建议使用其他非tc-fq的调度策略。因为这样会占用更多额外的CPU资源。</p></li><li id=\"0c5da3a1d4cha\"><p id=\"33431a73652bj\">建议您升级ECS实例的内核至<code data-tag=\"code\" class=\"code\">kernel-4.19.57-15.al7</code>及之后的版本，彻底解决该问题。</p></li></ul><p id=\"eba8a7e0cd4ju\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-integrity-unable-to-open-file-error-messages-appear-in-the-kernel-logs-of-an-alibaba-cloud-linux-2-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/alibaba-cloud-linux-issues/\">Alibaba Cloud Linux问题</a></span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Alibaba Cloud Linux 2系统的ECS实例内核日志存在“integrity: Unable to open file”信息，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-31 18:04:59</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"cfea4be0c6235\"><p data-tag=\"shortdesc\" id=\"cff03f52c62zk\" class=\"shortdesc\">本文为您介绍Alibaba Cloud Linux 2系统的ECS实例内核日志存在“integrity: Unable to open file”信息的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"cff03f53c6jd8\">符合如下条件的Alibaba Cloud Linux 2实例的内核日志（执行<code data-tag=\"codeph\" class=\"codeph\">dmesg</code>命令查看日志）中存在类似如下的提示信息：</p><ul id=\"cff03f54c6ijg\"><li data-spm-anchor-id=\"a2c4e.11153940.0.i5.655046d0UoNo9y\" id=\"cff03f55c6465\"><p id=\"cff06660c6e7a\">镜像：aliyun_2_1903_x64_20G_alibase_20200529.vhd及之后的所有镜像版本。</p></li><li data-spm-anchor-id=\"a2c4e.11153940.0.i5.655046d0UoNo9y\" id=\"cff06661c6naq\"><p id=\"cff06662c69p6\">内核：kernel-4.19.91-19.1.al7及之后的所有内核版本。</p></li></ul><pre data-tag=\"codeblock\" id=\"cfea4be1c6xlm\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>[    2.960294] integrity: Unable to open file: /etc/keys/x509_ima.der (-2)\n[    2.960295] integrity: Unable to open file: /etc/keys/x509_evm.der (-2)</code></pre><h2 id=\"4rM4I\">问题原因</h2><p id=\"7db9e180cdvpd\">该系统不是可信系统。如果不是可信系统， 下列相关文件不会进行配置，会出现问题描述中打开文件失败的信息。</p><p id=\"cff06663c6hks\">此问题并不是内核错误，Alibaba Cloud Linux 2内核开启了CONFIG_IMA_LOAD_X509和CONFIG_EVM_LOAD_X509特性，并且指定以下配置为可信内核完整性子系统提供了所需的证书路径。</p><pre data-tag=\"codeblock\" id=\"cfea4be2c62jq\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>CONFIG_IMA_X509_PATH=\"/etc/keys/x509_ima.der\"\nCONFIG_EVM_X509_PATH=\"/etc/keys/x509_evm.der\"</code></pre><h2 id=\"AywdZ\">解决方案</h2><ul id=\"cff08d7ac6imp\"><li id=\"cff0b480c67p1\"><p id=\"cff0b481c6nrt\">执行<code data-tag=\"codeph\" class=\"codeph\">make menuconfig</code>命令取消下列配置，重新编译安装内核。</p><p id=\"45a49090cdfdx\">如果相关提示信息对您造成困扰，您可以在内核源码目录执行<code data-tag=\"codeph\" class=\"codeph\">make menuconfig</code>命令，取消以下两个选项的配置，然后重新编译安装内核即可。</p><pre data-tag=\"codeblock\" id=\"28f51eb2cdcnk\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code># Load X509 certificate onto the '.ima' trusted keyring\nCONFIG_IMA_LOAD_X509 is not set\n# Load an X509 certificate onto the '.evm' trusted keyring\nCONFIG_EVM_LOAD_X509 is not set</code></pre></li><li id=\"cff0b482c65f8\"><p id=\"cff0b483c6nod\">忽略提示信息。</p><p id=\"77d1b7f0cd3oc\">该问题只是配置问题，并不会对系统造成其它影响，可以直接忽略相关提示信息。</p></li></ul></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-error-message-the-terminal-server-has-exceeded-the-maximum-number-of-allowed-connections-appears-when-i-connect-to-a-windows-instance-by-using-remote-desktop", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows系统的ECS实例时，提示“终端服务器超出了最大允许连接数”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows系统的ECS实例时，提示“终端服务器超出了最大允许连接数”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:44:08</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"45f9e740a1mfp\"><p data-tag=\"shortdesc\" id=\"45fd69b7a1npo\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows系统的ECS实例时，提示“终端服务器超出了最大允许连接数”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"6fd5d880a1lir\" class=\"section\"><h2 id=\"3210cfbd\"><b>问题描述</b></h2><p id=\"45fd69bca14yb\">通过远程桌面连接Windows系统的ECS实例时，提示“<b data-tag=\"uicontrol\" id=\"7e2893dba2usm\" class=\"uicontrol\">终端服务器超出了最大允许连接数</b>”错误。<img id=\"3e57ad00a1l38\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8418125761/p554312.png\" alt=\"121\" placement=\"break\" width=\"300\" class=\"image break\"></p></section><section id=\"6e2d0a80a1fj9\" class=\"section\"><h2 id=\"dbf5e67f\"><b>问题原因</b></h2><p id=\"45fd69bfa1oy7\">出现该问题的原因可能是由于目前默认的Windows系统为标准版，只能支持2个免费的远程桌面终端同时连接。</p></section><section id=\"6c252c90a1o0m\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"536b9860a7f09\">根据实际情况，选择对应方案进行操作。</p><section id=\"e7c379c0a7443\" class=\"section\"><h3 id=\"c7bc2a50a7yjr\"><b>方案一：（推荐）</b>登录Console控制台，注销当前用户后重新登录</h3><ol id=\"45fd69cca1q1k\"><li id=\"45fd69cda1jzm\"><p id=\"45fd69cea1v2h\">在本地电脑中，单击<b data-tag=\"uicontrol\" id=\"7e28baeca2cxx\" class=\"uicontrol\">开始 &gt; 运行</b>，输入<code data-tag=\"code\" class=\"code\">mstsc /admin</code>，直接登录Console控制台。</p><div type=\"note\" id=\"bb668001a61we\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"bb668000a6xhs\"><code data-tag=\"code\" class=\"code\">mstsc /admin</code>命令适用于Windows 7及以上系统版本。</p></div></div></li><li id=\"45fd90c5a1typ\"><p id=\"74a12121a1pmy\">通过VNC连接Windows实例。</p><p id=\"74a12122a1xy2\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"78070871a1iib\"><p id=\"78070870a18nr\">单击<b data-tag=\"uicontrol\" id=\"7e28e1fda2ie5\" class=\"uicontrol\">开始 &gt; 运行</b>，输入<code data-tag=\"code\" class=\"code\">taskmgr</code>命令，进入<b data-tag=\"uicontrol\" id=\"7e290901a23x1\" class=\"uicontrol\">任务管理器</b>窗口。</p></li><li id=\"fe185271a1d77\"><p id=\"fe185270a1sb8\">在<b data-tag=\"uicontrol\" id=\"7e290905a25wz\" class=\"uicontrol\">用户</b>页签下，选中已经连接的用户，单击<b data-tag=\"uicontrol\" id=\"db6f18c0a3q3f\" class=\"uicontrol\">注销</b>，然后重新登录该用户。</p><img id=\"ea25fad1a713k\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8860225761/p554340.png\" alt=\"122\" placement=\"break\" class=\"image break\"></li></ol></section><section id=\"f85a4d40a7q0t\" class=\"section\"><h3 id=\"eeeb7220a79cx\"><b>方案二：重启实例</b></h3><p id=\"fe789dd0a77qw\">您也可以通过重启Windows系统的ECS实例解决“<b data-tag=\"uicontrol\" id=\"ca765460a7pqp\" class=\"uicontrol\">终端服务器超出了最大允许连接数</b>”错误。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p><div type=\"warning\" id=\"1cc767d0a76d6\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"12f9a3d0a7hzl\">重启实例会造成您的实例停止工作，造成业务中断，请谨慎执行。建议您在重启前为云盘创建一份快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-error-message-remote-desktop-cannot-verify-the-identity-of-the-remote-computer-appears-when-i-connect-to-a-window-instance-from-a-mac-device", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过Mac系统的远程桌面连接Windows实例，提示“远程桌面连接无法验证您希望连接的计算机的身份”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过Mac系统的远程桌面连接Windows实例，提示“远程桌面连接无法验证您希望连接的计算机的身份”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:42:21</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"177d8fb0a1w4y\"><p id=\"17813938a1ykg\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍通过Mac系统的远程桌面连接Windows实例时，提示“远程桌面连接无法验证您希望连接的计算机的身份。”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"68fe46e0a10y9\" class=\"section\"><h2 id=\"h2-u95EEu9898u63CFu8FF0\">问题描述</h2><p id=\"1781393da1i6d\">使用Mac系统的远程桌面连接Windows ECS实例时，系统提示“<b data-tag=\"uicontrol\" id=\"185909ffa3qck\" class=\"uicontrol\">远程桌面连接无法验证您希望连接的计算机的身份。</b>”错误。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9528665761/p518731.png\" class=\"image break\"></section><section id=\"6b0169e0a10e0\" class=\"section\"><h2 id=\"WyxXz\">问题原因</h2><p id=\"17813941a1lu5\">在Windows系统的ECS实例内，计算机安全组策略配置不正确，导致使用Mac系统的远程桌面无法远程连接Windows系统的ECS实例。</p></section><section id=\"6f4ad360a1xcs\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><ol id=\"6022f22296h99\"><li id=\"6022f220962lc\"><p id=\"c2014c2096789\">通过VNC连接Windows实例。</p><p id=\"c57b57b096bk4\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"6158da11969zv\"><p id=\"6158da1096hw2\">右键单击<img id=\"ad6f63e1a3nej\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530260.png\" alt=\"win2012开始图标\" placement=\"inline\" width=\"25\" height=\"25\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"ac257ec2a33sn\" class=\"uicontrol\">运行</b>，输入<code data-tag=\"code\" class=\"code\">gpedit.msc</code>命令，打开<b data-tag=\"uicontrol\" id=\"ac257ec3a3r1c\" class=\"uicontrol\">本地组策略编辑器</b><b>。</b></p></li><li id=\"8d4d722196rka\"><p id=\"8d4d722096zo5\">在<b data-tag=\"uicontrol\" id=\"18595815a399k\" class=\"uicontrol\">本地组策略编辑器</b>窗口，选择<b data-tag=\"uicontrol\" id=\"18595817a33u0\" class=\"uicontrol\">计算机配置 &gt; 管理模板 &gt; Windows 组件 &gt; 远程桌面服务 &gt; 远程桌面会话主机 &gt; 安全</b>。</p></li><li id=\"1e5855f1969xn\"><p id=\"1cb5063096v5y\">在<b data-tag=\"uicontrol\" id=\"1859581ba3ksw\" class=\"uicontrol\">安全</b>目录中，双击<b data-tag=\"uicontrol\" id=\"1859581da3e0o\" class=\"uicontrol\">远程（RDP）连接要求使用指定的安全层</b>。 </p><img width=\"500\" placement=\"break\" alt=\"111\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p551393.png\" id=\"67945a2096vzq\" class=\"image break\"></li><li id=\"8cd4551196ix0\"><p id=\"8d3a1bc096sjk\">在弹出对话框中选择<b data-tag=\"uicontrol\" id=\"18595823a39rl\" class=\"uicontrol\">已启用</b> ，在<b data-tag=\"uicontrol\" id=\"18595825a3dhs\" class=\"uicontrol\">安全层</b>选项中选择<b data-tag=\"uicontrol\" id=\"18595827a3oj1\" class=\"uicontrol\">RDP</b>，单击<b data-tag=\"uicontrol\" id=\"18595829a3606\" class=\"uicontrol\">确定</b>。<img width=\"500\" placement=\"break\" alt=\"222\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p551395.png\" id=\"05273ff1966mu\" class=\"image break\"></p></li><li id=\"06857061968oo\"><p id=\"1667c0f096ncr\">执行以下命令，完成策略更新，使以上的设置生效。</p><ol id=\"1cece9a196uu4\"><li id=\"1ca77c3196lvp\"><p id=\"23fdfea096pt1\">右键单击<img placement=\"inline\" id=\"23fdfea1961dx\" width=\"25\" alt=\"Dingtalk_20210510142550.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"18597f23a3y0d\" class=\"uicontrol\">运行</b>，输入<code data-tag=\"code\" class=\"code\">cmd</code>命令，打开命令行。</p></li><li id=\"5725d9b1965c4\"><p id=\"63611b4096c0f\">执行<code data-tag=\"code\" class=\"code\">gpupdate</code>命令，完成策略更新。</p><p id=\"72b4724096vc7\">系统显示类似如下图。</p><img id=\"88b6c111969c1\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p518787.png\" alt=\"\" width=\"340\" class=\"image break\"></li></ol></li><li id=\"935e434196zr5\"><p id=\"984e741096kvh\">重新进行远程连接，确认问题已经修复。</p></li></ol></section><p id=\"5a258c30a13xt\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-instance-via-remote-desktop-connection-prompt-remote-connection-need-computer-network-level-authentication", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例提示“远程连接计算机需要网络级别身份验证”怎么办?</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例提示“远程连接计算机需要网络级别身份验证”怎么办?</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-09 14:04:21</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"73f14110a1z8q\"><div data-tag=\"conbody\" class=\"conbody\"><section id=\"5d5919a0a1kww\" class=\"section\"><p id=\"73f4ea97a1oli\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows系统的ECS实例提示“远程连接计算机需要网络级别身份验证”错误的解决方案。</p><section id=\"10f7d650a1eqp\" class=\"section\"><h2 id=\"esWHw\" data-spm-anchor-id=\"a2c9r.14518950.0.i0.239b3611z9pfNq\">问题描述</h2><p id=\"73f4ea98a183x\">使用远程桌面连接工具登录Windows系统的ECS实例失败，并提示“<b data-tag=\"uicontrol\" id=\"143cff04a26qo\" class=\"uicontrol\">远程连接计算机需要网络级别身份验证</b>”的报错，如下图所示。</p><img id=\"0f2897a1a2m5e\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1069235761/p554120.png\" alt=\"3\" placement=\"break\" width=\"650\" class=\"image break\"></section><section id=\"0dc4e5e0a1bo0\" class=\"section\"><h2 id=\"awbWT\">问题原因</h2><p id=\"73f4ea99a152k\">本地Windows主机的远程桌面连接工具版本过低，导致远程连接失败。</p></section><section id=\"0bb69f50a1n18\" class=\"section\"><h2 id=\"aRQkT\" data-spm-anchor-id=\"a2c9r.14518950.0.i1.239b3611z9pfNq\">解决方案</h2><p id=\"73f511a6a1o27\">下列操作以Windows Server 2012 R2 64位操作系统为例，其它版本的操作系统的配置可能有所差异，具体情况请参考相应操作系统的官方文档。</p><ol id=\"44a6eef295tg7\"><li id=\"44a6eef39505o\"><p id=\"e2e5581196q2o\">通过VNC连接Windows实例。</p><p id=\"e2e55812964p4\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"44a6eef695wki\"><p id=\"44a6eef795x1b\">单击<img height=\"25\" width=\"25\" placement=\"inline\" alt=\"win2012开始图标\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530260.png\" id=\"44a6eef895p2q\" class=\"image inline\">图标，右键单击<b data-tag=\"uicontrol\" id=\"143d4d24a2tuo\" class=\"uicontrol\">这台电脑</b>，然后单击<b data-tag=\"uicontrol\" id=\"143d4d26a2nxw\" class=\"uicontrol\">属性</b>。</p><img width=\"400\" id=\"1191f681a2asv\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530290.png\" alt=\"win2012开始\" placement=\"break\" class=\"image break\"></li><li id=\"44a6eefa95054\"><p id=\"44a6eefb95f80\">在<b data-tag=\"uicontrol\" id=\"143d4d2ca2eg2\" class=\"uicontrol\">控制面板主页</b>上，单击<b data-tag=\"uicontrol\" id=\"143d4d2ea2vcs\" class=\"uicontrol\">远程设置</b>。</p><img id=\"15e63571a2omt\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530325.png\" alt=\"win2012远程设置\" placement=\"break\" width=\"700\" class=\"image break\"></li><li id=\"44a6eefd9586l\"><p id=\"44a6eefe95231\">在<b data-tag=\"uicontrol\" id=\"143d7433a2bpg\" class=\"uicontrol\">远程</b>页签下，取消选中<b data-tag=\"uicontrol\" id=\"143d7435a2e4f\" class=\"uicontrol\">仅允许运行使用网络级别身份验证的远程桌面的计算机连接（建议） </b>，然后单击<b data-tag=\"uicontrol\" id=\"143d7437a2vnr\" class=\"uicontrol\">确定</b>。</p><img width=\"400\" id=\"191b6fd1a2dsy\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530330.png\" alt=\"win2012取消勾选\" placement=\"break\" class=\"image break\"></li><li id=\"3e0a1691a1m3t\"><p id=\"3f908f80a1ir0\">配置完成后，您可以重新尝试远程连接该服务器。</p></li></ol></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/there-is-a-problem-with-your-license-for-remote-desktop-and-the-session-will-end-in-60-minutes", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows系统的ECS实例提示“你的远程桌面许可证出现问题，您的会话将在60分钟后断开连接。”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows系统的ECS实例提示“你的远程桌面许可证出现问题，您的会话将在60分钟后断开连接。”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:44:21</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"3e1f3c50a1e0e\"><p data-tag=\"shortdesc\" id=\"3e270484a1jam\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows系统的ECS实例时，提示“你的远程桌面许可证出现问题，您的会话将在60分钟后断开连接。”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"7ddb8000a1n40\" class=\"section\"><h2 id=\"3e270489a10m0\">问题描述</h2><p id=\"3e27048aa1zsv\">重启Windows系统的ECS实例之后，通过远程桌面连接实例时提示如下错误。</p><img height=\"176\" width=\"600\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6658415761/p519725.png\" id=\"8f02f571a2xdq\" class=\"image break\"></section><section id=\"7ffe38f0a1h10\" class=\"section\"><h2 id=\"3e272b91a1a0p\">问题原因</h2><p id=\"3e272b92a1hpe\">Windows系统的ECS实例的本地组策略编辑器中“<b data-tag=\"uicontrol\" id=\"7c429d22a2x4y\" class=\"uicontrol\">指定 RD 会话主机服务器的授权模式</b>”的选项设置不为<b data-tag=\"uicontrol\" id=\"7c429d24a2zi2\" class=\"uicontrol\">按设备</b>模式。</p></section><section id=\"843ca5f0a1hgj\" class=\"section\"><h2 id=\"3e272b94a1l9w\">解决方案</h2><ol id=\"3e2752a1a1ec3\"><li data-spm-anchor-id=\"a2c9r.12641768.0.i0.3dac77dx77dx5A\" id=\"3e2752a2a1lik\"><p id=\"90c2fa40a15k8\">通过VNC连接Windows实例。</p><p id=\"9b556dd0a1xfc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li data-spm-anchor-id=\"0.0.0.i11.7c805KY05KY0oL\" id=\"3e2752a4a1b19\"><p id=\"3a22da01a1fpy\">进入<b data-tag=\"uicontrol\" id=\"7c429d2fa2uqa\" class=\"uicontrol\">本地组策略编辑器</b>窗口。</p><ol id=\"3a22da02a185k\"><li id=\"3a22da03a1wzg\"><p id=\"3a22da04a1uk9\">右键单击<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"3a22da05a19ez\" placement=\"inline\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"7c42c432a2wv5\" class=\"uicontrol\">运行</b>。</p></li><li id=\"3a22da06a1u2a\"><p id=\"3a22da07a130i\">在<b data-tag=\"uicontrol\" id=\"7c42c436a2ajy\" class=\"uicontrol\">运行</b>对话框中输入<code data-tag=\"code\" class=\"code\">gpedit.msc</code>，单击<b data-tag=\"uicontrol\" id=\"7c42c439a2ar4\" class=\"uicontrol\">确定</b>。</p></li></ol></li><li id=\"3e2752a6a1qws\"><p id=\"4a3bf200a1t1x\">在<b data-tag=\"uicontrol\" id=\"7c42c43da2ah9\" class=\"uicontrol\">本地组策略编辑器</b>窗口，依次单击<b data-tag=\"uicontrol\" id=\"7c42c43fa2rzd\" class=\"uicontrol\">计算机配置 &gt; 管理模板 &gt; Windows 组件 &gt; 远程桌面服务 &gt; 远程桌面会话主机 &gt; 授权</b>，然后双击<b data-tag=\"uicontrol\" id=\"7c42c441a2ezp\" class=\"uicontrol\">设置远程桌面授权模式</b>。</p><img width=\"600\" placement=\"break\" alt=\"1\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6658415761/p554013.png\" id=\"910d6b71a22xi\" class=\"image break\"></li><li data-spm-anchor-id=\"a2c9r.12641768.0.i0.3dac77dx77dx5A\" id=\"3e2752a8a1olx\"><p id=\"3e2752a9a1o2e\">在<b data-tag=\"uicontrol\" id=\"7c42c446a2e13\" class=\"uicontrol\">设置远程桌面授权模式</b>窗口，选择<b data-tag=\"uicontrol\" id=\"7c42eb41a2570\" class=\"uicontrol\">已启用</b>，在<b data-tag=\"uicontrol\" id=\"7c42eb43a2vz6\" class=\"uicontrol\">指定 RD 会话主机服务器的授权模式</b>区域选择<b data-tag=\"uicontrol\" id=\"7c42eb45a2zo3\" class=\"uicontrol\">按设备</b>，单击<b data-tag=\"uicontrol\" id=\"7c42eb47a27ub\" class=\"uicontrol\">确定</b>。</p><img width=\"600\" placement=\"break\" alt=\"2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6658415761/p554016.png\" id=\"df14f6e1a2qh6\" class=\"image break\"></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-instance-of-rpc-component-abnormal-how-to-solve", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>Windows实例的RPC组件异常如何解决？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例的RPC组件异常如何解决？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2022-11-02 10:39:46</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n\n      <main role=\"main\">\n         <article role=\"article\" aria-labelledby=\"title_t9f_aah_5ub\">\n            \n            <div class=\"body taskbody\" id=\"taskbody-ue4-s4r-6vg\">\n               <p class=\"shortdesc\">本文介绍Windows实例的RPC组件异常的解决办法。</p>\n               <section class=\"section context\" id=\"context-yw7-wog-x7x\">\n                  <div class=\"tasklabel\">\n                     <h2 class=\"sectiontitle tasklabel\" id=\"h2-url-1\">背景信息</h2>\n                  </div>Windows远程桌面服务底层依赖Windows操作系统的RPC组件。如果Windows实例的RPC组件异常，将导致远程桌面服务无法正常工作，用户也无法通过远程桌面RDP协议远程登录该Windows实例。\n               </section>\n               <section class=\"section\" id=\"section-tm3-ibu-8ec\">\n                  <h2 class=\"title sectiontitle\" id=\"title-m2y-kwt-ubf\">问题现象</h2>\n                  <p class=\"p\" id=\"p-0kc-e1j-2y1\">您可以在Windows操作系统的任务管理器中查看Windows实例的RPC组件状态，Windows实例的RPC组件正常运行时，对应的状态为<span class=\"ph uicontrol\" id=\"uicontrol-8ir-31p-7rw\">正在运行</span>。\n                  </p>\n                  <div class=\"p\" id=\"p-2yv-j6o-y1b\">如图所示，Windows实例的RPC组件状态为空，表示Windows实例的RPC组件异常。<img class=\"image break\" id=\"image-v7g-r94-3mz\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2126027661/p510186.png\" width=\"750\" alt=\"RPC服务异常\"></div>\n               </section>\n               <section class=\"section\" id=\"section-5kz-og3-tgq\">\n                  <h2 class=\"title sectiontitle\" id=\"title-c4b-aaf-ihu\">解决方案</h2>\n                  <div class=\"note important note-important\" id=\"note-36i-mk7-xdb\">\n                     <div class=\"note-icon-wrapper\"><i class=\"icon-note important\"></i></div>\n                     <div class=\"note-content\"><strong>重要</strong> \n                        <ul class=\"ul\" id=\"ul-d5a-6xz-482\">\n                           <li class=\"li\" id=\"li-8h6-16d-gs1\">如果您对实例或数据有修改、变更等风险操作，务必注意实例的容灾、容错能力，确保数据安全。建议您提前创建快照，快照相关信息，请参见<a href=\"/zh/ecs/user-guide/snapshot-overview#concept-qft-2zw-ydb\" title=\"\">快照概述</a>。\n                           </li>\n                           <li class=\"li\" id=\"li-s5y-26d-d8s\">如果您在阿里云平台授权或者提交过登录账号、密码等安全信息，建议您及时修改安全信息。</li>\n                        </ul>\n                     </div>\n                  </div>\n                  <h3 class=\"p h3\" id=\"p-hom-l3f-ysd\">方法一：使用系统盘快照修复Windows实例的RPC组件</h3>\n                  <p class=\"p\" id=\"p-8in-uog-nwm\">如果您在Windows实例的RPC组件正常运行期间创建了系统盘快照，则可以使用系统盘快照修复Windows实例的RPC组件。具体操作，请参见<a href=\"/zh/ecs/user-guide/roll-back-a-disk-by-using-a-snapshot#concept-smh-y2l-xdb\" title=\"\">使用快照回滚云盘</a>。\n                  </p>\n                  <h3 class=\"p h3\" id=\"p-h34-2nb-od6\">方法二：初始化系统盘修复Windows实例的RPC组件</h3>\n                  <p class=\"p\" id=\"p-qoj-63r-x2i\">您可以在ECS控制台上重新初始化该Windows实例的系统盘。重新初始化后，系统盘会恢复到创建时的状态，Windows实例的RPC组件也会恢复正常。具体操作，请参见<a href=\"/zh/ecs/user-guide/re-initialize-a-system-disk#concept-stg-xd3-ydb\" title=\"\">重新初始化系统盘</a>。\n                  </p>\n                  <div class=\"note important note-important\" id=\"note-vxm-3dh-hlw\">\n                     <div class=\"note-icon-wrapper\"><i class=\"icon-note important\"></i></div>\n                     <div class=\"note-content\"><strong>重要</strong> 初始化系统盘后，Windows实例的系统盘数据会丢失。您可以在操作前为系统盘创建快照，待系统盘初始化后，再使用该快照创建云盘并挂载到Windows实例上，即可获取原系统盘数据。\n                        <ul class=\"ul\" id=\"ul-ovl-3oc-wfx\">\n                           <li class=\"li\" id=\"li-bpj-0wp-4b5\">创建快照的操作，请参见<a href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk#concept-eps-gbl-xdb\" title=\"\">创建一个云盘快照</a>。\n                           </li>\n                           <li class=\"li\" id=\"li-15v-whq-980\">使用快照创建云盘的操作，请参见<a href=\"/zh/ecs/user-guide/create-a-disk-from-a-snapshot#concept-yyn-11b-ydb\" title=\"\">使用快照创建云盘</a>。\n                           </li>\n                           <li class=\"li\" id=\"li-ifd-ejv-qua\">挂载云盘的操作，请参见<a href=\"/zh/ecs/user-guide/attach-a-data-disk#concept-llz-b4c-ydb\" title=\"\">挂载数据盘</a>。\n                           </li>\n                        </ul>\n                     </div>\n                  </div>\n               </section>\n            </div>\n         </article>\n      </main>\n   \n\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/an-authentication-error-has-occurred-the-requested-security-package-does-not-exist", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows系统的ECS实例提示“发生身份验证错误。要求的安全包不存在”错误怎么办?</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows系统的ECS实例提示“发生身份验证错误。要求的安全包不存在”错误怎么办?</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:44:34</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"bc11ae10a0pxm\"><p id=\"bc141f18a0tw7\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例时提示“发生身份验证错误。要求的安全包不存在”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"448e04a0a0yrq\" class=\"section\"><h2 id=\"wpJHw\">问题描述</h2><p id=\"bc141f1da0nrz\">通过远程桌面连接Windows系统的ECS实例提示“<b data-tag=\"uicontrol\" id=\"3ebbd516a2kxy\" class=\"uicontrol\">发生身份验证错误。要求的安全包不存在</b>”错误，具体显示如下图。</p><img id=\"1d504740a20qe\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1222235761/p555061.png\" alt=\"88a222264b6245d6c51933d991773ac4\" placement=\"break\" class=\"image break\"></section><section id=\"79373310a081j\" class=\"section\"><h2 id=\"ZTBKD\">问题原因</h2><p id=\"bc141f20a0p33\">Windows系统的ECS实例内关于远程桌面连接实例时身份验证的安全包缺失。</p></section><section id=\"7b566990a0r6i\" class=\"section\"><h2 id=\"eFzzn\">解决方案</h2><ol id=\"bc141f22a024z\"><li id=\"bc141f23a045w\"><p id=\"82adfd70a01za\">通过VNC连接Windows实例。</p><p id=\"82adfd71a01sr\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"9deec421a0c92\"><p id=\"9deec420a0dmg\">右键单击<img placement=\"inline\" id=\"44a7161295d4p\" width=\"25\" alt=\"Dingtalk_20210510142550.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"3ebc2334a2cgq\" class=\"uicontrol\">运行</b><b>。</b></p><img id=\"e9d35941a26kh\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5355605761/p553502.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li><li id=\"888a3bf1a0fzb\"><p id=\"888a3bf0a01w1\">在<b data-tag=\"uicontrol\" id=\"3ebc233ba2cjh\" class=\"uicontrol\">运行</b>中输入<code data-tag=\"code\" class=\"code\">gpedit.msc</code>，单击<b data-tag=\"uicontrol\" id=\"3ebc4a40a2sga\" class=\"uicontrol\">确定</b>。</p></li><li id=\"bc141f25a011v\"><p id=\"d722ee60a0anu\">在<b data-tag=\"uicontrol\" id=\"3ebc4a44a2hrj\" class=\"uicontrol\">本地组策略编辑器</b>窗口，依次单击<b data-tag=\"uicontrol\" id=\"3ebc4a46a2pq4\" class=\"uicontrol\">计算机配置 &gt; 管理模板 &gt; Windows 组件 &gt; 远程桌面服务 &gt; 远程桌面会话主机 &gt; 安全</b>，然后右键单击<b data-tag=\"uicontrol\" id=\"3ebc4a48a2bqd\" class=\"uicontrol\">要求使用网络级别的身份验证对远程连接用户进行身份验证</b>，选择<b data-tag=\"uicontrol\" id=\"3ebc4a4aa20a3\" class=\"uicontrol\">编辑</b>。</p><img id=\"e830ccd1a2uz9\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5355605761/p553506.png\" alt=\"113\" placement=\"break\" width=\"550\" class=\"image break\"></li><li id=\"bc141f27a00is\"><p id=\"bc141f28a0v1z\">在<b data-tag=\"uicontrol\" id=\"3ebc4a50a2m7k\" class=\"uicontrol\">要求使用网络级别的身份验证对远程连接用户进行身份验证</b>窗口，选中<b data-tag=\"uicontrol\" id=\"3ebc4a52a2hmz\" class=\"uicontrol\">已禁用</b>，单击<b data-tag=\"uicontrol\" id=\"3ebc4a54a21sc\" class=\"uicontrol\">确定</b>。</p><img id=\"e6d13cd1a2y3w\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4355605761/p553512.png\" alt=\"114\" placement=\"break\" width=\"550\" class=\"image break\"></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-am-prompted-with-a-remote-desktop-disconnected-error-when-i-connect-to-a-windows-instance-by-using-remote-desktop", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows系统的ECS实例时，提示“远程桌面连接已断开”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows系统的ECS实例时，提示“远程桌面连接已断开”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:45:34</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"d05596f0a0xje\"><p data-tag=\"shortdesc\" id=\"d05aa008a0zeg\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows系统的ECS实例时，提示“远程桌面连接已断开”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"se-knowledge\" class=\"section\"><section id=\"0409fa90a04vw\" class=\"section\"><h2 id=\"AdhYY\">问题描述</h2><p id=\"d05aa00ca044e\">通过远程桌面连接Windows系统的ECS实例时失败，并提示“<b data-tag=\"uicontrol\" id=\"2b865f80a2g73\" class=\"uicontrol\">远程桌面连接已断开</b>”错误，具体显示如下图。</p><img placement=\"break\" alt=\"131\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9290235761/p555011.png\" id=\"2a6af3b0a2amd\" class=\"image break\"></section><section id=\"05f24290a0nih\" class=\"section\"><h2 id=\"aridp\">问题原因</h2><p id=\"d05aa00da0yzu\">通过VNC登录Windows实例，<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/use-logs-in-windows-instances#section-m52-fpr-gfb\">进入事件查看器查看系统日志</a>，提示“<b data-tag=\"uicontrol\" id=\"28caa6a0a2on1\" class=\"uicontrol\">终端服务器安全层在协议流中检测到错误，并已取消客户端连接</b>”的错误，该问题可能是由于ECS实例的注册表中Certificate子键损坏导致的。</p><div id=\"bf373731a2vy8\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"bff026f0a22fj\">注册表中Certificate子键负责终端服务通信中数据信息的认证和加密，它一旦被损坏，终端服务的协议组件就会检测到错误，中断客户端与ECS实例之间的通信。导致Certificate子键损坏的原因很多，如管理员安装和卸载某些系统软件、对终端服务参数的不合理配置等。</p></div></div></section><section id=\"08e71890a0czx\" class=\"section\"><h2 id=\"xjYnQ\">解决方案</h2><p id=\"d05ac712a04xu\">本文操作以Windows Server 2008 R2系统版本为例，其他Windows系统版本操作类似。</p><ol data-spm-anchor-id=\"a2c4g.11186623.2.i4.6c9b2e7eHHOmay\" class=\"ol steps\" id=\"steps-a70-kum-4i5\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i4.237d5e3brVAKaj\" id=\"d05ac713a0x89\"><p id=\"a5cff0d0a0g47\">通过VNC连接Windows实例。</p><p id=\"b784de80a03j0\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"44a7160d957a6\"><p id=\"a5cff0d2a0uf1\">单击<b data-tag=\"uicontrol\" id=\"09993c30a3wig\" class=\"uicontrol\">开始 &gt; 运行</b>，在<b data-tag=\"uicontrol\" id=\"2b86869fa2no2\" class=\"uicontrol\">运行</b>对话框中输入<code data-tag=\"code\" class=\"code\">regedit</code>，单击<b data-tag=\"uicontrol\" id=\"2b86ada1a24bm\" class=\"uicontrol\">确定</b>。</p></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i4.237d5e3brVAKaj\" id=\"d05ac717a0p3s\"><p id=\"d05ac718a00nz\">在<b data-tag=\"uicontrol\" id=\"2b86ada5a21l9\" class=\"uicontrol\">注册表编辑器</b>窗口，依次选择<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE&gt;SYSTEM&gt;ControlSet001&gt;Control&gt;Terminal Server&gt;RCM</code>，右键单击<b data-tag=\"uicontrol\" id=\"2b86ada8a2zm4\" class=\"uicontrol\">Certificate</b>，选择<b data-tag=\"uicontrol\" id=\"2b86adaaa242f\" class=\"uicontrol\">删除</b>，然后单击<b data-tag=\"uicontrol\" id=\"daa6ff10a30fy\" class=\"uicontrol\">是</b>。</p><img id=\"9ab3d770a3viu\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4265935761/p555585.png\" alt=\"1231321\" placement=\"break\" width=\"550\" class=\"image break\"></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i4.237d5e3brVAKaj\" id=\"d05ac719a0d3v\"><p id=\"d05ac71aa0dc4\">单击<b data-tag=\"uicontrol\" id=\"deaad410a3g57\" class=\"uicontrol\">开始 &gt; 管理工具 &gt; 远程桌面服务</b>，然后单击<b data-tag=\"uicontrol\" id=\"e02b5990a3mb4\" class=\"uicontrol\">远程桌面会话主机配置</b>。</p><img id=\"bb009450a3mqc\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4265935761/p555588.png\" alt=\"image\" placement=\"break\" width=\"550\" class=\"image break\"></li><li id=\"8aaf3111a06y7\"><p id=\"171aeb00a3enz\">进入<b data-tag=\"uicontrol\" id=\"23698d80a3ayj\" class=\"uicontrol\">RD 会话主机配置区域</b>，双击<b data-tag=\"uicontrol\" id=\"24fb2a00a3n0k\" class=\"uicontrol\">RDP-Tcp</b>，进入<b data-tag=\"uicontrol\" id=\"26ebd670a3zhh\" class=\"uicontrol\">RDP-Tcp 属性</b>页面，单击<b data-tag=\"uicontrol\" id=\"3170b570a3woj\" class=\"uicontrol\">常规</b>，将<b data-tag=\"uicontrol\" id=\"85f313e0a3dya\" class=\"uicontrol\">安全层</b>选项修改为<b data-tag=\"uicontrol\" id=\"8457b360a3067\" class=\"uicontrol\">RDP 安全层</b>，然后单击<b data-tag=\"uicontrol\" id=\"89b63660a3ruv\" class=\"uicontrol\">确定</b>保存配置。</p><img id=\"59d0dc20a3th2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4265935761/p555593.png\" alt=\"123123213\" placement=\"break\" width=\"550\" class=\"image break\"></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i4.237d5e3brVAKaj\" id=\"d05ac71fa0z55\"><p id=\"8a6d5b30a0mzs\">重启Windows实例或重启服务器以更新配置。</p></li><li id=\"eb261931a0i2e\"><p id=\"f53e0590a0w57\">使用远程桌面连接Windows实例，确认可以正常登录。</p></li></ol></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-can-log-on-to-a-windows-instance-by-using-vnc-but-cannot-use-remote-desktop-to-connect-to-the-windows-instance-with-the-same-account-and-password", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>使用相同的账号和密码，通过VNC登录Windows实例成功，通过远程桌面连接Windows实例却失败怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>使用相同的账号和密码，通过VNC登录Windows实例成功，通过远程桌面连接Windows实例却失败怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:45:39</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"9bdf3e30a6uhl\"><p data-tag=\"shortdesc\" id=\"9be4e387a6t68\" class=\"shortdesc\">本文介绍通过VNC可以正常连接Windows系统的ECS实例，但使用相同的账号和密码，通过远程桌面连接Windows系统的ECS实例失败的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"5ec92960a61zh\" class=\"section\"><h2 id=\"9be4e38ba6ip1\">问题描述</h2><p id=\"6bfea210a6xbq\">本地用户在通过VNC成功登录Windows系统的ECS实例的情况下，使用相同的账号和密码，通过远程桌面连接Windows系统的ECS实例失败。登录ECS管理控制台查看Windows的系统日志提示“<b data-tag=\"uicontrol\" id=\"1444e660a6j67\" class=\"uicontrol\"><b>未知用户名或密码错误。</b></b>”错误，具体报错信息如下图所示。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9668375761/p519877.png\" alt=\"{2242F6BB-10AC-4EBD-926E-43F9E02AC704}_20200526142954.jpg\" width=\"612\" height=\"403\" placement=\"break\" class=\"image break\"></section><section id=\"60841fd0a6tzx\" class=\"section\"><h2 id=\"Ckhth\">问题原因</h2><p id=\"9be50a93a6mhe\">Windows系统的ECS实例内本地安全设置为<b data-tag=\"uicontrol\" id=\"349a8ed0a6134\" class=\"uicontrol\"><b>仅来宾 - 对本地用户进行身份验证，其身份为来宾</b></b>模式。</p><div type=\"note\" id=\"a24c8730a6k0c\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"a46d4450a6ow3\">设置为该模式后，意味着任何可以通过网络向Windows ECS实例进行身份验证的本地用户都只拥有<b data-tag=\"uicontrol\" id=\"24bec690a60ax\" class=\"uicontrol\"><b>来宾权限</b></b>，这会导致本地电脑通过远程桌面连接ECS实例失败。</p></div></div></section><section id=\"63299d50a6mma\" class=\"section\"><h2 id=\"Xmehi\">解决方案</h2><ol id=\"9be531a3a643x\"><li id=\"CDJwQ\"><p id=\"6d514450a6eeh\">通过VNC连接Windows实例。</p><p id=\"6d516b60a6mer\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li data-spm-anchor-id=\"a2c9r.12641742.0.i5.20achEdShEdSrg\" id=\"9be531a5a6fr4\"><p id=\"d8b7f050a6w5f\">单击<b data-tag=\"uicontrol\" id=\"dfd0f490a6788\" class=\"uicontrol\"><b>开始 &gt; 运行</b></b>，打开<b data-tag=\"uicontrol\" id=\"140e1030a6eny\" class=\"uicontrol\"><b>运行</b></b>窗口，输入<b data-tag=\"uicontrol\" id=\"ad570990a6oo0\" class=\"uicontrol\"><b>gpedit.msc</b></b>，然后单击<b data-tag=\"uicontrol\" id=\"d59b1560a6y3m\" class=\"uicontrol\"><b>确定</b></b>，进入<b data-tag=\"uicontrol\" id=\"d851a9e0a6hlo\" class=\"uicontrol\"><b>本地组策略编辑器</b></b>窗口。</p></li><li data-spm-anchor-id=\"a2c9r.12641742.0.i5.20achEdShEdSrg\" id=\"9be531a7a6gqj\"><p id=\"9be531a8a6pe2\">依次单击<b data-tag=\"uicontrol\" id=\"e34ecd80a6qtd\" class=\"uicontrol\"><b>计算机配置 &gt; Windows 设置 &gt; 安全设置 &gt; 本地策略 &gt; 安全选项</b></b>，双击<b data-tag=\"uicontrol\" id=\"798c5010a6adx\" class=\"uicontrol\"><b>网络访</b><b>问:</b><b> 本地</b><b>帐户</b><b>的共享和安全模型</b></b>。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9668375761/p519878.png\" alt=\"{2028DD10-A3EE-4384-9AF5-C0CFC8E46309}_20200526150846.jpg\" width=\"636\" height=\"447\" id=\"517572f1a6od3\" placement=\"break\" class=\"image break\"></li><li id=\"9be531a9a6o9w\"><p id=\"9be531aaa625t\">在<b data-tag=\"uicontrol\" id=\"ba6b2fd0a7qx0\" class=\"uicontrol\"><b>本地安全设置</b></b>页签下将<b data-tag=\"uicontrol\" id=\"b7e26650a68nw\" class=\"uicontrol\"><b>仅来宾 - 对本地用户进行身份验证，其身份为来宾</b></b>修改为<b data-tag=\"uicontrol\" id=\"bcf8e3d0a6r9h\" class=\"uicontrol\"><b>经典 - 对本地用户进行身份验证，不改变其本来身份</b></b>，然后单击<b data-tag=\"uicontrol\" id=\"c7ff27d0a6ghu\" class=\"uicontrol\"><b>确定</b></b>保存配置。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9668375761/p519879.png\" alt=\"{1B1BAFBF-A09B-4BAB-80B1-CB1712D30164}_20200526151028.jpg\" width=\"412\" height=\"554\" placement=\"break\" id=\"43e353f1a6qnj\" class=\"image break\"></li><li id=\"9be531aba6vmz\"><p id=\"9be531aca6yux\">单击<b data-tag=\"uicontrol\" id=\"2d022190a6wpm\" class=\"uicontrol\"><b>开始 &gt; 运行</b></b>，打开<b data-tag=\"uicontrol\" id=\"062ce6d0a6hl1\" class=\"uicontrol\"><b>运行</b></b>窗口，输入<b data-tag=\"uicontrol\" id=\"dcb4b5e0a6sq4\" class=\"uicontrol\"><b>cmd</b></b>，然后单击<b data-tag=\"uicontrol\" id=\"df31eae0a6i7v\" class=\"uicontrol\"><b>确定</b></b>，打开命令行工具。</p></li><li id=\"9be531ada6ug0\"><p id=\"9be531aea6qqn\">执行以下命令，使配置生效。</p><pre data-tag=\"codeblock\" id=\"9bdf3e32a6zxf\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>gpupdate /force</code></pre></li><li id=\"9be558b1a62o9\"><p id=\"19a12d30a6m5t\">确认通过远程桌面连接Windows实例成功。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-cannot-stay-connected-to-a-windows-instance-by-using-remote-desktop", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例无法长时间保持连接如何解决？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例无法长时间保持连接如何解决？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:45:29</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"74dac4909fsop\"><p data-tag=\"shortdesc\" id=\"74ddf8e59fgun\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例无法长时间保持连接问题的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"d3a239e09fiyr\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"22ee88c0a5of3\">用户通过本地电脑连接Windows系统的ECS实例后，如果1-2分钟内未在ECS实例内进行操作，则会发现ECS实例连接已断开，且无法再次连接ECS实例。</p></section><section id=\"d5377fe09f228\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p class=\"from-extensions-error\" id=\"74ddf8e79ffoe\">Windows系统的ECS实例中Routing and Remote Access服务的启动类型为“<b data-tag=\"uicontrol\" id=\"b659cad0a2yom\" class=\"uicontrol\"><b>自动（延迟启动）</b></b>”。</p><div type=\"note\" id=\"02343d01a5mjq\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"62867100a5hmf\">Windows系统中某一服务的启动类型为“<b data-tag=\"uicontrol\" id=\"806ed810a5kxs\" class=\"uicontrol\"><b>自动（延迟启动）</b></b>”时，Windows系统会在启动一段时间后延迟启动该服务项，可以很好地解决一些低配置电脑因为加载服务项过多导致电脑启动缓慢或启动后响应慢的问题。但是当ECS实例内<code data-tag=\"code\" class=\"code\">Routing and Remote Access</code>服务启动类型为“<b data-tag=\"uicontrol\" id=\"8dc76400b3w07\" class=\"uicontrol\"><b>自动（延迟启动）</b></b>”时，通过远程桌面连接ECS实例后系统会在很短的时间内断开远程连接。</p></div></div></section><section id=\"d6c069d09fkgd\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><ol id=\"d79bc3c09fps9\"><li id=\"d79bc3c19fl2u\"><p id=\"d79bc3c29fvv9\">通过VNC连接Windows实例。</p><p id=\"d79bc3c39fk85\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"d79bc3c49fq2x\"><p id=\"d79bc3c59fmu7\">单击<img placement=\"inline\" id=\"d79bc3c69fjqe\" width=\"25\" alt=\"Dingtalk_20210510142550.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" class=\"image inline\">图标，打开<b data-tag=\"uicontrol\" id=\"84e80b9ba2zpp\" class=\"uicontrol\"><b>控制面板</b></b>，找到<b data-tag=\"uicontrol\" id=\"84e80b9da2qo9\" class=\"uicontrol\"><b>系统和安全</b></b>。</p></li><li id=\"d79bc3c79fyz2\"><p id=\"d79bc3c89fuxd\">在<b data-tag=\"uicontrol\" id=\"84e832a1a2fsj\" class=\"uicontrol\"><b>控制面板</b></b>页面，依次单击<b data-tag=\"uicontrol\" id=\"84e832a3a2pdx\" class=\"uicontrol\"><b>系统和安全 &gt; 管理工具</b></b>，然后双击打开<b data-tag=\"uicontrol\" id=\"84e832a5a2264\" class=\"uicontrol\"><b>服务</b></b>。</p></li><li id=\"7c536da09fy77\"><p id=\"7c5346909f86j\">在<b data-tag=\"uicontrol\" id=\"cbc083a0a28q4\" class=\"uicontrol\"><b>服务</b></b>框中，双击<b data-tag=\"uicontrol\" id=\"84e832b2a2qem\" class=\"uicontrol\"><b>Routing and Remote Access</b></b>服务，打开<b data-tag=\"uicontrol\" id=\"84e832b4a24l3\" class=\"uicontrol\"><b>Routing and Remote Access的属性</b></b>窗口。</p></li><li id=\"e5ce73119f5lt\"><p id=\"f0746ea09fw72\">在<b data-tag=\"uicontrol\" id=\"baf11b50a241n\" class=\"uicontrol\"><b>启动类</b><b>型(</b><b>E)：</b></b>框中，选择<b data-tag=\"uicontrol\" id=\"84e859b1a29xh\" class=\"uicontrol\"><b>禁用</b></b>，单击<b data-tag=\"uicontrol\" id=\"84e859b3a2c78\" class=\"uicontrol\"><b>确定</b></b>。</p><img id=\"b8642781a22zj\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6252035761/p553139.png\" alt=\"7\" placement=\"break\" height=\"500\" class=\"image break\"></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/to-sign-in-remotely-you-need-the-right-to-sign-in-through-remote-desktop-services", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例提示“要远程登录，你需要具有通过远程桌面服务进行登录的权限。”信息如何解决?</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例提示“要远程登录，你需要具有通过远程桌面服务进行登录的权限。”信息如何解决?</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:45:24</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"9b858d609fnrw\"><p id=\"9b8873979fe6y\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例时无法使用Administrator用户登录问题的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"cec953e09fobi\" class=\"section\"><h2 id=\"XbeWY\">问题现象</h2><p id=\"9b8873989fqnj\">在使用Administrator用户通过远程桌面登录实例时提示以下信息。</p><img placement=\"break\" alt=\"11\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6206135761/p554208.png\" id=\"f2dedb81a2ob0\" class=\"image break\"></section><section id=\"d04fccd09fwrh\" class=\"section\"><h2 id=\"tayMx\">问题原因</h2><p id=\"1caf45f0a221z\">Windows实例的本地安全策略中，设置了禁止Administrator用户作为远程桌面服务客户端登录。</p></section><section id=\"d4d380309fwx5\" class=\"section\"><h2 id=\"EFTFF\">解决方案</h2><p id=\"9b8873a49f2oj\">请您参考以下步骤进行操作：</p><ol id=\"9b8873a59fg7o\"><li id=\"9b8873a69fjuc\"><p id=\"700963319fsj4\">通过VNC连接Windows实例。</p><p id=\"700963329fytz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"4f13bc219fs9z\"><p id=\"4f13bc209f6gh\">单击<img placement=\"inline\" id=\"910cdb019fe05\" width=\"25\" alt=\"Dingtalk_20210510142550.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" class=\"image inline\">图标，打开<b data-tag=\"uicontrol\" id=\"b5fa7ebca265a\" class=\"uicontrol\">控制面板</b>，找到<b data-tag=\"uicontrol\" id=\"b5fa7ebea2a1a\" class=\"uicontrol\">系统和安全</b>。</p></li><li id=\"9b889aa19f8l3\"><p id=\"9b889aa29f0r8\">在<b data-tag=\"uicontrol\" id=\"b5faa5c3a21er\" class=\"uicontrol\">控制面板</b>页面，依次单击<b data-tag=\"uicontrol\" id=\"b5faa5c5a2jtx\" class=\"uicontrol\">系统和安全 &gt; 管理工具</b>，然后双击打开<b data-tag=\"uicontrol\" id=\"b5faa5c7a2nwu\" class=\"uicontrol\">本地安全策略</b>。</p></li><li id=\"9b889aa39f2i2\"><p id=\"9b889aa49fu3d\">在<b data-tag=\"uicontrol\" id=\"b5faa5d2a2kqk\" class=\"uicontrol\">本地安全策略</b>页面，单击<b data-tag=\"uicontrol\" id=\"b5faa5d4a2w4s\" class=\"uicontrol\">本地策略 &gt; 用户权限分配</b>，在右侧选项卡中双击<b data-tag=\"uicontrol\" id=\"b5faa5d6a2tlo\" class=\"uicontrol\">拒绝通过远程桌面服务登录</b>。</p><img id=\"f51347b1a210m\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6206135761/p552634.png\" alt=\"6\" placement=\"break\" width=\"500\" class=\"image break\"></li><li id=\"9b889aa59fz28\"><p id=\"9b889aa69fjq4\">在<b data-tag=\"uicontrol\" id=\"b5faccd0a25y6\" class=\"uicontrol\">拒绝通过远程桌面服务登录</b>的属性窗口，删除已添加的Administrator用户，然后单击<b data-tag=\"uicontrol\" id=\"25384a60a21s2\" class=\"uicontrol\">确定</b>。</p><img id=\"0005dca1a2psy\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6206135761/p552624.png\" alt=\"5\" placement=\"break\" height=\"400\" class=\"image break\"></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-allow-remote-assistance-connections-to-this-computer-option-in-remote-assistance-cannot-be-selected-for-an-instance-that-runs-windows-server-2008-or-2012", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>Windows Server 2008与2012系统的ECS实例无法启用远程协助中的“允许远程协助连接这台计算机”选项怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows Server 2008与2012系统的ECS实例无法启用远程协助中的“允许远程协助连接这台计算机”选项怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:45:19</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"f2f1a3608c8gn\"><p data-tag=\"shortdesc\" id=\"f2f992a08chjr\" class=\"shortdesc\">本文介绍在Windows Server 2008与2012系统的ECS实例中，无法启用远程协助中的“允许远程协助连接这台计算机”选项问题的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"cc3352a09fcgm\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"f2f9b9b08c6bi\">Windows Server 2008与2012系统的ECS实例在开启远程协助时，会出现远程协助灰色并无法选中开启的情况。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5206135761/p518836.png\" id=\"1350fab1a21gh\" class=\"image break\"></section><section id=\"c9bd70a09fq3a\" class=\"section\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"f2f9b9b38c6px\">Windows Server 2008与2012系统的ECS实例内未安装远程协助功能。</p></section><section id=\"c5321c209f6s7\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"f2f9e0c88cxmg\">以下操作包含Windows Server 2008与2012两种系统版本的解决方案，请根据实际情况，选择对应的方案进行修复。</p><h3 id=\"75eedc609fs9f\"><b>Windows Server 2008</b></h3><ol id=\"f2fa07d28cps0\"><li id=\"f2fa07d38crkp\"><p id=\"e04fadf19fcdv\">远程登录ECS实例。</p><p id=\"e04fadf29f0nj\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"d5744a809f6nt\"><p id=\"d57423709fmzx\">选择<b data-tag=\"uicontrol\" id=\"19de4879a2j51\" class=\"uicontrol\">开始 &gt; 控制面板 &gt; 管理工具 &gt; 服务器管理器 &gt; 功能</b>， 单击右侧<b data-tag=\"uicontrol\" id=\"19de487ba2ydd\" class=\"uicontrol\">添加功能</b><b>。</b></p><img width=\"550\" height=\"342\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4206135761/p518837.png\" id=\"171f19b1a2saa\" class=\"image break\"></li><li id=\"f2fa07d58ct53\"><p id=\"f2fa07d68cnit\">在功能列表里找到并选中<b data-tag=\"uicontrol\" id=\"19de6f83a2gt1\" class=\"uicontrol\">远程协助</b>，单击<b data-tag=\"uicontrol\" id=\"19de6f85a2kgc\" class=\"uicontrol\">下一步</b>直到完成。</p><img height=\"405\" width=\"550\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4206135761/p518838.png\" id=\"1a6f7d31a241g\" class=\"image break\"></li></ol><h3 id=\"7f3632509fm9q\"><b>Windows Server 2012</b></h3><ol id=\"f2fa07d98c26x\"><li id=\"f2fa07da8cqpi\"><p id=\"d23f7c41a8dkz\">远程登录ECS实例。</p><p id=\"d23f7c42a84au\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"e6d069d19fnla\"><p id=\"e6d069d09fb2u\">单击Winodws任务栏的<b data-tag=\"uicontrol\" id=\"19de6f91a2ukc\" class=\"uicontrol\">服务器管理器</b><b>。</b></p><img width=\"550\" placement=\"break\" alt=\"image\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4206135761/p552540.png\" id=\"1f2cde31a2ekz\" class=\"image break\"></li><li id=\"f2fa2ee18cr23\"><p id=\"f2fa2ee28cycg\">在弹出的<b data-tag=\"uicontrol\" id=\"19de9691a2d71\" class=\"uicontrol\">服务器管理器</b>窗口，单击右侧<b data-tag=\"uicontrol\" id=\"19de9693a2ewt\" class=\"uicontrol\">添加角色和功能</b><b>。</b></p><img width=\"550\" placement=\"break\" alt=\"image\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4206135761/p552539.png\" id=\"20cf91b1a2ym9\" class=\"image break\"></li><li id=\"f2fa2ee48csc3\"><p id=\"f2fa2ee58c202\">在弹出的<b data-tag=\"uicontrol\" id=\"19de969aa2uhh\" class=\"uicontrol\">添加角色和功能向导</b>中，单击<b data-tag=\"uicontrol\" id=\"19de969ca2pwv\" class=\"uicontrol\">下一步</b>直到<b data-tag=\"uicontrol\" id=\"19de969ea23ih\" class=\"uicontrol\">功能</b>设置部分，找到并选中<b data-tag=\"uicontrol\" id=\"19debda0a24sy\" class=\"uicontrol\">远程协助，</b>单击<b data-tag=\"uicontrol\" id=\"19debda2a23ic\" class=\"uicontrol\">下一步</b>直到完成。</p><img placement=\"break\" width=\"550\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4206135761/p518839.png\" id=\"2358fbb1a229b\" class=\"image break\"></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/after-installing-software-on-windows-instances-of-ecs-execute-the-command-from-the-command-line-tools-prompt-command-not-found-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>在Windows系统的ECS实例上安装软件后，通过命令行工具执行命令时提示“command not found”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在Windows系统的ECS实例上安装软件后，通过命令行工具执行命令时提示“command not found”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-13 12:23:08</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"38b8c4606589l\"><p data-tag=\"shortdesc\" id=\"38bbd1a165c6p\" class=\"shortdesc\">本文介绍在Windows系统的ECS实例上安装软件后，通过命令行工具执行命令时提示“command not found”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"6b3c88a0a82fp\" class=\"section\"><h2 data-lake-id=\"7e5ee25ca606883aba99127ff75f24c8_h2_0\" id=\"iAj6g\">问题现象</h2><p id=\"38bbd1a265oza\">部分软件在Windows系统上安装后，可能还需要使用命令行工具执行命令，但通过命令行工具执行命令时会提示“<b data-tag=\"uicontrol\" id=\"b3111820a844y\" class=\"uicontrol\">command not found</b>”错误。</p></section><section id=\"69bd3ba0a8kkt\" class=\"section\"><h2 data-lake-id=\"2e49486797f4200f836f8540b7a5df21_h2_1\" id=\"4rM4I\">问题原因</h2><p id=\"38bbd1a3659ld\">软件安装后，在未添加环境变量的情况下，使用命令行工具执行命令将导致报错。</p></section><section id=\"684dcd20a8gxu\" class=\"section\"><h2 data-lake-id=\"4ba58f8d2011054eb1c0cf66f867ff33_h2_2\" id=\"AywdZ\">解决方案</h2><p id=\"38bbd1a465amm\">请您按照下列步骤设置及查看环境变量。</p><ol id=\"165d0eb2a8njw\"><li id=\"165d0eb0a8ltz\"><p id=\"4c26bdc0a82jd\">在Windows系统桌面使用<code data-tag=\"code\" class=\"code\">Win+R</code>组合键打开<b data-tag=\"uicontrol\" id=\"66d5cbc0a8oot\" class=\"uicontrol\">运行</b>对话框，并输入<code data-tag=\"code\" class=\"code\">cmd</code>命令，然后单击<b data-tag=\"uicontrol\" id=\"7f308980a8nz1\" class=\"uicontrol\">确定</b>，打开命令行工具。</p></li><li id=\"1a92a210a8rv0\"><p id=\"38bbd1a7652lb\">执行以下命令设置环境变量。</p><pre id=\"yia3kq\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>setx /m PATH \"%PATH%\";[$Softpath]</code></pre><div type=\"note\" id=\"0e5bfef1a8hq8\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"145c1922a8xpl\"><li id=\"145c1920a85in\"><p id=\"101d36f0a8g92\">[$Softpath]要替换成软件执行程序路径，例如<code data-tag=\"code\" class=\"code\">C:\\dig</code>。</p></li><li id=\"15a2c9f1a8ab2\"><p id=\"17c5d100a8kdl\">如果只是临时添加环境变量，请执行以下命令。</p><pre id=\"upv1vr\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>set PATH=%PATH%;[$Softpath]</code></pre></li></ul></div></div></li><li id=\"c9961991a8ypd\"><p id=\"cbe00990a851b\">执行<code data-tag=\"code\" class=\"code\">set path</code>命令，确认当前的环境变量已生效。</p></li><li id=\"7334c741a90g3\"><p id=\"8a948330a9tsz\">重新执行安装软件后的后续命令，确认不会提示“<b data-tag=\"uicontrol\" id=\"b3111820a844y\" class=\"uicontrol\">command not found</b>”错误。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-server-2012-instances-of-ecs-system-can-t-allow-a-single-user-to-connect-multiple-remote-desktop-session", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>Windows Server 2012系统的ECS实例无法允许单个用户连接多个远程桌面会话怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows Server 2012系统的ECS实例无法允许单个用户连接多个远程桌面会话怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-09 13:58:37</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"97de3bd09fk92\"><p id=\"97e149189f2ur\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍Windows Server 2012系统的ECS实例设置允许单个用户连接多个远程桌面会话的方法。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"a0f5ddf0a25n5\" class=\"section\"><h2 id=\"fbf78390a2hup\"><b>问题现象</b></h2><p id=\"08aa97c0a24d6\">通过远程桌面连接Windows Server 2012系统的ECS实例时，无法允许单个用户连接多个远程桌面会话。</p></section><section id=\"a2be41e0a2pl9\" class=\"section\"><h2 id=\"ffe0cbb0a2f1x\"><b>问题原因</b></h2><p id=\"0d41c890a27r6\">Windows 2012系统的ECS实例默认只允许单个用户连接一个远程桌面会话，如果已存在一个远程桌面会话，当另一个远程桌面会话连接时会移除之前的远程桌面会话。</p></section><section id=\"6ecf33509foqj\" class=\"section\"><h2 id=\"4fd8618c\">解决方案</h2><p id=\"72c41e71a3v2a\">参考以下操作步骤修改注册表中<code data-tag=\"code\" class=\"code\">fSingleSessionPerUser</code>的键值。</p><div id=\"16b41a909facu\" type=\"important\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"97e1491b9fpgc\">该操作包含注册表配置，错误的注册表配置可能导致系统蓝屏、数据丢失。请您操作前务必对系统盘、数据盘创建快照后进行。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><ol id=\"44a7163095tgv\"><li id=\"44a7163195o4e\"><p id=\"afe813109fv53\">通过VNC连接Windows实例。</p><p id=\"afe813119fhun\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"44a7163495x61\"><p id=\"afe813129fivb\">右键单击<img id=\"53ca3011a33ab\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530260.png\" alt=\"win2012开始图标\" placement=\"inline\" width=\"25\" height=\"25\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"514d7042a3g8p\" class=\"uicontrol\">运行</b>，在<b data-tag=\"uicontrol\" id=\"514d9750a3k6e\" class=\"uicontrol\">运行</b>对话框中输入<code data-tag=\"code\" class=\"code\">regedit</code>，单击<b data-tag=\"uicontrol\" id=\"514d9751a3d6x\" class=\"uicontrol\">确定</b>，进入<b data-tag=\"uicontrol\" id=\"514d9752a38ij\" class=\"uicontrol\">注册表编辑器</b>窗口。<img placement=\"break\" alt=\"win2016运行窗口\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530516.png\" id=\"514d9753a3iby\" class=\"image break\"></p></li><li id=\"44a7164295la8\"><p id=\"afe83a209fgsd\">在<b data-tag=\"uicontrol\" id=\"498ba2f9a27n2\" class=\"uicontrol\">注册表编辑器</b>页面的<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server</code>路径下，右侧找到<b data-tag=\"uicontrol\" id=\"498ba2fca2pqf\" class=\"uicontrol\">fSingleSessionPerUser</b>键值。<img id=\"41ec39109f5uj\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3115794761/p552522.png\" alt=\"1\" placement=\"break\" width=\"600\" class=\"image break\"></p></li><li id=\"97e170209fyxy\"><p id=\"97e170219fn4q\">双击<b data-tag=\"uicontrol\" id=\"498bca04a2nox\" class=\"uicontrol\">fSingleSessionPerUser</b>键值，将<b data-tag=\"uicontrol\" id=\"498bca06a2pd4\" class=\"uicontrol\">数值数据</b>框中内容修改为<b data-tag=\"uicontrol\" id=\"498bca08a2amx\" class=\"uicontrol\">0</b>（默认键值是<b>1</b>），单击<b data-tag=\"uicontrol\" id=\"498bca0ba2f0i\" class=\"uicontrol\">确定</b>。<img id=\"5dd41fc19f9wk\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4115794761/p552523.png\" alt=\"2\" placement=\"break\" class=\"image break\"></p></li><li id=\"5b1c79d19fmzf\"><p id=\"5b1c79d09fxz5\">进行远程桌面会话连接。</p><p id=\"0da7b8809fdl8\">若多个远程桌面会话连接成功，则表示该问题已解决。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-am-prompted-with-the-0x112f-error-code-when-i-connect-to-a-windows-instance-over-rdp", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例出现报错代码“0x112f”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例出现报错代码“0x112f”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-09 13:26:23</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"main-2291681\"><p data-tag=\"shortdesc\" id=\"fc680b909flqq\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例时出现报错代码“0x112f”错误的解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"d32475d09fk1d\" class=\"section\"><h2 id=\"fc67e4889fans\"><b>问题现象</b></h2><p id=\"266da4e09fagz\">远程连接Windows实例时提示：“<b data-tag=\"uicontrol\" id=\"b5450590a3292\" class=\"uicontrol\">由于一个协议错误（代码: 0x112f），远程会话将被中断。请重新跟远程计算机连接。</b>”错误。<img placement=\"break\" alt=\"image\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2206135761/p552449.png\" id=\"2c42b7709frhw\" class=\"image break\"></p></section><section id=\"d69cfac09fd3l\" class=\"section\"><h2 id=\"0dd541e09ftgz\"><b>问题原因</b></h2><p id=\"34840f109f8c6\">可能是因为此Windows实例内存不足导致远程会话连接中断。</p></section><section id=\"d8a4ffc09f8vc\" class=\"section\"><h2 id=\"0f4a55b09fvlf\"><b>解决方案</b></h2><p id=\"f4ca5cf1a3u54\">根据实际情况，参考以下两种解决方案进行修复。</p><section id=\"daa479409f2q9\" class=\"section\"><h3 id=\"1a5aabd09fwhu\"><b>方案一：</b>升配ECS实例的规格大小</h3><p id=\"0f5510d09fcnf\">您可以升配ECS实例的规格大小，使ECS实例获得足够的空闲内存。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/upgrade-the-instance-types-of-subscription-instances\">包年包月实例升配规格</a>或<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-the-instance-type-of-a-pay-as-you-go-instance\">按量付费实例变配规格</a>。</p></section><section id=\"dc758fc09fryp\" class=\"section\"><h3 id=\"43fca1509fpj7\"><b>方案二：</b>开启ECS实例的虚拟内存</h3><p id=\"1702b3f09f4zi\">您可以在ECS实例中开启虚拟内存，使ECS实例获得足够的空闲内存。具体操作，请参考<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-configure-the-virtual-memory-of-a-windows-instance\">如何配置Windows实例的虚拟内存</a>。</p></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/remote-desktop-service-certification-due-to-remote-login-windows-instance-how-to-resolve-the-failure", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>远程桌面服务认证到期导致远程登录Windows实例失败如何解决？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>远程桌面服务认证到期导致远程登录Windows实例失败如何解决？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-09 13:51:07</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main role=\"main\"><article role=\"article\" aria-labelledby=\"title_om8_vec_8gs\"><div class=\"body taskbody\" data-tag=\"taskbody\" id=\"taskbody-hll-a7g-q0c\"><p id=\"shortdesc-s09-wwm-zeo\" class=\"shortdesc\" data-tag=\"shortdesc\">本文介绍因远程桌面服务认证到期，导致远程登录Windows实例失败的解决办法。</p><section class=\"section\" data-tag=\"section\" id=\"section-35j-xzl-n9d\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-cji-70l-fvk\">问题现象</h2><div class=\"p\" data-tag=\"p\" id=\"p-pwh-4c4-yg3\">在远程登录Windows实例时，出现缺少远程桌面授权服务器许可证的提示，远程登录Windows实例失败。以您在本地使用Windows操作系统自带的远程桌面连接工具MSTSC远程登录Windows实例为例，提示如下。<div class=\"note note note-note\" data-tag=\"note\" id=\"note-poe-fs8-87g\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note\"></i></div><div class=\"note-content\"><strong>说明</strong> 该场景下，仅支持使用VNC方式远程登录Windows实例。</div></div><img class=\"image break\" data-tag=\"image\" id=\"image-3js-eph-xhy\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5690686661/p508779.png\" width=\"750\" alt=\"缺少许可证\"></div></section><section class=\"section\" data-tag=\"section\" id=\"section-1hx-p78-vio\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-o4u-mn8-dyg\">问题原因</h2><p class=\"p\" data-tag=\"p\" id=\"p-hq4-nem-7ur\">因Windows操作系统中安装的远程桌面服务认证到期后，导致您远程登录Windows实例失败。远程桌面服务认证到期的原因有如下几种：</p><ul class=\"ul\" data-tag=\"ul\" id=\"ul-br8-mz7-sfs\"><li class=\"li\" data-tag=\"li\" id=\"li-iqk-5ts-xfk\">在Windows操作系统内安装了远程桌面会话主机角色，此功能免费试用120天，之后需要进行付费。如果没有付费，该服务到期后会导致终端远程登录Windows实例失败。</li><li class=\"li\" data-tag=\"li\" id=\"li-ff8-zde-74h\">正常情况下，Windows服务器默认提供两个用户的免费远程桌面管理授权。如果有更高的连接需求，则需要配置远程桌面会话主机服务器角色，同时购买和配置相应的授权后，才可以使用更多的远程桌面管理并发。</li><li class=\"li\" data-tag=\"li\" id=\"li-1pw-gzb-v9k\">在配置远程桌面会话主机角色后，会同时取消默认两个用户的免费连接授权。在没有正确配置相关授权的时候，远程登录Windows实例将会无法连接。</li></ul></section><section class=\"section\" data-tag=\"section\" id=\"section-yvo-4kt-9st\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-r7n-jjo-i2s\">解决方案</h2><div class=\"note important note-important\" data-tag=\"note\" id=\"note-1xi-10n-dod\"><div class=\"note-icon-wrapper\"><i class=\"icon-note important\"></i></div><div class=\"note-content\"><strong>重要</strong> <ul class=\"ul\" data-tag=\"ul\" id=\"ul-d5a-6xz-482\"><li class=\"li\" data-tag=\"li\" id=\"li-8h6-16d-gs1\">如果您对实例或数据有修改、变更等风险操作，务必注意实例的容灾、容错能力，确保数据安全。建议您提前创建快照，快照相关信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/snapshot-overview#concept-qft-2zw-ydb\">快照概述</a>。</li><li class=\"li\" data-tag=\"li\" id=\"li-s5y-26d-d8s\">如果您在阿里云平台授权或者提交过登录账号、密码等安全信息，建议您及时修改安全信息。</li></ul></div></div><ol class=\"ol steps\" data-tag=\"steps\" id=\"steps-qa7-kjs-7ur\"><li class=\"li step\" data-tag=\"step\" id=\"step-jo5-6y8-r2g\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-ecq-dc3-u1t\">使用VNC连接Windows实例。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-l09-0u9-emz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password#concept-frf-pkw-wgb\">通过密码认证登录Windows实例</a>。</div></li><li class=\"li step\" data-tag=\"step\" id=\"step-pbq-lhy-yva\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-6sx-75m-pa2\">在Windows操作系统上，删除远程桌面服务。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-t3r-67g-tud\"><div class=\"note note note-note\" data-tag=\"note\" id=\"note-yfm-i0c-oa4\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note\"></i></div><div class=\"note-content\"><strong>说明</strong> 以下操作步骤以Windows Server 2016为例，实际操作系统以您实际的Windows实例为准。</div></div></div><ol type=\"a\" class=\"ol substeps\" data-tag=\"substeps\" id=\"substeps-1bd-azt-do6\"><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-ule-cuf-0w0\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-bsi-svk-n8o\">在Windows操作系统左下角，选择<span class=\"ph menucascade\" data-tag=\"menucascade\" id=\"menucascade-qie-s15-ffq\"><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-qfm-l3i-sse\"><img class=\"image inline\" data-tag=\"image\" id=\"image-x2n-xey-xpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5690686661/p508837.png\" alt=\"开始\"></span><abbr> &gt; </abbr><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-yw4-f2s-n19\">服务器管理器</span></span>。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-yyw-hnp-hi7\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-aye-l18-2nf\">在<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-duv-r9o-br9\">服务器管理器</span>页面右上角，选择<span class=\"ph menucascade\" data-tag=\"menucascade\" id=\"menucascade-mgk-5ib-yd6\"><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-czw-52o-4ad\">管理</span><abbr> &gt; </abbr><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-orh-bgs-xfu\">删除角色和功能</span></span>。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-k5m-558-wm0\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-01i-rer-vx9\">在<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-t03-nu0-k90\">选择目标服务器</span>页面，选择Windows实例，然后单击<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-f6x-gle-61r\">下一页</span>。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-ll5-h8x-5oz\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-ylw-g05-2r7\">在<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-7v6-cpc-azi\">服务器角色</span>页面，<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-kiu-hgh-sig\">角色</span>列表中选中<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-so9-0un-ozw\">远程桌面服务</span>，然后单击<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-2ia-69u-8cm\">下一页</span>。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-qka-x6w-dg4\"><img class=\"image break\" data-tag=\"image\" id=\"image-0ys-7y4-yth\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6690686661/p508987.png\" width=\"750\" alt=\"删除远程桌面服务\"></div></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-muj-gwi-wpf\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-3pg-fnh-pks\">在<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-564-w55-0hg\">删除功能</span>页面，选中<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-p59-byi-l6x\">远程桌面服务</span>。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-uc8-pvx-zxw\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-1cu-c48-ngv\">在弹出的对话框，选中<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-bhe-ubi-yv8\">删除管理工具（如果适用）</span>并单击<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-ad9-x0y-p60\">删除功能</span>，然后单击<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-tol-7ph-xok\">下一页</span>。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-lkh-23z-v7a\"><img class=\"image break\" data-tag=\"image\" id=\"image-5rh-u9d-x9f\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6690686661/p508999.png\" width=\"750\" alt=\"删除远程连接功能\"></div></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-z3h-qyw-off\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-y6e-s06-tif\">在<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-mdh-puk-3k1\">确认删除所选内容</span>页面，单击<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-k3k-be6-jjb\">删除</span>。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-r79-k62-rkz\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-jk1-nas-fam\">根据<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-6u9-wer-6n8\">删除进度</span>页面提示，重启Windows实例。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-06u-rna-yh9\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances#concept-yxw-dwm-xdb\">重启实例</a>。<img class=\"image break\" data-tag=\"image\" id=\"image-fne-b7r-ymj\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5690686661/p509005.png\" width=\"750\" alt=\"删除进度\"></div></li></ol></li><li class=\"li step\" data-tag=\"step\" id=\"step-42k-x8d-o6e\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-ecq-dc3-u1t\">使用VNC连接Windows实例。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-l09-0u9-emz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password#concept-frf-pkw-wgb\">通过密码认证登录Windows实例</a>。</div></li><li class=\"li step\" data-tag=\"step\" id=\"step-sf8-f1i-dy6\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-24z-zzw-mod\">在Windows操作系统上，查看远程桌面服务删除进度。</span><ol type=\"a\" class=\"ol substeps\" data-tag=\"substeps\" id=\"substeps-obj-ca4-yrq\"><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-mqw-uz6-dca\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-rww-gs0-onx\">在Windows操作系统左下角，选择<span class=\"ph menucascade\" data-tag=\"menucascade\" id=\"menucascade-xs4-2ci-0x4\"><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-6zu-t16-af3\"><img class=\"image inline\" data-tag=\"image\" id=\"image-b6x-n0m-beo\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5690686661/p508837.png\" width=\"40\" alt=\"开始\"></span><abbr> &gt; </abbr><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-d8h-o3x-leq\">服务器管理器</span></span>。</span></li><li class=\"li substep substepexpand\" data-tag=\"substep\" id=\"substep-zni-kba-8q8\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-k1h-jmy-0k4\">在<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-cjr-tgz-ise\">服务器管理器</span>页面右上角，选择<span class=\"ph menucascade\" data-tag=\"menucascade\" id=\"menucascade-xfh-nsc-md2\"><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-9da-18l-c3z\"><img class=\"image inline\" data-tag=\"image\" id=\"image-x64-h83-jxo\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5690686661/p509130.png\" width=\"25\" alt=\"通知\"></span><abbr> &gt; </abbr><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-f3n-yac-6ll\">任务详细信息</span></span>。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-6rw-mn4-t1v\">如果在<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-0jo-tn2-4ua\">任务详细信息和通知</span>页面无任务信息或显示出现远程桌面服务删除任务完成的通知，则表示远程桌面服务删除成功。</div></li></ol></li><li class=\"li step\" data-tag=\"step\" id=\"step-sle-tps-z5l\"><span class=\"ph cmd\" data-tag=\"cmd\" id=\"cmd-1p3-xzh-r13\">重新使用MSTSC远程登录Windows实例。</span><div class=\"itemgroup info\" data-tag=\"info\" id=\"info-b3z-haf-vn2\">您也可以使用其他方式远程登录Windows实例，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods#concept-tmr-pgx-wdb\"><span class=\"text\" cond-props=\"out_merak\" data-tag=\"text\" id=\"text-aso-tbb-lw6\" props=\"OUT_MERAK\">\n 连接方式概述\n</span>\n</a>。<ol class=\"ol\" data-tag=\"ol\" type=\"a\" id=\"ol-jhr-bfj-vwq\"><li class=\"li\" data-tag=\"li\" id=\"li-fj2-hhm-fhe\">选择以下任一方式启动<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-2lf-jev-kkc\">远程桌面连接</span>（MSTSC）：<ul class=\"ul\" data-tag=\"ul\" id=\"ul-c48-jrp-yw9\"><li class=\"li\" data-tag=\"li\" id=\"li-m6w-i2p-x0v\">使用<kbd class=\"ph userinput\" data-tag=\"userinput\" id=\"userinput-3uu-9wu-72t\">Win+R</kbd>组合键打开<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-ohk-axb-yhb\">运行</span>对话框，输入<kbd class=\"ph userinput\" data-tag=\"userinput\" id=\"userinput-wht-247-glt\">mstsc</kbd>，然后单击<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-stf-vir-j7k\">确定</span>。<img class=\"image break\" data-tag=\"image\" id=\"image-ugo-z1o-10o\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2737066661/p507651.png\" alt=\"mstsc\"></li><li class=\"li\" data-tag=\"li\" id=\"li-syu-j0k-he4\">单击<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-x3m-2rx-mhq\">开始</span>图标，在搜索框里中输入<kbd class=\"ph userinput\" data-tag=\"userinput\" id=\"userinput-h3e-fi8-ig3\">mstsc</kbd>后，按回车键确认。</li><li class=\"li\" data-tag=\"li\" id=\"li-cmc-gie-51y\">选择<span class=\"ph menucascade\" data-tag=\"menucascade\" id=\"menucascade-qpx-lx0-hn5\"><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-7tb-vse-pk4\">开始</span><abbr> &gt; </abbr><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-nhh-njw-6rb\">附件</span><abbr> &gt; </abbr><span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-e4l-ugp-3xn\">远程桌面连接</span></span>。</li></ul></li><li class=\"li\" data-tag=\"li\" id=\"li-dn3-d5y-pih\">填写待远程登录的Windows实例信息，然后单击<span class=\"ph uicontrol\" data-tag=\"uicontrol\" id=\"uicontrol-04c-yyh-h6k\">连接</span>。<p class=\"p\" data-tag=\"p\" id=\"p-i5x-mo6-z2w\">登录成功，表示该问题已解决。</p></li></ol></div></li></ol></section></div></article></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/an-authentication-error-has-occurred-the-local-security-authority-cannot-be-contacted", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例提示“发生身份验证错误，无法连接到本地安全机构”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例提示“发生身份验证错误，无法连接到本地安全机构”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:45:15</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"main-2290415\"><p data-tag=\"shortdesc\" id=\"20ac7e29968ep\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例提示“发生身份验证错误无法连接到本地安全机构”错误的解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"75f36e9097zju\" class=\"section\"><h2 id=\"72a1f020960j3\">问题现象</h2><p id=\"8b580740a1lns\">通过本地电脑内的远程桌面连接Windows实例提示“<b data-tag=\"uicontrol\" id=\"1f7fd279a2qu0\" class=\"uicontrol\"><b>发生身份验证错误，无法连接到本地安全机构</b></b>”错误。</p><img placement=\"break\" alt=\"1\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1727515761/p554214.png\" id=\"40d58191a2bpg\" class=\"image break\"></section><section id=\"77c3258097qj2\" class=\"section\"><h2 id=\"75c8ab9096ca8\"><b>问题原因</b></h2><p id=\"22bb80a196cu6\">导致该问题的可能原因如下：</p><ul id=\"2ac84e0596tw1\"><li id=\"2ac84e0696u59\"><p id=\"48d97f8096j5c\">ECS实例系统属性中的远程桌面配置错误，请参考<a title=\"\" class=\"xref\" href=\"#77e394f096d2t\">方案一：修改远程桌面配置</a>进行修复。</p></li><li id=\"39a6a8d196bgx\"><p id=\"39a6a8d096eac\">ECS实例的远程会话配置错误，请参考<a title=\"\" class=\"xref\" href=\"#d6ea52a096niv\">方案二：修改目标实例的远程会话配置</a>进行修复。</p></li></ul></section><section id=\"7b36ef8097y4l\" class=\"section\"><h2 id=\"72a1f02296mdz\" data-spm-anchor-id=\"a2c9r.14518950.0.i3.71cabNdwbNdwvA\">解决方案</h2><section id=\"84bcd510978vh\" class=\"section\"><h3 id=\"77e394f096d2t\"><b>方案一：修改目标实例的远程桌面配置</b></h3><ol id=\"72a1f02496ff0\"><li id=\"72a1f0259626k\"><p id=\"d75d542197sgn\">通过VNC连接Windows实例。</p><p id=\"d75d542297gpz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"f23a781196gcw\"><p id=\"014db8d096ibn\">右键单击<img placement=\"inline\" id=\"014db8d19690u\" width=\"25\" alt=\"Dingtalk_20210510142550.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"01106440a2795\" class=\"uicontrol\"><b>运</b><b>行(</b><b>R)</b></b>，输入<code data-tag=\"code\" class=\"code\">sysdm.cpl</code>命令，打开<b data-tag=\"uicontrol\" id=\"1f8047a3a2iq3\" class=\"uicontrol\"><b>系统属性</b></b>对话框。</p></li><li id=\"02593561961jn\"><p id=\"0259356096ixf\">单击<b data-tag=\"uicontrol\" id=\"1f806eb0a26rv\" class=\"uicontrol\"><b>远程</b></b>页签，在<b data-tag=\"uicontrol\" id=\"1f806eb2a2eba\" class=\"uicontrol\"><b>远程桌面</b></b>区域选中<b data-tag=\"uicontrol\" id=\"1f806eb4a2y64\" class=\"uicontrol\"><b>允许远程连接到此计算机</b></b>，单击<b data-tag=\"uicontrol\" id=\"1f806eb6a2gwa\" class=\"uicontrol\"><b>确定</b></b>。</p><img id=\"4f2612b1a5nsj\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7609393761/p551469.png\" alt=\"114\" placement=\"break\" width=\"400\" class=\"image break\"></li></ol></section><section id=\"80a2e000976bs\" class=\"section\"><h3 id=\"d6ea52a096niv\"><b>方案二：修改目标实例的远程会话配置</b></h3><ol id=\"dc7def6196r5t\"><li id=\"6158da11969zv\"><p id=\"3231732097q4c\">通过VNC连接Windows实例。</p><p id=\"232a102097mn9\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"9b32bc6196m1h\"><p id=\"9b32bc6096duf\">右键单击<img placement=\"inline\" id=\"65a10b1196i5t\" width=\"25\" alt=\"Dingtalk_20210510142550.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"0a2f4aa0a2a13\" class=\"uicontrol\"><b>运</b><b>行(</b><b>R)</b></b>，输入<code data-tag=\"code\" class=\"code\">gpedit.msc</code>命令，打开<b data-tag=\"uicontrol\" id=\"1f8095caa2zuy\" class=\"uicontrol\"><b>本地组策略编辑器</b></b><b>。</b></p></li><li id=\"8d4d722196rka\"><p id=\"2c1a8f32967ud\">在<b data-tag=\"uicontrol\" id=\"1f8095cfa21g4\" class=\"uicontrol\"><b>本地组策略编辑器</b></b>窗口，选择<b data-tag=\"uicontrol\" id=\"1f8095d1a23q4\" class=\"uicontrol\"><b>计算机配置 &gt; 管理模板 &gt; Windows 组件 &gt; 远程桌面服务 &gt; 远程桌面会话主机 &gt; 安全</b></b>。</p></li><li id=\"1e5855f1969xn\"><p id=\"2c1a8f3396ij1\">在<b data-tag=\"uicontrol\" id=\"1f8095d5a2694\" class=\"uicontrol\"><b>安全</b></b>目录中，双击<b data-tag=\"uicontrol\" id=\"1f8095d7a2luy\" class=\"uicontrol\"><b>远程（RDP）连接要求使用指定的安全层</b></b>。 </p><img width=\"500\" placement=\"break\" alt=\"111\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p551393.png\" id=\"4569afb1a2i47\" class=\"image break\"></li><li id=\"8cd4551196ix0\"><p id=\"2c1a8f3596yhz\">在弹出对话框中选择<b data-tag=\"uicontrol\" id=\"1f80bcd1a2uvm\" class=\"uicontrol\"><b>已启用</b></b>，在<b data-tag=\"uicontrol\" id=\"1f80bcd3a2d2t\" class=\"uicontrol\"><b>安全层</b></b>选项中选择<b data-tag=\"uicontrol\" id=\"1f80bcd5a2i2m\" class=\"uicontrol\"><b>RDP</b></b>，单击<b data-tag=\"uicontrol\" id=\"1f80bcd7a2rye\" class=\"uicontrol\"><b>确定</b></b>。</p><img width=\"500\" placement=\"break\" alt=\"222\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p551395.png\" id=\"47755e31a2mab\" class=\"image break\"></li><li id=\"06857061968oo\"><p id=\"2c1a8f36968cd\">执行以下命令，完成策略更新，使以上的设置生效。</p><ol id=\"1cece9a196uu4\"><li id=\"1ca77c3196lvp\"><p id=\"2c1a8f3796p2s\">右键单击<img placement=\"inline\" id=\"23fdfea1961dx\" width=\"25\" alt=\"Dingtalk_20210510142550.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"14b19190a2uhk\" class=\"uicontrol\"><b>运</b><b>行(</b><b>R)</b></b>，输入<code data-tag=\"code\" class=\"code\">cmd</code>命令，打开命令行。</p></li><li id=\"5725d9b1965c4\"><p id=\"2c1a8f3896r10\">执行<code data-tag=\"code\" class=\"code\">gpupdate</code>命令，完成策略更新。</p><p id=\"2c1a8f3996bmi\">系统显示类似如下图，表示用户策略更新成功完成。</p><img id=\"4ad81131a2daz\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p518787.png\" alt=\"\" width=\"340\" class=\"image break\"></li></ol></li><li id=\"935e434196zr5\"><p id=\"2c1ab640962fz\">重新进行远程连接，确认问题已经修复。</p></li></ol></section></section><section id=\"7d0a770097z12\" class=\"section\"><h2 id=\"aa107590965wq\">相关文档</h2><p id=\"aa10759396yb1\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/support/solution-to-failure-in-remote-connection-to-windows-instance\">无法远程连接Windows实例的排查方法</a></p></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-error-message-no-remote-desktop-license-server-is-specified-appears-when-i-connect-to-a-windows-server-2008-r2-instance-by-using-remote-desktop", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows Server 2008 R2系统的ECS实例时，提示“未指定远程桌面授权服务器”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows Server 2008 R2系统的ECS实例时，提示“未指定远程桌面授权服务器”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-10 10:33:05</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main><p data-tag=\"shortdesc\" class=\"shortdesc\" id=\"8b6fa408beq8w\">本文介绍通过远程桌面连接Windows Server 2008 R2系统的ECS实例时，提示“未指定远程桌面授权服务器”错误的解决方案。</p><div data-tag=\"body\" class=\"body\"><section class=\"section\" id=\"8b6fa409beh23\"><h2 id=\"8b6fa40abemdb\"><b>问题现象</b></h2><p id=\"8b6fcb10beqpw\">通过远程桌面连接Windows Server 2008 R2系统的ECS实例时，提示“<b data-tag=\"uicontrol\" id=\"2f83e1f0bevnm\" class=\"uicontrol\"><b>未指定远程桌面授权服务器</b></b>”错误。</p></section><section class=\"section\" id=\"8b6ff220be7p9\"><h2 id=\"8b6ff221be0j5\"><b>问题原因</b></h2><p id=\"8b6ff222bemyq\">Windows Server 2008 R2操作系统默认安装了远程桌面角色，但该角色只有120天免费使用期，到期后需要向微软官方付费购买相关授权。</p></section><section class=\"section\" id=\"8b6ff223ben5d\"><h2 id=\"8b6ff224be7zx\">解决方案</h2><p id=\"8b6ff225be8k1\">根据实际情况，选择对应解决方案进行修复。</p><ul id=\"8b6ff226beh0z\"><li id=\"8b6ff227be8ni\"><p id=\"8b6ff228benpv\">如果不需要大于2个用户同时连接远程桌面，请参考<a title=\"\" class=\"xref\" href=\"#8b6ff22cbec32\">方案一：卸载远程桌面会话主机服务</a>进行操作。</p></li><li id=\"8b6ff229befvs\"><p id=\"8b6ff22abekly\">如果需要使用多个用户同时连接远程桌面，请参考<a title=\"\" class=\"xref\" href=\"#8b701937belyv\">方案二：配置远程桌面授权服务器</a>进行操作。</p></li></ul><section class=\"section\" id=\"8b6ff22bbe77o\"><h3 id=\"8b6ff22cbec32\"><b>方案一：卸载远程桌面会话主机服务</b></h3><ol id=\"8b6ff22dbeo4c\"><li id=\"8b6ff22ebeot6\"><p id=\"8b6ff22fbef1j\">通过VNC连接Windows实例。</p><p id=\"8b6ff230befgp\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"8b701930beidj\"><p id=\"8b701931bekmi\">右键单击<b data-tag=\"uicontrol\" class=\"uicontrol\" id=\"8b6e447abeqah\"><b>我的电脑</b></b>，然后单击<b data-tag=\"uicontrol\" class=\"uicontrol\" id=\"8b6e447cbeep8\"><b>管理</b></b>，打开<b data-tag=\"uicontrol\" class=\"uicontrol\" id=\"8b6e447ebelvv\"><b>服务器管理器</b></b><b>。</b></p></li><li id=\"8b701932beme2\"><p id=\"8b701933be76o\">在弹出的<b data-tag=\"uicontrol\" class=\"uicontrol\" id=\"8b6e4483bedfk\"><b>服务器管理器</b></b>界面中单击<b data-tag=\"uicontrol\" class=\"uicontrol\" id=\"8b6e4485ben7u\"><b>角色</b></b>，然后单击右侧<b data-tag=\"uicontrol\" class=\"uicontrol\" id=\"8b6e4487bem9n\"><b>删除角色</b></b><b>。</b></p></li><li id=\"8b701934beq49\"><p id=\"8b701935be04p\">在弹出的界面中，选择<b data-tag=\"uicontrol\" class=\"uicontrol\" id=\"8b6e6b83beblw\"><b>远程桌面服务</b></b>删除该付费角色。</p><img id=\"962bca30bed38\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2933438761/p580607.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li><li id=\"d0e78961be0mg\"><p id=\"d0e78960befrg\">重新通过远程桌面连接实例，确认问题已修复。\n</p></li></ol></section><section class=\"section\" id=\"8b701936be7c7\"><h3 id=\"8b701937belyv\"><b>方案二：配置远程桌面授权服务器</b></h3><p id=\"8b701938bea03\">如果需要使用多个用户同时连接远程桌面，请参考如下文档进行操作。</p><p id=\"5f1d6f70beprz\"><a title=\"\" class=\"xref\" href=\"/zh/ecs/remote-connections-to-windows-server-instances-and-license-authorized-servers\">Windows Server实例远程连接数以及License授权服务器的相关说明</a></p></section></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-error-message-that-indicates-lack-of-terminal-server-user-access-permissions-appears-when-i-connect-to-a-windows-instance-by-using-remote-desktop", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例提示“远程桌面用户组没有该权限”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例提示“远程桌面用户组没有该权限”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:44:54</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"main-2289732\"><p id=\"f3fba69995hi6\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例提示“远程桌面用户组没有该权限”错误的解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"261c1280a0l7y\" class=\"section\"><h2 id=\"1c8a750495y7b\"><b>问题描述</b></h2><p id=\"1c8a750595goy\">本地客户端通过远程桌面连接Windows实例时提示“远程桌面用户组没有该权限”错误</p><img width=\"550\" placement=\"break\" alt=\"117\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5472705761/p553680.png\" id=\"618c5f30a08na\" class=\"image break\"></section><section id=\"2d888df0a0jh2\" class=\"section\"><h2 id=\"1c8a750795i0o\"><b>问题原因</b></h2><p id=\"1c8a750895q9l\">无法远程连接Windows实例可能有以下两种原因：</p><ul id=\"1c8a750995g8w\"><li id=\"1c8a750a95zri\"><p id=\"1c8a750b9589z\">ECS实例内的本地安全策略配置不正确。请参考<a title=\"\" class=\"xref\" href=\"#b28dd19195j91\">方案一：修改本地安全策略</a>进行修复。</p></li><li id=\"1c8a750c95jtb\"><p id=\"1c8a750d95y0t\">ECS实例未添加普通用户远程登录的权限。请参考<a title=\"\" class=\"xref\" href=\"#52768e4095ywc\">方案二：为普通用户增加远程登录权限</a>进行修复。</p></li></ul></section><section id=\"3696ab70a0mvu\" class=\"section\"><h2 id=\"1c8a750e95ewa\">解决方案</h2><p id=\"1912a17195jok\">根据实际情况，选择对应方案进行解决。本文以Windows Server 2012操作系统为例。</p><section id=\"eb556c9096nt8\" class=\"section\"><h3 id=\"b28dd19195j91\"><b>方案一：修改本地安全策略</b></h3><ol id=\"1c8a752095gon\"><li id=\"1c8a752195j0k\"><p id=\"604a746195wni\">通过VNC连接Windows实例。</p><p id=\"b33c765096q6y\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"688626b195mm9\"><p id=\"8d37c45095870\">右键单击<b data-tag=\"uicontrol\" id=\"03e6df0fb3i52\" class=\"uicontrol\"><b>开始</b></b>，然后单击<b data-tag=\"uicontrol\" id=\"03e6df11b30gl\" class=\"uicontrol\"><b>运行</b></b>。在<b data-tag=\"uicontrol\" id=\"03e6df13b3e9a\" class=\"uicontrol\"><b>运行</b></b>对话框中输入<code data-tag=\"code\" class=\"code\">gpedit.msc</code>命令，然后单击<b data-tag=\"uicontrol\" id=\"03e70611b3kbw\" class=\"uicontrol\"><b>确定</b></b>，进入本地组策略编辑器页面。</p><img id=\"47fcc10196pxi\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6514683761/p518796.png\" placement=\"break\" class=\"image break\"></li><li id=\"e7a618b195rqx\"><p id=\"1c8a752595xhk\">在<b data-tag=\"uicontrol\" id=\"03e70617b3tnh\" class=\"uicontrol\"><b>本地组策略编辑器</b></b>页面中，单击<b data-tag=\"uicontrol\" id=\"03e70619b3raw\" class=\"uicontrol\"><b>计算机配置 &gt; Windows设置 &gt; 安全设置 &gt; 本地策略 &gt; 用户权限分配</b></b>。 <img id=\"875dda5095dkf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5514683761/p551248.png\" alt=\"5\" placement=\"break\" width=\"500\" class=\"image break\"></p></li><li id=\"1c8a752795ti0\"><p id=\"1c8a752895w3x\">在<b data-tag=\"uicontrol\" id=\"03e7061eb3gvf\" class=\"uicontrol\"><b>用户权限分配</b></b>页面中，双击<b data-tag=\"uicontrol\" id=\"03e70620b3teo\" class=\"uicontrol\"><b>拒绝通过远程桌面服务登录</b></b>，进入<b data-tag=\"uicontrol\" id=\"03e70622b34ep\" class=\"uicontrol\"><b>拒绝</b><b>通过远程桌面服务登录 属性</b></b>窗口。 <img id=\"17bdff30951t8\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5514683761/p551251.png\" alt=\"6\" placement=\"break\" width=\"500\" class=\"image break\"></p></li><li id=\"1c8a752a95ln1\"><p id=\"1c8a752b9583h\">在<b data-tag=\"uicontrol\" id=\"03e70627b34ck\" class=\"uicontrol\"><b>拒绝</b><b>通过远程桌面服务登录 属性</b></b>窗口中，查看有无<b data-tag=\"uicontrol\" id=\"03e72d20b3jf5\" class=\"uicontrol\"><b>Remote Desktop Users</b></b>和需要登录的域用户账号，如果存在请删除。</p></li><li id=\"1c8a752c95qtz\"><p id=\"1c8a752d95qce\">在<b data-tag=\"uicontrol\" id=\"03e72d24b3nkg\" class=\"uicontrol\"><b>用户权限分配</b></b>页面中，双击<b data-tag=\"uicontrol\" id=\"03e72d26b3tvf\" class=\"uicontrol\"><b>允许通过远程桌面服务登录</b></b>，进入<b data-tag=\"uicontrol\" id=\"03e72d28b3fmc\" class=\"uicontrol\"><b>允许</b><b>通过远程桌面服务登录 属性</b></b>窗口。</p></li><li id=\"1c8a752f95itq\"><p id=\"1c8a753095s2s\">在<b>允</b><b data-tag=\"uicontrol\" id=\"03e72d2db3dxi\" class=\"uicontrol\"><b>许</b><b>通过远程桌面服务登录 属性</b></b>窗口中，查看有无<b data-tag=\"uicontrol\" id=\"03e72d2fb35op\" class=\"uicontrol\"><b>Remote Desktop Users</b></b>和需要登录的域用户账号，如果没有请添加。 </p></li><li id=\"1c8a753395726\"><p id=\"1c8a753495ksl\">使用新添加的用户在另一台主机上远程登录Windows实例， 确认可以正常远程连接Windows实例。</p></li></ol></section><section id=\"ef6612d096giw\" class=\"section\"><h3 id=\"52768e4095ywc\"><b>方案二：为普通用户增加远程登录权限</b></h3><ol id=\"5e5f159395h45\"><li id=\"5e5f159095l3l\"><p id=\"b501a5f1963r9\">通过VNC连接Windows实例。</p><p id=\"b501a5f296che\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"231589c195exy\"><p id=\"231589c0952fo\">进入<b data-tag=\"uicontrol\" id=\"03e75434b3u65\" class=\"uicontrol\"><b>计算机管理</b></b>页面。</p><ol id=\"44ac04b195it6\"><li id=\"43f733a1951p2\"><p id=\"43f733a09551n\">选择<b data-tag=\"uicontrol\" id=\"03e75439b3s8o\" class=\"uicontrol\"><b>开始</b></b>，单击<b data-tag=\"uicontrol\" id=\"03e7543bb36m5\" class=\"uicontrol\"><b>服务器管理器</b></b>。</p></li><li id=\"8218817195qiz\"><p id=\"8218817095hjj\">在<b data-tag=\"uicontrol\" id=\"03e7543fb3ajz\" class=\"uicontrol\"><b>服务器管理器</b></b>页面，单击<b data-tag=\"uicontrol\" id=\"03e75441b3bp1\" class=\"uicontrol\"><b>所有服务器</b></b>，在服务器框中，右键单击对应的服务器，单击<b data-tag=\"uicontrol\" id=\"03e75443b3w4j\" class=\"uicontrol\"><b>计算机管理</b></b>。<img id=\"e9dd727195lyw\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5514683761/p551220.png\" alt=\"1\" placement=\"break\" width=\"600\" class=\"image break\"></p></li></ol></li><li id=\"eb3efe41952ok\"><p id=\"eb3efe40954hg\">在<b data-tag=\"uicontrol\" id=\"03e75448b3g54\" class=\"uicontrol\"><b>计算机管理</b></b>页面，右键单击<b data-tag=\"uicontrol\" id=\"03e7544ab3q0d\" class=\"uicontrol\"><b>系统工具 &gt; 本地用户和组 &gt; 用户</b></b>，单击<b data-tag=\"uicontrol\" id=\"03e77b40b3k21\" class=\"uicontrol\"><b>新用</b><b>户(</b><b>N)，</b></b>在<b data-tag=\"uicontrol\" id=\"03e77b42b3bd5\" class=\"uicontrol\"><b>新用户</b></b>对话框中新建一个对应的用户，本文以新建<b data-tag=\"uicontrol\" id=\"03e77b44b3jel\" class=\"uicontrol\"><b>test</b></b>用户为例。 </p><img id=\"f0d03490950n1\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6514683761/p551228.png\" alt=\"2\" placement=\"break\" class=\"image break\"></li><li id=\"1c8a753d95c9o\"><p id=\"1c8a753e955vg\">用户创建成功后，右键单击<b data-tag=\"uicontrol\" id=\"03e77b4ab373v\" class=\"uicontrol\"><b>test</b></b>用户名，选择<b data-tag=\"uicontrol\" id=\"03e77b4cb3hzg\" class=\"uicontrol\"><b>属</b><b>性(</b><b>R) &gt; 隶属于</b></b>，单击<b data-tag=\"uicontrol\" id=\"03e77b4eb3hy4\" class=\"uicontrol\"><b>添加</b></b>，将用户添加到<b data-tag=\"uicontrol\" id=\"03e77b50b3blq\" class=\"uicontrol\"><b>Remote Desktop Users</b></b>组中，此时普通用户就可以远程登录。 <img id=\"d2dd77d095u6c\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5514683761/p551236.png\" alt=\"3\" placement=\"break\" width=\"400\" class=\"image break\"></p><div type=\"note\" id=\"1a22dc20958pa\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"29c00d6095d04\"><b data-tag=\"uicontrol\" id=\"03e77b55b329f\" class=\"uicontrol\"><b>Remote Desktop Users</b></b>组为授权远程登录权限的组，添加到这个组中的用户都被授予远程登录的权限。</p></div></div></li></ol></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/because-of-a-protocol-error-this-session-will-be-disconnected-please-try-connecting-to-the-remote-computer-again", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例提示“由于协议错误，会话将被中断，请重新连接到远程计算机”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例提示“由于协议错误，会话将被中断，请重新连接到远程计算机”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-15 17:20:31</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2289734\"><p data-tag=\"shortdesc\" id=\"1908aaa9958oi\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例提示“由于协议错误，会话将被中断。请重新连接到远程计算机。”错误的解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"66a7d47096rhm\" class=\"section\"><h2 data-lake-id=\"7e5ee25ca606883aba99127ff75f24c8_h2_0\" id=\"2ac84e0096mgz\">问题描述</h2><p id=\"2ac84e01969hm\">远程连接Windows系统的ECS实例时，提示协议错误。具体的报错显示如下：</p><img id=\"d53b26e0a1eqs\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9719215761/p553771.png\" alt=\"116\" placement=\"break\" class=\"image break\"></section><section id=\"69422e6096v5f\" class=\"section\"><h2 id=\"2ac84e0396xiu\">问题原因</h2><p id=\"2ac84e0496t5a\">可能导致该问题的部分原因如下：</p><ul id=\"2ac84e0596tw1\"><li id=\"2ac84e0696u59\"><p id=\"2ac84e0796n12\"><b data-tag=\"uicontrol\" id=\"69dd2a87b34mi\" class=\"uicontrol\">目标实例的远程会话配置错误</b>。当远程会话配置错误，远程连接时会出现协议错误的提示。请参考<a title=\"\" class=\"xref\" href=\"#9953b67096no9\">方案一：修改目标实例的远程会话配置</a>进行修复。</p></li><li id=\"2ac84e0896d33\"><p id=\"2ac84e0996cg0\"><b data-tag=\"uicontrol\" id=\"69dd2a8cb3ppf\" class=\"uicontrol\">目标实例的远程连接端口被其他应用占用</b>。Windows系统默认远程桌面连接端口号为3389，当该端口被其他程序占用时，远程连接服务将无法正常运行。请参考<a title=\"\" class=\"xref\" href=\"#9c2043f096ntw\">方案二：修改远程连接端口号</a>或<a title=\"\" class=\"xref\" href=\"#cc1ecb8096c33\">方案三：关闭占用远程连接端口的应用进程</a>进行修复。</p></li></ul></section><section id=\"6dba490096x00\" class=\"section\"><h2 id=\"2ac84e0a96l22\">解决方案</h2><p id=\"63faca9096aq6\">根据实际情况，选择对应方案进行解决。本文以Windows Server 2016操作系统为例。</p><section id=\"936b7c5096i75\" class=\"section\"><h3 id=\"9953b67096no9\"><b>方案一：修改目标实例的远程会话配置</b></h3><ol id=\"6022f22296h99\"><li id=\"6022f220962lc\"><p id=\"c2014c2096789\">通过VNC连接Windows实例。</p><p id=\"c57b57b096bk4\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"6158da11969zv\"><p id=\"6158da1096hw2\">右键单击<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"65a10b1196i5t\" placement=\"inline\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"69dd5198b3saw\" class=\"uicontrol\">运行(R)</b>，输入<code data-tag=\"code\" class=\"code\">gpedit.msc</code>命令，打开<b data-tag=\"uicontrol\" id=\"69dd519bb3s8b\" class=\"uicontrol\">本地组策略编辑器</b><b>。</b></p></li><li id=\"8d4d722196rka\"><p id=\"8d4d722096zo5\">在<b data-tag=\"uicontrol\" id=\"69dd51a0b3i5x\" class=\"uicontrol\">本地组策略编辑器</b>窗口，选择<b data-tag=\"uicontrol\" id=\"69dd51a2b3lqt\" class=\"uicontrol\">计算机配置 &gt; 管理模板 &gt; Windows 组件 &gt; 远程桌面服务 &gt; 远程桌面会话主机 &gt; 安全</b>。</p></li><li id=\"1e5855f1969xn\"><p id=\"1cb5063096v5y\">在<b data-tag=\"uicontrol\" id=\"69dd51a6b3qq1\" class=\"uicontrol\">安全</b>目录中，双击<b data-tag=\"uicontrol\" id=\"69dd51a8b3sm7\" class=\"uicontrol\">远程（RDP）连接要求使用指定的安全层</b>。 </p><img id=\"67945a2096vzq\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p551393.png\" alt=\"111\" placement=\"break\" width=\"500\" class=\"image break\"></li><li id=\"8cd4551196ix0\"><p id=\"8d3a1bc096sjk\">在弹出对话框中选择<b data-tag=\"uicontrol\" id=\"69dd78a5b36ll\" class=\"uicontrol\">已启用</b> ，在<b data-tag=\"uicontrol\" id=\"69dd78a7b3hrn\" class=\"uicontrol\">安全层</b>选项中选择<b data-tag=\"uicontrol\" id=\"69dd78a9b3pud\" class=\"uicontrol\">RDP</b>，单击<b data-tag=\"uicontrol\" id=\"69dd78abb3yj4\" class=\"uicontrol\">确定</b>。<img id=\"05273ff1966mu\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p551395.png\" alt=\"222\" placement=\"break\" width=\"500\" class=\"image break\"></p></li><li id=\"06857061968oo\"><p id=\"1667c0f096ncr\">执行以下命令，完成策略更新，使以上的设置生效。</p><ol id=\"1cece9a196uu4\"><li id=\"1ca77c3196lvp\"><p id=\"23fdfea096pt1\">右键单击<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"23fdfea1961dx\" placement=\"inline\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"69dd78b4b3vm1\" class=\"uicontrol\">运行(R)</b>，输入<code data-tag=\"code\" class=\"code\">cmd</code>命令，打开命令行。</p></li><li id=\"5725d9b1965c4\"><p id=\"63611b4096c0f\">执行<code data-tag=\"code\" class=\"code\">gpupdate</code>命令，完成策略更新。</p><p id=\"72b4724096vc7\">系统显示类似如下图。</p><img width=\"340\" alt=\"\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p518787.png\" id=\"88b6c111969c1\" class=\"image break\"></li></ol></li><li id=\"935e434196zr5\"><p id=\"984e741096kvh\">再次进行远程连接，确认问题已经修复。</p></li></ol></section><section id=\"890e97b096qlg\" class=\"section\"><h3 id=\"9c2043f096ntw\"><b>方案二：修改远程连接端口号</b></h3><ol id=\"bbf5cda096sab\"><li id=\"bbf5cda196mfv\"><p id=\"d39bfb1196xun\">通过VNC连接Windows实例。</p><p id=\"d39bfb1296xkc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"bbf5cda396n7c\"><p id=\"bbf5cda496wkt\">右键单击<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"bbf5cda5967nl\" placement=\"inline\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"69dd9fbcb3k5v\" class=\"uicontrol\">运行(R)</b>，输入<code data-tag=\"code\" class=\"code\">regedit</code>，打开<b data-tag=\"uicontrol\" id=\"69dd9fbfb3pbv\" class=\"uicontrol\">注册表编辑器</b><b>。</b></p></li><li id=\"bbf5cda696ddq\"><p id=\"bbf5cda7960jf\">在<b data-tag=\"uicontrol\" id=\"69dd9fc4b3rvq\" class=\"uicontrol\">注册表编辑器</b>窗口，依次进入以下目录。</p><pre id=\"xofoae\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\WinStations\\RDP-Tcp</code></pre></li><li id=\"2aed174096smf\"><p id=\"cb056f7096s40\">双击<b data-tag=\"uicontrol\" id=\"69ddc6c1b3afl\" class=\"uicontrol\">RDP-Tcp</b>目录中名称为<b data-tag=\"uicontrol\" id=\"69ddc6c3b33vw\" class=\"uicontrol\">PortNumber</b>的注册表项。<img id=\"d9706241961ky\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p551408.png\" alt=\"112\" placement=\"break\" width=\"500\" class=\"image break\"></p></li><li id=\"da9c5f2196s10\"><p id=\"da9c5f20967ln\">在编辑页面中，选择<b data-tag=\"uicontrol\" id=\"69ddc6c8b38d2\" class=\"uicontrol\">基数</b>选项中的<b data-tag=\"uicontrol\" id=\"69ddc6cab3y5f\" class=\"uicontrol\">十进制</b>，修改<b data-tag=\"uicontrol\" id=\"69ddc6ccb3ajy\" class=\"uicontrol\">数值数据</b>中的值，该值即为远程桌面使用的端口号。</p><img id=\"9f4d9cd196rpa\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2715393761/p551412.png\" alt=\"113\" placement=\"break\" class=\"image break\"><div type=\"note\" id=\"aa6d835096xbv\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"aa9c829096a0i\">图中的3389端口号为远程连接的默认端口号，仅作为示例。请根据实际情况修改成所需的端口号</p></div></div></li><li id=\"6ca1cf9196mq1\"><p id=\"81996520961vj\">重启Windows实例以更新配置。</p><ul id=\"85fac37196agm\"><li id=\"85119bf196n6x\"><p id=\"85119bf096iqx\">方式一：在ECS控制台上重启Windows实例，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li><li id=\"88c26ef096mih\"><p id=\"88c247e096vkl\">方式二：在远程连接的Windows实例上，选择<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"8f496c6196hhs\" placement=\"inline\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"69ddc6dbb31tl\" class=\"uicontrol\"> &gt; </b><img width=\"25\" placement=\"inline\" alt=\"电源管理\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530476.png\" id=\"90720de1965mv\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"69ddedd1b3d6w\" class=\"uicontrol\"> &gt; 重启</b>。</p><img placement=\"break\" alt=\"win2016重启服务器\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530473.png\" id=\"989cf75196toj\" class=\"image break\"></li></ul></li></ol></section><section id=\"821b6af096whs\" class=\"section\"><h3 id=\"cc1ecb8096c33\"><b>方案三：关闭占用远程连接端口的应用进程</b></h3><ol id=\"c23b6a6096jow\"><li id=\"c23b6a619647v\"><p id=\"e25102e1969pt\">通过VNC连接Windows实例。</p><p id=\"e25102e296jtu\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"c23b6a6396lw9\"><p id=\"c23b6a6496vyw\">右键单击<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"c23b6a6596x26\" placement=\"inline\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"69ddede0b3kom\" class=\"uicontrol\">运行(R)</b>，输入<code data-tag=\"code\" class=\"code\">cmd</code>命令，打开<b data-tag=\"uicontrol\" id=\"69ddede3b38vz\" class=\"uicontrol\">命令行</b><b>。</b></p></li><li id=\"3503b93196uxh\"><p id=\"3527e300960hs\">执行以下命令，获取占用远程连接端口的进程号<b data-tag=\"uicontrol\" id=\"69ddede8b36kg\" class=\"uicontrol\">（PID）</b>。</p><pre id=\"crosng\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -ano |findstr 3389</code></pre><div type=\"note\" id=\"4b2f3ae096n7m\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"4b533da096bsi\">此处以远程连接默认端口号3389为例，需要以实际情况为准。</p></div></div></li><li id=\"42ff486196vic\"><p id=\"55dcd79096brl\">执行以下命令，根据PID查看进程对应的应用程序。</p><p id=\"dc5fe76096w6a\">正常情况下，远程连接端口被svchost.exe进程占用。如果远程连接端口被svchost.exe之外的进程占用，则表明远程连接端口的确被其他应用所占用。</p><pre id=\"qdmnga\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>tasklist |findstr [$PID]</code></pre><div type=\"note\" id=\"5d134ee1968bn\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"6094d48096870\">[$PID]指上一步获取的PID。</p></div></div></li><li id=\"650db27196o8a\"><p id=\"6a9fc89096ecj\">您可以执行以下命令，根据PID关闭指定的进程，释放被占用的远程连接端口。 </p><div type=\"important\" id=\"60707860a11qw\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"5d97b5e0a1n19\">关闭进程属于风险操作，请确保关闭进程后不影响业务运行，方可执行此操作。</p></div></div><pre id=\"bg9ixw\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>taskkill /f /pid [$PID]</code></pre></li><li id=\"d1e1a6e19691s\"><p id=\"d7ffd06096q38\">再次进行远程连接，确认问题已经修复。</p></li></ol></section></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-error-message-no-remote-desktop-authorization-server-can-provide-a-license-is-prompted-for-remote-login-to-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例提示“没有远程桌面授权服务器可以提供许可证”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例提示“没有远程桌面授权服务器可以提供许可证”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-12 15:18:00</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2289730\"><p data-tag=\"shortdesc\" id=\"dafba82695qxc\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例提示“没有远程桌面授权服务器可以提供许可证”错误的解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"38b5c07096ef3\" class=\"section\"><h2 id=\"dafba82595v1p\"><b>问题描述</b></h2><p id=\"146fa740951ig\">使用远程桌面连接Windows服务器，输入正确的用户名和密码后，无法正常远程连接，并提示如下错误信息。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7789583761/p518766.png\" alt=\"a.png\" width=\"435\" height=\"170\" id=\"ec89eb4195ojb\" class=\"image break\"></section><section id=\"3d3a854096moa\" class=\"section\"><h2 id=\"df36c680951hb\"><b>问题原因</b></h2><p id=\"3466115095ui2\">无法正常远程连接的原因可能有以下两种：</p><ul id=\"3466115195iht\"><li id=\"3466115295hwa\"><p id=\"3466115395a0q\"><b data-tag=\"uicontrol\" id=\"b8ab841817hyo\" class=\"uicontrol\">其他用户已登录</b>：该账号有其他用户在登录，由于终端服务配置了RDP-TCP限制，每个用户只能进行一个会话，所以其他会话无法建立，请参考<a title=\"\" class=\"xref\" href=\"#da1040a017tbg\">方案二：取消RDP-TCP限制</a>限制进行修复。</p></li><li id=\"34661154958r8\"><p id=\"3466115595aj2\"><b data-tag=\"uicontrol\" id=\"b8abab2217b7n\" class=\"uicontrol\">安装了远程桌面会话主机角色</b>：</p><ul id=\"ebbfbaa117wnx\"><li id=\"e64e24d117dt3\"><p id=\"e718048017ljt\">在配置远程桌面会话主机角色后，会同时取消默认两个用户的免费连接授权。在没有正确配置相关授权的时候，会导致远程桌面无法连接，并出现上述错误提示，请参考<a title=\"\" class=\"xref\" href=\"#eaf3894095nqd\">方案一：删除远程桌面会话主机角色</a>进行修复。</p></li><li id=\"3466115995s5p\"><p id=\"3466115a955ow\">正常情况下Windows服务器默认提供两个用户的免费远程桌面管理授权。如果有更高的连接需求，则需要配置远程桌面会话主机服务器角色，同时购买和配置相应的授权后，才可以使用更多的远程桌面管理并发，请参考<a title=\"\" class=\"xref\" href=\"#a21ad36095qzz\">方案三：购买和配置相应的证书授权</a>进行修复。</p></li><li id=\"3466115b95cgn\"><p id=\"eaa91a801790o\">在系统内安装了远程桌面会话主机角色，此功能免费试用120天，之后需要付费。如果没有付费会造成无法通过远程桌面连接，请参考<a title=\"\" class=\"xref\" href=\"#a21ad36095qzz\">方案三：购买和配置相应的证书授权</a>进行修复。</p></li></ul></li></ul></section><section id=\"4c86894096fen\" class=\"section\"><h2 id=\"e0c814e095d4l\"><b>解决方案</b></h2><p id=\"8ca8417095f6i\">根据实际情况，参考以下三种解决方案：</p><h3 id=\"eaf3894095nqd\"><b>方案一：删除远程桌面会话主机角色</b></h3><p id=\"db6d86b017cw1\">删除远程桌面会话主机角色，使用默认两个用户的免费连接授权。本文以Windows Server 2012操作系统为例。</p><ol id=\"b0c2f973951fw\"><li id=\"b0c2f97095gao\"><p id=\"db6dadc017zwl\">通过VNC连接Windows实例。</p><p id=\"db6dadc117g26\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"b71f3d6195pd7\"><p id=\"db6dadc2171e0\">选择<b data-tag=\"uicontrol\" id=\"b8ace3a417fe9\" class=\"uicontrol\">开始</b>，单击<b data-tag=\"uicontrol\" id=\"b8ace3a6176b5\" class=\"uicontrol\">运行</b>，在打开框中输入<code data-tag=\"code\" class=\"code\">ServerManager</code>，单击<b data-tag=\"uicontrol\" id=\"b8ace3a917e9c\" class=\"uicontrol\">确定</b>。</p></li><li id=\"b71f3d6395dhh\"><p id=\"db6dadc317275\">进入<b data-tag=\"uicontrol\" id=\"b8ace3ad175xc\" class=\"uicontrol\">服务器管理器</b>页面，<b data-tag=\"uicontrol\" id=\"b8ace3af17kug\" class=\"uicontrol\">选择管理 &gt; 删除角色和功能</b>。 <img width=\"600\" id=\"b71f3d6595ew7\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6789583761/p518771.png\" class=\"image break\"></p></li><li id=\"b71f3d6695d3c\"><p id=\"db6dd4d017oem\">进入删除功能和角色页面，选择<b data-tag=\"uicontrol\" id=\"b8ad0ab317ckq\" class=\"uicontrol\">服务器角色</b>。</p></li><li id=\"b71f3d6895lfo\"><p id=\"db6dd4d117q5r\">在<b>角</b><b data-tag=\"uicontrol\" id=\"b8ad0ab8176hy\" class=\"uicontrol\">色</b>框中，取消勾选<b data-tag=\"uicontrol\" id=\"b8ad0aba176ya\" class=\"uicontrol\">远程桌面服务</b>，其它配置默认，单击<b data-tag=\"uicontrol\" id=\"b8ad0abc17w7n\" class=\"uicontrol\">下一步</b>。</p></li><li id=\"b71f3d6a95bpz\"><p id=\"db6dd4d2176wl\">重启Windows实例或重启服务器以完成安装更新。</p><ul id=\"71b1b0e295v9h\"><li id=\"71b1b0e39524w\"><p id=\"db6dd4d317zuq\">方式一：在ECS控制台上重启Windows实例，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li><li id=\"71b1b0e5952j7\"><p id=\"db6dd4d417l87\">方式二：在远程连接的Windows实例上，右键单击<b data-tag=\"uicontrol\" id=\"b8ad31c417f79\" class=\"uicontrol\">开始</b><b>，选择</b><b data-tag=\"uicontrol\" id=\"b8ad31c717w3e\" class=\"uicontrol\">关机或注销(U) &gt; 重启(R)</b>。</p></li></ul></li></ol><h3 id=\"da1040a017tbg\"><b>方案二：</b>取消RDP-TCP限制</h3><ol id=\"5e5f159395h45\"><li id=\"5e5f159095l3l\"><p id=\"53e29b0195rrg\">通过VNC连接Windows实例。</p><p id=\"868016e096rhn\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"61af791195xt0\"><p id=\"c4f8cd0195zha\">右键单击<b data-tag=\"uicontrol\" id=\"b8abf94417szv\" class=\"uicontrol\">开始</b>，然后单击<b data-tag=\"uicontrol\" id=\"b8abf9461741w\" class=\"uicontrol\">运行</b>。在<b data-tag=\"uicontrol\" id=\"b8abf94817icr\" class=\"uicontrol\">运行</b>对话框中输入<code data-tag=\"code\" class=\"code\">gpedit.msc</code>命令，然后单击<b data-tag=\"uicontrol\" id=\"b8abf94b17zz2\" class=\"uicontrol\">确定</b>，进入本地组策略编辑器页面。</p></li><li id=\"f796e930959xb\"><p id=\"034c58f095qww\">选择<b data-tag=\"uicontrol\" id=\"b8ac205317skz\" class=\"uicontrol\">计算机配置 &gt; 管理模板 &gt; Windows 组件</b><b>，</b>双击<b data-tag=\"uicontrol\" id=\"b8ac205617eay\" class=\"uicontrol\">远程桌面服务</b>。</p><img width=\"600\" id=\"217bdb21952db\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7789583761/p518768.png\" class=\"image break\"></li><li id=\"da574541955xg\"><p id=\"da57454295zg1\">进入<b data-tag=\"uicontrol\" id=\"b8ac205c17z4r\" class=\"uicontrol\">远程桌面服务</b>页面，双击<b data-tag=\"uicontrol\" id=\"b8ac205e17r4r\" class=\"uicontrol\">远程桌面会话主机 &gt; 连接 &gt; 限制连接的数量</b>。</p></li><li id=\"da574543956cj\"><p id=\"da57454495pns\">在<b data-tag=\"uicontrol\" id=\"b8ac476317aon\" class=\"uicontrol\">限制连接的数量</b>页面，选择<b data-tag=\"uicontrol\" id=\"b8ac476517i57\" class=\"uicontrol\">已启用</b>，在<b data-tag=\"uicontrol\" id=\"b8ac476717u5n\" class=\"uicontrol\">允许 RD 最大连接数</b>框中，输入需要的最大连接数，单击<b data-tag=\"uicontrol\" id=\"b8ac476917igi\" class=\"uicontrol\">确定</b>。</p><img placement=\"break\" width=\"600\" id=\"20e6f2a1a00ll\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7789583761/p518769.png\" class=\"image break\"><div id=\"d9f5f5f195gbs\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"da3103209557k\"><b data-tag=\"uicontrol\" id=\"b8ac6e7217ueu\" class=\"uicontrol\">允许RD 最大连接数</b>本文以<b data-tag=\"uicontrol\" id=\"b8ac6e7417ogv\" class=\"uicontrol\">3</b>为例，现场以实际需求为准。</p></div></div></li><li id=\"da57454995cgt\"><p id=\"da57454a951jt\">选择<b data-tag=\"uicontrol\" id=\"b8ac6e78171d2\" class=\"uicontrol\">开始</b>，单击<b data-tag=\"uicontrol\" id=\"b8ac6e7a17s7a\" class=\"uicontrol\">运行</b>，在打开框中输入<code data-tag=\"code\" class=\"code\">cmd</code>，单击<b data-tag=\"uicontrol\" id=\"b8ac6e7d17zxy\" class=\"uicontrol\">确定</b>。打开命令行，执行如下命令使策略生效。 </p><pre id=\"da57454b95al7\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>gpupdate</code></pre><p id=\"da57454c95r4z\"> 系统显示类似如下，表示完成设置。<img width=\"600\" id=\"da576c5095b2a\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6789583761/p518770.png\" class=\"image break\"></p></li></ol><h3 id=\"a21ad36095qzz\"><b>方案三：</b>购买和配置相应的证书授权</h3><p class=\"from-extensions-error\" id=\"5216fb6095ytd\">配置远程桌面会话主机服务器后，需要在微软官网购买和配置相应的证书授权，具体操作，请参见<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://technet.microsoft.com/zh-cn/library/cc732684(v=ws.11).aspx?spm=5176.7740860.2.3.aqdovJ\">微软官方文档</a>。</p><p id=\"e97cc4f017qsl\"></p></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/how-to-handle-an-authentication-error-when-connecting-to-a-windows-instance-remotely", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例时出现“出现身份验证错误，要求的函数不受支持”如何解决?</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例时出现“出现身份验证错误，要求的函数不受支持”如何解决?</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-13 13:08:55</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2289702\"><p id=\"0eaedfd995dbv\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例时出现“出现身份验证错误，要求的函数不受支持”错误提示的解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"c0c0962096zbk\" class=\"section\"><h2 id=\"h2-u73B0u8C61u63CFu8FF01\">问题现象</h2><p id=\"b1971ab095k95\">通过远程桌面连接Windows实例时，出现错误提示“<b data-tag=\"uicontrol\" id=\"14bc0442d9ige\" class=\"uicontrol\">出现身份验证错误，要求的函数不受支持</b>”。</p><img id=\"dc078310a0r53\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1597405761/p553367.png\" alt=\"1232132\" placement=\"break\" class=\"image break\"></section><section id=\"c683804096ehv\" class=\"section\"><h2 id=\"ab1b8ef095uxf\"><b>问题原因</b></h2><p id=\"d001d1209530o\">微软官方于2018年5月，更新了凭据安全支持提供程序协议（CredSSP）相关补丁和身份验证请求方式。默认情况下，安装此更新后，修补的本地电脑无法与未修补的ECS实例进行通信。</p><div type=\"note\" id=\"9bf139b1a09yn\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"9c50e5e0a0oyj\"><b data-tag=\"uicontrol\" id=\"14bc044cd9kmx\" class=\"uicontrol\">加密Oracle修正</b>是操作系统内的一种策略设置，此策略设置可应用于使用 CredSSP 组件（例如，远程桌面连接）的应用程序。</p></div></div><p id=\"e525e050a01to\">当遇到如下任一情况时，会出现该连接错误：</p><ul id=\"df699a849529e\"><li id=\"df699a8095va4\"><p id=\"d9a35500950jo\">情景一：本地电脑未更新该补丁，ECS实例已更新该补丁且加密Oracle修正的策略为<b data-tag=\"uicontrol\" id=\"14bc0452d96ku\" class=\"uicontrol\">强制更新的客户端</b>，请参考<a title=\"\" class=\"xref\" href=\"#44a6eee195sjt\">方案一：ECS实例允许远程桌面连接</a>进行修复。</p></li><li id=\"df699a8195cwq\"><p id=\"dbed450095a0m\">情景二：本地电脑已更新该补丁且加密Oracle修正的策略为<b data-tag=\"uicontrol\" id=\"14bc2b53d9aop\" class=\"uicontrol\">强制更新的客户端</b>，ECS实例未更新该补丁，请参考<a title=\"\" class=\"xref\" href=\"#44a6ef129580h\">方案二 ：安装对应补丁</a>或<a title=\"\" class=\"xref\" href=\"#44a716049517g\">方案三：修改注册表</a>进行修复。</p></li><li id=\"df699a82952ov\"><p id=\"dce623f095uit\">情景三：本地电脑已更新该补丁且加密Oracle修正的策略为<b data-tag=\"uicontrol\" id=\"14bc2b59d983a\" class=\"uicontrol\">缓解</b>，ECS实例未更新该补丁。 请参考进行修复，请参考<a title=\"\" class=\"xref\" href=\"#44a6ef129580h\">方案二 ：安装对应补丁</a>或<a title=\"\" class=\"xref\" href=\"#44a716049517g\">方案三：修改注册表</a>进行修复。</p></li></ul><div type=\"note\" id=\"e46786f195hk7\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"f5e8e18495mt7\"><li id=\"f5e8e18095481\"><p id=\"ef1c4f909563o\">未更新该补丁，指没有更新自2018年5月起至今的任意版本补丁，包括最新版本补丁。</p></li><li id=\"f5e8e181954w4\"><p id=\"f211259095yuf\">已更新该补丁，指更新过自2018年5月起至今的任意版本补丁或者所有版本补丁，包括最新版本补丁。</p></li><li id=\"f5e8e18295b9j\"><p id=\"f414218095ssr\">更多加密Oracle修正的策略信息，请参见<a class=\"\" target=\"_blank\" href=\"https://support.microsoft.com/zh-cn/topic/cve-2018-0886-%E7%9A%84-credssp-%E6%9B%B4%E6%96%B0-5cbf9e5f-dc6d-744f-9e97-7ba400d6d3ea\">CVE-2018-0886的CredSSP更新</a>。</p></li></ul></div></div></section><section id=\"cd71cb0096mpc\" class=\"section\"><h2 id=\"b9bf6c1095kdz\"><b>解决方案</b></h2><p id=\"5527fc20964mb\">根据实际情况，参考以下三种解决方案：</p><section id=\"44a6eee095otf\" class=\"section\"><h3 id=\"44a6eee195sjt\"><b>方案一：ECS实例允许远程桌面连接</b></h3><div type=\"note\" id=\"79942c5096l04\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"44a6eee295z22\">由于Windows Server系统版本较多，且各版本之间操作略有差异，此处分别以Windows Server 2008 R2、Windows Server 2012 R2和Windows Server 2016版本为例，步骤如下。</p></div></div><p id=\"e6f575e0d9s7d\"></p><section id=\"032b4af0d9abh\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"032b4af2d914u\" class=\"section\"><h4 id=\"032b4af1d9lah\"><b>Windows Server 2008 R2系统版本</b></h4><ol id=\"7ba0d902d9nhj\"><li id=\"7ba0d903d9isc\"><p id=\"7ba0d904d97l2\">通过VNC连接Windows实例。</p><p id=\"7ba0d905d92br\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"7ba0d906d9jyw\"><p id=\"7ba0d907d9j4d\">单击<b data-tag=\"uicontrol\" id=\"14bc7973d99jp\" class=\"uicontrol\">开始</b>，右键单击<b data-tag=\"uicontrol\" id=\"14bc7975d9de5\" class=\"uicontrol\">计算机</b>，然后单击<b data-tag=\"uicontrol\" id=\"14bc7977d9wya\" class=\"uicontrol\">属性</b>。 <img id=\"7ba0d908d9x60\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p529968.png\" alt=\"win2008开始菜单\" placement=\"break\" width=\"400\" class=\"image break\"></p></li><li id=\"7ba0d909d9mrz\"><p id=\"7ba0d90ad970i\">在<b data-tag=\"uicontrol\" id=\"14bc797cd9o8s\" class=\"uicontrol\">控制面板主页</b>区域，单击<b data-tag=\"uicontrol\" id=\"14bc797ed9mmz\" class=\"uicontrol\">远程设置</b>。<img id=\"7ba0d90bd9pfm\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530172.png\" alt=\"win2008远程设置\" placement=\"break\" width=\"700\" class=\"image break\"></p></li><li id=\"7ba10010d9my0\"><p id=\"7ba10011d95oj\">在<b data-tag=\"uicontrol\" id=\"14bc7983d9v07\" class=\"uicontrol\">系统属性</b>对话框中，勾选<b data-tag=\"uicontrol\" id=\"14bc7985d9rtc\" class=\"uicontrol\">允许运行任意版本远程桌面的计算机连接（较不安全）</b>，然后单击<b data-tag=\"uicontrol\" id=\"14bc7987d9f3n\" class=\"uicontrol\">确定</b>。 <img id=\"7ba10012d9o53\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530171.png\" alt=\"win2008允许\" placement=\"break\" width=\"400\" class=\"image break\"></p></li></ol></section><section id=\"032b4af5d9g6w\" class=\"section\"><h4 id=\"937ddb40d9vd0\">Windows Server 2012 R2系统版本</h4><ol id=\"44a6eef295tg7\"><li id=\"44a6eef39505o\"><p id=\"e2e5581196q2o\">通过VNC连接Windows实例。</p><p id=\"e2e55812964p4\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"44a6eef695wki\"><p id=\"44a6eef795x1b\">单击<img id=\"44a6eef895p2q\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530260.png\" alt=\"win2012开始图标\" placement=\"inline\" width=\"25\" height=\"25\" class=\"image inline\">图标，右键单击<b data-tag=\"uicontrol\" id=\"14bca086d9t0a\" class=\"uicontrol\">这台电脑</b>，然后单击<b data-tag=\"uicontrol\" id=\"14bca088d915u\" class=\"uicontrol\">属性</b>。 <img placement=\"break\" alt=\"win2012开始\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530290.png\" id=\"44a6eef995ypf\" width=\"400\" class=\"image break\"></p></li><li id=\"44a6eefa95054\"><p id=\"44a6eefb95f80\">在<b data-tag=\"uicontrol\" id=\"14bca08dd9y6k\" class=\"uicontrol\">控制面板主页</b>上，单击<b data-tag=\"uicontrol\" id=\"14bca08fd9nuu\" class=\"uicontrol\">远程设置</b>。<img width=\"700\" placement=\"break\" alt=\"win2012远程设置\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530325.png\" id=\"44a6eefc95cox\" class=\"image break\"></p></li><li id=\"44a6eefd9586l\"><p id=\"44a6eefe95231\">在<b data-tag=\"uicontrol\" id=\"14bca094d9w7r\" class=\"uicontrol\">远程</b>页签下，取消勾选<b data-tag=\"uicontrol\" id=\"14bca096d9gfs\" class=\"uicontrol\">仅允许运行使用网络级别身份验证的远程桌面的计算机连接（建议） </b>，然后单击<b data-tag=\"uicontrol\" id=\"14bca098d9qfy\" class=\"uicontrol\">确定</b>。 <img placement=\"break\" alt=\"win2012取消勾选\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530330.png\" id=\"44a6eeff95gc1\" width=\"400\" class=\"image break\"></p></li></ol></section><section id=\"a56bb340d9bh3\" class=\"section\"><h4 id=\"b9700f30d9wkv\">Windows Server 2016系统版本</h4><ol id=\"c394ccd0d9dmp\"><li id=\"c394ccd1d9086\"><p id=\"c394ccd2d95ok\">通过VNC连接Windows实例。</p><p id=\"39b0bc2296jyo\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"44a6ef05950nw\"><p id=\"44a6ef0695tew\">单击<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"44a6ef0795x83\" placement=\"inline\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"14bcc799d93md\" class=\"uicontrol\">Windows系统</b>。</p></li><li id=\"44a6ef0895uqg\"><p id=\"44a6ef0995brx\">右键单击<b data-tag=\"uicontrol\" id=\"14bcc79dd9xuk\" class=\"uicontrol\">此电脑</b>，然后选择<b data-tag=\"uicontrol\" id=\"14bcc79fd9ju1\" class=\"uicontrol\">更多 &gt; 属性</b>。 <img id=\"44a6ef0a95qmm\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530397.png\" alt=\"win2016属性\" placement=\"break\" width=\"400\" class=\"image break\"></p></li><li id=\"44a6ef0b95g0f\"><p id=\"44a6ef0c95qxp\">在<b data-tag=\"uicontrol\" id=\"14bcc7a4d95di\" class=\"uicontrol\">控制面板主页</b>上，单击<b data-tag=\"uicontrol\" id=\"14bcc7a6d97xf\" class=\"uicontrol\">远程设置</b>。<img id=\"44a6ef0d95nyu\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530400.png\" alt=\"win2016远程设置\" placement=\"break\" width=\"700\" class=\"image break\"></p></li><li id=\"44a6ef0e952tq\"><p id=\"44a6ef0f95ptv\">在<b data-tag=\"uicontrol\" id=\"14bcc7abd9gw6\" class=\"uicontrol\">远程</b>页签下，取消勾选<b data-tag=\"uicontrol\" id=\"14bceea0d9nzy\" class=\"uicontrol\">仅允许运行使用网络级别身份验证的远程桌面的计算机连接（建议） </b>，然后单击<b data-tag=\"uicontrol\" id=\"14bceea2d9q06\" class=\"uicontrol\">确定</b>。 <img id=\"44a6ef10956gt\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530402.png\" alt=\"win2016取消勾选\" placement=\"break\" width=\"400\" class=\"image break\"></p></li></ol></section></section></section><section id=\"44a6ef11956aq\" class=\"section\"><h3 id=\"44a6ef129580h\"><b>方案二 ：安装对应补丁</b></h3><p id=\"44a6ef1395p7a\">此处以Windows Server 2016系统版本为例，其他Windows系统版本操作类似。</p><ol id=\"44a6ef1495kc6\"><li id=\"44a6ef1595aow\"><p id=\"39b0bc2496509\">通过VNC连接Windows实例。</p><p id=\"39b0bc2596lk1\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"44a6ef189566u\"><p id=\"44a6ef19957nw\">单击<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"44a6ef1a95l34\" placement=\"inline\" class=\"image inline\">图标，单击<b data-tag=\"uicontrol\" id=\"14bceeb1d9rsf\" class=\"uicontrol\">设置</b><b>。</b><img id=\"44a6ef1b95s61\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530389.png\" alt=\"win2016开始\" placement=\"break\" width=\"600\" class=\"image break\"></p></li><li id=\"44a715f09551p\"><p id=\"44a715f195rwd\">在<b data-tag=\"uicontrol\" id=\"14bceeb7d9wc5\" class=\"uicontrol\">Windows 设置</b>页面，单击<b data-tag=\"uicontrol\" id=\"14bceeb9d95vp\" class=\"uicontrol\">更新</b><b data-tag=\"uicontrol\" id=\"14bd15b0d941i\" class=\"uicontrol\">和</b><b data-tag=\"uicontrol\" id=\"14bd15b2d9drs\" class=\"uicontrol\">安全</b>。<img id=\"44a715f295gua\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3516030761/p530390.png\" alt=\"win2016更新与安全\" placement=\"break\" width=\"600\" class=\"image break\"></p></li><li id=\"44a715f395mh5\"><p id=\"44a715f4957ux\">在<b data-tag=\"uicontrol\" id=\"14bd15b7d9zyc\" class=\"uicontrol\">更新状态</b>页面，单击<b data-tag=\"uicontrol\" id=\"14bd15b9d9lqx\" class=\"uicontrol\">检查更新</b>，等待更新下载和安装。 </p><div type=\"note\" id=\"44a715f5952ei\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"44a715f695o54\">如果需要手动安装CredSSP对应安全更新包，请访问<a class=\"\" target=\"_blank\" href=\"https://www.microsoft.com/zh-cn/windows/\">微软官网</a>，然后下载对应版本的安全更新包。</p></div></div><img id=\"44a715f8952v7\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530392.png\" alt=\"win2016检查更新\" placement=\"break\" width=\"600\" class=\"image break\"></li><li id=\"44a715f995zx8\"><p id=\"44a715fa95lby\">重启Windows实例以完成安装更新。</p><ul id=\"44a715fb95ivv\"><li id=\"44a715fc9560p\"><p id=\"44a715fd95umz\">方式一：在ECS控制台上重启Windows实例，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li><li id=\"44a715fe95ebi\"><p id=\"44a715ff95qio\">方式二：以Windows Server 2016版本为例，在远程连接的Windows实例上，选择<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"44a7160095bji\" placement=\"inline\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"14bd3cc0d9ig2\" class=\"uicontrol\"> &gt; </b><img width=\"25\" placement=\"inline\" alt=\"电源管理\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530476.png\" id=\"44a7160195de9\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"14bd3cc3d9uke\" class=\"uicontrol\"> &gt; 重启</b>。<img placement=\"break\" alt=\"win2016重启服务器\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530473.png\" id=\"44a71602957sa\" class=\"image break\"></p></li></ul></li></ol></section><section id=\"44a7160395pqv\" class=\"section\"><h3 id=\"44a716049517g\"><b>方案三：修改注册表</b></h3><p id=\"44a71605952bj\">此处以Windows Server 2016系统版本为例，其他Windows系统版本操作类似。当本地电脑或ECS实例完成CredSSP相关补丁的更新后，请选择以下一种方式修改注册表。</p><div type=\"warning\" id=\"44a71606953n4\" class=\"note note-warning\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note warning\"></i></div><div class=\"noteContentSpan\"><strong>警告 </strong><p id=\"44a71607952ca\">如果修改注册表不当，Windows操作系统可能会出现严重问题，您需要自行承担修改注册表的风险。修改注册表之前，建议您先创建快照备份数据，以免数据丢失。创建快照的具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></div></div><p id=\"29612220d95u5\"></p><section id=\"2add13c0d9gzc\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"2add13c2d9mle\" class=\"section\"><h4 id=\"2e722160d9w5n\">（推荐）使用脚本修改注册表</h4><ol id=\"44a7160995ou5\"><li id=\"44a7160a95p8m\"><p id=\"39b0bc2796h3l\">通过VNC连接Windows实例。</p><p id=\"39b0bc2896jdw\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"44a7160d957a6\"><p id=\"44a7160e95xkx\">打开CMD命令提示行。</p><ol id=\"44a7160f95wwh\"><li id=\"44a71610956r1\"><p id=\"44a7161195q4u\">右键单击<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"44a7161295d4p\" placement=\"inline\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"14bd63d7d90e5\" class=\"uicontrol\">运行</b>。<img placement=\"break\" alt=\"win2016运行\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530508.png\" id=\"44a7161395drr\" class=\"image break\"></p></li><li id=\"44a7161495cae\"><p id=\"44a7161595mrv\">在<b data-tag=\"uicontrol\" id=\"14bd63dcd9a3e\" class=\"uicontrol\">运行</b>对话框中输入<code data-tag=\"code\" class=\"code\">cmd</code>。<img placement=\"break\" alt=\"win2016\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530531.png\" id=\"44a7161695d0q\" class=\"image break\"></p></li><li id=\"44a7161795vgl\"><p id=\"44a7161895dri\">单击<b data-tag=\"uicontrol\" id=\"14bd63e2d9ttd\" class=\"uicontrol\">确定</b><b>。</b></p><p id=\"44a7161995z22\">进入CMD命令提示行。<img placement=\"break\" alt=\"win2016cmd命令提示行\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530535.png\" id=\"44a7161a95e2e\" class=\"image break\"></p></li></ol></li><li id=\"44a7161b954qk\"><p id=\"44a7161c95kbz\">执行以下命令，进入PowerShell模式。 </p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"44a7161d95lam\" class=\"pre codeblock language-javascript\"><code>powershell</code></pre></li><li id=\"44a7161f95eip\"><p id=\"44a71620956gr\">执行如下命令，以管理员身份运行<code data-tag=\"code\" class=\"code\">Windows PowerShell</code>脚本。 </p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"44a71621954xh\" class=\"pre codeblock language-javascript\"><code>New-Item -Path HKLM:\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System -Name CredSSP -Force\nNew-Item -Path HKLM:\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\CredSSP -Name Parameters -Force\nGet-Item -Path HKLM:\\Software\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\CredSSP\\Parameters | New-ItemProperty -Name AllowEncryptionOracle -Value 2 -PropertyType DWORD -Force</code></pre></li><li id=\"44a7162395vs9\"><p id=\"44a71624953qi\">重启Windows实例以完成安装更新。</p><ul id=\"752285c2d9zmc\"><li id=\"752285c3d9td0\"><p id=\"752285c4d9ewb\">方式一：在ECS控制台上重启Windows实例，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li><li id=\"752285c5d941k\"><p id=\"752285c6d9naf\">方式二：以Windows Server 2016版本为例，在远程连接的Windows实例上，选择<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"752285c7d93fv\" placement=\"inline\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"14bd3cc0d9ig2\" class=\"uicontrol\"> &gt; </b><img width=\"25\" placement=\"inline\" alt=\"电源管理\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530476.png\" id=\"752285c8d9plk\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"14bd3cc3d9uke\" class=\"uicontrol\"> &gt; 重启</b>。<img placement=\"break\" alt=\"win2016重启服务器\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530473.png\" id=\"44a7162c951bt\" class=\"image break\"></p></li></ul><div type=\"note\" id=\"44a7162d95moz\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"44a7162e95kmx\">若您先使用本方法修改了注册表，随后又更新了本地电脑和Windows实例的安全补丁，建议您将<code data-tag=\"code\" class=\"code\">AllowEncryptionOracle</code>的<b data-tag=\"uicontrol\" id=\"14bdb1f0d9eb0\" class=\"uicontrol\">数值数据</b>设为<code data-tag=\"code\" class=\"code\">0</code>或者<code data-tag=\"code\" class=\"code\">1</code>以获得更高的安全性。<code data-tag=\"code\" class=\"code\">AllowEncryptionOracle</code>的<b data-tag=\"uicontrol\" id=\"14bdb1f5d9mm4\" class=\"uicontrol\">数值数据</b>信息，请参见<a class=\"\" target=\"_blank\" href=\"https://support.microsoft.com/zh-cn/help/4093492/credssp-updates-for-cve-2018-0886-march-13-2018\">CVE-2018-0886的CredSSP更新</a>。</p></div></div></li></ol></section><section id=\"2add13c5d93w8\" class=\"section\"><h4 id=\"482d3270d9qjv\">手动修改注册表</h4><ol id=\"44a7163095tgv\"><li id=\"44a7163195o4e\"><p id=\"44a7163295gh6\">通过VNC连接Windows实例。</p><p id=\"39b0bc2a96911\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"44a7163495x61\"><p id=\"44a7163595iqw\">打开注册表编辑器。</p><ol id=\"44a7163695img\"><li id=\"44a7163795xux\"><p id=\"44a71638956zc\">右键单击<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"44a7163995wec\" placement=\"inline\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"14bdb206d903p\" class=\"uicontrol\">运行</b>。<img placement=\"break\" alt=\"win2016运行\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530508.png\" id=\"44a7163a95nfm\" class=\"image break\"></p></li><li id=\"44a7163b9582i\"><p id=\"44a7163c95f5x\">在<b data-tag=\"uicontrol\" id=\"14bdd900d9nr5\" class=\"uicontrol\">运行</b>对话框中输入<code data-tag=\"code\" class=\"code\">regedit</code>。<img placement=\"break\" alt=\"win2016运行窗口\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530516.png\" id=\"44a7163d95ciq\" class=\"image break\"></p></li><li id=\"44a7163e95z1z\"><p id=\"44a7163f95s57\">单击<b data-tag=\"uicontrol\" id=\"14bdd906d90qq\" class=\"uicontrol\">确定</b>。</p><p id=\"44a7164095u2h\">进入注册表编辑器。 <img placement=\"break\" alt=\"win2016注册表编辑器\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530520.png\" id=\"44a7164195h1d\" class=\"image break\"></p></li></ol></li><li id=\"44a7164295la8\"><p id=\"44a7164395iey\">在<b data-tag=\"uicontrol\" id=\"14bdd90cd9dso\" class=\"uicontrol\">注册表编辑器</b>页面的<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\CredSSP\\Parameters</code>路径下，将注册表项<code data-tag=\"code\" class=\"code\">AllowEncryptionOracle</code>的<b data-tag=\"uicontrol\" id=\"14bdd910d9j57\" class=\"uicontrol\">数值数据</b>设置为<b data-tag=\"uicontrol\" id=\"14bdd912d9lat\" class=\"uicontrol\">2</b><b>。</b></p><div id=\"44a7164495pfk\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"44a7164595njr\">注册表项<code data-tag=\"code\" class=\"code\">AllowEncryptionOracle</code>的<b data-tag=\"uicontrol\" id=\"14bdd918d9tr9\" class=\"uicontrol\">数值数据</b>信息，请参见<a class=\"\" target=\"_blank\" href=\"https://support.microsoft.com/zh-cn/help/4093492/credssp-updates-for-cve-2018-0886-march-13-2018\">CVE-2018-0886的CredSSP更新</a>。</p></div></div><p id=\"44a7164695k68\">如果<code data-tag=\"code\" class=\"code\">CredSSP</code>项或<code data-tag=\"code\" class=\"code\">Parameters</code>项不存在，请新建对应注册表项，然后在该注册表项下新建REG_DWORD类型的注册表项<code data-tag=\"code\" class=\"code\">AllowEncryptionOracle</code>。以<code data-tag=\"code\" class=\"code\">CredSSP</code>项和<code data-tag=\"code\" class=\"code\">Parameters</code>均不存在为例，操作如下：</p><ol id=\"44a7164795gck\"><li id=\"44a7164895o29\"><p id=\"44a7164995u7w\">在<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System</code>路径下新建<code data-tag=\"code\" class=\"code\">CredSSP</code>项。</p><ol id=\"44a7164a95ud4\"><li id=\"44a7164b95mn3\"><p id=\"44a7164c95fzu\">右键单击注册表项空表区域，然后选择<b data-tag=\"uicontrol\" id=\"14be001dd92p6\" class=\"uicontrol\">新建（N） &gt; 项（K）</b>。<img placement=\"break\" alt=\"win2016新建项\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530609.png\" id=\"44a7164d95dye\" width=\"600\" class=\"image break\"></p></li><li id=\"44a7164e95emp\"><p id=\"44a7164f95ngh\">输入<code data-tag=\"code\" class=\"code\">CredSSP</code>，按<code data-tag=\"code\" class=\"code\">Enter</code>键。</p><img width=\"600\" placement=\"break\" alt=\"新建项\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530615.png\" id=\"44a716519520i\" class=\"image break\"></li></ol></li><li id=\"44a71652950yr\"><p id=\"44a7165395150\">在<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\CredSSP</code>路径下新建<code data-tag=\"code\" class=\"code\">Parameters</code>项。<img width=\"600\" placement=\"break\" alt=\"Parameters项\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530619.png\" id=\"44a7165495rm3\" class=\"image break\"></p></li><li id=\"44a7165595555\"><p id=\"44a71656950h5\">在<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\CredSSP\\Parameters</code>路径下新建<code data-tag=\"code\" class=\"code\">AllowEncryptionOracle</code>项。<img width=\"600\" placement=\"break\" alt=\"新建字符串\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3516030761/p530629.png\" id=\"44a7165795e91\" class=\"image break\"></p></li><li id=\"44a71658959gu\"><p id=\"44a7165995t8j\">修改注册表项<code data-tag=\"code\" class=\"code\">AllowEncryptionOracle</code>的<b data-tag=\"uicontrol\" id=\"14be4e42d905y\" class=\"uicontrol\">数值数据</b><b>。</b></p><ol id=\"44a7165a95zqz\"><li id=\"44a7165b95nch\"><p id=\"44a7165c95vmi\">右键单击注册表项<code data-tag=\"code\" class=\"code\">AllowEncryptionOracle</code>，然后单击<b data-tag=\"uicontrol\" id=\"14be4e49d982r\" class=\"uicontrol\">修改（M）</b>。<img width=\"600\" placement=\"break\" alt=\"修改注册表项\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530638.png\" id=\"44a7165d95qlf\" class=\"image break\"></p></li><li id=\"44a7165e953sh\"><p id=\"44a7165f95qzr\">在对话框中，将<b data-tag=\"uicontrol\" id=\"14be7542d9elz\" class=\"uicontrol\">数值数据</b>设置为<b data-tag=\"uicontrol\" id=\"14be7544d9dgg\" class=\"uicontrol\">2</b>，然后单击<b data-tag=\"uicontrol\" id=\"14be7546d9uo0\" class=\"uicontrol\">确定</b>。<img width=\"600\" placement=\"break\" alt=\"修改数据数值\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530643.png\" id=\"44a7166095h85\" class=\"image break\"></p></li></ol></li></ol></li><li id=\"44a71661952d9\"><p id=\"44a7166295gnk\">重启Windows实例以更新配置。</p><ul id=\"44a7166395507\"><li id=\"44a7166495w9b\"><p id=\"44a7166595gef\">方式一：在ECS控制台上重启Windows实例，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li><li id=\"44a7166695a36\"><p id=\"44a71667956ju\">方式二：以Windows Server 2016版本为例，在远程连接的Windows实例上，选择<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" alt=\"Dingtalk_20210510142550.jpg\" width=\"25\" id=\"44a7166895ire\" placement=\"inline\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"14be7552d9cqh\" class=\"uicontrol\"> &gt; </b><img width=\"25\" placement=\"inline\" alt=\"电源管理\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5688920761/p530476.png\" id=\"44a7166995gzo\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"14be7555d9xl7\" class=\"uicontrol\"> &gt; 重启</b>。<img placement=\"break\" alt=\"win2016重启服务器\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p530473.png\" id=\"44a7166a959ik\" class=\"image break\"></p></li></ul></li></ol></section></section></section></section><h2 id=\"44a7166b954rw\">相关文档</h2><section id=\"44a7166c95o31\" class=\"section\"><p id=\"44a7166d95upd\"><a class=\"\" target=\"_blank\" href=\"https://portal.msrc.microsoft.com/zh-cn/security-guidance/advisory/CVE-2018-0886\">CVE-2018-0886 | CredSSP 远程执行代码漏洞</a></p></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-error-message-your-credentials-don-t-work-appears-when-i-remotely-log-on-to-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>远程登录Windows实例提示“您的凭据不工作”如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>远程登录Windows实例提示“您的凭据不工作”如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 15:53:52</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"f541ca0065clf\"><p data-tag=\"shortdesc\" id=\"f545c1a165jhy\" class=\"shortdesc\">本文介绍如何处理远程登录Windows实例时提示<b data-tag=\"uicontrol\" id=\"8e03fc800aihw\" class=\"uicontrol\">您的凭据不工作</b>问题。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"0e85806085rjl\" class=\"section\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"f545c1a565j23\">使用远程桌面访问Windows系统的ECS实例时，出现<b data-tag=\"uicontrol\" id=\"8e03fc860aaiw\" class=\"uicontrol\">您的凭据不工作</b>错误。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8794251761/p518794.png\" class=\"image break\"></section><section id=\"1eda41d085ggn\" class=\"section\"><h2 id=\"4rM4I\">可能原因</h2><p id=\"7ca555c185nad\">出现该问题可能有以下原因：</p><ul id=\"bfc8aeb285887\"><li id=\"bfc8aeb085bob\"><p id=\"f545e8b2653r3\"><b>原因1</b>：如果使用VNC可以正常登录ECS实例，可能是Windows操作系统内开启了密码保护共享功能。您可以通过关闭密码保护共享来解决，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#9f9a7bf0803xb\">关闭密码保护共享</a>。</p></li><li id=\"c15912b0851rj\"><p id=\"8bce6e1080l87\"><b>原因2</b>：配置了强制来宾账户访问，您可以通过关闭来宾账户来解决。具体操作，请参见<a title=\"\" class=\"xref\" href=\"#f54636d365nx0\"> 关闭来宾账户访问</a>。</p></li></ul></section><section id=\"13b276a085vd7\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><section id=\"21bbc17085gof\" class=\"section\"><h3 id=\"9f9a7bf0803xb\">方案<b>1：关闭密码保护共享</b></h3><ol id=\"f5460fc865op6\"><li id=\"f5460fc965j4j\"><p id=\"f5460fca65m7w\">使用VNC方式登录ECS实例。</p><p id=\"f72f44e085eib\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"f5460fcb65o7o\"><p id=\"f54636d065615\">选择<b data-tag=\"uicontrol\" id=\"8e0471b40aeci\" class=\"uicontrol\">控制面板 &gt; 所有控制面板项 &gt; 网络和共享中心 &gt; 高级共享设置</b>。</p></li><li id=\"f54636d165nsa\"><p id=\"f54636d265hlh\">在<b data-tag=\"uicontrol\" id=\"8e0471b80a15k\" class=\"uicontrol\">密码保护的共享</b>配置项，选中<b data-tag=\"uicontrol\" id=\"8e0471ba0awnr\" class=\"uicontrol\">无密码保护的共享</b>，然后单击<b data-tag=\"uicontrol\" id=\"8e0498c00a58c\" class=\"uicontrol\">保存更改</b>。 </p><img placement=\"break\" alt=\"保存更改\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5491222761/p539581.png\" id=\"272cdab085ffi\" class=\"image break\"></li></ol></section><section id=\"f54636d365nx0\" class=\"section\"><h3 id=\"759be20086cyu\">方案<b>2：关闭来宾账户访问</b></h3><ol id=\"54950cf180qp0\"><li id=\"5494e5e080tsw\"><p id=\"d1122901851oe\">使用VNC方式登录ECS实例。</p><p id=\"d112290285rlb\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"55d750f080fbq\"><p id=\"51d21c6080msz\">以管理员身份运行Windows PowerShell。</p></li><li id=\"49808b218529q\"><p id=\"49808b2085htq\">在Windows PowerShell对话框，执行如下命令，关闭来宾账户访问。</p><pre id=\"51d21c6180qdn\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>Set-ItemProperty -Path \"HKLM:\\SYSTEM\\CurrentControlSet\\Control\\Lsa\" -Name \"forceguest\" -Value 0 -Force</code></pre></li></ol></section></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/winodws-via-remote-desktop-connection-system-of-ecs-instance-how-to-copy-and-paste-text-solve", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Winodws系统的ECS实例时，无法进行文本复制粘贴如何解决？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Winodws系统的ECS实例时，无法进行文本复制粘贴如何解决？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-09 14:01:43</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"703f03109fq54\"><p data-tag=\"shortdesc\" id=\"704210589f2d9\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows系统的ECS实例时不能复制粘贴内容问题的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"9aecea509faz4\" class=\"section\"><h2 id=\"XbeWY\">问题现象</h2><p id=\"9c05f6c0a5ofi\">通过远程桌面连接Windows ECS实例后，无法复制粘贴实例中的内容至本地电脑。</p></section><section id=\"a2dfd3d09fi1x\" class=\"section\"><h2 id=\"9a6829f09fgmk\">问题原因</h2><p id=\"eea8c4709f5vu\">Windows系统的ECS实例中<code data-tag=\"code\" class=\"code\">rdpclip.exe</code>应用程序运行异常。</p><div id=\"1f5eeee0a2mwk\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"251de160a2cyl\">rdpclip是一种远程桌面组建，用于远程桌面时进行文件或内容复制粘贴。通过远程桌面连接实例后，若系统内<code data-tag=\"code\" class=\"code\">rdpclip.exe</code>进程异常，则无法复制粘贴目标实例中的文件或内容至本地电脑。</p></div></div></section><section id=\"a681d9c09fvo8\" class=\"section\"><h2 id=\"EFTFF\">解决方案</h2><p id=\"7042376e9fw2c\">远程连接Windows ECS实例无法使用复制粘贴功能时，可以通过重启Windows ECS实例内的rdpclip.exe进程来解决。</p><p id=\"88345580a5w8r\">请参考以下操作步骤进行修复： </p><ol id=\"a9ccfb319fytb\"><li id=\"21c506c19fajf\"><p id=\"21c506c09fdzo\">在本地电脑中，右键单击<img placement=\"inline\" id=\"11c458c69fk4m\" width=\"25\" alt=\"Dingtalk_20210510142550.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" class=\"image inline\">图标，选择<b data-tag=\"uicontrol\" id=\"48c50f84a2514\" class=\"uicontrol\">运行</b>。</p></li><li id=\"144b9fe09fuaa\"><p id=\"144b78d09fur2\">在<b data-tag=\"uicontrol\" id=\"48c50f88a2bnl\" class=\"uicontrol\">运行</b>窗口输入<code data-tag=\"code\" class=\"code\">mstsc</code>命令，然后按<code data-tag=\"code\" class=\"code\">Enter</code>键打开<b data-tag=\"uicontrol\" id=\"b11a5371a2fuf\" class=\"uicontrol\">远程桌面连接</b>窗口。</p></li><li id=\"ZH-CN-TOPIC-0165571650-li1567974783919\"><p id=\"704237709f2xt\">在<b data-tag=\"uicontrol\" id=\"ef7be3c0a295j\" class=\"uicontrol\">远程桌面连接</b>窗口，单击<b data-tag=\"uicontrol\" id=\"48c50f8fa2rfd\" class=\"uicontrol\">显示选项</b>，选择<b data-tag=\"uicontrol\" id=\"48c50f91a2w69\" class=\"uicontrol\">本地资源</b>选项卡，选中<b data-tag=\"uicontrol\" id=\"48c53690a28bv\" class=\"uicontrol\">本地设备和资源</b>中的<b data-tag=\"uicontrol\" id=\"48c53692a27tm\" class=\"uicontrol\">剪贴板</b>，单击<b data-tag=\"uicontrol\" id=\"48c53694a2r32\" class=\"uicontrol\">详细信息</b>，选中<b data-tag=\"uicontrol\" id=\"48c53696a2xfi\" class=\"uicontrol\">驱动器</b>，单击<b data-tag=\"uicontrol\" id=\"48c53698a2eyz\" class=\"uicontrol\">确定</b>。</p><img width=\"700\" placement=\"break\" alt=\"12\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0717035761/p553314.png\" id=\"a28677b1a2f00\" class=\"image break\"></li><li id=\"704237719fcak\"><p id=\"704237729fu8x\">使用<b data-tag=\"uicontrol\" id=\"48c5369da2sq3\" class=\"uicontrol\">远程桌面</b>连接Windows实例，打开<b data-tag=\"uicontrol\" id=\"48c5369fa2x9u\" class=\"uicontrol\">任务管理器</b>，在<b data-tag=\"uicontrol\" id=\"a92437a0a2m9n\" class=\"uicontrol\">详细信息</b>页面中选中<code data-tag=\"code\" class=\"code\">rdpclip.exe</code>进程，然后单击<b data-tag=\"uicontrol\" id=\"48c55da1a2z8x\" class=\"uicontrol\">结束任务</b>。</p><img placement=\"break\" alt=\"13\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0717035761/p553323.png\" id=\"a4ba47a1a23ye\" class=\"image break\"></li><li id=\"703f03119fapl\"><p id=\"2c3d5b409fih6\">右键单击<img placement=\"inline\" id=\"2c3d5b419fonf\" width=\"25\" alt=\"Dingtalk_20210510142550.jpg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6688920761/p519497.png\" class=\"image inline\">图标，选择<b data-tag=\"uicontrol\" id=\"48c55da7a27ac\" class=\"uicontrol\">运行</b>。</p></li><li id=\"704237749f6nv\"><p id=\"704237759ft37\">在<b data-tag=\"uicontrol\" id=\"48c55daba2b9x\" class=\"uicontrol\">运行</b>窗口中输入<code data-tag=\"code\" class=\"code\">rdpclip.exe</code>，单击<b data-tag=\"uicontrol\" id=\"48c55daea214f\" class=\"uicontrol\">确定</b>，重新启动该程序。</p><img placement=\"break\" alt=\"14\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0717035761/p553327.png\" id=\"a8281e31a2tnq\" class=\"image break\"></li><li id=\"704237769fy21\"><p id=\"704237779f2u0\">确认复制、粘贴功能恢复正常。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/initialize-the-cloud-disk-in-the-mount-centos-7-system-when-the-site-command-jam-phenomenon-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>初始化云盘时，在CentOS 7系统mount本地盘时出现命令卡住现象，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>初始化云盘时，在CentOS 7系统mount本地盘时出现命令卡住现象，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-01 11:16:00</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2350257\"><p id=\"6d376da7fb3xv\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍初始化云盘时，在CentOS 7系统<code data-tag=\"code\" class=\"code\">mount</code>本地盘时出现命令卡住现象的问题描述、问题原因和解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"8117c6d0fby5g\" class=\"section\"><h2 id=\"8117c6d1fbyhq\"><b>问题描述</b></h2><p id=\"87d4a150fbula\">在CentOS 7系统使用ext4文件系统批量初始化本地盘时，使用<code data-tag=\"code\" class=\"code\">mount</code>命令挂载本地盘时出现命令卡住的现象，然后使用<code data-tag=\"code\" class=\"code\">ps</code>命令查看mount进程为D状态（睡眠状态）。</p></section><section id=\"89a14b00fb2ox\" class=\"section\"><h2 id=\"89a14b01fbynh\"><b>问题原因</b></h2><p id=\"268a59f0ffi9f\">该问题是由于Linux的<code data-tag=\"code\" class=\"code\">2.6.37</code>及更高的内核版本（通过<code data-tag=\"code\" class=\"code\">uname -r</code>查询）默认启用了lazy init功能导致。CentOS 7系统的内核版本是<code data-tag=\"code\" class=\"code\">3.10</code>，因此默认启用了lazy init功能。</p><p id=\"9078b260fbk2v\">使用ext4文件系统首次执行<code data-tag=\"code\" class=\"code\">mount</code>操作时需要初始化inode table。但是CentOS 7默认启用了lazy init功能，导致在初始化ext4文件系统时不会立刻去初始化文件系统的inode table，而是在<code data-tag=\"code\" class=\"code\">mount</code>挂载云盘时才进行。同时在3.10内核中<code data-tag=\"code\" class=\"code\">mount</code>时会有获取IO锁的操作，本地盘规格族由于容量较大，系统需要随机在云盘中写入数据，初始化需要的时间长，会出现<code data-tag=\"code\" class=\"code\">mount</code>需要的IO锁被lazy init长时间占用的情况，因此导致<code data-tag=\"code\" class=\"code\">mount</code>命令卡住。 </p><div type=\"note\" id=\"1e44b951fdyd7\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"ec218ad1ffa7v\"><li id=\"9c4b2841ffwfn\"><p id=\"9c4b2840ff45n\">在4.x版本内核中，对锁机制进行了优化，因此没有这个问题。</p></li><li id=\"76631eb1fd4kh\"><p id=\"76839f00fdv04\">关于本地盘的更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/local-disks\">本地盘</a>。</p></li></ul></div></div></section><section id=\"926c4500fbgkd\" class=\"section\"><h2 id=\"926c4501fbvcb\"><b>解决方案</b></h2><h4 id=\"21577560fdwru\"><b>方案一：</b>关闭lazy init功能</h4><p id=\"7b304080fdsbx\">在云盘初始化时执行以下命令，关闭lazy init功能。</p><pre id=\"gmp8hs\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>mkfs.ext4 -E lazy_itable_init=0,lazy_journal_init=0</code></pre><p id=\"c01127f0fd6r9\">此方案在数据盘容量较大时，初始化也比较耗费。例如32块ecs.d3s.16xlarge规格的本地盘全部初始化挂载完成约耗时4.5~5小时。</p><p id=\"466a55b0fe3xu\">云盘初始化的更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-27\">初始化概述</a>。</p><h4 id=\"iyi3B\" data-lake-index-type=\"0\"><b>方案二：使用xfs初始化</b></h4><p id=\"99be0c82fb087\">CentOS 7系统默认使用ext4文件系统，建议您使用xfs文件系统对云盘初始化。云盘初始化的更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-27\">初始化概述</a>。</p><p id=\"5cde03f0fex8n\">xfs文件系统的初始化策略是按需分配，因此没有ext4文件系统全盘初始化的操作， 此方案对数据盘进行初始化时挂载速度较快。例如32块ecs.d3s.16xlarge规格的本地盘全部初始化挂载完成仅需几分钟。</p><div type=\"important\" id=\"0bac7e51fflhi\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"0c1f6460ff3jq\">CentOS 7系统默认使用ext4文件系统，建议您在环境上使用xfs文件系统时进行测试验证后再进行业务操作，避免出现兼容性问题。</p></div></div></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/linux-instances-of-ecs-the-average-user-to-use-the-su-command-switch-root-tip-su-authentication-failure-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>Linux系统的ECS实例中，普通用户使用su命令切换root用户时提示“su: Authentication failure”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例中，普通用户使用su命令切换root用户时提示“su: Authentication failure”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:31:04</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"a9efa4d0c6pai\"><p data-tag=\"shortdesc\" id=\"a9f57132c6j47\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中，普通用户使用su命令切换root用户时提示“su: Authentication failure”错误的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"c1cab5d0c62x8\" class=\"section\"><h2 id=\"XbeWY\">问题现象</h2><p id=\"3dedd800c6yor\">在Linux系统的ECS实例中，普通用户使用su命令切换root用户时提示“su: Authentication failure”错误，执行<code data-tag=\"code\" class=\"code\">cat /var/log/secure</code>查看<code data-tag=\"code\" class=\"code\">secure</code>日志，显示如下错误信息。</p><pre data-tag=\"codeblock\" id=\"a9efa4d1c6hgb\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>pam_unix(sshd:auth): check pass; user unknown</code></pre></section><section id=\"c38202c0c6qwe\" class=\"section\"><h2 id=\"tayMx\">问题原因</h2><p id=\"6569e040c62ep\">该问题可能是<code data-tag=\"codeph\" class=\"codeph\">/bin/su</code>文件缺少<code data-tag=\"code\" class=\"code\">s</code>权限，导致普通用户无法使用<code data-tag=\"code\" class=\"code\">su</code>命令切换root用户。</p></section><section id=\"8ff2e4f0c6lh6\" class=\"section\"><h2 id=\"EFTFF\">解决方案</h2><ol id=\"d9070b42c6nap\"><li id=\"d9070b40c6k3f\"><p id=\"a9f5bf54c6kyl\">使用root用户登录ECS实例。</p><p id=\"dce81600c6yhz\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"db427c51c6jrn\"><p id=\"db427c50c6bq9\">执行如下命令，查看<code data-tag=\"codeph\" class=\"codeph\">/bin/su</code>文件权限。</p><pre id=\"3olunh\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls -l /bin/su</code></pre><p id=\"5448ffc0c6c6f\">返回结果如下所示，说明<code data-tag=\"codeph\" class=\"codeph\">/bin/su</code>文件缺少<code data-tag=\"code\" class=\"code\">s</code>权限。</p><img id=\"51564ca0c6pko\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8796929761/p606060.png\" alt=\"查看权限\" placement=\"break\" class=\"image break\"></li><li id=\"f61e1891c6y46\"><p id=\"f61e1890c6dbe\">执行如下命令，为<code data-tag=\"codeph\" class=\"codeph\">/bin/su</code>文件添加<code data-tag=\"code\" class=\"code\">s</code>权限。</p><pre data-tag=\"codeblock\" id=\"a9efa4d2c6jki\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chmod u+s /bin/su</code></pre></li><li id=\"7b0c3f51c69n5\"><p id=\"7b0c3f50c68t4\">重新使用<code data-tag=\"code\" class=\"code\">su</code>命令切换root用户，确保可以正常切换。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-connection-was-denied-because-the-user-account-is-not-authorized-for-remote-login", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/examples-of-remote-connection-problems/\">实例远程连接问题</a></span>\n <span><a href=\"/zh/ecs/support/remote-desktop-connection-issue/\">远程桌面（RDP）连接问题</a></span>\n <span>通过远程桌面连接Windows实例提示\"连接被拒绝，因为没有授权此用户账户进行远程登录\"错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过远程桌面连接Windows实例提示\"连接被拒绝，因为没有授权此用户账户进行远程登录\"错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-24 10:44:59</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"main-2289733\"><p data-tag=\"shortdesc\" id=\"040fb58995mmh\" class=\"shortdesc\">本文介绍通过远程桌面连接Windows实例提示\"连接被拒绝，因为没有授权此用户账户进行远程登录\"错误的解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"b1b1a5b096s7p\" class=\"section\"><h2 id=\"1c8a750495y7b\"><b>问题描述</b></h2><section id=\"22419080965hq\" class=\"section\"><p id=\"791eea0096c5y\">使用远程桌面连接Windows系统的ECS实例时，出现“<b data-tag=\"uicontrol\" class=\"uicontrol\">连接被拒绝，因为没有授权此用户账户进行远程登录。</b>”错误，导致无法远程登录ECS实例。</p><img height=\"378\" width=\"379\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5722293761/p518811.png\" id=\"ad56ae71965zd\" class=\"image break\"></section></section><section id=\"b54c0a8096nsc\" class=\"section\"><h2 id=\"1c8a750795i0o\"><b>问题原因</b></h2><section id=\"257fa48096ymg\" class=\"section\"><p id=\"57af30f496lps\">该问题可能是由于Windows系统远程桌面相关权限配置异常导致。您可以参考以下三种方案进行排查修复。</p><ul id=\"b8de3af296ady\"><li id=\"b8de3af096rhf\"><p id=\"f7c0eab096jc9\"><a title=\"\" class=\"xref\" href=\"#b28dd19195j91\">步骤一：排查组策略用户权限分配</a></p></li><li id=\"f94e417196w4r\"><p id=\"f94e4170965yj\"><a title=\"\" class=\"xref\" href=\"#57af09e296n9t\">步骤二：排查问题用户的用户组属性</a></p></li><li id=\"026e605196kcs\"><p id=\"026e605096cbf\"><a title=\"\" class=\"xref\" href=\"#6f16bfa0962pu\">步骤三：排查远程桌面会话主机配置</a></p></li></ul></section></section><section id=\"beda548096u4s\" class=\"section\"><h2 id=\"1c8a750e95ewa\">解决方案</h2><section id=\"3dd24bf096gae\" class=\"section\"><p id=\"57af30f196jtl\">您可以根据实际情况，选择对应方案进行解决，本文以Windows Server 2008操作系统为例。</p><section id=\"2f312df0961ru\" class=\"section\"><h3 id=\"b28dd19195j91\"><b>步骤一：排查组策略用户权限分配</b></h3><ol id=\"1c8a752095gon\"><li id=\"1c8a752195j0k\"><p id=\"57af09e096ju4\">通过VNC连接Windows实例。</p><p id=\"57af09e1964cr\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"688626b195mm9\"><p id=\"ea2f332096612\">单击<b data-tag=\"uicontrol\" class=\"uicontrol\">开始 &gt; 运行</b>，在<b data-tag=\"uicontrol\" class=\"uicontrol\">运行</b>窗口中，输入<code data-tag=\"code\" class=\"code\">secpol.msc</code>命令，单击<b data-tag=\"uicontrol\" class=\"uicontrol\">确定</b>。打开<b data-tag=\"uicontrol\" class=\"uicontrol\">本地安全策略</b>页面。 </p></li><li id=\"4df8175196rfh\"><p id=\"51177fc096kly\">选择<b data-tag=\"uicontrol\" class=\"uicontrol\">本地策略 &gt; 用户权限分配 &gt; 允许通过远程桌面服务登录</b>。</p><p id=\"de7c8410969hl\">确认是否包含如下用户组。</p><ul id=\"f2caba4196y3t\"><li id=\"f2093f0196efx\"><p id=\"f2093f0096b4m\">如果不包含，请继续执行下一步。</p></li><li id=\"f59f0ff196btx\"><p id=\"f59f0ff096ep4\">如果包含，请直接执行<a title=\"\" class=\"xref\" href=\"#57af09e296n9t\">步骤二：排查问题用户的用户组属性</a>。<img placement=\"break\" alt=\"11\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8195293761/p551355.png\" id=\"a2b84ba096wox\" class=\"image break\"></p></li></ul></li><li id=\"79a05cc196pbw\"><p id=\"7a8b31f096sd6\">（可选）如果缺少对应的用户组，请单击<b data-tag=\"uicontrol\" class=\"uicontrol\">添加用户或组</b>进行添加，单击<b data-tag=\"uicontrol\" class=\"uicontrol\">确定</b>完成配置。<img placement=\"break\" alt=\"12\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8195293761/p551356.png\" id=\"cd7bddc096kgc\" class=\"image break\"></p></li></ol></section><section id=\"32e49900960fb\" class=\"section\"><h3 id=\"57af09e296n9t\"><b>步骤二：排查问题用户的用户组属性</b></h3><ol id=\"48d93ff096bdj\"><li id=\"48d93ff196n71\"><p id=\"48d93ff296fhf\">通过VNC连接Windows实例。</p><p id=\"48d93ff396dk2\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"48d93ff49612h\"><p id=\"48d93ff596ajh\">单击<b data-tag=\"uicontrol\" class=\"uicontrol\">开始 &gt; 运行</b>，在<b data-tag=\"uicontrol\" class=\"uicontrol\">运行</b>窗口中，输入<code data-tag=\"code\" class=\"code\">lusrmgr.msc</code>命令，单击<b data-tag=\"uicontrol\" class=\"uicontrol\">确定</b>。打开<b data-tag=\"uicontrol\" class=\"uicontrol\">本地用户和组</b>页面。 </p></li><li id=\"48d93ffb96crs\"><p id=\"db2640b096jps\">单击左侧列表中的<b data-tag=\"uicontrol\" class=\"uicontrol\">用户</b>，切换到用户管理。双击出现访问异常的用户名。</p></li><li id=\"4ef27e40960v5\"><p id=\"4ef2573096tkh\">在弹出的用户属性对话框中，单击<b data-tag=\"uicontrol\" class=\"uicontrol\">隶属于</b>。确保该用户<b data-tag=\"uicontrol\" class=\"uicontrol\">隶属于</b>包含<a title=\"\" class=\"xref\" href=\"#b28dd19195j91\">方案一：排查组策略用户权限分配</a>中已经被赋予远程登录服务器权限的用户组，如下图所示。<img width=\"600\" placement=\"break\" alt=\"13\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8195293761/p551357.png\" id=\"35c5b63096c3z\" class=\"image break\"></p></li><li id=\"9d1fed9196yje\"><p id=\"9d1fed909686v\">（可选）如果缺少对应的用户组，单击<b data-tag=\"uicontrol\" class=\"uicontrol\">添加</b>按钮进行添加，单击<b data-tag=\"uicontrol\" class=\"uicontrol\">确定</b>完成配置。</p></li></ol></section><section id=\"370803f0964cg\" class=\"section\"><h3 id=\"6f16bfa0962pu\"><b>步骤三：排查远程桌面会话主机配置</b></h3><ol id=\"c1f6527196hcz\"><li id=\"c1f6527296ey9\"><p id=\"c1f65273961z7\">通过VNC连接Windows实例。</p><p id=\"c1f6527496kwj\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"c1f6527596dk5\"><p id=\"c1f6527696jp5\">单击<b data-tag=\"uicontrol\" class=\"uicontrol\">开始 &gt; 运行</b>，在<b data-tag=\"uicontrol\" class=\"uicontrol\">运行</b>窗口中，输入<code data-tag=\"code\" class=\"code\">tsconfig.msc</code>命令，单击<b data-tag=\"uicontrol\" class=\"uicontrol\">确定</b>。打开<b data-tag=\"uicontrol\" class=\"uicontrol\">远程桌面会话主机配置</b>页面。 </p></li><li id=\"c1f6798196w3k\"><p id=\"83bbd1f0962vk\">双击默认的远程桌面连接配置<b data-tag=\"uicontrol\" class=\"uicontrol\">RDP-Tcp</b>或其它用户自己新增的连接配置，在弹出的对话框中单击<b data-tag=\"uicontrol\" class=\"uicontrol\">安全</b>选项卡。<img width=\"600\" placement=\"break\" id=\"9b8413b1967od\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4623293761/p518814.png\" class=\"image break\"></p></li><li id=\"a5b57b81967dh\"><p id=\"b7b506c096pp5\">确保组或用户名下，包含<a title=\"\" class=\"xref\" href=\"#b28dd19195j91\">方案一：排查组策略用户权限分配</a>中已经被赋予远程登录服务器权限的用户组或单独的用户名。</p></li><li id=\"eea88fd196zl5\"><p id=\"ec387a30964ds\">（可选）如果缺少对应的用户组或配置，单击<b data-tag=\"uicontrol\" class=\"uicontrol\">添加</b>按钮进行添加，单击<b data-tag=\"uicontrol\" class=\"uicontrol\">确定</b>完成配置。</p></li><li id=\"b94591d1964n9\"><p id=\"bb6e654096luc\">重启ECS实例。具体操作，请参考<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li></ol></section></section></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/linux-the-kernel-prompts-tcp-time-wait-bucket-table-overflow-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>为什么Linux系统的ECS实例中出现大量“TCP: time wait bucket table overflow”错误？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>为什么Linux系统的ECS实例中出现大量“TCP: time wait bucket table overflow”错误？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:31:46</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"dd262610c6wsr\"><p data-tag=\"shortdesc\" id=\"dd2b0816c695e\" class=\"shortdesc\">本文介绍Linux系统的ECS实例的/var/log/messages中，出现大量“TCP: time wait bucket table overflow”错误的原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"175726e0c66dt\" class=\"section\"><h2 id=\"yzSMw\">问题现象</h2><p id=\"04d8f5c0c6jvp\">Linux系统的ECS实例的/var/log/messages中，出现大量“TCP: time wait bucket table overflow”错误。</p></section><section id=\"194e6300c6cjc\" class=\"section\"><h2 id=\"CHQkn\" class=\"p1\">问题原因</h2><p id=\"0db5a301c61ac\">出现该问题的原因是ECS实例中tcp的连接数太多，超出了net.ipv4.tcp_max_tw_buckets内核参数定义的值。</p><ul id=\"aed683c2c6x1a\"><li id=\"aed683c0c61pk\"><p id=\"4885f110c6ltb\">tcp_max_tw_buckets：表示系统同时保持TIME_WAIT状态的Sockets最大数量，如果超过这个数字，TIME_WAIT状态的Socket会被结束并且提示告警信息。</p></li><li id=\"b32a9ba1c6sd6\"><p id=\"b32a9ba0c65xa\">net.ipv4.tcp_max_tw_buckets：设置该参数，是为了抵御简单的DDoS攻击。若非业务需要，请不要降低此限制，如果网络条件需要比默认值高，将net.ipv4.tcp_max_tw_buckets参数的值调高或者增加内存。</p></li></ul></section><section id=\"1246a760c6ow0\" class=\"section\"><h2 id=\"EFTFF\">解决方案</h2><p id=\"dd2b5632c6pgj\">您可以调高net.ipv4.tcp_max_tw_buckets的值以解决此问题。</p><ol id=\"dd2b5633c61hh\"><li id=\"dd2b5634c6iss\"><p id=\"519623b0c6ag9\">远程连接ECS实例。 </p><p id=\"60c5beb0c6pfk\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"7db5aa10c6jvj\"><p id=\"7db58300c646y\">调整<code data-tag=\"codeph\" class=\"codeph\">net.ipv4.tcp_max_tw_buckets</code>参数值。</p><ol id=\"db4cb5b1c6w8a\"><li id=\"cf1bfb71c6kjr\"><p id=\"cf1bfb70c6p65\">执行以下命令，编辑<code data-tag=\"code\" class=\"code\">sysctl.conf</code>文件。 </p><pre data-tag=\"codeblock\" id=\"dd262612c618j\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/sysctl.conf</code></pre></li><li id=\"aae72ef1c6x81\"><p id=\"aae72ef0c60li\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"e0a45ae0c6w8v\"><p id=\"e0a433d0c6ti6\">根据业务需要，将<code data-tag=\"codeph\" class=\"codeph\">net.ipv4.tcp_max_tw_buckets</code>参数的值调高。</p><p id=\"b6d1df80c6r4g\">如下所示，将<code data-tag=\"codeph\" class=\"codeph\">net.ipv4.tcp_max_tw_buckets</code>值设置为20000。</p><pre data-tag=\"codeblock\" id=\"dd262613c6uku\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>net.ipv4.tcp_max_tw_buckets = 20000</code></pre></li><li id=\"dd2b5638c635c\"><p id=\"dd2b5639c6dmx\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存退出。</p></li><li id=\"f0553b31c6ndv\"><p id=\"f0553b30c65m3\">执行以下命令，使配置生效。 </p><pre data-tag=\"codeblock\" id=\"dd262614c6rya\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sysctl -p</code></pre></li></ol></li><li id=\"dd2b7d41c6uuh\"><p id=\"dd2b7d42c6slb\">执行以下命令，可查看不同连接数的状态。 </p><pre data-tag=\"codeblock\" id=\"dd262615c6qs4\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -an | grep 80 | awk '{print $6}' | sort | uniq -c | sort -rn</code></pre></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/ubuntu-instances-of-ecs-perform-an-apt-get-the-update-command-prompt-no-pubkey-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>Ubuntu系统的ECS实例中，执行apt-get update命令时提示“NO_PUBKEY”错误怎么办</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Ubuntu系统的ECS实例中，执行apt-get update命令时提示“NO_PUBKEY”错误怎么办</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:32:09</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"42d4cf7065a5o\"><p data-tag=\"shortdesc\" id=\"42db381165huc\" class=\"shortdesc\">本文介绍在Ubuntu系统的ECS实例中，执行apt-get update命令时提示“NO_PUBKEY”错误时的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"671fb8b0c65jf\" class=\"section\"><h2 id=\"tzCCX\">问题现象</h2><p id=\"42db3812655hk\">在Ubuntu系统的ECS实例中，执行<code data-tag=\"code\" class=\"code\">apt-get update</code>命令提示以下错误。</p><pre id=\"42d4cf7165tq1\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>The following signatures cloudn't be verified because the public key is not available: NO_PUBKEY [$PUBKEY]</code></pre><div type=\"note\" id=\"42db381365qv6\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"ctxze\">[$PUBKEY]指的是您的密钥。</p></div></div></section><section id=\"d0e02b90c6iuo\" class=\"section\"><h2 id=\"682ff030c6gle\"><b>问题原因</b></h2><p id=\"79cb8980c6mj7\">该问题是由apt包系统的安全机制引起的，有时系统无法包含所有的Key（公钥），导致执行<code data-tag=\"code\" class=\"code\">apt-get update</code>命令时，签名无法验证而出现该错误。</p></section><section id=\"cd9e4700c60sb\" class=\"section\"><h2 id=\"CpYJG\">解决方案</h2><ol id=\"5b28fa32c631h\"><li id=\"5b28fa30c6yed\"><p id=\"519623b0c6ag9\">远程连接ECS实例。 </p><p id=\"60c5beb0c6pfk\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"626dc961c6s72\"><p id=\"42db5f2065xr8\">执行如下命令，注册密钥。</p><pre id=\"42d4cf7265n7d\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apt-key adv --recv-keys --keyserver keyserver.ubuntu.com [$PUBKEY]</code></pre></li><li id=\"b30754e1c65e1\"><p id=\"b30754e0c6mpi\">重新执行<code data-tag=\"code\" class=\"code\">apt-get update</code>命令，确保不会再出现该错误。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/debian-8-system-of-ecs-example-execute-apt-get-the-update-command-prompt-404-not-found-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>Debian 8系统的ECS实例中，执行“apt-get update”命令提示“404 Not Found”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Debian 8系统的ECS实例中，执行“apt-get update”命令提示“404 Not Found”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:53:20</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"25d838c0c6k5r\"><p data-tag=\"shortdesc\" id=\"25dcf3b6c6eas\" class=\"shortdesc\">本文介绍Debian 8系统的ECS实例中，执行“apt-get update”命令提示“404 Not Found”错误的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><div type=\"important\" id=\"e4032a20c96b3\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"e66228c0c9z4r\">Debian 8操作系统版本结束了生命周期（EOL），建议您升级到最新的Debian操作系统。更多信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/end-of-support-for-operating-systems\">操作系统停止支持计划</a>。</p></div></div><section id=\"bcaebe60c6tj1\" class=\"section\"><h2 id=\"PxAGY\">问题现象</h2><p id=\"5b151120c6qbr\">在Debian 8系统的ECS实例中，执行“apt-get update”命令提示如下错误信息。</p><pre data-tag=\"codeblock\" id=\"25d838c1c6bel\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Err http：//mirrors.could.aliyuncs.com jessie/updates/main Sources\n404 Not Found\nErr http：//mirrors.could.aliyuncs.com jessie/updates/contrib Sources\n404 Not Found\nErr http：//mirrors.could.aliyuncs.com jessie/updates/non-free Sources\n404 Not Found</code></pre></section><section id=\"65899c70c6d7u\" class=\"section\"><h2 id=\"XKSbH\">问题原因</h2><p id=\"25dd1ac0c6ulr\">ECS实例中<code data-tag=\"codeph\" class=\"codeph\">/etc/apt/sources.list</code>文件中的软件源地址错误或者无效。</p></section><section id=\"b8360cf0c6v3h\" class=\"section\"><h2 id=\"25dd1ac1c64at\">解决方案</h2><ol id=\"a5f92002c6796\"><li id=\"a5f92000c6orb\"><p id=\"519623b0c6ag9\">远程连接ECS实例。 </p><p id=\"a7895cf0c6j3q\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"aaa235b1c6v6l\"><p id=\"aaa235b0c63n2\">执行如下命令，进入/etc/apt目录。</p><pre id=\"c2uago\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cd /etc/apt</code></pre></li><li id=\"3313dde1c6x5t\"><p id=\"3313dde0c6loy\">分别执行如下命令，备份<code data-tag=\"codeph\" class=\"codeph\">sources.list</code>和<code data-tag=\"codeph\" class=\"codeph\">sources.list.d</code>文件。 </p><pre id=\"piauua\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>mv sources.list sources.list.bak\nmv sources.list.d sources.list.d.bak</code></pre></li><li id=\"14a49393c6us2\"><p id=\"a9290330c6jji\">新建一个<code data-tag=\"codeph\" class=\"codeph\">sources.list</code>文件，在文件中添加以下内容。</p><ol id=\"2dab6fd1c6ohw\"><li id=\"2c3634f1c6r1c\"><p id=\"2c3634f0c6mch\">执行如下命令，新建并打开<code data-tag=\"codeph\" class=\"codeph\">sources.list</code>文件。</p><pre id=\"uzozyg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim sources.list</code></pre></li><li id=\"81813a90c67h3\"><p id=\"81811380c6z0k\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式，添加以下内容。</p><pre data-tag=\"codeblock\" id=\"25d838c2c6ofq\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>deb http://mirrors.aliyun.com/debian/ jessie-proposed-updates main non-free contrib\ndeb-src http://mirrors.aliyun.com/debian/ jessie main non-free contrib\ndeb-src http://mirrors.aliyun.com/debian/ jessie-proposed-updates main non-free contrib</code></pre></li><li id=\"9bac2470c6qne\"><p id=\"dd2b5639c6dmx\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存退出。</p></li></ol></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/in-linux-when-accessing-the-or-tmp-directory-the-system-prompts-bash-cd-or-tmp-insufficient-permission", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>Linux实例中访问/tmp目录提示“bash: cd: /tmp: 权限不够“错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux实例中访问/tmp目录提示“bash: cd: /tmp: 权限不够“错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:56:24</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"ba84b520b90oj\"><p data-tag=\"shortdesc\" id=\"ba8b6be5b9nt3\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中，访问<code data-tag=\"code\" class=\"code\">/tmp</code>目录时，提示“bash: cd: /tmp: 权限不够”错误时的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"31144520b9qeb\" class=\"section\"><h2 id=\"XbeWY\" data-spm-anchor-id=\"0.0.0.i4.71caWpVKWpVKhJ\">问题现象</h2><p id=\"ba8b92f0b977h\">在Linux系统的ECS实例中，访问<code data-tag=\"codeph\" class=\"codeph\">/tmp</code>目录时提示以下信息。</p><pre data-tag=\"codeblock\" id=\"ba84b521b9h2s\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>bash: cd: /tmp: Permission denied</code></pre></section><section id=\"32ca0b70b9b35\" class=\"section\"><h2 id=\"tayMx\" data-spm-anchor-id=\"0.0.0.i2.71caWpVKWpVKhJ\">问题原因</h2><p id=\"ba8b92f1b98e3\">ECS实例中<code data-tag=\"codeph\" class=\"codeph\">/tmp</code>目录权限不足，导致无法访问。</p></section><section id=\"ce31c010b3bo9\" class=\"section\"><h2 id=\"50e98810b9uyj\">解决方案</h2><ol id=\"50ab1f81b934w\"><li id=\"500dce10b9u10\"><p id=\"500da700b9icy\">使用root用户远程连接ECS实例。</p><p class=\"itemgroup info\" id=\"info-d6f-lre-3tc\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"5978b190b9wnz\"><p id=\"59788a80b934s\">执行如下命令，查看<code data-tag=\"code\" class=\"code\">/tmp</code>目录权限是否正确。</p><div type=\"note\" id=\"344ee141b98bf\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"344ee140b9709\">默认情况下，<code data-tag=\"code\" class=\"code\">/tmp</code>目录权限为<code data-tag=\"code\" class=\"code\">drwxrwxrwt</code>。</p></div></div><pre id=\"o35lkh\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls -l /</code></pre><p id=\"82819b60b92c8\">如下图所示，<code data-tag=\"code\" class=\"code\">/tmp</code>目录权限为<code data-tag=\"code\" class=\"code\">dr--r--r--</code>（读取权限），需要进行修改。</p><img id=\"5a9e0240b9lja\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0690387761/p576813.png\" alt=\"tmp权限\" placement=\"break\" class=\"image break\"></li><li id=\"70fc4930b944o\"><p id=\"97413100b925m\">执行如下命令，为<code data-tag=\"code\" class=\"code\">/tmp</code>目录授权。</p><pre data-tag=\"codeblock\" id=\"ba84b522b9icc\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>chmod 1777 /tmp</code></pre></li><li id=\"8abbaa90b9jqj\"><p id=\"8abb8380b995j\">重新访问<code data-tag=\"code\" class=\"code\">/tmp</code>目录，确保可以正常访问。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/linux-system-of-ecs-instance-how-to-configure-the-crontab-timing-tasks-and-common-problems", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>Linux系统的ECS实例中，如何配置crontab定时任务及常见问题</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统的ECS实例中，如何配置crontab定时任务及常见问题</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:25:22</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"27ba5520c64mn\"><p data-tag=\"shortdesc\" id=\"27c2b991c6zhv\" class=\"shortdesc\">本文介绍如何在Linux系统的ECS实例中配置crontab定时任务，以及配置定时任务中的常见问题和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"b002b880c684j\" class=\"section\"><h1 id=\"b2c6cc70c6br9\">crontab定时任务</h1><section id=\"b8c4fff0c6rol\" class=\"section\"><h3 data-tag=\"h3\" id=\"27c2e0a1c6nqv\" class=\"h3\"><b>新建定时任务</b></h3><ol id=\"27c2e0a2c655u\"><li id=\"27c2e0a3c6cxx\"><p id=\"27c2e0a4c6sxy\">远程连接ECS实例。</p><p id=\"510bff52c9dm3\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"50a1a4c0c9tom\"><p id=\"50a17db0c9ktp\">执行如下命令，打开crontab定时任务编辑界面。 </p><pre data-tag=\"codeblock\" id=\"27ba5522c6r5c\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>crontab -e</code></pre></li><li id=\"cad2f501c6n8g\"><p id=\"cad2f500c6zb3\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。 </p></li><li id=\"27c2e0a6c69s4\"><p id=\"27c2e0a7c6czl\">添加定时任务，定时任务如下所示。 </p><pre data-tag=\"codeblock\" id=\"27ba5523c6af0\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>5 * * * * /etc/cpu_monitor.sh  #开机后，每5分钟执行一次CPU监控脚本。\n30 21 * * * /usr/local/etc/rc.d/lighttpd restart  #每天的21:30重启Apache。\n45 4 1,10,22 * * /usr/local/etc/rc.d/lighttpd restart  #每月1、10、22日的4:45重启Apache。</code></pre></li><li id=\"f900b431c6gzk\"><p id=\"f900b430c6voz\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存退出。</p></li></ol></section><section id=\"b68aee70c6k3q\" class=\"section\"><h3 data-tag=\"h3\" id=\"27c307b2c6z5y\" class=\"h3\"><b>查看定时任务</b></h3><p id=\"27c307b3c6v6v\">执行<code data-tag=\"codeph\" class=\"codeph\">crontab -l</code>命令，查看已经配置的定时任务。</p><img id=\"c07e0a30c6zx9\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1907929761/p606061.png\" alt=\"CPU监控脚本\" placement=\"break\" class=\"image break\"><p id=\"bf3cd7a0c6xn2\">如果返回<code data-tag=\"code\" class=\"code\">no crontab for username</code>信息，表示没有配置定时任务，</p><div type=\"note\" id=\"e4802df1c6zkl\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"e4802df0c6d16\">username为您当前登录的用户。</p></div></div><img id=\"e1bacc60c6prj\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1907929761/p606062.png\" alt=\"no crontab\" placement=\"break\" class=\"image break\"></section><section id=\"b3b22bf0c6n4k\" class=\"section\"><h2 data-tag=\"h3\" id=\"27c307b5c6lem\" class=\"h3\"><b>删除定时任务</b></h2><ul id=\"27c32ec1c6kn0\"><li id=\"27c32ec2c60oz\"><p id=\"27c32ec3c6w9g\">删除所有定时任务。</p><p id=\"127502d0c6wc8\">执行如下命令，删除所有的定时任务。 </p><pre data-tag=\"codeblock\" id=\"27ba5524c6zyq\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>crontab -r</code></pre></li><li id=\"27c32ec5c6vwc\"><p id=\"27c32ec6c6dtt\">删除具体的定时任务。</p><ol id=\"27804770c6hoj\"><li id=\"27804771c6ojc\"><p id=\"27804772c6oto\">执行如下命令，打开crontab定时任务编辑界面。 </p><pre data-tag=\"codeblock\" id=\"27804773c635u\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>crontab -e</code></pre></li><li id=\"27804774c6c5m\"><p id=\"27804775c6bpc\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。 </p></li><li id=\"2c8b0521c6ydn\"><p id=\"2c8b0520c6uvj\">根据需要，在定时任务前加#号即可注释该定时任务。 </p><pre data-tag=\"codeblock\" id=\"27ba5525c6ok2\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>5 * * * * /etc/cpu_monitor.sh  #开机后，每5分钟执行一次CPU监控脚本。\n#30 21 * * * /usr/local/etc/rc.d/lighttpd restart  #每天的21:30重启Apache。\n#45 4 1,10,22 * * /usr/local/etc/rc.d/lighttpd restart   #每月的1、10、22日的4:45重启Apache。</code></pre></li><li id=\"ab005f40c6g86\"><p id=\"ab94fe20c676y\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>保存退出。</p></li></ol></li></ul></section></section><section id=\"27116390c6vj5\" class=\"section\"><h2 data-tag=\"h3\" id=\"27c355d0c6z2f\" class=\"h3\"><b>常见问题</b></h2><section id=\"2ad5e5a0c6w6k\" class=\"section\"><h3 data-tag=\"h4\" id=\"27c355d1c6xim\" class=\"h4\"><b>非root用户，执行</b><code data-tag=\"codeph\" class=\"codeph\">crontab</code><b>命令时提示“You (*) are not allowed to use this program (crontab)”错误。</b></h3><section id=\"4b523e00c6cpo\" class=\"section\"><h4 data-tag=\"h5\" id=\"27c355d2c6vi2\" class=\"h5\"><b>问题现象</b></h4><p id=\"27c355d3c617x\">使用非root用户执行<code data-tag=\"codeph\" class=\"codeph\">crontab -l</code>或<code data-tag=\"codeph\" class=\"codeph\">crontab -e</code>等命令时，出现如下错误信息。</p><pre data-tag=\"codeblock\" id=\"27ba5526c650x\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>You (****) are not allowed to use this program (crontab)</code></pre></section><section id=\"47986a50c6f2w\" class=\"section\"><h4 data-tag=\"h5\" id=\"27c355d5c6w47\" class=\"h5\"><b>问题原因</b></h4><p id=\"27c355d6c6cmz\">该问题可能是因为crontab任务有权限控制，非root用户默认没有操作crontab的权限。</p><p id=\"15ecb080c603y\"><code data-tag=\"codeph\" class=\"codeph\">cron.allow</code>或<code data-tag=\"codeph\" class=\"codeph\">cron.deny</code>文件用于控制用户对crontab命令的访问。</p><ul id=\"27c37ce0c6imf\"><li id=\"27c37ce1c6kv6\"><p id=\"27c37ce2c62sd\"><code data-tag=\"codeph\" class=\"codeph\">cron.allow</code>文件中的用户可以使用crontab命令。</p></li><li id=\"27c37ce3c6cq1\"><p id=\"27c37ce4c6qyj\"><code data-tag=\"codeph\" class=\"codeph\">cron.deny</code>文件中的用户不能使用crontab命令。</p></li></ul></section><section id=\"4485ac10c6tnm\" class=\"section\"><h4 data-tag=\"h5\" id=\"27c37ce6c62x9\" class=\"h5\"><b>解决方案</b></h4><ol id=\"27c3a3f1c68vm\"><li id=\"27c3a3f2c6mk4\"><p id=\"27c3a3f3c6j3y\">使用root用户远程连接ECS实例。</p><p id=\"c20da180c6gn5\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"d16b58c1c6lh4\"><p id=\"d16b58c0c602p\">分别执行如下命令，查看是否存在<code data-tag=\"codeph\" class=\"codeph\">cron.allow</code>或<code data-tag=\"codeph\" class=\"codeph\">cron.deny</code>文件。</p><pre id=\"wnituc\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>find /etc/cron.allow\nfind /etc/cron.deny</code></pre><p id=\"be743c30c68wr\"><code data-tag=\"codeph\" class=\"codeph\">cron.allow</code>或<code data-tag=\"codeph\" class=\"codeph\">cron.deny</code>文件是否存在与是否可以使用crontab命令的用户关系说明如下。</p><table id=\"b3dbf1b0c6xmf\" tablewidth=\"709\" tablecolswidth=\"149 139 421\" class=\"table\"><colgroup colwidth=\"0.63*\" style=\"width:21.02%\"></colgroup><colgroup colwidth=\"0.59*\" style=\"width:19.61%\"></colgroup><colgroup colwidth=\"1.78*\" style=\"width:59.38%\"></colgroup><tbody class=\"tbody\"><tr id=\"b3dbf1b7c6zc7\"><td id=\"b3dbf1b2c66g0\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"b3dbf1b1c6syp\"><b>cron.allow文件是否存在</b></p></td><td id=\"b3dbf1b4c62s6\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p data-track=\"19\" id=\"cbef1f20c631w\"><b>cron.deny文件是否存在</b></p></td><td id=\"b3dbf1b6c60no\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p data-track=\"20\" id=\"e369b612c6o5m\"><b>有权限使用crontab的用户范围</b></p></td></tr><tr id=\"b3dc18c5c6ao1\"><td id=\"b3dc18c0c6gbv\" rowspan=\"1\" colspan=\"1\"><p id=\"b3dbf1b8c66ho\">不存在</p></td><td id=\"b3dc18c2c6ynh\" rowspan=\"1\" colspan=\"1\"><p data-track=\"23\" id=\"01214920c63w6\">不存在</p></td><td id=\"b3dc18c4c6n71\" rowspan=\"1\" colspan=\"1\"><p data-track=\"24\" id=\"f0fdd0e0c64g9\">仅root用户可使用crontab命令。</p></td></tr><tr id=\"b3dc3fd3c6dbc\"><td id=\"b3dc18c7c6cld\" rowspan=\"1\" colspan=\"1\"><p id=\"fa792f20c6anm\">存在</p></td><td id=\"b3dc3fd0c6uam\" rowspan=\"1\" colspan=\"1\"><p data-track=\"23\" id=\"0038e4f0c6dtg\">不存在</p></td><td id=\"b3dc3fd2c64ec\" rowspan=\"1\" colspan=\"1\"><p data-track=\"28\" id=\"067f08d0c6vup\">仅cron.allow文件中的用户可使用crontab命令。</p></td></tr><tr id=\"b3dc3fdac6cbc\"><td id=\"b3dc3fd5c6u4p\" rowspan=\"1\" colspan=\"1\"><p data-track=\"30\" id=\"0a3cd420c6jfo\">不存在</p></td><td id=\"b3dc3fd7c6psx\" rowspan=\"1\" colspan=\"1\"><p data-track=\"31\" id=\"0c81bb10c6vn7\">存在</p></td><td id=\"b3dc3fd9c62li\" rowspan=\"1\" colspan=\"1\"><p id=\"0f069130c6qdu\">不在cron.deny文件中的用户都可以使用crontab命令。</p><div type=\"note\" id=\"6dffc4e1c63i7\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"7050b9c0c6cvh\">若cron.deny文件内容为空，则所有用户都可以使用crontab令。</p></div></div></td></tr><tr id=\"b3dc66e1c6uoe\"><td id=\"b3dc3fdcc6vut\" rowspan=\"1\" colspan=\"1\"><p id=\"b3dc3fdbc62wb\">存在</p></td><td id=\"b3dc3fdec6at4\" rowspan=\"1\" colspan=\"1\"><p id=\"b3dc3fddc68xk\">存在</p></td><td id=\"b3dc66e0c6f9z\" rowspan=\"1\" colspan=\"1\"><p data-track=\"36\" id=\"1affc0b0c63fy\">仅cron.allow文件中的用户可以使用crontab命令。</p><div type=\"note\" id=\"9a45d850c6j14\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"9cdcd6e0c6kvt\">cron.allow优先级高于cron.deny，此时cron.deny不起作用。</p></div></div></td></tr></tbody></table></li><li id=\"a7bc0050c6i5c\"><p id=\"a7bbd940c6jso\">根据需要，编辑<code data-tag=\"codeph\" class=\"codeph\">cron.allow</code>或<code data-tag=\"codeph\" class=\"codeph\">cron.deny</code>文件。</p><ul id=\"fe0f0aa1c67nc\"><li id=\"fde03271c65n0\"><p id=\"e4a3ee50c6g5x\">如果不存在<code data-tag=\"codeph\" class=\"codeph\">cron.allow</code>文件，若<code data-tag=\"codeph\" class=\"codeph\">cron.deny</code>文件中存在非root用户的用户名，请删除该用户的用户名后，保存<code data-tag=\"codeph\" class=\"codeph\">cron.deny</code>。</p></li><li id=\"274b3970c60pq\"><p id=\"2cfc2230c62o5\">如果存在<code data-tag=\"codeph\" class=\"codeph\">cron.allow</code>文件，将该非root用户添加到<code data-tag=\"codeph\" class=\"codeph\">cron.allow</code>文件中，保存<code data-tag=\"codeph\" class=\"codeph\">cron.allow</code>。</p></li></ul></li><li id=\"27c3a3f4c6yjm\"><p id=\"27c3a3f5c67l4\">执行如下命令，重启cron服务 。</p><pre data-tag=\"codeblock\" id=\"27ba5527c6mwu\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl restart crond.service</code></pre></li><li id=\"27c3cb00c6fe1\"><p id=\"27c3cb01c65gi\">切换到该非root用户，重新执行<code data-tag=\"codeph\" class=\"codeph\">crontab</code>命令，确保可以正常执行。</p></li></ol></section></section><section id=\"2db49b90c623w\" class=\"section\"><h3 data-tag=\"h4\" id=\"27c3cb05c6p3m\" class=\"h4\"><b>使用</b>crontab -e<b>创建定时任务失败，提示“command not found”错误。</b></h3><section id=\"35041920c6lea\" class=\"section\"><h4 data-tag=\"h5\" id=\"27c3cb06c6o5g\" class=\"h5\"><b>问题现象</b></h4><p id=\"27c3cb07c6wwo\">使用Linux系统的ECS实例中，执行<code data-tag=\"code\" class=\"code\">crontab -e</code>创建定时任务时执行失败，提示“command not found”错误。</p><p id=\"ff393d50c6fay\">执行cd /etc/crontab进入主目录，提示“No such file or directory”错误。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1907929761/p519260.png\" class=\"image break\"></section><section id=\"394da9b0c6y4n\" class=\"section\"><h4 data-tag=\"h5\" id=\"27c3f210c6t28\" class=\"h5\"><b>问题原因</b></h4><p id=\"27c3f211c60aw\">该问题是因为crontab应用包未安装，或安装后程序文件损坏导致。</p></section><section id=\"3bae7d10c62fg\" class=\"section\"><h4 data-tag=\"h5\" id=\"27c3f213c68lx\" class=\"h5\"><b>解决方案</b></h4><ol id=\"27c3f214c6h18\"><li id=\"27c3f215c6vfh\"><p id=\"519623b0c6ag9\">远程连接ECS实例。</p><p id=\"407b0502c6bl9\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"3b83a841c60z7\"><p id=\"3b83a840c60o1\">执行如下命令，安装crontabs依赖包和crontabs包。 </p><pre data-tag=\"codeblock\" id=\"27ba5528c6dep\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>yum install vixie-cron\nyum install crontabs</code></pre></li><li id=\"27c41924c6ml1\"><p id=\"27c41925c68qr\">再次执行<code data-tag=\"codeph\" class=\"codeph\">crontab -e</code>命令，确认可以正常编辑新的计划任务。</p></li></ol></section></section></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/in-linux-instance-apache-ab-pressure-test-the-prompt-apr-pollset-poll-the-timeout-specified-has-expired-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>在Linux实例的Apache中进行ab压力测试时，提示“apr_pollset_poll: The timeout specified has expired”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在Linux实例的Apache中进行ab压力测试时，提示“apr_pollset_poll: The timeout specified has expired”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:30:50</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"6bded910b5s00\"><p data-tag=\"shortdesc\" id=\"6beb3521b5jxp\" class=\"shortdesc\">在Linux实例的Apache中进行ab压力测试时，提示“apr_pollset_poll: The timeout specified has expired”错误时的问题原因、解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"01e426e0b56gl\" class=\"section\"><h2 id=\"h1--strong-strong-1\" data-spm-anchor-id=\"a2c9r.12641779.0.i0.51bbufbKufbKdH\">问题描述</h2><p id=\"6beb3522b5sy4\">在Linux实例的Apache中进行ab压力测试时（如：<code data-tag=\"code\" class=\"code\">ab -c 10 -n 5000 http://192.168.XXX.XXX/</code>）提示以下报错。</p><pre data-tag=\"codeblock\" id=\"6bdf0020b5fy1\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>apr_pollset_poll: The timeout specified has expired</code></pre></section><section id=\"03824680b5kp8\" class=\"section\"><h2 id=\"h1-u539Fu56E0u5206u67902\" data-spm-anchor-id=\"a2c9r.12641779.0.i2.51bbufbKufbKdH\">问题原因</h2><p id=\"6beb5c30b50er\">由于压测的并发请求超出ECS实例的最大连接条目，在没有执行完就报错。</p></section><section id=\"2d3a6da0a6yp3\" class=\"section\"><h2 id=\"93e578a0b5akp\" data-spm-anchor-id=\"a2c9r.12641779.0.i3.51bbufbKufbKdH\">解决方案</h2><p id=\"91a63b31b5byw\">您可以登录实例，修改<code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">/etc/sysctl.conf</span></code>文件内容并<span style=\"color:rgb(24, 24, 24)\">在ab测试命令中加</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">-k</span></code><span style=\"color:rgb(24, 24, 24)\">参数</span>以解决此问题。</p><ol id=\"1230cb40a63pg\"><li id=\"918827b1b5tz9\"><p id=\"918827b0b576l\"><span style=\"color:rgb(24, 24, 24)\">远程连接ECS实例。</span></p><p id=\"ec3c24b0b3t1x\"><span style=\"color:rgb(24, 24, 24)\">具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a><span style=\"color:rgb(24, 24, 24)\">。</span></p></li><li id=\"9b686240b59ld\"><p id=\"9b683b30b5uw1\"><span style=\"color:rgb(24, 24, 24)\">修改内核参数文件。</span></p><ol id=\"cd925551b592w\"><li id=\"cd5ec231b5vb5\"><p id=\"cd5ec230b5vmf\"><span style=\"color:rgb(24, 24, 24)\">执行如下命令，打开内核参数文件（</span><code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code><span style=\"color:rgb(24, 24, 24)\">）。</span></p><pre id=\"ns9vfd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim etc/sysctl.conf</code></pre></li><li id=\"d8750bc1b5yem\"><p id=\"d8750bc0b5bkh\"><span style=\"color:rgb(24, 24, 24)\">在内核参数文件中，添加如下内容。</span></p><pre data-tag=\"codeblock\" id=\"6bdf0021b5yy2\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>net.ipv4.netfilter.ip_conntrack_max = 3276800\nnet.ipv4.tcp_tw_recycle = 0\nnet.ipv4.tcp_tw_reuse = 0\nnet.ipv4.tcp_orphan_retries = 1\nnet.ipv4.tcp_fin_timeout = 25\nnet.ipv4.tcp_max_orphans = 8192\nnet.ipv4.ip_local_port_range = 32768    61000</code></pre></li><li id=\"e7eab7d0b5g0h\"><p id=\"e7ea90c0b5680\"><span style=\"color:rgb(24, 24, 24)\">按</span><span style=\"color:rgb(24, 24, 24)\"><b>Esc</b></span><span style=\"color:rgb(24, 24, 24)\">键、输入</span><span style=\"color:rgb(24, 24, 24)\"><b>:wq!</b></span><span style=\"color:rgb(24, 24, 24)\">并按</span><span style=\"color:rgb(24, 24, 24)\"><b>Enter</b></span><span style=\"color:rgb(24, 24, 24)\">键。</span></p></li></ol></li><li id=\"c8782e51b5pwr\"><p id=\"252ca220b5ttu\"><span style=\"color:rgb(24, 24, 24)\">执行如下命令，使配置生效。</span></p><pre data-tag=\"codeblock\" id=\"6bdf0022b59wj\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sysctl -p /etc/sysctl.conf</code></pre></li><li id=\"36201490b5m6s\"><p id=\"361fed80b5idv\"><span style=\"color:rgb(24, 24, 24)\">在ab测试命令中加</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">-k</span></code><span style=\"color:rgb(24, 24, 24)\">参数，并重新执行该命令，确认不会再出现该问题。</span></p><p id=\"485fbb00b6psj\"><span style=\"color:rgb(0, 0, 0);background-color:rgb(254, 254, 242)\">如以下示例，在</span><code data-tag=\"code\" class=\"code\">ab -c 10 -n 5000 http://192.168.XXX.XXX/</code>命令中添加<code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">-k</span></code><span style=\"color:rgb(24, 24, 24)\">参数。</span></p><pre id=\"yhh7ue\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ab -c 10 -n 5000 -k http://192.168.XXX.XXX/</code></pre></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/when-you-run-the-ethtool-command-the-system-prompts-cannot-get-device-ring-settings-operation-not-supported", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>在CentOS 6.5系统的ECS实例中，执行ethtool -g eth0命令，提示“Cannot get device ring settings: Operation not supported”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在CentOS 6.5系统的ECS实例中，执行ethtool -g eth0命令，提示“Cannot get device ring settings: Operation not supported”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-28 10:51:56</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"df705d90b575n\"><p data-tag=\"shortdesc\" id=\"df79d374b53vk\" class=\"shortdesc\">本文介绍在CentOS 6.5系统的ECS实例中，执行<code data-tag=\"codeph\" class=\"codeph\">ethtool -g eth0</code>命令，提示“Cannot get device ring settings: Operation not supported”错误的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"99cb4650b5lvf\" class=\"section\"><h2 id=\"iAj6g\">问题现象</h2><p id=\"df79fa80b5rkw\">在CentOS 6.5系统的ECS实例中，执行<code data-tag=\"codeph\" class=\"codeph\">ethtool -g eth0</code>命令，查看网卡的Buffer容量，出现以下信息。</p><pre data-tag=\"codeblock\" id=\"df705d91b5h92\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Ring parameters for eth0:\nCannot get device ring settings: Operation not supported</code></pre><img id=\"680df7c0b5yzg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2403647761/p573468.png\" alt=\"2023-02-26_17-00-57\" placement=\"break\" class=\"image break\"></section><section id=\"a40efda0b5pq4\" class=\"section\"><h2 id=\"df79fa81b56f8\">问题原因</h2><p id=\"df79fa82b5tlc\">该系统的ECS实例不支持使用<code data-tag=\"codeph\" class=\"codeph\">-g</code>参数的查询<span style=\"color:rgb(51, 51, 51)\">环形参数（ringbuffer）</span>。</p></section><section id=\"f59cad20b5alo\" class=\"section\"><h2 id=\"AywdZ\">解决方案</h2><p id=\"df7a6fb2b5jxd\">如果您需要查看网卡Buffer容量，可以通过<code data-tag=\"codeph\" class=\"codeph\">ifconfig</code>命令中的txqueuelen参数进行查看。</p><div type=\"note\" id=\"9294b281b5tcj\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"933cb250b5sph\"><span style=\"color:rgb(24, 24, 24);background-color:rgb(220, 238, 255)\">Ce</span><span style=\"color:rgb(24, 24, 24);background-color:rgb(220, 238, 255)\">ntOS 6操作系统</span><span style=\"color:rgb(24, 24, 24);background-color:rgb(220, 238, 255)\">版本结束了生命周期（EOL），按照社区规则，CentOS 6的源地址内容已移除。当您在CentOS 6系统内继续使用默认配置的源地址时会发生报错。建议您先切换CentOS 6的源地址，然后再进行操作。具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-the-centos-6-source-address\">CentOS 6 EOL如何切换源？</a><span style=\"color:rgb(24, 24, 24);background-color:rgb(220, 238, 255)\">。</span></p></div></div><img id=\"4dd77fb0b585p\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2403647761/p573469.png\" alt=\"2023-02-26_17-09-05\" placement=\"break\" class=\"image break\"></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/linux-instance-that-executes-the-crontab-e-command-prompt-errors-in-crontab-file-can-t-install-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>Linux实例中执行“crontab -e”命令时提示“errors in crontab file, can't install”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux实例中执行“crontab -e”命令时提示“errors in crontab file, can't install”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:31:57</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"77796440b51mb\"><p data-tag=\"shortdesc\" id=\"7786aab1b52yc\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中执行<code data-tag=\"code\" class=\"code\">crontab -e</code>命令时，提示“errors in crontab file, can't install”错误时的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"5111ca80b5283\" class=\"section\"><h2 id=\"XbeWY\" data-spm-anchor-id=\"a2c9r.14518950.0.i10.6fc414376iZYwJ\">问题描述</h2><p id=\"7786aab2b52xj\">在Linux系统的ECS实例中执行<code data-tag=\"codeph\" class=\"codeph\">crontab -e</code>命令创建周期性任务时提示以下报错信息。</p><pre data-tag=\"codeblock\" id=\"77796441b5idg\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>errors in crontab file, can't install</code></pre><img id=\"4e724070b5wqu\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6932647761/p573467.png\" alt=\"2023-02-26_16-47-41\" placement=\"break\" class=\"image break\"></section><section id=\"5305f960b5sf3\" class=\"section\"><h2 id=\"tayMx\">问题原因</h2><p id=\"f8a4ddb1b5taw\">该问题可能有以下原因：</p><ul id=\"7786d1c0b5yvc\"><li id=\"7786d1c1b5bb0\"><p id=\"c54b7910b59oo\"><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">crontab</span></code>文件格式错误导致执行周期性任务报错。</p></li><li id=\"c46278a1b5ytx\"><p id=\"c46278a0b507l\">磁盘空间满，导致<code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">crontab</span></code>文件无法写入而报错。</p></li></ul></section><section id=\"ce31c010b3bo9\" class=\"section\"><h2 id=\"5a8c8c80b5rno\">解决方案</h2><p id=\"91a63b31b5byw\">您可以登录实例，修改<code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">crontab</span></code>文件格式或扩容云盘以解决此问题。</p><ol class=\"ol steps\" id=\"steps-3w7-af7-yk1\"><li id=\"58b9a141b5i4k\"><p id=\"58b9a140b58lj\"><span style=\"color:rgb(24, 24, 24)\">远程连接ECS实例。</span></p><p class=\"itemgroup info\" id=\"info-d6f-lre-3tc\"><span style=\"color:rgb(24, 24, 24)\">具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a><span style=\"color:rgb(24, 24, 24)\">。</span></p></li><li class=\"li step stepexpand\" id=\"step-2qr-5f1-cb8\"><p id=\"cf971fa0b57fc\">检查<code data-tag=\"codeph\" class=\"codeph\">crontab</code>文件中定时任务格式是否正确。</p><ul id=\"da47a281b5eek\"><li id=\"d9f89821b5xst\"><p id=\"d9f89820b54x0\">若格式正确，请继续执行步骤<a title=\"\" class=\"xref\" href=\"#cb3ec201b5app\">3</a>。</p></li><li id=\"f74841a1b5zjr\"><p id=\"f74841a0b5avi\">若格式不正确，请及时更正，具体格式如下。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6932647761/p519687.png\" width=\"412\" height=\"253\" class=\"image break\"><p id=\"02fa07e0b5b0n\"></p></li></ul></li><li id=\"cb3ec201b5app\"><p id=\"cb3ec200b54xc\"><span style=\"color:rgb(24, 24, 24)\">执行以下命令，查看磁盘使用率。</span></p><pre id=\"67yqgu\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>df -h</code></pre><p id=\"799075b0b50au\"><span style=\"color:rgb(24, 24, 24)\">系统显示类似如下信息。例如，Use%为分区/dev/xvda1的</span><span style=\"color:rgb(24, 24, 24)\">使用率。</span></p><p id=\"843dc440b5dyk\"><span style=\"color:rgb(24, 24, 24)\">若磁盘使用率接近100%，说明磁盘空间不足，建议您扩容云盘后再进行操作。具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-19\">云盘扩容指引</a><span style=\"color:rgb(24, 24, 24)\">。</span></p><img id=\"f36cd900b5fiq\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6932647761/p573466.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/how-do-i-fix-the-su-faild-to-execute-or-bin-or-bash-permission-denied-error-when-i-switch-users-by-running-the-su-command", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>Linux实例使用su命令切换用户时，提示“su: failed to execute /bin/bash: Permission denied”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux实例使用su命令切换用户时，提示“su: failed to execute /bin/bash: Permission denied”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:30:39</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"e60257e0aeuoy\"><p data-tag=\"shortdesc\" id=\"e608c084ae467\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中，使用su命令切换用户失败，提示“su: failed to execute /bin/bash: Permission denied”错误时的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"43225ec0aeuog\" class=\"section\"><h2 id=\"e608c085ae2ht\">问题现象</h2><p id=\"e608c086aeyjc\">在Linux系统的ECS实例中，使用<code data-tag=\"code\" class=\"code\">su</code>命令切换用户时，提示以下错误。</p><pre data-tag=\"codeblock\" id=\"e60257e1ae7xg\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>su: faild to execute /bin/bash: Permission denied</code></pre></section><section id=\"4d2a93b0aeugx\" class=\"section\"><h2 id=\"48150090ae0wr\">问题原因</h2><p id=\"48eb6360aeozz\">该问题可能是因为ECS实例操作系统内部根目录<code data-tag=\"code\" class=\"code\">/</code>或<code data-tag=\"code\" class=\"code\">/bin/bash</code>文件权限错误，导致使用<code data-tag=\"code\" class=\"code\">su</code>命令切换用户报错。</p></section><section id=\"ce31c010b3bo9\" class=\"section\"><h2 id=\"f591bf90b3op1\">解决方案</h2><p id=\"f53e2150b31to\"><span style=\"color:rgb(24, 24, 24)\">您可以参考以下步骤，根据实际需要修改根目录</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">/</span></code><span style=\"color:rgb(24, 24, 24)\">或</span><code data-tag=\"code\" class=\"code ph codeph\" id=\"codeph-zir-yrk-zh1\"><span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">/bin/bash</span></code><span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">文件</span>的<span style=\"color:rgb(24, 24, 24)\">权限，来解决使用</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">su</span></code><span style=\"color:rgb(24, 24, 24)\">命令切换用户报错问题。</span></p><ol class=\"ol steps\" id=\"steps-3w7-af7-yk1\"><li class=\"li step stepexpand\" id=\"step-q54-86m-dy4\"><p id=\"a52e90b1b3w3h\"><span style=\"color:rgb(24, 24, 24)\">使用root用户远程连接ECS实例。</span></p><p class=\"itemgroup info\" id=\"info-d6f-lre-3tc\"><span style=\"color:rgb(24, 24, 24)\">具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a><span style=\"color:rgb(24, 24, 24)\">。</span></p></li><li class=\"li step stepexpand\" id=\"step-2qr-5f1-cb8\"><p id=\"db411ea0b8x9c\">执行如下命令，查看<code data-tag=\"code\" class=\"code ph codeph\" id=\"c9516030b3dp2\">/bin/bash</code>文件的隐藏属性。</p><pre id=\"3ef4e572b8kg6\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>lsattr /bin/bash</code></pre><ul id=\"3ef4e573b8t3d\"><li id=\"3ef4e574b8afe\"><p id=\"47148440b8qim\">若<code data-tag=\"code\" class=\"code ph codeph\" id=\"f7346800b9g2d\">/bin/bash</code>文件被配置了<code data-tag=\"code\" class=\"code\">i</code>属性（不能删除数据）或<code data-tag=\"code\" class=\"code\">a</code>属性（不能修改数据），如下图所示，存在<code data-tag=\"code\" class=\"code\">i</code>属性，请执行<code data-tag=\"code\" class=\"code\">chattr -i /bin/bash</code>移除<code data-tag=\"code\" class=\"code\">i</code>属性。</p><img id=\"c6db4820b8w8r\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4835287761/p575866.png\" alt=\"lsattr\" placement=\"break\" class=\"image break\"></li><li id=\"3ef4e576b84h2\"><p id=\"6997a920b8wqk\">若<code data-tag=\"code\" class=\"code ph codeph\" id=\"f7346801b9377\">/bin/bash</code>文件没有<code data-tag=\"code\" class=\"code\">i</code>、<code data-tag=\"code\" class=\"code\">a</code>属性，请继续执行下一步。</p></li></ul></li><li id=\"3e8b4e31b8p7k\"><p id=\"3e8b4e30b8p6m\">执行如下命令，查看<code data-tag=\"code\" class=\"code ph codeph\" id=\"f7346802b9a9m\">/bin/bash</code>文件权限是否正确。</p><pre data-tag=\"codeblock\" id=\"2f617112b36ia\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ls -l /bin/bash</code></pre><ul id=\"11510f60b8i5h\"><li id=\"11510f61b8h1z\"><p id=\"11510f62b8360\">若<code data-tag=\"code\" class=\"code ph codeph\" id=\"7605b0e0b9vo3\">/bin/bash</code>文件没有读取和执行权限（555），如下图所示，<code data-tag=\"code\" class=\"code ph codeph\" id=\"7605b0e1b9deh\">/bin/bash</code>文件只有读权限（444），请执行<code data-tag=\"code\" class=\"code\">chmod a+rx /bin/bash</code>为<code data-tag=\"code\" class=\"code ph codeph\" id=\"f7346803b9mgp\">/bin/bash</code>文件添加读取和执行权限。</p><img id=\"3d0aa490b93ki\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4835287761/p576745.png\" alt=\"查看bash权限\" placement=\"break\" class=\"image break\"></li><li id=\"fefc5f43b8s4y\"><p id=\"f298c440b8er9\">若<code data-tag=\"code\" class=\"code ph codeph\" id=\"7605b0e2b9e8b\">/bin/bash</code>文件存在读取和执行权限（555），请继续执行下一步。</p></li></ul></li><li id=\"0bb29d30b8tjo\"><p id=\"b3ca4ca0b9wob\">执行如下命令，查看根目录<code data-tag=\"code\" class=\"code ph codeph\" id=\"7605b0e3b9n75\">/</code>权限是否正确。</p><pre id=\"9g9fvx\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>stat /</code></pre><ul id=\"e54fe961b9syq\"><li id=\"e6637c41b9s0f\"><p id=\"e6637c42b9cil\">若根目录<code data-tag=\"code\" class=\"code ph codeph\" id=\"7605b0e4b9hw8\">/</code>没有读取和执行权限（555），如下图所示，根目录<code data-tag=\"code\" class=\"code ph codeph\" id=\"7605b0e5b9ri7\">/</code>只有读权限（444），请执行<code data-tag=\"code\" class=\"code\">chmod 555 /</code>为根目录<code data-tag=\"code\" class=\"code ph codeph\" id=\"7605b0e6b9tql\">/</code>添加读取和执行权限。</p><img id=\"a24f6870b9np3\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4835287761/p576750.png\" alt=\"查看根目录权限\" placement=\"break\" class=\"image break\"></li><li id=\"fb42f5f1b9f36\"><p id=\"fb743f20b9nf4\">若根目录<code data-tag=\"code\" class=\"code ph codeph\" id=\"7605b0e7b98ix\">/</code>存在读取和执行权限（555），请继续执行下一步。</p></li></ul></li><li id=\"1b58f631b8rp4\"><p id=\"1b58f630b8a28\">重新执行<code data-tag=\"code\" class=\"code\">su</code>命令切换用户，确保可以正常执行。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/the-yum-command-fails-with-the-http-error-404-not-found-trying-other-mirror-prompt", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>在Linux实例中执行yum命令失败，提示“HTTP Error 404 -Not Found Trying other mirror”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在Linux实例中执行yum命令失败，提示“HTTP Error 404 -Not Found Trying other mirror”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:32:31</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"12272e50a61d5\"><p data-tag=\"shortdesc\" id=\"12305615a6tb1\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中执行yum命令失败，提示“HTTP Error 404 -Not Found Trying other mirror”错误时的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"40128e10aew40\" class=\"section\"><h2 id=\"XbeWY\">问题描述</h2><p id=\"12305619a6uja\">在Linux系统的ECS实例中执行yum命令（如<code data-tag=\"code\" class=\"code\">yum -y install XXX</code>、<code data-tag=\"code\" class=\"code\">yum list</code>、<code data-tag=\"code\" class=\"code\">yum search XXX</code>等）失败，出现类似如下错误信息。</p><pre data-tag=\"codeblock\" id=\"12272e51a6elt\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>http://mirrors.cloud.aliyuncs.com/centos/7/os/x86_64/repodata/repomd.xml: [Errno 14] HTTP Error 404 - Not Found\nTrying other mirror.</code></pre><pre data-tag=\"codeblock\" id=\"12272e52a6ljc\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>http://mirrors.cloud.aliyuncs.com/centos/$releasever/os/x86_64/repodata/repomd.xml: [Errno 14] HTTP Error 404 - Not Found\nTrying other mirror.</code></pre></section><section id=\"42d22340aeart\" class=\"section\"><h2 id=\"tayMx\">问题原因</h2><p id=\"5d9c0eb1a66tz\">出现该问题可能有以下原因：</p><ul id=\"12307d21a6s24\"><li id=\"12307d22a6jy7\"><p id=\"4ef6c010a60mh\">CentOS 6/8的源地址内容已移除：CentOS 6与CentOS 8操作系统结束了生命周期（EOL），源地址内容已移除。您可以参考<a title=\"\" class=\"xref\" href=\"#2a181f00a6ff8\">切换CentOS 6/8的源地址</a>修复该问题。</p></li><li id=\"12307d24a6gqg\"><p id=\"12307d25a6qh7\">YUM仓库（<span style=\"color:rgb(77, 77, 77)\">reposito</span><span style=\"color:rgb(77, 77, 77)\">ry</span>）配置问题，导致无法正常解析，您可以参考<a title=\"\" class=\"xref\" href=\"#2d3a6da0a6yp3\">将CentOS默认Base源更换为阿里Base源</a>修复该问题。</p></li><li id=\"12307d26a68ne\"><p id=\"12307d27a69cj\">环境变量<code data-tag=\"code\" class=\"code\">/etc/profile</code>文件中配置了HTTP代理，导致无法正常解析，您可以参考<a title=\"\" class=\"xref\" href=\"#305987f0a692o\">修改环境变量配置文件/etc/profile</a>修复该问题。</p></li><li id=\"12307d28a6ayf\"><p id=\"12307d29a6nb8\">缺少centos-release软件包，导致<span style=\"color:rgb(24, 24, 24)\">URL中</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">$releasever</span></code><span style=\"color:rgb(24, 24, 24)\">变量</span>无法正常解析，您可以参考<a title=\"\" class=\"xref\" href=\"#32cad610a6pz0\">安装centos-release软件包</a>修复该问题。</p></li></ul></section><section id=\"160f8940b3t2l\" class=\"section\"><h2 id=\"EFTFF\">解决方案</h2><section id=\"2a181f00a6ff8\" class=\"section\"><h3 data-tag=\"h3\" id=\"1230a430a6rg8\" class=\"h3\">切换CentOS 6/8的源地址</h3><p id=\"1230a431a6p24\">CentOS 6与CentOS 8操作系统版本结束了生命周期（EOL），Linux社区已不再维护该操作系统版本。按照社区规则，CentOS 6/8的源地址内容已移除。当您在CentOS 6/8系统内继续使用默认配置的源地址时会发生报错。建议您先切换CentOS 6/8的源地址，然后再进行操作。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-the-centos-6-source-address\">CentOS 6 EOL如何切换源？</a>和<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/change-centos-8-repository-addresses\">CentOS 8 EOL如何切换源？</a>。</p></section><section id=\"2d3a6da0a6yp3\" class=\"section\"><h3 data-tag=\"h3\" id=\"1230a432a6aqp\" class=\"h3\"><b>将CentOS默认</b>Base源更换<b>为阿里Base源</b></h3><p id=\"1230a433a6imt\">本节以CentOS 7.4系统版本的Base源为例进行介绍，其他系统及版本请参见<a class=\"\" target=\"_blank\" href=\"https://developer.aliyun.com/mirror\">阿里云官方镜像站</a>。</p><ol id=\"1230cb40a63pg\"><li id=\"1230cb41a6iny\"><p id=\"a52e90b1b3w3h\"><span style=\"color:rgb(24, 24, 24)\">远程连接ECS实例。</span></p><p id=\"ec3c24b0b3t1x\"><span style=\"color:rgb(24, 24, 24)\">具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a><span style=\"color:rgb(24, 24, 24)\">。</span></p></li><li id=\"e3f91f60b3toz\"><p id=\"e3f8f850b3dmo\">执行以下命令，备份异常的Base源文件。 </p><pre data-tag=\"codeblock\" id=\"12272e53a6oxo\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</code></pre></li><li id=\"1230cb44a6awl\"><p id=\"1230cb45a68o5\">执行以下命令，下载并安装Base源。 \n</p><pre data-tag=\"codeblock\" id=\"12272e54a6bra\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo</code></pre></li><li id=\"1230cb4aa621q\"><p id=\"1230cb4ba65n9\">重新执行<code data-tag=\"code\" class=\"code\">yum</code>相关命令，确保可以正常使用。</p></li></ol></section><section id=\"305987f0a692o\" class=\"section\"><h3 id=\"f1311e30b3g4u\"><b>修改环境变量配置文件</b><code data-tag=\"code\" class=\"code\"><b>/etc/profile</b></code></h3><ol id=\"1230f251a6ezc\"><li id=\"1230f252a6se2\"><p id=\"0154d6d1b3cf1\"><span style=\"color:rgb(24, 24, 24)\">远程连接ECS实例。</span></p><p id=\"1230f253a65wn\"><span style=\"color:rgb(24, 24, 24)\">具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a><span style=\"color:rgb(24, 24, 24)\">。</span></p></li><li id=\"0269a230b3nnl\"><p id=\"02697b20b3wy5\">依次执行如下命令，确认能ping通，且80端口也能通。 </p><ul id=\"6f36b8d1b3cye\"><li id=\"6f23f420b3a86\"><p id=\"6f23cd10b3801\">若不能连通，说明可能是网络问题，请排查网络后重试。</p></li><li id=\"8ba2e020b3v21\"><p id=\"8ba2b910b3xoi\">若可以正常ping通，请继续执行步骤。</p><pre data-tag=\"codeblock\" id=\"12272e55a6ycx\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ping mirrors.cloud.aliyuncs.com\ntelnet mirrors.cloud.aliyuncs.com 80</code></pre></li></ul></li><li id=\"1230f255a6stn\"><p id=\"1230f256a6tdp\">执行以下命令，查看YUM仓库能否正常访问。 </p><pre data-tag=\"codeblock\" id=\"12272e56a6b2a\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>curl http://mirrors.cloud.aliyuncs.com/centos/7/os/x86_64/repodata/repomd.xml -v</code></pre><p id=\"1230f257a6qj1\">系统显示类似如下，返回404状态码，且配置了HTTP代理。 </p><img id=\"106a2880b30ct\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7286027761/p572649.png\" alt=\"404\" placement=\"break\" class=\"image break\"></li><li id=\"1230f25ba6xm4\"><p id=\"12311960a6rhu\">修改环境变量文件<code data-tag=\"code\" class=\"code\">/etc/profile</code>。</p><ol id=\"e2274d91a6opr\"><li id=\"e20f0aa0a61ej\"><p id=\"e20ee390a60rz\">执行如下命令，打开环境变文件<code data-tag=\"code\" class=\"code\">/etc/profile</code>。</p><pre id=\"p1h4re\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/profile</code></pre></li><li id=\"ecac53a1a6z3d\"><p id=\"4f9346d0a6i7w\">按<code data-tag=\"code\" class=\"code\">i</code>进入编辑模式，在HTTP代理前加<code data-tag=\"code\" class=\"code\"># </code>注释该配置或根据需要修改代理。</p><img id=\"a362c0a0b3ho1\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7286027761/p572672.png\" alt=\"delete proxy\" placement=\"break\" class=\"image break\"></li><li id=\"545c67a0a6vfd\"><p id=\"5c2d7140a61qd\">编辑完成后，按<code data-tag=\"code\" class=\"code\">Esc</code>键，并输入<code data-tag=\"code\" class=\"code\">:wq</code>保存退出文件。</p></li><li id=\"5de51971b3qq3\"><p id=\"5de51970b3l7k\">执行如下命令，使环境变量配置生效。</p><pre id=\"r83cgf\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>source /etc/profile</code></pre></li></ol></li><li id=\"d6228551a6n8g\"><p id=\"d6228550a61q6\">重新执行<code data-tag=\"code\" class=\"code\">yum</code>相关命令，确保可以正常使用。</p></li></ol></section><section id=\"32cad610a6pz0\" class=\"section\"><h3 data-tag=\"h3\" id=\"12311961a6l5u\" class=\"h3\"><b>安装centos-release软件包</b></h3><p id=\"43cc3b80b3j18\">本节以安装CentOS 7.4系统版本的centos-release软件包为例进行介绍，其他系统及版本请参见<a class=\"\" target=\"_blank\" href=\"https://developer.aliyun.com/mirror\">阿里云官方镜像站</a>。</p><ol id=\"9e926952b3lwk\"><li id=\"9e926950b3rh1\"><p id=\"9c39d351b3aab\"><span style=\"color:rgb(24, 24, 24)\">远程连接ECS实例。</span></p><p id=\"a06f66b0b3xuv\"><span style=\"color:rgb(24, 24, 24)\">具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a><span style=\"color:rgb(24, 24, 24)\">。</span></p></li><li id=\"a4184a71b3mj7\"><p id=\"a4184a70b3vm6\"><span style=\"color:rgb(24, 24, 24)\">下载并安装</span>centos-release软件包。</p><pre data-tag=\"codeblock\" id=\"12272e58a66g8\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/centos-release-7-7.1908.0.el7.centos.x86_64.rpm\nrpm -ivh centos-release-7-7.1908.0.el7.centos.x86_64.rpm</code></pre></li><li id=\"799c2c21b3abx\"><p id=\"762fb520b3xml\">重新执行<code data-tag=\"code\" class=\"code\">yum</code>相关命令，确保可以正常使用。</p></li></ol></section></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/error-unpacking-of-archive-failed-on-file-or-usr-or-bin-or-xxxx-cpio-open-failed-error-is-reported-during-yum-installation", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>在Linux实例中执行yum命令失败，提示“error: unpacking of archive failed on file /usr/bin/xxxx: cpio: open Failed”错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在Linux实例中执行yum命令失败，提示“error: unpacking of archive failed on file /usr/bin/xxxx: cpio: open Failed”错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-06-14 16:32:45</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"48589d10b3l7a\"><p data-tag=\"shortdesc\" id=\"485f53d3b3aur\" class=\"shortdesc\">本文介绍在Linux系统的ECS实例中执行yum命令（如<code data-tag=\"code\" class=\"code\">yum -y install XXX</code>、<code data-tag=\"code\" class=\"code\">yum list</code>、<code data-tag=\"code\" class=\"code\">yum search XXX</code>等）失败，提示“error: unpacking of archive failed on file /usr/bin/xxxx: cpio: open Failed”错误时的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"c4ce2f90b3fhx\" class=\"section\"><h2 id=\"485f53d4b3f0w\">问题现象</h2><p class=\"artical-title\" id=\"485f53d5b3q06\">在Linux系统的ECS实例中执行<code data-tag=\"code\" class=\"code\">yum</code>命令（如<code data-tag=\"code\" class=\"code\">yum -y install XXX</code>、<code data-tag=\"code\" class=\"code\">yum list</code>、<code data-tag=\"code\" class=\"code\">yum search XXX</code>等）失败，提示<code data-tag=\"codeph\" class=\"codeph\">error: unpacking of archive failed on file /usr/bin/xxxx: cpio: open Failed</code>错误。</p></section><section id=\"c670bc00b3cle\" class=\"section\"><h2 id=\"485f53d6b3zq9\">问题原因</h2><p id=\"485f7ae0b36uy\">该问题可能是因为ECS实例中<code data-tag=\"codeph\" class=\"codeph\">/usr/bin</code>文件属性配置错误，例如配置了i、a属性（表示不能删除、修改数据），导致在使用yum install命令时报错。</p><p id=\"61611510b3o27\">文件常见属性说明如下：</p><table id=\"table-pta-t5j-fv0\" tablewidth=\"709\" tablecolswidth=\"88 621\" class=\"table\"><colgroup colwidth=\"0.25*\" style=\"width:12.41%\"></colgroup><colgroup colwidth=\"1.75*\" style=\"width:87.59%\"></colgroup><tbody class=\"tbody\"><tr id=\"row-b2c-fkb-ign\"><td id=\"trouble-2267580-entry-1zv-eo2-j3z\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"6618a9b0b3jfc\"><span style=\"color:rgb(51, 51, 51);background-color:rgb(242, 242, 242)\"><b>属性</b></span></p></td><td id=\"trouble-2267580-entry-9o6-mor-12z\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"6618a9b1b3g6h\"><span style=\"color:rgb(51, 51, 51);background-color:rgb(242, 242, 242)\"><b>说明</b></span></p></td></tr><tr id=\"row-jtj-oho-35w\"><td id=\"entry-mgu-v6y-3ee\" rowspan=\"1\" colspan=\"1\"><p id=\"6618a9b2b3qi7\"><span style=\"color:rgb(24, 24, 24)\">i</span></p></td><td id=\"entry-5aa-t3v-hfu\" rowspan=\"1\" colspan=\"1\"><ul class=\"ul\" id=\"ul-oh3-b12-cqt\"><li class=\"li\" id=\"li-671-zzl-imb\"><p id=\"6618a9b3b35rx\"><span style=\"color:rgb(24, 24, 24)\">对文件设置</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">i</span></code><span style=\"color:rgb(24, 24, 24)\">属性，不允许对文件进行删除、重命名，也不能添加和修改数据。</span></p></li><li class=\"li\" id=\"li-mss-bai-zzr\"><p id=\"6618a9b5b3jx2\"><span style=\"color:rgb(24, 24, 24)\">对目录设置</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">i</span></code><span style=\"color:rgb(24, 24, 24)\">属性，只能修改目录下文件中的数据，但不允许新建和删除文件。</span></p></li></ul></td></tr><tr id=\"row-obh-4mo-rbk\"><td id=\"entry-rcp-2z5-6qn\" rowspan=\"1\" colspan=\"1\"><p id=\"6618d0c0b3eze\"><span style=\"color:rgb(24, 24, 24)\">a</span></p></td><td id=\"entry-pjx-bqy-gsy\" rowspan=\"1\" colspan=\"1\"><ul class=\"ul\" id=\"ul-1xs-nbc-byy\"><li class=\"li\" id=\"li-w8t-la7-bk4\"><p id=\"6618d0c1b38ea\"><span style=\"color:rgb(24, 24, 24)\">对文件设置</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">a</span></code><span style=\"color:rgb(24, 24, 24)\">属性，只能在文件中新增数据，但是不能删除和修改数据。</span></p></li><li class=\"li\" id=\"li-vul-dug-tzr\"><p id=\"6618d0c3b38zv\"><span style=\"color:rgb(24, 24, 24)\">对目录设置</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">a</span></code><span style=\"color:rgb(24, 24, 24)\">属性，只能在目录中新增和修改文件，但是不允许删除文件。</span></p></li></ul></td></tr><tr id=\"row-s99-nys-z3q\"><td id=\"entry-rkj-c2t-ltw\" rowspan=\"1\" colspan=\"1\"><p id=\"6618d0c5b33vs\"><span style=\"color:rgb(24, 24, 24)\">u</span></p></td><td id=\"entry-wua-29e-bil\" rowspan=\"1\" colspan=\"1\"><p id=\"6618d0c6b3n3x\"><span style=\"color:rgb(24, 24, 24)\">对文件或目录设置</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">u</span></code><span style=\"color:rgb(24, 24, 24)\">属性，在删除时，其内容会被保存，以保证后期能够恢复，一般用来防止意外删除文件或目录。</span></p></td></tr><tr id=\"row-p6r-x62-2mr\"><td id=\"entry-sm1-msf-622\" rowspan=\"1\" colspan=\"1\"><p id=\"6618d0c8b3w36\"><span style=\"color:rgb(24, 24, 24)\">s</span></p></td><td id=\"entry-le8-amj-pdo\" rowspan=\"1\" colspan=\"1\"><p id=\"6618d0c9b3c4x\"><span style=\"color:rgb(24, 24, 24)\">对文件或目录设置</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">s</span></code><span style=\"color:rgb(24, 24, 24)\">属性，在删除文件或目录时，会被彻底删除，不可恢复。</span></p></td></tr><tr id=\"row-j8w-kpw-kmh\"><td id=\"entry-fte-4kh-0ln\" rowspan=\"1\" colspan=\"1\"><p id=\"6618f7d1b3ir6\"><span style=\"color:rgb(24, 24, 24)\">e</span></p></td><td id=\"entry-17k-4w7-ehz\" rowspan=\"1\" colspan=\"1\"><p id=\"6618f7d2b3fi1\"><span style=\"color:rgb(24, 24, 24)\">Linux中绝大多数的文件都默认拥有</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">e</span></code><span style=\"color:rgb(24, 24, 24)\">属性，表示该文件是使用ext文件系统进行存储的。</span></p></td></tr></tbody></table><p id=\"66183480b38hn\"></p></section><section id=\"ce31c010b3bo9\" class=\"section\"><h2 id=\"485f7ae1b3gpe\">解决方案</h2><p id=\"aa4905d0b3vsh\"><span style=\"color:rgb(24, 24, 24)\">您可以参考以下步骤，根据实际需要修改</span><code data-tag=\"code\" class=\"code ph codeph\" id=\"codeph-zir-yrk-zh1\"><span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">/usr/bin</span></code>的<span style=\"color:rgb(24, 24, 24)\">文件属性，来解决执行</span><code data-tag=\"code\" class=\"code\">yum</code>命令失败<span style=\"color:rgb(24, 24, 24)\">问题。</span></p><ol class=\"ol steps\" id=\"steps-3w7-af7-yk1\"><li class=\"li step stepexpand\" id=\"step-q54-86m-dy4\"><p id=\"a52e90b1b3w3h\"><span style=\"color:rgb(24, 24, 24)\">使用root用户远程连接ECS实例。</span></p><p class=\"itemgroup info\" id=\"info-d6f-lre-3tc\"><span style=\"color:rgb(24, 24, 24)\">具体操作，请参见</span><a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a><span style=\"color:rgb(24, 24, 24)\">。</span></p></li><li class=\"li step stepexpand\" id=\"step-2qr-5f1-cb8\"><p id=\"a52e90b2b3v28\"><span style=\"color:rgb(24, 24, 24)\">运行如下命令，查看并确认</span><code data-tag=\"code\" class=\"code ph codeph\" id=\"c9516030b3dp2\"><span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">/usr/bin</span></code><span style=\"color:rgb(24, 24, 24)\">目录属性是否有误。</span></p><pre id=\"b41auv\" data-tag=\"codeblock\" outputclass=\"language-bash\" class=\"pre codeblock language-bash\"><code>lsattr /usr</code></pre><p class=\"p\" id=\"p-4g8-52n-8vx\">返回类似如下图所示，表示<code data-tag=\"code\" class=\"code ph codeph\" id=\"c9516031b3sv3\"><span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">/usr/bin</span></code><span style=\"color:rgb(24, 24, 24)\">目录属性为</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">i</span></code><span style=\"color:rgb(24, 24, 24)\">（不允许在该目录下新建和删除文件），请继续执行步骤</span><a title=\"\" class=\"xref\" href=\"#a52eb7c1b3hg6\">3</a><span style=\"color:rgb(24, 24, 24)\">移除目录</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">i</span></code><span style=\"color:rgb(24, 24, 24)\">属性。</span></p><img id=\"016731e0b3x4m\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4027417761/p572540.png\" alt=\"lsattr\" placement=\"break\" class=\"image break\"></li><li class=\"li step stepexpand\" id=\"step-4ut-0a5-1nu\"><p id=\"a52eb7c1b3hg6\"><span style=\"color:rgb(24, 24, 24)\">执行如下命令，移除</span><code data-tag=\"code\" class=\"code ph codeph\" id=\"c9516032b3kpj\"><span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">/usr/bin</span></code><span style=\"color:rgb(24, 24, 24)\">目录</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">i</span></code><span style=\"color:rgb(24, 24, 24)\">属性。</span></p><pre id=\"a52eb7c7b3aw0\" data-tag=\"codeblock\" outputclass=\"language-undefined\" class=\"pre codeblock language-undefined\"><code>chattr -i /usr/bin</code></pre><div id=\"2e1a1b70b3rua\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"3350cb22b3iaa\"><li id=\"3350cb20b3cnb\"><p class=\"p\" id=\"p-4xr-z6v-odn\"><span style=\"color:rgb(24, 24, 24)\">+：为文件或目录添加属性。</span></p></li><li id=\"3424e401b3js0\"><p id=\"3424e400b33sk\"><span style=\"color:rgb(24, 24, 24)\">-：移除文件或目录已有的某些属性。</span></p></li><li id=\"352e64c0b3nm4\"><p id=\"352e3db0b3re7\"><span style=\"color:rgb(24, 24, 24)\">=：为文件或目录设定一些</span><span style=\"color:rgb(24, 24, 24)\">属性。</span></p></li></ul></div></div></li><li id=\"4251bc61b328v\"><p id=\"4251bc60b3shc\">再次执行<code data-tag=\"code\" class=\"code\">yum</code>命令，确保可以正常运行。</p></li></ol></section></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/group-policy-opening-errors-caused-by-group-policy-file-configuration-exceptions", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows系统组策略文件配置异常导致组策略打开报错，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows系统组策略文件配置异常导致组策略打开报错，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-06 09:47:30</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"f55cd8e0c1u73\"><p data-tag=\"shortdesc\" id=\"f55f9808c1vxv\" class=\"shortdesc\"><span style=\"color:rgb(24, 24, 24)\">本文介绍</span>Windows系统组策略文件配置异常导致组策略打开报错<span style=\"color:rgb(24, 24, 24)\">的问题原因及解决方案。</span></p><div data-tag=\"conbody\" class=\"conbody\"><h2 data-spm-anchor-id=\"a2c9r.12641768.0.i1.5ef05e3bTf3TPf\" id=\"f55f9809c10su\">问题描述</h2><p id=\"f55f980ac1576\">在打开组策略时提示“组策略错误”。</p><pre data-tag=\"codeblock\" id=\"f55cd8e1c1nw6\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>组策略错误：未能打开这台计算机上的组策略对象。您可能没有合适的权限。</code></pre><h2 data-spm-anchor-id=\"a2c9r.12641768.0.i0.5ef05e3bTf3TPf\" id=\"f55f980bc1juf\">问题原因</h2><p data-spm-anchor-id=\"a2c9r.12641768.0.i0.2ac35e3bDcm1Ta\" id=\"f55f980cc1ivc\">由于组策略文件配置异常，导致未能正常打开组策略对象。</p><h2 id=\"f55f980dc1iqu\">解决方案</h2><ol id=\"67fc09f2c1sm6\"><li id=\"67fc09f0c1gch\"><p id=\"f55f980ec15ba\">远程连接Windows实例。</p><p id=\"6e0090f0c1c2s\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"68bb3b40c1ugw\"><p id=\"68bb1430c1tmk\">打开显示隐藏文件的选项。</p><div id=\"c2f12420d1k9j\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"c007bfd0d1p5p\">本操作以Windows Server 2019为例，不同操作系统的操作入口可能不同，请您根据实际环境进行操作。</p></div></div><ol id=\"62299913d1lcg\"><li id=\"62299910d1j97\"><p id=\"23b60c90d1s72\">使用快捷键<code data-tag=\"code\" class=\"code\">win</code>+<code data-tag=\"code\" class=\"code\">E</code>打开文件资源管理器。</p></li><li id=\"62299911d1nv4\"><p id=\"5fd5be00d12a7\">在文件资源管理器界面上方单击<b data-tag=\"uicontrol\" id=\"7fb82050d1wg4\" class=\"uicontrol\">查看</b>页签，然后单击最右侧的<b data-tag=\"uicontrol\" id=\"87a0a990d1h3c\" class=\"uicontrol\">选项</b>。</p></li><li id=\"90299181d1o8n\"><p id=\"927a8660d157k\">在文件夹选项界面上方单击<b data-tag=\"uicontrol\" id=\"f1d70700d4qb5\" class=\"uicontrol\">查看</b>页签。</p></li><li id=\"a5e7f980d1vma\"><p id=\"afc21990d1lsi\">在下方的高级设置中，下拉找到并选中<b data-tag=\"uicontrol\" id=\"ecb63200d1hv7\" class=\"uicontrol\">显示隐藏的文件、文件夹和驱动器</b>这一选项，然后单击<b data-tag=\"uicontrol\" id=\"fd61c600d145e\" class=\"uicontrol\">应用</b>。</p><img id=\"5d3dfc21d1yfl\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2038578761/p582572.png\" alt=\"image\" placement=\"break\" class=\"image break\"></li></ol></li><li id=\"8432f071c16y8\"><p id=\"8432f070c1vz0\">在<code data-tag=\"codeph\" class=\"codeph\">C:\\Windows\\System32\\GroupPolicy\\Machine</code>文件夹中找到<code data-tag=\"codeph\" class=\"codeph\">registry.pol</code>文件，并将其重命名。</p></li><li id=\"8f7e53c1c1281\"><p id=\"8f7e53c0c1lio\">新建一个记事本文件，改名为<code data-tag=\"codeph\" class=\"codeph\">registry.pol</code>。</p></li><li id=\"98466791c1pp9\"><p id=\"98466790c1vby\">重新尝试打开组策略。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/common-kernel-network-parameters-of-ecs-linux-instances-and-faq", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/linux-operating-system/\">Linux操作系统问题</a></span>\n <span>Linux系统常用内核网络参数介绍与常见问题处理</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Linux系统常用内核网络参数介绍与常见问题处理</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-08-02 17:49:18</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"11d3fed07bhl8\"><p data-tag=\"shortdesc\" id=\"11e95b907bsis\" class=\"shortdesc\">本文介绍常见的Linux系统内核网络参数及常见问题的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"ba84ed30b8uig\" class=\"section\"><h2 data-tag=\"h3\" id=\"11e9a9bd7b4ni\" class=\"h3\"><b>注意事项</b></h2><p id=\"11e9a9be7b7l3\">在修改内核参数前，您需要注意以下几点：</p><ul id=\"11e9a9bf7bbbe\"><li id=\"11e9a9c07b1ch\"><p id=\"11e9a9c17byfq\">从实际需求出发，尽量有相关数据的支撑，不建议您随意调整内核参数。</p></li><li id=\"11e9d0c07btk0\"><p id=\"11e9d0c17blkf\">了解参数的具体作用，需注意不同类型或版本的环境中，内核参数可能有所不同。</p></li><li id=\"11e9d0c27b3k2\"><p id=\"11e9d0c37bsx4\">备份ECS实例中的重要数据，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></li></ul></section><section id=\"323e73b0b8nvy\" class=\"section\"><h2 id=\"n49mj\">查看和修改内核参数</h2><p id=\"009857c0cfda6\"><code data-tag=\"code\" class=\"code\">/proc/sys/</code>和<code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>都支持在实例运行时修改内核参数，不同之处如下：</p><ul id=\"726074a2cfpeh\"><li id=\"726074a0cf511\"><p id=\"01afe9a0cfmhc\"><code data-tag=\"code\" class=\"code\">/proc/sys/</code>是一个虚拟文件系统，提供了访问内核参数的方法，该目录下的<code data-tag=\"code\" class=\"code\">net</code>中存放了当前系统中已开启的所有网络内核参数，可以在系统运行时进行修改，但<b>重启实例后就会失效</b>，一般用于临时性验证修改的效果。</p></li><li id=\"8cd55fd0cfm7j\"><p id=\"97b46cc0cfmf7\"><code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>是一个配置文件，您可以通过修改<code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>文件来修改内核参数的默认值，<b>实例重启后不会失效</b>。</p></li></ul><p id=\"4b6007e0d1c0z\"><code data-tag=\"code\" class=\"code\">/proc/sys/</code>目录下文件与<code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>配置文件中参数的完整名称相关，如<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>参数，对应的文件是<code data-tag=\"code\" class=\"code\">/proc/sys/net/ipv4/tcp_tw_recycle</code>文件，文件的内容就是参数值。</p><div type=\"note\" id=\"11e9a9b37bdw1\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"11e9a9b57beoq\">Linux从4.12内核版本开始移除了tcp_tw_recycle配置，即移除sysctl.conf中关于net.ipv4.tcp_tw_recycle的配置内容，当您的系统内核低于4.12版本才可以使用<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>参数。</p></div></div><section id=\"1d5bf210cfngz\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"1d5bf212cflxt\" class=\"section\"><h3 id=\"8f8ff020cfgxs\">通过/proc/sys/目录查看和修改内核参数</h3><ol id=\"097fe502cf0r9\"><li id=\"097fe500cf06p\"><p id=\"0679a9e1cfp6t\">登录Linux系统的ECS实例。</p><p id=\"0c0b23c0cfy0s\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"0e703ce0cfult\"><p id=\"25f952c0cfmh3\">使用<code data-tag=\"code\" class=\"code\">cat</code>命令，可以查看对应文件的内容。</p><p id=\"31206530cfi9h\">例如，执行以下命令，查看<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>的值。</p><pre id=\"11d3fed17bx6f\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>cat /proc/sys/net/ipv4/tcp_tw_recycle </code></pre></li><li id=\"3ecc4dc1cfdjo\"><p id=\"3ecc4dc0cffka\">使用<code data-tag=\"code\" class=\"code\">echo</code>命令，可以修改内核参数对应的文件。</p><p id=\"57b7b2c0cfg63\">例如，执行以下命令，将<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>的值修改为0。 </p><pre id=\"4e3a58b2cfw3c\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>echo \"0\" &gt; /proc/sys/net/ipv4/tcp_tw_recycle </code></pre></li></ol></section><section id=\"1d5bf215cfgqx\" class=\"section\"><h3 data-tag=\"h4\" id=\"9acb9c00cfgdw\" class=\"h4\">通过/etc/sysctl.conf文件查看和修改内核参数</h3><ol id=\"7f60e582cfu05\"><li id=\"7f60e580cftqk\"><p id=\"7c9f5481cfg8m\">登录Linux系统的ECS实例。</p><p id=\"80dab440cfj9i\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"81f35031cftsz\"><p id=\"879ac310cfysr\">执行如下命令，查看当前系统中生效的所有参数。</p><pre id=\"6axpzz\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>sysctl -a</code></pre><p id=\"e2918be0cfuiy\">部分内核参数显示如下所示。</p><pre id=\"11d3fed37bjq1\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>net.ipv4.tcp_app_win = 31\nnet.ipv4.tcp_adv_win_scale = 2\nnet.ipv4.tcp_tw_reuse = 0\nnet.ipv4.tcp_frto = 2\nnet.ipv4.tcp_frto_response = 0\nnet.ipv4.tcp_low_latency = 0\nnet.ipv4.tcp_no_metrics_save = 0\nnet.ipv4.tcp_moderate_rcvbuf = 1\nnet.ipv4.tcp_tso_win_divisor = 3\nnet.ipv4.tcp_congestion_control = cubic\nnet.ipv4.tcp_abc = 0\nnet.ipv4.tcp_mtu_probing = 0\nnet.ipv4.tcp_base_mss = 512\nnet.ipv4.tcp_workaround_signed_windows = 0\nnet.ipv4.tcp_challenge_ack_limit = 1000\nnet.ipv4.tcp_limit_output_bytes = 262144\nnet.ipv4.tcp_dma_copybreak = 4096\nnet.ipv4.tcp_slow_start_after_idle = 1\nnet.ipv4.cipso_cache_enable = 1\nnet.ipv4.cipso_cache_bucket_size = 10\nnet.ipv4.cipso_rbm_optfmt = 0\nnet.ipv4.cipso_rbm_strictvalid = 1</code></pre></li><li id=\"965842b0cfn9b\"><p id=\"96581ba0cf1s6\">修改内核参数。</p><ul id=\"ae936a81cfnso\"><li id=\"ad519bb0cf9tx\"><p id=\"c1837040cfxbo\">临时修改。 </p><pre id=\"nqf5gt\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>/sbin/sysctl -w kernel.parameter=\"[$Example]\"</code></pre><div id=\"d3ff7e80cf8e6\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"cbca82f0cf9jc\">kernel.parameter请替换成内核名，[$Example]请替换成参数值，如执行<code data-tag=\"code\" class=\"code\">sysctl -w net.ipv4.tcp_tw_recycle=\"0\"</code>命令，将<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>内核参数值改为0。\n</p></div></div></li><li id=\"b7230931cfusr\"><p id=\"b7230930cf7wq\">永久修改。</p><ol id=\"2393b281cfevs\"><li id=\"210e1913cfvw8\"><p id=\"210e4020cfgvp\">执行如下命令，打开<code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>配置文件。</p><pre id=\"2kbagz\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>vim /etc/sysctl.conf</code></pre></li><li id=\"37407890cfyq2\"><p id=\"37405180cfbkg\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"3d55ef80cfree\"><p id=\"3d55c870cfjfc\">根据需要，修改内核参数。</p><p id=\"9ddc2bd0cfhbw\">具体格式如下所示。</p><pre id=\"gkpfmm\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>net.ipv6.conf.all.disable_ipv6 = 1\nnet.ipv6.conf.default.disable_ipv6 = 1\nnet.ipv6.conf.lo.disable_ipv6 = 1</code></pre></li><li id=\"358a8b30cf4fc\"><p id=\"358a3d10cfytb\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>，保存并退出编辑。</p></li><li id=\"2b8727b0d7z5j\"><p id=\"2b8700a0d72hn\">执行如下命令，使配置生效。</p><pre id=\"9osmas\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>/sbin/sysctl -p</code></pre></li></ol></li></ul></li></ol></section></section></section><section id=\"e0031880d1v80\" class=\"section\"><h2 data-tag=\"h3\" id=\"11ea45f17b09r\" class=\"h3\"><b>网络相关内核参数常见问题及解决方案</b></h2><ul id=\"459c76f2d10w3\"><li id=\"459c76f0d1rmj\"><p id=\"e5c677d0d1k6c\"><a title=\"\" class=\"xref\" href=\"#h3-linux-nat-ecs-\">无法远程连接Linux系统的ECS实例，在/var/log/message日志看到“nf_conntrack: table full, dropping packet”错误信息怎么办？</a></p></li><li id=\"fcde0730d179m\"><p id=\"fcdde020d1rei\"><a title=\"\" class=\"xref\" href=\"#RmFfc\">为什么/var/log/messages日志中会出现“Time wait bucket table overflow”错误信息？</a></p></li><li id=\"1c05f320d10kk\"><p id=\"1c05cc10d1168\"><a title=\"\" class=\"xref\" href=\"#ccbcd560cfs7z\">为什么Linux系统的ECS实例中，出现大量的处于FIN_WAIT2状态的TCP连接？</a></p></li><li id=\"6f7226a1d18v8\"><p id=\"6f7226a0d1ees\"><a title=\"\" class=\"xref\" href=\"#c216d9d0cfi4i\">为什么Linux系统的ECS实例中，出现大量的处于CLOSE_WAIT状态的TCP连接？</a></p></li><li id=\"8d19b420d1eva\"><p id=\"8d198d10d1ij3\"><a title=\"\" class=\"xref\" href=\"#b4d2b3c0cfdp6\">为什么客户端配置NAT后，无法访问服务端的ECS或RDS？</a></p></li></ul><section id=\"h3-linux-nat-ecs-\" class=\"section\"><h3 data-tag=\"h4\" id=\"11ea6d0a7brpk\" class=\"h4\"><b>无法远程连接Linux系统的ECS实例，在</b><code data-tag=\"code\" class=\"code\">/var/log/message</code>日志看到“nf_conntrack: table full, dropping packet”错误信息怎么办？</h3><section id=\"f7092b70d0xqq\" class=\"section\"><h4 data-tag=\"h5\" id=\"11ea94127bbhw\" class=\"h5\"><b>问题现象</b></h4><p id=\"9759ee30d008f\">无法远程连接ECS实例，ping目标实例时出现ping丢包或ping不通情况，在<code data-tag=\"code\" class=\"code\">/var/log/message</code>系统日志中频繁出现以下错误信息。</p><pre id=\"11d425e07bd13\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>Feb  6 16:05:07 i-*** kernel: nf_conntrack: table full, dropping packet.\nFeb  6 16:05:07 i-*** kernel: nf_conntrack: table full, dropping packet.\nFeb  6 16:05:07 i-*** kernel: nf_conntrack: table full, dropping packet.\nFeb  6 16:05:07 i-*** kernel: nf_conntrack: table full, dropping packet.</code></pre></section><section id=\"fe8adc90d0h5b\" class=\"section\"><h4 data-tag=\"h5\" id=\"fc206c40d0kkd\" class=\"h5\">问题原因</h4><p id=\"fb600270d0lo6\">ip_conntrack是Linux系统内NAT的一个跟踪连接条目的模块，ip_conntrack模块会使用一个哈希表记录TCP协议<code data-tag=\"code\" class=\"code\">established connection</code>记录。当这个哈希表满之后，新连接的数据包会被丢弃掉，就会出现<code data-tag=\"code\" class=\"code\">nf_conntrack: table full, dropping packet</code>错误。</p><p id=\"ba6e1300d0is5\">Linux系统会开辟一个空间，用于维护每一个TCP链接，这个空间的大小与<code data-tag=\"code\" class=\"code\">nf_conntrack_buckets</code>、<code data-tag=\"code\" class=\"code\">nf_conntrack_max</code>参数相关，后者的默认值是前者的4倍，所以一般建议调大<code data-tag=\"code\" class=\"code\">nf_conntrack_max</code>参数值。</p><div type=\"note\" id=\"11ea94167b09p\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"11ea94187blsd\">维护系统连接比较消耗内存，建议您在系统空闲和内存充足的情况下，将<code data-tag=\"code\" class=\"code\">nf_conntrack_max</code>参数值调大。</p></div></div></section><section id=\"d7b0d0f0d1zbr\" class=\"section\"><h4 data-tag=\"h5\" id=\"11ea94197bo8e\" class=\"h5\"><b>解决方案</b></h4><ol id=\"11ea941a7b2jv\"><li id=\"11ea941b7b1zx\"><p id=\"11ea941c7bvd5\">使用VNC远程连接实例。</p><p id=\"ff531440cfi1a\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"11ea941d7b2aj\"><p id=\"11ea941e7bsg7\">修改<code data-tag=\"code\" class=\"code\">nf_conntrack_max</code>参数值。</p><ol id=\"150bdbd1d06lr\"><li id=\"6b620551d0gix\"><p id=\"6b620550d0ywi\">执行以下命令，打开<code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>文件。 </p><pre id=\"11d425e17bvm3\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>vi /etc/sysctl.conf</code></pre></li><li id=\"11ea94207bbm7\"><p id=\"11ea94217bivf\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"2c2b0c50d01gn\"><p id=\"2c2ae540d0l8m\">修改<code data-tag=\"code\" class=\"code\">nf_conntrack_max</code>参数值。</p><p id=\"3d1c34d0d0gty\">例如，将哈希表项最大值参数修改为<code data-tag=\"code\" class=\"code\">655350</code>。</p><pre id=\"wleibb\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>net.netfilter.nf_conntrack_max = 655350</code></pre></li><li id=\"11ea94227botd\"><p id=\"4679f570d7fr9\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>，保存并退出编辑。</p></li></ol></li><li id=\"44a27650d76i4\"><p id=\"44a24f40d765y\">修改超时参数<code data-tag=\"code\" class=\"code\">nf_conntrack_tcp_timeout_established</code>值。</p><p id=\"7311d5e0d0x11\">例如，修改超时参数值为1200，默认超时时间是432000秒。</p><pre id=\"2gvpge\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>net.netfilter.nf_conntrack_tcp_timeout_established = 1200</code></pre></li><li id=\"11ea94247bi08\"><p id=\"11eabb207bsg7\">执行如下命令，使配置生效。</p><pre id=\"2gn4lb\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>sysctl -p</code></pre></li></ol></section></section><section id=\"RmFfc\" class=\"section\"><h3 data-tag=\"h4\" id=\"11eabb217bv0z\" class=\"h4\"><b>为什么</b><code data-tag=\"code\" class=\"code\">/var/log/messages</code>日志中会出现<b>“Time wait bucket table overflow”错误信息？</b></h3><section id=\"bc98a940d1sfw\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eabb257bl03\" class=\"h5\"><b>问题现象</b></h4><p id=\"11eabb287bbzn\">Linux系统的ECS实例中，<code data-tag=\"code\" class=\"code\">/var/log/messages</code>日志中频繁出现“kernel: TCP: time wait bucket table overflow”错误信息。</p><pre id=\"11d425e27bnxl\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>Feb 18 12:28:38 i-*** kernel: TCP: time wait bucket table overflow\nFeb 18 12:28:44 i-*** kernel: printk: 227 messages suppressed.\nFeb 18 12:28:44 i-*** kernel: TCP: time wait bucket table overflow\nFeb 18 12:28:52 i-*** kernel: printk: 121 messages suppressed.\nFeb 18 12:28:52 i-*** kernel: TCP: time wait bucket table overflow\nFeb 18 12:28:53 i-*** kernel: printk: 351 messages suppressed.\nFeb 18 12:28:53 i-*** kernel: TCP: time wait bucket table overflow\nFeb 18 12:28:59 i-*** kernel: printk: 319 messages suppressed.</code></pre></section><section id=\"d38b9140d1ve0\" class=\"section\"><h4 data-tag=\"h5\" id=\"c0c22eb0d1ox4\" class=\"h5\">问题原因</h4><p id=\"bfdcfed0d1dq5\"><code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数用于调整内核中管理TIME_WAIT状态的数量，当ECS实例中处于TIME_WAIT状态的连接数，加上需要转换为TIME_WAIT状态的连接数之和超过<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数值时，<code data-tag=\"code\" class=\"code\">/var/log/messages</code>日志中就会出现“kernel: TCP: time wait bucket table overflow”错误信息，此时，系统内核将会关闭超出参数值的部分TCP连接。</p></section><section id=\"d1b15300d1yge\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eabb2f7bdew\" class=\"h5\"><b>解决方案</b></h4><p id=\"9549fd20d1kry\">您可以根据实际情况适当调高<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数值，同时，建议您从业务层面去改进TCP连接。本文介绍如何修改<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数值。</p><ol id=\"11eabb307bzhg\"><li id=\"11eae2307bhvl\"><p id=\"11eae2317br1l\">使用VNC远程连接实例。</p><p id=\"294155b2d17nm\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"27d25c60d1qa1\"><p id=\"27d23550d1pxt\">执行以下命令，查看TCP连接数。 </p><pre id=\"11d425e47bsdk\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>netstat -anp |grep tcp |wc -l</code></pre><p id=\"11eae2327bipt\"> 显示如下，表示处于TIME_WAIT状态的连接数为6300。</p><pre data-tag=\"codeblock\" outputclass=\"language-shell\" id=\"d947fea0d1gly\" class=\"pre codeblock language-shell\"><code>6300 TIME_WAIT\n 40 LISTEN\n 20 ESTABLISHED\n 20 CONNECTED</code></pre></li><li id=\"11eae2337buz5\"><p id=\"4905f3a0d12qf\">执行如下命令，查看<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数值。</p><pre id=\"8estbl\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>cat /etc/sysctl.conf | grep net.ipv4.tcp_max_tw_buckets</code></pre><p id=\"11d2ad00d1vwx\">显示如下所示，表示<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数值为20000。</p><img id=\"04641b90d1crb\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8979040861/p614405.png\" alt=\"2023-04-02_11-03-24\" placement=\"break\" class=\"image break\"></li><li id=\"38a1ac61d1whr\"><p id=\"38a1ac62d1w45\">修改<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数值。</p><ol id=\"38a1ac63d1okg\"><li id=\"38a1ac64d17us\"><p id=\"38a1ac65d1vvg\">执行以下命令，打开<code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>文件。 </p><pre id=\"38a1ac66d1em8\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>vi /etc/sysctl.conf</code></pre></li><li id=\"38a1ac67d1n1b\"><p id=\"38a1ac68d1f77\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"38a1ac69d1e1v\"><p id=\"38a1ac6ad1u2p\">修改<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数值。</p><p id=\"38a1ac6bd1w6u\">例如，将<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数值修改为<code data-tag=\"code\" class=\"code\">65535</code>。</p><pre id=\"38a1ac6cd1mii\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>net.ipv4.tcp_max_tw_buckets = 65535</code></pre></li><li id=\"11eb09407bjvj\"><p id=\"4b6d5a90d7x1l\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>，保存并退出编辑。</p></li></ol></li><li id=\"4a05b441d7oor\"><p id=\"4a05b440d79op\">执行如下命令，使配置生效。</p><pre id=\"832524b0d1qhb\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>sysctl -p</code></pre></li></ol></section></section><section id=\"ccbcd560cfs7z\" class=\"section\"><h3 data-tag=\"h4\" id=\"11eb09427bgt2\" class=\"h4\"><b>为什么Linux系统的ECS实例中，出现大量的处于FIN_WAIT2状态的TCP连接？</b></h3><section id=\"c9289220d1umz\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eb09467b1zl\" class=\"h5\"><b>问题现象</b></h4><p id=\"11eb09477bcaw\">Linux系统的ECS实例中，出现大量的处于FIN_WAIT2状态的TCP连接。</p></section><section id=\"cb9db0d0d1gap\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eb09487bo12\" class=\"h5\"><b>问题原因</b></h4><p id=\"39359d10d16d1\">出现该问题可能有以下原因：</p><ul id=\"11eb09497bzwe\"><li id=\"11eb094a7b5zu\"><p id=\"11eb094b7bx95\">在HTTP服务中，Server由于某种原因会主动关闭连接，例如在KEEPALIVE超时的情况下，主动关闭连接的Server就会进入FIN_WAIT2状态。</p></li><li id=\"11eb094c7bnxe\"><p id=\"11eb094d7by1p\">在TCP/IP协议栈中，存在半连接的概念，FIN_WAIT2状态不算超时（与TIME_WAIT状态不同）。如果Client不关闭，FIN_WAIT2状态将保持到系统重启，越来越多的FIN_WAIT2状态会致使内核Crash。</p></li></ul></section><section id=\"c52dbdd0d1h0r\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eb09507b0tr\" class=\"h5\"><b>解决方案</b></h4><p id=\"a3732f30d1krc\">您可以将<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_fin_timeout</code>参数值调小，以便加快系统关闭处于<code data-tag=\"code\" class=\"code\">FIN_WAIT2</code>状态的TCP连接。</p><ol start=\"1\" id=\"11eb09517bmjh\"><li id=\"11eb09527b89t\"><p id=\"2be59ab1d1yhg\">使用VNC远程连接实例。</p><p id=\"18f4d1a0d1ggh\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"1b04c5e1d17j4\"><p id=\"1b04c5e2d1ppa\">修改<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_fin_timeout</code>参数值。</p><ol id=\"1b04c5e3d1ek8\"><li id=\"1b04c5e4d1vf6\"><p id=\"1b04c5e5d16ed\">执行以下命令，打开<code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>文件。 </p><pre id=\"1b04c5e6d1i48\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>vi /etc/sysctl.conf</code></pre></li><li id=\"1b04c5e7d1mln\"><p id=\"1b04c5e8d1xvy\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"1b04c5e9d1jus\"><p id=\"1b04c5ead1rqb\">修改<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_fin_timeout</code>参数值。</p><p id=\"1b04c5ebd119t\">例如，将<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_fin_timeout</code>参数值修改为10。</p><pre id=\"1b04c5ecd1gp5\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>net.ipv4.tcp_fin_timeout = 10</code></pre></li><li id=\"11eb09557btkb\"><p id=\"4eb44830d7vfq\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>，保存并退出编辑。</p></li></ol></li><li id=\"4d53a6c1d700w\"><p id=\"4d53a6c0d7lzz\">执行如下命令，使配置生效。</p><pre id=\"783dd300d138c\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>sysctl -p</code></pre></li></ol></section></section><section id=\"c216d9d0cfi4i\" class=\"section\"><h3 data-tag=\"h4\" id=\"11eb30527bd8t\" class=\"h4\">为什么Linux系统的ECS实例中，出现大量的处于CLOSE_WAIT状态的TCP连接？</h3><section id=\"a599c9a0d13s7\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eb30537b16v\" class=\"h5\"><b>问题现象</b></h4><p id=\"11eb30547b1b3\">Linux系统的ECS实例中，出现大量的处于CLOSE_WAIT状态的TCP连接。</p></section><section id=\"a723c500d1zm2\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eb30557b3gx\" class=\"h5\"><b>问题原因</b></h4><p id=\"11eb30567bbqm\">出现该问题的可能原因是CLOSE_WAIT数量是否超出了正常的范围。</p><p id=\"d63f1220d14b9\">TCP连接断开时需要进行四次挥手，TCP连接的两端都可以发起关闭连接的请求，若对端发起了关闭连接，但本地没有关闭连接，那么该连接就会处于CLOSE_WAIT状态。虽然该连接已经处于半连接状态，但是已经无法和对端通信，需要及时地释放该连接。</p></section><section id=\"a992f040d1ng9\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eb30577bmff\" class=\"h5\"><b>解决方案</b></h4><p id=\"b4ebc540d14i9\">建议您从业务层面及时判断某个连接是否已经被对端关闭，即在程序逻辑中对连接及时关闭，并进行检查。</p><ol id=\"adf404a2d1qko\"><li id=\"adf404a0d17kj\"><p id=\"ac190311d1ub5\">远程连接ECS实例。</p><p id=\"afca9960d1nj3\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"0f243c90d1jj2\"><p id=\"0f23ee70d1dvx\">在程序中检查并关闭CLOSE_WAIT状态的TCP连接。</p><p id=\"8d460960d1v1k\">编程语言中对应的读、写函数一般包含了检测CLOSE_WAIT状态的TCP连接功能。Java语言和C语言中关闭连接的方法如下：</p><ul id=\"214f44a1d17w4\"><li id=\"20a23bc0d1ywr\"><p id=\"20a214b0d1oxs\"><b>Java语言</b></p><ol id=\"193942c1d1jhv\"><li id=\"18131240d1i4h\"><p id=\"1812c420d11gg\">通过<code data-tag=\"code\" class=\"code\">read</code>方法来判断I/O 。当read方法返回<code data-tag=\"code\" class=\"code\">-1</code>时，则表示已经到达末尾。</p></li><li id=\"1b384710d1vp4\"><p id=\"1b382000d1wsb\">通过<code data-tag=\"code\" class=\"code\">close</code>方法关闭该连接。</p></li></ol></li><li id=\"2317a890d10db\"><p id=\"23178180d1gv1\"><b>C语言</b></p><p id=\"330320e0d1lk9\">检查<code data-tag=\"code\" class=\"code\">read</code>的返回值。</p><ul id=\"36b55371d1snd\"><li id=\"3636d4a0d1jd8\"><p id=\"3636ad90d1486\">若等于0，则可以关闭该连接。</p></li><li id=\"38d61090d1bjz\"><p id=\"38d5e980d1t5o\">若小于0，则查看error，若不是AGAIN，则同样可以关闭连接。</p></li></ul></li></ul></li></ol></section></section><section id=\"b4d2b3c0cfdp6\" class=\"section\"><h3 data-tag=\"h4\" id=\"11eb30677byb4\" class=\"h4\"><b>为什么客户端配置NAT后，无法访问服务端的ECS或RDS？</b></h3><section id=\"acc56b80d1yhl\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eb57637bixy\" class=\"h5\"><b>问题现象</b></h4><p id=\"11eb57647bric\">客户端配置NAT后无法访问服务端的ECS、RDS，包括配置了SNAT的VPC中的ECS实例。</p></section><section id=\"bdea2720d15qe\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eb57657bxe4\" class=\"h5\"><b>问题原因</b></h4><p id=\"8a1f98e1d1g7r\">出现该问题可能是服务端的<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>和<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_timestamps</code>参数值配置为1导致。</p><p id=\"11eb57667b4bx\">当服务端的内核参数<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>和<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_timestamps</code>的值都为1，表示服务端会检查每一个TCP连接报文中的时间戳（Timestamp），若Timestamp不是递增的关系，则不会响应这个报文。</p></section><section id=\"c09fd140d1hbc\" class=\"section\"><h4 data-tag=\"h5\" id=\"11eb57677b6ts\" class=\"h5\"><b>解决方案</b></h4><p id=\"3dd30710d10td\">您可以根据服务端云产品不通，选择合适的方案进行处理。</p><ul data-spm-anchor-id=\"a2c4g.11186623.0.i3.6045578aY39DsC\" id=\"e9f37850d1usf\"><li id=\"e9f37852d11pp\"><p id=\"e9f37851d1fif\">远端服务器为ECS时，修改<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>参数和<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_timestamps</code>参数为0。</p></li><li data-spm-anchor-id=\"a2c4g.11186623.0.i2.6045578aY39DsC\" id=\"e9f37854d1mio\"><p id=\"e9f37853d1ir2\">远端服务器为RDS时，RDS无法直接修改内核参数，需要在客户端上修改<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>参数和<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_timestamps</code>参数为0。</p></li></ul><ol id=\"7bf56321d1hik\"><li id=\"7d0b8e1fd1y9e\"><p id=\"7d0b8e20d1vvm\">使用VNC远程连接实例。</p><p id=\"30a54f32d19k5\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-linux-instance-by-using-a-password\">通过密码认证登录Linux实例</a>。</p></li><li id=\"7d0b8e14d1mt9\"><p id=\"7d0b8e15d10zc\">修改<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>和<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_timestamps</code>参数值为0。</p><ol id=\"7d0b8e16d1kg0\"><li id=\"7d0b8e17d1rav\"><p id=\"7d0b8e18d1it6\">执行以下命令，打开<code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>文件。 </p><pre id=\"7d0b8e19d12zt\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>vi /etc/sysctl.conf</code></pre></li><li id=\"7d0b8e1ad1i8f\"><p id=\"7d0b8e1bd1hw2\">按<code data-tag=\"code\" class=\"code\">i</code>键进入编辑模式。</p></li><li id=\"7d0b8e1cd1puf\"><p id=\"7d0b8e1dd1x65\">将<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_tw_recycle</code>和<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_timestamps</code>参数值修改为0。</p><pre id=\"7d0b8e1ed1nb5\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>net.ipv4.tcp_tw_recycle=0\nnet.ipv4.tcp_timestamps=0</code></pre></li><li id=\"843d7180d1eyn\"><p id=\"54f8be60d7q5t\">按<code data-tag=\"code\" class=\"code\">Esc</code>键，输入<code data-tag=\"code\" class=\"code\">:wq</code>，保存并退出编辑。</p></li></ol></li><li id=\"5375a0d0d732z\"><p id=\"537579c0d7qq2\">执行以下命令，使配置生效。 </p><pre id=\"7d0b8e21d1wyj\" data-tag=\"codeblock\" outputclass=\"language-shell\" class=\"pre codeblock language-shell\"><code>sysctl -p </code></pre></li></ol></section></section></section><section id=\"TxtER\" class=\"section\"><h2 data-tag=\"h3\" id=\"11ec1ac47b385\" class=\"h3\"><b>常见Linux内核参数说明</b></h2><table id=\"11ec1ac67bb5a\" tablewidth=\"708\" tablecolswidth=\"177 531\" class=\"table\"><colgroup colwidth=\"0.5*\" style=\"width:25.00%\"></colgroup><colgroup colwidth=\"1.5*\" style=\"width:75.00%\"></colgroup><tbody class=\"tbody\"><tr id=\"11ec1ac77bbvy\"><td id=\"11ec1ac87bx3x\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"11ec1ac97bet6\">参数</p></td><td id=\"11ec1aca7bbug\" rowspan=\"1\" style=\"background-color:#e5e5e5\" colspan=\"1\"><p id=\"11ec1acb7brs0\">说明</p></td></tr><tr id=\"11ec1acc7bku0\"><td id=\"11ec41c07bxku\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41c17bafz\">net.core.rmem_default</p></td><td id=\"11ec41c27bsdi\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41c37b2le\">默认的socket数据接收窗口大小（字节）。</p></td></tr><tr id=\"11ec41c47b18t\"><td id=\"11ec41c57bgax\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41c67b8di\">net.core.rmem_max</p></td><td id=\"11ec41c77bw9h\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41c87bbyt\">最大的socket数据接收窗口（字节）。</p></td></tr><tr id=\"11ec41c97bfol\"><td id=\"11ec41ca7bgg0\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41cb7b4oe\">net.core.wmem_default</p></td><td id=\"11ec41cc7bfq7\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41cd7b46z\">默认的socket数据发送窗口大小（字节）。</p></td></tr><tr id=\"11ec41ce7bw14\"><td id=\"11ec41cf7b0g4\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41d07byuc\">net.core.wmem_max</p></td><td id=\"11ec41d17bvq5\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41d27b5ec\">最大的socket数据发送窗口（字节）。</p></td></tr><tr id=\"11ec41d37blvn\"><td id=\"11ec41d47bmjz\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41d57bgpm\">net.core.netdev_max_backlog</p></td><td id=\"11ec41d67b5kk\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41d77bqc6\">当内核处理速度比网卡接收速度慢时，这部分多出来的包就会被保存在网卡的接收队列上。</p><p id=\"6a924220d18k1\">该参数说明了这个队列的数量上限，在每个网络接口接收数据包的速率比内核处理这些包的速率快时，允许送到队列的数据包的最大数目。</p></td></tr><tr id=\"11ec41d87be9y\"><td id=\"11ec41d97b4ux\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41da7bhii\">net.core.somaxconn</p></td><td id=\"11ec41db7b3a7\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41dc7bjtf\">该参数定义了系统中每一个端口最大的监听队列的长度，是个全局参数。</p><p id=\"725234c0d1wx3\">该参数和<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_syn_backlog</code>有关联，后者指的是还在三次握手的半连接的上限，该参数指的是处于ESTABLISHED的数量上限。若您的ECS实例业务负载很高，则有必要调高该参数。<code data-tag=\"code\" class=\"code\">listen(2)</code>函数中的参数<code data-tag=\"code\" class=\"code\">backlog</code> 同样是指明监听的端口处于ESTABLISHED的数量上限，当<code data-tag=\"code\" class=\"code\">backlog</code>大于<code data-tag=\"code\" class=\"code\">net.core.somaxconn</code>时，以<code data-tag=\"code\" class=\"code\">net.core.somaxconn</code>参数为准。</p></td></tr><tr id=\"11ec41dd7be6g\"><td id=\"11ec41de7bplz\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec41df7bpir\">net.core.optmem_max</p></td><td id=\"11ec68d07bam4\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68d17b2cx\">表示每个套接字所允许的最大缓冲区的大小。</p></td></tr><tr id=\"11ec68d27bze6\"><td id=\"11ec68d37blzt\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68d47bb08\">net.ipv4.tcp_mem</p></td><td id=\"11ec68d57bv1v\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68d67bvp8\">确定TCP栈应该如何反映内存使用，每个值的单位都是内存页（通常是4 KB）。 </p><ul id=\"8670f682d1acj\"><li id=\"8670f680d1l1r\"><p id=\"84e685f0d1dd4\">第一个值是内存使用的下限。 </p></li><li id=\"87ae5880d1npf\"><p id=\"87ae3170d1uaq\">第二个值是内存压力模式开始对缓冲区使用应用压力的上限。 </p></li><li id=\"88c6a650d1tu2\"><p id=\"88c67f40d1ecu\">第三个值是内存使用的上限。在这个层次上可以将报文丢弃，从而减少对内存的使用。对于较大的BDP可以增大这些值（其单位是内存页而不是字节）。</p></li></ul></td></tr><tr id=\"11ec68d77b0zv\"><td id=\"11ec68d87b9r0\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68d97bys6\">net.ipv4.tcp_rmem</p></td><td id=\"11ec68da7by2m\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68db7b9po\">为自动调优定义Socket使用的内存。 </p><ul id=\"8e7a0012d1h4p\"><li id=\"8e7a0010d114a\"><p id=\"8dd53490d1k9a\">第一个值是为Socket接收缓冲区分配的最少字节数。 </p></li><li id=\"8f955b20d1ibq\"><p id=\"8f953410d1ebr\">第二个值是默认值（该值会覆盖rmem_default），缓冲区在系统负载不重的情况下可以增长到这个值。</p></li><li id=\"905e9e91d1c6e\"><p id=\"905e9e90d10pn\"> 第三个值是接收缓冲区空间的最大字节数（该值会覆盖rmem_max）。</p></li></ul></td></tr><tr id=\"11ec68dc7bkim\"><td id=\"11ec68dd7br6k\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68de7b5jn\">net.ipv4.tcp_wmem</p></td><td id=\"11ec68df7b18l\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68e07bxfr\">为自动调优定义Socket使用的内存。 </p><ul id=\"92741112d1glb\"><li id=\"92741110d1zhy\"><p id=\"91597950d196i\">第一个值是为Socket发送缓冲区分配的最少字节数。 </p></li><li id=\"93c59750d1i87\"><p id=\"93c57040d1mai\">第二个值是默认值（该值会覆盖wmem_default），缓冲区在系统负载不重的情况下可以增长到这个值。 </p></li><li id=\"94c18380d1v33\"><p id=\"94c15c70d1nvo\">第三个值是发送缓冲区空间的最大字节数（该值不会覆盖wmem_max）。</p></li></ul></td></tr><tr id=\"11ec68e17bn6d\"><td id=\"11ec68e27brbg\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68e37b62s\">net.ipv4.tcp_keepalive_time</p></td><td id=\"11ec68e47bnw4\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68e57b697\">TCP发送keepalive探测消息的间隔时间（秒），用于确认TCP连接是否有效。</p></td></tr><tr id=\"11ec68e67bfj6\"><td id=\"11ec68e77b3y3\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68e87b2uf\">net.ipv4.tcp_keepalive_intvl</p></td><td id=\"11ec68e97bnsd\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68ea7bbpq\">探测消息未获得响应时，重发该消息的间隔时间（秒）。</p></td></tr><tr id=\"11ec68eb7bb61\"><td id=\"11ec68ec7bian\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68ed7b97g\">net.ipv4.tcp_keepalive_probes</p></td><td id=\"11ec68ee7bg9f\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68ef7byra\">在认定TCP连接失效之前，最多发送多少个keepalive探测消息。</p></td></tr><tr id=\"11ec68f07bxad\"><td id=\"11ec68f17bbmm\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec68f27bh9w\">net.ipv4.tcp_sack</p></td><td id=\"11ec68f37b2wt\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec8fe07bqy9\">启用有选择的应答（1表示启用），通过有选择地应答乱序接收到的报文来提高性能，让发送者只发送丢失的报文段，（对于广域网通信来说）这个选项应该启用，但是会增加对CPU的占用。</p></td></tr><tr id=\"11ec8fe67btbe\"><td id=\"11ec8fe77bb2s\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec8fe87beuk\">net.ipv4.tcp_timestamps</p></td><td id=\"11ec8fe97bamy\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec8fea7bsxa\">TCP时间戳（会在TCP包头增加12B），以一种比重发超时更精确的方法（参考<a class=\"\" target=\"_blank\" href=\"https://tools.ietf.org/html/rfc1323?spm=a2c9r.12641821.0.0.3cfd5e3bRGsNMw#page-28\">RFC 1323</a>）来启用对RTT的计算，为实现更好的性能应该启用这个选项。</p></td></tr><tr id=\"11ec8feb7bgjt\"><td id=\"11ec8fec7bxv6\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec8fed7b5w5\">net.ipv4.tcp_window_scaling</p></td><td id=\"11ec8fee7bluo\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec8fef7blv4\">启用RFC 1323（参考<a class=\"\" target=\"_blank\" href=\"https://tools.ietf.org/html/rfc1323?spm=a2c9r.12641821.0.0.3cfd5e3bRGsNMw#page-28\">RFC 1323</a>）定义的window scaling，若要支持超过64 KB的TCP窗口，必须启用该值（1表示启用），TCP窗口最大至1 GB，TCP连接双方都启用时才生效。</p></td></tr><tr id=\"11ec8ff07b4xu\"><td id=\"11ec8ff17bcya\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec8ff27bd3h\">net.ipv4.tcp_syncookies</p></td><td id=\"11ec8ff37bmf0\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec8ff47bfwy\"> 该参数表示是否打开TCP同步标签（<code data-tag=\"code\" class=\"code\">SYN_COOKIES</code>），内核必须开启并编译CONFIG_SYN_COOKIES，<code data-tag=\"code\" class=\"code\">SYN_COOKIES</code>可以防止一个套接字在有过多试图连接到达时，引起过载。</p><ul id=\"bac45942d1c7l\"><li id=\"bac45940d1c79\"><p id=\"b992de20d1mo6\">默认值0表示关闭。 </p></li><li id=\"bbcf1280d1whz\"><p id=\"bbce4f30d133m\">当该参数被设置为1，且<code data-tag=\"code\" class=\"code\">SYN_RECV</code>队列满了之后，内核会对SYN包的回复做一定的修改，即在响应的SYN+ACK包中，初始的序列号是由源IP+Port、目的IP+Port及时间这五个参数共同计算出一个值组成精心组装的TCP包。由于ACK包中确认的序列号并不是之前计算出的值，恶意攻击者无法响应或误判，而请求者会根据收到的SYN+ACK包做正确的响应。启用<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_syncookies</code>后，会忽略<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_syn_backlog</code>。</p></li></ul></td></tr><tr id=\"11ec8ff77bzn8\"><td id=\"11ec8ff87bav4\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec8ff97bprx\">net.ipv4.tcp_tw_reuse</p></td><td id=\"11ec8ffa7b916\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec8ffb7b8t1\">表示是否允许将处于TIME-WAIT状态的Socket（TIME-WAIT的端口）用于新的TCP连接。</p></td></tr><tr id=\"11ec8ffc7bo8h\"><td id=\"11ec8ffd7bwlq\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec8ffe7brxk\">net.ipv4.tcp_tw_recycle</p></td><td id=\"11ec8fff7bn1e\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec90007bq2p\">能够更快地回收TIME-WAIT套接字。</p></td></tr><tr id=\"11ec90017b9d0\"><td id=\"11ec90027bofi\" rowspan=\"1\" colspan=\"1\"><p id=\"11ec90037bq3i\">net.ipv4.tcp_fin_timeout</p></td><td id=\"11ecb6f07b3lk\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb6f17bvae\">对于本端断开的Socket连接，TCP保持在FIN-WAIT-2状态的时间（秒）。对端可能会断开连接或一直不结束连接或不可预料的进程死亡。</p></td></tr><tr id=\"11ecb6f27biy9\"><td id=\"11ecb6f37bt9z\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb6f47bm8u\">net.ipv4.ip_local_port_range</p></td><td id=\"11ecb6f57bop4\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb6f67bjhz\">表示TCP/UDP协议允许使用的本地端口号。</p></td></tr><tr id=\"11ecb6f77b4a8\"><td id=\"11ecb6f87bkxl\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb6f97bkp3\">net.ipv4.tcp_max_syn_backlog</p></td><td id=\"11ecb6fa7bvfm\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb6fb7b9za\">该参数决定了系统中处于<code data-tag=\"code\" class=\"code\">SYN_RECV</code>状态的TCP连接数量。</p><p id=\"ce9e70e0d13dp\"><code data-tag=\"code\" class=\"code\">SYN_RECV</code>状态指的是当系统收到SYN后，作为SYN+ACK响应后等待对方回复三次握手阶段中的最后一个ACK的阶段。对于还未获得对方确认的连接请求，可保存在队列中的最大数目。如果服务器经常出现过载，可以尝试增加这个数字。默认值大小会受实例内存的影响，默认值最大为2048。</p></td></tr><tr id=\"11ecb7017bbw5\"><td id=\"11ecb7027b5ia\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb7037bcej\">net.ipv4.tcp_westwood</p></td><td id=\"11ecb7047b6ok\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb7057bw5d\">启用发送者端的拥塞控制算法，它可以维护对吞吐量的评估，并试图对带宽的整体利用情况进行优化，对于WAN通信来说应该启用这个选项。</p></td></tr><tr id=\"11ecb7067bes1\"><td id=\"11ecb7077bmmp\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb7087bx8m\">net.ipv4.tcp_bic</p></td><td id=\"11ecb7097b462\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb70a7bhgm\">为快速长距离网络启用Binary Increase Congestion，这样可以更好地利用以GB速度进行操作的链接，对于WAN通信应该启用这个选项。</p></td></tr><tr id=\"11ecb70b7bltc\"><td id=\"11ecb70c7bhxu\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb70d7bw1q\">net.ipv4.tcp_max_tw_buckets</p></td><td id=\"11ecb70e7bscc\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb70f7bprd\">该参数设置系统的TIME_WAIT的数量，如果超过默认值则会被立即清除。tcp_max_tw_buckets默认值大小会受实例内存的影响，最大值为262144。</p></td></tr><tr id=\"11ecb7107bnt7\"><td id=\"11ecb7117bqlm\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb7127bskv\">net.ipv4.tcp_synack_retries</p></td><td id=\"11ecb7137b0bn\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecb7147blxb\">指明了处于SYN_RECV状态时重传SYN+ACK包的次数。</p></td></tr><tr id=\"11ecb7157b0tv\"><td id=\"11ecb7167bllk\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde007b77k\">net.ipv4.tcp_abort_on_overflow</p></td><td id=\"11ecde017btml\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde027bwp2\">设置该参数为1时，当系统在短时间内收到了大量的请求，而相关的应用程序未能处理时，就会发送Reset包直接终止这些链接。建议通过优化应用程序的效率来提高处理能力，而不是简单地Reset。默认值为0。</p></td></tr><tr id=\"11ecde037bt90\"><td id=\"11ecde047bzou\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde057bhed\">net.ipv4.route.max_size</p></td><td id=\"11ecde067bxh1\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde077b7xb\">内核所允许的最大路由数目。</p></td></tr><tr id=\"11ecde087b31a\"><td id=\"11ecde097b64o\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde0a7byoi\">net.ipv4.ip_forward</p></td><td id=\"11ecde0b7b1av\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde0c7bw5c\">接口间转发报文。</p></td></tr><tr id=\"11ecde0d7b1zm\"><td id=\"11ecde0e7bafw\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde0f7bag8\">net.ipv4.ip_default_ttl</p></td><td id=\"11ecde107bl01\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde117b71v\">报文可以经过的最大跳数。</p></td></tr><tr id=\"11ecde127bmkk\"><td id=\"11ecde137b187\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde147bspr\">net.netfilter.nf_conntrack_tcp_timeout_established</p></td><td id=\"11ecde157b49y\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde167b570\">在指定之间内，已经建立的连接如果没有活动，则通过iptables进行清除。</p></td></tr><tr id=\"11ecde177bl70\"><td id=\"11ecde187b0yw\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde197b4s7\">net.netfilter.nf_conntrack_max</p></td><td id=\"11ecde1a7bs1g\" rowspan=\"1\" colspan=\"1\"><p id=\"11ecde1b7bogm\">哈希表项最大值。</p></td></tr></tbody></table></section><section id=\"bfd03890b332f\" class=\"section\"><h2 data-spm-anchor-id=\"a2c9r.14518950.0.i0.71carExhrExhTb\" id=\"FPCEw\">相关文档</h2><ul id=\"11ecde1c7b57k\"><li id=\"11ecde1d7baik\"><p id=\"11ecde1e7bw5l\"><a class=\"from-extensions-error\" target=\"_blank\" href=\"http://man7.org/linux/man-pages/man2/listen.2.html\">Linux man-pages</a></p></li><li id=\"11ecde1f7bah7\"><p id=\"11ed05107bdgt\"><a class=\"from-extensions-error\" target=\"_blank\" href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/filesystems/proc.rst\">kernel/git/torvalds/linux.git_proc</a></p></li><li id=\"11ed05117b0fw\"><p id=\"11ed05127bpzd\"><a class=\"from-extensions-error\" target=\"_blank\" href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/networking/proc_net_tcp.rst\">kernel/git/torvalds/linux.git_proc_net_tcp</a></p></li><li id=\"11ed05137boxy\"><p id=\"11ed05147bjze\"><a class=\"from-extensions-error\" target=\"_blank\" href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/networking/ip-sysctl.rst\">kernel/git/torvalds/linux.git_ip-sysctl</a></p></li><li id=\"11ed05157bimv\"><p id=\"11ed05167btrd\"><a class=\"from-extensions-error\" target=\"_blank\" href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/networking/netfilter-sysctl.rst\">kernel/git/torvalds/linux.git_netfilter-sysctl</a></p></li><li id=\"11ed05177br21\"><p id=\"11ed05187buhn\"><a class=\"from-extensions-error\" target=\"_blank\" href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/networking/nf_conntrack-sysctl.rst\">kernel/git/torvalds/linux.git_nf_conntrack-sysctl</a></p></li></ul></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-a-service-cannot-be-manually-started-on-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows实例服务列表中无法手动启动服务，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例服务列表中无法手动启动服务，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-06 10:04:02</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"b5090590c1y2s\"><p data-tag=\"shortdesc\" id=\"b50f2013c1d96\" class=\"shortdesc\"><span style=\"color:rgb(24, 24, 24)\">本文介绍</span>Windows实例服务列表中无法手动启动服务<span style=\"color:rgb(24, 24, 24)\">的问题原因及解决方案。</span></p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"FzkRT\">问题描述</h2><p id=\"b50f2014c159d\">在Windows系统实例中，在服务器服务列表页面中无法手动启动指定服务，同时在命令行页面中，执行<code data-tag=\"codeph\" class=\"codeph\">net start</code>命令启动指定服务后，系统提示“服务正在启动或者停止中，请稍后片刻再试一次”。</p><h2 id=\"CeCnY\">解决方案</h2><ol id=\"b50f2015c1mis\"><li id=\"b50f2016c1to5\"><p id=\"b50f2017c1xas\">远程连接Windows实例。</p><p id=\"4e46cca0c1z7j\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"45056a21c1h82\"><p id=\"45056a20c1w61\">单击<b>开始</b>&gt;<b>运行</b>，输入<b>services.msc</b>，然后单击<b>确定</b>，进入服务列表页面。</p></li><li id=\"b50f4720c13q8\"><p id=\"b50f4721c1b74\">定位到指定服务，获取并记录服务名称。</p></li><li id=\"b50f4722c14e3\"><p id=\"b50f4723c1f8q\">进入CMD命令行页面，执行以下命令，获取服务的PID。 </p><pre data-tag=\"codeblock\" id=\"b5090591c1vuu\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sc queryex &lt;$Service_Name&gt;</code></pre><div type=\"note\" id=\"b50f4724c1szc\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"b50f4725c1kve\" class=\"p\">&lt;$Service_Name&gt;为上一步获取的服务名称。\n</p></div></div></li><li id=\"b50f4727c1ley\"><p id=\"b50f4728c1w87\">执行以下命令，终止该服务的进程。 </p><pre data-tag=\"codeblock\" id=\"b5090592c1n0y\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>taskkill /f /pid &lt;$PID&gt;</code></pre><div type=\"note\" id=\"b50f4729c1b6u\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"b50f472ac175p\" class=\"p\">&lt;$PID&gt;为上一步获取的PID。\n</p></div></div></li><li id=\"d7107200d44eb\"><p id=\"db0cf400d49bf\">重新启动指定服务。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-dotnet-framework-3-5-1-or-a-language-pack-cannot-be-installed-on-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows实例无法安装.NET Framework 3.5.1或语言包如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例无法安装.NET Framework 3.5.1或语言包如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-03 13:16:57</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main role=\"main\"><article role=\"article\" aria-labelledby=\"title_0q7_495_dr7\"><div class=\"body conbody\" data-tag=\"conbody\" id=\"conbody-02x-6e4-g1h\"><p id=\"shortdesc-s57-yh1-igq\" class=\"shortdesc\" data-tag=\"shortdesc\">本文介绍如何通过将更新源从WSUS（Windows Server Update Services）切换为Windows Update，解决无法安装.NET Framework 3.5.1或语言包的问题。</p><section class=\"section\" data-tag=\"section\" id=\"section-lx0-oqu-q9s\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-csu-pum-j1m\">问题描述</h2><ul class=\"ul\" data-tag=\"ul\" id=\"ul-5sj-8rf-snr\"><li class=\"li\" data-tag=\"li\" id=\"li-cxr-wxp-y02\">问题一：.NET Framework报错找不到源文件 <p class=\"p\" data-tag=\"p\" id=\"p-nwl-y2e-vjj\">在Windows Server 2012 R2、Windows Server 2016或Windows Server 2019系统中安装.NET Framework 3.5.1时，报如下图所示的错误。</p><img class=\"image break\" data-tag=\"image\" id=\"image-5g2-8ga-5k8\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4615886761/p45359.png\" width=\"600\" alt=\"找不到源文件\"></li><li class=\"li\" data-tag=\"li\" id=\"li-mx4-oa2-yxi\">问题二：无法安装语言包 <p class=\"p\" data-tag=\"p\" id=\"p-1yb-jhn-8xt\">在控制面板切换语言或者Windows Update中查询语言选项时，无法选择或者安装语言包。</p><img class=\"image break\" data-tag=\"image\" id=\"image-tx2-rgd-kzc\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4615886761/p45360.png\" width=\"600\" alt=\"无法安装语言包\"></li></ul></section><section class=\"section\" data-tag=\"section\" id=\"section-9nj-lea-umj\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-0n5-cuw-5g9\">问题原因</h2><p class=\"p\" data-tag=\"p\" id=\"p-aq8-w8i-rxr\">由于Windows实例默认采用WSUS获取更新源，导致.NET Framework和语言包安装文件缺失，所以上报找不到源文件或者无法安装语言包的相关错误。</p></section><section class=\"section\" data-tag=\"section\" id=\"section-qak-omw-4gg\"><h2 class=\"title sectiontitle\" data-tag=\"title\" id=\"title-c5e-w1w-3nt\">解决方案</h2><ol class=\"ol\" data-tag=\"ol\" id=\"ol-7b8-ddv-mej\"><li class=\"li\" data-tag=\"li\" id=\"li-aoa-kn4-fus\">远程连接Windows实例。<p class=\"p\" data-tag=\"p\" id=\"p-p3b-7iz-i7l\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key#task-2370976\">通过密码或密钥认证登录Windows实例</a>。</p></li><li class=\"li\" data-tag=\"li\" id=\"li-2mz-k2n-p3z\">打开CMD命令行窗口。</li><li class=\"li\" data-tag=\"li\" id=\"li-mz5-oiy-3r8\">输入<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-cpy-o5o-nho\">powershell</code>进入PowerShell交互界面。</li><li class=\"li\" data-tag=\"li\" id=\"li-z4t-97c-min\">运行以下命令，修改注册表将更新源设置为Windows Update。 <pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-okj-psd-3xs\"><code>Set-ItemProperty -Path 'HKLM:\\SOFTWARE\\Policies\\Microsoft\\Windows\\WindowsUpdate\\AU' -Name UseWUServer -Value 0\nRestart-Service -Name wuauserv</code></pre></li><li class=\"li\" data-tag=\"li\" id=\"li-ld2-xp7-wm2\">运行以下命令，通过PowerShell安装.NET Framework。 <pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-5rm-lz1-h0w\"><code>Install-WindowsFeature Net-Framework-Core</code></pre><div class=\"note note note-note\" data-tag=\"note\" id=\"note-qc3-uif-ejd\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note\"></i></div><div class=\"note-content\"><strong>说明</strong> 您也可以继续在Server Manager中安装.NET Framework，或者在控制面板中安装语言包。</div></div></li><li class=\"li\" data-tag=\"li\" id=\"li-v98-lrj-51j\"><strong>可选：</strong>运行以下命令，将更新源重新设置为WSUS。 <pre class=\"pre codeblock\" data-tag=\"codeblock\" id=\"codeblock-f4g-ra6-ge2\"><code>Set-ItemProperty -Path 'HKLM:\\SOFTWARE\\Policies\\Microsoft\\Windows\\WindowsUpdate\\AU' -Name UseWUServer -Value 1\nRestart-Service -Name wuauserv</code></pre></li></ol><div class=\"note note note-note\" data-tag=\"note\" id=\"note-3fc-nnm-a4h\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note\"></i></div><div class=\"note-content\"><strong>说明</strong> <ul class=\"ul\" data-tag=\"ul\" id=\"ul-t7j-2zv-jci\"><li class=\"li\" data-tag=\"li\" id=\"li-pi9-muv-iks\">Windows Server 2012与Windows Server 2016内存占用较高，安装其他应用程序使内存消耗更高，可能会导致内存不足引起安装.NET Framework失败，因此建议增加物理内存，如果是I/O优化实例，可以考虑<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-configure-the-virtual-memory-of-a-windows-instance#topic-2268778\">开启系统虚拟内存</a>。</li><li class=\"li\" data-tag=\"li\" id=\"li-u9p-rqf-zaa\">如果安装.NET Framework报错<code class=\"ph codeph\" data-tag=\"codeph\" id=\"codeph-xmp-pww-urt\">0x800f081f</code>，请检查公网网络是否正常。如果正常，可能是连接Windows Update服务器链路不稳定导致更新失败，建议更换时间段重试。</li></ul></div></div></section></div></article></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-errors-are-reported-when-i-update-a-windows-operating-system", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>更新Windows系统时提示错误，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>更新Windows系统时提示错误，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-20 16:38:31</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"116c0c80b1pgm\"><p data-tag=\"shortdesc\" id=\"116e7d87b1glu\" class=\"shortdesc\">本文介绍更新Windows系统时提示错误的原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h1 id=\"a4fe2450dfhwi\">提示“8024400A\"和\"80072EE2”错误</h1><h3 id=\"a2410020dfqg6\"><b>问题描述</b></h3><p id=\"116e7d88b17gp\">更新Windows系统时提示以下信息。</p><pre data-tag=\"codeblock\" id=\"116c0c81b13d0\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>8024400A\n80072EE2</code></pre><h3 id=\"tayMx\"><b>问题原因</b></h3><p id=\"116e7d89b1978\">在更新时遇到错误代码1：<code data-tag=\"code\" class=\"code\">8024400A</code> ，错误代码2：<code data-tag=\"code\" class=\"code\">80072EE2</code> ，这两个报错导致不能更新。可能原因如下：</p><ul id=\"116e7d8ab1vlr\"><li id=\"116e7d8bb1nri\"><p id=\"116e7d8cb1q8a\">第一个报错是由于更新服务器请求数过多，服务器访问繁忙导致。</p></li><li id=\"116e7d8db1bno\"><p id=\"116e7d8eb171r\">第二个报错是Windows更新服务器可能遇到异常多的更新请求。</p></li></ul><h3 id=\"EFTFF\"><b>解决方案</b></h3><p id=\"116ea49ab1pb8\">请您参考以下场景进行解决。</p><h4 data-tag=\"h3\" id=\"116ea49bb1zkz\" class=\"h3\"><b>针对</b>“8024400A\"<b>错误的</b>解决方案</h4><p id=\"116ea49cb1o77\">您可以尝试稍后再进行更新。</p><h4 data-tag=\"h3\" id=\"116ea49db1tax\" class=\"h3\"><b>针对</b>\"80072EE2”<b>错误的</b>解决方案</h4><p id=\"116ea49eb1zft\">您可以参考以下步骤操作。</p><ol id=\"116ea49fb1uy6\"><li id=\"116ea4a0b1bpi\"><p id=\"116ea4a1b1wdh\">关闭Windows更新服务。</p></li><li id=\"116ea4a2b196f\"><p id=\"116ecba0b13j2\">删除临时更新文件。</p></li><li id=\"116ecba1b1iia\"><p id=\"116ecba2b1zax\">打开更新服务，再次尝试更新。</p></li></ol><p id=\"d1527bb0b1mha\">更多信息，请参见<a class=\"\" target=\"_blank\" href=\"http://windows.microsoft.com/zh-cn/windows/windows-update-error-80070002#1TC=windows-7\">Windows 更新常见问题</a>。</p><h1 data-spm-anchor-id=\"a2c4g.41037.0.i1.1b2a5fcbDiPdbH\" jc=\"start\" id=\"bda50640dfkk1\" style=\"text-align:start\">提示“80070008或8007000e”错误</h1><h3 id=\"ba20e890dfjzz\"><b>问题描述</b></h3><p id=\"f47551b0b8fp5\">更新Windows系统时提示“80070008或8007000e”错误。以下几种为该问题常见的错误代码：</p><ul id=\"1f6c3361b882a\"><li id=\"1f6c3362b8k3i\"><p id=\"1f6c3363b8h01\">WindowsUpdate_80070008</p></li><li id=\"1f6c3364b8cmz\"><p id=\"1f6c3365b8w9g\">0x80070008</p></li><li id=\"1f6c3366b85c4\"><p id=\"1f6c3367b8g2b\">WindowsUpdate_8007000e</p></li><li id=\"1f6c3368b82ub\"><p id=\"1f6c3369b8gwl\">0x8007000e</p></li></ul><h3 id=\"f47551b1b87ap\"><b>问题原因</b></h3><p id=\"53f393e0b8xf2\">如果计算机在安装更新时内存耗尽，则可能会发生这些错误。</p><h3 id=\"AywdZ\"><b>解决方案</b></h3><p id=\"f47551b2b8aql\">更新Windows系统时提示“80070008或8007000e”错误，通常可以通过运行<a class=\"\" target=\"_blank\" href=\"http://go.microsoft.com/?linkid=9830262\">Windows 更新疑难解答</a>来修复，该工具可以自动查找并解决一些常见的Windows更新问题。</p><p id=\"f47551b3b8hmk\">如果Windows更新疑难解答无法修复该问题，请尝试以下操作。</p><ol id=\"f47551b4b8r0h\"><li id=\"f47551b5b8yqm\"><p id=\"f47551b6b8nq7\">关闭所有程序（包括后台中运行的程序），例如防火墙、反间谍软件、Web加速器、Internet安全或防病毒程序或者代理服务器，然后再次更新Windows系统。</p></li><li id=\"f47551b7b8xsz\"><p id=\"f47551b8b80zx\">关闭了防火墙、防病毒程序或其他安全程序，更新安装完成后请立刻打开这些程序。也可以重新启动关闭的其他任何程序。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/server-manager-is-collecting-inventory-data-the-wizard-will-be-available-after-data-collection-finishes", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows实例在添加角色和功能时提示“服务器管理器正在收集清单数据。在数据收集完成后，将可以使用向导”，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例在添加角色和功能时提示“服务器管理器正在收集清单数据。在数据收集完成后，将可以使用向导”，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-29 10:27:57</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"f62fd680b1cjc\"><p data-tag=\"shortdesc\" id=\"f63506a0b13tw\" class=\"shortdesc\">本文介绍Windows实例在添加角色和功能时有提示信息的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"f63506a1b1yzv\">问题描述</h2><p id=\"f63506a2b1zfn\">Windows Server 2012实例在服务器管理器里面添加角色和功能时一直提示以下信息。</p><pre data-tag=\"codeblock\" id=\"f62fd681b18pv\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>服务器管理器正在收集清单数据。在数据收集完成后，将可以使用向导</code></pre><h2 id=\"f6352db0b1r76\">问题原因</h2><p id=\"f6352db1b1yzk\">系统插件WMI（Windows Management Instrumentation）有问题，需要重置。</p><h2 id=\"f6352db2b1wlx\">解决方案</h2><ol id=\"64c4c9f2b1qh5\"><li id=\"64c4c9f0b1023\"><p id=\"631ebb11b17hp\">远程连接Windows实例。</p><p id=\"6e5f7000b1lf4\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"893036d1b1qi4\"><p id=\"8db74590b1bhq\">打开CMD命令行窗口。</p></li><li id=\"f9507011b1700\"><p id=\"f6357bd2b1w34\">在CMD命令行中输入以下命令行，重置WMI。</p><div type=\"important\" id=\"0d5a4a40b125e\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"0ecaa320b1fac\">以下操作有数据丢失风险，请务必先<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建快照</a>备份数据后再操作。</p></div></div><pre id=\"5kfxvc\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sc config winmgmt start= disabled\nnet stop winmgmt /y\n%systemdrive%\ncd %windir%\\system32\\wbem\nren repository repository-backup\nfor /f %s in ('dir /b *.dll') do regsvr32 /s %s\nsc config winmgmt start= Auto\nnet start winmgmt\ndir /b *.mof *.mfl | findstr /v /i uninstall &gt; moflist.txt &amp; for /F %s in (moflist.txt) do mofcomp %s</code></pre></li></ol><p id=\"1e658a70b10bi\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-environment-variables-that-are-configured-for-a-windows-server-instance-do-not-take-effect", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows Server配置环境变量不生效如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows Server配置环境变量不生效如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-29 10:23:14</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"1cb35c50b88w6\"><p data-tag=\"shortdesc\" id=\"1cb8b387b85ps\" class=\"shortdesc\">本文介绍Windows Server配置环境变量不生效的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"1cb8da90b8seg\">问题描述</h2><p id=\"1cb8da91b80ry\">Windows Server实例配置在PATH中的环境变量不生效，具体有以下特征：</p><ul id=\"1cb8da92b8sh2\"><li id=\"1cb8da93b84l2\"><p id=\"1cb8da94b878z\">在cmd中执行命令<code data-tag=\"code\" class=\"code\">ping</code><span style=\"color:rgb(24, 24, 24)\">、</span><code data-tag=\"code\" class=\"code\"><span style=\"color:rgb(24, 24, 24)\">ipconfig</span></code>提示“不是内部或外部命令，也不是可运行的程序或批处理文件”。</p></li><li id=\"1cb8da97b8d39\"><p id=\"1cb8da98b84av\">检查PATH环境变量和正常主机无差异。</p></li><li id=\"1cb901a0b8sxl\"><p id=\"1cb901a1b8vto\">在<span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">C:\\Windows\\System32</span>目录中查看PING.EXE等文件都存在。</p></li><li id=\"1cb901a4b87oz\"><p id=\"1cb901a5b8ue6\">实际测试中发现在cmd中命令写成PING.EXE可以执行，去掉扩展名就报错。</p></li></ul><h2 id=\"1cb901a7b8p2k\">问题原因</h2><p id=\"1cb901a8b88qv\">从问题现象看是和扩展名有关系，正常情况不输入扩展名可以执行是因为系统中有PATHEXT环境变量，这里面列出的扩展名在cmd中执行的时候就不用再写扩展名。检查PATHEXT变量，缺少了.EXE扩展名。</p><h2 id=\"1cb901a9b8udb\">解决方案</h2><p id=\"1cb928b9b81vw\">请您参照以下步骤进行操作。</p><ol id=\"1cb928bab8wvy\"><li id=\"1cb94fc0b80ec\"><p id=\"1cb94fc1b86w6\">远程连接Windows实例。</p><p id=\"2ffde8b0b878z\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"2aa5ce51b8wlr\"><p id=\"2aa5ce50b8osu\">右键单击<b>计算机</b>，选择<b>属性</b>，然后再单击<b>高级系统设置。</b></p></li><li id=\"1cb94fc2b8ikx\"><p id=\"1cb94fc3b8upi\">单击打开<b>环境变量</b>，在<b>系统变量</b>下的<b>PATHEXT</b>变量值中添加<span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">.EXE</span>。</p><div type=\"note\" id=\"53914510b8jav\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"5569ae90b8uba\">修改环境变量后，需要重新打开cmd才生效。</p></div></div><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1451277761/p519797.png\" width=\"600\" class=\"image break\"></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/there-was-a-0-update-or-install-windows-instance-role-x80073712-error-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows实例更新或安装角色时出现“0x80073712（组件存储已损坏）”错误，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例更新或安装角色时出现“0x80073712（组件存储已损坏）”错误，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-27 16:53:05</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"c1dcaff0b1rm2\"><p data-tag=\"shortdesc\" id=\"c1e05978b1qmt\" class=\"shortdesc\">本文介绍Windows实例更新或安装角色时出现“0x80073712（组件存储已损坏）”错误的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"39125539\">问题描述</h2><p id=\"c1e05979b15vx\">在Windows Server 2012系统的实例中安装更新的时候，出现“0x80073712”错误。使用服务管理器安装新角色的时候，如下图所示，出现“0x80073712（组件存储已损坏）”错误。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2818886761/p518993.png\" width=\"500\" class=\"image break\"><h2 id=\"hYhtD\">问题原因</h2><p id=\"c1e0597cb16bg\">该错误一般是由于Windows组件存储不一致问题导致的。</p><h2 id=\"raDDd\">解决方案</h2><p id=\"c1e0597eb1c12\">可以尝试通过如下方式排查分析。</p><ol id=\"892237a0b1qb6\"><li id=\"892237a1b16ge\"><p id=\"892237a2b1bj6\">远程连接Windows实例。</p><p id=\"892237a3b1qku\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"892237a4b1ocv\"><p id=\"892237a5b1sz1\">打开CMD命令行窗口。</p></li><li id=\"c1e08081b1mgt\"><p id=\"c1e08082b1tas\">在CMD命令行中输入以下命令，且在每项命令后按<b>Enter</b>键。 </p><pre data-tag=\"codeblock\" id=\"c1dcaff1b1gyq\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>DISM.exe /Online /Cleanup-image /Scanhealth\nDISM.exe /Online /Cleanup-image /Restorehealth</code></pre><p id=\"c1e08083b1u29\"> <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2818886761/p518994.png\" width=\"500\" class=\"image break\"></p><div type=\"note\" id=\"c1e08084b1sdp\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"c1e08085b1bry\" class=\"p\"> 根据系统环境不同，该操作可能会比较耗时（10分钟之内）。\n</p></div></div></li><li id=\"c1e08087b1m2k\"><p id=\"c1e08088b1kji\">再次运行Windows更新或安装所需的相关角色服务。</p></li><li id=\"c1e0808bb1lpu\"><p id=\"c1e0808cb19mw\">如果仍然失败，请参考<a class=\"\" href=\"/zh/ecs/support/what-do-i-do-if-windows-updates-cannot-be-installed-on-an-instance\">Windows Update补丁更新失败的处理</a>进行处理。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-8000ffff-windows-update-encountered-an-unknown-error-error-message-appears-when-i-install-windows-updates-on-a-windows-server-2008-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows 2008实例更新补丁出现“8000FFFFwindows update 遇到未知的错误”报错如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows 2008实例更新补丁出现“8000FFFFwindows update 遇到未知的错误”报错如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-28 09:42:58</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"a5bf9b1075743\"><p data-tag=\"shortdesc\" id=\"a5c7634175z2e\" class=\"shortdesc\">本文介绍Windows 2008实例更新补丁出现“8000FFFFwindows update 遇到未知的错误”的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"sQcmN\">问题描述</h2><p id=\"a5c78a51751i3\">Windows 2008实例更新补丁时出现“8000FFFFwindows update 遇到未知的错误”报错，如下图所示。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5370487761/p518197.png\" class=\"image break\"><h2 id=\"rAsFx\">问题原因</h2><p id=\"a5c78a5375f0a\">由于系统的C盘没有设置Users权限，导致系统无法正常安装更新的补丁。</p><h2 id=\"SwiET\">解决方案</h2><h3 data-tag=\"h3\" id=\"a5c78a5575ygb\" class=\"h3\"><b>方案一</b></h3><ol id=\"a5c78a5675x3m\"><li id=\"a5c78a57755sm\"><p id=\"a5c78a58750z1\">远程连接Windows实例。</p><p id=\"a33806d0b9b9g\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"a5c78a5975exs\"><p id=\"a5c78a5a751hi\">进入<b>我的电脑</b>，右键单击C盘，单击<b data-tag=\"uicontrol\" id=\"dd965930b93q1\" class=\"uicontrol\">属性</b><b> </b>&gt; <b data-tag=\"uicontrol\" id=\"df9f96b0b962g\" class=\"uicontrol\">安全</b><b> </b>&gt; <b data-tag=\"uicontrol\" id=\"e14382b0b9a74\" class=\"uicontrol\">编辑</b><b> </b>&gt; <b data-tag=\"uicontrol\" id=\"e29cf830b9upf\" class=\"uicontrol\">添加</b><b> </b>&gt; <b data-tag=\"uicontrol\" id=\"e3f2c430b9btn\" class=\"uicontrol\">高级</b><b> </b>&gt; <b data-tag=\"uicontrol\" id=\"e54b0130b91d5\" class=\"uicontrol\">立即查找</b>，选择<b data-tag=\"uicontrol\" id=\"e6c56c30b91ay\" class=\"uicontrol\">Users</b>，赋予<b data-tag=\"uicontrol\" id=\"edea0930b95jp\" class=\"uicontrol\">读取和执行</b>、<b data-tag=\"uicontrol\" id=\"f12202b0b9vks\" class=\"uicontrol\">列出文件夹目录</b>和<b data-tag=\"uicontrol\" id=\"f40aa3b0b9x3m\" class=\"uicontrol\">读取</b>的Users权限，然后单击<b data-tag=\"uicontrol\" id=\"0370e670b9ner\" class=\"uicontrol\">确定</b>。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5370487761/p518198.png\" class=\"image break\"></p></li><li id=\"a5c78a5b75dwk\"><p id=\"a5c7b16075z2o\">重新更新补丁。</p></li><li id=\"a5c7b161755i6\"><p id=\"a5c7b16275zwi\">删除已添加的Users权限。</p><p id=\"eca14aa0b9clo\">更新补丁完成后，考虑系统的安全性，请删除本方案添加的Users权限。</p></li></ol><h3 data-tag=\"h3\" id=\"a5c7b16375b5p\" class=\"h3\"><b>方案二</b></h3><p id=\"a5c7b164759h5\">如果方案一无法解决问题，请参考以下操作步骤。</p><ol id=\"a5c7b16575zq1\"><li id=\"a5c7b16675t4q\"><p id=\"a5c7b16775vf8\">远程连接Windows实例。</p><p id=\"20061992b9ogq\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"a5c7b16875auf\"><p id=\"a5c7b16975e8s\">右键单击<b data-tag=\"uicontrol\" id=\"2378d220b93bj\" class=\"uicontrol\">开始</b><b> </b>&gt; <b data-tag=\"uicontrol\" id=\"24d247a0b9w9i\" class=\"uicontrol\">运行</b>，输入<code data-tag=\"code\" class=\"code\">cmd</code>，进入命令行窗口。</p></li><li id=\"a5c7b16a75ur7\"><p id=\"a5c7b16b75ge0\">依次执行以下命令，停止系统的自动更新和BITS服务。 </p><pre id=\"a5c2f670756dn\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>net stop wuauserv\nnet stop bits</code></pre><p id=\"a5c7b16c75man\"> 系统显示类似如下。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5370487761/p518199.png\" class=\"image break\"></li><li id=\"a5c7b16d75428\"><p id=\"a5c7d87075hhl\">删除系统中的<code data-tag=\"code\" class=\"code\">C:\\Windows\\SoftwareDistribution</code>文件夹。</p></li><li id=\"a5c7d871756ac\"><p id=\"a5c7d87275k88\">再次进入命令行窗口，依次执行以下命令，启动自动更新和BITS服务。 \n</p><div type=\"note\" id=\"a5c7d87375nuf\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"a5c7d87475wbd\">自动更新和BITS服务运行后，系统会自动创建<code data-tag=\"code\" class=\"code\">C:\\Windows\\SoftwareDistribution</code>文件夹。 </p></div></div><pre id=\"a5c2f67175m5q\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>net start wuauserv\nnet start bits</code></pre></li><li id=\"a5c7d87775qgu\"><p id=\"a5c7d87875zld\">执行以下命令，停止Cryptographic服务。 </p><pre id=\"a5c2f672753a6\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>net stop cryptsvc</code></pre></li><li id=\"a5c7d87a75u88\"><p id=\"a5c7d87b758x7\">将<code data-tag=\"code\" class=\"code\">C:\\windows\\System32\\catroot2</code>文件夹重命名为<code data-tag=\"code\" class=\"code\">C:\\windows\\System32\\catroot2.bak</code>。</p></li><li id=\"a5c7d87c752en\"><p id=\"a5c7d87d758nj\">当<code data-tag=\"code\" class=\"code\">C:\\Windows\\SoftwareDistribution</code>文件夹生成后，做自动更新检测。</p></li><li id=\"a5c7d87e7514u\"><p id=\"a5c7d87f75akd\">再次进入命令行窗口，执行以下命令。 </p><pre id=\"a5c2f67375ngr\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>wuauclt.exe /resetauthorization /detectnow</code></pre></li><li id=\"a5c7ff8075cx7\"><p id=\"a5c7ff8175hwx\">约等待15分钟后，确认系统已检测到更新。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-windows-operating-system-of-an-instance-cannot-be-activated-because-the-file-type-of-slmgr-vbs-is-changed", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>slmgr.vbs文件类型变化导致无法激活Windows系统如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>slmgr.vbs文件类型变化导致无法激活Windows系统如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-28 09:42:04</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"c1a219a0b9tr7\"><p data-tag=\"shortdesc\" id=\"c1a65f60b9hhs\" class=\"shortdesc\">本文介绍slmgr.vbs文件类型变化导致无法激活Windows系统问题的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"xxMYM\" data-spm-anchor-id=\"a2c9r.12641768.0.i0.69e80KZy0KZyws\">问题描述</h2><p id=\"c1a65f61b9a7s\">Windows系统中无法运行slmgr.vbs文件，且slmgr.vbs文件类型发生改变，由VBScript改变为VBS，导致无法激活系统。如下图所示，右侧的文件类型为正常情况。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9968608761/p519716.png\" width=\"600\" class=\"image break\"><h2 id=\"xSmsZ\">问题原因</h2><p id=\"c1a65f64b9w4h\"> 一般是由于使用TXT文本编辑器编辑过<code data-tag=\"codeph\" class=\"codeph\">.vbs</code>后缀文件导致出现该问题。</p><h2 id=\"DKdxG\">解决方案</h2><ol id=\"c1a65f66b9e47\"><li id=\"c1a65f67b9x6h\"><p id=\"c1a65f68b9km9\">远程连接Windows实例。</p><p id=\"a33806d0b9b9g\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"ac560601b9z12\"><p id=\"ac560600b9f6l\">单击键盘的<b>Win</b> + <b>R</b>键，输入<b>regedit</b>，然后单击<b>确定</b>，打开注册表编辑器。</p></li><li id=\"c1a65f69b98kh\"><p id=\"c1a65f6ab90pt\">查找并单击 <b>.vbs</b>，右键单击<b>默认</b>，再单击<b>修改</b>，将txtfile文件类型修改为VBSFile文件类型。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9968608761/p519717.png\" width=\"600\" class=\"image break\"></p></li></ol><p id=\"c1a65f6bb9v54\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-windows-operating-system-of-an-instance-cannot-be-activated-due-to-corrupted-instance-components", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows系统组件损坏导致系统激活失败如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows系统组件损坏导致系统激活失败如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-06 10:05:45</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"394c6dc0b8mo1\"><p data-tag=\"shortdesc\" id=\"394f53f7b8ccj\" class=\"shortdesc\">本文介绍Windows系统组件损坏导致系统激活失败的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"394f53f8b8ojm\">Windows系统启动后，桌面背景为黑色，右下角出现“【此Windows副本不是正版】激活失败”提示。参考<a class=\"\" href=\"/zh/ecs/how-to-use-the-kms-domain-name-to-activate-a-windows-instance-in-a-vpc\">如何使用KMS域名激活VPC网络中的Windows实例</a>步骤进行手工激活时，出现如下报错。</p><pre data-tag=\"codeblock\" id=\"394c6dc1b8okq\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>在运行Microsoft Windows 非核心版本的计算机上，运行\"lui.exe 0x2a 0x80070003\"以显示错误文本。\n错误： 0x80070003</code></pre><p id=\"394f53f9b8ynf\">具体报错如下图所示。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0030050861/p518401.png\" alt=\"6.png\" width=\"600\" class=\"image break\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"394f53fbb82m7\">Windows系统的ECS实例组件损坏，导致系统激活失败。</p><h2 id=\"AywdZ\">解决方案</h2><ol id=\"394f53fcb88lf\"><li id=\"394f7b00b88lr\"><p id=\"394f7b01b8wh6\">远程连接ECS实例。</p><p id=\"9a48eb80b8bwi\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"962188f1b8dyj\"><p id=\"962188f0b829s\">进入CMD命令窗口，执行如下命令，尝试修复Windows组件。 </p><pre data-tag=\"codeblock\" id=\"394c6dc2b8k66\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>sfc /scannow</code></pre><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9480667761/p518402.png\" alt=\"11.png\" width=\"500\" class=\"image break\"></li><li id=\"394f7b03b8k4i\"><p id=\"394f7b04b8raq\">如果修复失败，且创建了快照，可尝试通过<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/roll-back-a-disk-by-using-a-snapshot\">使用快照回滚云盘</a>方式将系统回滚到正常激活状态。 </p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-instance-of-terminal-server-configuration-defect-in-can-t-remote-login", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows实例的终端服务器配置异常导致无法远程登录如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例的终端服务器配置异常导致无法远程登录如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-27 14:02:33</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"ae1cb3b0b9drt\"><p data-tag=\"shortdesc\" id=\"ae228012b988u\" class=\"shortdesc\">本文介绍Windows实例的终端服务器配置异常导致无法远程登录的解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"ae228013b9ffy\">在使用远程桌面登录Windows实例时，出现如下图所示的错误，无法远程登录实例。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6270487761/p518737.png\" alt=\"11.png\" class=\"image break\"><h2 id=\"4rM4I\">问题原因</h2><p id=\"ae228016b9xpq\">该问题一般是由于在服务器上安装配置了终端服务器，但是没有配置有效的访问授权。</p><h2 id=\"AywdZ\">解决方案</h2><h3 data-tag=\"h3\" id=\"ae22a720b9yz6\" class=\"h3\"><b>方案一</b></h3><p id=\"ae22a721b9kd1\">注册有效的终端服务器访问授权，并进行相应的访问授权配置。相关配置方法请参见<a class=\"\" target=\"_blank\" href=\"https://activate.microsoft.com/Faq.aspx?locale=zh-CN&amp;showNav=true\">终端服务器授权</a>。</p><h3 data-tag=\"h3\" id=\"ae22a723b9sm9\" class=\"h3\"><b>方案二</b></h3><p id=\"ae22a724b9852\">删除终端服务器角色配置，恢复默认的两个远程访问授权。本文以Windows Server 2008系统为例进行示例操作。</p><div type=\"note\" id=\"31d3a810b9pgo\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"335761e0b9671\">微软默认为Windows系统提供了2个免费的远程桌面访问授权，即同时允许最多两个用户同时远程访问服务器。</p></div></div><ol id=\"ae22ce32b9es9\"><li id=\"ae22ce33b9czt\"><p id=\"ae22ce34b910c\">依次选择<b>开始</b> &gt; <b>管理工具</b> &gt; <b>服务器管理器</b>，打开服务管理器。</p></li><li id=\"ae22ce35b9kp8\"><p id=\"ae22ce36b9sny\">右键单击<b>服务器管理</b>，单击<b>删除角色</b>。</p></li><li id=\"19ddedb1b91xx\"><p id=\"19ddedb0b9woi\">选择<b>服务器角色</b>后，取消选中<b>远程桌面服务</b>，然后单击<b>下一步</b>，删除即可。 </p><img id=\"043206d0b9koq\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7270487761/p576816.png\" alt=\"image\" placement=\"break\" width=\"600\" class=\"image break\"></li><li id=\"27e6ea60b9suq\"><p id=\"2a6f1be0b9g4k\">重启实例使配置生效。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-network-interfaces-are-missing-from-a-window-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>登录Windows实例内部发现网卡丢失如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>登录Windows实例内部发现网卡丢失如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-28 09:41:34</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"5772cd70b9duk\"><p data-tag=\"shortdesc\" id=\"5776ec25b9c1c\" class=\"shortdesc\">本文介绍登录Windows实例内部发现网卡丢失的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"5776ec26b99g9\">问题描述</h2><p id=\"5776ec27b9yl1\">Windows实例网络不通，使用VNC连接Windows实例，在更改适配器设置中没有发现对应的网卡。查看设备管理，发现驱动已正常安装，但是在终端中使用<code data-tag=\"codeph\" class=\"codeph\">ipconfig</code>命令查看网卡信息时，存在对应的网卡信息。</p><h2 id=\"5776ec28b9ho5\">解决方案</h2><ol id=\"ef9e0882b912p\"><li id=\"ef9e0880b9ck8\"><p id=\"5776ec29b9av7\">远程连接Windows实例。</p><p id=\"a33806d0b9b9g\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"f0c9b741b9wtk\"><p id=\"f0c9b740b99nh\">执行以下命令，获取对应的网卡名称、网卡对应的IPv4地址及子网掩码。</p><pre id=\"d3blhu\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>ipconfig</code></pre></li><li id=\"fd540331b9nbf\"><p id=\"edadf850b9puk\">执行以下命令，手动添加网卡。</p><pre height=\"43.20138931274414\" id=\"ku7cqd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netsh interface ip set address name=\"&lt;$Name&gt;\" source=static addr=&lt;$IP&gt; mask=&lt;$Mask&gt;</code></pre><div type=\"note\" id=\"3abe0ef1b9wa4\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"3d012120b97b7\"><li id=\"3d012121b95np\"><p id=\"3d012122b98ig\">&lt;$Name&gt;为<code data-tag=\"codeph\" class=\"codeph\">ipconfig</code>命令显示的网卡名称。</p></li><li id=\"3d012123b9wje\"><p id=\"3d012124b928t\">&lt;$IP&gt;为<code data-tag=\"codeph\" class=\"codeph\">ipconfig</code>命令显示的IPv4地址。</p></li><li id=\"3d012125b90td\"><p id=\"3d012126b9u5v\">&lt;$Mask&gt;为<code data-tag=\"codeph\" class=\"codeph\">ipconfig</code>命令显示的子网掩码。</p></li></ul></div></div></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-ip-address-of-a-windows-instance-is-unexpectedly-modified", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows系统的IP地址被异常修改如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows系统的IP地址被异常修改如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-08 09:50:25</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"2dcafcc0b7op4\"><p data-tag=\"shortdesc\" id=\"2dd07b03b7mjp\" class=\"shortdesc\">本文<span style=\"color:rgb(24, 24, 24)\">介绍Windows系统</span>的IP地址被异常修改的原因及解决方案<span style=\"color:rgb(24, 24, 24)\">。</span></p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"2dd07b04b70ez\">用户发现Windows系统的IP地址被异常修改，例如静态地址变为动态获取地址，或者静态地址被设置为别的IP地址。</p><h2 id=\"4rM4I\">问题原因</h2><p id=\"2dd07b06b77z3\">在某些情况下，可能导致IP地址丢失的原因如下所示。</p><ul id=\"2dd07b07b7y8v\"><li id=\"2dd07b08b7dju\"><p id=\"2dd07b09b7pbd\">杀毒软件或者安全防护软件的影响。</p></li><li id=\"2dd0a210b7rf2\"><p id=\"2dd0a211b7tjo\">人为的误修改操作。</p></li><li id=\"2dd0a212b7ui6\"><p id=\"2dd0a213b7cke\">第三方软件异常修改IP地址配置。</p></li><li id=\"2dd0a214b7uho\"><p id=\"2dd0a215b7j3b\">病毒的影响。</p></li><li id=\"2dd0a216b7f9e\"><p id=\"2dd0a217b7ong\">操作系统注册表损坏。 </p></li></ul><h2 id=\"AywdZ\">解决方案</h2><ol id=\"2dd0a219b7c4r\"><li id=\"2dd0a21ab79u6\"><p id=\"2dd0a21bb7uo7\">Windows系统的IP地址的配置存储在<span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Tcpip\\Parameters\\Interfaces</span>注册表中对应网卡的GUID对应值，因此可以在配置中确认是哪种现象。</p><p id=\"46ae1270b7qi5\"><span data-tag=\"ph\" id=\"ebce2140bcl23\" props=\"china\" data-cond-props=\"china\" class=\"ph\">如下图所示，Interface中的<code data-tag=\"code\" class=\"code\">{7f9fdbaf-2b18-4662-8f7f-0c319faa0192}</code>对应本地的一块虚拟网卡，该网卡配置了静态IP地址为192.X.X.1 , 该网卡没有配置DNS地址，所以NameServer对应值为空。 </span><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4174567761/p518397.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></p></li><li id=\"2dd0c920b7gzm\"><p id=\"2dd0c921b79wu\">为了定位问题原因，可以通过启用组策略的注册表进行访问审核，以及在<span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Tcpip\\Parameters\\Interfaces</span>中添加审核Everyone的SetValue以及Delete行为来定位是哪个应用程序的原因。</p></li><li id=\"2dd0c923b7mfh\"><p id=\"2dd0c924b7na9\">在<span style=\"color:rgb(24, 24, 24);background-color:rgba(0, 0, 0, 0.04)\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Tcpip\\Parameters\\Interfaces</span>上右键选择<b>权限</b>，开启审核该键值和其下所有子键值（This key and subkeys）， 添加审核Everyone的SetValue以及Delete行为。<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4174567761/p518398.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></p></li><li id=\"2dd0c926b7rx0\"><p id=\"2dd0c927b7inj\">开启组策略的注册表审核。</p><p id=\"da081660b7dj9\">以管理员身份登录系统，在运行框中输入<b>gpedit.msc</b>，然后单击<b>确定</b>。</p></li><li id=\"2dd0c928b7eu1\"><p id=\"2dd0c929b7ooa\">依次选择<b>计算机配置</b> &gt; <b>Windows设置</b> &gt; <b>安全设置</b> &gt; <b>高级审核策略配置</b> &gt; <b>系统审核策略 - 本地组策略对象</b> &gt; <b>对象访问</b>。然后右键选择<b>审核注册表</b>，并选中<b>成功</b>和<b>失败</b>。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4174567761/p518399.png\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></p></li><li id=\"2dd0c92ab705n\"><p id=\"2dd0c92bb71qh\">查看改动注册表的问题。</p><p id=\"dc717540b74ao\">在问题再次发生后，在运行框中输入<b>eventvwr</b>，然后单击<b>确定</b>，打开事件查看器，依次选择<b>Windows 日志</b> &gt; <b>安全</b>，可以发现<b>Microsoft Windows 安全审核</b>存在的修改了注册表值相关日志，根据日志确认问题并解决。<span data-tag=\"ph\" id=\"afea8e70bcgk0\" props=\"china\" data-cond-props=\"china\" class=\"ph\">如下图所示。</span></p><p id=\"df57a540b72po\"> <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4174567761/p518400.png\" width=\"500\" props=\"china\" data-cond-props=\"china\" class=\"image break\"></p></li></ol></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-a-large-number-of-small-files-in-a-windows-ntfs-file-system-cause-space-statistic-exceptions", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows NTFS文件系统中大量小文件导致空间统计异常如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows NTFS文件系统中大量小文件导致空间统计异常如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-08 09:52:36</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"d0759130b89ug\"><p data-tag=\"shortdesc\" id=\"d07b5d97b8ijw\" class=\"shortdesc\">本文介绍Windows NTFS文件系统中存在大量小文件导致空间统计异常的问题原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><section id=\"ff120570bcybr\" class=\"section\"><h2 id=\"98f5e270bcukk\"><b>大量小于1 KB文件占用空间问题</b></h2><h3 id=\"b5f967c0bcr9h\"><b>问题描述</b></h3><p id=\"c4cf0341bcypa\">如下图所示，Windows系统中从文件统计看占用磁盘空间1.56 MB，共计409,600个小文件，每个文件包含几个字符，容量大约为几个字节，但磁盘显示使用空间已经占用594 MB，两处空间大小统计相差较大。</p><img title=\"image.png\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8406567761/p519584.png\" alt=\"image.png\" width=\"600\" class=\"image break\"><h3 id=\"ca45f040bcjkk\"><b>问题原因</b></h3><p id=\"dac89f81bcaf9\">该情况为NTFS文件系统中NFT占用导致，与NTFS文件系统中的文件存储方式有关。NTFS文件系统格式化后简单的结构如下图所示。</p><p id=\"dac89f82bc30i\"><img title=\"image.png\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8406567761/p519586.png\" alt=\"image.png\" width=\"200\" class=\"image break\"> </p><p id=\"dac89f84bc8n4\">其中BOOT中存放文件系统基础信息，如簇大小等。NTFS的文件信息都存放在Master File Table（MFT）中，每个MFT的记录是1 KB大小且固定不变。每个记录对应一个文件，或者对应其他文件系统对象。记录格式为：记录头+属性1+属性2+...+属性n，属性里包括文件名、长度、修改时间等等。如果文件信息足够小，那么1 KB的记录是用不满的，剩下的部分就可以放文件内容。其中，当文件足够小的时候，DATA里放的就是文件内容，当文件足够大的时候DATA放的是指针，指向另外一个区域保存更大的数据。针对此问题，409,600个文件要消耗409,600个MFT记录，共计消耗容量400 MB。此外，NTFS文件系统日志和位图等也需要消耗空间，共计消耗594 MB容量。此情况也可以通过执行<code data-tag=\"code\" class=\"code\">chkdsk d:</code>命令获取相关系统占用信息，此问题执行<code data-tag=\"code\" class=\"code\">chkdsk d:</code>命令后详细信息如下图所示。</p><p id=\"dac89f85bc8wu\"><img title=\"image.png\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8406567761/p519587.png\" alt=\"image.png\" class=\"image break\"> </p><p id=\"dac89f87bcrua\">或者使用WinHex程序获取更详细的系统占用，下载WinHex后运行，后续使用<code data-tag=\"code\" class=\"code\">Tools-Open Disk</code>命令打开需要分析的磁盘，获取详细信息。如图所示，MFT占用了400 MB空间，LogFile占用了64 MB空间，BitMap占用了3.1 MB空间。 <img title=\"image.png\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8406567761/p519588.png\" alt=\"image.png\" width=\"800\" class=\"image break\"></p><h3 id=\"e1080ca0bcgim\"><b>解决方案</b></h3><p id=\"f811b950bcdye\">针对MFT中已经分配的空间，默认删除文件会被标记为空，但不会自动回收，提升再次创建文件时的效率。如果确实需要释放，一般需要第三方磁盘清理或整理工具进行，分区容量不大时，也可以创建大文件占用空间，此时系统会自动释放已经删除的MFT空间。针对此类情况，也建议针对小文件进行定期压缩备份，降低MFT占用的空间，或从业务逻辑上减少大量小文件使用。</p></section><section id=\"016b5ec0bcidi\" class=\"section\"><h2 id=\"06343170bcrt7\"><b>大量小文件但大于1 KB文件占用空间问题</b></h2><h3 id=\"093ae1c0bcr92\"><b>问题描述</b></h3><p id=\"10d06901bcoe4\">如下图所示，共计409,600个小文件，文件本身大小为1 KB，实际文件容量为400 MB，但占用空间为1.56 GB。</p><img title=\"image.png\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9406567761/p519585.png\" alt=\"image.png\" width=\"500\" class=\"image break\"><h3 id=\"1637c5a0bcutl\"><b>问题原因</b></h3><p id=\"24dcdb40bcywi\">针对NTFS文件系统中默认文件的分配单元以簇的方式进行分配管理，默认最小的簇大小为4 KB，当文件小于4 KB或剩余分配不足4 KB时，实际分配仍旧为一个簇，即4 KB大小，则会导致占用磁盘空间较大。 </p><h3 id=\"191b5d90bck8g\"><b>解决方案</b></h3><p id=\"2cd14b61bc61d\">如果业务中确实有大量小于4 KB文件或大量小文件存储，也可以定期压缩备份减少磁盘占用，或者当小文件有固定大小时，可以在磁盘格式化时手工指定更小的簇大小，用以避免空间浪费的情况。指定簇大小可以在格式化过程中选择合适的分配单元大小，其中默认配置大小为 4,096字节，如下图所示。</p><p id=\"2cd14b62bc9sk\"><img title=\"image.png\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8406567761/p519589.png\" alt=\"image.png\" class=\"image break\"> </p><div type=\"important\" id=\"2cd14b64bc54q\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"2cd14b65bcoeg\">格式化磁盘为危险操作，请提前对磁盘进行快照备份，避免数据丢失。快照备份方法请参考<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建快照</a>。</p></div></div></section><h2 id=\"62oAe\">相关文档</h2><p id=\"d07bf9d4b8r9d\">如何定位并更正NTFS文件系统中的磁盘问题请参见<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://support.microsoft.com/en-hk/help/814594/how-to-locate-and-correct-disk-space-problems-on-ntfs-volumes?spm=a2c9r.12641768.0.0.25ea3xwt3xwth1\">参考文档</a>。 </p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-server-2008-r2-termdd-blue-hold-problems-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows Server 2008 R2出现termdd蓝屏问题，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows Server 2008 R2出现termdd蓝屏问题，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-28 14:03:42</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"main-2328743\"><p id=\"985a63e8e4mlr\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍Windows Server 2008 R2出现<code data-tag=\"code\" class=\"code\">termdd</code>蓝屏问题的原因及解决方案。</p><div data-tag=\"body\" class=\"body\"><section id=\"a208b900e45nw\" class=\"section\"><h2 id=\"hFixB\" data-spm-anchor-id=\"a2c9r.14518950.0.i2.50a9punrpunrt7\" jc=\"start\" style=\"text-align:start\">问题描述</h2><p id=\"b1b3ccf0e4qrl\">Windows Server 2008 R2在运行过程中出现<code data-tag=\"code\" class=\"code\">termdd</code>（错误代码是<code data-tag=\"code\" class=\"code\">0x000000D1</code>或者其他）蓝屏问题，如下图所示。</p><img id=\"c89059b0e4j41\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0001852861/p641763.png\" alt=\"image..png\" placement=\"break\" width=\"500\" class=\"image break\"><p id=\"4736d5f0e45or\">且Dump信息中显示<code data-tag=\"code\" class=\"code\">termdd.sys（C:\\Windows\\System32\\drivers\\termdd.sys）</code>文件的版本在<code data-tag=\"code\" class=\"code\">6.1.7601.24441</code>以下。</p><img id=\"99db3020e46v5\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0001852861/p645624.png\" alt=\"image..png\" placement=\"break\" class=\"image break\"></section><section id=\"bae2dff0e4s5b\" class=\"section\"><h2 id=\"bae2dff1e4w97\"><b>问题原因</b></h2><p id=\"bc8915e0e46lh\">是系统漏洞导致。微软于2019年05月14日修复了该漏洞，CVE详细信息请参考<a class=\"\" target=\"_blank\" href=\"https://msrc.microsoft.com/update-guide/en-US/vulnerability/CVE-2019-0708?spm=a2c9r.14518950.0.0.50a9punrpunrt7\">CVE-2019-0708</a>。 </p></section><section id=\"c1ba9570e4nbi\" class=\"section\"><h2 id=\"c1ba9571e404v\"><b>解决方案</b></h2><ol id=\"44a99102e4z89\"><li id=\"44a99100e4t4z\"><p id=\"43b0d921e4fth\">更新系统。</p><section id=\"4f6adcc0e4q0j\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"4f6adcc2e4oja\" class=\"section\"><h4 id=\"531b1380e4xv0\" data-spm-anchor-id=\"a2c9r.14518950.0.i5.50a9punrpunrt7\" jc=\"start\" style=\"text-align:start\"><b>Windows自动更新系统</b></h4><p id=\"4f6adcc3e455g\">使用Windows更新，将系统更新至最新。</p><ol id=\"55938d92e4bzf\"><li id=\"55938d93e4abg\"><p jc=\"left\" id=\"55949f00e4js1\" style=\"text-align:left\">远程连接ECS实例。</p><p id=\"55949f01e4vxw\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"f461c230e562k\"><p id=\"f4a50cc0e5y7y\">修改注册表中的WSUS地址。</p><ol id=\"03d54b64e5cql\"><li id=\"03d54b60e5m79\"><p id=\"fb0d85b0e5p4b\">依次选择<b data-tag=\"uicontrol\" id=\"a97bd940e4hw7\" class=\"uicontrol\">开始</b> &gt; <b data-tag=\"uicontrol\" id=\"ab2e4430e4wxd\" class=\"uicontrol\">运行</b> &gt; <b data-tag=\"uicontrol\" id=\"ace6f0b0e4ima\" class=\"uicontrol\">regedit</b>。</p></li><li id=\"03d54b61e5v32\"><p id=\"004dd250e5rh1\">进入<code data-tag=\"code\" class=\"code\">计算机\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Policies\\Microsoft\\Windows\\WindowsUpdate</code>路径，将<code data-tag=\"code\" class=\"code\">WUServer</code>和<code data-tag=\"code\" class=\"code\">WUStatusServer</code>的值修改为</p><p id=\"4418b5e0e5a8b\"><code data-tag=\"code\" class=\"code\">http://update.cloud.aliyuncs.com</code>。</p><img id=\"4bd61070e5x69\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6290662861/p646237.png\" alt=\"image..png\" placement=\"break\" class=\"image break\"></li></ol></li><li id=\"55938d96e47u5\"><p id=\"5594c610e46pj\">依次选择<b data-tag=\"uicontrol\" id=\"f96e5070e5q21\" class=\"uicontrol\">开始</b> &gt; <b data-tag=\"uicontrol\" id=\"f96e5071e5w0v\" class=\"uicontrol\">控制面板</b> &gt; <b data-tag=\"uicontrol\" id=\"f96e5072e5gt7\" class=\"uicontrol\">系统和安全</b> &gt; <b data-tag=\"uicontrol\" id=\"af62c620e46ye\" class=\"uicontrol\">Windows Update</b><b>。</b></p></li><li id=\"55938d98e49vq\"><p jc=\"left\" id=\"5594c611e4ent\" style=\"text-align:left\">扫描更新后，单击<b data-tag=\"uicontrol\" id=\"b4d23910e4igx\" class=\"uicontrol\">安装更新</b>。</p><img id=\"55938d9be451l\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0001852861/p645824.png\" alt=\"image..png\" placement=\"break\" width=\"500\" class=\"image break\"></li><li id=\"55938d9ce4pst\"><p id=\"5594c613e42hi\">更新完成后，重启Windows系统。</p></li></ol></section><section id=\"4f6adcc5e43nf\" class=\"section\"><h4 id=\"591e6200e4xpb\" data-spm-anchor-id=\"a2c9r.14518950.0.i8.50a9punrpunrt7\" jc=\"start\" style=\"text-align:start\"><b>手动更新系统</b></h4><ol id=\"5e1633f2e45py\"><li id=\"5e1633f0e4vo8\"><p jc=\"left\" id=\"5c29cd40e4b6o\" style=\"text-align:left\">远程连接ECS实例。</p><p id=\"5c29cd41e4kf8\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"638fb900e4jm0\"><p id=\"5c29f450e462c\">下载累计安全补丁<a class=\"\" target=\"_blank\" href=\"https://www.catalog.update.microsoft.com/Search.aspx?q=KB4499164\">KB4499164</a>或者仅安全更新补丁<a class=\"\" target=\"_blank\" href=\"https://www.catalog.update.microsoft.com/Search.aspx?q=KB4499175\">KB4499175</a>。</p></li><li id=\"64b489f0e43uj\"><p id=\"5c29f451e4xgw\">双击安装补丁。</p></li><li id=\"fecea740e4tev\"><p id=\"026896e0e4ird\">重启Windows系统。</p></li></ol></section></section></li><li id=\"6cece0e0e486l\"><p id=\"e1885e50e46vb\" data-spm-anchor-id=\"a2c9r.14518950.0.i9.50a9punrpunrt7\" jc=\"start\" style=\"text-align:start\">验证问题是否修复。</p><ul id=\"9ee22f62e4iwy\"><li id=\"9ee22f60e4sjg\"><p id=\"9d018880e46it\">查看已安装的补丁。</p><p id=\"a75b38d0e4diz\">自动更新系统或者手动更新系统后，打开CMD命令行，使用<code data-tag=\"code\" class=\"code\">systeminfo</code>命令查看已安装的补丁，确认系统安装了KB4499164或者KB4499175补丁。</p><img id=\"a79b00f3e4qz6\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6081852861/p645829.png\" alt=\"image..png\" placement=\"break\" width=\"400\" class=\"image break\"></li><li id=\"84bd11e0e4z9u\"><p id=\"81deaa10e4cs7\">查看<code data-tag=\"code\" class=\"code\">termdd.sys</code>文件版本。</p><p id=\"c89514d0e4w29\">确认<code data-tag=\"code\" class=\"code\">termdd.sys（C:\\Windows\\System32\\drivers\\termdd.sys）</code>文件版本是否在<code data-tag=\"code\" class=\"code\">6.1.7601.24441</code>及以上。</p><img id=\"caaea603e4i5s\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0001852861/p645625.png\" alt=\"image..png\" placement=\"break\" width=\"400\" class=\"image break\"></li></ul><p id=\"851882e0e4ajk\">如果确认系统安装了KB4499164或者KB4499175补丁以及<code data-tag=\"code\" class=\"code\">termdd.sys</code>文件版本在<code data-tag=\"code\" class=\"code\">6.1.7601.24441</code>及以上，蓝屏问题解决。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-interface-that-appears-on-your-logon-to-a-windows-instance-is-abnormal", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>远程登录Windows系统后界面显示异常如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>远程登录Windows系统后界面显示异常如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-06 10:04:45</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"1884f190b9duf\"><p data-tag=\"shortdesc\" id=\"188ae500b9k0b\" class=\"shortdesc\">本文介绍远程登录Windows系统后界面显示异常问题的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"ac5cff20bbixr\">Windows界面是开始菜单非系统桌面</h2><h3 id=\"292b1400bcngv\"><b>问题描述</b></h3><p id=\"3166c650bcgm5\">远程登录Windows系统的ECS实例时，默认登录的界面为开始菜单，而不是系统桌面。</p><div type=\"note\" id=\"30b28f61d1v28\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"31014ba0d1li0\">以Windows Server 2012操作系统为例。</p></div></div><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5351908761/p519735.png\" alt=\"20201231115049.jpg\" width=\"600\" class=\"image break\"><h3 id=\"38fd10e0bcqi5\"><b>问题原因</b></h3><p id=\"3e9d0130d1no7\">系统登录或者关闭屏幕上的应用时，转到开始菜单而不是系统桌面。</p><h3 id=\"33665e60d19la\"><b>解决方案</b></h3><ol id=\"41c01ba0bcego\"><li id=\"41c01ba1bc86e\"><p id=\"41c01ba2bcej3\">远程连接Windows系统的ECS实例。</p><p id=\"41c01ba3bc524\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"41c01ba4bc78e\"><p id=\"41c01ba5bckup\">单击键盘的<b>Win</b> + <b>R</b>键，输入<b>regedit</b>，然后单击<b>确定</b>，打开注册表编辑器。</p></li><li id=\"41c01ba6bc4mp\"><p id=\"41c01ba7bcpdj\">在注册表表中找到<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Winlogon\\AlternateShells</code>。</p></li><li id=\"323ff2d1bcfmc\"><p id=\"323ff2d0bcbpv\">双击<b>DefaultShell</b>，然后将默认的数值数据修改为<b>explorer.exe</b>即可。</p></li></ol><h2 id=\"5aed2d50bb0pi\"><b>界面显示黑色只能看到cmd命令行</b></h2><h3 id=\"b3d48900d1c05\">问题描述</h3><p id=\"5aed5465bbvbm\">远程登录Windows系统后显示黑色，只能看到cmd命令行，无法正常进入Windows系统。</p><div type=\"note\" id=\"77dd54e1d133h\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"78222613d1kf9\">以Windows Server 2012操作系统为例。</p></div></div><img id=\"e9fc4bb0d13j0\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2588050861/p615719.png\" alt=\"image\" placement=\"break\" width=\"600\" class=\"image break\"><h3 id=\"b3d48902d14oh\"><b>问题原因</b></h3><p id=\"5aed5467bbejk\">在安装Windows Server 2012系统时选择的核心模式，图形界面没有加载完全。</p><h3 id=\"b3d48904d1rev\"><b>解决方案</b></h3><p id=\"25f63ac0d15c8\">请您参照以下两种方案进行操作。其中方案一更换操作系统有数据丢失的风险，推荐您使用方案二。</p><h4 id=\"27278ed0d145s\"><b>方案一</b></h4><p id=\"59081cd0d1bvc\">更换操作系统，选择含有UI的镜像。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/replace-the-operating-system-of-an-instance\">更换操作系统（系统盘）</a>。</p><div type=\"note\" id=\"105062c1bcxnm\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"ddb60532bcual\"><li id=\"ddb60530bcgxd\"><p id=\"c0c01323bbimp\">更换操作系统后，原来旧的系统盘会被释放，会清除系统盘上的所有数据，请在更换操作系统前为系统盘创建快照备份数据。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></li><li id=\"ded94f81bcmud\"><p id=\"e16b4500bcj2p\">含有UI的镜像详情，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/replace-the-operating-system-of-an-instance-1#section-64x-u1z-3vh\">哪些操作系统支持可视化？</a>。</p></li></ul></div></div><h4 id=\"4d5e6ce0d1mvc\"><b>方案二</b></h4><ol id=\"905e7ac2bchx7\"><li id=\"905e7ac0bcnup\"><p id=\"a07b3ea1b80k5\">远程登录Windows实例。</p><p id=\"96fa5fc0bcjx5\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"abd2ad81bcl9m\"><p id=\"abd2ad80bc7w3\">执行以下命令，将核心模式<code data-tag=\"codeph\" class=\"codeph\">core</code>切换回完整模式<code data-tag=\"codeph\" class=\"codeph\">Full</code>，将cmd.exe窗口切换成图形界面。</p><pre id=\"fv8mzh\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>dism /online /enable-feature /all /featurename:servercore-fullserver /featurename:server-gui-shell /featurename:server-gui-mgmt</code></pre></li></ol><p id=\"90df2f70d1agf\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-system-error-58-occurs-while-i-access-the-shared-directory-of-a-nas-file-system-on-a-windows-operating-system", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows系统挂载NAS共享目录时报错“发生系统错误 58”如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows系统挂载NAS共享目录时报错“发生系统错误 58”如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-06 11:01:56</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"8dd466d0a1bde\"><p data-tag=\"shortdesc\" id=\"8ddaa867a1ftb\" class=\"shortdesc\">本文介绍Windows系统挂载NAS共享目录时报错“发生系统错误 58”的问题原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"5a9gzx\">问题描述</h2><p id=\"8ddacf71a176k\">在Windows Server 2008 32位标准版系统中，访问NAS共享目录时，无法访问“\\\\xx\\myshare”，错误信息提示如下。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0303577761/p519525.png\" width=\"600\" class=\"image break\"><h2 id=\"rqarfn\">问题原因</h2><p id=\"8ddacf74a1t21\">Windows Server 2008 32位标准版系统对SMB（Server Message Block）协议版本出现兼容性问题。</p><h2 id=\"as4lap\">解决方案</h2><ol id=\"1acf4d02bb5ag\"><li id=\"1acf4d00bbmpw\"><p id=\"c0c01323bbimp\">为系统盘创建快照，做好数据备份。</p><p id=\"598f7d70bbtpt\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></li><li id=\"457a0a81bbn5z\"><p id=\"457a0a80bb0k4\">更换操作系统（系统盘）。</p><p id=\"58485770bblx4\">ECS实例需更换成Windows Server 2008企业版或以上的操作系统。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/replace-the-operating-system-of-an-instance\">更换操作系统（系统盘）</a>。</p></li><li id=\"5b273471bbo83\"><p id=\"5b273470bben1\">使用快照创建新的按量付费的云盘。</p><p id=\"99a80760bb02t\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-disk-from-a-snapshot\">使用快照创建云盘</a>。</p></li><li id=\"b88be570bb0nv\"><p id=\"beb1fe30bbc32\">将云盘挂载到ECS实例上做数据恢复。</p><p id=\"c0a20e60bbcf8\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/attach-a-data-disk\">挂载数据盘</a>。</p></li><li id=\"c5ef7a61bbb0p\"><p id=\"c8e93260bb2ts\">数据恢复后，建议及时释放云盘。</p><p id=\"ca8d1e60bb7r1\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/release-a-disk\">释放云盘</a>。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-am-prompted-with-the-812-error-code-when-i-connect-to-a-vpn-from-a-windows-server-2008-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows Server 2008连接VPN出现812错误怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows Server 2008连接VPN出现812错误怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-02 09:57:04</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"a20f1d1065fcx\"><p id=\"a2170c50653nh\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍Windows Server 2008连接VPN出现812错误的原因及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"saPbd\">问题描述</h2><p id=\"a2170c5165jy9\">连接到VPN连接出错，错误提示代码为812。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1645765761/p518588.png\" class=\"image break\"><h2 id=\"xFXiW\">问题原因</h2><p id=\"a2170c5465znu\">VPN账号里<b>网络访问权限</b>设置了<b>通过NPS 网络策略控制访问 </b>。</p><h2 id=\"xeeXf\">解决方案</h2><p id=\"a2170c5665vrp\">先登录服务器，在本地用户管理中查看用户属性，或者运行中输入<b>lusrmgr.msc</b>。将<b>拨入</b>选项中<b>网络访问权限</b>调整权限为<b>允许访问</b>后，即可正常登录。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1645765761/p518589.png\" class=\"image break\"><p id=\"a2170c5865hte\"></p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-instances-cannot-access-the-ad-domains-of-each-other-or-instances-cannot-be-added-to-the-same-ad-domain-at-the-same-time", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>实例之间无法互相访问AD域或同时加入AD域怎么办？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>实例之间无法互相访问AD域或同时加入AD域怎么办？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-08-01 09:40:26</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"e46b9060b1a9a\"><p data-tag=\"shortdesc\" id=\"e472e360b1iyb\" class=\"shortdesc\">本文介绍如何解决实例之间无法互相访问AD域，或者无法同时加入AD域的问题。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"e472e364b1agj\">使用同一个Windows Server镜像创建几台ECS实例后，实例之间无法互相访问AD域，或者无法同时加入AD域。</p><h2 id=\"4rM4I\">问题原因</h2><p id=\"e472e365b1gn6\">使用同一个Windows Server镜像的几台实例中，其计算机安全标识符SID（Security Identifier）相同，因此无法相互访问AD域。此时您需要修改实例的SID，再搭建域环境。</p><h2 id=\"AywdZ\">解决方案</h2><h3 data-tag=\"h3\" id=\"e4730a73b1qvs\" class=\"h3\"><b>批量创建不同SID的Windows实例</b></h3><p id=\"e4730a74b1unf\">使用最新的公共镜像创建实例即可，因为最新的公共镜像已经修复此问题。</p><h3 data-tag=\"h3\" id=\"e4730a75b1kmh\" class=\"h3\"><b>修改一台Windows实例的SID</b></h3><p id=\"e4730a76b10sm\">Windows系统内置的<code data-tag=\"code\" class=\"code\">sysprep</code>命令可以将已安装的Windows镜像中删除特定的系统信息，其中包括SID。本文使用<code data-tag=\"code\" class=\"code\">PowerShell</code>的<code data-tag=\"code\" class=\"code\">AutoSysprep.ps1</code>脚本文件，通过系统内置的<code data-tag=\"code\" class=\"code\">sysprep</code>命令修改Windows实例的SID。需要注意的是，<code data-tag=\"code\" class=\"code\">sysprep</code>命令会将User Profile恢复为默认值，执行<code data-tag=\"code\" class=\"code\">sysprep</code>命令后会删除桌面上创建的文件。如果您希望修复故障后自动删除脚本，可以将文件放置在桌面上执行。</p><h4 id=\"5fc99860b13fu\"><b>操作步骤</b></h4><ol id=\"e4730a77b1khz\"><li id=\"e4730a78b1vdg\"><p id=\"e4730a79b1u7l\">为实例的系统盘创建快照，避免数据丢失。</p><p id=\"7b0221b0b1ls9\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建快照</a>。</p></li><li id=\"e4730a7ab1ukw\"><p id=\"e4730a7bb16ng\">远程连接ECS实例。</p><p id=\"b413f6e2b1o6t\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"e4733180b1k0e\"><p id=\"e4733181b1ooe\">登录系统终端，执行<code data-tag=\"code\" class=\"code\">powershell</code>命令进入PowerShell交互模式。 \n</p><div type=\"note\" id=\"e4733182b1xp1\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"e4733183b1p79\" class=\"p\">必须以管理员用户执行<code data-tag=\"code\" class=\"code\">powershell</code>命令。\n</p></div></div></li><li id=\"e4733185b1z5u\"><p id=\"e4733186b16c0\">执行以下命令，切换至C盘根目录。</p><pre id=\"39mrib\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>cd\\</code></pre></li><li id=\"e4733187b1aib\"><p id=\"e4733188b1doq\">执行以下命令，查看系统的SID。 </p><pre data-tag=\"codeblock\" id=\"e46bb770b18bb\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>whoami /user</code></pre><p id=\"e4733189b1zh4\"> 系统显示类似如下。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7484796761/p518704.png\" class=\"image break\"></p></li><li id=\"e473318ab1mou\"><p id=\"e473318bb1b3b\">下载<a class=\"\" target=\"_blank\" href=\"https://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/attach/40846/cn_zh/1542198598487/AutoSysprep.ps1\">AutoSysprep脚本工具</a>，并上传至实例的C盘。</p></li><li id=\"e473318cb1iqy\"><p id=\"e473318db1ocd\">进入<code data-tag=\"code\" class=\"code\">AutoSysprep.ps1</code>脚本工具所在目录，执行以下命令，查看脚本工具说明。 </p><pre data-tag=\"codeblock\" id=\"e46bb771b1h4c\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>.\\AutoSysprep.ps1 -help</code></pre><p id=\"e4735890b1w0o\"> 系统显示类似如下，具体的参数说明请参见<a title=\"\" class=\"from-extensions-error\" href=\"#8Yczx\">更多信息</a>。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7484796761/p518705.png\" class=\"image break\"></p></li><li id=\"e4735891b1aie\"><p id=\"e4735892b1r0a\">执行以下命令，运行脚本。 </p><pre data-tag=\"codeblock\" id=\"e46bb772b1u1y\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code> .\\AutoSysprep.ps1 -SkipRearm -Password \"&lt;$Password&gt;\" -PostAction \"reboot\"</code></pre><div type=\"note\" id=\"e4735893b1vjo\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"e4735894b176f\" class=\"p\"><code data-tag=\"code\" class=\"code\">&lt;$Password&gt;</code>为需要设置的密码。\n</p></div></div></li><li id=\"e4735896b1mxg\"><p id=\"e4735897b1ace\">等待一段时间，再次登录实例。 \n</p><div type=\"note\" id=\"e4735898b15c0\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"e4735899b18ku\" class=\"p\">如果您的ECS实例使用的是经典网络，需要<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">使用管理终端连接Windows实例</a>进行配置，在完成配置后，网络才可以连通。\n</p></div></div></li><li id=\"e473589bb1kfe\"><p id=\"e473589cb198s\">执行以下命令，确认系统的SID发生改变，然后可以使用ECS实例搭建AD域环境。 </p><pre data-tag=\"codeblock\" id=\"e46bb773b11go\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>whoami /user</code></pre></li></ol><h3 id=\"8Yczx\"><b>更多信息</b></h3><h4 id=\"8c5b9700b1c0m\"><b>参数说明</b></h4><p id=\"e4737fa0b1q9f\"><code data-tag=\"code\" class=\"code\">AutoSysprep.ps1</code>脚本工具参数介绍如下所示：</p><ul id=\"e4737fa1b126r\"><li id=\"e4737fa2b1b1l\"><p id=\"e4737fa3b1456\"><b>-SkipRearm</b>：保留Windows操作系统到当前授权许可状态。没有添加该参数时，AutoSysprep会恢复Windows实例到原始授权许可状态。</p></li><li id=\"e4737fa4b1lzp\"><p id=\"e4737fa5b1zan\"><b>-Password</b>：为实例重置密码。密码规则如下： \n</p><ul id=\"87df5322b1b05\"><li id=\"87df5320b1z3j\"><p id=\"715361f0b1wo4\">长度为8至30个字符，不能以斜线（/）为密码首字符。</p></li><li id=\"8accd621b19nl\"><p id=\"8accd620b16vl\">必须同时包含大写英文字母、小写英文字母、数字和特殊符号中的三种字符，可以包含的特殊符号有：</p><pre id=\"xq4rkl\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>( ) ` ~ ! @ # $ % ^ &amp; - _ + = | { } [ ] : ; ’ &lt; &gt; , . ? /</code></pre></li><li id=\"96336291b1vcx\"><p id=\"96336290b18fp\"><code data-tag=\"code\" class=\"code\">-Password</code>参数默认值由AutoSysprep随机生成。 </p></li></ul><div type=\"note\" id=\"83611e01b1y0z\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p data-tag=\"p\" id=\"83611e02b1kfe\" class=\"p\">如果您忘记设置密码，修改系统SID后可以在ECS管理控制台重置密码。\n</p></div></div></li><li id=\"e4737faab1frd\"><p id=\"e4737fabb13s9\"><b>-Hostname</b>：为实例重置主机名。主机名限制如下： </p><ul id=\"e8fe4d02b1yxb\"><li id=\"e8fe4d00b1867\"><p id=\"e78827c0b1hlv\">主机名字符长度为2到15，不支持点号（.），不能全是数字。</p></li><li id=\"eae69500b1moz\"><p id=\"eae66df0b1c7j\">允许大小写英文字母、数字和短横线（-）。</p></li><li id=\"eb59d3c1b1s3a\"><p id=\"eb59d3c0b1dvr\">点号（.）和短横线（-）不能作为首尾字符，更不能连续使用。</p></li><li id=\"ed3dcb71b124k\"><p id=\"ed3dcb70b16lp\"><code data-tag=\"code\" class=\"code\">-Hostname</code>参数默认值由AutoSysprep随机生成。</p></li></ul></li><li id=\"e3e3b0d1b1uo1\"><p id=\"e3e3b0d2b1ni8\"><b>-PostAction</b>：运行脚本后的后续操作。选项介绍如下： \n</p><ul id=\"e3e3b0d3b11sm\"><li id=\"e3e3b0d4b16q3\"><p id=\"e3e3b0d5b1pyv\">shutdown：默认选项，修改实例SID后停止实例。</p></li><li id=\"e3e3b0d6b1or0\"><p id=\"e3e3b0d7b101q\">reboot：修改实例SID后重启实例。</p></li><li id=\"e3e3b0d8b1ox7\"><p id=\"e3e3b0d9b1m43\">quit：修改实例SID后停留在实例内部。 </p></li></ul></li><li id=\"e3e3b0dbb1ft9\"><p id=\"e3e3b0dcb1m0y\"><b>-help</b>：查看脚本工具的介绍，自定义的使用AutoSysprep.ps1的参数。</p></li></ul><h4 data-tag=\"h3\" id=\"e473a6b5b1lev\" class=\"h3\"><b>Windows Server 2008系统查看脚本说明时报错</b></h4><p data-tag=\"h4\" id=\"e473a6b6b112f\" class=\"h4\"><b>问题现象</b></p><p id=\"e473a6b7b1733\">执行以下命令，查看脚本说明。</p><pre data-tag=\"codeblock\" id=\"e46bb775b1woz\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>.\\AutoSysprep.ps1 -help</code></pre><p id=\"e473a6b8b1rz7\">系统显示类似如下。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7484796761/p518706.png\" class=\"image break\"><p data-tag=\"h4\" id=\"e473a6bab1mxi\" class=\"h4\"><b>解决方法</b></p><p id=\"e473a6bbb1qes\">执行以下命令，增加权限。</p><pre data-tag=\"codeblock\" id=\"e46bb776b19s2\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>Set-ExecutionPolicy -ExecutionPolicy RemoteSigned</code></pre><h4 data-tag=\"h3\" id=\"e473a6bcb1wb9\" class=\"h3\"><b>Windows Server 2008系统运行脚本时提示未进行数字签名</b></h4><p data-tag=\"h4\" id=\"e473a6bdb1kxu\" class=\"h4\"><b>问题现象</b></p><p id=\"e473a6beb1cgk\">执行以下命令，运行脚本。</p><pre data-tag=\"codeblock\" id=\"e46bb777b1wi6\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code> .\\AutoSysprep.ps1 -skiprearm -postaction \"reboot\"</code></pre><p id=\"e473a6bfb1i6t\">系统显示类似如下。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7484796761/p518707.png\" alt=\"Symptom\" class=\"image break\"><p data-tag=\"h4\" id=\"e473a6c1b17zf\" class=\"h4\"><b>解决方法</b></p><p id=\"e473cdc0b1uoo\">执行以下命令，运行脚本。</p><pre data-tag=\"codeblock\" id=\"e46bb778b1cfw\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>powershell -executionpolicy bypass -file c:\\AutoSysprep.ps1 -skiprearm -postaction \"reboot\"</code></pre><div type=\"note\" id=\"bff818a0b3hf8\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"c1c69710b3oqb\">如果没有特定要求，AutoSysprep会随机生成密码和主机名。</p></div></div></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-windows-updates-cannot-be-installed-on-an-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows Update补丁更新失败如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows Update补丁更新失败如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-23 16:21:49</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"395f2e90b1pvw\"><p data-tag=\"shortdesc\" id=\"396289f7b13qz\" class=\"shortdesc\">本文介绍Windows Update补丁更新失败的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"39125539\">问题描述</h2><p id=\"396289fcb1j9a\">Windows实例默认配置了组策略，使用Intranet WSUS更新服务器安装补丁。如何配置系统补丁自动更新的组策略请参考<a class=\"\" href=\"/zh/ecs/parameters-for-automatic-update-for-windows-instances\">ECS Windows 2008 Windows Update 自动更新相关配置说明</a>。</p><p id=\"396289feb1x53\">在需要安装Windows Update情况下，经常会遇到Windows Update失败的情况，有各种类型的错误码出现，下图是常见的Windows Update失败的报错，提示的Error Code为“80244022”。该错误代码80244022是微软内部错误标签，错误原因是“HTTP status 503 - the service is temporarily”。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8338796761/p519053.png\" class=\"image break\"><h2 id=\"484a262f\">问题原因</h2><p id=\"39628a01b1397\">Windows Update失败一般有如下几种原因：</p><ul id=\"39628a02b1q56\"><li id=\"39628a03b11uf\"><p id=\"39628a04b1dg7\">第三方杀毒软件的影响。</p></li><li id=\"39628a05b1tyb\"><p id=\"39628a06b1hqq\">木马病毒的影响。</p></li><li id=\"39628a07b1snd\"><p id=\"39628a08b1y7f\">服务器物理内存或者虚拟内存不足。</p></li><li id=\"39628a09b1dmr\"><p id=\"39628a0ab1fwr\">磁盘文件系统访问权限问题。</p></li><li id=\"39628a0bb1tpx\"><p id=\"3962b100b12e9\">磁盘空间不足。</p></li><li id=\"3962b101b1kbo\"><p id=\"3962b102b1394\">Windows系统的ECS实例的自身系统组件或者依赖服务损坏。</p></li><li id=\"3962b103b10n7\"><p id=\"3962b104b141z\">Windows系统的ECS实例默认配置了阿里云内部WSUS服务器，如果该服务器繁忙或者停止响应，可能会导致Update失败。</p></li><li id=\"3962b105b1jzb\"><p id=\"3962b106b1ntq\">网络链路或者DNS解析问题。</p></li></ul><h2 id=\"b070c424\">解决方案</h2><div type=\"important\" id=\"b59bfdd1b1525\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"b74b0d60b1mg5\">本文仅供您使用Windows实例时参考，文中引用的微软官方链接，版权归属微软。请注意文章适用的操作系统范围，以及微软Windows产品迭代或者文档未及时更新可能带来的问题，阿里云官方不对引用的微软官方链接内容负责。</p></div></div><p id=\"3962b117b1eq4\">您可以参考以下操作步骤排查问题。</p><ol id=\"3962b118b173t\"><li id=\"3962b119b18ss\"><p id=\"3962b11ab1hrm\">检查是否配置虚拟内存。如果没有，请进行配置，配置完成后重启服务器，然后进行重试。</p><p id=\"53c55740b1av0\">Windows虚拟内存的设置请参考<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-configure-the-virtual-memory-of-a-windows-instance\">配置 Windows 系统虚拟内存</a>。</p></li><li id=\"3962d810b12nh\"><p id=\"3962d811b12x3\">执行如下命令，尝试检查是否可以访问内部WSUS服务器的80端口。 \n</p><ul id=\"3962d812b14wr\"><li id=\"3962d813b1e4q\"><p id=\"3962d814b1lb7\">经典网络ECS实例 </p><pre data-tag=\"codeblock\" id=\"395f55a0b1edm\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>telnet windowsupdate.aliyun-inc.com 80</code></pre></li><li id=\"3962d816b1ef5\"><p id=\"3962d817b1e2i\">VPC网络ECS实例 </p><pre data-tag=\"codeblock\" id=\"395f55a1b1nd7\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>telnet update.cloud.aliyuncs.com 80</code></pre></li></ul></li><li id=\"3962d81ab14ec\"><p id=\"3962d81bb17xb\">如果访问WSUS服务器的80端口不通，请取消使用阿里云内部的WSUS服务器，使用微软官方Internet更新服务器进行测试。</p><p id=\"8e648330b10yi\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/parameters-for-automatic-update-for-windows-instances\">Windows实例中Windows Update自动更新相关配置说明</a>。</p></li><li id=\"3962d81cb1rxv\"><p id=\"3962d81db1o11\">根据提示的错误码，在微软官方网站搜索对应的解决方案，尝试解决。微软也提供了“<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://support.microsoft.com/en-us/help/4027322\">Windows update troubleshooter</a>”，该工具会自动修复部分Windows update对应问题，可以尝试使用该工具。</p><p id=\"a11f6f30b11rw\">具体操作，请参考微软官网的<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://support.microsoft.com/zh-cn/help/12373/windows-update-faq#1TC=windows-7\">Windows 更新：常见问题解答</a>。</p></li><li id=\"3962d81eb1n0v\"><p id=\"3962d81fb1cqz\">参考微软官方提供<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://docs.microsoft.com/zh-cn/windows/deployment/update/windows-update-resources\">Windows 更新-其他资源</a>文档，尝试重置Windows Update组件。</p></li><li id=\"3962d820b16vi\"><p id=\"3962ff20b1g9c\">如果重置Windows Update组件后仍然无法更新，请参考<a class=\"from-extensions-error\" target=\"_blank\" href=\"https://docs.microsoft.com/zh-cn/windows/deployment/update/windows-update-resources\">Windows 更新-其他资源</a>文档中的手动重置 Windows更新组件，逐步执行所提到的命令，然后重新测试Windows Update。 \n</p><div type=\"important\" id=\"c3525130b14o6\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"c544d260b1xdu\">该步骤风险较高，请务必对系统盘、数据盘创建快照，备份数据后再进行操作。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建快照</a>。</p></div></div></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-system-prompt-can-not-find-how-to-deal-with-server-manager-lnk", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>Windows系统提示找不到“Server Manager.lnk”如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows系统提示找不到“Server Manager.lnk”如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-23 15:25:15</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"4aac95f0b1i57\"><p data-tag=\"shortdesc\" id=\"4aaedfe8b1vnx\" class=\"shortdesc\">本文介绍Windows系统提示找不到“Server Manager.lnk”的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"aAjhF\">问题描述</h2><p id=\"4aaedfe9b1yc2\">Windows系统出现“ Windows找不到文件<code data-tag=\"code\" class=\"code\">C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs\\Administrative Tools\\Server Manager.lnk</code>”错误。</p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1942507761/p518651.png\" class=\"image break\"><h2 id=\"bAsJt\">问题原因</h2><p id=\"4aaedfebb1wjv\">出现此错误是因为系统中缺少Server Manager.lnk快捷方式。</p><h2 id=\"BsRPr\">解决方案</h2><ol id=\"4aaf06f0b19e0\"><li id=\"4aaf06f1b1o7t\"><p id=\"4aaf06f2b10qq\">远程连接ECS实例。</p><p id=\"9cba0750b1las\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"979495b1b1ua8\"><p id=\"979495b0b1ede\">在<code data-tag=\"code\" class=\"code\">C:\\Windows\\System32\\</code>目录下，找到ServerManager文件，鼠标右键单击选择<b>桌面快捷方式</b>。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0942507761/p518652.png\" class=\"image break\"></p></li><li id=\"4aaf06f3b1m06\"><p id=\"4aaf06f4b1j4h\">将快捷方式复制到<code data-tag=\"code\" class=\"code\">C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs\\Administrative Tools\\</code>目录下。</p></li><li id=\"9cc79151b1iru\"><p id=\"9cc79150b14cl\">将文件名改为Server Manager（中间的空格不能少），系统会自动将名称改为<b>服务器管理器，</b>这样问题便可解决。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1942507761/p518653.png\" class=\"image break\"></p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/how-do-i-view-and-change-the-default-port-for-remote-desktop-on-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/the-operating-system-problem/\">操作系统问题</a></span>\n <span><a href=\"/zh/ecs/support/windows-operating-system-issues/\">Windows操作系统问题</a></span>\n <span>如何查看和修改Windows实例远程桌面的默认端口？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>如何查看和修改Windows实例远程桌面的默认端口？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-23 16:22:22</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"1fe880e0b1h64\"><p data-tag=\"shortdesc\" id=\"1fee4d46b1krh\" class=\"shortdesc\">本文主要介绍如何查看和修改Windows实例远程桌面的默认端口。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"MeHDA\">注意事项</h2><p id=\"1fee4d57b1ucu\">ECS实例中Windows实例远程桌面的默认端口为3389。基于安全性考虑，部分用户有修改默认端口的需求以减少通过远程桌面恶意攻击和扫描ECS实例的次数。因此本文主要介绍如何查看和修改Windows实例远程桌面的默认端口。在修改注册表前，请您注意：</p><ul id=\"1fee4d58b19mi\"><li id=\"1fee4d59b1f37\"><p id=\"1fee4d5ab1tvx\">您需要充分了解Windows系统运行机制，避免误操作。</p></li><li id=\"1fee4d5bb17eb\"><p id=\"1fee4d5cb17jm\">为了避免数据丢失，建议您对实例的系统盘和数据盘创建快照。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建快照</a>。</p></li></ul><section id=\"75b88a50b3wl1\" class=\"section\"><h2 data-tag=\"h3\" id=\"1fee7454b1e9v\" class=\"h3\"><b>查看ECS Windows远程桌面端口</b></h2><p id=\"1fee7455b18s2\">请参考如下三种方法查看ECS Windows远程桌面端口。</p><section id=\"b3398420b1bol\" outputclass=\"tabbed-content-box\" class=\"tabbed-content-box section\"><section id=\"b5f3c220b137t\" class=\"section\"><h3 data-tag=\"h4\" id=\"b842e240b1rql\" class=\"h4\"><b>方法一</b></h3><ol start=\"1\" id=\"b842e241b1jk0\"><li id=\"b842e242b1c1k\"><p id=\"b842e243b1zjb\">远程连接Windows实例。 \n</p><p id=\"b842e244b14dd\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"b842e245b1hvf\"><p id=\"b842e246b13kr\">选择<b>开始</b> &gt; <b>运行</b>，输入<b>cmd</b>，打开命令行窗口。</p></li><li id=\"b842e247b1ojm\"><p id=\"b842e248b1ued\">执行如下命令，查看进程信息。 </p><pre data-tag=\"codeblock\" id=\"b842e249b1978\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>tasklist /svc | find \"Ter\"</code></pre><p id=\"b842e24ab1mkq\"> 系统显示类似如下，表示本示例中查看到<b>TermService</b>的PID是1592。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6191796761/p518739.png\" width=\"590\" height=\"57\" id=\"b842e24bb1c1a\" class=\"image break\"></p></li><li id=\"b842e24cb1vnv\"><p id=\"b842e24db1lq7\">执行如下命令，查看<b>TermService</b>使用的端口。 </p><pre data-tag=\"codeblock\" id=\"b842e24eb1brv\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -ano | find \"1592\"</code></pre><p id=\"b842e24fb1d5s\"> 系统显示类似如下，表示本示例中的端口号为3389。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5191796761/p518740.png\" width=\"587\" height=\"72\" id=\"b842e250b1ahj\" class=\"image break\"></p></li></ol></section><section id=\"bc871ba0b1t5w\" class=\"section\"><h3 data-tag=\"h4\" id=\"c0a94e10b146r\" class=\"h4\"><b>方法二</b></h3><ol start=\"1\" id=\"c0a94e11b1rq6\"><li id=\"c0a94e12b1u9l\"><p id=\"c0a94e13b18dl\">远程连接Windows实例。 \n</p><p id=\"f2dddd90b1wk0\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"c0a94e18b1qrz\"><p id=\"c0a94e19b100f\">选择<b>开始</b> &gt; <b>运行</b>，输入<b>regedit</b>，打开注册表编辑器。</p></li><li id=\"c0a94e1ab1q5j\"><p id=\"c0a94e1bb1tkj\">查找<b>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\Wds\\rdpwd\\Tds\\tcp</b>，然后查找<b>PortNumber</b>的子键值，如下图所示。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5191796761/p518741.png\" id=\"c0a94e1cb1y4g\" class=\"image break\"></p></li><li id=\"c0a94e1db1474\"><p id=\"c0a94e1eb14jz\">查找<b>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\WinStations\\RDP-Tcp</b>，然后查找<b>portnumber</b>的值，一般情况下与<b>PortNumber</b>子键值两个值是相同的，即为远程服务的端口。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6191796761/p518742.png\" id=\"c0a94e1fb1xwk\" class=\"image break\"></p></li></ol></section><section id=\"a1fe4fa0b3ml7\" class=\"section\"><h3 id=\"98ac9970b3ouk\"><b>方法三</b></h3><ol start=\"1\" id=\"b29dfcc0b3zcu\"><li id=\"b29dfcc1b3m0o\"><p id=\"b29dfcc2b3hrn\">远程连接Windows实例。\n</p><p id=\"b29dfcc3b3hu6\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"b29dfcc4b3ig0\"><p id=\"b29dfcc5b3fhd\">选择<b>开始</b> &gt; <b>运行</b>，输入<b>cmd，</b>打开命令行窗口。</p></li><li id=\"b29dfcc6b3p2j\"><p id=\"b29dfcc7b3198\">执行如下命令，返回注册表的子项下的项和下一层子项的列表。 </p><pre data-tag=\"codeblock\" id=\"b29dfcc8b32nj\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>reg query \"hklm\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\Wds\\rdpwd\\Tds\" /s</code></pre><p id=\"b29dfcc9b32xc\">系统显示类似如下，本示例中查看到<b>PortNumber</b>的16进制值为0xd3d，相当于10进制的3389。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5191796761/p518743.png\" id=\"b29dfccab3kfd\" class=\"image break\"></p></li><li id=\"b29dfccbb38l5\"><p id=\"b29dfcccb3939\">执行如下命令，查看RDP-Tcp的<b>PortNumber</b>值。 </p><pre data-tag=\"codeblock\" id=\"b29dfccdb35fy\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>reg query \"HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\WinStations\\RDP-Tcp\" /v portnumber</code></pre><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5191796761/p518744.png\" id=\"b29dfccfb31dx\" class=\"image break\"></li></ol></section></section></section><h2 data-tag=\"h3\" id=\"1feee988b11gg\" class=\"h3\"><b>修改ECS Windows远程桌面端口</b></h2><p id=\"1feee989b1elf\">修改Windows实例远程桌面默认端口的方法如下。</p><ol start=\"1\" id=\"1feee98ab14r3\"><li id=\"1feee98bb1may\"><p id=\"1feee98cb1zf8\">远程连接Windows实例。 \n</p><p id=\"01c5a180b1v0f\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"1feee991b1mu6\"><p id=\"1feee992b1jts\">选择<b>开始</b> &gt; <b>运行</b>，输入<b>regedit</b>，打开注册表编辑器。</p></li><li id=\"1fef1091b1dqe\"><p id=\"1fef1092b1w7k\">查找<b>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\TerminalServer\\Wds\\rdpwd\\Tds\\tcp</b>，然后查找<b>PortNumber</b>的子键值，并修改该值为您需要的端口。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5191796761/p518745.png\" class=\"image break\"></p></li><li id=\"1fef1093b10rd\"><p id=\"1fef1094b1xpc\">查找<b>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\TerminalServer\\WinStations\\RDP-Tcp</b>，然后查找<b>PortNumber</b>的子键值，并修改该值为您需要的端口。 <img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5191796761/p518746.png\" class=\"image break\"></p></li></ol><h3 id=\"1fef1095b1mva\"><b>后续操作</b></h3><p id=\"bb259a60b1vlj\">以下是修改ECS Windows实例远程桌面默认端口的后续操作。</p><ul id=\"1fef1096b1kmh\"><li id=\"1fef1097b1q8l\"><p id=\"1fef1098b126b\">修改ECS Windows实例远程桌面端口后，需要检查防火墙和TCP/IP，确认是否有安全规则限制。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/configure-windows-firewall-rules-for-windows-server-instances\">Windows防火墙限制端口/IP/应用访问的方法以及例外的配置</a>。 </p></li><li id=\"1fef37a2b19d7\"><p id=\"1fef37a3b1afe\">确认您的安全组配置已经放行新添加的端口。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。 </p></li><li id=\"1fef37a9b15t1\"><p id=\"1fef37aab1zvs\">重启ECS实例使配置生效。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。 </p></li></ul></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/local-loopback-adapter-did-not-start-to-use-nginx-access-web-tips-502-and-connect-upstream-time-out-error-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>本地回环网卡（lo）未启动导致使用Nginx访问网页提示“502”和“connect upstream time out”报错，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>本地回环网卡（lo）未启动导致使用Nginx访问网页提示“502”和“connect upstream time out”报错，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-08 18:11:13</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"43264230965zf\"><p data-tag=\"shortdesc\" id=\"432d6e2096w5n\" class=\"shortdesc\">本文介绍本地回环网卡（lo）未启动，导致使用Nginx访问网页提示“502”和“connect upstream time out”报错的问题现象、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"WhtjC\">问题描述</h2><p id=\"01d20d90acswf\">在使用Nginx访问网页时，提示“502”错误，如图所示：</p><img id=\"01d20d92acplc\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4461636761/p558992.jpg\" alt=\"20230209211137\" placement=\"break\" width=\"750\" class=\"image break\"><p id=\"01d20d93ac7kq\">此时，进行如下检查，发现Nginx服务日志中出现“connect upstream time out”报错：</p><ol id=\"01d20d94acwsh\"><li id=\"01d20d95acpds\"><p id=\"01d20d96ackuf\">检查在PHP-FPM进程，发现PHP-FPM进程正常运行，如图所示。</p><img id=\"01d20d98ac0n7\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4461636761/p558993.jpg\" alt=\"20230209211705\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"01d20d99ac5iu\"><p id=\"01d20d9aacagh\">查看Nginx服务日志，发现Nginx服务日志中出现“connect upstream time out”报错，如图所示。</p><pre id=\"01d20d9bacatn\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>connect upstream time out</code></pre><img id=\"01d20d9dac3tc\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4461636761/p558988.jpg\" alt=\"20230209205043\" placement=\"break\" width=\"750\" class=\"image break\"></li></ol><h2 id=\"WjTfi\">问题原因</h2><p id=\"fa809430acqzv\">PHP-FPM服务正常启动且已设置了监听端口（<code data-tag=\"code\" class=\"code\">127.0.0.1:9000</code>），但由于本地回环网卡（<code data-tag=\"code\" class=\"code\">lo</code>）未启动，从而导致该问题。</p><h2 id=\"wSyjt\">解决方案</h2><p id=\"b0c3f0d0b7biu\">您需要检查本地回环网卡（lo）是否正常启动，如果未启动则需要启动后重新访问网站，操作步骤如下：</p><ol id=\"3f676be0ac4qi\"><li id=\"3f676be1accs6\"><p id=\"3f676be2actz7\">远程连接ECS实例。</p><p id=\"3f676be3ac4iq\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"3f676be4acur1\"><p id=\"3f676be5acpej\">检查本地回环网卡（<code data-tag=\"code\" class=\"code\">lo</code>）是否正常启动。</p><ol id=\"4d98b111acz2u\"><li id=\"4d02b2a1aclus\"><p id=\"52b018f0acnlr\">执行<code data-tag=\"code\" class=\"code\">ifconfig -a</code>命令，查看当前系统的网卡信息。</p><p id=\"71c58e50acvgm\">当本地回环网卡（<code data-tag=\"code\" class=\"code\">lo</code>）状态未启动，如图所示，则您需要启动本地回环网卡（lo）。</p><img id=\"a82bf291acg3n\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4461636761/p558990.jpg\" alt=\"20230209210535\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"772f0dd1acgss\"><p id=\"772f0dd0actwt\">执行 <code data-tag=\"code\" class=\"code\">ifup ifcfg-lo</code>命令，启动本地回环网卡（<code data-tag=\"code\" class=\"code\">lo</code>）。</p><p data-lake-id=\"d9e684fb2d5cd8c99bbeef2397720c46_h2_3\" id=\"6c0f0040acjzx\">当本地回环网卡（<code data-tag=\"code\" class=\"code\">lo</code>）状态为<code data-tag=\"code\" class=\"code\">RUNNING</code>时，表示成功启动本地回环网卡（<code data-tag=\"code\" class=\"code\">lo</code>），如图所示。</p><img id=\"da809f21acivp\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5461636761/p558991.jpg\" alt=\"20230209210851\" placement=\"break\" width=\"750\" class=\"image break\"></li></ol></li><li id=\"3f6792f1ac60k\"><p id=\"3f6792f2acyk1\">检查本地回环网卡（lo）配置文件。</p><ol id=\"1735bd51acpb9\"><li id=\"f67e30b1ac2t7\"><p id=\"cb00cf00acu6c\">执行如下命令，编辑本地回环网卡（<code data-tag=\"code\" class=\"code\">lo</code>）的配置文件。</p><p id=\"1f283b90b8o1m\">您需要根据您的实际操作系统执行对应的命令，常见操作系统命令如下：</p><ul id=\"386e91d1b8cxi\"><li id=\"3724acb1b8ptx\"><p id=\"56f4bf80b8oju\">CentOS 7或Alibaba Cloud Linux 2/3</p><pre id=\"un5qqp\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/sysconfig/network-script/ifcfg-lo</code></pre></li><li id=\"dda229d1b8hm3\"><p id=\"72bbcd30b8mwp\">Ubuntu 16.04</p><pre id=\"l8onyu\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/network/interfaces</code></pre></li><li id=\"f8492181b8p4c\"><p id=\"00912fe0b8imi\">Ubuntu 18.04及以上版本</p><pre id=\"59iddg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>vim /etc/netplan/50-cloud-init.yaml</code></pre></li></ul><p id=\"8ad38e82b8smq\">以CentOS操作系统为例，如果命令回显中，<code data-tag=\"code\" class=\"code\">ONBOOT</code>参数的值为<code data-tag=\"code\" class=\"code\">no</code>，则您需要将<code data-tag=\"code\" class=\"code\">ONBOOT=no</code>修改为<code data-tag=\"code\" class=\"code\">ONBOOT=yes</code>，如图所示。</p><div type=\"note\" id=\"97886ce0b8off\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"e22624a7acw43\">如果您的操作系统中无<code data-tag=\"code\" class=\"code\">ONBOOT</code>参数相关的配置，则您只需要在网卡正常启动后，检查配置文件正确即可。</p></div></div><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6991636761/p519829.png\" id=\"8fa317f3b8pjf\" width=\"750\" class=\"image break\"></li><li id=\"851d0111acom6\"><p id=\"c058bb20acu21\">输入<code data-tag=\"code\" class=\"code\">:wq</code>并回车，保存并关闭配置文件。</p></li><li id=\"cb0657d0ac6zq\"><p id=\"cfc76250acp12\">执行<code data-tag=\"code\" class=\"code\">systemctl restart network</code>命令，重启网络。</p></li></ol></li><li id=\"d7ae64f1ac0ak\"><p id=\"9169a060ac4xw\">重新使用Nginx访问网页。</p></li></ol></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/after-i-configure-the-vpn-service-for-a-windows-instance-vpn-is-working-as-expected-but-i-cannot-access-an-external-website-from-the-instance-what-do-i-do", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>Windows实例上配置VPN服务后，VPN服务正常但是无法访问外部网站，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例上配置VPN服务后，VPN服务正常但是无法访问外部网站，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-19 10:20:12</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"ab51910065om4\"><p data-tag=\"shortdesc\" id=\"ab54c55165550\" class=\"shortdesc\">本文介绍Windows实例上配置VPN服务后，在Windows实例上可以连接网络接口（即VPN服务可以正常使用），但是无法访问外部网站问题的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"myYMe\">问题描述</h2><p id=\"537c9e90adpvb\">Windows实例上配置VPN服务后，在Windows实例上可以连接网络接口（即VPN服务可以正常使用），<span data-tag=\"ph\" id=\"4f35cb80deoay\" props=\"china\" data-cond-props=\"china\" class=\"ph\">如图所示，</span>但是无法访问其他外部网络。</p><img id=\"36715440ad0ij\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9673011861/p562488.jpg\" alt=\"20230215195207\" placement=\"break\" width=\"750\" class=\"image break\"><h2 id=\"kDKSi\">问题原因</h2><p id=\"537cc5a1adtfp\">没有在Windows实例上配置NAT转发导致该问题。</p><h2 id=\"mRyHt\">解决方案</h2><p id=\"0e4bfcc0d1bpv\">您可以在Windows实例上配置NAT转发后，重新访问该网站，操作步骤如下：</p><div type=\"note\" id=\"410f38b0d1yg8\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"be58ac40cdkv2\">本文操作步骤以Windows Server 2012 R2数据中心版64位中文版为例，实际操作以您实际的操作系统为准。</p></div></div><ol id=\"ab54ec636524v\"><li id=\"ab54ec646539u\"><p id=\"537cc5a3adnsk\">远程连接Windows实例。</p><p id=\"72fff350d1grr\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"df95d5b0d14ul\"><p id=\"df95aea0d1zmd\">打开<b data-tag=\"uicontrol\" id=\"a7cdb630d1ba6\" class=\"uicontrol\">路由和远程访问</b>页面。</p><ol id=\"b14d3321d17kn\"><li id=\"547b1ba0d1m07\"><p id=\"547af490d1mzv\">在桌面左下角，选择<img id=\"c7a48820d1d1j\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615324.png\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"dbd6d1e0d11kc\" class=\"uicontrol\"> &gt; 服务器管理器</b>。</p></li><li id=\"af5f1ec1d13jw\"><p id=\"9c5e9e40d1kos\">在<b data-tag=\"uicontrol\" id=\"bcdd8eb0d17c1\" class=\"uicontrol\">服务器管理器</b>页面右上角，选择<b data-tag=\"uicontrol\" id=\"f9895be0d17x7\" class=\"uicontrol\">工具 &gt; 路由和远程访问</b>。<img id=\"122c3dd0d1sr0\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9673011861/p616702.png\" alt=\"服务器管理器单击远程访问\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"84b0c250d19jw\"><p id=\"84b09b40d1ini\">新增路由协议。</p><ol id=\"69111d51d1j9j\"><li id=\"68902d81d16az\"><p id=\"68902d80d1hzk\">在<b data-tag=\"uicontrol\" id=\"350b6ff0d1cdh\" class=\"uicontrol\">路由和远程访问</b>页面，选择<b data-tag=\"uicontrol\" id=\"1f5ebb30d1bra\" class=\"uicontrol\">IPv4 &gt; 常规 &gt; 新增路由协议</b>。<img id=\"24e9a560d1hud\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9673011861/p617291.png\" alt=\"新增路由协议xin\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"1cbe46c1d1uw5\"><p id=\"1cbe46c0d1sl4\">单击<b data-tag=\"uicontrol\" id=\"e7f2ed80d1ovy\" class=\"uicontrol\">NAT</b>，然后单击<b data-tag=\"uicontrol\" id=\"ea601cf0d1cze\" class=\"uicontrol\">确定</b>。<img id=\"bf033b90d12ry\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9673011861/p618268.png\" alt=\"新增路由协议界面单击NAT xin\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"4e039ba1d1fj9\"><p id=\"4e039ba0d1xwi\">新增接口。</p><ol id=\"cc085cd1d1u6y\"><li id=\"cb9bb851d1n7j\"><p id=\"cc8c59e0d150f\">在<b data-tag=\"uicontrol\" id=\"5ac66da0d2ca0\" class=\"uicontrol\">路由和远程访问</b>页面，选择<b data-tag=\"uicontrol\" id=\"5ac66da1d28ra\" class=\"uicontrol\">IPv4 &gt; NAT &gt; 新增接口</b>。<img id=\"21d081b0d1ar5\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9673011861/p618273.png\" alt=\"新增接口xin\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"1b17c5e0d1zne\"><p id=\"1b179ed0d1ksb\">分别添加<b data-tag=\"uicontrol\" id=\"014789b0d1inm\" class=\"uicontrol\">内部</b>和<b data-tag=\"uicontrol\" id=\"03fa9bc0d14x7\" class=\"uicontrol\">以太网</b>（外部网络）连接信息，然后再单击<b data-tag=\"uicontrol\" id=\"fe42fc40d1ie5\" class=\"uicontrol\">确定</b>。<img id=\"60298be0d14fr\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9673011861/p618299.png\" alt=\"添加内部和以太网信息 xin\" placement=\"break\" width=\"750\" class=\"image break\"></p><p id=\"6ba01de0d1qdm\">添加<b data-tag=\"uicontrol\" id=\"5ac66da2d2sey\" class=\"uicontrol\">以太网</b>（外部网络）连接时，您需要在<b data-tag=\"uicontrol\" id=\"0a4eace0d18ox\" class=\"uicontrol\">网络地址转换属性-以太网属性</b>页面的<b data-tag=\"uicontrol\" id=\"8f5a8a40d1p3g\" class=\"uicontrol\">NAT</b>页签下，选中<b data-tag=\"uicontrol\" id=\"949335c0d1qx5\" class=\"uicontrol\">公用接口连接到Internet</b>和<b data-tag=\"uicontrol\" id=\"99225ad0d1cwx\" class=\"uicontrol\">在此接口上启用NAT</b>，然后再单击<b data-tag=\"uicontrol\" id=\"9b2f41d0d126k\" class=\"uicontrol\">确定</b>，如图所示。<img id=\"f92cd770d1wl2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9673011861/p618302.png\" alt=\"以太网连接的NAT页签 xin\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"7eacddf0d1da1\"><p id=\"7eacb6e0d1cd5\">在<b data-tag=\"uicontrol\" id=\"c47bcee0d1j8p\" class=\"uicontrol\">路由和远程访问</b>页面，右键单击您的本地服务器，然后选择<b data-tag=\"uicontrol\" id=\"df273360d1der\" class=\"uicontrol\">所有任务 &gt; 重新启动</b>。<img id=\"d6e8c1f0d10b6\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9673011861/p618324.png\" alt=\"重启路由和远程访问 xin\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"ee610ef1d1uc5\"><p id=\"ee610ef0d19t1\">重新访问网站。</p><p id=\"f3edf4f0d1wsw\">如果网站访问成功，该问题解决。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-a-windows-instance-cannot-access-external-networks-when-a-large-number-of-connections-stay-in-the-time-wait-state", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>Windows实例的Time_Wait连接不释放导致访问外网失败，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例的Time_Wait连接不释放导致访问外网失败，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-23 16:18:38</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"f9465ce096a4v\"><p data-tag=\"shortdesc\" id=\"f94e4c24965el\" class=\"shortdesc\">本文介绍Windows实例的Time_Wait连接不释放，导致访问外网失败问题的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"mAYtp\">问题描述</h2><p id=\"a034cbc0a8d63\">当在Windows实例上可以<code data-tag=\"code\" class=\"code\">ping</code>通外网，但是无法使用浏览器访问外网、访问外网加载时间过长或者Windows实例上的应用联网异常时，在Windows实例的CMD命令提示符中，执行<code data-tag=\"code\" class=\"code\">netstat -an |find \"TIME_WAIT\" /c</code> 命令，发现存在大量TCP连接处于<code data-tag=\"code\" class=\"code\">TIME_WAIT</code>状态，示例如下：<img id=\"a034cbc2a850y\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p558971.jpg\" alt=\"查看time_wait连接\" placement=\"break\" class=\"image break\"></p><h2 id=\"AMbQB\">问题原因</h2><p id=\"cfa9ff10a8qtm\">Windows操作系统从Windows Server 2008版本以后，默认动态端口的数量为16384个（从49152起始，到65536结束）。由于TCP默认的Time Wait Delay时间为4分钟，如系统内有大量的活动连接，在结束后会在较长时间处于<code data-tag=\"code\" class=\"code\">Time_Wait</code>状态并占用大量端口，从而导致新的连接或应用因无端口使用而出现异常。</p><h2 id=\"BaQPc\">解决方案</h2><div type=\"note\" id=\"f9eb68e1a85vf\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"fc2a3550a84ud\">以下操作步骤以Windows Server 2012 R2为例，实际操作以您实际的Windows实例操作系统为准。</p></div></div><ol id=\"066dc590a8h4t\"><li id=\"066dc591a84v6\"><p id=\"066deca0a8jau\">使用VNC连接Windows实例。</p><p id=\"066deca1a8sq9\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password\">通过密码认证登录Windows实例</a>。</p></li><li id=\"066deca2a8qtw\"><p id=\"066deca3a8zlq\">打开CMD命令提示符。</p><ol id=\"066deca4a80kc\"><li id=\"066deca5a8cqp\"><p id=\"066deca6a8flb\">单击桌面左下角<img id=\"066deca7a8gun\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556011.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，然后单击<img id=\"066deca8a8sug\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556012.jpg\" alt=\"搜索图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标。</p></li><li id=\"066deca9a8fjd\"><p id=\"066decaaa8h7r\">在搜索框输入<code data-tag=\"code\" class=\"code\">cmd</code>。<img id=\"066decaba8f1z\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556018.jpg\" alt=\"单击命令提示符\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"066decaca8t3y\"><p id=\"066decada84a7\">单击<b data-tag=\"uicontrol\" id=\"f0f5deb0a5pla\" class=\"uicontrol\"><b>命令提示符</b></b>。</p><p id=\"066decaea8uk4\">进入命令提示符。<img id=\"066decafa8rqu\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556021.jpg\" alt=\"进入命令提示符\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"066decb0a8u99\"><p id=\"066decb1a8780\">执行如下命令，查看当前动态端口配置。 </p><pre id=\"066decb2a84f8\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netsh int ipv4 show dynamicport tcp</code></pre><p id=\"066decb3a8tmx\"> 回显示例如下，表示动态端口的数量为16384个（从49152起始，到65536结束）。</p><img id=\"066decb5a85b0\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p558632.jpg\" alt=\"20230209142221\" placement=\"break\" class=\"image break\"></li><li id=\"066decb6a8x69\"><p id=\"066decb7a8lvj\">执行如下命令，增大动态端口数量。 </p><pre id=\"066decb8a8psz\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netsh int ipv4 set dynamicport tcp start=1025 num=60000</code></pre><div type=\"note\" id=\"18bd93b0a8y5j\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"443e0d30a81zh\"><code data-tag=\"code\" class=\"code\">start</code>和<code data-tag=\"code\" class=\"code\">num</code>参数表示起始端口和端口数量，您需要根据实际情况调整参数值。</p></div></div><p id=\"066decb9a8eu3\"> 回显示例如下，表示动态端口的数量增大到60000个（从1025起始，到61025结束）。</p><img id=\"066decbba87dd\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p558634.jpg\" alt=\"20230209142347\" placement=\"break\" class=\"image break\"></li><li id=\"066decbca80f6\"><p id=\"066decbda8g2t\">重新访问外网或连接应用。</p><ul id=\"066decbea8nh1\"><li id=\"066decbfa8rsl\"><p id=\"066decc0a8ldk\">访问成功，该问题解决。</p></li><li id=\"066decc1a8454\"><p id=\"066decc2a82bf\">访问失败，执行下一步，修改注册表来降低Time Wait时间。</p></li></ul></li><li id=\"066decc3a8hg2\"><p id=\"066decc4a8w8j\">如果增大动态端口数量仍然不能完全解决该问题，您可以通过修改注册表来降低Time Wait时间，最低支持设置为30秒，具体操作如下：</p><div type=\"important\" id=\"066decc5a8den\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"066decc6a8t70\">为了避免注册表误操作带来的操作系统问题或者造成的数据丢失，请您操作注册表前，务必对系统盘和数据盘创建快照，并且操作完毕后需要重启Windows实例后才能使修改生效，具体操作如下：</p><ul id=\"066decc7a8ppm\"><li id=\"066decc8a8wfu\"><p id=\"066decc9a83mz\">创建快照，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/create-a-snapshot-of-a-disk\">创建一个云盘快照</a>。</p></li><li id=\"066deccaa85pp\"><p id=\"066deccba8823\">重启Windows实例，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/restart-instances\">重启实例</a>。</p></li></ul></div></div><ol id=\"066deccca816v\"><li id=\"066deccda85vm\"><p id=\"066deccea86rw\">打开注册表编辑器。</p><ol id=\"066deccfa89ir\"><li id=\"066decd0a82qw\"><p id=\"066decd1a8tk7\">单击桌面左下角<img id=\"066decd2a84rl\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556011.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，然后单击<img id=\"066decd3a8jvd\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556012.jpg\" alt=\"搜索图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标。</p></li><li id=\"066decd4a8u52\"><p id=\"066decd5a8dxk\">在搜索框输入<code data-tag=\"code\" class=\"code\">regedit</code>。<img id=\"066decd6a8yem\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p556886.jpg\" alt=\"打开注册表编辑器\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"066decd7a83qm\"><p id=\"066decd8a8sty\">单击<b data-tag=\"uicontrol\" id=\"b1762560a6yia\" class=\"uicontrol\"><b>regedit</b></b>。</p><p id=\"066decd9a84ij\">进入注册表编辑器。<img id=\"066decdaa8mgs\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p556888.jpg\" alt=\"2012注册表编辑器\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"066decdba83d8\"><p id=\"066decdca8sgp\">在注册表编辑器的<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services&gt;Tcpip&gt;Parameters</code>路径下，将注册表项<code data-tag=\"code\" class=\"code\">TcpTimedWaitDelay</code>的数值数据设置为十进制数值<code data-tag=\"code\" class=\"code\">30</code><b>。</b></p><p id=\"066decdda8srw\">如果<code data-tag=\"code\" class=\"code\">TcpTimedWaitDelay</code>项不存在，请新建对应注册表项，然后再修改数值数据。以<code data-tag=\"code\" class=\"code\">TcpTimedWaitDelay</code>不存在为例，操作如下：</p><ol id=\"066decdea8l1x\"><li id=\"066decdfa87r5\"><p id=\"066dece0a8ybh\">在注册表编辑器的<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services&gt;Tcpip&gt;Parameters</code>路径下，右键单击注册表项空白区域，然后选择<b data-tag=\"uicontrol\" id=\"3aa406c0a68n2\" class=\"uicontrol\"><b>新建（N） &gt; DWORD （32 位）值</b></b>。<img id=\"066dece1a8eak\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p556899.jpg\" alt=\"新建注册表项\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"066dece2a8owi\"><p id=\"066dece3a8awh\">输入<code data-tag=\"code\" class=\"code\">TcpTimedWaitDelay</code>，按<code data-tag=\"code\" class=\"code\">Enter</code>键。</p></li><li id=\"066dece4a8ddt\"><p id=\"066dece5a8y9z\">右键单击注册表项<code data-tag=\"code\" class=\"code\">TcpTimedWaitDelay</code>，然后单击<b data-tag=\"uicontrol\" id=\"99705e10a64cs\" class=\"uicontrol\"><b>修改</b></b>。<img id=\"066dece6a8yoa\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p556905.jpg\" alt=\"单击修改注册表项\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"066dece7a8kzq\"><p id=\"066dece8a89jz\">在对话框中，勾选<b data-tag=\"uicontrol\" id=\"f5ddddd0a6ccz\" class=\"uicontrol\"><b>十进制</b></b>，然后将<b data-tag=\"uicontrol\" id=\"f8e9be40a6bgg\" class=\"uicontrol\"><b>数值数据</b></b>设置为<code data-tag=\"code\" class=\"code\">30</code><b>。</b><img id=\"066dece9a8hr6\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p556909.jpg\" alt=\"需改数值数据为30\" placement=\"break\" class=\"image break\"></p></li><li id=\"066deceaa8a81\"><p id=\"066deceba8anl\">单击<b data-tag=\"uicontrol\" id=\"2f3e9650a6b2t\" class=\"uicontrol\"><b>确定</b></b>。</p></li></ol></li></ol></li></ol><h2 id=\"aHXPM\">相关文档</h2><ul id=\"2bf6fe80a8we4\"><li id=\"2bf6fe81a8qz4\"><p id=\"2bf6fe82a8ro8\"><a class=\"from-extensions-error\" target=\"_blank\" href=\"https://support.microsoft.com/en-us/kb/929851\">动态端口</a></p></li><li id=\"2bf6fe83a8zx9\"><p id=\"2bf6fe84a8kgk\"><a class=\"from-extensions-error\" target=\"_blank\" href=\"https://technet.microsoft.com/en-us/library/cc938217.aspx\">TcpTimedWaitDelay</a></p></li></ul></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/active-directory-domains-in-the-network-environment-the-client-host-cannot-access-ali-cloud-network-service-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>AD域网络环境中的客户端主机无法访问阿里云内网服务，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>AD域网络环境中的客户端主机无法访问阿里云内网服务，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-17 11:53:28</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"1381736096zkn\"><p data-tag=\"shortdesc\" id=\"138543f896b1x\" class=\"shortdesc\">本文介绍AD（Active Directory）域网络环境中的客户端主机，无法访问阿里云内网服务问题的问题现象、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"XHssd\">问题描述</h2><p id=\"92d69000adyge\">AD域网络环境中的客户端主机无法访问阿里云内网服务，例如NTP、KMS和WSUS等服务。</p><p id=\"bf738690cfixu\">以无法访问阿里云内网的Windows实例更新服务器（<code data-tag=\"code\" class=\"code\">update.cloud.aliyuncs.com</code>）为例，在客户端主机上执行<code data-tag=\"code\" class=\"code\">ping update.cloud.aliyuncs.com</code>命令检查网络，回显示例如下：</p><img id=\"2b788980d1xha\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615106.png\" alt=\"无法访问更新服务器\" placement=\"break\" width=\"750\" class=\"image break\"><h2 class=\"ne-p\" id=\"PkXCK\">问题原因</h2><p class=\"ne-p\" id=\"ud2bf3621\">在部署DC（Domain Controller）域控制器时，通常会将AD域服务和DNS（Domain Name Server）服务部署在同一台ECS实例上，而客户端主机则会将<b data-tag=\"uicontrol\" id=\"fe36d0a0d1skr\" class=\"uicontrol\">首选DNS服务器</b>地址设置为DC所在实例的IP地址。若DC上部署的DNS服务器不能解析阿里云的内网服务网络，则会造成整个AD域环境下的客户端主机都无法访问阿里云的内网服务，例如NTP、KMS和WSUS等服务。</p><h2 class=\"ne-p\" id=\"bXkQb\">解决方案</h2><div type=\"note\" id=\"cf52ff51d1bxx\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"be58ac40cdkv2\">本文操作步骤以Windows Server 2012 R2数据中心版64位中文版为例，实际操作以您实际的操作系统为准。</p></div></div><h3 data-tag=\"h3\" id=\"13856b0596ahm\" class=\"h3\"><b>方案一：在DC所在实例的DNS转发器策略</b>中添加阿里云内网DNS服务器IP地址</h3><p id=\"f1875600d1p6l\">如果您需要访问较多的阿里云内网服务，则您可以执行如下操作步骤解决该问题。</p><ol id=\"09556422d13ch\"><li id=\"09556420d1jxs\"><p id=\"0836adb0d1wno\">远程连接DC所在实例。</p><p id=\"2a3d9db0d1tz5\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"2855f1f1d117i\"><p id=\"2855f1f0d1g8b\">查看DNS配置信息。</p><ol id=\"4a725931d1tp8\"><li id=\"4980a631d1e6s\"><p id=\"4980a630d1225\">在桌面左下角，选择<img id=\"81ec9e70d178f\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615324.png\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"d86cf2f0d1wvz\" class=\"uicontrol\"> &gt; </b><b data-tag=\"uicontrol\" id=\"956694b0d12aw\" class=\"uicontrol\">控制面板</b>。</p></li><li id=\"966a2200d1a9w\"><p id=\"9669faf0d1wnl\">单击<b data-tag=\"uicontrol\" id=\"bd0a4930d17vp\" class=\"uicontrol\">网络和Internet</b>，然后单击<b data-tag=\"uicontrol\" id=\"bf78ff40d19m9\" class=\"uicontrol\">网络和共享中心</b>。<img id=\"e5536570d173s\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615327.png\" alt=\"网络和共享中心\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"dfad5221d1eg1\"><p id=\"dfad5220d1k24\">单击<b data-tag=\"uicontrol\" id=\"f13a4570d1plm\" class=\"uicontrol\">以太网</b>。<img id=\"0ac96480d1d33\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615332.png\" alt=\"单击以太网\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"050541e0d1jjg\"><p id=\"05051ad0d1j3a\">查看DC的<b data-tag=\"uicontrol\" id=\"27be2750d1jm8\" class=\"uicontrol\">首选DNS服务器</b>的IP地址。</p><div type=\"note\" id=\"385fa930d1qsf\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"417519b0d1fj3\"><b data-tag=\"uicontrol\" id=\"dead3550d1b1d\" class=\"uicontrol\">首选DNS服务器</b>的IP地址为<code data-tag=\"code\" class=\"code\">127.0.0.1</code>，表示DNS解析地址指向本机的IP地址，此时，所有的DNS解析都需要到DNS的<b data-tag=\"uicontrol\" id=\"9956fa00d1ohb\" class=\"uicontrol\">转发器</b>页签中配置。<b> </b></p></div></div><img id=\"22536f50d1eq9\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615406.png\" alt=\"查看首选DNS地址\" placement=\"break\" width=\"750\" class=\"image break\"></li></ol></li><li id=\"355c6d91d1czz\"><p id=\"55b8cbc0d19yx\">在DNS的转发器配置中添加阿里云内网DNS服务的IP地址。</p><ol id=\"59c09861d1ctv\"><li id=\"547b1ba0d1m07\"><p id=\"547af490d1mzv\">在桌面左下角，选择<img id=\"c7a48820d1d1j\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615324.png\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"dbd6d1e0d11kc\" class=\"uicontrol\"> &gt; 服务器管理器</b>。</p></li><li id=\"df95d5b0d14ul\"><p id=\"df95aea0d1zmd\">在<b data-tag=\"uicontrol\" id=\"b507f130d1j3a\" class=\"uicontrol\">服务器管理器</b>页面右上角，选择<b data-tag=\"uicontrol\" id=\"f9895be0d17x7\" class=\"uicontrol\">工具 &gt; DNS</b>。<img id=\"4ad59590d1aia\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615620.png\" alt=\"服务器管理单击DNS\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"b38da081d16zx\"><p id=\"b38da080d18e2\">在<b data-tag=\"uicontrol\" id=\"8f77ed60d1s5c\" class=\"uicontrol\">DNS管理器</b>页面，右键单击目标DNS服务器，然后单击<b data-tag=\"uicontrol\" id=\"92cd32e0d1xt0\" class=\"uicontrol\">属性</b>。<img id=\"bf178c10d1kos\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615629.png\" alt=\"DNS服务器\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"c2b1a2c1d18fd\"><p id=\"c2b1a2c0d1q7z\">单击<b data-tag=\"uicontrol\" id=\"7846c610d1upc\" class=\"uicontrol\">转发器</b>页签，然后单击<b data-tag=\"uicontrol\" id=\"d5edce50d8wgj\" class=\"uicontrol\">编辑</b>。 <img id=\"9aee59f0d8hnh\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7448621861/p628603.png\" alt=\"进入转发器页签并编辑\" placement=\"break\" class=\"image break\"></p></li><li id=\"4b864990d86jt\"><p id=\"4b862280d8hkt\">在<b data-tag=\"uicontrol\" id=\"0c2d79a0d1g0f\" class=\"uicontrol\">编辑转发器</b>对话框，添加阿里云内网DNS服务的IP地址。</p><div type=\"important\" id=\"4f34ab92d8rqz\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"4f34ab93d8udp\">转发器中至少需要保留一个阿里云内网DNS服务地址，否则您将不能正常访问阿里云内网域名。阿里云内网DNS服务地址为100.100.2.136和100.100.2.138。</p></div></div><img id=\"4f34ab95d8ayg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2123071861/p615661.png\" alt=\"添加DNS地址\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"54979b61d8tal\"><p id=\"552842a0d8b0e\">单击<b data-tag=\"uicontrol\" id=\"124820b0d18fn\" class=\"uicontrol\">确定</b>。</p></li></ol></li><li id=\"db0e8df1d1vyb\"><p id=\"db0e8df0d1ly5\">打开CMD命令提示符。</p><ol id=\"e26249e1d1esg\"><li id=\"e1e8fb31d1twa\"><p id=\"e1e8fb30d18rx\">在桌面左下角，单击<img id=\"feb2f9f1d11ki\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615324.png\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标。</p></li><li id=\"ff989f00d1mos\"><p id=\"ff9877f0d1woc\">在右上角搜索框输入<code data-tag=\"code\" class=\"code\">cmd</code>，然后单击<b data-tag=\"uicontrol\" id=\"07104bc0d1ggq\" class=\"uicontrol\">命令提示符</b>。</p><p id=\"3bb39580d1a93\">进入CMD命令提示符。<img id=\"488cebd0d1rvh\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615667.png\" alt=\"输入cmd\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"d5bb2720d1jie\"><p id=\"d5bb0010d1cp2\">执行<code data-tag=\"code\" class=\"code\">ipconfig /flushdns</code>命令，刷新DNS缓存信息。<img id=\"801736a0d1aqm\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615670.png\" alt=\"刷新DNS缓存\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"79fe8b61d1ohz\"><p id=\"8cf48490d130g\">在不能访问阿里云内网服务的客户端主机上，执行<code data-tag=\"code\" class=\"code\">ping 目标阿里云内网服务域名</code>命令，测试阿里云内网服务网络访问是否正常。</p><p id=\"d1c3dfd0d1043\">以执行<code data-tag=\"code\" class=\"code\">ping update.cloud.aliyuncs.com</code>命令为例，如图所示，成功解析到域名对应的IP地址，即表示网络访问正常。<img id=\"52d03880d1309\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615684.png\" alt=\"客户机上测试结果\" placement=\"break\" class=\"image break\"></p></li></ol><h3 data-tag=\"h3\" id=\"13859215969c1\" class=\"h3\"><b>方案二：在客户端主机的host文件中添加目标阿里云</b>内网服务域名解析记录</h3><p id=\"fdbc5600d1mod\">如果您只需要访问较少的阿里云内网服务，则您可以执行如下操作步骤解决该问题。</p><ol id=\"6f868832d1v2n\"><li id=\"6f868830d1a5f\"><p id=\"6dca3230d1i3t\">登录任意一台能正常访问目标阿里云内网服务的主机。</p><p id=\"e9e3e910d1uun\">在主机上执行<code data-tag=\"code\" class=\"code\">ping 目标阿里云内网服务域名</code>命令，获取该阿里云内网服务域名对应的IP地址。以获取<code data-tag=\"code\" class=\"code\">update.cloud.aliyuncs.com</code>域名对应IP地址为例，如图所示。<img id=\"ac76be20d1c3d\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615698.png\" alt=\"解析IP地址\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"b3d91251d12bs\"><p id=\"b3d91250d1p95\">登录不能访问阿里云内网服务的AD域环境中的客户端主机。</p></li><li id=\"4aa065b0d1cp2\"><p id=\"58e0ed20d114q\">打开<code data-tag=\"code\" class=\"code\">hosts</code>文件。</p><p id=\"220f2ed0d1tx1\">以<code data-tag=\"code\" class=\"code\">hosts</code>文件所在目录为<code data-tag=\"code\" class=\"code\">C:\\Windows\\System32\\drivers\\etc</code>为例，如图所示。<img id=\"8d413310d16ti\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615692.png\" alt=\"打开hosts文件\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"f079daa1d1vv6\"><p id=\"f079daa0d1gf3\">在hosts文件中，添加该阿里云内网服务域名对应的IP地址的解析记录。</p><p id=\"b0d9bf90d1w99\">以添加<code data-tag=\"code\" class=\"code\">update.cloud.aliyuncs.com</code>域名解析记录为例，如图所示。</p><img id=\"3a2c3560d1w33\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615711.png\" alt=\"hosts添加域名解析记录\" placement=\"break\" class=\"image break\"></li><li id=\"e693de41d1k4o\" docid=\"3925603\"><p id=\"db0e8df0d1ly5\">打开CMD命令提示符。</p><ol id=\"e26249e1d1esg\"><li id=\"e1e8fb31d1twa\"><p id=\"e1e8fb30d18rx\">在桌面左下角，单击<img id=\"feb2f9f1d11ki\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615324.png\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标。</p></li><li id=\"ff989f00d1mos\"><p id=\"ff9877f0d1woc\">在右上角搜索框输入<code data-tag=\"code\" class=\"code\">cmd</code>，然后单击<b data-tag=\"uicontrol\" id=\"07104bc0d1ggq\" class=\"uicontrol\">命令提示符</b>。</p><p id=\"3bb39580d1a93\">进入CMD命令提示符。<img id=\"488cebd0d1rvh\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615667.png\" alt=\"输入cmd\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"1654e7a1d1cqb\" docid=\"3925603\"><p id=\"d5bb0010d1cp2\">执行<code data-tag=\"code\" class=\"code\">ipconfig /flushdns</code>命令，刷新DNS缓存信息。<img id=\"801736a0d1aqm\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615670.png\" alt=\"刷新DNS缓存\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"335f71d1d1tu2\" docid=\"3925603\"><p id=\"8cf48490d130g\">在不能访问阿里云内网服务的客户端主机上，执行<code data-tag=\"code\" class=\"code\">ping 目标阿里云内网服务域名</code>命令，测试阿里云内网服务网络访问是否正常。</p><p id=\"d1c3dfd0d1043\">以执行<code data-tag=\"code\" class=\"code\">ping update.cloud.aliyuncs.com</code>命令为例，如图所示，成功解析到域名对应的IP地址，即表示网络访问正常。<img id=\"52d03880d1309\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3318901861/p615684.png\" alt=\"客户机上测试结果\" placement=\"break\" class=\"image break\"></p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-am-prompted-with-the-error-message-content-from-the-website-listed-below-is-being-blocked-by-the-internet-explorer-enhanced-security-configuration", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>Windows云服务器使用IE浏览器打开网站提示“增强安全配置正在阻止来自下列网站内容”如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows云服务器使用IE浏览器打开网站提示“增强安全配置正在阻止来自下列网站内容”如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2022-12-12 13:29:15</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"9393a2c06ay5s\"><p id=\"939b43e06a6ze\" data-tag=\"shortdesc\" class=\"shortdesc\">本文主要介绍在Windows云服务器上使用IE浏览器打开网站报错时对应的解决方法。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"XbeWY\">问题描述</h2><p id=\"939b43e46a1pn\">在Windows操作系统的云服务器ECS或者轻量应用服务器中，使用IE浏览器打开网站时，提示以下报错。</p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"9393a2c16a1wb\" class=\"pre codeblock language-javascript\"><code>Internet Explorer 增强安全配置正在阻止来自下列网站内容</code></pre><h2 id=\"EFTFF\">问题原因</h2><p id=\"939b43e56aewh\">为了保障Windows服务器的安全性，默认运行IE浏览器时会启用IE增强的安全配置。若您不希望打开浏览器提示以上报错，可关闭IE增强的安全配置。</p><h2 id=\"9393a2c26a1vw\">解决方案</h2><p id=\"11f9c5f16a7l5\">您可以参考以下步骤关闭IE增强的安全配置来解决上述问题。</p><div id=\"50be31906a5h5\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"939b6afa6ar2e\" class=\"exp-title-h1\" title=\"windows server 2012 IE增强的安全配置如何关闭\">本文操作以Windows Server 2012和Windows Server 2016操作系统为例，其他版本的操作系统可能略有不同，具体以您实际的操作系统为准。</p></div></div><ol id=\"939b6afb6ats5\"><li id=\"939b6afc6aj2f\" data-spm-anchor-id=\"a2c9r.14518950.0.i9.61ac5e3bxgDHR6\"><p id=\"939b6afd6akl4\">远程连接Windows实例。</p><p id=\"ac2261706a9kx\">具体操作，请参见<a href=\"/zh/ecs/user-guide/connect-to-a-windows-instance-by-using-a-password-or-key\" title=\"\">通过密码或密钥认证登录Windows实例</a>。</p></li><li id=\"939b92006ahcb\" data-spm-anchor-id=\"a2c9r.14518950.0.i9.61105e3bAblwpy\"><p id=\"939b92016a9vs\">依次选择<b>开始</b>&gt;<b>服务器管理器</b>&gt;<b>本地服务器</b>，然后单击<b>IE 增强的安全配置</b>右侧的<b>启用</b>。</p><img placement=\"break\" alt=\"image\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1983719661/p523384.png\" id=\"5d8ea6e06aflo\" class=\"image break\"></li><li id=\"939b92036a4z4\"><p id=\"939b92046abkz\">在<b>Internet Explorer 增强的安全配置</b>页面，<b>管理员</b>选中<b>关闭</b>，<b>用户</b>选中<b>关闭</b>，然后单击<b>确定</b>保存配置。</p><img id=\"cf3495c06ame3\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1983719661/p523387.png\" alt=\"image\" placement=\"break\" width=\"450\" class=\"image break\"></li><li id=\"a3aa58446az76\" data-spm-anchor-id=\"a2c9r.14518950.0.i8.61105e3bAblwpy\"><p id=\"a3aa58456ahcm\">使用IE浏览器重新打开网站，确认没有提示以上报错信息。</p></li></ol></div></main>\n\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/how-to-use-the-chrome-developer-tools-to-screen-ecs-instance-website-load-too-slow", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>如何使用Chrome浏览器的开发者工具排查ECS实例上的网站加载过慢问题？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>如何使用Chrome浏览器的开发者工具排查ECS实例上的网站加载过慢问题？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-05-30 17:37:54</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"c9fc7f5096i81\"><p data-tag=\"shortdesc\" id=\"ca01133396l48\" class=\"shortdesc\">本文介绍使用Chrome浏览器的开发者工具排查网站加载过慢问题的方法。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"60e83270abf7t\"><b>问题描述</b></h2><p id=\"6c7fb9f0abw4i\">部署在ECS实例上的网站使用Chrome浏览器访问时加载过慢。</p><h2 id=\"71087660ab9g2\"><b>问题原因</b></h2><p id=\"78a5ece0abfh1\">网站中存在部分脚本或资源（例如网站调用的文件、网站需要使用的网络资源）请求过慢或加载失败。</p><h2 id=\"7fe9d1f0a8rju\">解决方案</h2><p id=\"b6438bc0abo6u\">您可以先通过阿里云ECS控制台的实例监控页面，查看该网站所在ECS实例的各项监控指标，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/view-the-monitoring-information-of-an-ecs-instance\">查看实例监控信息</a>。如果ECS实例的各项监控指标正常，则您可以通过Chrome浏览器中的开发者工具来查找导致网站加载速度过慢的网页资源，然后针对该资源的详细网络请求信息针对性处理。</p><h3 id=\"a2adc730fb9rl\"><b>步骤一：</b>使用Chrome浏览器中的开发者工具查找加载时间较长的资源</h3><ol id=\"7fe9d1f2a8im0\"><li id=\"7fe9d1f3a8y2l\"><p id=\"7fe9d1f4a8vrm\">打开Chrome浏览器并访问该网站。</p></li><li id=\"7fe9d1f5a8v35\"><p id=\"7fe9d1f6a8suk\">打开Chrome浏览器的开发者工具。 </p><ul id=\"7fe9d1f7a89mp\"><li id=\"7fe9d1f8a8h8o\"><p id=\"7fe9d1f9a8hi4\">方式一：</p><p id=\"7fe9d1faa8z27\">您可以直接在您的键盘上按<code data-tag=\"code\" class=\"code\">F12</code>键。</p></li><li id=\"7fe9d1fba8551\"><p id=\"7fe9d1fca8zvh\">方式二：</p><ol id=\"7fe9d1fda8duo\"><li id=\"7fe9d1fea8l6q\"><p id=\"7fe9d1ffa86pt\">在Chrome浏览器右上角，单击<img id=\"7fe9d200a8kva\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6773995761/p558684.jpg\" alt=\"浏览器设置\" placement=\"inline\" width=\"25\" class=\"image inline\">图标。</p></li><li id=\"7fe9d201a8lxh\"><p id=\"7fe9d202a85yl\">选择<b data-tag=\"uicontrol\" id=\"c7e38ff0a8xa5\" class=\"uicontrol\">更多工具 &gt; 开发者工具</b>。<img id=\"7fe9d203a8zsr\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5773995761/p558683.jpg\" alt=\"打开开发者工具\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"4b12b671f4bi1\"><p id=\"4b12b670f4guu\">方式三：</p><p id=\"53a143b0f4r4b\">单击鼠标右键，然后单击<b data-tag=\"uicontrol\" id=\"8c830830f4uix\" class=\"uicontrol\">检查</b>。<img id=\"94111560f45pf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7966805861/p672196.png\" alt=\"单击鼠标右键..png\" placement=\"break\" class=\"image break\"></p></li></ul></li><li id=\"7fe9d204a85vj\"><p id=\"7fe9d205a8jqd\">在开发者工具中，单击<b data-tag=\"uicontrol\" id=\"c630a270a3yc8\" class=\"uicontrol\">Network</b>页签。<img id=\"7fe9d206a8nsi\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5773995761/p558695.jpg\" alt=\"network页签\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"cefdecc1fbi3h\"><p id=\"ceffc180fbngg\">按<code data-tag=\"code\" class=\"code\">Ctrl + F5</code>键，强制刷新网页，然后查看网页资源的加载情况。 </p><p id=\"ceffe890fbftc\">您可以在资源列表中根据<b data-tag=\"uicontrol\" id=\"fde8dce0a8yge\" class=\"uicontrol\">Time</b>参数值，找到加载时间较长的网页资源，即<b data-tag=\"uicontrol\" id=\"d79a9c10fbwl8\" class=\"uicontrol\">Time</b>参数值较大的资源。</p><div type=\"important\" id=\"cefdecc4fb6sz\" class=\"note note-important\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note important\"></i></div><div class=\"noteContentSpan\"><strong>重要 </strong><p id=\"cf000fa0fbagc\">建议先按<code data-tag=\"code\" class=\"code\">Ctrl</code>键不放，再按<code data-tag=\"code\" class=\"code\">F5</code>键。 </p></div></div><img id=\"cefdecc7fbwxj\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5773995761/p556968.jpg\" alt=\"20230207150949\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"724c10d1fbeie\"><p id=\"cf000fa2fbil7\">获取该资源的网络请求信息。</p><ol id=\"1785d241fb8dh\"><li id=\"109145f0fbbhw\"><p id=\"cf000fa3fbu2z\">鼠标右键单击<b data-tag=\"uicontrol\" id=\"e808d264fb0om\" class=\"uicontrol\">Name</b>列中的目标资源，然后选择<b data-tag=\"uicontrol\" id=\"e808d265fbdo2\" class=\"uicontrol\">Copy &gt; Cpoy link address</b>。<img id=\"90bdcc21fbb3h\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5773995761/p556990.jpg\" alt=\"20230207152601\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"1aff4191fbe56\"><p id=\"cf000fa4fbuu7\">复制并查看该资源的请求URL。</p><p id=\"cf0036b0fbax1\">在<b data-tag=\"uicontrol\" id=\"4721ee80fbxug\" class=\"uicontrol\">Headers</b>页签下，您可以查看<b data-tag=\"uicontrol\" id=\"497f3f70fbb5v\" class=\"uicontrol\">Request URL</b>、<b data-tag=\"uicontrol\" id=\"4c589e30fbglc\" class=\"uicontrol\">Status Code</b>等详细的网络请求信息，然后对这些信息进行分析。</p><img id=\"b6f96521fbkf7\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5773995761/p558808.jpg\" alt=\"网络信息\" placement=\"break\" width=\"750\" class=\"image break\"></li></ol></li></ol><h3 id=\"1e7b6294f5tp0\">步骤二：根据目标资源信息处理问题</h3><p id=\"f2406a00fb0vw\">根据目标资源<b data-tag=\"uicontrol\" id=\"d79a9c11fbz5i\" class=\"uicontrol\">Headers</b>页签下的<b data-tag=\"uicontrol\" id=\"89b790f0fb4b8\" class=\"uicontrol\">Request URL</b>、<b data-tag=\"uicontrol\" id=\"8c2f6ec0fbk0j\" class=\"uicontrol\">Status Code</b>等网络请求信息进行分析，本文主要介绍如下几种情况对应的解决方案：</p><h4 id=\"f3fadd80fbm6r\"><b>情况一：加载请求时长过大的URL是外部网站URL</b></h4><p id=\"f2406a01fbk2w\">如果加载请求时长过大的URL是外部网站URL，您需要检查该外部网站URL地址访问是否正常、网站Web程序中的调用地址是否正确，然后通过优化程序调用来解决该问题。</p><h4 id=\"14105dc0fb3fl\"><b>情况二：加载请求时长过大的URL是一些较大的文件</b></h4><p id=\"f2406a02fbqyk\">如果加载请求时长过大的URL是一些较大的图片、视频、压缩包等文件，建议您进行如下操作：</p><ul id=\"53f15cf1fb0jr\"><li id=\"53f135e0fb23f\"><p id=\"f2406a03fb4qg\">升级网站带宽，具体操作，请参见<a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/419460.html\">配置公网带宽最佳实践</a>。</p></li><li id=\"55f5df80fb4vr\"><p id=\"f2409110fbtru\">优化下载路径或使用其他下载路径，例如使用阿里云对象存储OSS（Object Storage Service），具体操作，请参见<a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/357644.html\">网站与移动应用使用OSS</a>。</p></li></ul><h4 id=\"1b35fa40fbzu9\">情况三：网站本身调用的动态脚本加载时间过长</h4><p id=\"01468b60fb1y0\">如果是网站本身调用的动态脚本加载时间过长，您需要结合服务器的weblog日志进行分析、检查请求调用过程中消耗的具体资源所在环境，例如，数据库查询的时间过长，您需要检查数据库服务器的性能情况。同时，您还需要特别关注<b data-tag=\"uicontrol\" id=\"571be190fb8su\" class=\"uicontrol\">Timing</b>页签下，<b data-tag=\"uicontrol\" id=\"5fcd8730fb6z0\" class=\"uicontrol\">Waiting for server response</b>参数时间较长的资源。<img id=\"a465a5d0fb2pk\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7966805861/p675303.jpeg\" alt=\"尤其..jpeg\" placement=\"break\" width=\"750\" class=\"image break\"></p><p id=\"01468b61fb55m\">查看服务器的weblog日志并进行分析的具体操作，请参见<a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/472049.html#rOYed\">Nginx网站访问卡慢排查</a>或<a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/472068.html#24a388e984ujz\">Apache网站访问卡慢排查</a>。</p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-an-error-occurred-during-the-connection-to-a-database-or-error-establishing-a-database-connection-error-appears-when-i-access-the-wordpress-website", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>访问WordPress网站提示“建立数据库连接时出错”或者“Error establishing a database connection”错误如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>访问WordPress网站提示“建立数据库连接时出错”或者“Error establishing a database connection”错误如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-13 18:32:25</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"4070416096xal\"><p id=\"407cc485968v1\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍使用浏览器访问WordPress网站提示“建立数据库连接时出错”的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"42a9eb40a06zk\">问题描述</h2><p id=\"42a9eb41a0s6t\">使用浏览器访问基于WordPress模板建立的网站时，提示“建立数据库连接时出错”或者“Error establishing a database connection”错误，具体错误示例如下。</p><ul id=\"8b49cbb2a3h2c\"><li id=\"8b49cbb0a3yjj\"><p id=\"8be60bb0a3sw2\">提示“建立数据库连接时出错”：</p><img id=\"93523901a370k\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3998145761/p555676.jpg\" alt=\"20230203151106\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"905aa3e1a3lzd\"><p id=\"a9560e70a3ucx\">提示“Error establishing a database connection”：</p><img id=\"e068df50a3igf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3998145761/p555708.jpg\" alt=\"建立数据库连接时出错err\" placement=\"break\" width=\"750\" class=\"image break\"></li></ul><h2 id=\"42a9eb42a0dbb\">问题原因</h2><p id=\"42a9eb43a0hj0\">该问题通常是由于被访问的WordPress网站程序不能正常连接MySQL数据库导致。</p><h2 id=\"42a9eb44a0k3m\">解决方案</h2><p id=\"42a9eb45a0qnc\">出现该问题时，您需要在服务器上查看MySQL数据库服务是否正常并重新配置WordPress网站程序中连接的MySQL数据库密码，操作步骤如下：</p><ol id=\"42a9eb46a0lun\"><li id=\"42a9eb47a0r84\"><p id=\"42a9eb48a09g5\">登录您的MySQL数据库服务器。</p></li><li id=\"42a9eb49a0tfu\"><p id=\"42a9eb4aa0qgs\">执行如下命令，查看MySQL数据库服务是否正常。 </p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"42a9eb4ba0g1u\" class=\"pre codeblock language-javascript\"><code>systemctl status mysql</code></pre><ul id=\"42a9eb4ca0cam\"><li id=\"42a9eb4da0jbx\"><p id=\"42a9eb4ea0xfs\">如果MySQL数据库服务运行状态为<b data-tag=\"uicontrol\" id=\"d4079b00a3ib4\" class=\"uicontrol\">active (running)</b> ，表示数据库服务正常运行，回显示例如下，则继续执行步骤3，测试是否可以正常登录到MySQL数据库中。</p><img id=\"e0214ad1a3u9t\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3998145761/p555744.jpg\" alt=\"20230203155724\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"42a9eb51a0vdc\"><p id=\"42a9eb52a0vea\">如果MySQL数据库服务运行状态为<b data-tag=\"uicontrol\" id=\"f6541f80a3kz5\" class=\"uicontrol\">inactive (dead)</b>，表示MySQL数据库服务已停止，回显示例如下，则执行如下操作：</p><img id=\"0bdf4281a3ku2\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3998145761/p555665.jpg\" alt=\"20230203145734\" placement=\"break\" width=\"750\" class=\"image break\"><p id=\"506b7a40a37vt\">执行如下命令，启动MySQL数据库服务。</p><pre id=\"1i1mdg\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>systemctl start mysql</code></pre><div type=\"note\" id=\"6fb4d0e1a3yq6\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"6270d1e0a323l\">如果启动过程中提示ERROR报错，您需要根据报错信息修改数据库服务配置后，再重新执行命令，启动MySQL数据库服务。</p></div></div></li></ul></li><li id=\"42a9eb6ea0mh8\"><p id=\"42a9eb6fa0ydl\">执行如下命令，测试是否可以正常登录到MySQL数据库中。 </p><pre id=\"42a9eb70a06qe\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>mysql -u&lt;User&gt; -h&lt;IP&gt; -p&lt;Password&gt;</code></pre><div type=\"note\" id=\"42a9eb71a02ew\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"42a9eb72a0gm0\"><li id=\"42a9eb73a0yx8\"><p id=\"42a9eb74a07l4\">&lt;User&gt;为MySQL数据库用户名。</p></li><li id=\"42a9eb75a0ah7\"><p id=\"42a9eb76a09r0\">&lt;IP&gt;为MySQL数据库的IP地址。</p></li><li id=\"42a9eb77a08dj\"><p id=\"42a9eb78a05xu\">&lt;Password&gt;为MySQL数据库的密码。</p></li></ul></div></div><p id=\"42a9eb79a0kfc\">如图所示，回显信息提示您可以登录到数据库但数据库的密码错误。此时，您需要重新修改MySQL数据库的密码。具体操作，请参见<a class=\"\" href=\"/zh/ecs/how-do-i-reset-the-mysql-root-password-when-i-forget-the-password\">修改或重置MySQL的密码</a>。 </p><img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8653304761/p519347.png\" id=\"42a9eb7ba0b9h\" class=\"image break\"></li><li id=\"42a9eb7ca043p\"><p id=\"42a9eb7da01w4\">在修改完MySQL数据库的密码且验证能正常登录后，修改WordPress网站程序中连接的MySQL数据库的密码。</p><p id=\"42a9eb7ea0bve\">执行如下命令，编辑wp-config.php文件（部分版本的WordPress网站的配置文件为wp-config-sample.php），将文件中<code data-tag=\"code\" class=\"code\">DB_PASSWORD</code>字段对应的数据库密码替换为MySQL数据库密码，修改位置如下图所示。\n</p><div id=\"42a9eb7fa0lro\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"42a9eb80a0db2\">本操作以CentOS 7操作系统、wp-config.php文件路径为<code data-tag=\"code\" class=\"code\">/usr/share/nginx/html/wordpress</code>为例，具体操作以您的实际环境为准。</p></div></div><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"42a9eb81a09wr\" class=\"pre codeblock language-javascript\"><code>vim wp-config.php</code></pre><img id=\"42a9eb83a01qb\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0964114761/p551970.jpg\" alt=\"20230118173842\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"42a9eb84a0szr\"><p id=\"42a9eb85a0ooc\">输入<code data-tag=\"code\" class=\"code\">:wq</code>，然后按<code data-tag=\"code\" class=\"code\">Enter</code>键。</p><p id=\"42a9eb86a0sqc\">保存并退出wp-config.php文件。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-the-534-policy-requires-ssl-error-message-appears-when-i-access-an-ftp-site-deployed-on-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>通过FTP over TLS方式连接Windows实例上IIS服务创建的FTP站点时，提示“534 Policy requires SSL”信息，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>通过FTP over TLS方式连接Windows实例上IIS服务创建的FTP站点时，提示“534 Policy requires SSL”信息，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-14 17:02:56</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"4a0273f084fs5\"><p data-tag=\"shortdesc\" id=\"4a08b5808403u\" class=\"shortdesc\">本文介绍<span style=\"color:rgba(0, 0, 0, 0.85)\">通过FTP over TLS方式连接Windows实例上IIS服务创建的FTP站点时，</span>提示“534 Policy requires SSL”信息的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"h2-u95EEu9898u73B0u8C611\">问题描述</h2><p id=\"93e66270a94vo\"><span style=\"color:rgba(0, 0, 0, 0.85)\">通过FTP over TLS方式连接Windows实例上IIS服务创建的FTP站点</span>时，提示“534 Policy requires SSL”信息，无法连接FTP站点。</p><p id=\"633c0270b3o2c\" props=\"china\" data-cond-props=\"china\">报错示例如下：</p><img id=\"93e66272a9u13\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0306106761/p559212.jpg\" alt=\"报错信息原图新\" placement=\"break\" class=\"image break\"><h2 id=\"9c876640a9qlp\"><b>问题原因</b></h2><p id=\"a39c4bd0a9l2q\">由该问题的“534 Local policy on server does not allow TLS secure connections.”响应信息可知，FTP站点的<b data-tag=\"uicontrol\" id=\"26a7d0e0a9uif\" class=\"uicontrol\"><b>FTP SSL 设置</b></b>参数不正确导致该问题。</p><h2 id=\"h2-u89E3u51B3u65B9u68482\">解决方案</h2><ol id=\"b2823b00a92aa\"><li id=\"b2823b01a9bnb\"><p id=\"b2823b02a9nlz\">远程连接Windows实例。</p><p id=\"b2823b03a9ouy\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"b2823b04a9s1z\"><p id=\"b2823b05a9d3v\">在桌面左下角，选择<img id=\"b2823b06a9wbn\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1306106761/p559246.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"> &gt; Windows<b>管理工具</b> &gt; <b>Internet Information Services（IIS）管理器</b>。<img id=\"b2823b07a9omm\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0306106761/p559243.jpg\" alt=\"打开IIS新\" placement=\"break\" class=\"image break\"></p></li><li id=\"b2823b08a9467\"><p id=\"b2823b09a9ls1\">在FTP主页的<b data-tag=\"uicontrol\" id=\"b5913010a9ken\" class=\"uicontrol\"><b>FTP</b></b>区域，双击<b data-tag=\"uicontrol\" id=\"af077380a9iki\" class=\"uicontrol\"><b>FTP SSL设置</b></b>。 <img id=\"b2823b0aa9ytv\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1306106761/p559293.jpg\" alt=\"FTP主页新图\" placement=\"break\" class=\"image break\"></p></li><li id=\"b2823b0ba9et5\"><p id=\"b2823b0ca9e4l\">在<b data-tag=\"uicontrol\" id=\"0d57f930a9mdc\" class=\"uicontrol\"><b>FTP SSL设置</b></b>区域，将<b data-tag=\"uicontrol\" id=\"1967e830a9wek\" class=\"uicontrol\"><b>SSL 策略</b></b>设置为<b data-tag=\"uicontrol\" id=\"76248110a9w8g\" class=\"uicontrol\"><b>允许 SSL 连接</b></b>，然后在<b data-tag=\"uicontrol\" id=\"8c5978a0a90cg\" class=\"uicontrol\"><b>操作</b></b>列单击<b data-tag=\"uicontrol\" id=\"8f3f5a80a98g5\" class=\"uicontrol\"><b>应用</b></b>。 <img id=\"b2823b0da9eug\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1306106761/p559300.jpg\" alt=\"勾选SSL连接新图\" placement=\"break\" class=\"image break\"></p></li><li id=\"b2823b0ea9g8p\"><p id=\"b2823b0fa93v0\">再次访问该FTP站点。</p></li></ol></div></main>\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/ecs-instance-through-browser-console-login-pagoda-service-panel", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>ECS实例上无法通过浏览器登录宝塔服务面板控制台如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>ECS实例上无法通过浏览器登录宝塔服务面板控制台如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-13 18:32:11</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"cd3d6ef096y7v\"><p data-tag=\"shortdesc\" id=\"cd43897596kpa\" class=\"shortdesc\">本文介绍在ECS实例上无法通过浏览器登录宝塔服务面板控制台的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"7d211d70a7kkb\">在ECS实例中部署了宝塔服务面板控制台，但是通过浏览器输入<code data-tag=\"code\" class=\"code\">ECS实例公网IP:端口</code>的方式，无法访问宝塔服务面板控制台，如图所示：<img id=\"7d211d71a7hi0\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p556979.jpg\" alt=\"无法访问宝塔面板问题现象\" placement=\"break\" width=\"750\" class=\"image break\"></p><h2 id=\"4rM4I\">问题原因</h2><p id=\"9114d790a7tev\">出现该问题可能有如下原因：</p><ul id=\"cd43897a9605x\"><li id=\"cd43897b96t3o\"><p id=\"cd43897c96cwn\">宝塔面板服务没有正常启动。</p></li><li id=\"cd43b08096anz\"><p id=\"cd43b08196iyf\">安全组中没有添加宝塔服务对应端口的规则。</p></li></ul><h2 id=\"AywdZ\">解决方案</h2><h3 id=\"998d1db0a7z7q\"><b>开启宝塔面板服务</b></h3><ol id=\"998d1db1a7dxe\"><li id=\"998d1db2a7a6a\"><p id=\"998d1db3a79mz\">远程连接ECS实例。</p><p id=\"998d1db4a7nc6\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"998d44c0a7lft\"><p id=\"998d44c1a72ac\">查看宝塔服务是否运行。</p><ul id=\"998d44c2a7xg3\"><li id=\"998d44c3a7bu0\"><p id=\"998d44c4a7oho\">Linux实例：</p><p id=\"998d44c5a7shf\">执行如下命令，查看宝塔服务是否运行。</p><pre id=\"998d44c6a7s4l\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>/etc/init.d/bt status</code></pre><ul id=\"998d44c7a7kgy\"><li id=\"998d44c8a7x5a\"><p id=\"998d44c9a7yh5\">如果宝塔服务状态为<code data-tag=\"code\" class=\"code\">running</code>，回显示例如下，则表示宝塔服务已运行。您需要执行下一步，查看宝塔服务运行端口。</p><img id=\"998d44cba76ef\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p556521.jpg\" alt=\"20230207111810\" placement=\"break\" class=\"image break\"></li><li id=\"998d44cca7aa8\"><p id=\"998d44cda7qrd\">如果宝塔服务状态为<code data-tag=\"code\" class=\"code\">not running</code>，回显示例如下，则表示宝塔服务未运行。此时，您需要执行如下操作，启动宝塔服务。</p><img id=\"998d44cfa7fh1\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p556522.jpg\" alt=\"20230207111949\" placement=\"break\" class=\"image break\"><ol id=\"998d44d0a7lrc\"><li id=\"998d44d1a7bs1\"><p id=\"998d44d2a7mo6\">执行如下命令，启动宝塔服务。</p><pre id=\"998d44d3a7kro\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>/etc/init.d/bt start</code></pre></li><li id=\"998d44d4a7ode\"><p id=\"998d44d5a7vcs\">执行如下命令，查看宝塔服务运行状态。</p><pre id=\"998d44d6a7m49\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>/etc/init.d/bt status</code></pre><ul id=\"998d44d7a7lft\"><li id=\"998d44d8a7ei2\"><p id=\"998d44d9a78uw\">如果宝塔服务状态为<code data-tag=\"code\" class=\"code\">running</code>，回显示例如下，则表示宝塔服务已成功启动。您需要执行下一步，查看宝塔服务运行端口。<img id=\"998d44daa7fch\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p556524.jpg\" alt=\"20230207112431\" placement=\"break\" class=\"image break\"></p></li><li id=\"998d44dba797u\"><p id=\"998d44dca72cw\">如果宝塔服务状态仍然为<code data-tag=\"code\" class=\"code\">not running</code>，则您需要查看宝塔服务启动过程中的日志报错信息来判断并排查该问题。</p></li></ul></li></ol></li></ul></li><li id=\"998d44dda75av\"><p id=\"998d44dea7m4u\">Windows实例：</p><ol id=\"998d44dfa7i6h\"><li id=\"998d44e0a77yk\"><p id=\"998d44e1a7azv\">选择如下任意一种方式打开宝塔面板。</p><ul id=\"998d44e2a787i\"><li id=\"998d44e3a7hja\"><p id=\"998d44e4a7q7t\">方式一：在Windows操作系统桌面上，双击<img id=\"998d44e5a7uxd\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p557138.jpg\" alt=\"宝塔快捷图标\" placement=\"inline\" width=\"30\" class=\"image inline\">图标。</p></li><li id=\"998d44e6a7idz\"><p id=\"998d44e7a7j26\">方式二：在Windows操作系统桌面左下角，选择<img id=\"998d44e8a7cyy\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p557140.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"30\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"63977120a6r0h\" class=\"uicontrol\"> &gt; 宝塔面板</b>。</p></li></ul></li><li id=\"998d44e9a76ss\"><p id=\"998d44eaa7ur5\">在<b data-tag=\"uicontrol\" id=\"15b1eca0a6h6q\" class=\"uicontrol\">宝塔Windows面板工具箱</b>页面，查看宝塔服务运行信息。 </p><p id=\"998d44eba7vh4\">您可以查看并记录宝塔面板相关信息，例如宝塔服务使用的端口、安全入口等，如下图所示。<img id=\"998d44eca7djb\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p557157.jpg\" alt=\"宝塔面板工具箱\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"998d44eda7hu0\"><p id=\"998d44eea7536\">选择如下任意一种方式查看是否可以使用<code data-tag=\"code\" class=\"code\">localhost</code>登录宝塔面板。</p><ul id=\"998d44efa7glr\"><li id=\"998d44f0a7k5c\"><p id=\"998d44f1a7cl7\">在<b data-tag=\"uicontrol\" id=\"e5176470a6tnp\" class=\"uicontrol\">宝塔Windows面板工具箱</b>页面，单击<b data-tag=\"uicontrol\" id=\"cb318c20a6d2a\" class=\"uicontrol\">打开面板</b>。</p></li><li id=\"998d44f2a7a6m\"><p id=\"998d44f3a7le9\">打开浏览器输入<code data-tag=\"code\" class=\"code\">localhost:&lt;宝塔服务使用的端口&gt;[安全入口]</code>，然后按<code data-tag=\"code\" class=\"code\">Enter</code>键访问宝塔面板。</p><ul id=\"998d44f4a7ofe\"><li id=\"998d44f5a7fjr\"><p id=\"998d44f6a72dd\"><code data-tag=\"code\" class=\"code\">&lt;宝塔服务使用的端口&gt;</code>：即<b data-tag=\"uicontrol\" id=\"e5176471a649o\" class=\"uicontrol\">宝塔Windows面板工具箱</b>页面的<b data-tag=\"uicontrol\" id=\"438d2560a65oa\" class=\"uicontrol\">端口</b>，以<code data-tag=\"code\" class=\"code\">8888</code>为例。</p></li><li id=\"998d44f9a73rk\"><p id=\"998d44faa750r\"><code data-tag=\"code\" class=\"code\">[安全入口]</code>：如果宝塔面板开启了安全入口，则浏览器的访问地址必须加入[安全入口]地址，否则访问宝塔面板时会提示“404”错误。该参数的值为<b data-tag=\"uicontrol\" id=\"e5176472a6xpv\" class=\"uicontrol\">宝塔Windows面板工具箱</b>页面的<b data-tag=\"uicontrol\" id=\"36182b50a6s0z\" class=\"uicontrol\">安全入口</b>，以<code data-tag=\"code\" class=\"code\">/ttpRV8nM</code>为例。</p></li></ul></li></ul><p id=\"998d44fba7dxw\">如图所示，使用浏览器访问<code data-tag=\"code\" class=\"code\">localhost:8888/ttpRV8nM</code>成功，即成功使用<code data-tag=\"code\" class=\"code\">localhost</code>登录宝塔面板。此时，您需要执行下一步，查看宝塔服务运行端口。<img id=\"998d44fca7ldr\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p557194.jpg\" alt=\"成功访问宝塔面板\" placement=\"break\" width=\"750\" class=\"image break\"></p><div type=\"note\" id=\"998d44fda73sg\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"998d44fea7zxl\">如果仍然无法访问宝塔面板，您可以在<b data-tag=\"uicontrol\" id=\"79f6892ea678c\" class=\"uicontrol\">宝塔Windows面板工具箱</b>页面，单击<b data-tag=\"uicontrol\" id=\"79f6892fa69hz\" class=\"uicontrol\">检查占用</b>获取该端口的使用情况或者单击<b data-tag=\"uicontrol\" id=\"79f68930a6csm\" class=\"uicontrol\">重启面板</b>后重新访问宝塔面板。</p></div></div></li></ol></li></ul></li><li id=\"998d44ffa752f\"><p id=\"998d4500a7ihi\">查看宝塔服务运行端口。</p><ul id=\"998d4501a7fe5\"><li id=\"998d4502a7vn9\"><p id=\"998d4503a71pt\">Linux实例：</p><ul id=\"998d4504a7307\"><li id=\"998d4505a71bs\"><p id=\"998d4506a7l1f\">执行如下命令，查看当前宝塔面板端口。</p><pre id=\"998d4507a7so9\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>cat /www/server/panel/data/port.pl</code></pre></li><li id=\"998d4508a7kj8\"><p id=\"998d4509a7ibf\">执行如下命令，通过查看宝塔服务对应的<code data-tag=\"code\" class=\"code\">pid</code>来查看对应Bt-Panel服务的端口。</p><pre id=\"998d450aa7t97\" data-tag=\"codeblock\" outputclass=\"language-plaintext\" class=\"pre codeblock language-plaintext\"><code>/etc/init.d/bt status\nnetstat -tnlp |grep 32514 #32514为第一条命令返回的Bt-Panel服务对应的pid</code></pre><p id=\"998d450ba7j7b\">回显示例如下，31248端口即为当前宝塔服务使用的端口。</p><img id=\"998d450da76ws\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p556878.jpg\" alt=\"20230207122501\" placement=\"break\" class=\"image break\"></li></ul></li><li id=\"998d450ea7chx\"><p id=\"998d450fa7muz\">Windows实例：</p><ol id=\"18781231a8v19\"><li id=\"3c07a891a8wim\" docid=\"3925487\"><p id=\"998d44e1a7azv\">选择如下任意一种方式打开宝塔面板。</p><ul id=\"998d44e2a787i\"><li id=\"998d44e3a7hja\"><p id=\"998d44e4a7q7t\">方式一：在Windows操作系统桌面上，双击<img id=\"998d44e5a7uxd\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p557138.jpg\" alt=\"宝塔快捷图标\" placement=\"inline\" width=\"30\" class=\"image inline\">图标。</p></li><li id=\"998d44e6a7idz\"><p id=\"998d44e7a7j26\">方式二：在Windows操作系统桌面左下角，选择<img id=\"998d44e8a7cyy\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p557140.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"30\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"63977120a6r0h\" class=\"uicontrol\"> &gt; 宝塔面板</b>。</p></li></ul></li><li id=\"ea3914f0a8u29\"><p id=\"ea3914f1a80gu\">在<b data-tag=\"uicontrol\" id=\"f9005139a8ld8\" class=\"uicontrol\">宝塔Windows面板工具箱</b>页面，查看宝塔服务运行端口。 </p><p id=\"ea3914f2a8t1r\">您可以查看并记录宝塔服务运行端口，如图所示，8888即为宝塔服务运行端口。<img id=\"ea3914f3a8rwk\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p557157.jpg\" alt=\"宝塔面板工具箱\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li></ul></li><li id=\"998d4511a7nvv\"><p id=\"998d4512a7uib\">重新在浏览器输入<code data-tag=\"code\" class=\"code\">ECS实例公网IP:端口</code>访问宝塔服务面板控制台。</p><ul id=\"998d4513a71on\"><li id=\"998d4514a7brd\"><p id=\"998d4515a7c11\">成功访问，该问题解决。</p></li><li id=\"998d4516a7fao\"><p id=\"998d4517a7fcc\">仍然不能访问，请继续执行<a title=\"\" class=\"xref\" href=\"#998d4518a7zx1\">在安全组中添加宝塔服务对应端口的规则</a>进行排查。</p></li></ul></li></ol><h3 id=\"998d4518a7zx1\"><b>在安全组中添加宝塔服务对应端口的规则</b></h3><div type=\"note\" id=\"998d4519a7vaa\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"998d451aa7wwl\">本节操作以宝塔服务对应端口为8888为例，您的宝塔服务对应端口具体的获取方式，请参见<a title=\"\" class=\"xref\" href=\"#998d1db0a7z7q\">开启宝塔面板服务</a>的步骤3。</p></div></div><ol id=\"998d451ba7jmb\"><li data-spm-anchor-id=\"a2c9r.14518950.0.i1.310f5e3bFdBaav\" id=\"998d451ca72er\"><p id=\"998d451da7jd5\">登录<a class=\"\" target=\"_blank\" href=\"https://ecs.console.aliyun.com/\">ECS管理控制台</a>。</p></li><li id=\"998d451ea7gxr\"><p id=\"998d451fa765d\">在左侧导航栏，选择<b data-tag=\"uicontrol\" id=\"09ed9590a3biw\" class=\"uicontrol\"><b>实例与镜像 &gt; 实例</b></b>。</p></li><li id=\"998d4520a7ow5\"><p id=\"998d4521a7y79\">在顶部菜单栏左上角处，选择地域。</p></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i1.310f5e3bFdBaav\" id=\"998d4522a7pgz\"><p id=\"998d4523a7wdp\">在实例列表页面，单击ECS实例对应的实例ID。</p></li><li data-spm-anchor-id=\"a2c9r.14518950.0.i1.310f5e3bFdBaav\" id=\"998d4524a7qla\"><p id=\"998d4525a7e1l\">在<b data-tag=\"uicontrol\" id=\"33698c80a3qn0\" class=\"uicontrol\"><b>实例详情</b></b>页面，单击<b data-tag=\"uicontrol\" id=\"3a94b930a3jyc\" class=\"uicontrol\">安全组</b>页签。</p></li><li id=\"998d4526a7yhv\"><p id=\"998d4527a7l3a\">单击<b data-tag=\"uicontrol\" id=\"5aa1fc10a3eln\" class=\"uicontrol\"><b>安全组列表</b></b>页签，然后单击安全组ID。</p></li><li id=\"998d4528a76l4\"><p id=\"998d4529a7n8x\">在安全组规则页面，添加TCP协议8888端口的访问规则或者添加允许访问所有端口的规则。 </p><div type=\"note\" id=\"998d452aa7uz2\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"998d452ba70km\"><li id=\"998d452ca7i7c\"><p id=\"998d452da752v\">如果没有添加对应的安全组规则，则无法访问8888端口，后续将导致在ECS实例上无法访问宝塔面板。</p></li><li id=\"998d452ea7vy6\"><p id=\"998d452fa745t\">建议只开放对应端口的安全组规则，避免因开放所有端口的安全组规则造成安全损失。</p></li></ul></div></div><p id=\"998d4530a7nd9\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。\n</p><p id=\"998d4531a71gq\">以只开放添加TCP协议8888端口的访问规则为例，操作步骤如下：</p><ol id=\"998d4532a7s62\"><li id=\"998d4533a7vio\"><p id=\"998d4534a743w\">在安全组规则页面，单击<b data-tag=\"uicontrol\" id=\"66359680a3lni\" class=\"uicontrol\">入方向</b>页签。</p></li><li id=\"998d4535a75fl\"><p id=\"998d4536a7cm7\">单击<b data-tag=\"uicontrol\" id=\"71bd6690a3u42\" class=\"uicontrol\">手动添加</b>。</p></li><li id=\"998d4537a7cpr\"><p id=\"998d4538a74cl\">填写访问规则，然后在<b data-tag=\"uicontrol\" id=\"0960fb10a3p2w\" class=\"uicontrol\">操作</b>列单击<b data-tag=\"uicontrol\" id=\"ba492d90a342f\" class=\"uicontrol\">保存</b>。</p><ul id=\"998d4539a7v5a\"><li id=\"998d453aa7mzk\"><p id=\"998d453ba7fjk\"><b data-tag=\"uicontrol\" id=\"0e973590a3jf2\" class=\"uicontrol\">授权策略</b>：选择<b data-tag=\"uicontrol\" id=\"14614ba0a3cic\" class=\"uicontrol\">允许</b>。</p></li><li id=\"998d453ca7vmb\"><p id=\"998d453da72wo\"><b data-tag=\"uicontrol\" id=\"16f1ba80a3v18\" class=\"uicontrol\">协议类型</b>：选择<b data-tag=\"uicontrol\" id=\"1ce41910a3ogu\" class=\"uicontrol\">自定义 TCP</b>。</p></li><li id=\"998d453ea7gn2\"><p id=\"998d453fa7xx9\"><b data-tag=\"uicontrol\" id=\"21a79490a32j7\" class=\"uicontrol\">端口范围</b>：选择<b data-tag=\"uicontrol\" id=\"26453890a33ke\" class=\"uicontrol\"><b>8888/8888</b></b><b>。</b></p></li><li id=\"998d4540a7l4a\"><p id=\"998d4541a7pyk\"><b data-tag=\"uicontrol\" id=\"3d54b1a0a3zuk\" class=\"uicontrol\">授权对象</b>：选择<b data-tag=\"uicontrol\" id=\"3f678c10a37p1\" class=\"uicontrol\">0.0.0.0/0</b>。</p></li><li id=\"998d4542a7rdy\"><p id=\"998d4543a7l90\"><b data-tag=\"uicontrol\" id=\"41cc7e20a3jf8\" class=\"uicontrol\">描述</b>：根据实际情况填写。</p></li></ul><img id=\"998d4545a7nnz\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7272485761/p555885.jpg\" alt=\"在安全组中添加8888端口\" placement=\"break\" width=\"750\" class=\"image break\"></li></ol></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/within-the-ecs-instance-visit-the-web-site-suggests-nginx-502-bad-gateway-error", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>在ECS实例内访问网站提示“Nginx 502 bad gateway”错误如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在ECS实例内访问网站提示“Nginx 502 bad gateway”错误如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-14 10:10:28</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"ec8c006095vx6\"><p data-tag=\"shortdesc\" id=\"ec92de30950c2\" class=\"shortdesc\">本文介绍在ECS实例上使用浏览器访问网站时，提示“Nginx 502 Bad Gateway”错误的问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"bba8cf90a0prn\">问题原因</h2><p id=\"dd38aef0a6qnr\">“Nginx 502 Bad Gateway”错误表示访问请求的php-cgi进程已经开始执行，但是由于读取资源失败等原因没有执行完毕，导致php-cgi进程终止。</p><p id=\"dd38aef1a67c3\">常见的问题原因如下：</p><ul id=\"80606241a8sx4\"><li id=\"373d32b1a8js9\"><p id=\"373d32b0a8s85\"><a title=\"\" class=\"xref\" href=\"#0f607f20a67aa\">磁盘空间不足</a></p></li><li id=\"3c882db1a8pf9\"><p id=\"3c882db0a8zl2\"><a title=\"\" class=\"xref\" href=\"#0f607f2fa6fi1\">php-cgi进程数不够用</a></p></li><li id=\"46eab7a1a87n3\"><p id=\"46eab7a0a823s\"><a title=\"\" class=\"xref\" href=\"#0f607f34a6uzz\">PHP执行超时</a></p></li><li id=\"4be8cb21a8qu8\"><p id=\"4be8cb20a88ay\"><a title=\"\" class=\"xref\" href=\"#0f60a634a6zne\">php-cgi进程异常中断</a></p></li></ul><h2 id=\"bba8cf9ca0exo\">解决方案</h2><p id=\"bba8cf9da0pjl\">您可以参考如下操作进行逐一排查。</p><div type=\"note\" id=\"bba8cf9ea07eq\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"bba8cf9fa0r4c\">本文中<code data-tag=\"code\" class=\"code\">/usr/local/php/etc/php-fpm.conf</code>、<code data-tag=\"code\" class=\"code\">/usr/local/php/etc/php.ini</code>、<code data-tag=\"code\" class=\"code\">/etc/nginx.conf</code>等配置文件需要根据安装环境不同来更换路径，请以您的实际部署安装的软件路径为准。</p></div></div><h3 id=\"0f607f20a67aa\"><b>磁盘空间不足</b></h3><p id=\"0f607f21a6hqp\">如果访问网站时，直接提示“Nginx 502 Bad Gateway”错误，可能是ECS实例的磁盘空间不足导致。您需要执行如下步骤进行排查：</p><ol id=\"0f607f22a6os3\"><li id=\"0f607f23a6zrs\"><p id=\"0f607f24a6z2a\">远程登录ECS实例。</p><p id=\"0f607f25a68r2\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"0f607f26a6fzm\"><p id=\"0f607f27a6yj2\">执行<code data-tag=\"code\" class=\"code\">df -h</code>命令，查看是否磁盘空间是否充足。</p><ul id=\"0f607f28a628j\"><li id=\"0f607f29a6cjh\"><p id=\"0f607f2aa6aj9\">如果磁盘空间充足，则该问题不是由于磁盘空间问题导致。</p></li><li id=\"0f607f2ba6kzw\"><p id=\"0f607f2ca6a32\">如果磁盘空间不足，则您需要扩容云盘，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/overview-19\">云盘扩容指引</a>。</p></li></ul><img id=\"0f607f2ea6kyj\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2187575761/p555025.jpg\" alt=\"df -h\" placement=\"break\" class=\"image break\"></li></ol><h3 id=\"0f607f2fa6fi1\">php-cgi进程数不够用</h3><p id=\"0f607f30a617m\">如果在已安装Nginx且可以正常访问网站的环境中，运行一段时间才后出现“Nginx 502 Bad Gateway”错误，则可能是php-cgi进程数不够用导致。</p><p id=\"0f607f31a63ja\">此时，您需要修改<code data-tag=\"code\" class=\"code\">/usr/local/php/etc/php-fpm.conf</code>配置文件，将文件中<code data-tag=\"code\" class=\"code\">pm.max_children</code>参数的值调高，即增加php-cgi进程数。</p><img width=\"750\" placement=\"break\" alt=\"20230119182959\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1651705761/p552108.jpg\" id=\"0f607f33a63mx\" class=\"image break\"><h3 id=\"0f607f34a6uzz\"><b>PHP执行超时</b></h3><p id=\"0f60a630a6k62\">如果访问网站时，直接提示“Nginx 502 Bad Gateway”错误，可能是PHP执行超时导致。</p><p id=\"0f60a631a6yrl\">此时，您需要修改<code data-tag=\"code\" class=\"code\">/usr/local/php/etc/php.ini</code>配置文件，将文件中<code data-tag=\"code\" class=\"code\">max_execution_time</code>参数的值改为<code data-tag=\"code\" class=\"code\">300</code>。如下图所示，您需要将该参数的值从<code data-tag=\"code\" class=\"code\">30</code>修改为<code data-tag=\"code\" class=\"code\">300</code>。</p><img width=\"750\" placement=\"break\" alt=\"20230119182518\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1651705761/p552106.jpg\" id=\"0f60a633a6wpq\" class=\"image break\"><h3 id=\"0f60a634a6zne\"><b>php-cgi进程异常中断</b></h3><p id=\"0f60a635a6w44\">如果访问网站时，直接提示“Nginx 502 Bad Gateway”错误，可能是php-cgi进程异常中断导致。您需要执行如下步骤进行法排查：</p><ol id=\"0f60a636a6omv\"><li id=\"0f60a637a6ipy\"><p id=\"0f60a638a6bef\">远程登录ECS实例。</p><p id=\"0f60a639a668r\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"0f60a63aa6ni5\"><p id=\"0f60a63ba6w7n\">依次执行如下命令，查看php fastcgi的进程数和<code data-tag=\"code\" class=\"code\">pm.max_children</code>参数的值。 </p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"0f60a63ca6llh\" class=\"pre codeblock language-javascript\"><code>netstat -anop | grep php-cgi | wc -l\nnetstat -anpo | grep php-fpm | wc -l</code></pre></li><li id=\"0f60a63da6m2w\"><p id=\"0f60a63ea62va\">执行如下命令，查看当前进程。</p><pre outputclass=\"language-javascript\" data-tag=\"codeblock\" id=\"0f60a63fa6zbl\" class=\"pre codeblock language-javascript\"><code>ps aux | grep php-fpm </code></pre><p id=\"0f60a640a6akz\">回显示例如下，查看fastcgi、php-fpm的进程数。如果进程数大于或等于5个，则表示需要增加进程数。 <img id=\"0f60a641a65pp\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5475014761/p519413.png\" width=\"750\" class=\"image break\"></p></li><li id=\"0f60a642a643g\"><p id=\"0f60a643a64y6\">修改<code data-tag=\"code\" class=\"code\">/usr/local/php/etc/php-fpm.conf</code>配置文件中的相关参数。 </p><ul id=\"0f60a644a6uwa\"><li id=\"0f60a645a68x6\"><p id=\"0f60a646a6pth\">将<code data-tag=\"code\" class=\"code\">pm.max_children</code>参数的值修改为<code data-tag=\"code\" class=\"code\">5</code>，表示支持5个进程。</p><div id=\"0f60a647a6nq7\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"0f60a648a6efe\"><code data-tag=\"code\" class=\"code\">pm.max_children</code>最多支持设置5个进程。按照每个进程20 MB内存，最多支持100 MB，即资源消耗时间为1分钟。如果<code data-tag=\"code\" class=\"code\">pm.max_children</code>增多，则php-cgi的进程增多，进程处理速度就会加快、排队的请求就会变少。但是设置<code data-tag=\"code\" class=\"code\">pm.max_children</code>也需要根据服务器的性能进行设定，一台服务器正常情况下，每一个php-cgi进程所耗费的内存在20 MB左右，您需要根据实际购买的服务器内存来决定<code data-tag=\"code\" class=\"code\">pm.max_children</code>的值。</p></div></div><img id=\"0f60a64aa63b5\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5475014761/p519414.png\" width=\"750\" class=\"image break\"></li><li id=\"0f60a64ba6url\"><p id=\"0f60a64ca6b2u\">将<code data-tag=\"code\" class=\"code\">request_terminate_timeout</code>参数的值修改为<code data-tag=\"code\" class=\"code\">60</code>，表示内存回收机制为1分钟（60秒）。</p><div id=\"0f60a64da6mgq\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"0f60a64ea66gt\"><code data-tag=\"code\" class=\"code\">request_terminate_timeout</code>的值可以根据服务器的性能进行设定，常见设置为60秒。通常服务器性能越好，您可以设置的值越高。</p></div></div><img id=\"0f60a650a6oga\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5475014761/p519415.png\" width=\"750\" class=\"image break\"></li></ul></li><li id=\"0f60a651a6q6q\"><p id=\"0f60a652a62yd\">如果PHP进程的执行时间超过了Nginx的等待时间，则您需要适当增加Nginx的<code data-tag=\"code\" class=\"code\">/etc/nginx.conf</code>配置文件中<code data-tag=\"code\" class=\"code\">fastcgi_connect_timeout</code>，<code data-tag=\"code\" class=\"code\">fastcgi_send_timeout</code>和<code data-tag=\"code\" class=\"code\">fastcgi_read_timeout</code>参数的<code data-tag=\"code\" class=\"code\">timeout</code>时间，您需要修改的参数如下：</p><img width=\"750\" id=\"0f60a654a6wll\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5475014761/p519416.png\" class=\"image break\"></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/how-do-i-resolve-the-issues-that-occur-when-i-access-iis-websites", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>IIS Web网站访问故障</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>IIS Web网站访问故障</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-04-23 11:45:45</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"408ab4f096fue\"><p data-tag=\"shortdesc\" id=\"408de94896e0e\" class=\"shortdesc\">本文介绍IIS（Internet Information Service）作为Web服务的网站，访问故障相关的问题及解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><p id=\"a624b70896lk1\">本文介绍的IIS Web网站访问故障相关问题如下：</p><ul id=\"1810bb02cedf8\"><li id=\"1810bb00cez2e\"><p id=\"16d49180ceup8\"><a title=\"\" class=\"xref\" href=\"#029f88a0cehv7\">访问部署在Windows实例上的基于IIS搭建的Web网站时，提示“500 - 内部服务器错误”，如何处理？</a></p></li><li id=\"31a669c0cepbq\"><p id=\"31a642b0cej61\"><a title=\"\" class=\"xref\" href=\"#41071a7396zvr\">如何在Windows实例的IIS网站中设置禁止通过IP地址直接访问？</a></p></li><li id=\"e560f6d1d47if\"><p id=\"e560f6d0d4zzi\"><a title=\"\" class=\"xref\" href=\"#azrJj\">基于IIS配置的网站因服务端口被占用导致无法访问，如何处理？</a></p></li><li id=\"8c351811d454j\" props=\"china\" data-cond-props=\"china\"><p id=\"8c351810d45u3\"><a title=\"\" class=\"xref\" href=\"#038cb560cd2cv\">访问基于IIS搭建的网站提示“403.14-Forbidden”错误，如何处理？</a></p></li></ul><h2 id=\"029f88a0cehv7\">访问部署在Windows实例上的基于IIS搭建的Web网站时，提示“500 - 内部服务器错误”，如何处理？</h2><h3 id=\"8abbc841cd70c\"><b>问题描述</b></h3><p id=\"a6204391cd1ex\">访问部署在Windows实例上的基于IIS搭建的Web网站时，提示“500 - 内部服务器错误”。</p><img alt=\"500éè¯¯\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p518875.png\" class=\"image break\"><h3 id=\"a85477f0cdszu\"><b>问题原因</b></h3><p id=\"a089a750cdu9z\">该提示没有提供具体的错误项，您需要先查看网站的真实报错信息，才能针对性的定位和解决问题。本文主要介绍如何查看该场景下网站的真实报错信息。</p><div type=\"note\" id=\"adebdcb1cdfz9\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"adebdcb0cdnvj\">您也可以通过网站运行过程中的常见问题排查流程，逐步排查具体问题并根据对应方案解决问题，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/what-do-i-do-if-i-cannot-access-a-website-hosted-on-an-instance\">无法访问ECS实例中运行网站的快速排查方法</a>。</p></div></div><h3 id=\"888016d0cdfl5\"><b>解决方案</b></h3><div type=\"note\" id=\"be58ac41cd6uh\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"be58ac40cdkv2\">本文操作步骤以Windows Server 2019数据中心版64位中文版为例，实际操作以您实际的Windows实例操作系统为准。</p></div></div><p id=\"b7d41fd1cdccq\">您可以执行如下操作，查看真实报错信息。</p><ol id=\"26ade022a23fq\"><li id=\"26ade020a2ecf\"><p id=\"f785e271a2mrj\">远程连接Windows实例。</p><p id=\"2cb35180a24gt\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"2f2fc331a2xss\"><p id=\"2f2fc330a2hci\">在桌面左下角，选择<img id=\"2e570f10a2tzt\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555192.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"> <b data-tag=\"uicontrol\" id=\"89141fb0a21ul\" class=\"uicontrol\">&gt;</b> <b data-tag=\"uicontrol\" id=\"74c8cfb0a28mm\" class=\"uicontrol\">服务器管理器</b>。</p><img id=\"0dd75b50a2vfx\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555189.jpg\" alt=\"打开服务器管理器\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"f41f3070a2k8d\"><p id=\"7c29d970a21w7\">在<b data-tag=\"uicontrol\" id=\"824d3310a2kxf\" class=\"uicontrol\">服务器管理器</b>页面右上角，选择<b data-tag=\"uicontrol\" id=\"85a8ba20a2qhc\" class=\"uicontrol\">工具 &gt; Internet Information Services (IIS) 管理器</b>。</p></li><li id=\"bc2381817fwaw\"><p id=\"af842110a2xoy\">在<b data-tag=\"uicontrol\" id=\"b3f4d6c0a2lwu\" class=\"uicontrol\">Internet Information Services (IIS) 管理器</b>页面左侧导航栏，单击目标网站。<img id=\"278c8380a2kib\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555206.jpg\" alt=\"查看IIS网站\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"d880edb07akk2\"><p id=\"aa8deae0a25ec\">在<b data-tag=\"uicontrol\" id=\"581a04a0a2wr4\" class=\"uicontrol\">IIS</b>区域，双击<b data-tag=\"uicontrol\" id=\"5a629510a20z3\" class=\"uicontrol\">错误页</b>。</p></li><li id=\"5b5cd391a2p3o\"><p id=\"5b5cd390a2khc\">在<b data-tag=\"uicontrol\" id=\"b0097cb1a2fw9\" class=\"uicontrol\">Internet Information Services (IIS) 管理器</b>页面右侧<b data-tag=\"uicontrol\" id=\"ab358010a2hyb\" class=\"uicontrol\">操作</b>区域中，单击<b data-tag=\"uicontrol\" id=\"aeea4ab0a29tq\" class=\"uicontrol\">编辑功能设置</b>。<img id=\"b6606310a2qyh\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555214.jpg\" alt=\"在错误页编辑功能设置\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"a8682f41a25c7\"><p id=\"a8682f40a2gwf\">在<b data-tag=\"uicontrol\" id=\"0e187110a2hn1\" class=\"uicontrol\">编辑错误页设置</b>页面，选择<b data-tag=\"uicontrol\" id=\"107c0390a2rra\" class=\"uicontrol\">详细错误</b>，然后单击<b data-tag=\"uicontrol\" id=\"127b7d10a2x89\" class=\"uicontrol\">确定</b>。<img id=\"054efdb0a2d4p\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555223.jpg\" alt=\"详细错误\" placement=\"break\" class=\"image break\"></p></li><li id=\"23024b01a2o3m\"><p id=\"1d57a3d0a22cw\">重新访问网站，并按<code data-tag=\"code\" class=\"code\"><b>Ctrl</b></code><code data-tag=\"code\" class=\"code\">+</code><code data-tag=\"code\" class=\"code\"><b>F5</b></code>键强制刷新浏览器。</p><p id=\"522084b0a2n4h\">您可以查看到网站的真实报错信息。</p></li><li id=\"599357f0cdfet\"><p id=\"599330e0cdqwz\">根据报错信息，解决相关问题后重新访问该网站。</p><p id=\"b2171a60cdaai\">网站访问成功，问题解决。</p></li></ol><h2 id=\"41071a7396zvr\">如何在Windows实例的IIS网站中设置禁止通过IP地址直接访问？</h2><h3 id=\"83befe90cd2nk\"><b>问题描述</b></h3><p id=\"3e6c45b0cdvj4\">当在Windows实例上的IIS站点配置了允许通过IP地址直接访问（即IIS中绑定了空主机头）时，可以通过IP地址直接访问到服务器中IIS的默认站点。当有域名（包括恶意域名或未备案域名等）解析到该IP地址时，会通过该域名直接访问到网站内容，存在安全风险。</p><h3 id=\"97f6d121cdrhm\"><b>问题原因</b></h3><p id=\"ab729c20cdcde\">当IIS中存在绑定空主机头时，会导致使用IP地址能够直接访问到IIS对应绑定空主机头的网站。</p><h3 id=\"9c729541cdjsn\"><b>解决方案</b></h3><div type=\"note\" id=\"5d9551f1cedxt\" docid=\"3925043\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"be58ac40cdkv2\">本文操作步骤以Windows Server 2019数据中心版64位中文版为例，实际操作以您实际的Windows实例操作系统为准。</p></div></div><p id=\"13675d70cdioo\">您可以通过删除IIS中绑定空主机头的方式来禁止通过IP地址直接访问IIS网站，操作步骤如下：</p><ol id=\"546f6490cdka7\"><li id=\"546f6491cdkxp\"><p id=\"546f6492cdw6f\">远程连接Windows实例。</p><p id=\"546f6493cd47r\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"546f6494cdhxy\"><p id=\"49026810cevxk\">打开IIS管理器。</p><ol id=\"4b2b3b81cet25\"><li id=\"3e1b92f0cezvd\"><p id=\"3e1b6be0cen20\">在桌面左下角，选择<img id=\"546f6496cdudg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555192.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"> <b data-tag=\"uicontrol\" id=\"6d0b57c1cdg15\" class=\"uicontrol\">&gt;</b> <b data-tag=\"uicontrol\" id=\"6d0b57c2cdhql\" class=\"uicontrol\">服务器管理器</b>。</p><img id=\"546f6498cduhw\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555189.jpg\" alt=\"打开服务器管理器\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"546f6499cd375\"><p id=\"546f649acdjcy\">在<b data-tag=\"uicontrol\" id=\"6d0b57c3cdv18\" class=\"uicontrol\">服务器管理器</b>页面右上角，选择<b data-tag=\"uicontrol\" id=\"6d0b57c4cdd1y\" class=\"uicontrol\">工具 &gt; Internet Information Services (IIS) 管理器</b>。</p></li></ol></li><li id=\"4e03fe5096gp7\"><p id=\"4e03fe5196b5o\">在左侧导航栏单击目标网站，然后单击<b data-tag=\"uicontrol\" id=\"3e93be40ce4ud\" class=\"uicontrol\">操作</b>列的<b data-tag=\"uicontrol\" id=\"41468230cetcs\" class=\"uicontrol\">绑定</b>，在<b data-tag=\"uicontrol\" id=\"43798ed0cemmy\" class=\"uicontrol\">网站绑定</b>对话框的空主机头（即<b data-tag=\"uicontrol\" id=\"46e394d0cek2k\" class=\"uicontrol\">主机名</b>参数为空）基础上再绑定一个网站域名。</p><p id=\"9dcc8870cefut\">以绑定<code data-tag=\"code\" class=\"code\">example.aliyundoc.com</code>域名为例，如图所示。</p><img id=\"9afbaba0e1krv\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9841222861/p636044.png\" alt=\"绑定域名\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"05351e10cexw4\"><p id=\"0534f700cepne\">使用服务器的公网IP地址和已绑定的<code data-tag=\"code\" class=\"code\">example.aliyundoc.com</code>域名访问网站。</p><ul id=\"b94f6ef3ce2t2\"><li id=\"b94f6ef0centa\"><p id=\"3839c770cecv1\">通过服务器的公网IP和域名都可以访问该网站，如图所示。</p><p id=\"c2308900ce6ul\"><img width=\"600\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9841222861/p518964.png\" class=\"image break\"> <img width=\"600\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9841222861/p518965.png\" class=\"image break\"></p></li><li id=\"b94f6ef1ceyn5\"><p id=\"b27f0c70ceech\">如果有其他恶意域名或未备案域名（例如<code data-tag=\"code\" class=\"code\">demo.aliyundoc.com</code>）解析到了服务器的IP地址，虽然在IIS中未绑定该主机头，但是也可以成功访问该网站，如图所示。</p><img width=\"600\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9841222861/p518966.png\" class=\"image break\"></li></ul></li><li id=\"4e03fe56966un\"><p id=\"4a327f70ceqtd\">禁止通过IP地址直接访问网站。</p><ol id=\"66cbdbd1cexqo\"><li id=\"4e03fe5896ccu\"><p id=\"4e03fe599649i\">在<b data-tag=\"uicontrol\" id=\"dc20c8f0cegj3\" class=\"uicontrol\"> Internet Information Services (IIS) 管理器</b>的左侧导航栏单击目标网站，然后单击<b data-tag=\"uicontrol\" id=\"dc20c8f1ce3e4\" class=\"uicontrol\">操作</b>列的<b data-tag=\"uicontrol\" id=\"dc20c8f2cesp7\" class=\"uicontrol\">绑定</b>。</p></li><li id=\"5a1ffe20ce46o\"><p id=\"5a1fd710cezjy\">在<b data-tag=\"uicontrol\" id=\"dc20c8f3cekwt\" class=\"uicontrol\">网站绑定</b>对话框中单击空主机头（即<b data-tag=\"uicontrol\" id=\"dc20c8f4cez2g\" class=\"uicontrol\">主机名</b>参数为空），单击<b data-tag=\"uicontrol\" id=\"94e06320cedcn\" class=\"uicontrol\">删除</b>，保留您需要的域名即可。</p><p id=\"6b581022ce70n\">以保留<code data-tag=\"code\" class=\"code\">example.aliyundoc.com</code>域名为例，如图所示。<img id=\"6b581023ce071\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1644800861/p612651.png\" alt=\"添加域名\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"6a5ce740ceos9\"><p id=\"6a5cc030ce4hr\">使用其他恶意域名或未备案域名重新访问网站验证是否成功禁止通过IP地址直接访问网站。</p><p id=\"807dec30cemyr\">恶意域名或未备案域名（例如<code data-tag=\"code\" class=\"code\">demo.aliyundoc.com</code>）即使解析到服务器的IP地址，也无法正常访问该网站，如图所示，即成功禁止通过IP地址直接访问网站。<img id=\"ce891a60b028h\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1644800861/p569470.png\" alt=\"image\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li></ol><h2 id=\"azrJj\">基于IIS配置的网站因服务端口被占用导致无法访问，如何处理？</h2><h3 id=\"f2cca1a09721q\">问题描述</h3><p id=\"06e0ac40cda7s\">访问基于IIS配置的网站失败，然后在Windows实例上使用<code data-tag=\"code\" class=\"code\">netstat</code>命令查看IIS服务端口处于正常监听状态，并且网站系统进程处于运行状态。</p><h3 id=\"5e076080a2il0\"><b>问题原因</b></h3><p id=\"66cbf1e0a2dlg\">由于网站服务器端口被占用，导致无法访问网站。</p><h3 id=\"e37fb340979ee\"><b>解决方案</b></h3><div id=\"8c3a9690a2aqu\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"8c3a6f80a2lcq\">本操作步骤以网站服务端口为80端口、基于IIS配置网站的Windows实例操作系统为Windows Server 2019数据中心版64位中文版为例进行说明，具体操作以您实际的服务端口和Windows实例操作系统为准。</p></div></div><ol id=\"7f99eec796wby\"><li id=\"7f99eec896q1p\"><p id=\"8994ab41a27gi\">远程连接Windows实例。</p><p id=\"8994ab42a2dar\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"7f99eeca966o4\"><p id=\"ac559c71a25hm\">在搜索栏输入<code data-tag=\"code\" class=\"code\">cmd</code>，然后单击<b data-tag=\"uicontrol\" id=\"3a644526a21pv\" class=\"uicontrol\">命令提示符</b>。</p><img placement=\"break\" alt=\"20230120131443\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2148285761/p552165.jpg\" id=\"ac559c73a2bvh\" class=\"image break\"></li><li id=\"91ed5b70a29x1\"><p id=\"91ed3460a2lsu\">执行<code data-tag=\"code\" class=\"code\">netstat -ano | findstr 80</code>命令，检查服务端口是否被监听，即服务端口是否处于<b data-tag=\"uicontrol\" id=\"4caa2860a2gou\" class=\"uicontrol\">LISTENING</b>状态。</p><p id=\"eecaa430cd3r5\">以PID号即进程程序号为<code data-tag=\"code\" class=\"code\">4</code>的进程占用了IIS的80服务端口导致无法正常访问网站为例，回显示例如下。</p><img placement=\"break\" alt=\"80端口是否处于监听状态\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555387.jpg\" id=\"535883f0a23hy\" class=\"image break\"><ul id=\"f37dcc00cd9sn\"><li id=\"f37dcc01cdicu\"><p id=\"f37dcc04cdc2i\">服务端口监听中：</p><p id=\"2a9cf8f0cdqy3\">如果80端口处于监听状态，有可能是其他程序占用了80端口，您可以通过<code data-tag=\"code\" class=\"code\">taskkill &lt;PID&gt;</code>（命令中<code data-tag=\"code\" class=\"code\">&lt;PID&gt;</code>为程序进程号）来关闭相关程序，然后重启IIS程序。 </p><p id=\"30820ce0cdmw3\">在本示例中，您需要执行<code data-tag=\"code\" class=\"code\">taskkill 4</code>命令来关闭占用80端口的程序，然后重启IIS程序。</p><div type=\"note\" id=\"a988b760cdwyq\" props=\"china\" data-cond-props=\"china\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"aea32c80cd0l6\">重启IIS程序的具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/access-windows-instance-using-iis-deployment-sites-appear-500-19-don-t-allow-absolute-physical-path-in-xxx-xxx-error-how-to-deal-with#3504e401adjfl\">重启IIS</a>。</p></div></div></li><li id=\"1bcd29d1cdnq0\"><p id=\"1bcd29d0cdjt8\">服务端口未监听：</p><p id=\"34f808d0cdflx\">如果80端口处于未监听状态，请您重新运行IIS程序或检查网站是否处于运行状态。</p></li></ul></li><li id=\"f56e8d91cdh9p\"><p id=\"f56e8d90cdo3z\">重新访问该网站。</p><p id=\"f5c2ef22cd70h\">网站访问成功，问题解决。</p></li></ol><section id=\"24cb82f0d4epf\" props=\"china\" data-cond-props=\"china\" class=\"section\"><h2 id=\"038cb560cd2cv\">访问基于IIS搭建的网站提示“403.14-Forbidden”错误，如何处理？</h2><h3 id=\"39125539\"><b>问题描述</b></h3><p id=\"bb9c5db097xa2\">在Windows实例上，访问基于IIS搭建的网站提示“HTTP错误 403.14-Forbidden Web 服务器被配置为不列出此目录的内容”错误，如图所示：<img src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7834114761/p518987.png\" width=\"750\" class=\"image break\"></p><h3 id=\"d5639110a3rhy\"><b>问题原因</b></h3><p id=\"1f07c1c1cdo9h\">导致该问题的可能原因如下：</p><ul id=\"284be362cdmyz\"><li id=\"284be360cdn0n\"><p id=\"2ba06590cd594\">没有为请求的URL配置默认文档。更多信息，请参见<a title=\"\" class=\"xref\" href=\"#c6457381a3hsi\">配置默认文档</a>。</p></li><li id=\"2c65b161cdunl\"><p id=\"2f0143d0cdzs3\">没有在IIS网站所在Windows实例上启用目录浏览。您可以使用IIS管理器启用目录浏览，具体操作，请参见<a title=\"\" class=\"xref\" href=\"#ce9faa50a3hnz\">启用目录浏览</a>。</p></li></ul><h3 id=\"482a28f5\"><b>解决方案</b></h3><h4 id=\"c6457381a3hsi\"><b>配置默认文档</b></h4><p id=\"df504760a3dn9\">如果不希望启用目录浏览，请确保配置了默认文档并且该文件存在。</p><h4 id=\"ce9faa50a3hnz\"><b>启用目录浏览</b></h4><div type=\"note\" id=\"1d7ebb51cdlfc\" docid=\"3925043\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"be58ac40cdkv2\">本文操作步骤以Windows Server 2019数据中心版64位中文版为例，实际操作以您实际的Windows实例操作系统为准。</p></div></div><p id=\"bb9c5db297ezp\"> 使用IIS管理器启用目录浏览，操作步骤如下：</p><ol id=\"0b0f7790a33gi\"><li id=\"0b0f7791a3zxe\"><p id=\"0b0f7792a33p1\">远程连接Windows实例。</p><p id=\"0b0f7793a3wbh\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"0b0f7794a3cxv\"><p id=\"0b0f7795a3gqo\">在桌面左下角，选择<img id=\"0b0f7796a3vk7\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555192.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"> <b data-tag=\"uicontrol\" id=\"1d6dd9a5a7fit\" class=\"uicontrol\">&gt;</b> <b data-tag=\"uicontrol\" id=\"1d6dd9a6a7vjd\" class=\"uicontrol\">服务器管理器</b>。</p><img id=\"0b0f7798a397v\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555189.jpg\" alt=\"打开服务器管理器\" placement=\"break\" width=\"750\" class=\"image break\"></li><li id=\"0b0f7799a3zlc\"><p id=\"0b0f779aa3j8s\">在<b data-tag=\"uicontrol\" id=\"1d6dd9a7a7345\" class=\"uicontrol\">服务器管理器</b>页面右上角，选择<b data-tag=\"uicontrol\" id=\"1d6dd9a8a78gf\" class=\"uicontrol\">工具 &gt; Internet Information Services (IIS) 管理器</b>。</p></li><li id=\"0b0f779ba3k11\"><p id=\"0b0f779ca3lh9\">在<b data-tag=\"uicontrol\" id=\"1d6dd9a9a7fzq\" class=\"uicontrol\">Internet Information Services (IIS) 管理器</b>页面的<b data-tag=\"uicontrol\" id=\"e6945dd0a3dqv\" class=\"uicontrol\">IIS</b>区域，双击<b data-tag=\"uicontrol\" id=\"ece7ef30a3bv1\" class=\"uicontrol\">目录浏览</b>。<img id=\"f6645ee0a36hk\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555518.jpg\" alt=\"目录浏览\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"e35d4eb1a39tb\"><p id=\"e35d4eb0a31wu\">在<b data-tag=\"uicontrol\" id=\"1d6e00b0a7xqn\" class=\"uicontrol\">Internet Information Services (IIS) 管理器</b>页面右侧<b data-tag=\"uicontrol\" id=\"1d6e00b1a7n66\" class=\"uicontrol\">操作</b>区域中，单击<b data-tag=\"uicontrol\" id=\"179476e0a3oxm\" class=\"uicontrol\">启用</b>。<img id=\"3d2f14f0a3hg8\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2959217761/p555523.jpg\" alt=\"启用目录浏览\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"d3e706c1cdarr\"><p id=\"d3e706c0cdi27\">重新访问该网站。</p><p id=\"d8c70af0cdxaf\">网站访问成功，问题解决。</p></li></ol></section></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/windows-server-2012-instances-of-ecs-open-ecn-system-access-to-external-site-slower-or-tcp-connection-retransmission-problems-how-to-deal-with", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>Windows Server 2012系统的ECS实例开启ECN功能后，访问外部网站较慢或者出现TCP连接重传问题，如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows Server 2012系统的ECS实例开启ECN功能后，访问外部网站较慢或者出现TCP连接重传问题，如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-17 15:11:53</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"dcf055a0966tu\"><p data-tag=\"shortdesc\" id=\"dcf4745796qq4\" class=\"shortdesc\">本文介绍在Windows Server 2012系统的ECS实例开启ECN（Explicit Congestion Notification）功能后，出现访问外部网站变慢或者TCP连接重传问题的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"YcJWR\">问题描述</h2><p id=\"f7afc240a8cqt\">在Windows Server 2012系统的ECS实例上使用浏览器访问外部网站时，出现访问速度较慢或者TCP连接重传的问题。</p><p id=\"f7afc241a8rit\">TCP连接重传问题可以通过抓包工具（例如Wireshark）进行核实，如图所示，在抓包结果的同一个TCP序列号（<b data-tag=\"uicontrol\" id=\"111874f0a8fy3\" class=\"uicontrol\">Sequence Number</b>）和确认号（<b data-tag=\"uicontrol\" id=\"13610560a8mk4\" class=\"uicontrol\">Acknowledgment Number</b>）的<b data-tag=\"uicontrol\" id=\"293df1e0a8tzp\" class=\"uicontrol\">Info</b>信息中，出现“TCP Retransmission”信息即为TCP连接重传。<img id=\"f7afc242a85ee\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p558883.jpg\" alt=\"TCP重传（打码后）\" placement=\"break\" width=\"750\" class=\"image break\"></p><h2 id=\"yErtF\">问题原因</h2><p id=\"589ad940adoac\">ECS实例上开启了ECN功能导致该问题，具体说明如下：</p><p id=\"023f2890a81ep\">当ECS实例启用了ECN功能后访问外部网站时，会向网站服务端发送带有ECN位的数据包，但在传输过程中，如果中间链路的某个设备不支持ECN功能会直接丢弃带有ECN位的数据包，从而导致该问题发生。</p><div type=\"note\" id=\"023f2891a8x8x\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"023f4fa0a8scd\">ECN的作用主要是在网络出现拥塞时通知TCP的传输层，减少TCP连接中被丢弃的数据包数量，达到避免重传、减少等待时间、减少网络抖动的效果。但是有些网络设备的配置规则不能与ECN兼容，例如打印机、路由器。这些设备会将ECN数据包视为非法数据包并丢弃，导致网络出现问题。</p></div></div><h2 id=\"TbJJk\">解决方案</h2><p id=\"2b3bb650a8p0q\">您需要在ECS实例上关闭ECN功能，具体操作如下：</p><ol id=\"2b3bb651a8rmj\"><li id=\"2b3bb652a8eyw\"><p id=\"2b3bb653a88gt\">远程连接Windows实例。</p><p id=\"2b3bb654a88mv\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"2b3bb655a8o0w\"><p id=\"2b3bb656a89eb\">打开CMD命令提示符。</p><ol id=\"2b3bb657a8how\"><li id=\"2b3bb658a8d1w\"><p id=\"2b3bb659a89bc\">单击桌面左下角<img id=\"2b3bb65aa8tqy\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556011.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，然后单击<img id=\"2b3bb65ba8rvx\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556012.jpg\" alt=\"搜索图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标。</p></li><li id=\"2b3bb65ca8e4e\"><p id=\"2b3bb65da8ajn\">在搜索框输入<code data-tag=\"code\" class=\"code\">cmd</code>。<img id=\"2b3bb65ea87ay\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556018.jpg\" alt=\"单击命令提示符\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"2b3bb65fa8hse\"><p id=\"2b3bb660a8z5j\">单击<b data-tag=\"uicontrol\" id=\"f0f5deb0a5pla\" class=\"uicontrol\">命令提示符</b>。</p><p id=\"2b3bb661a85ba\">进入<b data-tag=\"uicontrol\" id=\"2677af50a5vdd\" class=\"uicontrol\">管理员：命令提示符</b>界面。<img id=\"2b3bb662a8zew\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556021.jpg\" alt=\"进入命令提示符\" placement=\"break\" class=\"image break\"></p></li></ol></li><li id=\"2b3bb663a8iuq\"><p id=\"2b3bb664a80cb\">执行如下命令，查看TCP全局参数信息。 </p><pre id=\"2b3bb665a89b9\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netsh interface tcp show global</code></pre><p id=\"2b3bb666a868h\"> 回显信息如下，<b data-tag=\"uicontrol\" id=\"f8b69f30a5q3s\" class=\"uicontrol\">ECN 功能</b>参数的值为<b data-tag=\"uicontrol\" id=\"fb910f60a5tum\" class=\"uicontrol\">enabled</b>，则说明您的ECS实例操作系统中已开启了ECN功能。 <img height=\"168\" width=\"438\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p518216.png\" id=\"2b3bb667a8wih\" class=\"image break\"> </p></li><li id=\"2b3bb668a8ghf\"><p id=\"2b3bb669a8wsb\">执行如下命令，关闭ECN功能。 </p><pre id=\"2b3bb66aa8cav\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netsh interface tcp set global ecncapability=disabled </code></pre><img id=\"2b3bb66ca8nwg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556045.jpg\" alt=\"关闭ECN\" placement=\"break\" class=\"image break\"></li><li id=\"2b3bb66da8s8w\"><p id=\"2b3bb66ea8cvu\">执行如下命令，查看TCP全局参数的信息，确认<b>ECN 功能</b>为<b data-tag=\"uicontrol\" id=\"b9bcdc60a82ue\" class=\"uicontrol\"><b>disabled</b></b>。 </p><pre id=\"2b3bb66fa8kd8\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netsh interface tcp show global</code></pre><p id=\"2b3bb670a8qi0\">回显信息如下，<b data-tag=\"uicontrol\" id=\"66675e10a8r17\" class=\"uicontrol\">ECN 功能</b>参数的值为<b data-tag=\"uicontrol\" id=\"66675e11a8k8m\" class=\"uicontrol\">disabled</b>，则说明您的ECS实例操作系统中已关闭了ECN功能。 <img id=\"2b3bb671a8o2q\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556050.jpg\" alt=\"ECN功能关闭\" placement=\"break\" class=\"image break\"></p></li><li id=\"2b3bb672a8wpy\"><p id=\"2b3bb673a8akd\">重新访问外部网站。</p></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-cannot-use-internet-explorer-on-a-windows-instance-to-access-external-websites", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>Windows实例内无法使用Internet Explorer浏览器访问外部网站如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>Windows实例内无法使用Internet Explorer浏览器访问外部网站如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-02-13 15:51:57</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"3fd5f94096ba5\"><p data-tag=\"shortdesc\" id=\"3fdbecb196u22\" class=\"shortdesc\">本文介绍在Windows实例内无法使用Internet Explorer浏览器访问外部网站的问题描述、问题原因和解决方案。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"3fdbecb6962tf\">在Windows实例内无法使用操作系统自带的Internet Explorer浏览器访问外部网站，提示如下：</p><p id=\"13211c3096zot\"><img width=\"750\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p518495.png\" class=\"image break\"> </p><h2 id=\"4rM4I\">问题原因</h2><p id=\"3fdbecb8967o6\">在Windows实例内无法使用Internet Explorer浏览器访问外部网站，可能是如下原因导致：</p><ul id=\"3fdbecb996ujl\"><li id=\"3fdbecba963k1\"><p id=\"3fdbecbb96r7c\">ECS实例没有配置公网IP地址</p></li><li id=\"0572d4d0a77nh\"><p id=\"0572adc0a7jy2\">本地网络和DNS解析问题</p></li><li id=\"3fdbecbc960q9\"><p id=\"3fdbecbd96qso\">使用的浏览器配置问题</p></li><li id=\"3fdbecbe96lp2\"><p id=\"3fdbecbf96c4m\">IP地址安全策略等网络设置问题</p></li></ul><h2 id=\"AywdZ\">解决方案</h2><p id=\"403bb6d09fws5\">您可以通过以下步骤逐步排查，解决上述问题。</p><div id=\"83472ea196l3j\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"83472ea0961c7\">以下操作步骤以Windows Server 2019 数据中心版 64位中文版为例，实际操作以您实际的Windows实例操作系统为准。</p></div></div><h3 id=\"2342f8f0a7q0e\"><b>步骤一：排查ECS实例的公网IP</b></h3><ol id=\"5e61dc32a78fd\"><li id=\"5e61dc30a7mi9\"><p id=\"4441c7c0a7s8l\">查看ECS实例网络信息。</p><p id=\"99f41ab0a7h2v\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/view-instance-information\">查看实例信息</a>。</p><ul id=\"b983c921a7m5l\"><li id=\"b8ddc520a7itw\"><p id=\"b8dd9e10a76xy\">如果ECS实例已配置公网IP地址，则您需要继续执行<a title=\"\" class=\"xref\" href=\"#8a6f12809f3bp\">步骤二：排查网络相关设置</a>。</p></li><li id=\"fa680781a748p\"><p id=\"fa680780a72t2\">如果ECS实例未配置公网IP地址，则您需要执行下一步。</p></li></ul></li><li id=\"982f3930a79qb\"><p id=\"982f1220a7t1l\">选择如下任意一种方法，为ECS实例配置公网IP地址。</p><ul id=\"2d8cae41a7dgm\"><li id=\"2d568310a7k5o\"><p id=\"2d565c00a7lju\">方法一：</p><p id=\"3fd30680a750d\">申请弹性公网IP并绑定到ECS实例，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/document_detail/65203.html\">申请EIP</a>和<a title=\"\" class=\"xref\" href=\"/document_detail/72125.html\">绑定ECS实例</a>。</p></li><li id=\"361fcf60a7392\"><p id=\"361fa850a7x14\">方法二：</p><p id=\"50763610a7bph\">通过升级公网带宽配置来获取固定公网IP，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/modify-the-bandwidth-configurations-of-subscription-instances\">包年包月实例修改带宽</a>或<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/modify-the-bandwidth-configurations-of-pay-as-you-go-instances\">按量付费实例修改带宽</a>。</p></li><li id=\"719473c0a7prj\"><p id=\"71944cb0a7k5g\">方法三：</p><p id=\"823bc200a7e0h\">通过公网NAT网关访问互联网，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/vpc/user-guide/use-the-snat-feature-of-an-internet-nat-gateway-to-access-the-internet\">使用公网NAT网关SNAT功能访问互联网</a>。</p></li></ul></li></ol><h3 id=\"8a6f12809f3bp\"><b>步骤二：排查网络相关设置</b></h3><h4 id=\"a3ecf3819fe8j\"><b>排查本地网络</b></h4><ol id=\"5d0ea3829f38b\"><li id=\"5d0ea3809flz9\"><p id=\"c2b7a4419f1ha\">获取本地主机的公网IP地址。</p><ol id=\"7d815ef19fidh\"><li id=\"7cf17b009fu22\"><p id=\"918545b09fb16\">在桌面左下角，单击<img width=\"25\" placement=\"inline\" alt=\"搜索图标\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553311.jpg\" id=\"d25204709fzn9\" class=\"image inline\">图标。</p></li><li id=\"b15aafb19fshb\"><p id=\"b15aafb09f5s0\">输入<code data-tag=\"code\" class=\"code\">cmd</code>，然后在弹出的面板中单击<b data-tag=\"uicontrol\" id=\"51c49a02a7efj\" class=\"uicontrol\">命令提示符</b>。<img width=\"750\" placement=\"break\" alt=\"打开2019命令提示符\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553312.jpg\" id=\"61c1aed09fq7h\" class=\"image break\"></p></li><li id=\"4720f8b19fvz4\"><p id=\"4720f8b09f90u\">在命令提示符中，执行<code data-tag=\"code\" class=\"code\">curl cip.cc </code>命令。</p><ul id=\"9ff8f5a19fwv9\"><li id=\"9f6938c19fyxu\"><p id=\"9f6938c09f8yl\">如果回显中获取到本地主机的公网IP信息，如图所示，则本地主机网络正常，无需排查DNS解析问题，继续执行<a title=\"\" class=\"xref\" href=\"#3fdc3ad496a8v\">步骤三：排查Internet Explorer浏览器</a>和<a title=\"\" class=\"xref\" href=\"#3fdc3ad796lt1\">步骤四：排查IP安全策略等网络限制</a>。<img placement=\"break\" alt=\"本机网络正常\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553317.jpg\" id=\"7c23dfe09f265\" class=\"image break\"></p></li><li id=\"ecc3c5e19fx1f\"><p id=\"fd7351809fnqo\">如果回显中无法获取到本地主机的公网IP信息，如图所示，则继续执行下一步，检查本地主机网络配置。<img width=\"750\" placement=\"break\" alt=\"本机网络异常-xin\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553320.jpg\" id=\"c50b34609fmob\" class=\"image break\"></p></li></ul></li></ol></li><li id=\"6d21ef219fsp7\"><p id=\"6d21ef209fept\">检查本地主机网络配置。</p><ol id=\"e99748a19f44a\"><li id=\"e91bfe219ff29\"><p id=\"e76749409f4r9\">在桌面左下角，单击<img width=\"25\" placement=\"inline\" alt=\"搜索图标\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553311.jpg\" id=\"e76749419folw\" class=\"image inline\">图标。</p></li><li id=\"06c0f3919ffqy\"><p id=\"047ca8e09f3oh\">输入<code data-tag=\"code\" class=\"code\">控制面板</code>，然后在弹出的面板中单击<b data-tag=\"uicontrol\" id=\"51c4c113a74gj\" class=\"uicontrol\">控制面板</b>。</p></li><li id=\"493d85319fqud\"><p id=\"493d85309f20d\">在<b data-tag=\"uicontrol\" id=\"51c4c117a7t66\" class=\"uicontrol\">控制面板</b>中，选择<b data-tag=\"uicontrol\" id=\"51c4e810a7hnf\" class=\"uicontrol\">网络和Internet &gt; 网络和共享中心</b>，然后单击<b data-tag=\"uicontrol\" id=\"51c4e812a77ug\" class=\"uicontrol\">以太网</b>。<img width=\"750\" placement=\"break\" alt=\"网络和共享中心\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553326.jpg\" id=\"a91188809fejh\" class=\"image break\"></p></li><li id=\"a1f613419fijw\"><p id=\"a1f613409fedj\">在<b data-tag=\"uicontrol\" id=\"51c4e817a7ing\" class=\"uicontrol\">以太网状态</b>面板中，单击<b data-tag=\"uicontrol\" id=\"51c4e819a7yjc\" class=\"uicontrol\">详细信息</b>，然后检查是否已启用DHCP。<img width=\"750\" placement=\"break\" alt=\"以太网状态\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553329.jpg\" id=\"33d648709fbgc\" class=\"image break\"></p></li><li id=\"803e74619flnz\"><p id=\"fc7995f09fwv9\">在<b data-tag=\"uicontrol\" id=\"51c4e81ea7dzd\" class=\"uicontrol\">以太网状态</b>面板中，单击<b data-tag=\"uicontrol\" id=\"51c4e820a75k9\" class=\"uicontrol\">属性</b>，然后选择<b data-tag=\"uicontrol\" id=\"51c4e822a7vot\" class=\"uicontrol\">Internet协议版本 4（TCP/IPv4） &gt; 属性</b>并选择<b data-tag=\"uicontrol\" id=\"51c4e824a7xdg\" class=\"uicontrol\">自动获得IP地址</b>。<img width=\"750\" placement=\"break\" alt=\"勾选自动获得IP地址\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553347.jpg\" id=\"a0ea24b09fdxk\" class=\"image break\"></p></li></ol></li></ol><h4 id=\"add82a909flzr\"><b>排查DNS解析</b></h4><ol id=\"eb0dc752a02hs\"><li id=\"eb0dc750a09qe\"><p id=\"ed6ee8d2a0z9p\">远程登录ECS实例。</p><p id=\"f3d8c150a0xqs\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"1514e741a0opy\"><p id=\"67b03b90a086q\">在桌面左下角，单击<img width=\"25\" placement=\"inline\" alt=\"搜索图标\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553311.jpg\" id=\"67b03b91a06hf\" class=\"image inline\">图标。</p></li><li id=\"6a229b20a05hs\"><p id=\"6a227410a01is\">输入<code data-tag=\"code\" class=\"code\">cmd</code>，然后在弹出的面板中单击<b data-tag=\"uicontrol\" id=\"51c53635a7ibp\" class=\"uicontrol\">命令提示符</b>。<img width=\"750\" placement=\"break\" alt=\"打开2019命令提示符\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553312.jpg\" id=\"129a4a51a0n79\" class=\"image break\"></p></li><li id=\"53ded121a05qx\"><p id=\"53ded122a0y2e\">在CMD命令提示符中，执行<code data-tag=\"code\" class=\"code\">ping 外部网站域名</code>命令，检查DNS解析是否正常。</p><p id=\"53ded123a0who\">以外部网站域名为www.aliyun.com为例，执行<code data-tag=\"code\" class=\"code\">ping www.aliyun.com</code>命令。</p><ul id=\"53ded124a09yc\"><li id=\"53ded125a085t\"><p id=\"53ded126a0dm7\">如果命令回显中，解析出域名对应的IP地址，如图所示，则表示DNS解析正常，您需要继续执行<a title=\"\" class=\"xref\" href=\"#3fdc3ad496a8v\">步骤三：排查Internet Explorer浏览器</a>。<img width=\"750\" placement=\"break\" alt=\"DNS域名解析正常\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553417.jpg\" id=\"1a810430a0le2\" class=\"image break\"></p></li><li id=\"53ded127a09qd\"><p id=\"53ded128a0lzc\">如果命令回显中，未解析出域名对应的IP地址，则表示DNS解析异常。此时，您需要执行下一步操作，处理DNS异常。</p></li></ul></li><li id=\"53ded12ba020i\"><p id=\"53ded12ca0aqe\">处理DNS异常。</p><ol id=\"53ded12da0fur\"><li id=\"53ded12ea0yfh\"><p id=\"20414780a0xn0\">在桌面左下角，单击<img width=\"25\" placement=\"inline\" alt=\"搜索图标\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553311.jpg\" id=\"20414781a0vhy\" class=\"image inline\">图标。</p></li><li id=\"70c2ecf1a05f6\"><p id=\"e3c67000a0x4k\">输入<code data-tag=\"code\" class=\"code\">ncpa.cpl</code>，然后在弹出的面板中单击<b data-tag=\"uicontrol\" id=\"51c55d4da7jie\" class=\"uicontrol\">ncpa.cpl</b>。</p></li><li id=\"53ded130a0ugy\"><p id=\"53ded131a0xl0\">在<b data-tag=\"uicontrol\" id=\"51c55d51a7aan\" class=\"uicontrol\">网络连接</b>页面，右键单击对应的网卡，然后单击<b data-tag=\"uicontrol\" id=\"51c55d53a7hic\" class=\"uicontrol\">属性</b>。<img placement=\"break\" alt=\"网络连接\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553426.jpg\" id=\"550f23b0a0gx4\" class=\"image break\"></p></li><li id=\"53ded133a08bd\"><p id=\"53ded134a0a55\">在<b data-tag=\"uicontrol\" id=\"51c55d58a7si6\" class=\"uicontrol\">以太网属性</b>页面，双击<b data-tag=\"uicontrol\" id=\"51c55d5aa7gov\" class=\"uicontrol\">Internet协议版本 4（TCP/IPv4）</b>。<img placement=\"break\" alt=\"以太网属性\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553431.jpg\" id=\"c9be0cd0a0tkx\" class=\"image break\"></p></li><li id=\"53ded136a0v3p\"><p id=\"53ded137a0jgl\">选择<b data-tag=\"uicontrol\" id=\"51c58454a74cr\" class=\"uicontrol\">使用下面的DNS服务器地址</b>，并将阿里云公共DNS地址223.5.5.5和223.6.6.6分别填入<b data-tag=\"uicontrol\" id=\"51c58456a7knb\" class=\"uicontrol\">首选DNS服务器</b>和<b data-tag=\"uicontrol\" id=\"51c58458a7ugu\" class=\"uicontrol\">备用DNS服务器</b>中。 </p><div id=\"53ded139a0f35\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"53ded13aa0tyl\">您也可以填写其他公共DNS服务器的IP地址。</p></div></div><img placement=\"break\" alt=\"填入DNS地址\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553433.jpg\" id=\"145beaf0a0q1j\" class=\"image break\"></li><li id=\"53ded13ba0b2z\"><p id=\"53ded13ca0cho\">单击<b data-tag=\"uicontrol\" id=\"51c58460a78da\" class=\"uicontrol\">确定</b>，然后依次关闭配置窗口。</p></li></ol></li><li id=\"53ded13da05rv\"><p id=\"53ded13ea0vra\">再次使用Internet Explorer浏览器访问外部网站。</p><ul id=\"53ded13fa0gmi\"><li id=\"53ded140a0dv2\"><p id=\"53ded141a0r16\">如果正常访问外部网站，则表示该问题已解决。</p></li><li id=\"53ded142a0at9\"><p id=\"53ded143a0qhi\">如果仍然不能访问外部网站，则您需要继续执行<a title=\"\" class=\"xref\" href=\"#3fdc3ad496a8v\">步骤三：排查Internet Explorer浏览器</a>。</p></li></ul></li></ol><h3 data-tag=\"h3\" id=\"3fdc3ad496a8v\" class=\"h3\"><b>步骤三：排查</b>Internet Explorer<b>浏览器</b></h3><p id=\"3fdc3ad5965fh\">如果DNS解析正常但是使用系统自带的Internet Explorer浏览器还是无法访问网站，可能是由于Internet Explorer浏览器配置或者兼容性等问题导致的，您可以尝试使用Chrome、Firefox或其他浏览器做访问对比测试。如果使用其他浏览器均可以正常访问网站，则需要通过重置Internet Explorer浏览器等方式来修复Internet Explorer浏览器。</p><p id=\"7d85ea30a06rr\">重置Internet Explorer浏览器的操作步骤如下：</p><ol id=\"83dcafe2a0m8t\"><li id=\"83dcafe0a0dym\"><p id=\"87dd9eb1a0ens\">远程登录ECS实例。</p><p id=\"87dd9eb2a06x8\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"894c22d1a083y\"><p id=\"894c22d0a01hy\">打开Internet Explorer浏览器。</p></li><li id=\"90a78740a0qnq\"><p id=\"90a76030a0qr8\">在Internet Explorer浏览器的右上角，单击<img height=\"25\" width=\"25\" placement=\"inline\" alt=\"IE设置按钮\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553435.jpg\" id=\"c7f69dd0a0j0p\" class=\"image inline\">图标，然后单击<b data-tag=\"uicontrol\" id=\"51c5ab6fa7ov0\" class=\"uicontrol\">Internet 选项</b>。</p></li><li id=\"e70fe3c1a0kho\"><p id=\"e70fe3c0a0qew\">单击<b data-tag=\"uicontrol\" id=\"51c5ab73a79dm\" class=\"uicontrol\">高级</b>页签，然后单击<b data-tag=\"uicontrol\" id=\"51c5ab75a7hrz\" class=\"uicontrol\">重置</b>。<img placement=\"break\" alt=\"重置IE\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553437.jpg\" id=\"5daabe60a0jph\" class=\"image break\"></p></li><li id=\"3a853f01a0xsf\"><p id=\"3a853f00a0czj\">在提示框中，单击<b data-tag=\"uicontrol\" id=\"51c5ab7aa77tm\" class=\"uicontrol\">重置</b>。</p></li></ol><h3 data-tag=\"h3\" id=\"3fdc3ad796lt1\" class=\"h3\"><b>步骤四：排查IP安全策略等网络限制</b></h3><p id=\"3fdc3ad896af7\">如果经过上述步骤排查后，仍然无法访问网站。则您需检查Windows操作系统上是否配置了该外部网站相关的IP安全策略或者其他第三方网络管理软件，阻断了DNS解析或者对该外部网站相关的访问添加了限制，操作步骤如下：</p><ol id=\"3fdc3ad996a93\"><li id=\"3fdc3ada9692x\"><p id=\"0c5691e196j6a\">远程登录ECS实例。</p><p id=\"0c5691e296wfn\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"0e648a5196ox3\"><p id=\"b6ebb650a097g\">在桌面左下角，单击<img width=\"25\" placement=\"inline\" alt=\"搜索图标\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553311.jpg\" id=\"b6ebb651a05yv\" class=\"image inline\">图标。</p></li><li id=\"c31607f1a0kwy\"><p id=\"c035f270a0v5w\">输入<code data-tag=\"code\" class=\"code\">secpol.msc</code>，然后在弹出的面板中单击<b data-tag=\"uicontrol\" id=\"51c5d27fa7t7x\" class=\"uicontrol\">secpol.msc</b>。</p></li><li id=\"3fdc3adc965zj\"><p id=\"3fdc3add96gy2\">在<b data-tag=\"uicontrol\" id=\"51c5d283a7a7g\" class=\"uicontrol\">本地安全策略</b>页面，单击<b data-tag=\"uicontrol\" id=\"51c5d285a7m1p\" class=\"uicontrol\">IP安全策略，在本地计算机</b>，检查是否配置并指派了安全策略。 如果存在相关的IP安全策略，则需要暂停指派该策略。<img width=\"750\" placement=\"break\" alt=\"指派策略\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8101605761/p553446.jpg\" id=\"a9bcd080a0iqn\" class=\"image break\"></p></li><li id=\"3fdc3ae096i80\"><p id=\"a1dd551196r73\">再次使用Internet Explorer浏览器访问外部网站。</p><ul id=\"a1dd551296gqd\"><li id=\"a1dd551396v07\"><p id=\"a1dd551496gmf\">如果正常访问外部网站，则表示该问题已解决。</p></li><li id=\"a1dd551596gp0\"><p id=\"a1dd551696x1w\">如果仍然不能访问外部网站，则执行如下操作：</p><ol id=\"c5f8580196hz1\"><li id=\"c56a21c196rf5\"><p id=\"cad8352096172\">检查是否存在其他网络安全相关的软件设置了拦截或限制。如果存在，则解除限制后，重新访问该网站。</p></li><li id=\"d349c48196pty\"><p id=\"d349c48096a38\">检查Windows实例内的Time_Wait连接是否已释放，如果未释放则会导致访问外部网站失败，则您需要继续处理该问题，具体操作，请参见<a class=\"\" href=\"/zh/ecs/support/what-do-i-do-if-a-windows-instance-cannot-access-external-networks-when-a-large-number-of-connections-stay-in-the-time-wait-state\">Windows系统的ECS实例Time_Wait连接不释放导致访问外网失败</a>。</p></li></ol></li></ul></li></ol></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-cannot-access-an-external-network-from-a-windows-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>在Windows实例无法访问外部网络如何处理？</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>在Windows实例无法访问外部网络如何处理？</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-03-02 11:28:02</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh-CN\" class=\"icms-help-docs-content\">\n<main id=\"f9ae2d508ful2\"><p id=\"f9b559408fmdi\" data-tag=\"shortdesc\" class=\"shortdesc\">本文介绍了在Windows实例中访问外部网络不通的处理方法。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"iAj6g\">问题描述</h2><p id=\"0e2c0fc0ac4ql\">在Windows系统的ECS实例中，无法使用浏览器访问外部网络，如图所示。<img id=\"0e2c0fc1acumf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p561712.jpg\" alt=\"问题现象\" placement=\"break\" width=\"750\" class=\"image break\"></p><h2 id=\"4rM4I\">可能原因</h2><p id=\"29782110acdhi\">造成该问题的原因与<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-access-a-windows-instance-from-the-internet\">Windows实例通过外部访问网络不通的处理</a>类似，常见问题原因参考如下。</p><ul id=\"29782111acn2f\"><li id=\"29782112acui5\"><p id=\"29782113ac2mc\">公网ISP运营商的管控。</p></li><li id=\"29782114ac254\"><p id=\"29782115acnmz\">Windows实例异常行为，导致阿里云安全策略阻止该Windows实例访问外部网络。</p></li><li id=\"29782116ac6z6\"><p id=\"29782117ac70l\">Windows实例安全组配置错误。</p></li><li id=\"29782118acle1\"><p id=\"29782119ac0lc\">Windows实例性能问题。</p></li><li id=\"2978211aacfw0\"><p id=\"2978211bacnug\">Windows实例上防火墙策略限制。</p></li><li id=\"2978211cack71\"><p id=\"2978211dac6mi\">Windows实例安装的第三方杀毒软件存在限制。</p></li><li id=\"2978211eac8uo\"><p id=\"2978211fac29o\">Windows实例被病毒、木马影响。</p></li><li id=\"29782120aclip\"><p id=\"29782121acls8\">Windows实例TCP/IP协议栈自身存在Bug或者兼容性问题。</p></li><li id=\"29782122acm84\"><p id=\"29782123ac60a\">Windows实例安装了路由与远程服务后，配置错误。</p></li><li id=\"29782124acoxd\"><p id=\"29782125ac5nk\">Windows实例路由表、网络配置错误。</p></li></ul><h2 id=\"AywdZ\">解决方案</h2><p id=\"f9b5ce738fc3g\" data-tag=\"h3\" class=\"h3\">您可以通过对比测试和使用工具抓取网络包来进行问题排查，并针对性解决问题，方法如下：</p><div type=\"note\" id=\"32f442a1acviz\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"32f442a2aci84\">本文操作以Windows Server 2019 数据中心版 64位中文版操作系统为例进行测试，具体操作以您实际的操作系统版本为准。</p></div></div><h3 id=\"32f442a3acgh3\" data-tag=\"h3\" class=\"h3\"><b>方法一：对比测试排查</b></h3><p id=\"32f442a4ac7dq\">您可以根据实际情况，选择对应的排查步骤。</p><h4 id=\"32f442a7ac9cc\"><b>在云安全中心中检查Windows实例状态，确认Windows状态正常</b></h4><ol id=\"32f442a8acwpl\"><li id=\"32f442a9acya0\"><p id=\"32f442aaactw2\">在云安全中心，您可以先在云安全中心的<b data-tag=\"uicontrol\" id=\"a6ea50f0acxzx\" class=\"uicontrol\"><b>主机资产</b></b>页面查看实例是否存在风险。</p><p id=\"32f442abach95\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/security-center/user-guide/manage-servers\">管理服务器</a>。<img id=\"32f442acacflt\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p561985.jpg\" alt=\"云安全中心\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"32f442adac9yr\"><p id=\"32f442aeachb5\">您可以通过单击目标实例ID进入实例详情页面，查看ECS实例的漏洞信息、应用漏洞信息、防御信息、安全设置、安全告警处理等内容，然后针对相关告警或通知处理问题使Windows实例状态恢复正常。<img id=\"32f442afacrrr\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p561992.jpg\" alt=\"云安全中心实例详情页面zh\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"32f442b0acaiq\"><p id=\"32f442b1acryy\">检查Windows实例是否与该网站所在的特定网段网络不通。</p><p id=\"32f442b2actow\">如果仅Windows实例与该网站所在的特定网段网络不通，则可能与运营商管控有关。此时，您可以在CMD命令提示符中使用<code data-tag=\"code\" class=\"code\">ping 网段</code>命令对相关的多个网段进行对比测试，操作步骤如下：</p><div type=\"note\" id=\"32f442b3ace51\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"32f469b0aco4z\"><code data-tag=\"code\" class=\"code\">ping 网段</code>命令仅针对特定网络不通而不适合排查所有网络故障问题。</p></div></div><ol id=\"32f469b1acwz8\"><li id=\"32f469b2ac55k\"><p id=\"32f469b3ac90k\">打开命令提示符。</p><ol id=\"32f469b4acoab\"><li id=\"32f469b5acw6n\"><p id=\"32f469b6ac5l7\">在桌面左下角，单击<img id=\"32f469b7ac1dn\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562062.jpg\" alt=\"搜索图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，然后在搜索框输入<code data-tag=\"code\" class=\"code\">cmd</code>。<img id=\"32f469b8acf4y\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562048.jpg\" alt=\"输入cmd\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"32f469b9acyki\"><p id=\"32f469baac0hw\">单击<b data-tag=\"uicontrol\" id=\"88962330aci1f\" class=\"uicontrol\"><b>命令提示符</b></b>。</p><p id=\"32f469bbacnjk\">进入命令提示符。<img id=\"32f469bcact88\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562050.jpg\" alt=\"打开命令提示符\" placement=\"break\" class=\"image break\"></p></li></ol></li><li id=\"32f469bdac84w\"><p id=\"32f469beac41v\">在命令提示符中，执行<code data-tag=\"code\" class=\"code\">ping 网段</code>命令，对相关的多个网段进行对比测试。<img id=\"32f469bfaczik\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562054.jpg\" alt=\"ping不同网段\" placement=\"break\" class=\"image break\"></p></li></ol></li></ol><h4 id=\"32f469c1ac96n\"><b>在命令提示符中，执行</b><code data-tag=\"code\" class=\"code\"><b>ipconfig /all</b></code><b>命令，检查网卡配置是否正确</b></h4><ol id=\"32f469c2acp6a\"><li id=\"d2d11871acyt0\"><p id=\"ef860890acsr4\">打开命令提示符。</p><ol id=\"0ab4f4f0adwdm\"><li id=\"0ab4f4f1aduke\"><p id=\"0ab4f4f2adiam\">在桌面左下角，单击<img id=\"0ab4f4f3adp3e\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562062.jpg\" alt=\"搜索图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，然后在搜索框输入<code data-tag=\"code\" class=\"code\">cmd</code>。<img id=\"0ab4f4f4adk1i\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562048.jpg\" alt=\"输入cmd\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"0ab4f4f5adu0u\"><p id=\"0ab4f4f6ad52j\">单击<b data-tag=\"uicontrol\" id=\"4078d890adi9l\" class=\"uicontrol\"><b>命令提示符</b></b>。</p><p id=\"0ab4f4f7adham\">进入命令提示符。<img id=\"0ab4f4f8adaw3\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562050.jpg\" alt=\"打开命令提示符\" placement=\"break\" class=\"image break\"></p></li></ol></li><li id=\"e9ad2571ac33n\"><p id=\"e9ad2570acr2y\">执行<code data-tag=\"code\" class=\"code\">ipconfig /all</code>命令，查看网卡配置信息。<img id=\"32f469cfaczdq\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562061.jpg\" alt=\"检查网卡配置信息\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"32f469d0actgs\"><p id=\"32f469d1ac59p\">在桌面输入<code data-tag=\"code\" class=\"code\">ncpa.cpl</code>打开网络共享与管理中心，检查网卡状态是否正常收发。</p><ol id=\"32f469d2ac15x\"><li id=\"32f469d3acjgu\"><p id=\"32f469d4acz3z\">桌面左下角，单击<img id=\"32f469d5ac356\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562062.jpg\" alt=\"搜索图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，在搜索框输入<code data-tag=\"code\" class=\"code\">ncpa.cpl</code>，然后单击<b data-tag=\"uicontrol\" id=\"8adb02c0acg32\" class=\"uicontrol\"><b>ncpa.cpl</b></b>。<img id=\"32f469d6acxba\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562070.jpg\" alt=\"打开网络共享中心\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"32f469d7ac0qt\"><p id=\"32f469d8aczru\">在<b data-tag=\"uicontrol\" id=\"be7c7aa0acjm0\" class=\"uicontrol\"><b>网络连接</b></b>页面，双击目标网卡。</p><p id=\"32f469d9acjcn\">查看网卡状态是否正常收发，如果正常，则表示网卡正常启用。<img id=\"32f469daacq5l\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562079.jpg\" alt=\"查看网络收发\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li></ol><h4 id=\"32f469dcac0ku\"><b>在命令提示符中，通过</b><code data-tag=\"code\" class=\"code\"><b>nslookup</b></code><b>或</b><code data-tag=\"code\" class=\"code\"><b>ping</b></code><b>命令，检查是否存在DNS解析问题</b></h4><p id=\"32f469ddacfvt\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/the-domain-name-of-a-website-is-resolved-to-different-ip-addresses-on-a-windows-instance\">Windows实例内部自定义域名解析与本地网络域名解析不一致导致无法访问网站如何处理？</a><span data-tag=\"ph\" id=\"32f469deac3kq\" props=\"china\" data-cond-props=\"china\" class=\"ph\">或<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/when-you-ping-the-internet-address-of-a-windows-instance-the-system-prompts-general-fault\">Windows实例ping外网地址提示“一般故障”</a></span>。\n</p><h4 id=\"32f469e0ackur\"><b>检查Windows实例是否存在性能问题</b></h4><p id=\"32f469e1ac3tr\">Windows实例可能存在CPU资源占用高、内存耗尽、带宽占用满、网络动态端口耗尽等问题，您可以通过如下方式进行检查：</p><ul id=\"56e38483b7k86\"><li id=\"56e38480b7jih\"><p id=\"4ae96aa0b7phb\">使用工具进行分析，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/introduction-to-windows-memory-analysis-tools\">Windows系统内存分析工具的介绍</a>。</p></li><li id=\"56e38481b7qzs\"><p id=\"507b0b90b7fv2\">通过ECS控制台或云监控控制台查看Windows实例相关性能信息，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/view-the-monitoring-information-of-an-ecs-instance\">查看实例监控信息</a>。\n</p></li></ul><h4 id=\"32f469e3acyyo\"><b>检查Windows实例的安全组规则是否正确</b></h4><p id=\"32f469e4ack66\">您可以查看Windows实例的安全组规则，如果配置错误，您需要更改安全组配置为允许所有网络通信进行测试。</p><ul id=\"32f469e5acgxj\"><li id=\"32f469e6acomr\"><p id=\"32f469e7ac53e\">查看Windows实例安全组规则的具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/view-instance-information#section-9va-vyz-r9p\">在实例详情页面查看单个实例信息</a>。</p></li><li id=\"32f469e8acoeh\"><p id=\"32f469e9acocg\">添加或修改安全组规则的具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>或<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/modify-a-security-group-rule\">修改安全组规则</a>。</p></li></ul><h4 id=\"32f469ebacyb6\"><b>检查防火墙策略配置是否正确</b></h4><p id=\"32f469ecacelh\">您可以先禁用Windows实例上的防火墙，然后测试是否可以正常访问。如果防护墙禁用后，可以访问，则您需要检查防火墙策略配置，具体操作如下：</p><ol id=\"32f469edaco9n\"><li id=\"32f469eeacf6b\"><p id=\"32f469eface16\">在桌面左下角，选择<b data-tag=\"uicontrol\" id=\"2534f5f0actsx\" class=\"uicontrol\"><img id=\"12a1b630aczwn\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562158.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"><b> &gt; 服务器管理器</b></b>。<img id=\"32f469f0ac7f4\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562161.jpg\" alt=\"打开服务器管理器\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"32f469f1acbts\"><p id=\"32f469f2acyl7\">在<b data-tag=\"uicontrol\" id=\"94911be0acm6k\" class=\"uicontrol\"><b>服务器管理器</b></b>页面，单击左侧导航栏的<b data-tag=\"uicontrol\" id=\"9be02440acgmj\" class=\"uicontrol\"><b>本地服务器</b></b>。</p></li><li id=\"32f469f3acv3f\"><p id=\"32f469f4acg2x\">在<b data-tag=\"uicontrol\" id=\"c5dc47b0acqb7\" class=\"uicontrol\"><b>属性</b></b>区域，单击<b data-tag=\"uicontrol\" id=\"c84d47b0acex2\" class=\"uicontrol\"><b>Windows Defender防火墙</b></b>右侧的防火墙状态。<img id=\"32f469f5acbar\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562167.jpg\" alt=\"查看防火墙策略\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"32f469f6acs3b\"><p id=\"32f469f7ac68o\">在<b data-tag=\"uicontrol\" id=\"734bd8c0actna\" class=\"uicontrol\"><b>Windows安全中心</b></b>页面，按照界面操作，关闭防火墙。<img id=\"32f469f8ac2j9\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562171.jpg\" alt=\"关闭防火墙\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"32f469f9aclgj\"><p id=\"32f469faacqid\">重新访问网站。</p><p id=\"32f469fbacjwd\">如果可以正常访问，则您需要继续检查防火墙策略配置。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/configure-windows-firewall-rules-for-windows-server-instances\">Windows Server系统的ECS实例防火墙策略的配置方法</a>。</p></li></ol><h4 id=\"32f469fdacju9\"><b>禁用或者卸载Windows实例中第三方杀毒软件后，重新访问网站</b></h4><p id=\"393a65d1b75d1\">您可以参考第三方杀毒软件对应的相关文档禁用或者卸载Windows实例中的第三方杀毒软件，然后重新访问网站。</p><h4 id=\"32f469ffacamk\"><b>运行Windows Update程序，安装最新版本的补丁</b></h4><p id=\"32f46a00ac1yq\">该操作可以排除操作系统TCP/IP协议栈自身问题，操作步骤如下：</p><ol id=\"32f46a01acc78\"><li id=\"32f46a02ach18\"><p id=\"32f46a03acxg4\">在桌面左下角，单击<img id=\"32f46a04acexg\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562062.jpg\" alt=\"搜索图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，在搜索框输入<code data-tag=\"code\" class=\"code\">update</code>，然后单击<b data-tag=\"uicontrol\" id=\"15f398f0ac9us\" class=\"uicontrol\"><b>检查更新</b></b>。</p></li><li id=\"32f46a05acdgn\"><p id=\"32f46a06acswj\">在<b data-tag=\"uicontrol\" id=\"226f17d0ac1wv\" class=\"uicontrol\"><b>Windows更新</b></b>页面，单击<b data-tag=\"uicontrol\" id=\"1fd1d7b0acoew\" class=\"uicontrol\"><b>下载</b></b>，安装最新版本的补丁。<img id=\"32f46a07acegz\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0815446761/p562184.jpg\" alt=\"打开updata更新\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"32f46a08ac2ly\"><p id=\"32f46a09acbzq\">重新访问网站。</p></li></ol><h3 id=\"32f46a0aach8a\" data-tag=\"h3\" class=\"h3\"><b>方法二：工具抓取网络包进行分析</b></h3><p id=\"32f46a0baczag\">在Windows实例上使用抓包工具（例如Wireshark）抓取数据包，根据抓包结果分析网络包中是否存在DNS解析、ARP解析或者TCP连接无法建立的问题。具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/how-to-access-a-windows-instance-from-the-internet\">Windows实例通过外部访问网络不通的处理</a>。</p></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"},
{"url": "https://help.aliyun.com/zh/ecs/support/what-do-i-do-if-i-cannot-access-a-website-hosted-on-an-instance", "content": "<section class=\"aliyun-docs-view\" id=\"aliyun-docs-view\">\n<div class=\"product-detail\">\n<section class=\"aliyun-docs-content\">\n<header class=\"aliyun-docs-view-header\">\n<div class=\"header-topbar\">\n<div class=\"header-topbar-breadcrumb\">\n <a href=\"https://help.aliyun.com/\">首页</a>\n <span><a href=\"/zh/ecs/\">云服务器 ECS</a></span>\n <span><a href=\"/zh/ecs/support/\">服务支持</a></span>\n <span><a href=\"/zh/ecs/support/troubleshooting-1/\">故障排除</a></span>\n <span><a href=\"/zh/ecs/support/ecs-instances-within-the-website-slow-or-cannot-access-problems/\">ECS实例内网站访问慢或无法访问问题</a></span>\n <span>无法访问ECS实例中运行网站的快速排查方法</span>\n </div>\n</div>\n<div class=\"header-title\">\n<h1>无法访问ECS实例中运行网站的快速排查方法</h1>\n<div class=\"header-actionbar\">\n<span class=\"update-time\">更新时间: 2023-07-25 10:38:17</span>\n</div>\n</div>\n</header>\n<div class=\"pc-markdown-container unionContainer\" id=\"pc-markdown-container\">\n<!-- 内容 -->\n<div class=\"markdown-body\">\n <div><div lang=\"zh\" class=\"icms-help-docs-content\">\n<main id=\"721238a065esc\"><p data-tag=\"shortdesc\" id=\"721cbff065y7a\" class=\"shortdesc\">本文介绍无法访问ECS实例中运行网站相关问题的快速排查方法。</p><div data-tag=\"conbody\" class=\"conbody\"><h2 id=\"ec99ac90a2rb1\"><b>问题描述</b></h2><p id=\"ec99ac91a2xtl\">您在访问ECS实例中运行的网站时，可能会遇到如下问题：</p><ul id=\"c58b7fd0a8hua\"><li id=\"653a5d41a8von\"><p id=\"653a5d40a89qk\">提示“未备案或未接入”、“网站内容与备案信息不符”。</p></li><li id=\"ec99ac95a2bme\" props=\"china\" data-cond-props=\"china\"><p id=\"ec99ac96a295y\">无法登录宝塔面板。 </p></li><li id=\"ec99ac97a2mrx\"><p id=\"ec99ac98a28xr\">浏览器提示“403”、“404”、“502”、“503”等数字类错误。 </p></li><li id=\"ec99ac99a26kg\"><p id=\"ec99ac9aa2rla\">首次搭建网站且无法访问网站。</p></li><li id=\"ec99ac9ba213s\"><p id=\"ec99ac9ca204r\">网站持续运作时突然无法访问。</p></li><li id=\"ec99ac9da2gdw\"><p id=\"ec99ac9ea29z3\">无法通过负载均衡SLB访问ECS实例中的网站。</p></li><li id=\"ec99ac9fa2tam\"><p id=\"ec99aca0a21jh\">无法访问CDN加速后的网站。</p></li><li id=\"ec99aca1a2l1m\"><p id=\"ec99aca2a2q29\">无法访问通过Web应用防火墙（WAF）防护的网站。</p></li><li id=\"62ba5c50aemy1\" props=\"china\" data-cond-props=\"china\"><p id=\"6a81a1f0ae5vb\" props=\"china\" data-cond-props=\"china\">云虚拟主机上的网站无法访问。</p></li></ul><h2 id=\"ec99aca5a2hue\"><b>问题原因</b></h2><p id=\"ec99aca6a2wib\">无法访问ECS实例中运行的网站的原因较多，此处列举较为常见的问题原因，具体原因以现场的排查结果为准。</p><ul id=\"ec99aca7a2yg7\"><li id=\"ec99aca8a2501\"><p id=\"ec99aca9a28xz\">TCP 80端口不可用。</p></li><li id=\"ec99acaaa2r7o\"><p id=\"ec99acaba2qxa\">Web服务不可用。</p></li><li id=\"ec99acaca20fb\"><p id=\"ec99acada2fr2\">网站未备案。</p></li><li id=\"ec99acaea2m7v\"><p id=\"ec99acafa24kc\">网站资源或后端服务存在异常。</p></li><li id=\"ec99acb0a25de\"><p id=\"ec99acb1a2tvr\">建站流程不标准。</p></li><li id=\"ec99acb2a2256\"><p id=\"ec99acb3a2w75\">源站本身的问题。</p></li></ul><div type=\"note\" id=\"ec99acb4a2iu9\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"ec99acb5a208c\">引发网站访问异常的相关因素及症状很多，如果您需要了解更多ECS实例中网站无法访问的原因，请参<a title=\"\" class=\"xref\" href=\"/zh/ecs/troubleshooting-and-guidelines-for-access-to-ecs-instance-exceptions\">访问ECS实例异常时的问题排查和指引</a>。</p></div></div><h2 id=\"9d54d100a3ojz\"><b>排查方法</b></h2><p id=\"ad19fca0a3ol0\">无法访问ECS实例中运行网站的现象和原因较多，您可以选择下列任意一种方法快速排查问题。</p><div outputclass=\"collapse expanded\" id=\"b596fdb0a3do3\" class=\"collapse expanded\"><h3 data-tag=\"expandable-title\" id=\"b596fdb1a394h\" class=\"expandable-title\"><b>通过流程图排查</b></h3><div data-tag=\"expandable-content\" id=\"b596fdb2a3b9e\" class=\"expandable-content\"><p id=\"b596fdb3a3b7s\">您可以根据如图所示的流程图，逐步排查问题。</p><img translate=\"yes\" placement=\"break\" alt=\"20230119184601\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3997578761/p552109.jpg\" id=\"b596fdb5a3bmz\" width=\"900\" class=\"image break\"></div></div><div outputclass=\"collapse expanded\" id=\"b596fdb6a3j6p\" class=\"collapse expanded\"><h3 data-tag=\"expandable-title\" id=\"b596fdb7a3xdf\" class=\"expandable-title\"><b>通过问题现象选择解决方案</b></h3><div data-tag=\"expandable-content\" id=\"b596fdb8a3ciy\" class=\"expandable-content\"><p id=\"b596fdb9a334r\">针对如下列举的常见问题现象，您可以快速选择对应的问题解决方案。</p><ul id=\"b596fdbaa3ox6\"><li id=\"b596fdbba3dmy\"><p id=\"b596fdbca3tb3\"><b>提示“未备案或未接入”、“网站内容与备案信息不符”</b>。</p><p id=\"b596fdbda39l4\">无论网站是通过IP地址还是通过域名对外提供服务，未备案成功前，均不允许开通网站访问服务。请备案您的网站IP或域名，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/icp-filing/product-overview/icp-filing-requirements-for-a-regular-website\">通用网站备案</a>。</p></li><li id=\"b596fdbea39b0\" props=\"china\" data-cond-props=\"china\"><p id=\"b596fdbfa3rjt\"><b>无法登录宝塔面板。</b> </p><p id=\"b596fdc0a3dht\">可能是宝塔服务未运行或未添加宝塔服务对应端口的安全组规则，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/ecs-instance-through-browser-console-login-pagoda-service-panel\">ECS实例无法登录宝塔面板控制台</a>。</p></li><li id=\"b596fdc1a3vdk\"><p id=\"b596fdc2a3moi\"><b>浏览器提示“403”、“404”、“502”、“503”等数字类错误。</b> </p><p id=\"b596fdc3a3zgl\">浏览器提示数字类错误时，通常表明客户端与服务端的网络是正常的，但网站资源或后端服务存在异常，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/analysis-of-common-status-code-to-websites-running-on-an-ecs-instance\">访问ECS实例中运行网站常见状态码的报错分析</a>。</p></li><li id=\"b596fdc4a35ku\"><p id=\"b596fdc5a3ij4\"><b>首次搭建网站且无法访问网站。</b></p><p id=\"b596fdc6a3uux\">请确保您按照标准的建站流程进行操作。更多建站流程信息，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/use-cases/quick-start\">建站零基础入门</a>。<b> </b></p></li><li id=\"b596fdd0a3ct7\" props=\"china\" data-cond-props=\"china\"><p id=\"b596fdd1a33n1\"><b>网站持续运作时突然无法访问。</b></p><p id=\"b596fdd2a3tli\">您需要对ECS实例状态、Web服务或后端数据库分别进行检查。 \n</p><ul id=\"b596fdd3a3cgd\"><li id=\"b596fdd4a3kqv\"><p id=\"b596fdd5a3og2\">ECS实例状态的检查</p><p id=\"b596fdd6a31zt\">您可以通过ECS自助诊断工具进行检查，然后根据诊断结果中的提示进行操作。 具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/examples-of-health-diagnosis-1\">诊断ECS实例的健康状态</a>。\n</p></li><li id=\"b596fdd7a3k7c\"><p id=\"b596fdd8a32p4\">Web服务或后端数据库的检查</p><p id=\"b596fdd9a37pn\">请确保Web服务和后端数据库处于运行状态。如果未运行，请检查日志并根据日志中的错误信息进行修复。 \n</p><div id=\"b596fddaa3xzp\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><ul id=\"b596fddba3uen\"><li id=\"b596fddca38xr\"><p id=\"b596fddda3d79\">网站服务的日志文件名一般为access.log或error.log，更多信息，请参见网站服务对应的官网网站。</p></li><li id=\"b596fddea3b5h\"><p id=\"b596fddfa3s6c\">网站服务后端的PHP、Java、Tomcat、数据库等服务异常时，也会导致无法访问网站。此时，请联系您的网站管理员获取帮助。</p></li></ul></div></div></li></ul></li><li id=\"b596fde0a303u\"><p id=\"b596fde1a370d\"><b>无法通过负载均衡SLB访问ECS实例中的网站</b>。</p><p id=\"b596fde2a3cj2\">ECS实例前端有负载均衡SLB时，可能是SLB实例的监听策略设置异常，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/document_detail/55206.html\">无法通过负载均衡SLB访问ECS实例中的网站</a>。</p></li><li id=\"b596fde3a3bn1\"><p id=\"b596fde4a3bvj\"><b>无法访问CDN加速后的网站</b>。</p><p id=\"b596fde5a3k4y\">您需要先判断是否为源站本身的问题，具体操作，请参见<a class=\"\" href=\"/zh/cdn/troubleshoot-unreachable-websites-after-using-alibaba-cloud-content-delivery-network-acceleration\">使用CDN加速后网站无法访问的排查步骤</a>。</p></li><li id=\"b596fde6a39jn\"><p id=\"b596fde7a3yck\"><b>无法访问通过Web应用防火墙（WAF）防护的网站</b>。</p><p id=\"b596fde8a3q03\">您需要先判断是否为源站本身的问题，再判断是否为WAF误拦截问题，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/document_detail/43463.html\">无法访问通过Web应用防火墙（WAF）防护的网站</a>。</p></li><li id=\"b596fde9a3enk\" props=\"china\" data-cond-props=\"china\"><p id=\"b596fdeaa3w26\"><b>云虚拟主机上的网站无法访问</b>。</p><p id=\"b596fdeba3o19\">如果您使用的并非ECS实例，而是云虚拟主机，则需要对云虚拟主机进行排查。 具体操作，请参见<a class=\"\" href=\"/zh/cloud-web-hosting/when-accessing-a-cloud-hosting-sites-to-visit\">虚拟主机上的网站无法访问</a>。</p></li></ul></div></div><h2 id=\"ec99acb6a2s6z\"><b>解决方案</b></h2><p id=\"cd428fb1a3w5b\">本文介绍常见的TCP 80端口和Web服务不可用导致该问题的解决方案，操作步骤如下：</p><div id=\"a4cb1b04a31yc\" outputclass=\"collapse expanded\" class=\"collapse expanded\"><h3 id=\"a744f4a0a34ej\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>TCP 80端口和Web服务不可用导致无法访问Linux实例上运行的网站</b></h3><div id=\"a4cb1b02a39mb\" data-tag=\"expandable-content\" class=\"expandable-content\"><div id=\"ad143ad0a3m0d\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"ad143ad1a32fy\">以下操作步骤以CentOS 7操作系统为例，具体操作请以您的实际操作系统为准。</p></div></div><h4 id=\"ad143ad2a30ib\"><b>TCP 80端口不可用</b></h4><ol id=\"ad143ad3a3gao\"><li id=\"ad143ad4a3qsj\"><p id=\"ad143ad5a3f5i\">远程连接Linux实例。</p><p id=\"ad143ad6a324b\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"ad143ad7a3l3q\"><p id=\"ad143ad8a3qbw\">执行以下命令，查看TCP 80端口是否被监听。 </p><pre id=\"ad143ad9a3mgd\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -an | grep 80</code></pre><p id=\"ad143adaa3trf\"> 回显示例如下，如果返回以下任意一种结果，说明已启动TCP 80端口的Web服务，即检查正常。如果有异常，请参见<a title=\"\" class=\"xref\" href=\"#ad143aeca35an\">Web服务不可用</a>进行处理。 </p><pre id=\"ad143adba38te\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN # 全网监听</code></pre><pre id=\"ad143adca3mhn\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>tcp        0      0 127.0.0.1:80            0.0.0.0:*               LISTEN # 本机监听</code></pre><div type=\"note\" id=\"ad143adda3o9o\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"ad143adea378n\">本机127.0.0.1监听会导致外网无法访问Web服务，只有本机能访问，修改为全网监听。\n</p></div></div></li><li id=\"ad143adfa3wc2\"><p id=\"ad143ae0a33q1\">查看TCP 80端口是否被放行以及连通情况是否正常。\n</p><ol id=\"ad143ae1a3kfz\"><li id=\"ad143ae2a3n2r\"><p id=\"ad143ae3a35ko\">查看实例安全组是否放行TCP 80端口，如果没有放行则需要添加安全组规则，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。</p></li><li id=\"4019fdd1a9ytc\"><p id=\"4019fdd0a96r1\">查看实例操作系统的防火墙是否开启，如果开启则建议关闭防火墙改为使用安全组，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/enable-or-disable-the-system-firewall-function-for-linux-instances\">开启或关闭Linux实例中的系统防火墙</a>。</p></li><li id=\"ad143ae6a3w02\"><p id=\"ad143ae7a3gbo\">使用telnet和traceroute命令跟踪TCP 80端口的连通情况，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/troubleshooting-for-ping-attempts-to-pass-the-server-and-port-disconnection\">能够ping通服务器的同时端口不通的排查方法</a>。</p></li></ol></li><li id=\"ad143ae8a3zb8\"><p id=\"ad143ae9a3psz\">查看云服务器带宽是否充足。</p><p id=\"ad143aeaa3lf7\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/query-and-analysis-of-system-loads-on-linux-instances\">Linux实例系统负载的查询及分析</a>。</p><p id=\"ad143aeba3p5b\">如果不足，可尝试升级实例带宽。具体操作，请参见<span props=\"china\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/108423.html\">修改带宽配置</a></span>。</p></li></ol><h4 id=\"ad143aeca35an\"><b>Web服务不可用</b></h4><ol id=\"ad143aeda3sou\"><li id=\"ad143aeea3bj2\"><p id=\"ad143aefa381h\">远程连接Linux实例。</p><p id=\"ad143af0a318n\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"ad143af1a3agv\"><p id=\"ad143af2a3fvh\">查看Web服务日志。</p><ul id=\"2867d4c1a9wvy\"><li id=\"27ff4ef0a9q0n\"><p id=\"36e82450a9kke\">执行如下命令，查看Apache的错误日志。</p><p id=\"48b8d760a9yhg\">您可以根据错误日志分析排查问题。</p><ul id=\"5b028b01a9bcl\"><li id=\"37a66b40a953w\"><p id=\"5eec2140a9i4t\">CentOS或Alinux：</p><pre id=\"wgw4gl\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>less /var/log/httpd/error_log</code></pre></li><li id=\"64f31940a9ezt\"><p id=\"68a1a250a96u4\">Ubuntu：</p><pre id=\"w97fxc\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>less /var/log/apache2/error.log</code></pre></li></ul></li><li id=\"59cb6a91a9l69\"><p id=\"59cb6a90a95tw\">执行如下命令，查看Nginx的错误日志。</p><p id=\"87cb14e0a95py\">您可以根据错误日志分析排查问题。</p><pre id=\"2kp6ic\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>less /var/log/nginx/error_log</code></pre></li></ul></li><li id=\"ad143af3a3s4o\"><p id=\"ad143af4a3fuv\">执行<code data-tag=\"code\" class=\"code\">top</code>命令，查看实例运行状态。</p><p id=\"ad143af5a3llz\">您需要查看进程是否异常，回显示例如下。</p><img id=\"c572cc10abwie\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7313826761/p560586.png\" alt=\"image\" placement=\"break\" width=\"750\" class=\"image break\"><p id=\"d956a7b0abd5p\"><code data-tag=\"code\" class=\"code\">load average</code>参数中<code data-tag=\"code\" class=\"code\">0.01</code>、<code data-tag=\"code\" class=\"code\">0.02</code>和<code data-tag=\"code\" class=\"code\">0.03</code>分别表示1分钟前、5分钟前和15分钟前到现在的系统负载平均值。一般情况下，如果这个数值除以逻辑CPU的数量大于5（具体数值需要根据实际服务器CPU处理能力以及系统使用情况而定），则表示系统在超负荷运转。此时，您可以根据进程列表中查看<code data-tag=\"code\" class=\"code\">%CPU</code> 较高的PID，定位异常进程即<code data-tag=\"code\" class=\"code\">COMMAND</code>参数值，然后根据您的系统实际情况处理该异常。</p></li><li id=\"ad143af6a3bcz\"><p id=\"ad143af7a3xts\">在控制台查看实例监控信息。</p><p id=\"ad143af8a3ni6\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/view-the-monitoring-information-of-an-ecs-instance\">查看实例监控信息</a>。</p><ul id=\"ad1461e0a3zm2\"><li id=\"ad1461e1a3dy4\"><p id=\"ad1461e2a3zon\">查看实例CPU、内存是否充足，如果不足，请参见<a class=\"\" href=\"/zh/ecs/support/query-and-case-analysis-linux-cpu-load\">云服务器ECS Linux系统CPU占用率较高问题排查思路</a>进行处理。</p></li><li id=\"ad1461e3a329q\"><p id=\"ad1461e4a3tb1\">查看实例带宽是否充足，如果不足，可尝试升级实例带宽。具体操作，请参见<span props=\"china\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/108423.html\">修改带宽配置</a></span>。</p></li></ul></li><li id=\"ad1461e5a3tbr\"><p id=\"ad1461e6a3g3o\">执行如下命令，查看实例的80端口是否有过多的TCP连接。</p><pre id=\"inigwz\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -anp |grep 80 |grep tcp</code></pre><p id=\"787f8f70ab1me\">回显示例如下。</p><img id=\"79831cc1ablzw\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0939726761/p559525.jpg\" alt=\"20230210180929\" placement=\"break\" class=\"image break\"></li><li id=\"ad1461e7a3d3j\"><p id=\"ad1461e8a31c8\">执行以下命令，统计TCP的所有连接数。 </p><pre id=\"ad1461e9a3dle\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -anp |grep tcp |wc -l</code></pre></li><li id=\"ad1461eaa35y0\"><p id=\"ad1461eba3thj\">将TCP的所有连接数与<code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>配置文件中<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数的最大值进行对比，如果TCP的所有连接数超出该最大值，则执行如下操作：\n</p><ol id=\"ad1461eca3maw\"><li id=\"ad1461eda3f5u\"><p id=\"ad1461eea33qr\">执行<code data-tag=\"code\" class=\"code\">vi /etc/sysctl.conf</code>命令，编辑<code data-tag=\"code\" class=\"code\">/etc/sysctl.conf</code>配置文件，查询<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数。<img id=\"5cdeda30a9bu6\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6010826761/p559526.jpg\" alt=\"linux连接数超出最大值1\" placement=\"break\" class=\"image break\"></p><p id=\"ad1461efa3l6t\">如果确认TCP的连接数使用很高，容易超出限制，则根据实际情况，增加<code data-tag=\"code\" class=\"code\">net.ipv4.tcp_max_tw_buckets</code>参数值的大小。</p></li><li id=\"ad1461f0a35o7\"><p id=\"ad1461f1a3n3y\">执行<code data-tag=\"code\" class=\"code\">sysctl -p</code>命令，使配置生效。</p></li></ol></li></ol></div></div><div id=\"bbbf6af4a3odk\" outputclass=\"collapse expanded\" class=\"collapse expanded\"><h3 id=\"bdc28df0a3eml\" data-tag=\"expandable-title\" class=\"expandable-title\"><b>TCP 80端口和Web服务不可用导致无法访问Windows实例上运行的网站</b></h3><div id=\"bbbf6af2a3wlx\" data-tag=\"expandable-content\" class=\"expandable-content\"><div id=\"c5873b80a30i5\" type=\"note\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"c5873b81a3lni\">以下操作步骤以Windows Server 2012 R2操作系统为例，具体操作请以您的实际操作系统为准。</p></div></div><h4 id=\"c5873b82a312b\"><b>TCP 80端口不可用</b></h4><ol id=\"c5873b83a3fkp\"><li id=\"c5873b84a3clc\"><p id=\"c5873b85a3xno\">远程连接Windows实例。</p><p id=\"c5873b86a33ui\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"5fd8d260adont\"><p id=\"5eebb340adull\">打开CMD命令提示符。</p><ol id=\"621bbd81adpnn\"><li id=\"617b5ed1ad1gc\"><p id=\"63b8a4a0adg3t\">单击桌面左下角<img id=\"63b8a4a1ad4rx\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556011.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，然后单击<img id=\"63b8a4a2adn7u\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556012.jpg\" alt=\"搜索图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标。</p></li><li id=\"65346f31adar7\"><p id=\"66eaaab0adnyk\">在搜索框输入<code data-tag=\"code\" class=\"code\">cmd</code>。<img id=\"66eaaab1ad9be\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556018.jpg\" alt=\"单击命令提示符\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"6b97df10adnew\"><p id=\"6b97df11adl30\">单击<b data-tag=\"uicontrol\" id=\"f0f5deb0a5pla\" class=\"uicontrol\">命令提示符</b>。</p><p id=\"6b97df12adqh9\">进入命令提示符。<img id=\"6b97df13ade6k\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556021.jpg\" alt=\"进入命令提示符\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"0e27fdf0aby33\"><p id=\"0e27d6e0ab7r4\">执行以下命令，查看TCP 80端口是否被监听。 </p><pre id=\"c5873b8ca3wqz\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -ano | findstr :80</code></pre><p id=\"c5873b8da32kp\">回显示例如下，如果返回以下任意一种结果，说明已启动TCP 80端口的Web服务，即检查正常。如果有异常，请参见<a title=\"\" class=\"xref\" href=\"#c5873b9ea3v3k\">Web服务不可用</a>进行处理。 </p><pre id=\"c5873b8ea3f35\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>TCP    0.0.0.0:80           0.0.0.0:0              LISTENING       1172 # 表示全网监听\nTCP    127.0.0.1:80         0.0.0.0:0              LISTENING       1172 # 表示本地监听</code></pre><div type=\"note\" id=\"c5873b8fa3dnw\" class=\"note note-note\"><div class=\"note-icon-wrapper\"><i class=\"icon-note note note\"></i></div><div class=\"noteContentSpan\"><strong>说明 </strong><p id=\"c5873b90a36i6\">本机127.0.0.1监听会导致外网无法访问Web服务，只有本机能访问，可执行<code data-tag=\"code\" class=\"code\">netsh http delete iplisten ipaddress= 127.0.0.1:80</code>命令，修改为全网监听。 \n</p></div></div></li><li id=\"c5873b91a3j4l\"><p id=\"c5873b92a35ku\">查看TCP 80端口是否被放行以及连通情况是否正常。\n</p><ol id=\"c5873b93a3a7f\"><li id=\"c5873b94a3ma6\"><p id=\"c5873b95a35iu\">查看实例安全组是否放行80端口，如果没有放行则需要添加安全组规则，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/add-a-security-group-rule\">添加安全组规则</a>。</p></li><li id=\"c5873b96a30p6\"><p id=\"c5873b97a3p1j\">查看实例操作系统的防火墙是否开启，如果开启则建议关闭防火墙改为使用安全组，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/configure-windows-firewall-rules-for-windows-server-instances\">Windows Server系统的ECS实例防火墙策略的配置方法</a>。</p></li><li id=\"c5873b98a32qr\"><p id=\"c5873b99a367t\">使用telnet和tracert命令跟踪80端口的连通情况，具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/support/troubleshooting-for-ping-attempts-to-pass-the-server-and-port-disconnection\">能够ping通服务器的同时端口不通的排查方法</a>。</p></li></ol></li><li id=\"c5873b9aa3nwj\"><p id=\"c5873b9ba38an\">查看云服务器带宽是否充足。</p><p id=\"c5873b9ca37dm\">具体操作，请参见<a class=\"\" href=\"/zh/ecs/query-and-analysis-of-the-system-load-of-a-windows-instance\">Windows实例带宽和CPU跑满或跑高排查</a>。</p><p id=\"c5873b9da385q\">如果不足，可尝试升级实例带宽。具体操作，请参见<span props=\"china\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/108423.html\">修改带宽配置</a></span>。</p></li></ol><h4 id=\"c5873b9ea3v3k\"><b>Web服务不可用</b></h4><ol id=\"c5873b9fa3oti\"><li id=\"c5873ba0a32y7\"><p id=\"c5873ba1a3b8a\">远程连接Windows实例。</p><p id=\"c5873ba2a3vl2\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/connection-methods\">连接方式概述</a>。</p></li><li id=\"c5873ba3a3at5\"><p id=\"c5873ba4a3q62\">查看Web服务日志。</p><ul id=\"b3374c71abact\"><li id=\"c5873ba6a3mco\"><p id=\"c5873ba7a3mb9\">方法一：浏览日志文件夹。</p><p id=\"d79cecf0ab7q9\">Windows Server 2008 R2及以上版本操作系统的日志路径为：<code data-tag=\"code\" class=\"code\">C:\\inetpub\\logs\\LogFiles </code>。</p></li><li id=\"b9f9f351abe7e\"><p id=\"b9f9f350abukw\">方法二：查看IIS管理器。</p><ol id=\"f0191561abhqb\"><li id=\"efd92631ab82x\"><p id=\"efd92630absbi\">选择<img id=\"0bda0461abogi\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556011.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\"><b data-tag=\"uicontrol\" id=\"73e83c00a3e9g\" class=\"uicontrol\"> &gt; Windows管理工具</b><b data-tag=\"uicontrol\" id=\"25b21780abi9y\" class=\"uicontrol\"> &gt; Internet Information Services（(IIS）管理器</b>。</p></li><li id=\"3bb85df1abb3z\"><p id=\"3bb85df0ab26o\">在待查看的Web服务主页IIS区域，单击<b data-tag=\"uicontrol\" id=\"4f0be070abik7\" class=\"uicontrol\">日志</b>，然后在<b data-tag=\"uicontrol\" id=\"79e08990abozr\" class=\"uicontrol\">操作</b>列单击<b data-tag=\"uicontrol\" id=\"7be29b20ab4d3\" class=\"uicontrol\">浏览</b>。<img id=\"e7eadb20abfvj\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7313826761/p561063.jpg\" alt=\"查看web日志（Windows）新图\" placement=\"break\" class=\"image break\"></p></li><li id=\"eb0cb491abr9w\"><p id=\"eb0cb490ablla\">在<b data-tag=\"uicontrol\" id=\"3f2d9210abq1r\" class=\"uicontrol\">日志</b>页面，按照您的实际情况修改日志存放路径并复制对应地址粘贴到<b data-tag=\"uicontrol\" id=\"18b11f80ab7vs\" class=\"uicontrol\">文件资源管理器</b>，然后按<code data-tag=\"code\" class=\"code\">Enter</code>键。</p><p id=\"1e117740abcmt\">您可以在<b data-tag=\"uicontrol\" id=\"3ad1b200abwdz\" class=\"uicontrol\">文件资源管理器</b>中查看对应日志文件夹。<img id=\"aa42e690ablyp\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7313826761/p561072.jpg\" alt=\"查看日志路径新\" placement=\"break\" class=\"image break\"></p></li></ol></li></ul></li><li id=\"b25243a0ab2ml\"><p id=\"b2521c90abtg5\">通过任务管理器查看实例运行状态，查看是否有异样进程。</p><ol id=\"bab87671abu1e\"><li id=\"ba29f210abeyh\"><p id=\"ba29cb00abcbg\">在桌面单击鼠标右键，然后选择<b data-tag=\"uicontrol\" id=\"cef6a710ab8dq\" class=\"uicontrol\">任务管理器</b>。</p></li><li id=\"cc47b3b0ab7ad\"><p id=\"cc478ca0ab7h6\">单击<b data-tag=\"uicontrol\" id=\"d729a6d0abokz\" class=\"uicontrol\">进程</b>页签。</p><p id=\"d97f2f90abhpb\">您可以在任务管理器中查看进程的CPU、内存信息，定位异常进程。<img id=\"4cb29c40ab6sk\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7313826761/p561076.jpg\" alt=\"在任务管理器中查看异常进程新\" placement=\"break\" class=\"image break\"></p></li></ol></li><li id=\"c5873ba8a3omy\"><p id=\"c5873ba9a3eqx\">在控制台查看实例监控信息。</p><p id=\"c5873baaa38x0\">具体操作，请参见<a title=\"\" class=\"xref\" href=\"/zh/ecs/user-guide/view-the-monitoring-information-of-an-ecs-instance\">查看实例监控信息</a>。</p><ul id=\"c5873baba35cj\"><li id=\"c5873baca3jns\"><p id=\"c5873bada3iys\">查看实例CPU、内存是否充足，如果不足，请参见<a class=\"\" href=\"/zh/ecs/query-and-analysis-of-the-system-load-of-a-windows-instance\">Windows实例带宽和CPU跑满或跑高排查</a>进行处理。</p></li><li id=\"c5873baea3iln\"><p id=\"c5873bafa3y0x\">查看实例带宽是否充足，如果不足，可尝试升级实例带宽。具体操作，请参见<span props=\"china\"><a class=\"\" target=\"_blank\" href=\"https://help.aliyun.com/document_detail/108423.html\">修改带宽配置</a></span>。</p></li></ul></li><li id=\"c5873bb0a3i9q\"><p id=\"c5873bb1a3acs\">查看实例80端口是否有过多的TCP连接。 \n</p><ol id=\"482b3801abstr\"><li id=\"35ad2df0abek0\"><p id=\"35ad2df1abmue\">打开CMD命令提示符。</p><ol id=\"35ad2df2abmem\"><li id=\"35ad2df3ab20h\"><p id=\"35ad2df4abmq7\">单击桌面左下角<img id=\"35ad2df5abi4w\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556011.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，然后单击<img id=\"35ad2df6ab4sw\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556012.jpg\" alt=\"搜索图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标。</p></li><li id=\"35ad2df7ab5qf\"><p id=\"35ad2df8abp6e\">在搜索框输入<code data-tag=\"code\" class=\"code\">cmd</code>。<img id=\"35ad2df9ab9i3\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556018.jpg\" alt=\"单击命令提示符\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"35ad2dfaabim0\"><p id=\"35ad2dfbab6hi\">单击<b data-tag=\"uicontrol\" id=\"46ff95d0ady22\" class=\"uicontrol\">命令提示符</b>。</p><p id=\"35ad2dfcabynf\">进入命令提示符。<img id=\"35ad2dfdabyjl\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556021.jpg\" alt=\"进入命令提示符\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li></ol></li><li id=\"30985e21ab9nm\"><p id=\"30985e20abzfp\">依次执行以下命令，统计TCP连接数。 </p><pre id=\"c5876293a3zt2\" data-tag=\"codeblock\" outputclass=\"language-javascript\" class=\"pre codeblock language-javascript\"><code>netstat -n |find /i \"time_wait\" /c\nnetstat -n |find /i \"close_wait\" /c\nnetstat -n |find /i \"established\" /c</code></pre><p id=\"6789cbb0abcjf\">默认动态端口的数量为16384个（从49152起始，到65535结束），如果<code data-tag=\"code\" class=\"code\">close_wait</code>数量接近动态端口的数量，则表示存在大量的<code data-tag=\"code\" class=\"code\">close_wait</code>连接未释放，您需要执行下一步，修改注册表来降低Time Wait时间。<img id=\"d4407420abr5l\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8313826761/p561079.jpg\" alt=\"统计TCP连接数\" placement=\"break\" class=\"image break\"></p></li><li id=\"955e7390ad7uq\"><p id=\"99e1d8d1ad9z4\">打开注册表编辑器。</p><ol id=\"99e1d8d2adp2j\"><li id=\"99e1d8d3adymn\"><p id=\"99e1d8d4ad90t\">单击桌面左下角<img id=\"99e1d8d5admxo\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556011.jpg\" alt=\"开始图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标，然后单击<img id=\"99e1d8d6ad7l1\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2573995761/p556012.jpg\" alt=\"搜索图标\" placement=\"inline\" width=\"25\" class=\"image inline\">图标。</p></li><li id=\"99e1d8d7adoby\"><p id=\"99e1d8d8ad2nb\">在搜索框输入<code data-tag=\"code\" class=\"code\">regedit</code>。<img id=\"99e1d8d9adiq4\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p556886.jpg\" alt=\"打开注册表编辑器\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"99e1d8daada0a\"><p id=\"99e1d8dbadyd7\">单击<b data-tag=\"uicontrol\" id=\"b1762560a6yia\" class=\"uicontrol\">regedit</b>。</p><p id=\"99e1d8dcadarg\">进入注册表编辑器。<img id=\"99e1d8ddadwrf\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p556888.jpg\" alt=\"2012注册表编辑器\" placement=\"break\" width=\"750\" class=\"image break\"></p></li></ol></li><li id=\"c69fced1abwoo\"><p id=\"a6818181adeu8\">在注册表编辑器的<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services&gt;Tcpip&gt;Parameters</code>路径下，将注册表项<code data-tag=\"code\" class=\"code\">TcpTimedWaitDelay</code>的数值数据设置为十进制数值<code data-tag=\"code\" class=\"code\">30</code><b>。</b></p><p id=\"a6818182advgz\">如果<code data-tag=\"code\" class=\"code\">TcpTimedWaitDelay</code>项不存在，请新建对应注册表项，然后再修改数值数据。以<code data-tag=\"code\" class=\"code\">TcpTimedWaitDelay</code>不存在为例，操作如下：</p><ol id=\"a6818183ad6pn\"><li id=\"a6818184adgkx\"><p id=\"a6818185ad0rc\">在注册表编辑器的<code data-tag=\"code\" class=\"code\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services&gt;Tcpip&gt;Parameters</code>路径下，右键单击注册表项空白区域，然后选择<b data-tag=\"uicontrol\" id=\"3aa406c0a68n2\" class=\"uicontrol\">新建（N） &gt; DWORD （32 位）值</b>。<img id=\"a6818186adcee\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p556899.jpg\" alt=\"新建注册表项\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"a6818187adpvq\"><p id=\"a6818188adndn\">输入<code data-tag=\"code\" class=\"code\">TcpTimedWaitDelay</code>，按<code data-tag=\"code\" class=\"code\">Enter</code>键。</p></li><li id=\"a6818189adr2i\"><p id=\"a681818aadfsi\">右键单击注册表项<code data-tag=\"code\" class=\"code\">TcpTimedWaitDelay</code>，然后单击<b data-tag=\"uicontrol\" id=\"99705e10a64cs\" class=\"uicontrol\">修改</b>。<img id=\"a681818badl15\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p556905.jpg\" alt=\"单击修改注册表项\" placement=\"break\" width=\"750\" class=\"image break\"></p></li><li id=\"a681818cade9r\"><p id=\"a681818dadssu\">在对话框中，勾选<b data-tag=\"uicontrol\" id=\"f5ddddd0a6ccz\" class=\"uicontrol\">十进制</b>，然后将<b data-tag=\"uicontrol\" id=\"f8e9be40a6bgg\" class=\"uicontrol\">数值数据</b>设置为<code data-tag=\"code\" class=\"code\">30</code><b>。</b><img id=\"a681818eads59\" src=\"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6920006761/p556909.jpg\" alt=\"需改数值数据为30\" placement=\"break\" class=\"image break\"></p></li><li id=\"a681818fadglp\"><p id=\"a6818190adazf\">单击<b data-tag=\"uicontrol\" id=\"2f3e9650a6b2t\" class=\"uicontrol\">确定</b>。</p></li></ol></li></ol></div></div></div></main>\n\n</div></div>\n </div>\n</div>\n</section>\n<div class=\"aliyun-docs-synopsis\" id=\"aliyun-docs-synopsis\">\n</div>\n</div>\n</section>"}
]